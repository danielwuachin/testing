"use strict";(self.webpackChunksellerCenter=self.webpackChunksellerCenter||[]).push([[746],{9746:(Kr,ae,u)=>{u.r(ae),u.d(ae,{MantenedoresModule:()=>zr});var l=u(4006),d=u(6895),M=u(7579),e=u(4650);class Ie{constructor(o=!1,t,n=!0){this._multiple=o,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new M.x,t&&t.length&&(o?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...o){this._verifyValueAssignment(o),o.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...o){this._verifyValueAssignment(o),o.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(o){this.isSelected(o)?this.deselect(o):this.select(o)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(o){return this._selection.has(o)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(o){this._multiple&&this.selected&&this._selected.sort(o)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(o){this.isSelected(o)||(this._multiple||this._unmarkAll(),this._selection.add(o),this._emitChanges&&this._selectedToEmit.push(o))}_unmarkSelected(o){this.isSelected(o)&&(this._selection.delete(o),this._emitChanges&&this._deselectedToEmit.push(o))}_unmarkAll(){this.isEmpty()||this._selection.forEach(o=>this._unmarkSelected(o))}_verifyValueAssignment(o){}}var H=u(5191),se=u(1135),E=u(9646),le=u(5698),Ne=u(9300),Y=u(2722),L=u(1281);u(445);class Fe extends class Le{constructor(){this.expansionModel=new Ie(!0)}toggle(o){this.expansionModel.toggle(this._trackByValue(o))}expand(o){this.expansionModel.select(this._trackByValue(o))}collapse(o){this.expansionModel.deselect(this._trackByValue(o))}isExpanded(o){return this.expansionModel.isSelected(this._trackByValue(o))}toggleDescendants(o){this.expansionModel.isSelected(this._trackByValue(o))?this.collapseDescendants(o):this.expandDescendants(o)}collapseAll(){this.expansionModel.clear()}expandDescendants(o){let t=[o];t.push(...this.getDescendants(o)),this.expansionModel.select(...t.map(n=>this._trackByValue(n)))}collapseDescendants(o){let t=[o];t.push(...this.getDescendants(o)),this.expansionModel.deselect(...t.map(n=>this._trackByValue(n)))}_trackByValue(o){return this.trackBy?this.trackBy(o):o}}{constructor(o,t){super(),this.getChildren=o,this.options=t,this.options&&(this.trackBy=this.options.trackBy)}expandAll(){this.expansionModel.clear();const o=this.dataNodes.reduce((t,n)=>[...t,...this.getDescendants(n),n],[]);this.expansionModel.select(...o.map(t=>this._trackByValue(t)))}getDescendants(o){const t=[];return this._getDescendants(t,o),t.splice(1)}_getDescendants(o,t){o.push(t);const n=this.getChildren(t);Array.isArray(n)?n.forEach(r=>this._getDescendants(o,r)):(0,H.b)(n)&&n.pipe((0,le.q)(1),(0,Ne.h)(Boolean)).subscribe(r=>{for(const a of r)this._getDescendants(o,a)})}}const O=new e.OlP("CDK_TREE_NODE_OUTLET_NODE");let D=(()=>{class i{constructor(t,n){this.viewContainer=t,this._node=n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.s_b),e.Y36(O,8))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkTreeNodeOutlet",""]]}),i})();class Me{constructor(o){this.$implicit=o}}let P=(()=>{class i{constructor(t){this.template=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.Rgc))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),i})(),S=(()=>{class i{constructor(t,n){this._differs=t,this._changeDetectorRef=n,this._onDestroy=new M.x,this._levels=new Map,this.viewChange=new se.X({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const t=this._nodeDefs.filter(n=>!n.when);this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;!function Ue(i){return i&&"function"==typeof i.connect}(this._dataSource)?(0,H.b)(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=(0,E.of)(this._dataSource)):t=this._dataSource.connect(this),t&&(this._dataSubscription=t.pipe((0,Y.R)(this._onDestroy)).subscribe(n=>this.renderNodeChanges(n)))}renderNodeChanges(t,n=this._dataDiffer,r=this._nodeOutlet.viewContainer,a){const s=n.diff(t);!s||(s.forEachOperation((c,p,g)=>{if(null==c.previousIndex)this.insertNode(t[g],g,r,a);else if(null==g)r.remove(p),this._levels.delete(c.item);else{const h=r.get(p);r.move(h,g)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,n){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(a=>a.when&&a.when(n,t))||this._defaultNodeDef}insertNode(t,n,r,a){const s=this._getNodeDef(t,n),c=new Me(t);c.level=this.treeControl.getLevel?this.treeControl.getLevel(t):typeof a<"u"&&this._levels.has(a)?this._levels.get(a)+1:0,this._levels.set(t,c.level),(r||this._nodeOutlet.viewContainer).createEmbeddedView(s.template,c,n),A.mostRecentTreeNode&&(A.mostRecentTreeNode.data=t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.ZZ4),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["cdk-tree"]],contentQueries:function(t,n,r){if(1&t&&e.Suo(r,P,5),2&t){let a;e.iGM(a=e.CRH())&&(n._nodeDefs=a)}},viewQuery:function(t,n){if(1&t&&e.Gf(D,7),2&t){let r;e.iGM(r=e.CRH())&&(n._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,n){1&t&&e.GkF(0,0)},dependencies:[D],encapsulation:2}),i})(),A=(()=>{class i{constructor(t,n){this._elementRef=t,this._tree=n,this._destroyed=new M.x,this._dataChanges=new M.x,i.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function De(i){let o=i.parentElement;for(;o&&!Je(o);)o=o.parentElement;return o?o.classList.contains("cdk-nested-tree-node")?(0,L.su)(o.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){i.mostRecentTreeNode===this&&(i.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}}return i.mostRecentTreeNode=null,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(S))},i.\u0275dir=e.lG2({type:i,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,n){2&t&&e.uIk("aria-expanded",n.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),i})();function Je(i){const o=i.classList;return!(!o?.contains("cdk-nested-tree-node")&&!o?.contains("cdk-tree"))}let W=(()=>{class i extends A{constructor(t,n,r){super(t,n),this._differs=r}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy);const t=this._tree.treeControl.getChildren(this.data);Array.isArray(t)?this.updateChildrenNodes(t):(0,H.b)(t)&&t.pipe((0,Y.R)(this._destroyed)).subscribe(n=>this.updateChildrenNodes(n)),this.nodeOutlet.changes.pipe((0,Y.R)(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(t){const n=this._getNodeOutlet();t&&(this._children=t),n&&this._children?this._tree.renderNodeChanges(this._children,this._dataDiffer,n.viewContainer,this._data):this._dataDiffer.diff([])}_clear(){const t=this._getNodeOutlet();t&&(t.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){const t=this.nodeOutlet;return t&&t.find(n=>!n._node||n._node===this)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(S),e.Y36(e.ZZ4))},i.\u0275dir=e.lG2({type:i,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,n,r){if(1&t&&e.Suo(r,D,5),2&t){let a;e.iGM(a=e.CRH())&&(n.nodeOutlet=a)}},hostAttrs:[1,"cdk-nested-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["cdkNestedTreeNode"],features:[e._Bn([{provide:A,useExisting:i},{provide:O,useExisting:i}]),e.qOj]}),i})(),ee=(()=>{class i{constructor(t,n){this._tree=t,this._treeNode=n,this._recursive=!1}get recursive(){return this._recursive}set recursive(t){this._recursive=(0,L.Ig)(t)}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S),e.Y36(A))},i.\u0275dir=e.lG2({type:i,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,n){1&t&&e.NdJ("click",function(a){return n._toggle(a)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),i})(),Qe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();var q=u(3238),Ye=u(6451),U=u(4004);const Oe=(0,q.sb)((0,q.Id)(A));let ce=(()=>{class i extends Oe{constructor(t,n,r){super(t,n),this.tabIndex=Number(r)||0}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(S),e.$8M("tabindex"))},i.\u0275dir=e.lG2({type:i,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[e._Bn([{provide:A,useExisting:i}]),e.qOj]}),i})(),de=(()=>{class i extends P{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275dir=e.lG2({type:i,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[e._Bn([{provide:P,useExisting:i}]),e.qOj]}),i})(),ue=(()=>{class i extends W{constructor(t,n,r,a){super(t,n,r),this._disabled=!1,this.tabIndex=Number(a)||0}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,L.Ig)(t)}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=t??0}ngOnInit(){super.ngOnInit()}ngAfterContentInit(){super.ngAfterContentInit()}ngOnDestroy(){super.ngOnDestroy()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(S),e.Y36(e.ZZ4),e.$8M("tabindex"))},i.\u0275dir=e.lG2({type:i,selectors:[["mat-nested-tree-node"]],hostAttrs:[1,"mat-nested-tree-node"],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex",node:["matNestedTreeNode","node"]},exportAs:["matNestedTreeNode"],features:[e._Bn([{provide:W,useExisting:i},{provide:A,useExisting:i},{provide:O,useExisting:i}]),e.qOj]}),i})(),B=(()=>{class i{constructor(t,n){this.viewContainer=t,this._node=n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.s_b),e.Y36(O,8))},i.\u0275dir=e.lG2({type:i,selectors:[["","matTreeNodeOutlet",""]],features:[e._Bn([{provide:D,useExisting:i}])]}),i})(),pe=(()=>{class i extends S{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tree"]],viewQuery:function(t,n){if(1&t&&e.Gf(B,7),2&t){let r;e.iGM(r=e.CRH())&&(n._nodeOutlet=r.first)}},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[e._Bn([{provide:S,useExisting:i}]),e.qOj],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(t,n){1&t&&e.GkF(0,0)},dependencies:[B],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),i})(),ge=(()=>{class i extends ee{}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275dir=e.lG2({type:i,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[e._Bn([{provide:ee,useExisting:i}]),e.qOj]}),i})(),Be=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[Qe,q.BQ],q.BQ]}),i})();class Re extends class qe{}{constructor(){super(...arguments),this._data=new se.X([])}get data(){return this._data.value}set data(o){this._data.next(o)}connect(o){return(0,Ye.T)(o.viewChange,this._data).pipe((0,U.U)(()=>this.data))}disconnect(){}}var I=u(529),$e=u(2340);let b=(()=>{class i{constructor(t){this.http=t,this.apiURL=$e.N.apiUrl}getCategoria(t){return this.http.get(`${this.apiURL}categoria/${t}`)}getCategoriaPadre(t){return this.http.get(`${this.apiURL}categoria/categoriaPadre/${t}`)}getCategoriasPadreOrdenadas(t){return this.http.get(`${this.apiURL}categoria/categoriaspadreordenadas/${t}`)}actualizarCategoria(t,n){return this.http.put(`${this.apiURL}categoria/${t}`,n)}postCategoria(t){return this.http.post(`${this.apiURL}categoria`,t)}getCatxEmpresa(t){return this.http.get(`${this.apiURL}categoria/empresa/${t}`)}deleteFile(t){return this.http.delete(`${this.apiURL}categoria/${t}`)}deleteCategoria(t){return this.http.delete(`${this.apiURL}categoria/${t}`)}actualizarCategoriaImagen(t,n){let r=new FormData;r.append("vch_urlcabeceraecommerce",t.vch_urlcabeceraecommerce);const s=new I.aW("PUT",`${this.apiURL}categoria/imagen/${n}`,r,{reportProgress:!0,responseType:"json"});return this.http.request(s)}actualizarImagen(t,n){let r=new FormData;r.append("vch_urlproddestacado",t.vch_urlproddestacado);const s=new I.aW("PUT",`${this.apiURL}categoria/imagenProducto/${n}`,r,{reportProgress:!0,responseType:"json"});return this.http.request(s)}deleteProductoxCat(t,n){return this.http.put(`${this.apiURL}productoxcategoria/prodxCat/${t}`,n)}getTecnicos(t){return this.http.get(`${this.apiURL}usuario/tecnico/list/${t}`)}getTecnico(t){return this.http.get(`${this.apiURL}usuario/tecnico/${t}`)}addTecnico(t){return this.http.post(`${this.apiURL}usuario`,t)}upTecnico(t){return this.http.put(`${this.apiURL}usuario/${t.id}`,t)}addDisponibilidad(t){return this.http.post(`${this.apiURL}disponibilidad`,t)}deleteDisponibilidad(t){return this.http.post(`${this.apiURL}disponibilidad/delete`,t)}getEmpresa(t){return this.http.get(`${this.apiURL}empresa/${t}`)}addFile(t,n){const r=`${this.apiURL}empresa/banner/${n}`;return console.log(t),this.http.post(r,t)}getBodegas(t){return this.http.get(`${this.apiURL}bodega/empresa/${t}`)}getBodega(t){return this.http.get(`${this.apiURL}bodega/${t}`)}postBodega(t,n){return this.http.post(`${this.apiURL}bodega/${t}`,n)}putBodega(t,n){return this.http.put(`${this.apiURL}bodega/${t}`,n)}getSkuSyncsXempresa(t){return this.http.get(`${this.apiURL}skusync/empresa/${t}`)}getSkuSyncSingle(t,n){return this.http.get(`${this.apiURL}skusync/${t}/${n}`)}getEmpresas(){return this.http.get(`${this.apiURL}empresa`)}postSkuSync(t){return this.http.post(`${this.apiURL}skusync`,t)}putSkuSync(t,n,r){return this.http.put(`${this.apiURL}skusync/${n}/${r}`,t)}deleteSkuSync(t,n){return this.http.delete(`${this.apiURL}skusync/${t}/${n}`)}getAllClients(){return this.http.get(`${this.apiURL}client`)}getClientDetail(t){return this.http.get(`${this.apiURL}client/${t}`)}getSingleGroup(t){return this.http.get(`${this.apiURL}group/${t}`)}getAllCarrousels(){return this.http.get(`${this.apiURL}group/carrousel`)}postCreateGroup(t){return this.http.post(`${this.apiURL}group`,t)}putUpdateGroup(t,n){return this.http.put(`${this.apiURL}group/${t}`,n)}deleteGroup(t){return this.http.delete(`${this.apiURL}group/${t}`)}getProductsPerCarrousel(t){return this.http.get(`${this.apiURL}productpergroup/${t}`)}postAddProductToCarrousel(t){return this.http.post(`${this.apiURL}productpergroup`,t)}deleteProductFromCarrousel(t){return this.http.post(`${this.apiURL}productpergroup/multipledelete`,t)}getTag(t){return this.http.get(`${this.apiURL}tag/${t}`)}getAllTags(){return this.http.get(`${this.apiURL}tag`)}postCreateTag(t){return this.http.post(`${this.apiURL}tag`,t)}putUpdateTag(t,n){return this.http.put(`${this.apiURL}tag/${t}`,n)}deleteTag(t){return this.http.post(`${this.apiURL}tag/multipledelete`,t)}getNVSAP(t){let n=`id_empresa=${t.id_empresa}&fechaini=${t.fechaini}&fechafin=${t.fechafin}`;return t.nv&&(n+=`&nv=${t.nv}`),t.vendedores&&(n+=`&vendedores=${t.vendedores.toString()}`),console.log(n),this.http.get(`${this.apiURL}sap/?${n}`)}postUpdateSaleSync(t){return this.http.post(`${this.apiURL}sap/venta/update`,t)}getVendedoresSAP(t){return this.http.get(`${this.apiURL}sap/vendedor/a0151a29-0deb-11ed-9d86-065d6ce605ce`)}postCreateSaleSync(t){return this.http.post(`${this.apiURL}sap/venta/create`,t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(I.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Z=u(3165),x=u(466),_=u(4669),m=u(9132),v=u(8361),Ve=u(2843),me=u(4128),je=u(727),te=u(8505),ze=u(262),he=u(8746),Ke=u(3099),R=u(1481);const He=["*"];let $;function J(i){return function We(){if(void 0===$&&($=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&($=i.trustedTypes.createPolicy("angular#components",{createHTML:o=>o}))}return $}()?.createHTML(i)||i}function _e(i){return Error(`Unable to find icon with the name "${i}"`)}function fe(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function ve(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class N{constructor(o,t,n){this.url=o,this.svgText=t,this.options=n}}let V=(()=>{class i{constructor(t,n,r,a){this._httpClient=t,this._sanitizer=n,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(t,n,r){return this.addSvgIconInNamespace("",t,n,r)}addSvgIconLiteral(t,n,r){return this.addSvgIconLiteralInNamespace("",t,n,r)}addSvgIconInNamespace(t,n,r,a){return this._addSvgIconConfig(t,n,new N(r,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,n,r,a){const s=this._sanitizer.sanitize(e.q3G.HTML,r);if(!s)throw ve(r);const c=J(s);return this._addSvgIconConfig(t,n,new N("",c,a))}addSvgIconSet(t,n){return this.addSvgIconSetInNamespace("",t,n)}addSvgIconSetLiteral(t,n){return this.addSvgIconSetLiteralInNamespace("",t,n)}addSvgIconSetInNamespace(t,n,r){return this._addSvgIconSetConfig(t,new N(n,null,r))}addSvgIconSetLiteralInNamespace(t,n,r){const a=this._sanitizer.sanitize(e.q3G.HTML,n);if(!a)throw ve(n);const s=J(a);return this._addSvgIconSetConfig(t,new N("",s,r))}registerFontClassAlias(t,n=t){return this._fontCssClassesByAlias.set(t,n),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const n=this._sanitizer.sanitize(e.q3G.RESOURCE_URL,t);if(!n)throw fe(t);const r=this._cachedIconsByUrl.get(n);return r?(0,E.of)(j(r)):this._loadSvgIconFromConfig(new N(t,null)).pipe((0,te.b)(a=>this._cachedIconsByUrl.set(n,a)),(0,U.U)(a=>j(a)))}getNamedSvgIcon(t,n=""){const r=be(n,t);let a=this._svgIconConfigs.get(r);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(n,t),a)return this._svgIconConfigs.set(r,a),this._getSvgFromConfig(a);const s=this._iconSetConfigs.get(n);return s?this._getSvgFromIconSetConfigs(t,s):(0,Ve._)(_e(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,E.of)(j(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,U.U)(n=>j(n)))}_getSvgFromIconSetConfigs(t,n){const r=this._extractIconWithNameFromAnySet(t,n);if(r)return(0,E.of)(r);const a=n.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe((0,ze.K)(c=>{const g=`Loading icon set URL: ${this._sanitizer.sanitize(e.q3G.RESOURCE_URL,s.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(g)),(0,E.of)(null)})));return(0,me.D)(a).pipe((0,U.U)(()=>{const s=this._extractIconWithNameFromAnySet(t,n);if(!s)throw _e(t);return s}))}_extractIconWithNameFromAnySet(t,n){for(let r=n.length-1;r>=0;r--){const a=n[r];if(a.svgText&&a.svgText.toString().indexOf(t)>-1){const s=this._svgElementFromConfig(a),c=this._extractSvgIconFromSet(s,t,a.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,te.b)(n=>t.svgText=n),(0,U.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,E.of)(null):this._fetchIcon(t).pipe((0,te.b)(n=>t.svgText=n))}_extractSvgIconFromSet(t,n,r){const a=t.querySelector(`[id="${n}"]`);if(!a)return null;const s=a.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const c=this._svgElementFromString(J("<svg></svg>"));return c.appendChild(s),this._setSvgAttributes(c,r)}_svgElementFromString(t){const n=this._document.createElement("DIV");n.innerHTML=t;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const n=this._svgElementFromString(J("<svg></svg>")),r=t.attributes;for(let a=0;a<r.length;a++){const{name:s,value:c}=r[a];"id"!==s&&n.setAttribute(s,c)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&n.appendChild(t.childNodes[a].cloneNode(!0));return n}_setSvgAttributes(t,n){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),n&&n.viewBox&&t.setAttribute("viewBox",n.viewBox),t}_fetchIcon(t){const{url:n,options:r}=t,a=r?.withCredentials??!1;if(!this._httpClient)throw function Xe(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(e.q3G.RESOURCE_URL,n);if(!s)throw fe(n);const c=this._inProgressUrlFetches.get(s);if(c)return c;const p=this._httpClient.get(s,{responseType:"text",withCredentials:a}).pipe((0,U.U)(g=>J(g)),(0,he.x)(()=>this._inProgressUrlFetches.delete(s)),(0,Ke.B)());return this._inProgressUrlFetches.set(s,p),p}_addSvgIconConfig(t,n,r){return this._svgIconConfigs.set(be(t,n),r),this}_addSvgIconSetConfig(t,n){const r=this._iconSetConfigs.get(t);return r?r.push(n):this._iconSetConfigs.set(t,[n]),this}_svgElementFromConfig(t){if(!t.svgElement){const n=this._svgElementFromString(t.svgText);this._setSvgAttributes(n,t.options),t.svgElement=n}return t.svgElement}_getIconConfigFromResolvers(t,n){for(let r=0;r<this._resolvers.length;r++){const a=this._resolvers[r](n,t);if(a)return tt(a)?new N(a.url,null,a.options):new N(a,null)}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(I.eN,8),e.LFG(R.H7),e.LFG(d.K0,8),e.LFG(e.qLn))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function j(i){return i.cloneNode(!0)}function be(i,o){return i+":"+o}function tt(i){return!(!i.url||!i.options)}const nt=(0,q.pj)(class{constructor(i){this._elementRef=i}}),it=new e.OlP("mat-icon-location",{providedIn:"root",factory:function ot(){const i=(0,e.f3M)(d.K0),o=i?i.location:null;return{getPathname:()=>o?o.pathname+o.search:""}}}),xe=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],rt=xe.map(i=>`[${i}]`).join(", "),at=/^url\(['"]?#(.*?)['"]?\)$/;let st=(()=>{class i extends nt{constructor(t,n,r,a,s){super(t),this._iconRegistry=n,this._location=a,this._errorHandler=s,this._inline=!1,this._currentIconFetch=je.w0.EMPTY,r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=(0,L.Ig)(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const n=this._cleanupFontValue(t);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const n=this._cleanupFontValue(t);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const n=t.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const n=t.querySelectorAll("style");for(let a=0;a<n.length;a++)n[a].textContent+=" ";const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let n=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=t.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,n=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();n!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),n&&t.classList.add(n),this._previousFontSetClass=n),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const n=this._elementsWithExternalReferences;n&&n.forEach((r,a)=>{r.forEach(s=>{a.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){const n=t.querySelectorAll(rt),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<n.length;a++)xe.forEach(s=>{const c=n[a],p=c.getAttribute(s),g=p?p.match(at):null;if(g){let h=r.get(c);h||(h=[],r.set(c,h)),h.push({name:s,value:g[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[n,r]=this._splitIconName(t);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe((0,le.q)(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${a.message}`))})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(V),e.$8M("aria-hidden"),e.Y36(it),e.Y36(e.qLn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,n){2&t&&(e.uIk("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),e.ekj("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[e.qOj],ngContentSelectors:He,decls:1,vars:0,template:function(t,n){1&t&&(e.F$t(),e.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),i})(),lt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[q.BQ],q.BQ]}),i})();const ct=["dangerTpl"];function dt(i,o){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"img",17),e.qZA())}function ut(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw(),s=e.MAs(20);return e.KtG(a.open(s,r.id))}),e._uU(1," Eliminar "),e.qZA()}}const Ze=function(i){return[i]},ne=function(i){return{"pointer-events":i}};function pt(i,o){if(1&i&&(e.TgZ(0,"mat-tree-node",18)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e.YNc(4,ut,2,0,"button",19),e.TgZ(5,"a",20)(6,"button",21),e._uU(7," Editar "),e.qZA()()()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.hij(" ",t.vch_nombre," "),e.xp6(2),e.Q6J("ngIf",!n.treeControl.isExpandable),e.xp6(1),e.Q6J("routerLink",e.VKq(4,Ze,"./gestion/"+t.id))("ngStyle",e.VKq(6,ne,n.canAddCategorie?"inherit":"none"))}}function gt(i,o){if(1&i&&(e.TgZ(0,"mat-nested-tree-node")(1,"div",23)(2,"span",24)(3,"button",25)(4,"mat-icon",26),e._uU(5),e.qZA()(),e._uU(6),e.qZA(),e.TgZ(7,"span")(8,"a",6)(9,"button",27),e._uU(10," Editar "),e.qZA()()()(),e.TgZ(11,"div",28),e.GkF(12,29),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(3),e.uIk("aria-label","Toggle "+t.name),e.xp6(2),e.hij(" ",n.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.xp6(1),e.hij(" ",t.vch_nombre," "),e.xp6(2),e.Q6J("routerLink",e.VKq(7,Ze,"./gestion/"+t.id))("ngStyle",e.VKq(9,ne,n.canAddCategorie?"inherit":"none")),e.xp6(3),e.ekj("example-tree-invisible",!n.treeControl.isExpanded(t))}}function mt(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",30),e._UZ(1,"path",31),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente\n"))}function ht(i,o){1&i&&(e.TgZ(0,"button",42),e._UZ(1,"span",43),e._uU(2," Eliminando... "),e.qZA())}function _t(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.deleteCategoria())}),e._uU(1," Eliminar "),e.qZA()}}function ft(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.dismiss())}),e._uU(1," Cancelar "),e.qZA()}}function vt(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",32)(2,"div",33)(3,"div",34)(4,"div",2)(5,"div",35)(6,"div",36)(7,"h2"),e._uU(8,"\xbfEstas seguro?"),e.qZA()()(),e.TgZ(9,"div",37)(10,"div",38),e.YNc(11,ht,3,0,"button",39),e.YNc(12,_t,2,0,"button",40),e.YNc(13,ft,2,0,"button",41),e.qZA()()()()()()()),2&i){const t=e.oxw();e.xp6(11),e.Q6J("ngIf",t.categoryDeleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.categoryDeleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.categoryDeleteButtonLoader)}}const bt=function(){return["./gestion"]};let xt=(()=>{class i{constructor(t,n,r,a,s){this.mantenedorProvider=t,this.userProvider=n,this.toastService=r,this.modalService=a,this.router=s,this.CategoriesSorted=[],this.userEmpresaId="",this.treeControl=new Fe(c=>c.children),this.dataSource=new Re,this.canAddCategorie=!0,this.loading=!0,this.categoryDeleteButtonLoader=!1,this.hasChild=(c,p)=>!!p.children&&p.children.length>0,this.loadData()}ngOnInit(){}loadData(){this.userEmpresaId=this.userProvider.usuario.id_empresa,this.mantenedorProvider.getCategoriasPadreOrdenadas(this.userEmpresaId).subscribe({next:t=>{this.loading=!1,this.CategoriesSorted=t.data,this.dataSource.data=this.CategoriesSorted,console.log(this.CategoriesSorted)},error:t=>{this.loading=!1,console.log(t)}})}deleteCategoria(){this.categoryDeleteButtonLoader=!0,this.mantenedorProvider.deleteCategoria(this.categoryIdToDelete).subscribe({next:n=>{console.log(n),this.modalService.dismissAll(),setTimeout(()=>{this.categoryDeleteButtonLoader=!1,this.router.navigateByUrl("/mantenedores/categorias")},200),this.toastService.show("Eliminada con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:n=>{console.log(n),this.categoryDeleteButtonLoader=!1,this.modalService.dismissAll(),this.toastService.show("Error al eliminar",{classname:"bg-danger text-center  text-light",delay:3500})}})}open(t,n){this.categoryIdToDelete=n,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(r=>{},r=>{})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(Z.i),e.Y36(x.k),e.Y36(_.FF),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lista-categoria"]],viewQuery:function(t,n){if(1&t&&e.Gf(ct,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:21,vars:9,consts:[["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],[3,"routerLink","ngStyle"],[1,"btn","btn-primary"],["class","text-center mb-10",4,"ngIf"],[1,"card-body"],[1,"example-tree",3,"dataSource","treeControl"],["class","justify-content-between","matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["deleteCategory",""],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],["matTreeNodeToggle","",1,"justify-content-between"],["class","btn btn-sm btn-danger  ",3,"click",4,"ngIf"],[1,"ms-4",3,"routerLink","ngStyle"],[1,"btn","btn-sm","btn-primary"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"mat-tree-node","justify-content-between"],[1,"d-flex","align-items-center",2,"margin-left","-32px"],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[1,"btn","btn-sm","btn-primary","float-right"],["role","group"],["matTreeNodeOutlet",""],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card-header","align-items-center","justify-content-center","gap-2","gap-md-5"],[1,"card-title","col-12","mb-5","justify-content-center"],[1,"card-body","pt-8"],[1,"row","justify-content-between"],["class","btn btn-sm btn-danger col-12 disabled","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-danger col-5",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary col-5",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-sm","btn-danger","col-12","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-sm","btn-danger","col-5",3,"click"],[1,"btn","btn-sm","btn-primary","col-5",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),e._uU(6,"Categor\xedass"),e.qZA()(),e.TgZ(7,"div",5)(8,"a",6)(9,"button",7),e._uU(10,"Crear Categor\xeda"),e.qZA()()()(),e.YNc(11,dt,2,0,"div",8),e.TgZ(12,"div",9)(13,"mat-tree",10),e.YNc(14,pt,8,8,"mat-tree-node",11),e.YNc(15,gt,13,11,"mat-nested-tree-node",12),e.qZA()()()()(),e._UZ(16,"app-toast",13),e.YNc(17,mt,3,0,"ng-template",null,14,e.W1O),e.YNc(19,vt,14,3,"ng-template",null,15,e.W1O)),2&t&&(e.xp6(8),e.Q6J("routerLink",e.DdM(6,bt))("ngStyle",e.VKq(7,ne,n.canAddCategorie?"inherit":"none")),e.xp6(3),e.Q6J("ngIf",n.loading),e.xp6(2),e.Q6J("dataSource",n.dataSource)("treeControl",n.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",n.hasChild))},dependencies:[d.O5,d.PC,m.yS,v.q,ue,de,ge,pe,ce,B,st],styles:[".example-tree-invisible[_ngcontent-%COMP%]{display:none}.example-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .example-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;list-style-type:none}.example-tree[_ngcontent-%COMP%]   .mat-nested-tree-node[_ngcontent-%COMP%]   div[role=group][_ngcontent-%COMP%]{padding-left:16px}button[_ngcontent-%COMP%]{background:none;border:none;margin-top:1.5px;margin-left:-4px}.mat-tree[_ngcontent-%COMP%]{padding-left:16px}.mat-tree-node[_ngcontent-%COMP%]{border-radius:5px}.mat-tree-node[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}"]}),i})(),Zt=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-mantenedores"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[m.lC]}),i})();var f=u(5861),ie=u(4916);function Tt(i,o){1&i&&(e.TgZ(0,"span",26),e._UZ(1,"span",27),e.qZA())}function Ct(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.MAs(23).value="",e.KtG(r.tieneValue=!1)}),e.TgZ(1,"span",29),e.O4$(),e.TgZ(2,"svg",6),e._UZ(3,"rect",7)(4,"rect",8),e.qZA()()()}}function yt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",33),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.addCategoria(a))}),e.TgZ(1,"div",34)(2,"div",35)(3,"label",36),e._UZ(4,"i",37),e.qZA(),e.TgZ(5,"div",38)(6,"span",39),e._uU(7),e.qZA(),e.TgZ(8,"div",40),e._uU(9),e.qZA()()()(),e._UZ(10,"div",41),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(7),e.Oqu(t.vch_nombre),e.xp6(2),e.Oqu(n.getCatPadres(t))}}function At(i,o){if(1&i&&(e.TgZ(0,"div",30)(1,"div",31),e.YNc(2,yt,11,2,"div",32),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.categorias.data)}}function wt(i,o){1&i&&(e.TgZ(0,"div",42)(1,"div",43)(2,"div",44),e._uU(3,"Categor\xeda no encontrada"),e.qZA(),e.TgZ(4,"div",45),e._uU(5,"Trata de buscar por el nombre de la categor\xeda"),e.qZA()(),e.TgZ(6,"div",46),e._UZ(7,"img",47),e.qZA()())}let kt=(()=>{class i{constructor(t,n){this.prodProvider=t,this.userProvider=n,this.categorias={code:1,status:"",message:"",data:[]},this.categoriasSelectOut=new e.vpe,this.loading=!0,this.tieneValue=!1,this.noResultados=!1,this.getCategoriasBD("-1")}ngOnInit(){}buscarCategorias(t){this.tieneValue="-1"!=(t=""==t?"-1":t),this.getCategoriasBD(t)}getCategoriasBD(t){this.loading=!0,this.prodProvider.getCategoriaXEmpresa(this.userProvider.usuario.id_empresa,t).subscribe({next:n=>{this.categorias=n,this.noResultados=0==n.data.length},error:n=>console.error(n),complete:()=>this.loading=!1})}getCatPadres(t){return null!=t.id_categoriapadre?`Categor\xeda padre -> ${t.tbl_categorium.vch_nombre}`:"Categor\xeda padre"}addCategoria(t){t&&this.categoriasSelectOut.emit(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ie.M),e.Y36(Z.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-new-category-modal"]],inputs:{modal:"modal"},outputs:{categoriasSelectOut:"categoriasSelectOut"},decls:29,vars:4,consts:[["id","kt_modal_users_search","tabindex","-1","aria-hidden","true"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],[1,"modal-header","pb-0","border-0","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-18","pt-0","pb-15"],[1,"text-center","mb-13"],[1,"mb-3"],[1,"text-muted","fw-bold","fs-5"],["id","kt_modal_users_search_handler","data-kt-search-keypress","true","data-kt-search-min-length","2","data-kt-search-enter","enter","data-kt-search-layout","inline"],["data-kt-search-element","form","autocomplete","off",1,"w-100","position-relative","mb-5"],["type","hidden"],[1,"svg-icon","svg-icon-2","svg-icon-lg-1","svg-icon-gray-500","position-absolute","top-50","ms-5","translate-middle-y"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","name","search","value","","placeholder","Busca por nombre de categor\xeda","data-kt-search-element","input",1,"form-control","form-control-lg","form-control-solid","px-15",3,"keyup"],["buscaCat",""],["class","position-absolute top-50 end-0 translate-middle-y lh-0 me-5","data-kt-search-element","spinner",4,"ngIf"],["class","btn btn-flush btn-active-color-primary position-absolute top-50 end-0 translate-middle-y lh-0 me-5","data-kt-search-element","clear",3,"click",4,"ngIf"],[1,"py-5"],["data-kt-search-element","results","class","",4,"ngIf"],["data-kt-search-element","empty","class","text-center",4,"ngIf"],["data-kt-search-element","spinner",1,"position-absolute","top-50","end-0","translate-middle-y","lh-0","me-5"],[1,"spinner-border","h-15px","w-15px","align-middle","text-muted"],["data-kt-search-element","clear",1,"btn","btn-flush","btn-active-color-primary","position-absolute","top-50","end-0","translate-middle-y","lh-0","me-5",3,"click"],[1,"svg-icon","svg-icon-2","svg-icon-lg-1","me-0"],["data-kt-search-element","results",1,""],[1,"mh-375px","scroll-y","me-n7","pe-7"],["class","text-hover-primary","style","cursor:pointer;",3,"click",4,"ngFor","ngForOf"],[1,"text-hover-primary",2,"cursor","pointer",3,"click"],["data-user-id","0",1,"rounded","d-flex","flex-stack","bg-active-lighten","p-4"],[1,"d-flex","align-items-center"],[1,"form-check","form-check-custom","form-check-solid","me-5"],[1,"fa-solid","fa-plus","text"],[1,"ms-5"],[1,"fs-5","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"fw-bold","text-muted"],[1,"border-bottom","border-gray-300","border-bottom-dashed"],["data-kt-search-element","empty",1,"text-center"],[1,"fw-bold","py-10"],[1,"text-gray-600","fs-3","mb-2"],[1,"text-muted","fs-6"],[1,"text-center","px-5"],["src","assets/media/illustrations/sketchy-1/1.png","alt","",1,"w-100","h-200px","h-sm-325px"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.NdJ("click",function(){return n.modal.dismiss("remiau")}),e.TgZ(5,"span",5),e.O4$(),e.TgZ(6,"svg",6),e._UZ(7,"rect",7)(8,"rect",8),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",9)(10,"div",10)(11,"h1",11),e._uU(12,"Buscar Categor\xedas"),e.qZA(),e.TgZ(13,"div",12),e._uU(14,"Agrega categor\xedas al producto"),e.qZA()(),e.TgZ(15,"div",13)(16,"form",14),e._UZ(17,"input",15),e.TgZ(18,"span",16),e.O4$(),e.TgZ(19,"svg",6),e._UZ(20,"rect",17)(21,"path",18),e.qZA()(),e.kcU(),e.TgZ(22,"input",19,20),e.NdJ("keyup",function(){e.CHM(r);const s=e.MAs(23);return e.KtG(n.buscarCategorias(s.value))}),e.qZA(),e.YNc(24,Tt,2,0,"span",21),e.YNc(25,Ct,5,0,"span",22),e.qZA(),e.TgZ(26,"div",23),e.YNc(27,At,3,1,"div",24),e.YNc(28,wt,8,0,"div",25),e.qZA()()()()()()}2&t&&(e.xp6(24),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.tieneValue),e.xp6(2),e.Q6J("ngIf",(null==n.categorias?null:n.categorias.data).length>0),e.xp6(1),e.Q6J("ngIf",n.noResultados))},dependencies:[d.sg,d.O5,l._Y,l.JL,l.F],styles:[".button-delete[_ngcontent-%COMP%]:hover{background-color:#f1416c;color:#fff}.button-guardar[_ngcontent-%COMP%]:hover{background-color:#009ef7;color:#fff}"]}),i})();const St=["dangerTpl"];function qt(i,o){1&i&&(e.TgZ(0,"small",25),e._uU(1,"El nombre debe tener m\xednimo 3 caracteres"),e.qZA())}function Ut(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submit())}),e._uU(1," Guardar Cambios "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.formGeneral.valid&&!t.idPadre||!t.formGeneral.valid||!t.formGeneral.dirty&&!t.cambioPadre)}}function It(i,o){1&i&&(e.TgZ(0,"button",27),e._UZ(1,"span",28),e._uU(2," Cargando... "),e.qZA())}function Nt(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",29),e._UZ(1,"path",30),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente\n"))}function Et(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-add-new-category-modal",31),e.NdJ("categoriasSelectOut",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.setCategoriaPadre(r))}),e.qZA()}2&i&&e.Q6J("modal",o.$implicit)}const Lt=function(){return["../"]};let Te=(()=>{class i{constructor(t,n,r,a,s,c){this.cateProvider=t,this.rutaActiva=n,this.formBuilder=r,this.userProvider=a,this.toastService=s,this.modalService=c,this.mostrarStatus=!0,this.mostrarNombre=!0,this.mostrarEliminacion=!0,this.createButtonLoader=!1,this.cambioPadre=!1,this.idEmpresaUsuario=a.usuario.id_empresa,this.idCategoria=this.rutaActiva.snapshot.params.id}ngOnInit(){this.loadPage()}loadPage(){this.crearFrom(),console.log(this.idCategoria),this.idCategoria&&this.loadcategoria(this.idCategoria)}get nombreNoValido(){return this.formGeneral.get("nombre")?.invalid&&this.formGeneral.get("nombre")?.touched}loadcategoria(t){this.cateProvider.getCategoria(t).subscribe(n=>{this.categoria=n.data,this.nameCategoria=this.categoria.vch_nombre,this.titleCategoria=this.categoria.vch_nombre,this.idPadre=this.categoria.id_categoriapadre,this.idPadre?this.loadcategoriaPadre(this.idPadre):(this.idPadre=null,this.cargarDataAlForm()),console.log(this.categoria)})}loadcategoriaPadre(t){this.cateProvider.getCategoria(t).subscribe(n=>{this.nombrePadre=n.data.vch_nombre,console.log("padre",n),this.cargarDataAlForm()})}crearFrom(){this.formGeneral=this.formBuilder.group({nombre:["",[l.kI.required,l.kI.minLength(3)]],idPadre:[null]})}cargarDataAlForm(){this.formGeneral.reset({nombre:this.nameCategoria,idPadre:this.idPadre})}submit(){var t=this;return(0,f.Z)(function*(){t.createButtonLoader=!0;const n={vch_nombre:t.formGeneral.get("nombre")?.value,id_empresa:t.idEmpresaUsuario,id_categoriapadre:t.formGeneral.get("idPadre")?.value,bit_ultimohijo:!0,bit_campana:!1};console.log(n),t.idCategoria?t.cateProvider.actualizarCategoria(t.idCategoria,n).subscribe({next:r=>{const a=r.data;t.titleCategoria=a.vch_nombre,console.log(a),t.createButtonLoader=!1,t.toastService.show("Actualizada con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:r=>{t.createButtonLoader=!1,t.toastService.show("Error al actualizar",{classname:"bg-danger text-center  text-light",delay:3500}),console.log("error: ",r)}}):t.cateProvider.postCategoria(n).subscribe({next:r=>{t.createButtonLoader=!1,t.toastService.show("Creada con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3}),console.log(r)},error:r=>{t.createButtonLoader=!1,console.log("error: ",r),t.toastService.show("Error al crear",{classname:"bg-danger text-center  text-light",delay:3500})}})})()}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{},n=>{})}setCategoriaPadre(t){this.nombrePadre=t.vch_nombre,this.idPadre!=t.id&&(this.cambioPadre=!0,this.idPadre=t.id,this.formGeneral.patchValue({idPadre:this.idPadre})),this.modalService.dismissAll()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(m.gz),e.Y36(l.qu),e.Y36(Z.i),e.Y36(x.k),e.Y36(_.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-main-categoria"]],viewQuery:function(t,n){if(1&t&&e.Gf(St,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:37,vars:10,consts:[[1,"mb-5"],[1,"text-gray-800","text-hover-primary","fs-2","fw-bolder",3,"routerLink"],["id","kt_app_main",1,"app-main","flex-column","flex-row-fluid"],[1,"d-flex","flex-column","flex-column-fluid"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-xxl"],["id","kt_ecommerce_add_category_form","data-kt-redirect","../../demo1/dist/apps/ecommerce/catalog/categories.html",1,"form","d-flex","flex-column","flex-lg-row",3,"formGroup"],[1,"d-flex","flex-column","flex-row-fluid","gap-7","gap-lg-10"],[1,"card","py-4"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"mb-5","fv-row"],[1,"form-label"],["type","hidden","name","idPadre","formControlName","idPadre"],["type","button",1,"btn","btn-light-primary","btn-sm","mt-1","mb-3",3,"click"],[1,"mt-3","mb-5","fv-row","col-6"],[1,"required","form-label"],["type","text","name","categoria","placeholder","Nombre categor\xeda","formControlName","nombre",1,"form-control","mb-2","col-6"],["class","text-danger",4,"ngIf"],["type","submit","id","kt_ecommerce_add_category_submit","class","btn btn-primary float-right mt-2",3,"disabled","click",4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["modal",""],[1,"text-danger"],["type","submit","id","kt_ecommerce_add_category_submit",1,"btn","btn-primary","float-right","mt-2",3,"disabled","click"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","mt-2"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"],[3,"modal","categoriasSelectOut"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"h3",0)(1,"a",1),e._uU(2," Volver "),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"form",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"h3"),e._uU(13),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"label",13),e._uU(17,"Categor\xeda Padre: "),e.TgZ(18,"span")(19,"b"),e._uU(20),e.qZA()()(),e._UZ(21,"input",14)(22,"br"),e.TgZ(23,"button",15),e.NdJ("click",function(){e.CHM(r);const s=e.MAs(36);return e.KtG(n.open(s))}),e._uU(24," Cambiar categor\xeda padre "),e.qZA()(),e.TgZ(25,"div",16)(26,"label",17),e._uU(27,"Nombre de la Categor\xeda"),e.qZA(),e._UZ(28,"input",18),e.YNc(29,qt,2,0,"small",19),e.qZA(),e.YNc(30,Ut,2,1,"button",20),e.YNc(31,It,3,0,"button",21),e.qZA()()()()()()()(),e._UZ(32,"app-toast",22),e.YNc(33,Nt,3,0,"ng-template",null,23,e.W1O),e.YNc(35,Et,1,1,"ng-template",null,24,e.W1O)}2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(9,Lt)),e.xp6(6),e.Q6J("formGroup",n.formGeneral),e.xp6(6),e.hij(" ",n.titleCategoria?"Actualizar categor\xeda: "+n.titleCategoria:"Crear categor\xeda"," "),e.xp6(7),e.Oqu(n.nombrePadre?n.nombrePadre:"Ninguna"),e.xp6(8),e.ekj("is-invalid",n.nombreNoValido),e.xp6(1),e.Q6J("ngIf",n.nombreNoValido),e.xp6(1),e.Q6J("ngIf",!n.createButtonLoader),e.xp6(1),e.Q6J("ngIf",n.createButtonLoader))},dependencies:[d.O5,m.yS,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,v.q,kt]}),i})();var z=u(8619);const Ft=["dangerTpl"];function Mt(i,o){1&i&&(e.TgZ(0,"div",20)(1,"strong"),e._uU(2,"Sin t\xe9cnicos"),e.qZA()())}function Dt(i,o){1&i&&(e.TgZ(0,"div",21),e._UZ(1,"img",22),e.qZA())}const Jt=function(i){return[i]};function Gt(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"div",33),e._UZ(3,"input",34),e.qZA()(),e.TgZ(4,"td")(5,"div",35)(6,"div",36)(7,"a",37),e._uU(8),e.qZA()()()(),e.TgZ(9,"td",38)(10,"span",39),e._uU(11),e.qZA()(),e.TgZ(12,"td",40)(13,"div",41),e._uU(14),e.qZA()()()),2&i){const t=o.$implicit,n=o.index,r=e.oxw(2);e.xp6(3),e.Q6J("value",n),e.xp6(4),e.Q6J("routerLink",e.VKq(6,Jt,"../tecnico/"+t.id)),e.xp6(1),e.Oqu(t.vch_nombre),e.xp6(3),e.Oqu(t.vch_tecepecialidad),e.xp6(2),e.Q6J("ngClass",r.getCssStatus(t.estado)),e.xp6(1),e.Oqu(t.estado?"Activo":"Inactivo")}}function Qt(i,o){if(1&i&&(e.TgZ(0,"div",23)(1,"table",24)(2,"thead")(3,"tr",25)(4,"th",26)(5,"div",27),e._UZ(6,"input",28),e.qZA()(),e.TgZ(7,"th",29),e._uU(8,"Tecnico"),e.qZA(),e.TgZ(9,"th",30),e._uU(10,"Especialidad"),e.qZA(),e.TgZ(11,"th",30),e._uU(12,"Estado"),e.qZA()()(),e.TgZ(13,"tbody",31),e.YNc(14,Gt,15,8,"tr",32),e.qZA()()()),2&i){const t=e.oxw();e.xp6(14),e.Q6J("ngForOf",t.tecnicos)}}function Yt(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",42),e._UZ(1,"path",43),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente "))}const Ot=function(){return["/mantenedores/tecnico/nuevo"]};let Pt=(()=>{class i{constructor(t,n,r){this.mantenedorService=t,this.toastService=r,this.loading=!0,this.tecnicos=[],this.sinTec=!1,this.mantenedorService.getTecnicos(n.usuario.id_empresa).subscribe({next:a=>{a.data&&(this.tecnicos=a.data)},error:a=>{a?.error?.code&&3==a?.error?.code?this.sinTec=!0:this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3}),this.loading=!1},complete:()=>this.loading=!1})}getCssStatus(t){return t?"badge-light-success":"badge-light-danger"}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(Z.i),e.Y36(x.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ft,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:22,vars:5,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-ecommerce-product-filter","search","placeholder","Buscar T\xe9cnico",1,"form-control","form-control-solid","w-250px","ps-14"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],["table","kt_ecommerce_products_table","name","ListadoT\xe9cnicos.xlsx"],[1,"btn","btn-primary",3,"routerLink"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["role","alert",1,"alert","alert-danger","m-10"],[1,"text-center","mb-10"],["src","./assets/loading.gif","alt","","height","100","width","100"],[1,"card-body","pt-0"],["id","kt_ecommerce_products_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid","me-3"],["type","checkbox","data-kt-check","true","data-kt-check-target","#kt_ecommerce_products_table .form-check-input","value","1",1,"form-check-input"],[1,"min-w-200px"],[1,"text-end","min-w-100px"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox",1,"form-check-input",3,"value"],[1,"d-flex","align-items-center"],[1,"ms-5"],["data-kt-ecommerce-product-filter","product_name",1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"],[1,"text-end","pe-0"],[1,"fw-bolder"],["data-order","Published",1,"text-end","pe-0"],[1,"badge",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),e.O4$(),e.TgZ(8,"svg",8),e._UZ(9,"rect",9)(10,"path",10),e.qZA()(),e.kcU(),e._UZ(11,"input",11),e.qZA()(),e.TgZ(12,"div",12),e._UZ(13,"app-export-excel",13),e.TgZ(14,"a",14),e._uU(15,"Agregar T\xe9cnico"),e.qZA()()(),e.YNc(16,Mt,3,0,"div",15),e.YNc(17,Dt,2,0,"div",16),e.YNc(18,Qt,15,1,"div",17),e.qZA()()()(),e._UZ(19,"app-toast",18),e.YNc(20,Yt,3,0,"ng-template",null,19,e.W1O)),2&t&&(e.xp6(14),e.Q6J("routerLink",e.DdM(4,Ot)),e.xp6(2),e.Q6J("ngIf",n.sinTec),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[d.mk,d.sg,d.O5,m.yS,v.q,z.$]}),i})();var C=u(7818),y=u(3905);const Bt=["dangerTpl"];function Rt(i,o){1&i&&(e.TgZ(0,"small",44),e._uU(1," Es requerido "),e.qZA())}function $t(i,o){1&i&&(e.TgZ(0,"small",44),e._uU(1," M\xe1x 200 caracteres "),e.qZA())}function Vt(i,o){1&i&&(e.TgZ(0,"small",44),e._uU(1," Es requerido "),e.qZA())}function jt(i,o){1&i&&(e.TgZ(0,"small",44),e._uU(1," M\xe1x 200 caracteres "),e.qZA())}const zt=function(i,o){return{"bg-primary":i,"bg-secondary":o}};function Kt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",38)(1,"span",47),e.NdJ("click",function(){const r=e.CHM(t),a=r.$implicit,s=r.index,c=e.oxw().index,p=e.oxw(2);return e.KtG(p.clickDisp(a.horas[c],s,c))}),e._uU(2),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw().index;e.xp6(1),e.Q6J("ngClass",e.WLB(2,zt,t.horas[n].activo,!t.horas[n].activo)),e.xp6(1),e.hij(" ",("0"+t.horas[n].hora.toString()).substring(("0"+t.horas[n].hora.toString()).length-2,("0"+t.horas[n].hora.toString()).length)," : 00 ")}}function Ht(i,o){if(1&i&&(e.TgZ(0,"div",45),e.YNc(1,Kt,3,5,"div",46),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.calendario)}}const Wt=function(i,o){return{"bg-success":i,"bg-danger":o}};function Xt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"form",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"div",11)(7,"h2"),e._uU(8),e.qZA()()(),e.TgZ(9,"div",12)(10,"div",13),e._UZ(11,"div",14),e.TgZ(12,"label",15),e._UZ(13,"i",16)(14,"input",17)(15,"input",18),e.qZA(),e.TgZ(16,"span",19),e._UZ(17,"i",20),e.qZA(),e.TgZ(18,"span",21),e._UZ(19,"i",20),e.qZA()(),e.TgZ(20,"div",22),e._uU(21," Set the category thumbnail image. Only *.png, *.jpg and *.jpeg image files are accepted "),e.qZA()()(),e.TgZ(22,"div",9)(23,"div",10)(24,"div",11)(25,"h2"),e._uU(26,"Estado"),e.qZA()(),e.TgZ(27,"div",23),e._UZ(28,"div",24),e.qZA()(),e.TgZ(29,"div",25)(30,"select",26,27),e.NdJ("change",function(){e.CHM(t);const r=e.MAs(31),a=e.oxw();return e.KtG(a.changeEstado(r.value))}),e.TgZ(32,"option",28),e._uU(33,"Activo"),e.qZA(),e.TgZ(34,"option",29),e._uU(35,"Inactivo"),e.qZA()()()()(),e.TgZ(36,"div",30)(37,"div",9)(38,"div",10)(39,"div",11)(40,"h2"),e._uU(41,"General"),e.qZA()()(),e.TgZ(42,"div",25)(43,"label",31),e._uU(44,"Nombre"),e.qZA(),e._UZ(45,"input",32),e.YNc(46,Rt,2,0,"small",33),e.YNc(47,$t,2,0,"small",33),e.TgZ(48,"div",34)(49,"label",31),e._uU(50,"Especialidad"),e.qZA(),e._UZ(51,"input",35),e.YNc(52,Vt,2,0,"small",33),e.YNc(53,jt,2,0,"small",33),e.TgZ(54,"div",22),e._uU(55," Especialidad t\xe9cnica "),e.qZA()()()(),e.TgZ(56,"div",9)(57,"div",10)(58,"div",11)(59,"h2"),e._uU(60,"Disponibilidad"),e.qZA()()(),e.TgZ(61,"div",25)(62,"div",36)(63,"div",37)(64,"div",38)(65,"h3"),e._uU(66,"Lunes"),e.qZA()(),e.TgZ(67,"div",38)(68,"h3"),e._uU(69,"Martes"),e.qZA()(),e.TgZ(70,"div",38)(71,"h3"),e._uU(72,"Mi\xe9rcoles"),e.qZA()(),e.TgZ(73,"div",38)(74,"h3"),e._uU(75,"Jueves"),e.qZA()(),e.TgZ(76,"div",38)(77,"h3"),e._uU(78,"Viernes"),e.qZA()(),e.TgZ(79,"div",38)(80,"h3"),e._uU(81,"S\xe1bado"),e.qZA()(),e.TgZ(82,"div",38)(83,"h3"),e._uU(84,"Domingo"),e.qZA()()(),e.YNc(85,Ht,2,1,"div",39),e.qZA()()(),e.TgZ(86,"div",40)(87,"a",41),e._uU(88," Cancelar"),e.qZA(),e.TgZ(89,"button",42),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submit())}),e.TgZ(90,"span",43),e._uU(91," Guardar Cambios"),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.formGeneral),e.xp6(6),e.Oqu(t.tecnico.vch_nombre),e.xp6(20),e.Q6J("ngClass",e.WLB(15,Wt,t.estado,!t.estado)),e.xp6(4),e.Q6J("selected",t.tecnico.estado),e.xp6(2),e.Q6J("selected",!t.tecnico.estado),e.xp6(11),e.ekj("is-invalid",t.nombreInvalid),e.xp6(1),e.Q6J("ngIf",null==t.formGeneral.controls.nombre.errors?null:t.formGeneral.controls.nombre.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formGeneral.controls.nombre.errors?null:t.formGeneral.controls.nombre.errors.maxlength),e.xp6(4),e.ekj("is-invalid",t.especialidadInvalid),e.xp6(1),e.Q6J("ngIf",null==t.formGeneral.controls.especialidad.errors?null:t.formGeneral.controls.especialidad.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formGeneral.controls.especialidad.errors?null:t.formGeneral.controls.especialidad.errors.maxlength),e.xp6(32),e.Q6J("ngForOf",t.calendario[0].horas),e.xp6(4),e.Q6J("disabled",t.loading)}}function en(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",48),e._UZ(1,"path",49),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente "))}let tn=(()=>{class i{constructor(t,n,r,a,s){this.formBuilder=t,this.mantenedorService=n,this.usuarioService=r,this.toastService=s,this.disponibilidad=[],this.loading=!0,this.estado=!0,this.calendario=[];const c=String(a.snapshot.params.id);console.log(c),this.action=c.length<36?C.I.new:C.I.edit,console.log(this.action==C.I.edit),this.loadForm(),this.loadCalendario(),this.action==C.I.edit?this.loadData(c):this.loadCreate()}ngOnInit(){}loadData(t){this.mantenedorService.getTecnico(t).subscribe({next:n=>{this.tecnico=n.data,console.log(n.data),this.estado=!n.data||n.data.estado,this.tecnico?.tbl_disponibilidads&&this.loadDisponibilidad(this.tecnico.tbl_disponibilidads)},error:n=>{console.error("error al tratar de obtener el tecnico",n),this.loading=!1},complete:()=>{this.resetForm(),this.loading=!1}})}loadCreate(){this.tecnico={estado:!0,id:"nuevo",id_empresa:this.usuarioService.usuario.id_empresa,id_rol:"tecnico",vch_nombre:""},this.loading=!1}loadDisponibilidad(t){for(let n of t)for(let r of this.calendario)if(r.dia==n.id_dia){const a=r.horas.find(s=>s.hora==n.id_hora);if(a){const s=r.horas.indexOf(a);r.horas[s].activo=!0,r.horas[s].activoRaw=!0}}}loadCalendario(){for(let t=1;t<8;t++){const n=[];for(let r=8;r<19;r++)n.push({hora:r,activo:!1,activoRaw:!1});this.calendario.push({dia:t,horas:n})}}loadForm(){this.formGeneral=this.formBuilder.group({nombre:["",[l.kI.required,l.kI.maxLength(200)]],especialidad:["",[l.kI.required,l.kI.maxLength(200)]]})}resetForm(){this.formGeneral.reset({nombre:this.tecnico?.vch_nombre,especialidad:this.tecnico?.vch_tecepecialidad})}clickDisp(t,n,r){console.log(t),console.log(n),this.calendario[n].horas[r].activo=!t.activo}changeEstado(t){this.estado="1"==t}get isCreate(){return this.action==C.I.new}get nombreInvalid(){return this.formGeneral.get("nombre")?.invalid&&this.formGeneral.get("nombre")?.touched}get especialidadInvalid(){return this.formGeneral.get("especialidad")?.invalid&&this.formGeneral.get("especialidad")?.touched}submit(){var t=this;return(0,f.Z)(function*(){if(t.touchControlsError(),t.formGeneral.valid){const n={id:t.action==C.I.new?"nuevo":t.tecnico.id,estado:t.estado,id_empresa:t.usuarioService.usuario.id_empresa,id_rol:t.action==C.I.new?"tecnico":t.tecnico.id_rol,vch_nombre:t.formGeneral.get("nombre")?.value,vch_tecepecialidad:t.formGeneral.get("especialidad")?.value};t.loading=!0,t.toastService.show("Cargando...");const r=yield t.setTecnico(n);if(console.log(r),r){let a=!1;for(let s=0;s<t.calendario.length;s++){const c=t.calendario[s].horas.filter(p=>p.activo!=p.activoRaw);for(let p=0;p<c.length;p++){const g=c[p],h={id_dia:t.calendario[s].dia,id_hora:g.hora,id_usuario:t.action==C.I.new?r.id:t.tecnico.id},T=yield t.setDisponibilidad(h,g);"OK"!=T&&(a=!0);const k=t.calendario[s].horas.indexOf(g);console.log(T),t.calendario[s].horas[k].activoRaw=t.calendario[s].horas[k].activo}}t.action==C.I.new&&(t.tecnico=r,t.action=C.I.edit),a||t.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-light",delay:1e4})}else t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:15e3}),console.error("Error al tratar de ingresar al tecnico",r)}t.loading=!1})()}touchControlsError(){if(this.formGeneral.invalid)return Object.values(this.formGeneral.controls).forEach(t=>{t.markAsTouched()})}setTecnico(t){var n=this;return(0,f.Z)(function*(){let r=null;try{const a=n.action==C.I.new?yield(0,y.z)(n.mantenedorService.addTecnico(t)):yield(0,y.z)(n.mantenedorService.upTecnico(t));1==a.code&&(r=a.data)}catch(a){console.error("Error al tratar de setear el tecnico",a)}return r})()}setDisponibilidad(t,n){var r=this;return(0,f.Z)(function*(){let a="";try{const s=n.activoRaw?yield(0,y.z)(r.mantenedorService.deleteDisponibilidad(t)):yield(0,y.z)(r.mantenedorService.addDisponibilidad(t));a=1==s.code?"OK":`Error: ${s.message}}`}catch(s){a=`Error: ${s}`}return a})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(b),e.Y36(Z.i),e.Y36(m.gz),e.Y36(x.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-unique"]],viewQuery:function(t,n){if(1&t&&e.Gf(Bt,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:6,vars:1,consts:[[1,"app-main","flex-column","flex-row-fluid"],[1,"d-flex","flex-column","flex-column-fluid"],["id","kt_app_content","class","app-content flex-column-fluid",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-xxl"],[1,"form","d-flex","flex-column","flex-lg-row",3,"formGroup"],[1,"d-flex","flex-column","gap-7","gap-lg-10","w-100","w-lg-300px","mb-7","me-lg-10"],[1,"card","card-flush","py-4"],[1,"card-header"],[1,"card-title"],[1,"card-body","text-center","pt-0"],["data-kt-image-input","true",1,"image-input","image-input-empty","image-input-outline","mb-3"],[1,"image-input-wrapper","w-150px","h-150px",3,"style"],["data-kt-image-input-action","change","data-bs-toggle","tooltip","title","Change avatar",1,"btn","btn-icon","btn-circle","btn-active-color-primary","w-25px","h-25px","bg-body","shadow"],[1,"bi","bi-pencil-fill","fs-7"],["type","file","name","avatar","accept",".png, .jpg, .jpeg"],["type","hidden","name","avatar_remove"],["data-kt-image-input-action","cancel","data-bs-toggle","tooltip","title","Cancel avatar",1,"btn","btn-icon","btn-circle","btn-active-color-primary","w-25px","h-25px","bg-body","shadow"],[1,"bi","bi-x","fs-2"],["data-kt-image-input-action","remove","data-bs-toggle","tooltip","title","Remove avatar",1,"btn","btn-icon","btn-circle","btn-active-color-primary","w-25px","h-25px","bg-body","shadow"],[1,"text-muted","fs-7"],[1,"card-toolbar"],[1,"rounded-circle","bg-success","w-15px","h-15px",3,"ngClass"],[1,"card-body","pt-0"],["data-control","select2","data-hide-search","true","data-placeholder","Select an option",1,"form-select","mb-2",3,"change"],["cmbEstado",""],["value","1",3,"selected"],["value","0",3,"selected"],[1,"d-flex","flex-column","flex-row-fluid","gap-7","gap-lg-10"],[1,"required","form-label"],["type","text","name","nombre","placeholder","Nombre T\xe9cnico","formControlName","nombre",1,"form-control","mb-2"],["class","text-danger",4,"ngIf"],[1,"mb-10","fv-row"],["type","text","name","especialidad","placeholder","Especialidad","formControlName","especialidad",1,"form-control","mb-2"],[1,"m-5","fv-row","border"],[1,"row","mb-2"],[1,"col","text-center"],["class","row mb-1",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],["routerLink","/mantenedores/tecnicolist",1,"btn","btn-danger","me-5"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"indicator-label"],[1,"text-danger"],[1,"row","mb-1"],["class","col text-center",4,"ngFor","ngForOf"],[1,"badge",2,"cursor","pointer",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Xt,92,18,"div",2),e.qZA()(),e._UZ(3,"app-toast",3),e.YNc(4,en,3,0,"ng-template",null,4,e.W1O)),2&t&&(e.xp6(2),e.Q6J("ngIf",n.tecnico))},dependencies:[d.mk,d.sg,d.O5,m.yS,l._Y,l.YN,l.Kr,l.Fj,l.JJ,l.JL,l.sg,l.u,v.q]}),i})();const nn=["input1"],on=["input2"],rn=["input3"],an=["dangerTpl"];function sn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteImage(1))}),e._uU(1," Remover "),e.qZA()}}function ln(i,o){if(1&i&&e._UZ(0,"img",26),2&i){const t=e.oxw();e.Q6J("src",t.previsualizaciones[1],e.LSH)}}function cn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteImage(2))}),e._uU(1," Remover "),e.qZA()}}function dn(i,o){if(1&i&&e._UZ(0,"img",26),2&i){const t=e.oxw();e.Q6J("src",t.previsualizaciones[2],e.LSH)}}function un(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteImage(3))}),e._uU(1," Remover "),e.qZA()}}function pn(i,o){if(1&i&&e._UZ(0,"img",26),2&i){const t=e.oxw();e.Q6J("src",t.previsualizaciones[3],e.LSH)}}function gn(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",27),e._UZ(1,"path",28),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente\n"))}const mn=function(i){return{"d-none":i}},hn=function(i,o){return{disabled:i,"d-none":o}};let _n=(()=>{class i{constructor(t,n,r,a){var s=this;this.mantenedorService=t,this.sanitizer=n,this.userService=r,this.toastService=a,this.archivos={1:"",2:"",3:""},this.previsualizaciones={1:"",2:"",3:""},this.loader=!1,this.id_empresa=this.userService.usuario.id_empresa,this.blobFile=function(){var c=(0,f.Z)(function*(p){return new Promise((g,h)=>{try{const T=window.URL.createObjectURL(p),k=s.sanitizer.bypassSecurityTrustUrl(T),Q=new FileReader;Q.readAsDataURL(p),Q.onload=()=>{g({blob:p,image:k,base:Q.result})},Q.onerror=ha=>{g({blob:p,image:k,base:null})}}catch{return null}})});return function(p){return c.apply(this,arguments)}}();try{this.mantenedorService.getEmpresa(this.id_empresa).subscribe({next:c=>{this.previsualizaciones[1]=c.data?.vch_urlcabeceraecomerce_1||"",this.previsualizaciones[2]=c.data?.vch_urlcabeceraecomerce_2||"",this.previsualizaciones[3]=c.data?.vch_urlcabeceraecomerce_3||"",console.log(this.previsualizaciones)},error:c=>console.error("Error when trying to get the enterprise: ",c)})}catch(c){console.log("ERROR",c)}}ngOnInit(){}onFileSelected(t,n){const r=t.target.files[0];return r.size>5e6?(alert("El tama\xf1o maximo permitido por archivo es 5Mb"),void this.setInputValue(n)):"image/jpeg"!=r.type&&"image/png"!=r.type&&"image/jpg"!=r.type&&"image/bmp"!=r.type&&"image/webp"!=r.type?(alert("Solo se admiten imagenes con formato jpeg, png, jpg, bmp, webp"),void this.setInputValue(n)):void this.blobFile(r).then(a=>{Object.defineProperty(this.previsualizaciones,n,{value:a.base}),Object.defineProperty(this.archivos,n,{value:r})})}uploadImages(){this.loader=!0;let t=new FormData;const n={...this.archivos},r=Object.values(n);for(let a=0;a<r.length;a++)t.append(`vch_urlcabeceraecomerce_${a+1}`,r[a]);try{this.mantenedorService.addFile(t,this.id_empresa).subscribe({next:a=>{console.log(a),this.loader=!1,this.clearArchivos(),this.setInputValue(),this.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-center  text-light",delay:1e4})},error:a=>{console.error("Error al tratar de guardar los banner",a),this.loader=!1,this.toastService.show(this.errorToast,{classname:"bg-danger text-center  text-light",delay:15e3})}})}catch(a){console.log("ERROR",a),this.toastService.show(this.errorToast,{classname:"bg-danger text-center text-light",delay:15e3})}}deleteImage(t=0){this.clearArchivos(t),this.clearPrevisualizaciones(t),this.setInputValue(t),console.log(this.archivos)}clearPrevisualizaciones(t=0){if(0==t)for(let n in this.previsualizaciones)Object.defineProperty(this.previsualizaciones,n,{value:""});else Object.defineProperty(this.previsualizaciones,t,{value:""})}clearArchivos(t=0){if(0==t)for(let n in this.archivos)Object.defineProperty(this.archivos,n,{value:""});else Object.defineProperty(this.archivos,t,{value:""})}setInputValue(t=0){1==t?this.imgElement1.nativeElement.value="":2==t?this.imgElement2.nativeElement.value="":(3==t||(this.imgElement1.nativeElement.value="",this.imgElement2.nativeElement.value=""),this.imgElement3.nativeElement.value="")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(R.H7),e.Y36(Z.i),e.Y36(x.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-banner"]],viewQuery:function(t,n){if(1&t&&(e.Gf(nn,5),e.Gf(on,5),e.Gf(rn,5),e.Gf(an,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.imgElement1=r.first),e.iGM(r=e.CRH())&&(n.imgElement2=r.first),e.iGM(r=e.CRH())&&(n.imgElement3=r.first),e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:59,vars:13,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"card-body","align-items-center","py-5","gap-2","gap-md-5"],["for","image1"],[1,"d-flex","justify-content-center","w-100","gap-3","my-2"],[1,"d-flex","justify-content-between","w-100","gap-1"],["title","image1","type","file","name","image1",1,"form-control","w-75",3,"change"],["input1",""],["class","btn btn-danger","type","button",3,"click",4,"ngIf"],[1,"w-100","my-3"],["class","w-100","alt","prev-banner",3,"src",4,"ngIf"],["input2",""],["accept","image/png, image/jpeg","title","image1","type","file","name","image1",1,"form-control","w-75",3,"change"],["input3",""],[1,"d-flex","justify-content-center","w-100","mb-5","mt-5"],["type","button","disabled","",1,"btn","btn-primary",3,"ngClass"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],["type","button",1,"btn","btn-primary",3,"ngClass","click"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["type","button",1,"btn","btn-danger",3,"click"],["alt","prev-banner",1,"w-100",3,"src"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8,"Modificar banners de la empresa"),e.qZA()()()(),e.TgZ(9,"div",7)(10,"label",8)(11,"h3"),e._uU(12,"Banner 1"),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"div",9)(15,"div",10)(16,"input",11,12),e.NdJ("change",function(a){return n.onFileSelected(a,1)}),e.qZA(),e.YNc(18,sn,2,0,"button",13),e.qZA(),e._UZ(19,"hr"),e.qZA(),e.TgZ(20,"div",14),e.YNc(21,ln,1,1,"img",15),e.qZA()(),e._UZ(22,"br"),e.TgZ(23,"div",7)(24,"label",8)(25,"h3"),e._uU(26,"Banner 2"),e.qZA()(),e._UZ(27,"br"),e.TgZ(28,"div",9)(29,"div",10)(30,"input",11,16),e.NdJ("change",function(a){return n.onFileSelected(a,2)}),e.qZA(),e.YNc(32,cn,2,0,"button",13),e.qZA(),e._UZ(33,"hr"),e.qZA(),e.TgZ(34,"div",14),e.YNc(35,dn,1,1,"img",15),e.qZA()(),e._UZ(36,"br"),e.TgZ(37,"div",7)(38,"label",8)(39,"h3"),e._uU(40,"Banner 3"),e.qZA()(),e._UZ(41,"br"),e.TgZ(42,"div",9)(43,"div",10)(44,"input",17,18),e.NdJ("change",function(a){return n.onFileSelected(a,3)}),e.qZA(),e.YNc(46,un,2,0,"button",13),e.qZA(),e._UZ(47,"hr"),e.qZA(),e.TgZ(48,"div",14),e.YNc(49,pn,1,1,"img",15),e.qZA()(),e.TgZ(50,"div",19)(51,"button",20),e._UZ(52,"span",21),e._uU(53," Subiendo... "),e.qZA(),e.TgZ(54,"button",22),e.NdJ("click",function(){return n.uploadImages()}),e._uU(55," Guardar cambios "),e.qZA()()()()()(),e._UZ(56,"app-toast",23),e.YNc(57,gn,3,0,"ng-template",null,24,e.W1O)),2&t&&(e.xp6(18),e.Q6J("ngIf",n.previsualizaciones[1].length>6),e.xp6(3),e.Q6J("ngIf",n.previsualizaciones[1].length>6),e.xp6(11),e.Q6J("ngIf",n.previsualizaciones[2].length>6),e.xp6(3),e.Q6J("ngIf",n.previsualizaciones[2].length>6),e.xp6(11),e.Q6J("ngIf",n.previsualizaciones[3].length>6),e.xp6(3),e.Q6J("ngIf",n.previsualizaciones[3].length>6),e.xp6(2),e.Q6J("ngClass",e.VKq(8,mn,!n.loader)),e.xp6(3),e.Q6J("ngClass",e.WLB(10,hn,!n.archivos[3]&&!n.archivos[2]&&!n.archivos[1],n.loader)))},dependencies:[d.mk,d.O5,v.q]}),i})();var oe=u(3189);const fn=["dangerTpl"];function vn(i,o){1&i&&(e.TgZ(0,"div",19)(1,"strong"),e._uU(2,"Sin Bodegas"),e.qZA()())}function bn(i,o){1&i&&(e.TgZ(0,"div",20),e._UZ(1,"img",21),e.qZA())}const xn=function(i){return[i]};function Zn(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"div",32),e._UZ(3,"input",33),e.qZA()(),e.TgZ(4,"td")(5,"div",34)(6,"div",35)(7,"a",36),e._uU(8),e.qZA()()()(),e.TgZ(9,"td",37)(10,"span",38),e._uU(11),e.qZA()(),e.TgZ(12,"td",37)(13,"span",38),e._uU(14),e.qZA()(),e._UZ(15,"td",39),e.qZA()),2&i){const t=o.$implicit;e.xp6(7),e.Q6J("routerLink",e.VKq(4,xn,"../bodega/"+t.id)),e.xp6(1),e.Oqu(t.vch_nombre),e.xp6(3),e.Oqu(t.tbl_empresa.vch_nombre),e.xp6(3),e.Oqu(t.vch_direccion)}}function Tn(i,o){if(1&i&&(e.TgZ(0,"div",22)(1,"table",23)(2,"thead")(3,"tr",24)(4,"th",25)(5,"div",26),e._UZ(6,"input",27),e.qZA()(),e.TgZ(7,"th",28),e._uU(8,"Bodega"),e.qZA(),e.TgZ(9,"th",29),e._uU(10,"Empresa"),e.qZA(),e.TgZ(11,"th",29),e._uU(12,"Direcci\xf3n"),e.qZA()()(),e.TgZ(13,"tbody",30),e.YNc(14,Zn,16,6,"tr",31),e.ALo(15,"filter"),e.qZA()()()),2&i){const t=e.oxw();e.xp6(14),e.Q6J("ngForOf",e.xi3(15,1,t.bodegas,t.searchText))}}function Cn(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",40),e._UZ(1,"path",41),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente "))}const yn=function(){return["/mantenedores/bodega/-1"]};let An=(()=>{class i{constructor(t,n,r){this.cateProvider=t,this.userProvider=n,this.toastService=r,this.loading=!0,this.sinBodegas=!1}ngOnInit(){this.loadCategorias()}loadCategorias(){this.cateProvider.getBodegas(this.userProvider.usuario.id_empresa).subscribe({next:t=>{t.data&&(this.bodegas=[...t.data],this.sinBodegas=!1),console.log(this.bodegas),console.log(t)},error:t=>{t?.error?.code&&3==t?.error?.code?this.sinBodegas=!0:this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3}),this.loading=!1},complete:()=>this.loading=!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(Z.i),e.Y36(x.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-bodegaslist"]],viewQuery:function(t,n){if(1&t&&e.Gf(fn,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:21,vars:6,consts:[["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-4"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-ecommerce-category-filter","search","placeholder","Buscar Bodega",1,"form-control","form-control-solid","w-250px","ps-14",3,"ngModel","ngModelChange"],[1,"card-toolbar"],["table","kt_ecommerce_category_table","name","ListadoBodegas.xlsx"],[1,"btn","btn-primary","ms-5",3,"routerLink"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["role","alert",1,"alert","alert-danger","m-10"],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],[1,"card-body","pt-0"],["id","kt_ecommerce_category_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5","align-items-center"],[1,"text-start","text-gray-400","fw-bold","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid","me-3"],["type","checkbox","data-kt-check","true","data-kt-check-target","#kt_ecommerce_category_table .form-check-input","value","1",1,"form-check-input"],[1,"min-w-250px"],[1,"text-end","min-w-70px"],[1,"fw-semibold","text-gray-600"],[4,"ngFor","ngForOf"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox","value","1",1,"form-check-input"],[1,"d-flex"],[1,"ms-5"],["data-kt-ecommerce-product-filter","product_name",1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"],["data-order","25",1,"text-end","pe-0"],[1,"fw-bolder","ms-3"],["data-order","Published",1,"text-end","pe-0"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),e.O4$(),e.TgZ(7,"svg",7),e._UZ(8,"rect",8)(9,"path",9),e.qZA()(),e.kcU(),e.TgZ(10,"input",10),e.NdJ("ngModelChange",function(a){return n.searchText=a}),e.qZA()()(),e.TgZ(11,"div",11),e._UZ(12,"app-export-excel",12),e.TgZ(13,"a",13),e._uU(14,"Agregar Bodega"),e.qZA()()(),e.YNc(15,vn,3,0,"div",14),e.YNc(16,bn,2,0,"div",15),e.YNc(17,Tn,16,4,"div",16),e.qZA()()(),e._UZ(18,"app-toast",17),e.YNc(19,Cn,3,0,"ng-template",null,18,e.W1O)),2&t&&(e.xp6(10),e.Q6J("ngModel",n.searchText),e.xp6(3),e.Q6J("routerLink",e.DdM(5,yn)),e.xp6(2),e.Q6J("ngIf",n.sinBodegas),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[d.sg,d.O5,m.yS,l.Fj,l.JJ,l.On,v.q,z.$,oe.Z]}),i})();const wn=["dangerTpl"];function kn(i,o){if(1&i&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"h2"),e._uU(4),e.qZA()()(),e.TgZ(5,"div",27),e._UZ(6,"div",28),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(t.bodega.data.vch_nombre)}}function Sn(i,o){1&i&&(e.TgZ(0,"small",36),e._uU(1,"Debe seleccionar una opci\xf3n"),e.qZA())}function qn(i,o){if(1&i&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"h2"),e._uU(4,"Status"),e.qZA()(),e.TgZ(5,"div",29),e._UZ(6,"div",30),e.qZA()(),e.TgZ(7,"div",14)(8,"select",31)(9,"option",32),e._uU(10,"Activo"),e.qZA(),e.TgZ(11,"option",32),e._uU(12,"Inactivo"),e.qZA()(),e.YNc(13,Sn,2,0,"small",18),e.TgZ(14,"div",19),e._uU(15,"Establecer el estado de la bodega."),e.qZA(),e.TgZ(16,"div",33)(17,"label",34),e._uU(18,"Select publishing date and time"),e.qZA(),e._UZ(19,"input",35),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(9),e.Q6J("value",!0)("selected",t.selectedStatus(!0)),e.xp6(2),e.Q6J("value",!1)("selected",t.selectedStatus(!1)),e.xp6(2),e.Q6J("ngIf",t.estadoNoValido)}}function Un(i,o){1&i&&(e.TgZ(0,"small",36),e._uU(1,"Debe ingresar el nombre de la bodega. m\xednimo de car\xe1cteres 3"),e.qZA())}function In(i,o){1&i&&(e.TgZ(0,"small",36),e._uU(1,"Debe ingresar la direcci\xf3n. m\xednimo de car\xe1cteres 3"),e.qZA())}function Nn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"form",7)(3,"div",8),e.YNc(4,kn,7,1,"div",9),e.YNc(5,qn,20,5,"div",9),e.qZA(),e.TgZ(6,"div",10)(7,"div",11)(8,"div",12)(9,"div",13)(10,"h2"),e._uU(11,"General"),e.qZA()()(),e.TgZ(12,"div",14)(13,"div",15)(14,"label",16),e._uU(15,"Bodega"),e.qZA(),e._UZ(16,"input",17),e.YNc(17,Un,2,0,"small",18),e.TgZ(18,"div",19),e._uU(19," Se requiere un nombre de bodega y se recomienda que sea \xfanico. "),e.qZA()(),e.TgZ(20,"div",15)(21,"label",16),e._uU(22,"Direcci\xf3n"),e.qZA(),e._UZ(23,"input",20),e.YNc(24,In,2,0,"small",18),e.TgZ(25,"div",19),e._uU(26," Se requiere una direcci\xf3n y se recomienda que sea \xfanico. "),e.qZA()()()(),e.TgZ(27,"div",21)(28,"a",22),e._uU(29," Cancelar"),e.qZA(),e.TgZ(30,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submit())}),e.TgZ(31,"span",24),e._uU(32," Guardar Cambios"),e.qZA(),e.TgZ(33,"span",25),e._uU(34,"Please wait... "),e._UZ(35,"span",26),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.formGeneral),e.xp6(2),e.Q6J("ngIf",t.mostrarNombre),e.xp6(1),e.Q6J("ngIf",t.mostrarStatus),e.xp6(11),e.ekj("is-invalid",t.bodegaNoValido),e.xp6(1),e.Q6J("ngIf",t.bodegaNoValido),e.xp6(6),e.ekj("is-invalid",t.direccionNoValido),e.xp6(1),e.Q6J("ngIf",t.direccionNoValido)}}function En(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",37),e._UZ(1,"path",38),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente "))}let Ln=(()=>{class i{constructor(t,n,r,a,s){this.cateProvider=t,this.rutaActiva=n,this.formBuilder=r,this.userProvider=a,this.toastService=s,this.bodega={code:-1,message:"",status:"",data:{vch_nombre:"",vch_direccion:"",id_empresa:""}},this.mostrarStatus=!0,this.mostrarNombre=!0,this.mostrarEmpresa=!0}ngOnInit(){this.loadPage()}loadPage(){this.crearFrom();const t=String(this.rutaActiva.snapshot.params.id);console.log(t),this.action="-1"==t?w.new:w.edit,this.action==w.new&&(this.mostrarNombre=!1),this.action==w.new&&(this.mostrarStatus=!1),this.action==w.new&&(this.mostrarEmpresa=!1),this.action==w.edit&&this.loadbodega(t)}loadbodega(t){this.cateProvider.getBodega(t).subscribe(n=>{this.bodega=n,console.log(this.bodega),this.cargarDataAlForm()})}get bodegaNoValido(){return this.formGeneral.get("bodega")?.invalid&&this.formGeneral.get("bodega")?.touched}get direccionNoValido(){return this.formGeneral.get("direccion")?.invalid&&this.formGeneral.get("direccion")?.touched}get estadoNoValido(){return this.formGeneral.get("estado")?.invalid&&this.formGeneral.get("estado")?.touched}selectedStatus(t){return this.bodega.data?.estado==t}crearFrom(){this.formGeneral=this.formBuilder.group({bodega:["",[l.kI.required,l.kI.minLength(3)]],direccion:["",[l.kI.required,l.kI.minLength(3)]],estado:[""]})}cargarDataAlForm(){this.formGeneral.reset({bodega:this.bodega.data?.vch_nombre,direccion:this.bodega.data?.vch_direccion,estado:this.bodega.data?.estado})}submit(){var t=this;return(0,f.Z)(function*(){if(console.log(t.formGeneral),t.formGeneral.invalid)return Object.values(t.formGeneral.controls).forEach(n=>{n.markAsTouched()});try{const n={vch_nombre:t.formGeneral.get("bodega")?.value,vch_direccion:t.formGeneral.get("direccion")?.value,id_empresa:t.formGeneral.get("empresa")?.value,estado:t.formGeneral.get("estado")?.value};let r="";const a=t.userProvider.usuario.id_empresa;if(t.action==w.new){const s=yield(0,y.z)(t.cateProvider.postBodega(a,n));console.log(s),r=s.data.id,console.log(r),t.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-light",delay:1e4}),console.log("Guardado con \xe9xito")}else{const s=t.bodega.data.id;console.log(s),t.cateProvider.putBodega(s,n).subscribe(c=>{console.log(c)}),t.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-light",delay:1e4}),console.log("Guardado con \xe9xito")}}catch(n){console.error("error del servidor",n),t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:15e3})}})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(m.gz),e.Y36(l.qu),e.Y36(Z.i),e.Y36(x.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-bodegaunique"]],viewQuery:function(t,n){if(1&t&&e.Gf(wn,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:6,vars:1,consts:[["id","kt_app_main",1,"app-main","flex-column","flex-row-fluid"],[1,"d-flex","flex-column","flex-column-fluid"],["id","kt_app_content","class","app-content flex-column-fluid",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-xxl"],["id","kt_ecommerce_add_category_form","data-kt-redirect","../../demo1/dist/apps/ecommerce/catalog/categories.html",1,"form","d-flex","flex-column","flex-lg-row",3,"formGroup"],[1,"d-flex","flex-column","gap-7","gap-lg-10","w-100","w-lg-300px","mb-7","me-lg-10"],["class","card card-flush py-4",4,"ngIf"],[1,"d-flex","flex-column","flex-row-fluid","gap-7","gap-lg-10"],[1,"card","card-flush","py-4"],[1,"card-header"],[1,"card-title"],[1,"card-body","pt-0"],[1,"mb-10","fv-row"],[1,"required","form-label"],["type","text","name","categoria","placeholder","Nombre bodega","formControlName","bodega",1,"form-control","mb-2"],["class","text-danger",4,"ngIf"],[1,"text-muted","fs-7"],["type","text","name","categoria","placeholder","Direcci\xf3n","formControlName","direccion",1,"form-control","mb-2"],[1,"d-flex","justify-content-end"],["routerLink","/mantenedores/bodegaslist",1,"btn","btn-danger","me-5"],["type","submit","id","kt_ecommerce_add_category_submit",1,"btn","btn-primary",3,"click"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"card-body","text-center","pt-0"],["data-kt-image-input","true",1,"image-input","image-input-empty","image-input-outline","mb-3"],[1,"card-toolbar"],["id","kt_ecommerce_add_category_status",1,"rounded-circle","bg-success","w-15px","h-15px"],["data-control","select2","data-hide-search","true","data-placeholder","Select an option","id","kt_ecommerce_add_category_status_select","formControlName","estado",1,"form-select","mb-2"],[3,"value","selected"],[1,"d-none","mt-10"],["for","kt_ecommerce_add_category_status_datepicker",1,"form-label"],["id","kt_ecommerce_add_category_status_datepicker","placeholder","Pick date & time",1,"form-control"],[1,"text-danger"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Nn,36,9,"div",2),e.qZA()(),e._UZ(3,"app-toast",3),e.YNc(4,En,3,0,"ng-template",null,4,e.W1O)),2&t&&(e.xp6(2),e.Q6J("ngIf",n.bodega))},dependencies:[d.O5,m.yS,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u,v.q],styles:[".form-control[readonly][_ngcontent-%COMP%]{background-color:#d3d3d3}"]}),i})();var w=(()=>{return(i=w||(w={}))[i.new=0]="new",i[i.edit=1]="edit",w;var i})();let Fn=(()=>{class i{constructor(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Mn(i,o){1&i&&(e.TgZ(0,"div",9),e._UZ(1,"img",10),e.qZA())}const Dn=function(i){return[i]};function Jn(i,o){if(1&i&&e._UZ(0,"a",32),2&i){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,Dn,"../unique/"+t.id))}}function Gn(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"div",22),e._UZ(3,"input",23),e.qZA()(),e.TgZ(4,"td")(5,"div",24),e.YNc(6,Jn,1,3,"a",25),e._UZ(7,"div",26),e.qZA()(),e.TgZ(8,"td",27)(9,"span",28),e._uU(10),e.qZA()(),e.TgZ(11,"td",29)(12,"span",30),e._uU(13),e.qZA()(),e._UZ(14,"td",27)(15,"td",31),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.xp6(3),e.Q6J("value",n),e.xp6(3),e.Q6J("ngIf",t.tbl_documentos),e.xp6(4),e.Oqu(t.vch_sku),e.xp6(3),e.Oqu(t.int_stock)}}function Qn(i,o){if(1&i&&(e.TgZ(0,"div",11)(1,"table",12)(2,"thead")(3,"tr",13)(4,"th",14)(5,"div",15),e._UZ(6,"input",16),e.qZA()(),e.TgZ(7,"th",17),e._uU(8,"Producto"),e.qZA(),e.TgZ(9,"th",18),e._uU(10,"SKU"),e.qZA(),e.TgZ(11,"th",19),e._uU(12,"Stock"),e.qZA(),e.TgZ(13,"th",18),e._uU(14,"Precio"),e.qZA(),e.TgZ(15,"th",18),e._uU(16,"Estado"),e.qZA()()(),e.TgZ(17,"tbody",20),e.YNc(18,Gn,16,4,"tr",21),e.qZA()()()),2&i){const t=e.oxw();e.xp6(18),e.Q6J("ngForOf",t.productos)}}let Yn=(()=>{class i{constructor(t){this.apiWoo=t,this.loading=!1}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Fn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-cuadratura"]],decls:9,vars:2,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],["class","text-center mb-10",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],[1,"card-body","pt-0"],["id","kt_ecommerce_products_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid","me-3"],["type","checkbox","data-kt-check","true","data-kt-check-target","#kt_ecommerce_products_table .form-check-input","value","1",1,"form-check-input"],[1,"min-w-200px"],[1,"text-end","min-w-100px"],[1,"text-end","min-w-70px"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox",1,"form-check-input",3,"value"],[1,"d-flex","align-items-center"],["class","symbol symbol-50px",3,"routerLink",4,"ngIf"],[1,"ms-5"],[1,"text-end","pe-0"],[1,"fw-bolder"],["data-order","25",1,"text-end","pe-0"],[1,"fw-bolder","ms-3"],["data-order","Published",1,"text-end","pe-0"],[1,"symbol","symbol-50px",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5)(6,"div",6),e.qZA(),e.YNc(7,Mn,2,0,"div",7),e.YNc(8,Qn,19,1,"div",8),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[d.sg,d.O5,m.yS]}),i})();const On=["dangerTpl"];function Pn(i,o){if(1&i&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function Bn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"select",21,22),e.NdJ("change",function(){e.CHM(t);const r=e.MAs(1),a=e.oxw();return e.KtG(a.setCbSku(r.value))}),e.TgZ(2,"option",23),e._uU(3,"Empresa"),e.qZA(),e._UZ(4,"option"),e.YNc(5,Pn,2,2,"option",24),e.qZA()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.empresas)}}function Rn(i,o){1&i&&(e.TgZ(0,"div",26)(1,"strong"),e._uU(2,"Sin Sku para sincronizar"),e.qZA()())}function $n(i,o){if(1&i&&(e.TgZ(0,"div",27),e._UZ(1,"img",28),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.rutaImagen,e.LSH)}}const Ce=function(i){return[i]};function Vn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",37)(3,"div",38)(4,"a",39),e._uU(5),e.qZA()()()(),e.TgZ(6,"td",40)(7,"span",41),e._uU(8),e.qZA()(),e.TgZ(9,"td",40)(10,"span")(11,"a",42)(12,"button",43),e._uU(13,"Editar"),e.qZA()(),e.TgZ(14,"button",44),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(3),c=e.MAs(23);return e.KtG(s.open(c,a.vch_sku,a.id_empresa))}),e._uU(15," Eliminar "),e.qZA()()()()}if(2&i){const t=o.$implicit;e.xp6(4),e.Q6J("routerLink",e.VKq(4,Ce,"./gestion/"+t.vch_sku+"/"+t.id_empresa)),e.xp6(1),e.Oqu(t.vch_sku),e.xp6(3),e.Oqu(t.vch_responsable?t.vch_responsable:"Nadie"),e.xp6(3),e.Q6J("routerLink",e.VKq(6,Ce,"./gestion/"+t.vch_sku+"/"+t.id_empresa))}}function jn(i,o){if(1&i&&(e.TgZ(0,"table",31)(1,"thead")(2,"tr",32)(3,"th",33),e._uU(4,"SKU"),e.qZA(),e.TgZ(5,"th",34),e._uU(6,"Vendedor"),e.qZA(),e.TgZ(7,"th",34),e._uU(8,"Acciones"),e.qZA()()(),e.TgZ(9,"tbody",35),e.YNc(10,Vn,16,8,"tr",36),e.ALo(11,"filter"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(10),e.Q6J("ngForOf",e.xi3(11,1,t.allSkus,t.searchText))}}function zn(i,o){if(1&i&&(e.TgZ(0,"div",29),e.YNc(1,jn,12,4,"table",30),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.sinSkus)}}function Kn(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",45),e._UZ(1,"path",46),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente\n"))}function Hn(i,o){1&i&&(e.TgZ(0,"button",57),e._UZ(1,"span",58),e._uU(2," Eliminando... "),e.qZA())}function Wn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.deleteSku())}),e._uU(1," Eliminar "),e.qZA()}}function Xn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.dismiss())}),e._uU(1," Cancelar "),e.qZA()}}function ei(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",47)(2,"div",48)(3,"div",49)(4,"div",2)(5,"div",50)(6,"div",51)(7,"h2"),e._uU(8,"\xbfEstas seguro?"),e.qZA()()(),e.TgZ(9,"div",52)(10,"div",53),e.YNc(11,Hn,3,0,"button",54),e.YNc(12,Wn,2,0,"button",55),e.YNc(13,Xn,2,0,"button",56),e.qZA()()()()()()()),2&i){const t=e.oxw();e.xp6(11),e.Q6J("ngIf",t.deleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.deleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.deleteButtonLoader)}}const ti=function(){return["/mantenedores/skusync/gestion"]};let ni=(()=>{class i{constructor(t,n,r,a){this.mantenedorProvider=t,this.userProvider=n,this.toastService=r,this.modalService=a,this.allSkus=[],this.loading=!0,this.sinSkus=!1,this.isAdmin=!1,this.empresas=[],this.deleteButtonLoader=!1,this.rutaImagen="../../../../../../assets/loading.gif",this.isAdmin=this.userProvider.adminAibo,this.idEmpresaUsuario=n.usuario.id_empresa}ngOnInit(){this.isAdmin?(this.sinSkus=!0,this.loading=!1,this.loadEmpresas()):this.loadSkus()}setCbSku(t){this.empresa=t,this.sinSkus=!1,this.loading=!0,"-1"!=t&&this.loadSkus(this.empresa)}loadEmpresas(){var t=this;return(0,f.Z)(function*(){try{const n=yield(0,y.z)(t.mantenedorProvider.getEmpresas());t.empresas=n.data?.filter(r=>r.int_idwoo)||[]}catch{t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:3e3})}})()}loadSkus(t=this.idEmpresaUsuario){this.mantenedorProvider.getSkuSyncsXempresa(t).subscribe({next:n=>{this.allSkus=[...n.data],this.sinSkus=!1,this.loading=!1},error:n=>{this.loading=!1,this.sinSkus=!0,this.allSkus=[],this.toastService.show("No hay productos a sicronizar en esta empresa",{classname:"bg-danger text-light",delay:3e3})}})}deleteSku(){const t=this.skuToDelete,n=this.idEmpresaToDelete;this.deleteButtonLoader=!0,this.mantenedorProvider.deleteSkuSync(t,n).subscribe({next:r=>{this.loadSkus(),this.modalService.dismissAll(),this.toastService.show("Se ha eliminado el sku",{classname:"bg-success text-light",delay:3e3})},error:r=>{this.modalService.dismissAll(),this.toastService.show("Error al eliminar",{classname:"bg-danger text-light",delay:3e3})},complete:()=>{this.loading=!1,this.deleteButtonLoader=!1}})}open(t,n,r){this.skuToDelete=n,this.idEmpresaToDelete=r,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(a=>{},a=>{})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(Z.i),e.Y36(x.k),e.Y36(_.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sku-sync"]],viewQuery:function(t,n){if(1&t&&e.Gf(On,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:24,vars:7,consts:[["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-4"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","data-kt-ecommerce-category-filter","search","placeholder","Buscar sku",1,"form-control","form-control-solid","w-250px","ps-14",3,"ngModel","ngModelChange"],["class","form-select form-select-lg m-5",3,"change",4,"ngIf"],[1,"card-toolbar"],["table","kt_ecommerce_category_table","name","ListadoSkuSync.xlsx"],[1,"btn","btn-primary","ms-5",3,"routerLink"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["deleteSkuModal",""],[1,"form-select","form-select-lg","m-5",3,"change"],["cbEmpresa",""],["value","-1","selected",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["role","alert",1,"alert","alert-danger","m-10"],[1,"text-center","mb-10"],["alt","","height","100","width","100",3,"src"],[1,"card-body","pt-0"],["class","table align-middle table-row-dashed fs-6 gy-5 align-items-center","id","kt_ecommerce_category_table",4,"ngIf"],["id","kt_ecommerce_category_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5","align-items-center"],[1,"text-start","text-gray-400","fw-bold","fs-7","text-uppercase","gs-0"],[1,"min-w-250px"],[1,"text-end","min-w-70px"],[1,"fw-semibold","text-gray-600"],[4,"ngFor","ngForOf"],[1,"d-flex"],[1,"ms-5"],["data-kt-ecommerce-product-filter","product_name",1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"],["data-order","25",1,"text-end","pe-0"],[1,"fw-bolder","ms-3"],[3,"routerLink"],[1,"btn","btn-sm","btn-primary"],[1,"btn","btn-sm","btn-danger","ms-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card-header","align-items-center","justify-content-center","gap-2","gap-md-5"],[1,"card-title","col-12","mb-5","justify-content-center"],[1,"card-body","pt-8"],[1,"row","justify-content-between"],["class","btn btn-sm btn-danger col-12 disabled","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-danger col-5",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary col-5",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-sm","btn-danger","col-12","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-sm","btn-danger","col-5",3,"click"],[1,"btn","btn-sm","btn-primary","col-5",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),e.O4$(),e.TgZ(7,"svg",7),e._UZ(8,"rect",8)(9,"path",9),e.qZA()(),e.kcU(),e.TgZ(10,"input",10),e.NdJ("ngModelChange",function(a){return n.searchText=a}),e.qZA()(),e.YNc(11,Bn,6,1,"select",11),e.qZA(),e.TgZ(12,"div",12),e._UZ(13,"app-export-excel",13),e.TgZ(14,"a",14),e._uU(15,"Agregar Sku"),e.qZA()()(),e.YNc(16,Rn,3,0,"div",15),e.YNc(17,$n,2,1,"div",16),e.YNc(18,zn,2,1,"div",17),e.qZA()()(),e._UZ(19,"app-toast",18),e.YNc(20,Kn,3,0,"ng-template",null,19,e.W1O),e.YNc(22,ei,14,3,"ng-template",null,20,e.W1O)),2&t&&(e.xp6(10),e.Q6J("ngModel",n.searchText),e.xp6(1),e.Q6J("ngIf",n.isAdmin),e.xp6(3),e.Q6J("routerLink",e.DdM(6,ti)),e.xp6(2),e.Q6J("ngIf",n.sinSkus),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[d.sg,d.O5,m.yS,l.YN,l.Kr,l.Fj,l.JJ,l.On,v.q,z.$,oe.Z]}),i})();const ii=["dangerTpl"],oi=function(){return["../../../"]};function ri(i,o){1&i&&(e.TgZ(0,"a",18),e._uU(1," Volver "),e.qZA()),2&i&&e.Q6J("routerLink",e.DdM(1,oi))}const ai=function(){return["../"]};function si(i,o){1&i&&(e.TgZ(0,"a",18),e._uU(1," Volver "),e.qZA()),2&i&&e.Q6J("routerLink",e.DdM(1,ai))}function li(i,o){1&i&&(e.TgZ(0,"small",23),e._uU(1,"El sku debe tener m\xednimo 3 caracteres"),e.qZA())}function ci(i,o){if(1&i&&(e.TgZ(0,"div",19)(1,"label",20),e._uU(2,"Sku"),e.qZA(),e._UZ(3,"input",21),e.YNc(4,li,2,0,"small",22),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.ekj("is-invalid",t.skuNoValido),e.xp6(1),e.Q6J("ngIf",t.skuNoValido)}}function di(i,o){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function ui(i,o){1&i&&(e.TgZ(0,"small",23),e._uU(1,"La empresa es obligatoria"),e.qZA())}function pi(i,o){if(1&i&&(e.TgZ(0,"div",19)(1,"label",20),e._uU(2,"Empresa"),e.qZA(),e.TgZ(3,"select",24)(4,"option",25),e._uU(5," Empresa "),e.qZA(),e.YNc(6,di,2,2,"option",26),e.qZA(),e.YNc(7,ui,2,0,"small",22),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.ekj("is-invalid",t.empresaNoValido),e.xp6(3),e.Q6J("ngForOf",t.empresas),e.xp6(1),e.Q6J("ngIf",t.empresaNoValido)}}function gi(i,o){1&i&&(e.TgZ(0,"small",23),e._uU(1,"El campo debe tener m\xednimo 3 caracteres"),e.qZA())}function mi(i,o){if(1&i&&(e.TgZ(0,"div",19)(1,"label",20),e._uU(2,"Vendedor"),e.qZA(),e._UZ(3,"input",28),e.YNc(4,gi,2,0,"small",22),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.ekj("is-invalid",t.vendedorNoValido),e.xp6(1),e.Q6J("ngIf",t.vendedorNoValido)}}function hi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submit())}),e._uU(1," Guardar Cambios "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.formGeneral.valid)}}function _i(i,o){1&i&&(e.TgZ(0,"button",30),e._UZ(1,"span",31),e._uU(2," Cargando... "),e.qZA())}function fi(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",32),e._UZ(1,"path",33),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente\n"))}let ye=(()=>{class i{constructor(t,n,r,a,s,c){this.mantenedorProvider=t,this.rutaActiva=n,this.formBuilder=r,this.userProvider=a,this.toastService=s,this.modalService=c,this.empresas=[],this.saveButtonLoader=!1,this.isUpdate=!1,this.isAdmin=!1,this.idEmpresaUsuario=a.usuario.id_empresa,this.nombreUsuario=this.userProvider.usuario.vch_nombre,this.vch_sku=this.rutaActiva.snapshot.params.vch_sku,this.id_empresa=this.rutaActiva.snapshot.params.id_empresa,this.vch_sku&&this.id_empresa&&(this.isUpdate=!0),this.userProvider.adminAibo&&(this.isAdmin=!0)}ngOnInit(){this.loadPage()}loadPage(){this.createForm(),this.isUpdate&&this.loadSku(this.vch_sku,this.id_empresa),this.isAdmin&&this.loadEmpresas()}get skuNoValido(){return this.formGeneral.get("sku")?.invalid&&this.formGeneral.get("sku")?.touched}get vendedorNoValido(){return this.formGeneral.get("vch_responsable")?.invalid&&this.formGeneral.get("vch_responsable")?.touched}get empresaNoValido(){return this.formGeneral.get("id_empresa")?.invalid&&this.formGeneral.get("id_empresa")?.pristine}loadSku(t,n){this.mantenedorProvider.getSkuSyncSingle(t,n).subscribe({next:r=>{this.vch_responsable=r.data.vch_responsable,this.loadDataIntoForm()},error:r=>{this.toastService.show("Error al cargar el lead",{classname:"bg-danger text-center  text-light",delay:3500})}})}loadEmpresas(){this.mantenedorProvider.getEmpresas().subscribe({next:t=>{this.empresas=t.data},error:t=>{this.toastService.show("Error al cargar las empresas",{classname:"bg-danger text-center text-light",delay:3500})}})}createForm(){this.formGeneral=this.formBuilder.group({sku:["",[l.kI.required,l.kI.minLength(3)]],id_empresa:[this.idEmpresaUsuario,[l.kI.required]],vch_responsable:[this.nombreUsuario,[l.kI.required,l.kI.minLength(3)]]})}loadDataIntoForm(){this.formGeneral.reset({sku:this.vch_sku,id_empresa:this.id_empresa,vch_responsable:this.vch_responsable})}submit(){var t=this;return(0,f.Z)(function*(){if(t.saveButtonLoader=!0,t.isUpdate){const n={vch_responsable:t.formGeneral.get("vch_responsable")?.value};t.mantenedorProvider.putSkuSync(n,t.vch_sku,t.id_empresa).subscribe({next:r=>{t.nombreUsuario=r.data.vch_responsable,t.toastService.show("Actualizada con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:r=>{t.toastService.show("Error al actualizar",{classname:"bg-danger text-center  text-light",delay:3500})},complete:()=>{t.saveButtonLoader=!1}})}else{const n={vch_sku:t.formGeneral.get("sku")?.value,id_empresa:t.formGeneral.get("id_empresa")?.value,vch_responsable:t.formGeneral.get("vch_responsable")?.value};t.mantenedorProvider.postSkuSync(n).subscribe({next:r=>{t.toastService.show("Creada con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:r=>{t.toastService.show("Error al crear",{classname:"bg-danger text-center  text-light",delay:3500})},complete:()=>{t.saveButtonLoader=!1}})}})()}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{},n=>{})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(m.gz),e.Y36(l.qu),e.Y36(Z.i),e.Y36(x.k),e.Y36(_.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sku-gestion"]],viewQuery:function(t,n){if(1&t&&e.Gf(ii,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:24,vars:9,consts:[[1,"mb-5"],["class","text-gray-800 text-hover-primary fs-2 fw-bolder",3,"routerLink",4,"ngIf"],["id","kt_app_main",1,"app-main","flex-column","flex-row-fluid"],[1,"d-flex","flex-column","flex-column-fluid"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-xxl"],[1,"d-flex","flex-column","flex-row-fluid","gap-7","gap-lg-10"],[1,"card","py-4"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"form","d-flex","flex-column",3,"formGroup"],["class","mt-3 mb-5 fv-row col-6",4,"ngIf"],[1,"col-4"],["type","submit","id","kt_ecommerce_add_category_submit","class","btn btn-primary float-right mt-2",3,"disabled","click",4,"ngIf"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],[1,"text-gray-800","text-hover-primary","fs-2","fw-bolder",3,"routerLink"],[1,"mt-3","mb-5","fv-row","col-6"],[1,"required","form-label"],["type","text","name","categoria","placeholder","Ingrese el sku","formControlName","sku",1,"form-control","mb-2","col-6"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["data-control","select","data-hide-search","true","data-placeholder","Select an option","formControlName","id_empresa","name","id_empresa","title","id_empresa",1,"form-select","mb-2"],["value","","disabled","","default","","selected","","hidden",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["type","text","name","vch_responsable","placeholder","Ingrese el sku","formControlName","vch_responsable",1,"form-control","mb-2","col-6"],["type","submit","id","kt_ecommerce_add_category_submit",1,"btn","btn-primary","float-right","mt-2",3,"disabled","click"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","mt-2"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0),e.YNc(1,ri,2,2,"a",1),e.YNc(2,si,2,2,"a",1),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"h3"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",10)(14,"form",11),e.YNc(15,ci,5,3,"div",12),e.YNc(16,pi,8,4,"div",12),e.YNc(17,mi,5,3,"div",12),e.TgZ(18,"div",13),e.YNc(19,hi,2,1,"button",14),e.YNc(20,_i,3,0,"button",15),e.qZA()()()()()()()()(),e._UZ(21,"app-toast",16),e.YNc(22,fi,3,0,"ng-template",null,17,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",n.isUpdate),e.xp6(1),e.Q6J("ngIf",!n.isUpdate),e.xp6(10),e.hij(" ",n.isUpdate?"Actualizar Sku: "+n.vch_sku:"Agregar Sku"," "),e.xp6(2),e.Q6J("formGroup",n.formGeneral),e.xp6(1),e.Q6J("ngIf",!n.isUpdate),e.xp6(1),e.Q6J("ngIf",n.isAdmin&&!n.isUpdate),e.xp6(1),e.Q6J("ngIf",n.isUpdate),e.xp6(2),e.Q6J("ngIf",!n.saveButtonLoader),e.xp6(1),e.Q6J("ngIf",n.saveButtonLoader))},dependencies:[d.sg,d.O5,m.yS,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u,v.q]}),i})();var Ae=u(9458);function vi(i,o){if(1&i&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function bi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"select",24,25),e.NdJ("change",function(){e.CHM(t);const r=e.MAs(1),a=e.oxw();return e.KtG(a.setCbEmpresa(r.value))}),e.TgZ(2,"option",15),e._uU(3,"Empresa"),e.qZA(),e.YNc(4,vi,2,2,"option",26),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.allEmpresas)}}function xi(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"option",27),e._uU(2),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Zi(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"option",27),e._uU(2),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.AsE(" ",t.min,"Kg - ",t.max,"Kg ")}}function Ti(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.removeFilters())}),e._uU(1," Quitar filtros "),e.qZA()}}function Ci(i,o){1&i&&(e.TgZ(0,"div",29),e._UZ(1,"img",30),e.qZA())}function yi(i,o){1&i&&(e.TgZ(0,"div",35)(1,"div"),e._uU(2,"No hay datos para mostrar"),e.qZA()())}const F=function(i){return[i]};function Ai(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",41)(3,"a",42),e._uU(4),e.qZA()(),e.TgZ(5,"td")(6,"a",42),e._uU(7),e.qZA()(),e.TgZ(8,"td",41)(9,"a",42),e._uU(10),e.qZA()(),e.TgZ(11,"td",41)(12,"a",42),e._uU(13),e.qZA()(),e.TgZ(14,"td",41)(15,"a",43),e._uU(16),e.qZA()(),e.TgZ(17,"td")(18,"button",44),e._uU(19," Editar "),e.qZA()()(),e.BQk()),2&i){const t=o.$implicit;e.xp6(3),e.Q6J("routerLink",e.VKq(11,F,"./management/"+t.id)),e.xp6(1),e.Oqu(null==t.tbl_location?null:t.tbl_location.vch_name),e.xp6(2),e.Q6J("routerLink",e.VKq(13,F,"./management/"+t.id)),e.xp6(1),e.hij(" ",null==t.tbl_courrier?null:t.tbl_courrier.vch_name," "),e.xp6(2),e.Q6J("routerLink",e.VKq(15,F,"./management/"+t.id)),e.xp6(1),e.hij(" ",null==t.tbl_courrier?null:t.tbl_courrier.vch_type," "),e.xp6(2),e.Q6J("routerLink",e.VKq(17,F,"./management/"+t.id)),e.xp6(1),e.Oqu(t.db_price),e.xp6(2),e.Q6J("routerLink",e.VKq(19,F,"./management/"+t.id)),e.xp6(1),e.Oqu(null==t.db_rangemin||null==t.db_rangemax?"Sin rango":t.db_rangemin+" - "+t.db_rangemax),e.xp6(2),e.Q6J("routerLink",e.VKq(21,F,"./management/"+t.id))}}function wi(i,o){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,Ai,20,23,"ng-container",16),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.allFilterShipping)}}function ki(i,o){if(1&i&&(e.TgZ(0,"table",36)(1,"thead")(2,"tr",37)(3,"th",38),e._uU(4,"Comuna"),e.qZA(),e.TgZ(5,"th",38),e._uU(6,"Courrier"),e.qZA(),e.TgZ(7,"th",38),e._uU(8,"Tipo"),e.qZA(),e.TgZ(9,"th",38),e._uU(10,"Costo"),e.qZA(),e.TgZ(11,"th",39),e._uU(12,"Rango de peso (Kg)"),e.qZA(),e.TgZ(13,"th",38),e._uU(14,"Acciones"),e.qZA()()(),e.YNc(15,wi,2,1,"tbody",40),e.qZA()),2&i){const t=e.oxw(2);e.xp6(15),e.Q6J("ngIf",t.allFilterShipping)}}function Si(i,o){if(1&i&&(e.TgZ(0,"div",31),e.YNc(1,yi,3,0,"div",32),e.TgZ(2,"div",33),e.YNc(3,ki,16,1,"ng-template",null,34,e.W1O),e.qZA()()),2&i){const t=e.MAs(4),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.allFilterShipping&&0==n.allFilterShipping.length)("ngIfElse",t)}}const qi=function(){return["./management"]};let Ui=(()=>{class i{constructor(t,n,r,a,s,c){this.salesProvider=t,this.userProvider=n,this.formBuilder=r,this.modalService=a,this.toastService=s,this.router=c,this.allShipping=[],this.allCourrierTypes=["interno","externo"],this.allEmpresas=[],this.isAdmin=!1,this.isAibo=!1,this.filterActive=!1,this.allFilterShipping=[],this.weightRange=[{id:1,min:0,max:1.99},{id:2,min:2,max:3.99},{id:3,min:4,max:5.99},{id:4,min:6,max:7.99},{id:5,min:8,max:9.99},{id:6,min:10,max:14.99},{id:7,min:15,max:19.99},{id:8,min:20,max:29.99},{id:9,min:30,max:39.99},{id:10,min:40,max:59.99},{id:11,min:60,max:79.99},{id:12,min:80,max:99.99},{id:13,min:100,max:499.99},{id:14,min:500,max:1999.99},{id:15,min:2e3,max:3999.99},{id:16,min:4e3,max:5999.99},{id:17,min:6e3,max:2e4}],this.loading=!0,this.isAdmin=this.userProvider.adminAibo,this.id_empresa=this.userProvider.usuario.id_empresa,"48af74ca-3937-11ed-a734-0e6a408582e7"==this.id_empresa&&(this.isAibo=!0,this.getAllEmpresas()),this.getAllShippingXCompany(this.id_empresa)}ngOnInit(){this.filterFormGroup=this.formBuilder.group({vch_location:"",vch_type:"",weight:""})}getAllShippingXCompany(t){this.salesProvider.getAllShippingXCompany(t).subscribe({next:n=>{const r=n.data?n.data:[];this.allShipping=r,this.allFilterShipping=r,this.loading=!1},error:n=>{this.toastService.show("Error al obtener los costos de env\xedo",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"}),this.loading=!1}})}getAllEmpresas(){this.salesProvider.getEmpresas().subscribe({next:t=>{this.allEmpresas=t.data?t.data:[]},error:t=>{this.loading=!1,this.toastService.show("Error al obtener las empresas",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"})}})}setCbEmpresa(t){this.loading=!0,"-1"!=t&&this.getAllShippingXCompany(t)}filterSubmit(){this.filterActive=!0,this.allFilterShipping=this.allShipping.filter(t=>{if(this.filterValidations(t))return t})}removeFilters(){this.allFilterShipping=[...this.allShipping],this.filterActive=!1,this.filterFormGroup.reset({vch_location:"",vch_type:"",weight:""})}filterValidations(t){const n=this.filterFormGroup.value;if(n.vch_location&&!t.tbl_location?.vch_name.toLocaleLowerCase().includes(n.vch_location.toLocaleLowerCase())||n.vch_type&&t.tbl_courrier?.vch_type!=n.vch_type)return!1;if(n.weight){const r=this.weightRange.find(a=>a.id==n.weight);if(t.db_rangemin<r.min||t.db_rangemax>r.max)return!1}return!0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ae.M),e.Y36(Z.i),e.Y36(l.qu),e.Y36(_.FF),e.Y36(x.k),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-shipping-list"]],decls:33,vars:9,consts:[[1,"card","mb-5","mb-xl-10"],[1,"card-header","border-0","pt-5","align-items-center","justify-content-between"],[1,"d-flex","flex-row","align-items-center"],[1,"mb-0","me-5"],["style","width: fit-content","class","form-select form-select-lg ms-5 col-3",3,"change",4,"ngIf"],[1,"float-right"],["table","shipping-table","name","ListadoShipping.xlsx"],[3,"routerLink"],[1,"btn","btn-primary","ms-5"],[1,"card-toolbar","col-12","mb-4","mt-5","pt-4"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","placeholder","Comuna","name","vch_location","formControlName","vch_location",1,"form-control"],["data-control","selectOrigen","data-hide-search","true","data-placeholder","Selecciona una opci\xf3n","formControlName","vch_type","name","vch_type","title","vch_type",1,"form-select","mb-2"],["value","","disabled","","default","","selected","","hidden",""],[4,"ngFor","ngForOf"],["data-control","selectOrigen","data-hide-search","true","data-placeholder","Selecciona una opci\xf3n","formControlName","weight","name","weight","title","weight",1,"form-select","mb-2"],[1,"row","d-flex","justify-content-between","mt-1"],["type","submit","value","Filtrar",1,"btn","btn-primary","mt-4","mb-3","me-4"],["title","borrar filtros","type","button","class","btn btn-danger mt-4 mb-3 me-4",3,"click",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body py-3",4,"ngIf"],["aria-live","polite","aria-atomic","true"],[1,"form-select","form-select-lg","ms-5","col-3",2,"width","fit-content",3,"change"],["cbEmpresa",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["title","borrar filtros","type","button",1,"btn","btn-danger","mt-4","mb-3","me-4",3,"click"],[1,"text-center","mb-10"],["src","assets/loading.gif","alt","","height","100","width","100"],[1,"card-body","py-3"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf","ngIfElse"],[1,"table-responsive"],["haveShipping",""],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],["id","shipping-table",1,"table","table-row-dashed","align-middle","table-hover","table-responsive"],[1,"fw-bolder","text-muted"],[1,"text-start"],[1,"text-start",2,"width","200px"],[4,"ngIf"],[1,"text-start","fw-bolder"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder","cursor-pointer",3,"routerLink"],[1,"btn","btn-primary","me-2","mb-2","btn-sm",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Costos de env\xedo"),e.qZA(),e.YNc(5,bi,5,1,"select",4),e.qZA(),e.TgZ(6,"div",5),e._UZ(7,"app-export-excel",6),e.TgZ(8,"a",7)(9,"button",8),e._uU(10,"Crear costo de env\xedo"),e.qZA()()(),e.TgZ(11,"div",9)(12,"form",10),e.NdJ("ngSubmit",function(){return n.filterSubmit()}),e.TgZ(13,"div",11)(14,"div",12),e._UZ(15,"input",13),e.qZA(),e.TgZ(16,"div",12)(17,"select",14)(18,"option",15),e._uU(19,"Tipo de courrier"),e.qZA(),e.YNc(20,xi,3,2,"ng-container",16),e.qZA()(),e.TgZ(21,"div",12)(22,"select",17)(23,"option",15),e._uU(24,"Rango de peso"),e.qZA(),e.YNc(25,Zi,3,3,"ng-container",16),e.qZA()()(),e.TgZ(26,"div",18)(27,"div",12),e._UZ(28,"input",19),e.YNc(29,Ti,2,0,"button",20),e.qZA()()()()(),e.YNc(30,Ci,2,0,"div",21),e.YNc(31,Si,5,2,"div",22),e.qZA(),e._UZ(32,"app-toast",23)),2&t&&(e.xp6(5),e.Q6J("ngIf",n.isAibo),e.xp6(3),e.Q6J("routerLink",e.DdM(8,qi)),e.xp6(4),e.Q6J("formGroup",n.filterFormGroup),e.xp6(8),e.Q6J("ngForOf",n.allCourrierTypes),e.xp6(5),e.Q6J("ngForOf",n.weightRange),e.xp6(4),e.Q6J("ngIf",n.filterActive),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[d.sg,d.O5,m.rH,m.yS,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u,v.q,z.$]}),i})();var Ii=u(9635);function Ni(i,o){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"img",17),e.qZA())}function Ei(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.showInputForLoadExcelFile())}),e._uU(2," Carga Masiva "),e.qZA(),e.TgZ(3,"a",19),e._uU(4,"Descargar Plantilla"),e.qZA()()}}function Li(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),a=e.MAs(20);return e.KtG(r.open(a))}),e._uU(1," Eliminar "),e.qZA()}}function Fi(i,o){if(1&i&&(e.TgZ(0,"div",32)(1,"div",25)(2,"h4"),e._uU(3),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(3),e.AsE(" Peso: ",t.actualShipping.db_rangemin,"Kg a ",t.actualShipping.db_rangemax,"Kg ")}}function Mi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",20)(1,"div",21)(2,"h2",22),e._uU(3,"Actualizar datos de env\xedo"),e.qZA(),e.YNc(4,Li,2,0,"button",23),e.qZA(),e.TgZ(5,"div",24)(6,"div",25)(7,"h4"),e._uU(8),e.qZA()()(),e.TgZ(9,"div",24)(10,"div",25)(11,"h4"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",26)(14,"div",25)(15,"h4"),e._uU(16),e.qZA()()(),e.TgZ(17,"div",24)(18,"div",25)(19,"h4"),e._uU(20),e.qZA()()(),e.YNc(21,Fi,4,2,"div",27),e.TgZ(22,"div",28)(23,"div",29)(24,"button",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.changeEditShipping())}),e._uU(25," Editar "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf","externo"!==t.shippingCourrierType),e.xp6(4),e.hij("Comuna: ",null==t.actualShipping.tbl_location?null:t.actualShipping.tbl_location.vch_name,""),e.xp6(4),e.hij("Courrier: ",null==t.actualShipping.tbl_courrier?null:t.actualShipping.tbl_courrier.vch_name,""),e.xp6(4),e.hij("Tipo: ",null==t.actualShipping.tbl_courrier?null:t.actualShipping.tbl_courrier.vch_type,""),e.xp6(4),e.hij("Costo: $",t.actualShipping.db_price,""),e.xp6(1),e.Q6J("ngIf","externo"==t.shippingCourrierType)}}function Di(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.messageDisclaimer)}}function Ji(i,o){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"img",17),e.qZA())}function Gi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",33)(1,"label",34),e._uU(2,"Carga masiva (costo de despacho) "),e.YNc(3,Di,2,1,"span",8),e.qZA(),e.TgZ(4,"div",28)(5,"div",35)(6,"button",36),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(9);return e.KtG(r.click())}),e._uU(7,"Cargar"),e.qZA(),e.TgZ(8,"input",37,38),e.NdJ("change",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onFileSelect(r))}),e.qZA(),e._UZ(10,"input",39),e.qZA(),e.TgZ(11,"div",40),e._UZ(12,"input",41),e.qZA(),e.YNc(13,Ji,2,0,"div",5),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.loading&&!t.loading),e.xp6(7),e.Q6J("value",t.idEmpresaUsuario),e.xp6(2),e.Q6J("value",t.textExcelFile),e.xp6(1),e.Q6J("ngIf",t.loading&&!t.loading&&!t.shippingDeleteButtonLoader)}}function Qi(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"option",58),e._uU(2),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function Yi(i,o){if(1&i&&(e.TgZ(0,"div",46)(1,"div",40)(2,"select",55)(3,"option",56),e._uU(4," Empresa "),e.qZA(),e.YNc(5,Qi,3,2,"ng-container",57),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Q6J("ngForOf",t.allEmpresas)}}function Oi(i,o){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"input",59),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("value",t.idEmpresaUsuario)}}function Pi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",46)(1,"div",40)(2,"label",34),e._uU(3,"Comuna "),e.TgZ(4,"span",47),e._uU(5,"*"),e.qZA()(),e._UZ(6,"input",60)(7,"input",61),e.TgZ(8,"button",62),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3),a=e.MAs(22);return e.KtG(r.open(a))}),e._uU(9," Seleccionar "),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(6),e.Q6J("value",t.locationName)("disabled",!0)}}function Bi(i,o){1&i&&(e.TgZ(0,"span",63),e._uU(1,"El costo debe ser mayor a 0 "),e.qZA())}function Ri(i,o){1&i&&(e.TgZ(0,"span",63),e._uU(1,"La comuna es requerida "),e.qZA())}function $i(i,o){if(1&i&&(e.TgZ(0,"div",49),e.YNc(1,Ri,2,0,"span",50),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.campoEsValido("id_comuna"))}}function Vi(i,o){1&i&&(e.TgZ(0,"button",64),e._UZ(1,"span",65),e._uU(2," Cargando... "),e.qZA())}function ji(i,o){if(1&i&&(e.TgZ(0,"button",66),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("disabled",!t.shippingFormGroup.valid),e.xp6(1),e.hij(" ",t.shippingId?"Actualizar":"Guardar"," ")}}function zi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",44),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.submitShipping())}),e.YNc(1,Yi,6,1,"div",45),e.YNc(2,Oi,2,1,"div",8),e.TgZ(3,"div",46)(4,"div",40)(5,"label",34),e._uU(6,"Costo de env\xedo "),e.TgZ(7,"span",47),e._uU(8,"*"),e.qZA()(),e._UZ(9,"input",48),e.qZA()(),e.YNc(10,Pi,10,2,"div",45),e._UZ(11,"div",46),e.TgZ(12,"div",49),e.YNc(13,Bi,2,0,"span",50),e.qZA(),e.YNc(14,$i,2,1,"div",51),e.TgZ(15,"div",28)(16,"div",52),e.YNc(17,Vi,3,0,"button",53),e.YNc(18,ji,2,2,"button",54),e.qZA()()()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.shippingFormGroup),e.xp6(1),e.Q6J("ngIf",t.isAibo&&!t.shippingId),e.xp6(1),e.Q6J("ngIf",!t.isAibo&&!t.shippingId),e.xp6(8),e.Q6J("ngIf","externo"!==t.shippingCourrierType),e.xp6(3),e.Q6J("ngIf",t.campoEsValido("db_price")),e.xp6(1),e.Q6J("ngIf","externo"!==t.shippingCourrierType),e.xp6(3),e.Q6J("ngIf",t.shippingButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.shippingButtonLoader)}}function Ki(i,o){if(1&i&&(e.TgZ(0,"div",42),e.YNc(1,zi,19,8,"form",43),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.showInputExcelFile)}}function Hi(i,o){1&i&&(e._UZ(0,"img",67),e._uU(1," Error del servidor, favor intente nuevamente\n"))}function Wi(i,o){1&i&&(e.TgZ(0,"button",75),e._UZ(1,"span",65),e._uU(2," Eliminando... "),e.qZA())}function Xi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.deleteSelectedShipping())}),e._uU(1," Eliminar "),e.qZA()}}function eo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.dismiss())}),e._uU(1," Cancelar "),e.qZA()}}function to(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",4)(5,"div",68)(6,"div",69)(7,"h2"),e._uU(8,"\xbfEstas seguro?"),e.qZA()()(),e.TgZ(9,"div",70)(10,"div",71),e.YNc(11,Wi,3,0,"button",72),e.YNc(12,Xi,2,0,"button",73),e.YNc(13,eo,2,0,"button",74),e.qZA()()()()()()()),2&i){const t=e.oxw();e.xp6(11),e.Q6J("ngIf",t.shippingDeleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.shippingDeleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.shippingDeleteButtonLoader)}}function no(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",89),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.dismiss())}),e._uU(1," Cancelar "),e.qZA()}}function io(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr")(2,"td",90),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.setLocation(a))}),e._uU(3),e._UZ(4,"a",91),e.qZA()(),e.BQk()}if(2&i){const t=o.$implicit;e.xp6(3),e.hij(" ",t.vch_name," "),e.xp6(1),e.MGl("routerLink","/admin/locations/",t.id,"")}}function oo(i,o){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,io,5,2,"ng-container",57),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.filteredLocations)}}function ro(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",78)(2,"div",1)(3,"div",2)(4,"div",4)(5,"div",68)(6,"div",79)(7,"div",80)(8,"h2",81),e._uU(9,"Agregar comuna"),e.qZA(),e.YNc(10,no,2,0,"button",82),e.qZA(),e.TgZ(11,"div",83)(12,"input",84),e.NdJ("keyup",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.filterLocations(r))}),e.qZA()()()(),e.TgZ(13,"div",85)(14,"table",86)(15,"thead")(16,"tr",87)(17,"th",88),e._uU(18,"Nombre de la comuna"),e.qZA()()(),e.YNc(19,oo,2,1,"tbody",8),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(10),e.Q6J("ngIf",!t.locationButtonLoader),e.xp6(9),e.Q6J("ngIf",t.filteredLocations)}}const ao=function(){return["/mantenedores/shipping"]};let we=(()=>{class i{constructor(t,n,r,a,s,c,p,g){this.usuarioService=t,this.productService=n,this.salesProvider=r,this.fb=a,this.router=s,this.modalService=c,this.rutaActiva=p,this.toastService=g,this.shippingId="",this.ShippingEdit=!1,this.allCourrers=[],this.shippingCourrierType="",this.allLocations=[],this.filteredLocations=[],this.locationName="",this.isAdmin=!1,this.idEmpresaUsuario="",this.isAibo=!1,this.nombreEmpresaUsuario="",this.allEmpresas=[],this.shippingButtonLoader=!1,this.shippingDeleteButtonLoader=!1,this.locationButtonLoader=!1,this.loading=!0,this.showInputExcelFile=!1,this.beforeManagmentID="",this.fileName="",this.messageDisclaimer="Estamos generando la carga masiva de los precios y puede tardar varios minutos, pofavor no cierre o salga de esta p\xe1gina",this.isAdmin=t.adminAibo,this.shippingId=p.snapshot.params.id,this.idEmpresaUsuario=t.usuario.id_empresa,this.beforeManagmentID=this.router.url.substring(0,this.router.url.indexOf(this.shippingId)),"48af74ca-3937-11ed-a734-0e6a408582e7"==this.idEmpresaUsuario&&(this.isAibo=!0),this.isAibo&&this.getAllEmpresas(),this.getEmpresa(),this.getAllLocations(),this.shippingId&&this.getOneShipping()}ngOnInit(){this.shippingFormGroup=this.fb.group("externo"!==this.shippingCourrierType?{db_price:[,[l.kI.required,l.kI.min(1)]],id_comuna:["",[l.kI.required]],id_empresa:[""]}:{db_price:[,[l.kI.required,l.kI.min(1)]]})}getOneShipping(){this.salesProvider.getOneShipping(this.shippingId).subscribe({next:t=>{const n=t.data;this.actualShipping=n,this.shippingCourrierType=n.tbl_courrier.vch_type,this.shippingFormGroup.controls.id_comuna.setValue(n.tbl_location?.id),this.shippingFormGroup.controls.db_price.setValue(n.db_price),this.locationName=n.tbl_location?.vch_name,this.loading=!0},error:t=>{this.loading=!1,this.toastService.show("Error al obtener los datos del env\xedo",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"})}})}submitShipping(){if(this.shippingFormGroup.invalid)this.shippingFormGroup.markAllAsTouched();else if(this.shippingButtonLoader=!0,this.shippingId){const t={...this.shippingFormGroup.value};this.updateShipping(t)}else if(this.isAibo){const t=this.allEmpresas.find(a=>a.id===this.shippingFormGroup.value.id_empresa),n=this.allCourrers.find(a=>a.vch_name.toLocaleLowerCase()==t?.vch_nombre.toLocaleLowerCase()),r={...this.shippingFormGroup.value,id_courrier:n?.id};this.createShipping(r)}else{const t={...this.shippingFormGroup.value,id_courrier:this.actualInternalCourrier.id,id_empresa:this.idEmpresaUsuario};this.createShipping(t)}}createShipping(t){this.salesProvider.postShipping(t).subscribe({next:n=>{this.toastService.show("Env\xedo creado correctamente",{classname:"bg-success text-light",delay:4e3,autohide:!0,headertext:"\xc9xito"}),this.shippingButtonLoader=!1},error:n=>{this.toastService.show("Error al crear el env\xedo",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"}),this.shippingButtonLoader=!1}})}updateShipping(t){this.salesProvider.putShipping(this.shippingId,t).subscribe({next:n=>{this.shippingFormGroup.controls.db_price.setValue(n.data.db_price),this.shippingButtonLoader=!1,this.toastService.show("Env\xedo actualizado correctamente",{classname:"bg-success text-light",delay:4e3,autohide:!0,headertext:"\xc9xito"})},error:n=>{this.toastService.show("Error al actualizar el env\xedo",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"}),this.shippingButtonLoader=!1}})}deleteSelectedShipping(){this.shippingDeleteButtonLoader=!0,this.salesProvider.deleteShipping(this.shippingId).subscribe({next:t=>{this.toastService.show("Env\xedo eliminado correctamente",{classname:"bg-success text-light",delay:4e3,autohide:!0,headertext:"\xc9xito"}),this.modalService.dismissAll(),setTimeout(()=>{this.shippingDeleteButtonLoader=!1,this.router.navigateByUrl("/mantenedores/shipping")},200)},error:t=>{this.toastService.show("Error al eliminar el env\xedo",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"}),this.shippingDeleteButtonLoader=!1}})}getAllEmpresas(){this.salesProvider.getEmpresas().subscribe({next:t=>{this.allEmpresas=t.data?t.data:[]},error:t=>{this.loading=!1,this.toastService.show("Error al obtener las empresas",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"})}})}getEmpresa(){this.salesProvider.getEmpresa(this.idEmpresaUsuario).subscribe({next:t=>{this.nombreEmpresaUsuario=t.data.vch_nombre,this.getAllCourriers()},error:t=>{this.loading=!1,this.toastService.show("Error al obtener los datos de la empresa",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"})}})}getAllLocations(){this.salesProvider.getAllLocations().subscribe({next:t=>{const n=t.data?t.data:[];this.allLocations=n,this.filteredLocations=n},error:t=>{this.toastService.show("Error al obtener las comunas",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"})}})}setLocation(t){this.shippingFormGroup.controls.id_comuna.setValue(t.id),this.locationName=t.vch_name,this.modalService.dismissAll()}getAllCourriers(){this.salesProvider.getAllCourriers().subscribe({next:t=>{this.allCourrers=t.data?t.data:[],this.actualInternalCourrier=this.allCourrers.find(r=>r.vch_name.toLocaleLowerCase()==this.nombreEmpresaUsuario),this.loading=!1},error:t=>{this.loading=!1,this.toastService.show("Error al obtener los datos de los courriers",{classname:"bg-danger text-light",delay:4e3,autohide:!0,headertext:"Error"})}})}campoEsValido(t){return this.shippingFormGroup.controls[t].errors&&this.shippingFormGroup.controls[t].touched&&this.shippingFormGroup}changeEditShipping(){this.ShippingEdit=!this.ShippingEdit}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{},n=>{})}filterLocations(t){const n=t.target.value;this.filteredLocations=this.allLocations.filter(r=>r.vch_name.toLocaleLowerCase().includes(n.toLocaleLowerCase()))}get textExcelFile(){return this.fileName?this.fileName:"Sin Archivo"}showInputForLoadExcelFile(){this.showInputExcelFile=!this.showInputExcelFile}onFileSelect(t){var a,n=this;if(t.target.files.length&&t.target.files.length>0){const r=t.target.files[0];this.fileName=r.name,this.uploadExcelFiles={done:!1,progress:0,excel_template:r,id_empresa:this.idEmpresaUsuario},this.uploadExcelFiles.excel_template=r,this.shippingButtonLoader=!0,this.uploadSub=this.salesProvider.postShippingCost(this.uploadExcelFiles).subscribe({next:(a=(0,f.Z)(function*(s){s.type==I.dt.UploadProgress&&(n.uploadProgress=Math.round(s.loaded/s.total*100),n.loading=!0),s instanceof I.Zn&&(n.loading=!1,n.toastService.show("Enviado correctamente",{classname:"bg-success text-light",delay:4e3,autohide:!0,headertext:"\xc9xito"}))}),function(c){return a.apply(this,arguments)}),error:a=>{this.loading=!1,this.toastService.show("Error al enviar",{classname:"bg-danger text-center  text-light",delay:4e3,autohide:!0,headertext:"Error"}),console.error("error al tratar de subir el archivo",a)}}),(0,Ii.z)((0,he.x)(()=>this.uploadSub.unsubscribe()))}}cancelUpload(){this.uploadSub.unsubscribe(),this.reset()}reset(){this.uploadProgress=null,this.uploadSub=null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.i),e.Y36(ie.M),e.Y36(Ae.M),e.Y36(l.qu),e.Y36(m.F0),e.Y36(_.FF),e.Y36(m.gz),e.Y36(x.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-shipping-management"]],decls:24,vars:7,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"mb-4",3,"routerLink"],[1,"card","card-flush"],["class","text-center mb-6 mt-4",4,"ngIf"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title","col-10",2,"justify-content","space-between","width","100%"],[4,"ngIf"],["class","card-title d-flex flex-column col-12",4,"ngIf"],["enctype","multipart/form-data","class","row input-excel-file","style","justify-content: space-between; width: 100%;",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["deleteShipping",""],["selectLocation",""],[1,"text-center","mb-6","mt-4"],["src","assets/loading.gif","alt","","height","100","width","100"],["color","warn",1,"btn","btn-success","ms-5",3,"click"],["color","warn","download","","href","../../../../../../assets/media/documents/template-shipping-cost-to-fill.xlsx",1,"btn","btn-primary","ms-5"],[1,"card-title","d-flex","flex-column","col-12"],[1,"row","col-12","mb-5"],[1,"col-10"],["class","btn  btn-danger col float-right",3,"click",4,"ngIf"],[1,"row","mb-5","w-100"],[1,"col-12"],[1,"row","mb-5"],["class","row mb-4 w-100",4,"ngIf"],[1,"row"],[1,"col"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"btn","btn-danger","col","float-right",3,"click"],[1,"row","mb-4","w-100"],["enctype","multipart/form-data",1,"row","input-excel-file",2,"justify-content","space-between","width","100%"],[1,"form-label"],[1,"col-3"],[1,"btn","btn-primary",3,"click"],["type","file","name","excel_template","accept",".xlsx, .xls, .csv","required","",1,"file-input",2,"display","none",3,"change"],["fileUpload",""],["type","hidden","name","id_empresa",3,"value"],[1,"col-6"],["type","text","readonly","",1,"form-control","mb-2",3,"value"],[1,"card-body","pt-0"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["class","row mt-5",4,"ngIf"],[1,"row","mt-5"],[1,"text-danger"],["type","number","placeholder","Costo","formControlName","db_price",1,"form-control"],[1,"row","mb-2","mt-0","col-5","text-center"],["class","form-text p-1 badge-light-danger",4,"ngIf"],["class","row mb-2 mt-0 col-5 text-center",4,"ngIf"],[1,"col-4"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["data-control","selectOrigen","data-hide-search","true","data-placeholder","Select an option","formControlName","id_empresa","name","id_empresa","title","id_empresa",1,"form-select","mb-2"],["value","","disabled","","default","","selected","","hidden",""],[4,"ngFor","ngForOf"],[3,"value"],["type","hidden","formControlName","id_empresa",1,"form-control",3,"value"],["type","text","placeholder","Selecciona una comuna",1,"form-control",3,"value","disabled"],["type","hidden","formControlName","id_comuna",1,"form-control"],["type","button",1,"btn","btn-primary","col-4","btn-sm","mt-3",3,"click"],[1,"form-text","p-1","badge-light-danger"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-primary",3,"disabled"],["src","assets/dangerTpl.svg","alt","dangerTpl"],[1,"card-header","align-items-center","justify-content-center","gap-2","gap-md-5"],[1,"card-title","col-12","mb-5","justify-content-center"],[1,"card-body","pt-8"],[1,"row","justify-content-between"],["class","btn btn-sm btn-danger col-12 disabled","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-danger col-5",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary col-5",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-sm","btn-danger","col-12","disabled"],[1,"btn","btn-sm","btn-danger","col-5",3,"click"],[1,"btn","btn-sm","btn-primary","col-5",3,"click"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid",2,"max-height","600px","overflow","auto"],[1,"card-title","col-12","mb-5","d-flex","flex-column","justify-content-center"],[1,"d-flex","col-12","mb-3","justify-content-between"],[2,"width","fit-content"],["class","btn btn-sm btn-danger col-4",3,"click",4,"ngIf"],[1,"row","justify-content-between","mt-5"],["type","text","placeholder","Nombre de la comuna","name","name",1,"form-control",3,"keyup"],[1,"card-body","pt-3"],["id","shipping-table",1,"table","table-row-dashed","align-middle","table-hover","table-responsive"],[1,"fw-bolder","text-muted"],[1,"text-start"],[1,"btn","btn-sm","btn-danger","col-4",3,"click"],[1,"text-start","text-gray-800","text-hover-primary","fs-5","fw-bolder","cursor-pointer",3,"click"],[3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2")(4,"a",3),e._uU(5,"Volver"),e.qZA()(),e.TgZ(6,"div",4),e.YNc(7,Ni,2,0,"div",5),e.TgZ(8,"div",6)(9,"div",7)(10,"h2"),e._uU(11,"Crear nuevo costo de env\xedo"),e.qZA(),e.YNc(12,Ei,5,0,"div",8),e.qZA(),e.YNc(13,Mi,26,6,"div",9),e.qZA(),e.YNc(14,Gi,14,4,"form",10),e.YNc(15,Ki,2,1,"div",11),e.qZA()()()(),e._UZ(16,"app-toast",12),e.YNc(17,Hi,2,0,"ng-template",null,13,e.W1O),e.YNc(19,to,14,3,"ng-template",null,14,e.W1O),e.YNc(21,ro,20,2,"ng-template",null,15,e.W1O),e._UZ(23,"app-toast",12)),2&t&&(e.xp6(4),e.Q6J("routerLink",e.DdM(6,ao)),e.xp6(3),e.Q6J("ngIf",n.loading&&n.shippingId&&!n.beforeManagmentID),e.xp6(5),e.Q6J("ngIf",n.loading&&!n.beforeManagmentID||!n.shippingId),e.xp6(1),e.Q6J("ngIf",n.shippingId&&n.actualShipping),e.xp6(1),e.Q6J("ngIf",n.showInputExcelFile),e.xp6(1),e.Q6J("ngIf",!n.shippingId||n.ShippingEdit))},dependencies:[d.sg,d.O5,m.yS,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.sg,l.u,l.F,v.q],styles:[".row.input-excel-file[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-left:30px}"]}),i})();var ke=u(4341);function so(i,o){1&i&&e._UZ(0,"div",23)}function lo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.removeFilters())}),e._uU(1," Quitar filtros "),e.qZA()}}function co(i,o){1&i&&(e.TgZ(0,"div",25),e._UZ(1,"img",26),e.qZA())}function uo(i,o){1&i&&(e.TgZ(0,"div",31)(1,"div"),e._uU(2,"No hay datos para mostrar"),e.qZA()())}const G=function(i){return[i]};function po(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",36)(3,"a",37),e._uU(4),e.qZA()(),e.TgZ(5,"td",36)(6,"a",37),e._uU(7),e.ALo(8,"rutFormat"),e.qZA()(),e.TgZ(9,"td")(10,"a",37),e._uU(11),e.ALo(12,"titlecase"),e.qZA()(),e.TgZ(13,"td",36)(14,"a",37),e._uU(15),e.qZA()(),e.TgZ(16,"td",36)(17,"a",37),e._uU(18),e.ALo(19,"date"),e.qZA()()(),e.BQk()),2&i){const t=o.$implicit,n=o.index,r=e.oxw(3);let a;e.xp6(3),e.Q6J("routerLink",e.VKq(17,G,"../client/"+t.id)),e.xp6(1),e.Oqu(r.allFilterClients.length-n),e.xp6(2),e.Q6J("routerLink",e.VKq(19,G,"../client/"+t.id)),e.xp6(1),e.Oqu(e.lcZ(8,10,t.rut)),e.xp6(3),e.Q6J("routerLink",e.VKq(21,G,"../client/"+t.id)),e.xp6(1),e.hij(" ",e.lcZ(12,12,t.name)," "),e.xp6(3),e.Q6J("routerLink",e.VKq(23,G,"../client/"+t.id)),e.xp6(1),e.Oqu(null!==(a=t.company)&&void 0!==a?a:"-"),e.xp6(2),e.Q6J("routerLink",e.VKq(25,G,"../client/"+t.id)),e.xp6(1),e.hij("",e.xi3(19,14,t.createdAt,"dd/MM/yyyy")," ")}}function go(i,o){if(1&i&&(e.TgZ(0,"table",32)(1,"thead")(2,"tr",33)(3,"th",34),e._uU(4,"#"),e.qZA(),e.TgZ(5,"th",34),e._uU(6,"Rut"),e.qZA(),e.TgZ(7,"th",34),e._uU(8,"Nombre"),e.qZA(),e.TgZ(9,"th",34),e._uU(10,"Empresa"),e.qZA(),e.TgZ(11,"th",34),e._uU(12,"Fecha"),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,po,20,27,"ng-container",35),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(14),e.Q6J("ngForOf",t.allFilterClients)}}function mo(i,o){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,uo,3,0,"div",28),e.TgZ(2,"div",29),e.YNc(3,go,15,1,"ng-template",null,30,e.W1O),e.qZA()()),2&i){const t=e.MAs(4),n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.allFilterClients&&0==n.allFilterClients.length)("ngIfElse",t)}}let ho=(()=>{class i{constructor(t,n,r){this.mantenedorProvider=t,this.formBuilder=n,this.toastService=r,this.allClients=[],this.allFilterClients=[],this.filterActive=!1,this.isLoading=!0,this.loadData()}ngOnInit(){this.filterFormGroup=this.formBuilder.group({name:"",vch_email:"",rut:"",onlyCompany:!1,onlyPerson:!1,initDate:"",endDate:""}),this.filterFormGroup.get("onlyCompany")?.valueChanges.subscribe(t=>{t&&this.filterFormGroup.get("onlyPerson")?.setValue(!1)}),this.filterFormGroup.get("onlyPerson")?.valueChanges.subscribe(t=>{t&&this.filterFormGroup.get("onlyCompany")?.setValue(!1)})}loadData(){var t=this;return(0,f.Z)(function*(){yield t.loadClients(),t.isLoading=!1})()}loadClients(){var t=this;return(0,f.Z)(function*(){try{t.allClients=(yield(0,y.z)(t.mantenedorProvider.getAllClients())).data||[],t.allFilterClients=t.allClients}catch{t.toastService.show("Error al cargar los clientes",{classname:"bg-danger text-light",delay:3e3})}})()}filterSubmit(){this.filterActive=!0,this.allFilterClients=this.allClients.filter(n=>{if(this.filterValidations(n))return n})}removeFilters(){this.allFilterClients=[...this.allClients],this.filterActive=!1,this.filterFormGroup.reset({id_origen:"",id_empresa:"",bit_terminada:""})}filterValidations(t){const n=this.filterFormGroup.value;return!(n.name&&!t.name?.toLocaleLowerCase().includes(n.name.toLocaleLowerCase())&&!t.vch_razon_social?.toLocaleLowerCase().includes(n.name.toLocaleLowerCase())||n.rut&&!t.rut?.toLocaleLowerCase().includes(n.rut.toLocaleLowerCase())||n.onlyCompany&&0==t.isCompany||n.onlyPerson&&1==t.isCompany||(n.initDate||n.endDate)&&!this.filterValidateDate(t))}filterValidateDate(t){const n=this.filterFormGroup.value,r=new Date(t.createdAt).getTime(),a=n.initDate?new Date(n.initDate.year,n.initDate.month-1,n.initDate.day).getTime():0,s=n.endDate?new Date(n.endDate.year,n.endDate.month-1,n.endDate.day).getTime():Date.now();return r>=a&&r<=s}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(l.qu),e.Y36(x.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-client-list"]],decls:33,vars:5,consts:[[1,"card","mb-5","mb-xl-10"],[1,"card-header","border-0","pt-5"],[1,"card-title","w-100","d-flex","justify-content-between"],["class","float-right",4,"ngIf"],[1,"card-toolbar","my-4"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","placeholder","Nombre","name","name","formControlName","name",1,"form-control"],["type","text","placeholder","Rut","name","rut","formControlName","rut",1,"form-control"],[1,"row","mt-5"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","initDate","formControlName","initDate","ngbDatepicker","",1,"form-control"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control"],["dFin","ngbDatepicker"],[1,"row","d-flex","justify-content-between","mt-5"],["type","submit","value","Filtrar",1,"btn","btn-primary","mt-4","mb-3","me-4"],["title","borrar filtros","type","button","class","btn btn-danger mt-4 mb-3 me-4",3,"click",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body py-3",4,"ngIf"],["aria-live","polite","aria-atomic","true"],[1,"float-right"],["title","borrar filtros","type","button",1,"btn","btn-danger","mt-4","mb-3","me-4",3,"click"],[1,"text-center","mb-10"],["src","/assets/loading.gif","alt","","height","100","width","100"],[1,"card-body","py-3"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf","ngIfElse"],[1,"table-responsive"],["haveAllProducts",""],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],["id","clients-table",1,"table","table-row-dashed","align-middle","table-hover","table-responsive"],[1,"fw-bolder","text-muted"],[1,"text-start"],[4,"ngFor","ngForOf"],[1,"text-start","fw-bolder"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Clientes"),e.qZA(),e.YNc(5,so,1,0,"div",3),e.qZA(),e.TgZ(6,"div",4)(7,"form",5),e.NdJ("ngSubmit",function(){return n.filterSubmit()}),e.TgZ(8,"div",6)(9,"div",7),e._UZ(10,"input",8),e.qZA(),e.TgZ(11,"div",7),e._UZ(12,"input",9),e.qZA()(),e.TgZ(13,"div",10)(14,"div",7)(15,"div",11),e._UZ(16,"input",12,13),e.TgZ(18,"button",14),e.NdJ("click",function(){e.CHM(r);const s=e.MAs(17);return e.KtG(s.toggle())}),e._uU(19," . "),e.qZA()()(),e.TgZ(20,"div",7)(21,"div",11),e._UZ(22,"input",15,16),e.TgZ(24,"button",14),e.NdJ("click",function(){e.CHM(r);const s=e.MAs(23);return e.KtG(s.toggle())}),e._uU(25," . "),e.qZA()()()(),e.TgZ(26,"div",17)(27,"div",7),e._UZ(28,"input",18),e.YNc(29,lo,2,0,"button",19),e.qZA()()()()(),e.YNc(30,co,2,0,"div",20),e.YNc(31,mo,5,2,"div",21),e.qZA(),e._UZ(32,"app-toast",22)}2&t&&(e.xp6(5),e.Q6J("ngIf",!n.isLoading),e.xp6(2),e.Q6J("formGroup",n.filterFormGroup),e.xp6(22),e.Q6J("ngIf",n.filterActive),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading))},dependencies:[d.sg,d.O5,m.yS,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,v.q,_.J4,d.rS,d.uU,ke.V]}),i})();function _o(i,o){1&i&&(e.TgZ(0,"div",5),e._UZ(1,"img",6),e.qZA())}function fo(i,o){if(1&i&&(e.TgZ(0,"div",11)(1,"label",12),e._uU(2,"Rut"),e.qZA(),e.TgZ(3,"div",13)(4,"span",14),e._uU(5),e.ALo(6,"rutFormat"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,1,t.client.vch_rut))}}function vo(i,o){if(1&i&&(e.TgZ(0,"div",11)(1,"label",12),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"div",13)(4,"span",14),e._uU(5),e.ALo(6,"titlecase"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,1,t.client.vch_nombre))}}function bo(i,o){if(1&i&&(e.TgZ(0,"div",11)(1,"label",12),e._uU(2,"Raz\xf3n social"),e.qZA(),e.TgZ(3,"div",13)(4,"span",14),e._uU(5),e.ALo(6,"titlecase"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,1,t.client.vch_razon_social))}}function xo(i,o){if(1&i&&(e.TgZ(0,"div",11)(1,"label",12),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"div",13)(4,"span",14),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.client.vch_correo)}}function Zo(i,o){1&i&&(e.TgZ(0,"div",23)(1,"strong"),e._uU(2,"Sin Ventas"),e.qZA()())}function To(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"th",30)(2,"a",31),e._uU(3),e.qZA()(),e.TgZ(4,"td",32)(5,"a",33),e._uU(6),e.ALo(7,"rutFormat"),e.qZA()(),e.TgZ(8,"td",32)(9,"a",33),e._uU(10),e.qZA()(),e.TgZ(11,"td",34)(12,"a",35),e._uU(13),e.qZA()(),e.TgZ(14,"td",32)(15,"a",35),e._uU(16),e.qZA()(),e.TgZ(17,"td",32)(18,"a",35),e._uU(19),e.qZA()(),e.TgZ(20,"td",36)(21,"a",35),e._uU(22),e.ALo(23,"currency"),e.qZA()(),e.TgZ(24,"td",37)(25,"a",35),e._uU(26),e.ALo(27,"date"),e.qZA()(),e.TgZ(28,"td",38)(29,"div",39),e._uU(30),e.qZA()()()),2&i){const t=o.$implicit,n=e.oxw(4);e.xp6(2),e.Q6J("routerLink","/sales/detalle/"+t.id),e.xp6(1),e.Oqu(t.id),e.xp6(2),e.Q6J("routerLink","/sales/detalle/"+t.id),e.xp6(1),e.Oqu(e.lcZ(7,18,t.rutCliente)),e.xp6(3),e.Q6J("routerLink","/sales/detalle/"+t.id),e.xp6(1),e.Oqu(t.bit_factura&&t.nombreEmpresaCliente?t.nombreEmpresaCliente:t.nombreCliente),e.xp6(2),e.Q6J("routerLink","/sales/detalle/"+t.id),e.xp6(1),e.Oqu(t.categoria),e.xp6(2),e.Q6J("routerLink","/sales/detalle/"+t.id),e.xp6(1),e.Oqu(t.medioPago),e.xp6(2),e.Q6J("routerLink","/sales/detalle/"+t.id),e.xp6(1),e.Oqu(t.medioEnvio),e.xp6(2),e.Q6J("routerLink","/sales/detalle/"+t.id),e.xp6(1),e.Oqu(e.gM2(23,20,t.TotalPagado+t.porPagar+t.envio,"$","code","1.0-0")),e.xp6(3),e.Q6J("routerLink","/sales/detalle/"+t.id),e.xp6(1),e.Oqu(e.xi3(27,25,t.dt_fecha,"dd/MM/yyyy")),e.xp6(3),e.Q6J("ngClass",n.getCssStatus(t.color)),e.xp6(1),e.Oqu(t.estado)}}function Co(i,o){if(1&i&&(e.TgZ(0,"table",24)(1,"thead")(2,"tr",25)(3,"th",26),e._uU(4,"Orden ID"),e.qZA(),e.TgZ(5,"th",26),e._uU(6,"Rut Cliente"),e.qZA(),e.TgZ(7,"th",26),e._uU(8,"Nombre Cliente"),e.qZA(),e.TgZ(9,"th",27),e._uU(10,"Categor\xeda"),e.qZA(),e.TgZ(11,"th",26),e._uU(12,"Tipo Pago"),e.qZA(),e.TgZ(13,"th",26),e._uU(14,"Tipo Env\xedo"),e.qZA(),e.TgZ(15,"th",26),e._uU(16,"Total Venta"),e.qZA(),e.TgZ(17,"th",26),e._uU(18,"Fecha"),e.qZA(),e.TgZ(19,"th",26),e._uU(20,"Estado"),e.qZA()()(),e.TgZ(21,"tbody",28),e.YNc(22,To,31,28,"tr",29),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(22),e.Q6J("ngForOf",t.client.sales)}}function yo(i,o){1&i&&(e.TgZ(0,"div",23)(1,"strong"),e._uU(2,"Sin Cotizaciones"),e.qZA()())}function Ao(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",43)(3,"a",33),e._uU(4),e.ALo(5,"rutFormat"),e.qZA()(),e.TgZ(6,"td")(7,"a",33),e._uU(8),e.ALo(9,"titlecase"),e.qZA()(),e.TgZ(10,"td")(11,"a",33),e._uU(12),e.ALo(13,"titlecase"),e.qZA()(),e.TgZ(14,"td",43)(15,"a",33),e._uU(16),e.ALo(17,"lowercase"),e.qZA()(),e.TgZ(18,"td",43)(19,"a",33),e._uU(20),e.ALo(21,"lowercase"),e.qZA()(),e.TgZ(22,"td",43)(23,"a",33),e._uU(24),e.qZA()(),e.TgZ(25,"td",43)(26,"a",33),e._uU(27),e.ALo(28,"date"),e.qZA()()(),e.BQk()),2&i){const t=o.$implicit;e.xp6(3),e.Q6J("routerLink","/sales/cotizacion/"+t.id),e.xp6(1),e.Oqu(e.lcZ(5,14,t.vch_rut)),e.xp6(3),e.Q6J("routerLink","/sales/cotizacion/"+t.id),e.xp6(1),e.hij(" ",t.vch_razonsocial&&e.lcZ(9,16,t.vch_razonsocial)," "),e.xp6(3),e.Q6J("routerLink","/sales/cotizacion/"+t.id),e.xp6(1),e.hij(" ",t.vch_direccion&&e.lcZ(13,18,t.vch_direccion)," "),e.xp6(3),e.Q6J("routerLink","/sales/cotizacion/"+t.id),e.xp6(1),e.Oqu(t.vch_email&&e.lcZ(17,20,t.vch_email)),e.xp6(3),e.Q6J("routerLink","/sales/cotizacion/"+t.id),e.xp6(1),e.hij(" ",t.vch_vendedor&&e.lcZ(21,22,t.vch_vendedor)," "),e.xp6(3),e.Q6J("routerLink","/sales/cotizacion/"+t.id),e.xp6(1),e.hij(" ",t.total," "),e.xp6(2),e.Q6J("routerLink","/sales/cotizacion/"+t.id),e.xp6(1),e.Oqu(e.xi3(28,24,t.createdAt,"dd/MM/yyyy"))}}function wo(i,o){if(1&i&&(e.TgZ(0,"table",40)(1,"thead")(2,"tr",41)(3,"th",42),e._uU(4,"Rut"),e.qZA(),e.TgZ(5,"th",42),e._uU(6,"Raz\xf3n social"),e.qZA(),e.TgZ(7,"th",42),e._uU(8,"Direccion"),e.qZA(),e.TgZ(9,"th",42),e._uU(10,"Email"),e.qZA(),e.TgZ(11,"th",42),e._uU(12,"Vendedor"),e.qZA(),e.TgZ(13,"th",42),e._uU(14,"Total"),e.qZA(),e.TgZ(15,"th",42),e._uU(16,"Fecha"),e.qZA()()(),e.TgZ(17,"tbody"),e.YNc(18,Ao,29,27,"ng-container",29),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(18),e.Q6J("ngForOf",t.client.quotes)}}function ko(i,o){1&i&&(e.TgZ(0,"div",23)(1,"strong"),e._uU(2,"Sin Leads"),e.qZA()())}function So(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",43)(3,"a",33),e._uU(4),e.qZA()(),e.TgZ(5,"td",43)(6,"a",33),e._uU(7),e.qZA()(),e.TgZ(8,"td",43)(9,"a",44),e._uU(10),e.qZA()(),e.TgZ(11,"td")(12,"a",33),e._uU(13),e.ALo(14,"titlecase"),e.ALo(15,"titlecase"),e.qZA()(),e.TgZ(16,"td",43)(17,"a",33),e._uU(18),e.ALo(19,"rutFormat"),e.qZA()(),e.TgZ(20,"td",43)(21,"a",33),e._uU(22),e.ALo(23,"lowercase"),e.qZA()(),e.TgZ(24,"td",43)(25,"a",44),e._uU(26),e.qZA()(),e.TgZ(27,"td",43)(28,"a",33),e._uU(29),e.ALo(30,"date"),e.qZA()()(),e.BQk()),2&i){const t=o.$implicit,n=o.index,r=e.oxw(4);e.xp6(3),e.Q6J("routerLink","/sales/lead/"+t.id),e.xp6(1),e.hij(" ",r.client.leads.length-n,""),e.xp6(2),e.Q6J("routerLink","/sales/lead/"+t.id),e.xp6(1),e.hij(" ",null==t.tbl_origen?null:t.tbl_origen.vch_nombre," "),e.xp6(2),e.Q6J("routerLink","/sales/lead/"+t.id),e.xp6(1),e.hij(" ",(null==t.tbl_empresa?null:t.tbl_empresa.vch_nombre)||"Ninguno"," "),e.xp6(2),e.Q6J("routerLink","/sales/lead/"+t.id),e.xp6(1),e.hij(" ",t.vch_razonsocial?e.lcZ(14,16,t.vch_razonsocial):e.lcZ(15,18,t.vch_nombre)," "),e.xp6(4),e.Q6J("routerLink","/sales/lead/"+t.id),e.xp6(1),e.hij(" ",e.lcZ(19,20,t.vch_rut?t.vch_rut:t.vch_rutempresa)," "),e.xp6(3),e.Q6J("routerLink","/sales/lead/"+t.id),e.xp6(1),e.hij(" ",e.lcZ(23,22,t.vch_email),""),e.xp6(3),e.Q6J("routerLink","/sales/lead/"+t.id),e.xp6(1),e.hij(" ",t.vch_vendedorasignado||"Sin vendedor"," "),e.xp6(2),e.Q6J("routerLink","/sales/lead/"+t.id),e.xp6(1),e.hij(" ",e.xi3(30,24,t.createdAt,"dd/MM/yyyy")," ")}}function qo(i,o){if(1&i&&(e.TgZ(0,"table",40)(1,"thead")(2,"tr",41)(3,"th",42),e._uU(4,"#"),e.qZA(),e.TgZ(5,"th",42),e._uU(6,"Origen"),e.qZA(),e.TgZ(7,"th",42),e._uU(8,"Vendedor"),e.qZA(),e.TgZ(9,"th",42),e._uU(10,"Nombre"),e.qZA(),e.TgZ(11,"th",42),e._uU(12,"Rut"),e.qZA(),e.TgZ(13,"th",42),e._uU(14,"Email"),e.qZA(),e.TgZ(15,"th",42),e._uU(16,"Asignado"),e.qZA(),e.TgZ(17,"th",42),e._uU(18,"Fecha"),e.qZA()()(),e.TgZ(19,"tbody"),e.YNc(20,So,31,27,"ng-container",29),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(20),e.Q6J("ngForOf",t.client.leads)}}function Uo(i,o){if(1&i&&(e.TgZ(0,"div",17)(1,"div",18)(2,"h4",19),e._uU(3,"Ventas"),e.qZA(),e.YNc(4,Zo,3,0,"div",20),e.YNc(5,Co,23,1,"table",21),e.qZA(),e.TgZ(6,"div",18)(7,"h4",19),e._uU(8,"Cotizaciones"),e.qZA(),e.YNc(9,yo,3,0,"div",20),e.YNc(10,wo,19,1,"table",22),e.qZA(),e.TgZ(11,"div",18)(12,"h4",19),e._uU(13,"Leads"),e.qZA(),e.YNc(14,ko,3,0,"div",20),e.YNc(15,qo,21,1,"table",22),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngIf",0==t.client.sales.length),e.xp6(1),e.Q6J("ngIf",t.client.sales.length>0),e.xp6(4),e.Q6J("ngIf",0==t.client.quotes.length),e.xp6(1),e.Q6J("ngIf",t.client.quotes.length>0),e.xp6(4),e.Q6J("ngIf",0==t.client.leads.length),e.xp6(1),e.Q6J("ngIf",t.client.leads.length>0)}}function Io(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"h2"),e._uU(4,"Detalle del cliente"),e.qZA()()(),e.TgZ(5,"div",10)(6,"div",11)(7,"label",12),e._uU(8,"Empresa"),e.qZA(),e.TgZ(9,"div",13)(10,"span",14),e._uU(11),e.qZA()()(),e.YNc(12,fo,7,3,"div",15),e.YNc(13,vo,7,3,"div",15),e.YNc(14,bo,7,3,"div",15),e.YNc(15,xo,6,1,"div",15),e.TgZ(16,"div",11)(17,"label",12),e._uU(18,"Ventas"),e.qZA(),e.TgZ(19,"div",13)(20,"span",14),e._uU(21),e.qZA()()(),e.TgZ(22,"div",11)(23,"label",12),e._uU(24,"Cotizaciones"),e.qZA(),e.TgZ(25,"div",13)(26,"span",14),e._uU(27),e.qZA()()(),e.TgZ(28,"div",11)(29,"label",12),e._uU(30,"Leads"),e.qZA(),e.TgZ(31,"div",13)(32,"span",14),e._uU(33),e.qZA()()(),e.TgZ(34,"div",11)(35,"label",12),e._uU(36,"Fecha"),e.qZA(),e.TgZ(37,"div",13)(38,"span",14),e._uU(39),e.ALo(40,"date"),e.qZA()()()(),e._UZ(41,"hr"),e.YNc(42,Uo,16,6,"div",16),e.qZA()),2&i){const t=e.oxw();let n;e.xp6(11),e.Oqu(null!==(n=t.client.vch_empresa)&&void 0!==n?n:""),e.xp6(1),e.Q6J("ngIf",t.client.vch_rut),e.xp6(1),e.Q6J("ngIf",t.client.vch_nombre),e.xp6(1),e.Q6J("ngIf",t.client.vch_razon_social),e.xp6(1),e.Q6J("ngIf",t.client.vch_correo),e.xp6(6),e.Oqu(t.client.sales.length),e.xp6(6),e.Oqu(t.client.quotes.length),e.xp6(6),e.Oqu(t.client.leads.length),e.xp6(6),e.Oqu(e.xi3(40,10,t.client.createdAt,"dd/MM/yyyy")),e.xp6(3),e.Q6J("ngIf",!t.isLoading)}}const No=function(){return["../"]};let Eo=(()=>{class i{constructor(t,n,r){this.mantenedorProvider=t,this.rutaActiva=n,this.toastService=r,this.isLoading=!0,this.clientId=n.snapshot.params.id,this.loadData()}loadData(){var t=this;return(0,f.Z)(function*(){yield t.loadClientData(),t.isLoading=!1})()}ngOnInit(){}loadClientData(){var t=this;return(0,f.Z)(function*(){try{const n=yield(0,y.z)(t.mantenedorProvider.getClientDetail(t.clientId));if(!n.data)throw new Error(`No se encontr\xf3 el cliente con id = ${t.clientId}`);t.client=n.data,console.log(t.client)}catch{t.toastService.show(`Error al cargar la data del cliente con id = ${t.clientId}`,{classname:"bg-danger text-light",delay:3e3})}})()}getCssStatus(t){let n;switch(t){case"bg-success":n="badge-light-success";break;case"bg-warning":n="badge-light-warning";break;default:n="badge-light-danger"}return n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(m.gz),e.Y36(x.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-client-detail"]],decls:6,vars:4,consts:[[1,"mb-5"],[1,"text-gray-800","text-hover-primary","fs-2","fw-bolder",3,"routerLink"],["class","text-center mb-10",4,"ngIf"],["class","card mb-5 mb-xl-10 mb-5","id","kt_profile_details_view",4,"ngIf"],["aria-live","polite","aria-atomic","true"],[1,"text-center","mb-10"],["src","/assets/loading.gif","alt","","height","100","width","100"],["id","kt_profile_details_view",1,"card","mb-5","mb-xl-10","mb-5"],[1,"card-header","py-1"],[1,"card-title","w-100","d-flex","justify-content-between"],[1,"card-body","p-9"],[1,"row","mb-7"],[1,"col-lg-4","fw-bold","text-muted"],[1,"col-lg-8","fv-row"],[1,"fw-bold","fs-6"],["class","row mb-7",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"card-body"],[1,"py-3"],[1,"my-4","text-center"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","table align-middle table-row-dashed fs-6 gy-5","id","kt_ecommerce_sales_table",4,"ngIf"],["class","table table-row-dashed align-middle table-hover table-responsive",4,"ngIf"],["role","alert",1,"alert","alert-danger","m-10"],["id","kt_ecommerce_sales_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"col"],[1,"col","text-center"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],[1,"row"],[1,"text-gray-800","text-hover-primary","fw-bolder",3,"routerLink"],[1,"text-gray-800","fs-5","fw-bolder"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"],[1,"text-gray-800","fs-5","fw-bolder","text-center"],[1,"fw-bolder","text-gray-800","text-hover-primary",3,"routerLink"],[1,"pe-0"],["data-order","2022-03-23",1,"pe-0"],["data-order","Completed",1,"pe-0"],[1,"badge",3,"ngClass"],[1,"table","table-row-dashed","align-middle","table-hover","table-responsive"],[1,"fw-bolder","text-muted"],[1,"text-start"],[1,"text-start","fw-bolder"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder","cursor-pointer",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"h3",0)(1,"a",1),e._uU(2," Volver "),e.qZA()(),e.YNc(3,_o,2,0,"div",2),e.YNc(4,Io,43,13,"div",3),e._UZ(5,"app-toast",4)),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(3,No)),e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading))},dependencies:[d.mk,d.sg,d.O5,m.yS,v.q,d.i8,d.rS,d.H9,d.uU,ke.V]}),i})();function Lo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.removeFilters())}),e._uU(1," Quitar filtros "),e.qZA()}}function Fo(i,o){1&i&&(e.TgZ(0,"div",23),e._UZ(1,"img",24),e.qZA())}function Mo(i,o){1&i&&(e.TgZ(0,"div",25)(1,"strong"),e._uU(2,"Sin carruseles"),e.qZA()())}const Do=function(i){return[i]};function Jo(i,o){if(1&i&&(e.TgZ(0,"tr",33)(1,"td")(2,"p",34),e._uU(3),e.qZA()(),e.TgZ(4,"td",35)(5,"span",36),e._uU(6),e.qZA()()()),2&i){const t=o.$implicit;e.Q6J("routerLink",e.VKq(3,Do,"./management/"+t.id)),e.xp6(3),e.hij(" ",t.vch_nombre," "),e.xp6(3),e.Oqu(t.quantity)}}function Go(i,o){if(1&i&&(e.TgZ(0,"div",26)(1,"table",27)(2,"thead")(3,"tr",28)(4,"th",29),e._uU(5,"Nombre"),e.qZA(),e.TgZ(6,"th",30),e._uU(7,"Cantidad de productos"),e.qZA()()(),e.TgZ(8,"tbody",31),e.YNc(9,Jo,7,5,"tr",32),e.qZA()()()),2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",t.filteredGroups)}}function Qo(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",37),e._UZ(1,"path",38),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente\n"))}const Yo=function(){return["./management"]};let Oo=(()=>{class i{constructor(t,n){this.mantenedorService=t,this.formBuilder=n,this.loading=!1,this.filterActive=!1}ngOnInit(){this.loadData(),this.filterFormGroup=this.formBuilder.group({vch_nombre:""})}loadData(){this.loading=!0,this.mantenedorService.getAllCarrousels().subscribe({next:t=>{this.groups=t.data,console.log(this.groups),this.filteredGroups=[...this.groups],this.loading=!1},error:t=>{this.loading=!1,console.log("error al cargar campanas: ",t)}})}filterSubmit(){this.filterActive=!0,console.log(this.filterFormGroup.value),this.filteredGroups=this.groups.filter(t=>{if(this.filterValidations(t))return t})}removeFilters(){this.filteredGroups=[...this.groups],this.filterActive=!1,this.filterFormGroup.reset()}filterValidations(t){const n=this.filterFormGroup.value;return!(n.vch_nombre&&!t.vch_nombre?.toLocaleLowerCase().includes(n.vch_nombre.toLocaleLowerCase()))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(l.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-product-group-list"]],decls:26,vars:7,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],[3,"routerLink"],[1,"btn","btn-primary"],[1,"row","col-12"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-4"],["type","text","placeholder","Nombre","name","vch_nombre","formControlName","vch_nombre",1,"form-control"],[1,"col"],["type","submit","value","Filtrar",1,"btn","btn-sm","btn-primary","mt-4","mb-3","me-4"],["title","borrar filtros","type","button","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["title","borrar filtros","type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"text-center","mb-10"],["src","./assets/loading.gif","alt","","height","100","width","100"],["role","alert",1,"alert","alert-danger","m-10"],[1,"card-body","pt-0"],["id","group-table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"min-w-200px"],[1,"text-end","min-w-100px"],[1,"fw-bold","text-gray-600"],["style","cursor: pointer",3,"routerLink",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"routerLink"],[1,"text-dark","fw-bolder","mb-0"],["data-order","25",1,"text-end","pe-0"],[1,"fw-bolder","ms-3"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),e._uU(7,"Carruseles"),e.qZA()(),e.TgZ(8,"div",6)(9,"a",7)(10,"button",8),e._uU(11,"Crear Carrusel"),e.qZA()()(),e.TgZ(12,"div",9)(13,"form",10),e.NdJ("ngSubmit",function(){return n.filterSubmit()}),e.TgZ(14,"div",11)(15,"div",12),e._UZ(16,"input",13),e.qZA()(),e.TgZ(17,"div",14),e._UZ(18,"input",15),e.YNc(19,Lo,2,0,"button",16),e.qZA()()()(),e.YNc(20,Fo,2,0,"div",17),e.YNc(21,Mo,3,0,"div",18),e.YNc(22,Go,10,1,"div",19),e.qZA()()()(),e._UZ(23,"app-toast",20),e.YNc(24,Qo,3,0,"ng-template",null,21,e.W1O)),2&t&&(e.xp6(9),e.Q6J("routerLink",e.DdM(6,Yo)),e.xp6(4),e.Q6J("formGroup",n.filterFormGroup),e.xp6(6),e.Q6J("ngIf",n.filterActive),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",n.filteredGroups&&0==n.filteredGroups.length),e.xp6(1),e.Q6J("ngIf",!n.loading&&n.groups&&n.groups.length>0))},dependencies:[d.sg,d.O5,m.rH,m.yS,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,v.q]}),i})();var re=u(3970),Po=u(6099);const Bo=["dangerTpl"];function Ro(i,o){1&i&&(e.TgZ(0,"div",13),e._UZ(1,"img",14),e.qZA())}function $o(i,o){1&i&&(e.TgZ(0,"div",18)(1,"h2"),e._uU(2,"Crear Carrusel"),e.qZA()())}function Vo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"h2",21),e._uU(3),e.qZA(),e.TgZ(4,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),a=e.MAs(17);return e.KtG(r.open(a))}),e._uU(5," Eliminar "),e.qZA()(),e.TgZ(6,"div",23)(7,"div",24)(8,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.changeEditGroup())}),e._uU(9," Editar "),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.carrouselName),e.xp6(1),e.Q6J("disabled",!t.canDeleteGroup),e.xp6(4),e.Q6J("disabled",!t.canEditGroup)}}function jo(i,o){if(1&i&&(e.TgZ(0,"div",15),e.YNc(1,$o,3,0,"div",16),e.YNc(2,Vo,10,3,"div",17),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.carrouselId),e.xp6(1),e.Q6J("ngIf",t.carrouselId)}}function zo(i,o){1&i&&(e.TgZ(0,"span",37),e._uU(1,"El nombre debe tener al menos 3 caracteres "),e.qZA())}function Ko(i,o){1&i&&(e.TgZ(0,"button",38),e._UZ(1,"span",39),e._uU(2," Cargando... "),e.qZA())}function Ho(i,o){if(1&i&&(e.TgZ(0,"button",40),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("disabled",!t.carrouselFormGroup.valid),e.xp6(1),e.hij(" ",t.carrouselId?"Actualizar":"Guardar"," carrusel ")}}function Wo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"form",27),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.submitCarrousel())}),e.TgZ(2,"div",28)(3,"div",29)(4,"label",30),e._uU(5,"Nombre de carrusel"),e.qZA(),e._UZ(6,"input",31),e.qZA()(),e._UZ(7,"div",28),e.TgZ(8,"div",32),e.YNc(9,zo,2,0,"span",33),e.qZA(),e.TgZ(10,"div",23)(11,"div",34),e.YNc(12,Ko,3,0,"button",35),e.YNc(13,Ho,2,2,"button",36),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.carrouselFormGroup),e.xp6(8),e.Q6J("ngIf",t.invalidInput("carrouselName")),e.xp6(3),e.Q6J("ngIf",t.groupButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.groupButtonLoader)}}function Xo(i,o){1&i&&(e.TgZ(0,"h4",55),e._uU(1,"el carrusel es multiseller"),e.qZA())}function er(i,o){1&i&&(e.TgZ(0,"button",56),e._UZ(1,"span",39),e._uU(2," Cargando... "),e.qZA())}function tr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.deleteProducts())}),e._uU(1," Remover "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.disableRemoveButton||!t.canRemoveProd)}}function nr(i,o){1&i&&(e.TgZ(0,"div",58)(1,"div"),e._uU(2,"No hay datos para mostrar"),e.qZA()())}function ir(i,o){1&i&&(e.TgZ(0,"th",66),e._uU(1,"Seller"),e.qZA())}function or(i,o){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw(3);e.xp6(1),e.hij(" ",n.getCompany(n.productsInCarrousel[t].id_empresa)," ")}}function rr(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"div",62),e._UZ(3,"input",69),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.YNc(6,or,2,1,"td",70),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&i){const t=o.index,n=e.oxw(3);e.xp6(3),e.Q6J("formControlName",t),e.xp6(2),e.hij(" ",n.productsInCarrousel[t].vch_nombre," "),e.xp6(1),e.Q6J("ngIf",n.isAdmin),e.xp6(2),e.hij(" ",n.productsInCarrousel[t].vch_sku," ")}}function ar(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"table",59)(1,"thead")(2,"tr",60)(3,"th",61)(4,"div",62)(5,"input",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectAllButton())}),e.qZA()()(),e.TgZ(6,"th",64),e._uU(7,"Nombre"),e.qZA(),e.YNc(8,ir,2,0,"th",65),e.TgZ(9,"th",66),e._uU(10,"SKU"),e.qZA()()(),e.TgZ(11,"tbody",67),e.YNc(12,rr,9,4,"tr",68),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.productsFormGroup),e.xp6(8),e.Q6J("ngIf",t.isAdmin),e.xp6(4),e.Q6J("ngForOf",t.selectedArr.controls)}}function sr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",4)(4,"div",15)(5,"div",41)(6,"h3"),e._uU(7,"Agregar productos"),e.qZA()(),e._UZ(8,"br"),e.YNc(9,Xo,2,0,"h4",42),e.qZA(),e.TgZ(10,"div",26)(11,"div",23),e._UZ(12,"div",24),e.qZA(),e.TgZ(13,"div",43)(14,"h4",44)(15,"span",45),e._uU(16,"Productos en el carrusel"),e.qZA()(),e.TgZ(17,"div",46),e.YNc(18,er,3,0,"button",47),e.YNc(19,tr,2,1,"button",48),e.TgZ(20,"button",49),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),a=e.MAs(15);return e.KtG(r.open(a))}),e._UZ(21,"span",50),e._uU(22," Agregar producto "),e.qZA()()(),e.TgZ(23,"div",51)(24,"div",52),e.YNc(25,nr,3,0,"div",53),e.YNc(26,ar,13,3,"table",54),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngIf",t.isMultiSellerCarrousel()),e.xp6(9),e.Q6J("ngIf",t.removeButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.removeButtonLoader),e.xp6(6),e.Q6J("ngIf",!t.productsInCarrousel||0==t.productsInCarrousel.length),e.xp6(1),e.Q6J("ngIf",t.productsInCarrousel&&t.productsInCarrousel.length>0)}}function lr(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",71),e._UZ(1,"path",72),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente\n"))}function cr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-search-product-modal",73),e.NdJ("productSelect",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.modalProducts(r))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("modal3",t)("idEmpresa",n.idEmpresaUsuario)("skuNow","")("allCompanies",n.isAdmin)}}function dr(i,o){1&i&&(e.TgZ(0,"button",81),e._UZ(1,"span",39),e._uU(2," Eliminando... "),e.qZA())}function ur(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.deleteFullGroup())}),e._uU(1," Eliminar "),e.qZA()}}function pr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.dismiss())}),e._uU(1," Cancelar "),e.qZA()}}function gr(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",4)(5,"div",74)(6,"div",75)(7,"h2"),e._uU(8,"\xbfEstas seguro?"),e.qZA()()(),e.TgZ(9,"div",76)(10,"div",77),e.YNc(11,dr,3,0,"button",78),e.YNc(12,ur,2,0,"button",79),e.YNc(13,pr,2,0,"button",80),e.qZA()()()()()()()),2&i){const t=e.oxw();e.xp6(11),e.Q6J("ngIf",t.groupDeleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.groupDeleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.groupDeleteButtonLoader)}}function mr(i,o){1&i&&(e._UZ(0,"img",84),e._uU(1," Error del servidor, favor intente nuevamente\n"))}const hr=function(){return["/mantenedores/carrousel"]};let Se=(()=>{class i{constructor(t,n,r,a,s,c,p,g){this.usuarioService=t,this.productService=n,this.maintainerService=r,this.fb=a,this.router=s,this.modalService=c,this.toastService=g,this.carrouselFormGroup=this.fb.group({carrouselName:["",[l.kI.required,l.kI.minLength(3)]]}),this.groupEdit=!1,this.groupButtonLoader=!1,this.groupDeleteButtonLoader=!1,this.carrouselId="",this.productsInCarrousel=[],this.productsFormGroup=this.fb.group({selected:this.fb.array([],l.kI.required)}),this.removeButtonLoader=!1,this.disableRemoveButton=!0,this.companies=[],this.companiesInCarrousel=[],this.loading=!0,this.selectedAll=!1,this.canDeleteGroup=!1,this.canEditGroup=!1,this.canRemoveProd=!1,this.reloadPipeDescount=!1,this.isAdmin=!1,this.carrouselId=p.snapshot.params.id,this.idEmpresaUsuario=t.usuario.id_empresa,this.permisos(),this.isAdmin=this.usuarioService.adminAibo}loadCompanies(){var t=this;return(0,f.Z)(function*(){try{t.companies=(yield(0,y.z)(t.productService.getEmpresas())).data||[]}catch{t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:3e3})}})()}getCompany(t){return this.companies.find(n=>n.id==t)?.vch_nombre||"No encontrado"}isMultiSellerCarrousel(){return new Set(this.companiesInCarrousel).size>1}permisos(){this.canDeleteGroup=this.usuarioService.hasPermission(re.Q.DELETE_CAMPANIA),this.canEditGroup=this.usuarioService.hasPermission(re.Q.UPDATE_CAMPANIA),this.canRemoveProd=this.usuarioService.hasPermission(re.Q.DELETE_PRODCAMPANIA)}get selectedArr(){return this.productsFormGroup.get("selected")}ngOnInit(){this.loadCompanies(),this.productsFormGroup.get("selected").valueChanges.subscribe(t=>{this.disableRemoveButton=!t.some(n=>1==n)}),this.carrouselId&&(this.maintainerService.getSingleGroup(this.carrouselId).subscribe({next:t=>{this.carrouselFormGroup.reset({carrouselName:t.data?.vch_nombre}),this.carrouselName=t.data?.vch_nombre},error:t=>{console.log("error: ",t)}}),this.maintainerService.getProductsPerCarrousel(this.carrouselId).subscribe({next:t=>{this.productsInCarrousel=t.data,this.productsInCarrousel.forEach((n,r)=>{this.selectedArr.push(new l.NI(!1,l.kI.required)),this.companiesInCarrousel.push(n.id_empresa),this.isMultiSellerCarrousel()}),this.loading=!1},error:t=>{this.loading=!1,console.log(t)}}))}changeEditGroup(){this.groupEdit=!this.groupEdit}submitCarrousel(){this.groupButtonLoader=!0;const t={vch_nombre:this.carrouselFormGroup.get("carrouselName")?.value,int_tipo:1};this.carrouselId?this.maintainerService.putUpdateGroup(this.carrouselId,t).subscribe({next:n=>{this.carrouselFormGroup.reset({carrouselName:n.data?.vch_nombre}),this.carrouselName=n.data?.vch_nombre,this.groupButtonLoader=!1,this.toastService.show("Actualizado con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:n=>{this.groupButtonLoader=!1,this.toastService.show("Error al actualizar",{classname:"bg-danger text-center  text-light",delay:3500}),console.log("error: ",n)}}):this.maintainerService.postCreateGroup(t).subscribe({next:n=>{const r=n.data?.id;this.toastService.show("Creado con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3}),setTimeout(()=>{this.router.navigateByUrl(`/mantenedores/carrousel/management/${r}`),this.groupButtonLoader=!1},2e3)},error:n=>{this.groupButtonLoader=!1,console.log("error: ",n),this.toastService.show("Error al crear",{classname:"bg-danger text-center  text-light",delay:3500})}})}deleteFullGroup(){this.groupDeleteButtonLoader=!0;const t=this.productsInCarrousel.map(r=>r.id);(0,me.D)([this.maintainerService.deleteProductFromCarrousel({id_group:this.carrouselId,products:t}),this.maintainerService.deleteGroup(this.carrouselId)]).pipe((0,U.U)(([r,a])=>{console.log(r),console.log(a)})).subscribe({next:r=>{this.modalService.dismissAll(),setTimeout(()=>{this.groupDeleteButtonLoader=!1,this.router.navigateByUrl("/mantenedores/carrousel")},200)},error:r=>{console.log(r),this.modalService.dismissAll(),this.toastService.show("Error al eliminar",{classname:"bg-danger text-center  text-light",delay:3500})}})}modalProducts(t){this.maintainerService.postAddProductToCarrousel({id_grupo:this.carrouselId,id_producto:t.id}).subscribe({next:r=>{this.productsInCarrousel.push(t),this.selectedArr.push(new l.NI(!1,l.kI.required)),this.companiesInCarrousel.push(t.id_empresa),this.isMultiSellerCarrousel()},error:r=>{this.toastService.show("Ya esta agregado ese producto",{classname:"bg-danger text-center  text-light",delay:3e3}),console.log(r)}})}deleteProducts(){this.removeButtonLoader=!0;const t=[],n=[];this.productsFormGroup.get("selected").value.forEach((a,s)=>{1==a&&(t.push(this.productsInCarrousel[s].id),n.push(s))}),n.sort((a,s)=>s-a),this.maintainerService.deleteProductFromCarrousel({id_group:this.carrouselId,products:t}).subscribe({next:a=>{n.forEach(s=>{this.selectedArr.removeAt(s),this.productsInCarrousel.splice(s,1),this.companiesInCarrousel.splice(s,1),this.isMultiSellerCarrousel()}),this.removeButtonLoader=!1,this.toastService.show("Removidos con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:a=>{this.toastService.show("Error al remover productos",{classname:"bg-danger text-center  text-light",delay:3e3}),this.removeButtonLoader=!1,console.log(a)}})}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{},n=>{})}selectAllButton(){this.selectedAll=!this.selectedAll;const t=this.selectedArr.value.length;for(let n=0;n<t;n++)this.selectedArr.at(n).patchValue(this.selectedAll)}invalidInput(t){return this.carrouselFormGroup.controls[t].errors&&this.carrouselFormGroup.controls[t].touched&&this.carrouselFormGroup}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.i),e.Y36(ie.M),e.Y36(b),e.Y36(l.qu),e.Y36(m.F0),e.Y36(_.FF),e.Y36(m.gz),e.Y36(x.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-product-group-detail"]],viewQuery:function(t,n){if(1&t&&e.Gf(Bo,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},decls:21,vars:6,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"mb-4",3,"routerLink"],[1,"card","card-flush"],["class","text-center mb-6 mt-4",4,"ngIf"],["class","card-header align-items-center py-5 gap-2 gap-md-5",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["class","content d-flex flex-column flex-column-fluid","id","kt_content",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["modalUp",""],["deleteGroup",""],[1,"text-center","mb-6","mt-4"],["src","./assets/loading.gif","alt","","height","100","width","100"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],["class","card-title col-10",4,"ngIf"],["class","card-title d-flex flex-column col-12",4,"ngIf"],[1,"card-title","col-10"],[1,"card-title","d-flex","flex-column","col-12"],[1,"row","col-12","mb-4"],[1,"col-10"],[1,"btn","btn-sm","btn-danger","col","float-right",3,"disabled","click"],[1,"row"],[1,"col"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],[1,"card-body","pt-0"],[3,"formGroup","ngSubmit"],[1,"row","mt-5"],[1,"col-6"],[1,"form-label"],["type","text","placeholder","Nombre de carrusel","formControlName","carrouselName",1,"form-control"],[1,"row","mb-2","mt-0","col-5","text-center"],["class","form-text p-1 badge-light-danger",4,"ngIf"],[1,"col-4"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],[1,"form-text","p-1","badge-light-danger"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"card-title"],["class","badge-light-success p-2 rounded",4,"ngIf"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-4","mb-1"],[1,"card-toolbar"],["class","btn btn-sm btn-light-danger me-2","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-light-danger me-2",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-light-primary",3,"click"],[1,"svg-icon","svg-icon-3"],[1,"card-body","py-3"],[1,"table-responsive"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf"],["class","table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3",3,"formGroup",4,"ngIf"],[1,"badge-light-success","p-2","rounded"],["type","button","disabled","",1,"btn","btn-sm","btn-light-danger","me-2"],[1,"btn","btn-sm","btn-light-danger","me-2",3,"disabled","click"],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3",3,"formGroup"],[1,"fw-bolder","text-muted"],[1,"w-25px"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox","value","selectedAll","data-kt-check","true","data-kt-check-target",".widget-13-check",1,"form-check-input",3,"click"],[1,"min-w-150px"],["class","min-w-100px",4,"ngIf"],[1,"min-w-100px"],["formArrayName","selected"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input","widget-13-check",3,"formControlName"],[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"],[3,"modal3","idEmpresa","skuNow","allCompanies","productSelect"],[1,"card-header","align-items-center","justify-content-center","gap-2","gap-md-5"],[1,"card-title","col-12","mb-5","justify-content-center"],[1,"card-body","pt-8"],[1,"row","justify-content-between"],["class","btn btn-sm btn-danger col-12 disabled","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-danger col-5",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary col-5",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-sm","btn-danger","col-12","disabled"],[1,"btn","btn-sm","btn-danger","col-5",3,"click"],[1,"btn","btn-sm","btn-primary","col-5",3,"click"],["src","/assets/dangerTpl.svg","alt",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2")(4,"a",3),e._uU(5,"Volver"),e.qZA()(),e.TgZ(6,"div",4),e.YNc(7,Ro,2,0,"div",5),e.YNc(8,jo,3,2,"div",6),e.YNc(9,Wo,14,4,"div",7),e.qZA()()()(),e.YNc(10,sr,27,5,"div",8),e._UZ(11,"app-toast",9),e.YNc(12,lr,3,0,"ng-template",null,10,e.W1O),e.YNc(14,cr,1,4,"ng-template",null,11,e.W1O),e.YNc(16,gr,14,3,"ng-template",null,12,e.W1O),e._UZ(18,"app-toast",9),e.YNc(19,mr,2,0,"ng-template",null,10,e.W1O)),2&t&&(e.xp6(4),e.Q6J("routerLink",e.DdM(5,hr)),e.xp6(3),e.Q6J("ngIf",n.loading&&n.carrouselId),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",!n.carrouselId||n.groupEdit),e.xp6(1),e.Q6J("ngIf",n.carrouselId&&!n.loading))},dependencies:[d.sg,d.O5,m.yS,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.sg,l.u,l.CE,v.q,Po.u]}),i})();const _r=["dangerTpl"];function fr(i,o){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function vr(i,o){if(1&i&&e._UZ(0,"img",25),2&i){const t=e.oxw();e.s9C("src",t.urlImg,e.LSH)}}let br=(()=>{class i{constructor(t,n,r){var a=this;this.cateProvider=t,this.fb=n,this.sanitizer=r,this.loading=!1,this.noSellers=!1,this.editTag={},this.haveImg=!1,this.urlImg="",this.blobFile=function(){var s=(0,f.Z)(function*(c){return new Promise((p,g)=>{try{const h=window.URL.createObjectURL(c),T=a.sanitizer.bypassSecurityTrustUrl(h),k=new FileReader;k.readAsDataURL(c),k.onload=()=>{p({blob:c,image:T,base:k.result})},k.onerror=Q=>{p({blob:c,image:T,base:null})}}catch{return null}})});return function(c){return s.apply(this,arguments)}}()}ngOnInit(){this.tag&&(console.log("el tag",this.tag),this.editTag=this.tag,console.log(this.editTag)),this.tagForm=this.fb.group({name:new l.NI(null!=this.editTag.vch_nombre?this.editTag.vch_nombre:""),slug:new l.NI(null!=this.editTag.vch_slug?this.editTag.vch_slug:""),description:new l.NI(null!=this.editTag.vch_descripcion?this.editTag.vch_descripcion:""),seller:new l.NI(this.editTag.vch_empresa?this.editTag.vch_empresa:""),status:new l.NI(!!this.editTag.bit_estado&&this.editTag.bit_estado),isfilter:new l.NI(!!this.editTag.bit_esfiltro&&this.editTag.bit_esfiltro),fileSource:new l.NI("")}),this.urlImg=this.editTag.vch_imagen??"",this.haveImg=""!=this.urlImg&&!0}newTag(){let t=this.generateFormData();this.cateProvider.postCreateTag(t).subscribe({next:n=>{console.log(n),this.closeModal()},error:n=>{console.log(n),n?.error?.code&&3==n?.error?.code?this.noSellers=!0:this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3}),this.loading=!1},complete:()=>{console.log("completo"),this.loading=!1}})}updateTag(){let t=this.generateFormData();this.cateProvider.putUpdateTag(this.tag.id,t).subscribe({next:n=>{console.log(n),this.closeModal()},error:n=>{console.log(n),n?.error?.code&&3==n?.error?.code?this.noSellers=!0:this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3}),this.loading=!1},complete:()=>{console.log("completo"),this.loading=!1}})}onFileSelected(t,n){t.target.files.length>0&&this.tagForm.patchValue({fileSource:t.target.files[0]})}generateFormData(){let t=new FormData;return t.append("name",this.tagForm.value.name),t.append("slug",this.tagForm.value.slug),t.append("description",this.tagForm.value.description),t.append("seller",this.tagForm.value.seller),t.append("status",this.tagForm.value.status),t.append("isfilter",this.tagForm.value.isfilter),t.append("file",this.tagForm.get("fileSource")?.value),t}closeModal(){this.modal.dismiss()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(l.qu),e.Y36(R.H7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-new-tag"]],viewQuery:function(t,n){if(1&t&&e.Gf(_r,5),2&t){let r;e.iGM(r=e.CRH())&&(n.errorToast=r.first)}},inputs:{modal:"modal",tag:"tag",sellers:"sellers"},decls:43,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"card-body","pt-2"],[1,"d-flex","flex-wrap","justify-content-between",2,"min-height","70px"],[1,"col-sm-12","col-md-6","d-flex","align-items-center","flex-column","mb-5"],["for","installationDiscount",1,"form-check-label","text-center","fw-bolder","mb-2"],["type","text","formControlName","name","name","name","placeholder","Nombre de tag",1,"form-control",3,"value"],["type","text","formControlName","slug","name","slug","placeholder","nombre_de_tag",1,"form-control",3,"value"],[1,"col-sm-12","col-md-12","d-flex","align-items-center","flex-column","mb-5"],["type","text","formControlName","description","name","description","placeholder","",1,"form-control",3,"value"],["formControlName","seller","name","seller",1,"form-control"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"card-body","align-items-center","py-5","gap-2","gap-md-5"],["for","image1"],["width","100px",3,"src",4,"ngIf"],[1,"d-flex","justify-content-center","w-100","gap-3","my-2"],[1,"d-flex","justify-content-between","w-100","gap-1"],["title","image","type","file","name","image",1,"form-control","w-75",3,"change"],["input1",""],[1,"col-sm-12","col-md-6","form-check","form-switch","mb-0","d-flex","align-items-center","flex-column","p-0","me-3"],[1,"form-check-label","text-start","fw-bolder","mb-5"],["name","status","formControlName","status","type","checkbox",1,"form-check-input","m-0"],["name","isfilter","formControlName","isfilter","type","checkbox",1,"form-check-input","m-0"],["type","submit",1,"btn","btn-light-primary"],[3,"value"],["width","100px",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.tag?n.updateTag():n.newTag()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",5),e.qZA(),e.TgZ(7,"div",3)(8,"label",4),e._uU(9,"Slug"),e.qZA(),e._UZ(10,"input",6),e.qZA(),e.TgZ(11,"div",7)(12,"label",4),e._uU(13,"Descripci\xf3n"),e.qZA(),e._UZ(14,"input",8),e.qZA(),e.TgZ(15,"div",7)(16,"label",4),e._uU(17,"Seleccionar Seller"),e.qZA(),e.TgZ(18,"select",9)(19,"option",10),e._uU(20,"Para todos los sellers"),e.qZA(),e.YNc(21,fr,2,2,"option",11),e.qZA()(),e.TgZ(22,"div",12)(23,"label",13)(24,"h3"),e._uU(25,"Imagen"),e.qZA()(),e._UZ(26,"br"),e.YNc(27,vr,1,1,"img",14),e.TgZ(28,"div",15)(29,"div",16)(30,"input",17,18),e.NdJ("change",function(a){return n.onFileSelected(a,1)}),e.qZA()(),e._UZ(32,"hr"),e.qZA()(),e.TgZ(33,"div",19)(34,"label",20),e._uU(35,"Est\xe1 activo ?"),e.qZA(),e._UZ(36,"input",21),e.qZA(),e.TgZ(37,"div",19)(38,"label",20),e._uU(39,"Es filtro ?"),e.qZA(),e._UZ(40,"input",22),e.qZA()(),e.TgZ(41,"button",23),e._uU(42,"Guardar"),e.qZA()()()),2&t&&(e.Q6J("formGroup",n.tagForm),e.xp6(6),e.Q6J("value",null!=n.editTag.vch_nombre?n.editTag.vch_nombre:""),e.xp6(4),e.Q6J("value",null!=n.editTag.vch_slug?n.editTag.vch_slug:""),e.xp6(4),e.Q6J("value",null!=n.editTag.vch_descripcion?n.editTag.vch_descripcion:""),e.xp6(7),e.Q6J("ngForOf",n.sellers),e.xp6(6),e.Q6J("ngIf",n.haveImg))},dependencies:[d.sg,d.O5,l._Y,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l.JJ,l.JL,l.sg,l.u]}),i})();function xr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteTags())}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" Desactivar Seleccionados (",t.checkedTag.length,")")}}function Zr(i,o){1&i&&(e.TgZ(0,"div",14)(1,"strong"),e._uU(2,"No existen Tags"),e.qZA()())}function Tr(i,o){1&i&&(e.TgZ(0,"div",15),e._UZ(1,"img",16),e.qZA())}function Cr(i,o){if(1&i&&e._UZ(0,"app-new-tag",37),2&i){const t=o.$implicit,n=e.oxw().$implicit,r=e.oxw(2);e.Q6J("modal",t)("tag",n)("sellers",r.sellers)}}function yr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,Cr,1,3,"ng-template",null,27,e.W1O),e.TgZ(3,"td")(4,"div",28)(5,"input",29),e.NdJ("change",function(){const a=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.setCheckedTag(a.id))}),e.qZA()()(),e.TgZ(6,"td")(7,"div",30)(8,"div",31)(9,"a",32),e.NdJ("click",function(){e.CHM(t);const r=e.MAs(2),a=e.oxw(2);return e.KtG(a.open(r))}),e._uU(10),e.qZA()()()(),e.TgZ(11,"td",33)(12,"span",34),e._uU(13),e.qZA()(),e.TgZ(14,"td",33)(15,"div",34),e._uU(16),e.qZA()(),e.TgZ(17,"td",35)(18,"div",36),e._uU(19),e.qZA()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(5),e.Q6J("checked",n.validateChecked(t.id))("value",t?t.id:""),e.xp6(5),e.Oqu(t?t.vch_nombre:""),e.xp6(3),e.Oqu(t?n.getNameSeller(t.vch_empresa):""),e.xp6(3),e.Oqu(t?n.getTypeTag(t.bit_esfiltro):""),e.xp6(2),e.Q6J("ngClass",n.getCssStatus(t.bit_estado)),e.xp6(1),e.Oqu(t.bit_estado?"Activo":"Inactivo")}}function Ar(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"table",18)(2,"thead")(3,"tr",19)(4,"th",20)(5,"div",21)(6,"input",22),e.NdJ("change",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.changeAllChecks(r))}),e.qZA()()(),e.TgZ(7,"th",23),e._uU(8,"Tag"),e.qZA(),e.TgZ(9,"th",24),e._uU(10,"Empresa"),e.qZA(),e.TgZ(11,"th",24),e._uU(12,"Tipo"),e.qZA(),e.TgZ(13,"th",24),e._uU(14,"Estado"),e.qZA()()(),e.TgZ(15,"tbody",25),e.YNc(16,yr,20,7,"tr",26),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(16),e.Q6J("ngForOf",t.tags)}}function wr(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",38),e._UZ(1,"path",39),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente "))}function kr(i,o){if(1&i&&e._UZ(0,"app-new-tag",40),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("modal",t)("sellers",n.sellers)}}let Sr=(()=>{class i{constructor(t,n){this.cateProvider=t,this.modalService=n,this.loading=!1,this.noTags=!1,this.checkedTag=[],this.tags=[{id:"",vch_nombre:"",vch_slug:"",vch_empresa:"",bit_estado:!1,bit_esfiltro:!1}],this.sellers=[{id:"",vch_nombre:""}]}ngOnInit(){this.getTags(),this.getSellers()}getCssStatus(t){return t?"badge-light-success":"badge-light-danger"}getTypeTag(t){return t?"Es filtro":"Es etiqueta"}setCheckedTag(t){this.checkedTag.find(r=>r==t)?this.checkedTag=this.checkedTag.filter(r=>r!=t):this.checkedTag.push(t)}changeAllChecks(t){document.querySelectorAll("table input[type=checkbox]"),!t.target.checked&&this.checkedTag.length>0?this.checkedTag=[]:this.tags.map(a=>this.checkedTag.push(a.id))}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{this.getTags()},n=>{this.getTags()})}deleteTags(){this.cateProvider.deleteTag(this.checkedTag).subscribe({next:t=>{console.log(t),this.getTags(),this.checkedTag=[]},error:t=>{console.log(t),this.loading=!1},complete:()=>{this.loading=!1}})}getTags(){this.cateProvider.getAllTags().subscribe({next:t=>{this.tags=t.data},error:t=>{console.log(t),this.loading=!1},complete:()=>{this.loading=!1}})}getSellers(){this.cateProvider.getEmpresas().subscribe({next:t=>{this.sellers=t.data},error:t=>{console.log(t),this.loading=!1},complete:()=>{this.loading=!1}})}getNameSeller(t){if(this.sellers.length>1){let n=0!=t?this.sellers.filter(r=>r.id==t):[{vch_nombre:"Todos los sellers"}];return n?n[0].vch_nombre:""}}validateChecked(t){return this.checkedTag.includes(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(_.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lista-tag"]],decls:17,vars:4,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],["type","button","class","btn btn-light-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-light-primary",3,"click"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["modal",""],["role","alert",1,"alert","alert-danger","m-10"],[1,"text-center","mb-10"],["src","./assets/loading.gif","alt","","height","100","width","100"],[1,"card-body","pt-0"],["id","kt_ecommerce_products_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-10px","pe-2"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid","me-3"],["type","checkbox","data-kt-check","true","data-kt-check-target","#kt_ecommerce_products_table .form-check-input","value","1",1,"form-check-input",3,"change"],[1,"min-w-200px"],[1,"text-end","min-w-100px"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],["modalEdit",""],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox","name","check_item",1,"form-check-input",3,"checked","value","change"],[1,"d-flex","align-items-center"],[1,"ms-5"],["data-kt-ecommerce-product-filter","product_name",1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"click"],[1,"text-end","pe-0"],[1,"fw-bolder"],["data-order","Published",1,"text-end","pe-0"],[1,"badge",3,"ngClass"],[3,"modal","tag","sellers"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"],[3,"modal","sellers"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e.YNc(6,xr,2,1,"button",6),e.TgZ(7,"button",7),e.NdJ("click",function(){e.CHM(r);const s=e.MAs(16);return e.KtG(n.open(s))}),e._uU(8," Agregar tag popup"),e.qZA()()(),e.YNc(9,Zr,3,0,"div",8),e.YNc(10,Tr,2,0,"div",9),e.YNc(11,Ar,17,1,"div",10),e.qZA()()()(),e._UZ(12,"app-toast",11),e.YNc(13,wr,3,0,"ng-template",null,12,e.W1O),e.YNc(15,kr,1,2,"ng-template",null,13,e.W1O)}2&t&&(e.xp6(6),e.Q6J("ngIf",n.checkedTag.length>0),e.xp6(3),e.Q6J("ngIf",n.noTags),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[d.mk,d.sg,d.O5,v.q,br]}),i})();var qr=u(4383);function Ur(i,o){if(1&i&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.s9C("value",t.valor),e.xp6(1),e.hij(" ",t.nombre," ")}}function Ir(i,o){if(1&i&&(e.TgZ(0,"div",29)(1,"strong"),e._uU(2),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.mensajeError)}}function Nr(i,o){1&i&&(e.TgZ(0,"div",30),e._UZ(1,"img",31),e.qZA())}function Er(i,o){1&i&&(e.TgZ(0,"th",49),e._uU(1,"ID Venta"),e.qZA())}function Lr(i,o){if(1&i&&(e.TgZ(0,"td",48)(1,"span",50),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2).$implicit;e.xp6(2),e.hij(" ",t.IDVentaSC," ")}}function Fr(i,o){if(1&i&&(e.TgZ(0,"span")(1,"div",37)(2,"table",38)(3,"thead")(4,"tr",39)(5,"th",40),e._uU(6),e.qZA(),e.YNc(7,Er,2,0,"th",41),e.TgZ(8,"th"),e._uU(9,"Rut cliente"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Cliente"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Documento"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Entrega"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Monto Total"),e.qZA(),e.TgZ(18,"th",42),e._uU(19,"Vendedor"),e.qZA()()(),e.TgZ(20,"tbody")(21,"tr")(22,"td")(23,"div",43),e._UZ(24,"div",44),e.TgZ(25,"div",45)(26,"span",46),e._uU(27),e.qZA()()()(),e.YNc(28,Lr,3,1,"td",47),e.TgZ(29,"td"),e._uU(30),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.qZA(),e.TgZ(37,"td"),e._uU(38),e.ALo(39,"numberFormat"),e.qZA(),e.TgZ(40,"td",48),e._uU(41),e.qZA()()()()()()),2&i){const t=e.oxw().$implicit;e.xp6(6),e.Oqu(t.TipoTabla),e.xp6(1),e.Q6J("ngIf",t.IDVentaSC),e.xp6(20),e.hij(" ",t.DocNum," "),e.xp6(1),e.Q6J("ngIf",t.IDVentaSC),e.xp6(2),e.Oqu(t.RutCliente),e.xp6(2),e.Oqu(t.Cliente),e.xp6(2),e.Oqu(t.FecDocumento),e.xp6(2),e.Oqu(t.FecEntrega),e.xp6(2),e.Oqu(e.lcZ(39,10,t.DocTotal)),e.xp6(3),e.Oqu(t.Vendedor)}}function Mr(i,o){if(1&i&&(e.TgZ(0,"td",71)(1,"button",72),e._uU(2," Error "),e.qZA()()),2&i){const t=e.oxw().$implicit;let n;e.xp6(1),e.s9C("ngbPopover",null!==(n=t.MensajeError)&&void 0!==n?n:"")}}const Dr=function(i){return{"bg-danger bg-gradient":i}},K=function(i,o){return{"text-light":i,"text-dark":o}};function Jr(i,o){if(1&i&&(e.TgZ(0,"tr",65)(1,"td")(2,"div",43),e._UZ(3,"div",44),e.TgZ(4,"div",45)(5,"span",66),e._uU(6),e.qZA(),e.TgZ(7,"span",67),e._uU(8),e.qZA()()()(),e.TgZ(9,"td")(10,"span",68),e._uU(11),e.ALo(12,"numberFormat"),e.qZA()(),e.TgZ(13,"td")(14,"span",69),e._uU(15),e.qZA()(),e.TgZ(16,"td")(17,"span",68),e._uU(18),e.ALo(19,"numberFormat"),e.qZA()(),e.YNc(20,Mr,3,1,"td",70),e.qZA()),2&i){const t=o.$implicit;e.Q6J("ngClass",e.VKq(15,Dr,t.Error)),e.xp6(5),e.Q6J("ngClass",e.WLB(17,K,t.Error,!t.Error)),e.xp6(1),e.hij(" ",t.Dscription," "),e.xp6(2),e.hij(" ",t.ItemCode," "),e.xp6(2),e.Q6J("ngClass",e.WLB(20,K,t.Error,!t.Error)),e.xp6(1),e.hij(" ",e.lcZ(12,11,t.Price)," "),e.xp6(3),e.Q6J("ngClass",e.WLB(23,K,t.Error,!t.Error)),e.xp6(1),e.hij(" ",t.Quantity," "),e.xp6(2),e.Q6J("ngClass",e.WLB(26,K,t.Error,!t.Error)),e.xp6(1),e.hij(" ",e.lcZ(19,13,t.LineTotal)," "),e.xp6(2),e.Q6J("ngIf",t.Error)}}function Gr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",73),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,a=e.oxw(2);return e.KtG(a.createSale(r))}),e._UZ(1,"span",62),e.TgZ(2,"span",63),e._uU(3,"Cargando..."),e.qZA(),e.TgZ(4,"span",64),e._uU(5,"Crear Venta"),e.qZA()()}if(2&i){const t=e.oxw(4);e.Q6J("disabled",!1),e.xp6(1),e.Q6J("hidden",!t.loadingCreateVenta),e.xp6(1),e.Q6J("hidden",!t.loadingCreateVenta),e.xp6(2),e.Q6J("hidden",t.loadingCreateVenta)}}function Qr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"table",38)(2,"thead")(3,"tr",39)(4,"th",51),e._uU(5,"Producto"),e.qZA(),e.TgZ(6,"th",49),e._uU(7,"Precio Unitario"),e.qZA(),e.TgZ(8,"th",52),e._uU(9,"Cantidad"),e.qZA(),e.TgZ(10,"th",49),e._uU(11,"Precio Total"),e.qZA(),e._UZ(12,"th",53),e.qZA()(),e.TgZ(13,"tbody"),e.YNc(14,Jr,21,29,"tr",54),e.qZA()()(),e.TgZ(15,"div",8)(16,"div",9),e.YNc(17,Gr,6,4,"button",55),e.qZA(),e.TgZ(18,"div",56)(19,"div",57)(20,"strong"),e._uU(21),e.qZA()()(),e.TgZ(22,"div",58)(23,"div",59),e._UZ(24,"input",60),e.TgZ(25,"button",61),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.updateSalesNV(r))}),e._UZ(26,"span",62),e.TgZ(27,"span",63),e._uU(28,"Cargando..."),e.qZA(),e.TgZ(29,"span",64),e._uU(30,"Agregar"),e.qZA()()()()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(14),e.Q6J("ngForOf",t.Detalle),e.xp6(3),e.Q6J("ngIf",!t.IDVentaSC),e.xp6(2),e.Q6J("id","alert"+t.DocNum),e.xp6(2),e.Oqu(n.mensajeVenta),e.xp6(3),e.Q6J("id","idventa"+t.DocNum)("value",t.IDVentaSC),e.xp6(2),e.Q6J("hidden",!n.loadingUpdateVenta),e.xp6(1),e.Q6J("hidden",!n.loadingUpdateVenta),e.xp6(2),e.Q6J("hidden",n.loadingUpdateVenta)}}function Yr(i,o){1&i&&(e.TgZ(0,"ngb-panel"),e.YNc(1,Fr,42,12,"ng-template",35),e.YNc(2,Qr,31,9,"ng-template",36),e.qZA())}function Or(i,o){if(1&i&&(e.TgZ(0,"div",32)(1,"ngb-accordion",null,33),e.YNc(3,Yr,3,0,"ngb-panel",34),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.nvs)}}function Pr(i,o){1&i&&(e.O4$(),e.TgZ(0,"svg",74),e._UZ(1,"path",75),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente "))}const Br=[{path:"",component:Zt,children:[{path:"tags",component:Sr},{path:"categorias",component:xt},{path:"categorias/gestion",component:Te},{path:"categorias/gestion/:id",component:Te},{path:"tecnicolist",component:Pt},{path:"tecnico/:id",component:tn},{path:"banner",component:_n},{path:"bodegaslist",component:An},{path:"bodega/:id",component:Ln},{path:"cuadratura",component:Yn},{path:"skusync",component:ni},{path:"skusync/gestion",component:ye},{path:"skusync/gestion/:vch_sku/:id_empresa",component:ye},{path:"shipping",component:Ui},{path:"shipping/management",component:we},{path:"shipping/management/:id",component:we},{path:"client",component:ho},{path:"client/:id",component:Eo},{path:"carrousel",component:Oo},{path:"carrousel/management",component:Se},{path:"carrousel/management/:id",component:Se},{path:"sap/syncsales",component:(()=>{class i{constructor(t,n,r,a,s){this.mantenedorService=t,this.formBuilder=n,this.userProvider=r,this.toastService=a,this.calendar=s,this.loading=!0,this.nvs=[],this.vendedores=[],this.empresa="",this.loadingUpdateVenta=!1,this.loadingCreateVenta=!1,this.mensajeError="No hay notas de ventas",this.mensajeVenta="",this.empresa=this.userProvider.usuario.id_empresa,this.loadFiltros(),this.loadData()}ngOnInit(){}loadFiltros(){const t=new Date;this.formFiltros=this.formBuilder.group({nv:"",fechaInicio:new _.qj(t.getFullYear(),t.getMonth()+1,1),fechaFin:this.calendar.getToday(),vendedor:""})}loadData(){var t=this;return(0,f.Z)(function*(){try{t.loading=!0;const n=t.getValueFilter();yield t.loadNV(n),yield t.loadVendedores(t.empresa),t.loading=!1}catch(n){t.nvs=[],t.mensajeError=n.error.data,t.loading=!1}})()}loadVendedores(t){var n=this;return(0,f.Z)(function*(){try{const r=yield(0,y.z)(n.mantenedorService.getVendedoresSAP(t));if("OK"!=r.status)return;n.vendedores=r.data??[]}catch(r){console.error("error en obtener los vendedores",r)}})()}loadNV(t){var n=this;return(0,f.Z)(function*(){try{const r=yield(0,y.z)(n.mantenedorService.getNVSAP(t));if("OK"!=r.status)return;n.nvs=r.data??[],0==n.nvs.length&&(n.mensajeError="No se encontraron notas de venta")}catch(r){throw console.error("error en obtener las notas de ventas",r),r}})()}filterNV(){var t=this;return(0,f.Z)(function*(){try{const n=t.getValueFilter();console.log(n),t.loading=!0,yield t.loadNV(n),t.loading=!1}catch(n){t.loading=!1,t.nvs=[],t.mensajeError=n.error.data}})()}getValueFilter(){try{const t=this.formFiltros.value;return{fechaini:`${t.fechaInicio.year}${("000"+t.fechaInicio.month).substring(("000"+t.fechaInicio.month).length-2)}${("000"+t.fechaInicio.day).substring(("000"+t.fechaInicio.day).length-2)}`,fechafin:`${t.fechaFin.year}${("000"+t.fechaFin.month).substring(("000"+t.fechaFin.month).length-2)}${("000"+t.fechaFin.day).substring(("000"+t.fechaFin.day).length-2)}`,id_empresa:this.empresa,vendedores:""!=t.vendedor&&"-1"!=t.vendedor?[t.vendedor]:null,nv:""!=t.nv?t.nv:null}}catch(t){throw t}}updateSalesNV(t){const n=document.getElementById("idventa"+t.DocNum),r={id_empresa:this.empresa,id_venta:n.value,int_notaventa:t.DocNum};this.loadingUpdateVenta=!0,this.mantenedorService.postUpdateSaleSync(r).subscribe({next:a=>{"OK"!=a.status?this.setResponseMessage("Error al asociar la venta",!0,"alert"+t.DocNum):(t.IDVentaSC=n.value,this.setResponseMessage("ID venta asociado correctamente",!1,"alert"+t.DocNum)),this.loadingUpdateVenta=!1},error:a=>{this.setResponseMessage(a.error.data,!0,"alert"+t.DocNum),this.loadingUpdateVenta=!1}})}get fechaini(){return this.formFiltros.get("fechaInicio")?.value}get fechafin(){return this.formFiltros.get("fechaFin")?.value}createSale(t){this.loadingCreateVenta=!0,t.Empresa=this.empresa,this.mantenedorService.postCreateSaleSync(t).subscribe({next:n=>{"OK"!=n.status?(this.setResponseMessage("Error al crear la venta",!0,"alert"+t.DocNum),n.data&&this.setErrorProducts(n.data.products,t)):(t.IDVentaSC=n.data.idSale,this.setResponseMessage("La venta creada correctamente",!1,"alert"+t.DocNum)),this.loadingCreateVenta=!1},error:n=>{this.setResponseMessage(n.error.data,!0,"alert"+t.DocNum),this.loadingUpdateVenta=!1}})}setResponseMessage(t,n,r){const a=document.getElementById(r);n?(a.classList.remove("alert-success"),a.classList.add("alert-danger"),this.mensajeVenta=t):(a.classList.remove("alert-danger"),a.classList.add("alert-success"),this.mensajeVenta=t),a.hidden=!1}setErrorProducts(t,n){if(0!=t.length)for(let r of t)if(r.error){const a=n.Detalle.find(s=>s.ItemCode==r.sku);a&&(a.Error=!0,a.MensajeError=r.msg)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b),e.Y36(l.qu),e.Y36(Z.i),e.Y36(x.k),e.Y36(_.vL))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-syncsales"]],decls:34,vars:5,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"d-flex","align-items-center","position-relative","my-1"],[3,"formGroup","submit"],[1,"row"],[1,"col-2"],["type","number","data-kt-ecommerce-product-filter","search","placeholder","nota de venta","formControlName","nv",1,"form-control","form-control-solid"],[1,"col-3"],[1,"input-group"],["readonly","","placeholder","Fecha inicio","name","fechaInicio","formControlName","fechaInicio","ngbDatepicker","",1,"form-control"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["readonly","","placeholder","Fecha fin","name","fechaFin","formControlName","fechaFin","ngbDatepicker","",1,"form-control"],["dFin","ngbDatepicker"],["data-control","select2","data-placeholder","Vendedores","formControlName","vendedor","name","vendedor",1,"form-select","mb-2"],["value","-1","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-1"],["type","submit","value","Buscar",1,"btn","btn-sm","btn-primary"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],[3,"value"],["role","alert",1,"alert","alert-danger","m-10"],[1,"text-center","mb-10"],["src","./assets/loading.gif","alt","","height","100","width","100"],[1,"card-body","pt-0"],["acc","ngbAccordion"],[4,"ngFor","ngForOf"],["ngbPanelTitle",""],["ngbPanelContent",""],[1,"table-responsive"],[1,"table","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"ps-4","min-w-100px","rounded-start"],["class","min-w-50px ",4,"ngIf"],[1,"min-w-50px","rounded-end"],[1,"d-flex","align-items-center"],[1,"symbol","symbol-50px","me-5"],[1,"d-flex","justify-content-start","flex-column"],[1,"text-dark","fw-bolder","text-hover-primary","mb-1","fs-6"],["class","text-start",4,"ngIf"],[1,"text-start"],[1,"min-w-50px"],[1,"fw-bolder","text-primary","text-hover-primary","d-block","mb-1","fs-6"],[1,"ps-4","min-w-150px","rounded-start"],[1,"min-w-125px"],[1,"min-w-50px","text-end","rounded-end"],[3,"ngClass",4,"ngFor","ngForOf"],["type","button","class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"col-6"],["role","alert","hidden","true",1,"alert","alert-dismissible",3,"id"],[1,"col-4"],[1,"input-group","mb-3"],["type","number","placeholder","ID venta","aria-label","ID venta","aria-describedby","button-addon2",1,"form-control",3,"id","value"],["type","button","id","button-addon2",1,"btn","btn-outline-primary",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm",3,"hidden"],[1,"visually-hidden",3,"hidden"],[1,"indicator-label",3,"hidden"],[3,"ngClass"],[1,"text-light","fw-bolder","text-hover-primary","mb-1","fs-6",3,"ngClass"],[1,"text-muted","fw-bold","text-muted","d-block","fs-7"],[1,"fw-bolder","text-hover-primary","d-block","mb-1","fs-6",3,"ngClass"],[1,"fw-bolder","text-hover-primary","d-block","mb-1","fs-6",2,"margin-top","7px",3,"ngClass"],["class","text-end",4,"ngIf"],[1,"text-end"],["type","button","placement","start","popoverTitle","Error al guardar",1,"btn","btn-light-primary","me-2","mt-2",3,"ngbPopover"],["type","button",1,"btn","btn-success",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7),e.NdJ("submit",function(){return n.filterNV()}),e.TgZ(8,"div",8)(9,"div",9),e._UZ(10,"input",10),e.qZA(),e.TgZ(11,"div",11)(12,"div",12),e._UZ(13,"input",13,14),e.TgZ(15,"button",15),e.NdJ("click",function(){e.CHM(r);const s=e.MAs(14);return e.KtG(s.toggle())}),e.qZA()()(),e.TgZ(16,"div",11)(17,"div",12),e._UZ(18,"input",16,17),e.TgZ(20,"button",15),e.NdJ("click",function(){e.CHM(r);const s=e.MAs(19);return e.KtG(s.toggle())}),e.qZA()()(),e.TgZ(21,"div",11)(22,"select",18)(23,"option",19),e._uU(24,"Todos"),e.qZA(),e.YNc(25,Ur,2,2,"option",20),e.qZA()(),e.TgZ(26,"div",21),e._UZ(27,"input",22),e.qZA()()()()()(),e.YNc(28,Ir,3,1,"div",23),e.YNc(29,Nr,2,0,"div",24),e.YNc(30,Or,4,1,"div",25),e.qZA()()()(),e._UZ(31,"app-toast",26),e.YNc(32,Pr,3,0,"ng-template",null,27,e.W1O)}2&t&&(e.xp6(7),e.Q6J("formGroup",n.formFiltros),e.xp6(18),e.Q6J("ngForOf",n.vendedores),e.xp6(3),e.Q6J("ngIf",0==n.nvs.length&&!n.loading),e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[d.mk,d.sg,d.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.sg,l.u,v.q,_.gY,_.Gk,_.Cu,_.gW,_.J4,_.o8,qr.p]}),i})()},{path:"",redirectTo:"lista",pathMatch:"full"},{path:"**",redirectTo:"lista",pathMatch:"full"}]}];let Rr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.Bz.forChild(Br),m.Bz]}),i})();var $r=u(3126),Vr=u(6406),jr=u(2724);let zr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,Rr,l.UX,oe.h,l.u5,$r.E,_.ZQ,Be,lt,Vr.ProductModule,_.IJ,jr.d]}),i})()}}]);