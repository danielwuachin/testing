(self.webpackChunksellerCenter=self.webpackChunksellerCenter||[]).push([[406],{7818:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{I:()=>oe});var oe=(()=>{return(ht=oe||(oe={}))[ht.new=0]="new",ht[ht.edit=1]="edit",oe;var ht})()},3474:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{w:()=>ht});var oe=Oe(4650);let ht=(()=>{class X{constructor(){this.resp=new oe.vpe}ngOnInit(){}respConfirm(ze){this.modalAlert.close(),this.resp.emit(ze)}}return X.\u0275fac=function(ze){return new(ze||X)},X.\u0275cmp=oe.Xpm({type:X,selectors:[["app-alert"]],inputs:{modalAlert:"modalAlert",messagge:"messagge",title:"title"},outputs:{resp:"resp"},decls:14,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],[1,"d-flex","justify-content-start"],["type","button",1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-success",3,"click"]],template:function(ze,Je){1&ze&&(oe.TgZ(0,"div",0)(1,"h4",1),oe._uU(2),oe.qZA(),oe.TgZ(3,"button",2),oe.NdJ("click",function(){return Je.respConfirm(!1)}),oe.qZA()(),oe.TgZ(4,"div",3)(5,"p"),oe._uU(6),oe.qZA()(),oe.TgZ(7,"div",4)(8,"div",5)(9,"button",6),oe.NdJ("click",function(){return Je.respConfirm(!1)}),oe._uU(10,"No"),oe.qZA()(),oe.TgZ(11,"div",7)(12,"button",8),oe.NdJ("click",function(){return Je.respConfirm(!0)}),oe._uU(13,"Si"),oe.qZA()()()),2&ze&&(oe.xp6(2),oe.Oqu(Je.title),oe.xp6(4),oe.Oqu(Je.messagge))}}),X})()},8619:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{$:()=>Je});var oe=Oe(574),ht=Oe(4650),X=Oe(6895);function P(t,ue){if(1&t){const ft=ht.EpF();ht.TgZ(0,"button",2),ht.NdJ("click",function(){ht.CHM(ft);const Tt=ht.oxw();return ht.KtG(Tt.exportToExcel(Tt.table,Tt.name))}),ht._uU(1),ht.qZA()}if(2&t){const ft=ht.oxw();ht.Q6J("disabled",ft.disabled),ht.xp6(1),ht.Oqu(ft.buttonName)}}function ze(t,ue){1&t&&(ht.TgZ(0,"button",3),ht._UZ(1,"span",4),ht._uU(2," Descargando...\n"),ht.qZA())}let Je=(()=>{class t{constructor(){this.buttonName="Exportar tabla",this.disabled=!1,this.isLoader=!1}ngOnInit(){}exportToExcel(ft,lt){this.isLoader=!0;let Tt=document.getElementById(ft);const H=oe.P6.table_to_sheet(Tt),Lt=oe.P6.book_new();oe.P6.book_append_sheet(Lt,H,"Sheet1"),oe.NC(Lt,lt,{type:"binary",cellDates:!0}),setTimeout(()=>{this.isLoader=!1},1e3)}}return t.\u0275fac=function(ft){return new(ft||t)},t.\u0275cmp=ht.Xpm({type:t,selectors:[["app-export-excel"]],inputs:{table:"table",name:"name",buttonName:"buttonName",disabled:"disabled"},decls:2,vars:2,consts:[["class","btn btn-success",3,"disabled","click",4,"ngIf"],["class","btn btn-success","type","button","disabled","",4,"ngIf"],[1,"btn","btn-success",3,"disabled","click"],["type","button","disabled","",1,"btn","btn-success"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"]],template:function(ft,lt){1&ft&&(ht.YNc(0,P,2,2,"button",0),ht.YNc(1,ze,3,0,"button",1)),2&ft&&(ht.Q6J("ngIf",!lt.isLoader),ht.xp6(1),ht.Q6J("ngIf",lt.isLoader))},dependencies:[X.O5]}),t})()},8361:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{q:()=>ft});var oe=Oe(4650),ht=Oe(466),X=Oe(6895),P=Oe(4669);function ze(lt,Tt){}function Je(lt,Tt){if(1&lt&&oe.YNc(0,ze,0,0,"ng-template",4),2&lt){const H=oe.oxw().$implicit;oe.Q6J("ngTemplateOutlet",H.textOrTpl)}}function t(lt,Tt){if(1&lt&&oe._uU(0),2&lt){const H=oe.oxw().$implicit;oe.Oqu(H.textOrTpl)}}function ue(lt,Tt){if(1&lt){const H=oe.EpF();oe.TgZ(0,"ngb-toast",1),oe.NdJ("hidden",function(){const Ui=oe.CHM(H).$implicit,Bt=oe.oxw();return oe.KtG(Bt.toastService.remove(Ui))}),oe.YNc(1,Je,1,1,"ng-template",2),oe.YNc(2,t,1,1,"ng-template",null,3,oe.W1O),oe.qZA()}if(2&lt){const H=Tt.$implicit,Lt=oe.MAs(3),An=oe.oxw();oe.Tol(H.classname),oe.Q6J("autohide",!0)("delay",H.delay||5e3),oe.xp6(1),oe.Q6J("ngIf",An.isTemplate(H))("ngIfElse",Lt)}}let ft=(()=>{class lt{constructor(H){this.toastService=H}ngOnInit(){}isTemplate(H){return H.textOrTpl instanceof oe.Rgc}}return lt.\u0275fac=function(H){return new(H||lt)(oe.Y36(ht.k))},lt.\u0275cmp=oe.Xpm({type:lt,selectors:[["app-toast"]],hostAttrs:[1,"toast-container","position-fixed","top-0","end-0","p-3",2,"z-index","1200"],decls:1,vars:1,consts:[[3,"class","autohide","delay","hidden",4,"ngFor","ngForOf"],[3,"autohide","delay","hidden"],[3,"ngIf","ngIfElse"],["text",""],[3,"ngTemplateOutlet"]],template:function(H,Lt){1&H&&oe.YNc(0,ue,4,6,"ngb-toast",0),2&H&&oe.Q6J("ngForOf",Lt.toastService.toasts)},dependencies:[X.sg,X.O5,X.tP,P.Iv],styles:["[_nghost-%COMP%]{position:fixed;top:0;right:0;margin:.5em;z-index:1200}"]}),lt})()},3126:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{E:()=>P});var oe=Oe(6895),ht=Oe(4669),X=Oe(4650);let P=(()=>{class ze{}return ze.\u0275fac=function(t){return new(t||ze)},ze.\u0275mod=X.oAB({type:ze}),ze.\u0275inj=X.cJS({imports:[oe.ez,ht.aE]}),ze})()},466:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{k:()=>ht});var oe=Oe(4650);let ht=(()=>{class X{constructor(){this.toasts=[]}show(ze,Je={}){Je.classname=`${Je.classname} animate__animated  animate__bounceInRight`,this.toasts.push({textOrTpl:ze,...Je})}remove(ze){this.toasts=this.toasts.filter(Je=>Je!==ze)}clear(){this.toasts.splice(0,this.toasts.length)}}return X.\u0275fac=function(ze){return new(ze||X)},X.\u0275prov=oe.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})()},7026:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{h:()=>ht});var oe=Oe(4650);let ht=(()=>{class X{transform(ze,...Je){let t="https://thumbs.dreamstime.com/z/no-image-available-icon-flat-vector-no-image-available-icon-flat-vector-illustration-132482953.jpg";if(ze.tbl_documentos&&ze.tbl_documentos.length>0){const ue=ze.tbl_documentos.filter(ft=>1==ft.int_tipo&&ft.estado&&ft.bit_fotoportada);ue.length>0&&(t=ue[0].vch_url)}return t}}return X.\u0275fac=function(ze){return new(ze||X)},X.\u0275pipe=oe.Yjl({name:"noImagen",type:X,pure:!0}),X})()},6099:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{u:()=>ft});var oe=Oe(4650),ht=Oe(4916),X=Oe(466),P=Oe(4006),ze=Oe(6895);function Je(lt,Tt){if(1&lt){const H=oe.EpF();oe.TgZ(0,"div",39),oe.NdJ("click",function(){const Ui=oe.CHM(H).$implicit,Bt=oe.oxw(2);return oe.KtG(Bt.addProducto(Ui))}),oe.TgZ(1,"div",40)(2,"div",41)(3,"label",42),oe._UZ(4,"i",43),oe.qZA(),oe.TgZ(5,"div",44)(6,"span",45),oe._uU(7),oe.qZA(),oe.TgZ(8,"div",46),oe._uU(9),oe.qZA()()()(),oe._UZ(10,"div",47),oe.qZA()}if(2&lt){const H=Tt.$implicit;oe.xp6(7),oe.Oqu(H.vch_nombre),oe.xp6(2),oe.Oqu(H.vch_sku)}}function t(lt,Tt){if(1&lt&&(oe.TgZ(0,"div",36)(1,"div",37),oe.YNc(2,Je,11,2,"div",38),oe.qZA()()),2&lt){const H=oe.oxw();oe.xp6(2),oe.Q6J("ngForOf",H.productos)}}const ue=function(lt){return{"d-none":lt}};let ft=(()=>{class lt{constructor(H,Lt,An){this.prodProvider=H,this.toastService=Lt,this.formBuilder=An,this.skuNow="",this.allCompanies=!1,this.productSelect=new oe.vpe,this.loading=!1,this.tieneValue=!1,this.noResultados=!0,this.firstLoad=!0,this.formSearch=An.group({sku:"",nombre:""})}ngOnChanges(H){H.idEmpresa&&this.load()}ngOnInit(){}load(){this.getProductos(null,null)}get getShowNoResult(){return this.noResultados&&!this.firstLoad}submit(){let H=null,Lt=null;return this.firstLoad=!1,(this.formSearch.get("sku")||""==this.formSearch.get("sku").value)&&(H=this.formSearch.get("sku").value),(this.formSearch.get("nombre")||""==this.formSearch.get("nombre").value)&&(Lt=this.formSearch.get("nombre").value),this.getProductos(H,Lt),!1}getProductos(H,Lt){const An={};this.allCompanies||(An.idEmpresa=this.idEmpresa),H&&(An.sku=H),Lt&&(An.nombre=Lt),this.loading=!0,this.prodProvider.getProductSearch(An).subscribe({next:Ui=>{Ui.data&&Ui.data.length>0?(this.productos=Ui.data.filter(Bt=>Bt.vch_sku!=this.skuNow),this.noResultados=!(this.productos.length>0)):this.noResultados=!0},error:Ui=>{console.error("error al tratar de buscar los datos",Ui),this.noResultados=!0,this.loading=!1},complete:()=>this.loading=!1})}addProducto(H){this.productSelect.emit(H),this.modal3.dismiss()}}return lt.\u0275fac=function(H){return new(H||lt)(oe.Y36(ht.M),oe.Y36(X.k),oe.Y36(P.qu))},lt.\u0275cmp=oe.Xpm({type:lt,selectors:[["app-search-product-modal"]],inputs:{modal3:"modal3",idEmpresa:"idEmpresa",skuNow:"skuNow",allCompanies:"allCompanies"},outputs:{productSelect:"productSelect"},features:[oe.TTD],decls:45,vars:8,consts:[["id","kt_modal_users_search","tabindex","-1","aria-hidden","true"],[1,"modal-dialog","modal-dialog-centered","mw-800px"],[1,"modal-content"],[1,"modal-header","pb-0","border-0","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-18","pt-0","pb-15"],[1,"text-center","mb-13"],[1,"mb-3"],[1,"text-muted","fw-bold","fs-5"],["id","kt_modal_users_search_handler","data-kt-search-keypress","true","data-kt-search-min-length","2","data-kt-search-enter","enter","data-kt-search-layout","inline"],["data-kt-search-element","form","autocomplete","off",1,"w-100","position-relative","mb-5",3,"formGroup","submit"],["type","hidden"],[1,"row","mb-5"],[1,"col-md-5","fv-row"],[1,"fs-5","fw-bold","mb-2"],["type","text","placeholder","","name","sku","formControlName","sku",1,"form-control","form-control-solid"],["sku",""],["type","text","placeholder","","name","name","formControlName","nombre",1,"form-control","form-control-solid"],["nombre",""],[1,"col-md-2","fv-row","text-center"],["type","submit"],[1,"fa-solid","fa-magnifying-glass"],["data-kt-search-element","spinner",1,"m-0","row","justify-content-center",3,"ngClass"],[1,"spinner-border","h-15px","w-15px","align-middle","text-muted"],[1,"py-5"],["data-kt-search-element","results","class","",4,"ngIf"],["data-kt-search-element","empty",1,"text-center",3,"ngClass"],[1,"fw-bold","py-10"],[1,"text-gray-600","fs-3","mb-2"],[1,"text-muted","fs-6"],[1,"text-center","px-5"],["src","assets/media/illustrations/sketchy-1/1.png","alt","",1,"w-100","h-200px","h-sm-325px"],["data-kt-search-element","results",1,""],[1,"mh-375px","scroll-y","me-n7","pe-7"],["class","text-hover-primary","style","cursor:pointer;",3,"click",4,"ngFor","ngForOf"],[1,"text-hover-primary",2,"cursor","pointer",3,"click"],["data-user-id","0",1,"rounded","d-flex","flex-stack","bg-active-lighten","p-4"],[1,"d-flex","align-items-center"],[1,"form-check","form-check-custom","form-check-solid","me-5"],[1,"fa-solid","fa-plus","text"],[1,"ms-5"],[1,"fs-5","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"fw-bold","text-muted"],[1,"border-bottom","border-gray-300","border-bottom-dashed"]],template:function(H,Lt){1&H&&(oe.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),oe.NdJ("click",function(){return Lt.modal3.dismiss()}),oe.TgZ(5,"span",5),oe.O4$(),oe.TgZ(6,"svg",6),oe._UZ(7,"rect",7)(8,"rect",8),oe.qZA()()()(),oe.kcU(),oe.TgZ(9,"div",9)(10,"div",10)(11,"h1",11),oe._uU(12,"Buscar Producto"),oe.qZA(),oe.TgZ(13,"div",12),oe._uU(14,"Agrega producto"),oe.qZA()(),oe.TgZ(15,"div",13)(16,"form",14),oe.NdJ("submit",function(){return Lt.submit()}),oe._UZ(17,"input",15),oe.TgZ(18,"div",16)(19,"div",17)(20,"label",18),oe._uU(21,"SKU"),oe.qZA(),oe._UZ(22,"input",19,20),oe.qZA(),oe.TgZ(24,"div",17)(25,"label",18),oe._uU(26,"Nombre"),oe.qZA(),oe._UZ(27,"input",21,22),oe.qZA(),oe.TgZ(29,"div",23),oe._UZ(30,"label",18),oe.TgZ(31,"button",24),oe._UZ(32,"i",25),oe.qZA()()()(),oe.TgZ(33,"span",26),oe._UZ(34,"span",27),oe.qZA(),oe.TgZ(35,"div",28),oe.YNc(36,t,3,1,"div",29),oe.TgZ(37,"div",30)(38,"div",31)(39,"div",32),oe._uU(40,"Producto no encontrado"),oe.qZA(),oe.TgZ(41,"div",33),oe._uU(42,"Trata de buscar por SKU y/o nombre del producto"),oe.qZA()(),oe.TgZ(43,"div",34),oe._UZ(44,"img",35),oe.qZA()()()()()()()()),2&H&&(oe.xp6(16),oe.Q6J("formGroup",Lt.formSearch),oe.xp6(17),oe.Q6J("ngClass",oe.VKq(4,ue,!Lt.loading)),oe.xp6(3),oe.Q6J("ngIf",!Lt.noResultados),oe.xp6(1),oe.Q6J("ngClass",oe.VKq(6,ue,!Lt.getShowNoResult)))},dependencies:[ze.mk,ze.sg,ze.O5,P._Y,P.Fj,P.JJ,P.JL,P.sg,P.u],styles:[".tag-cloud-functions[_ngcontent-%COMP%]{background:#498afb;color:#fff}.tag-flutter[_ngcontent-%COMP%]{background:#54c5f8;color:#003b6c}.tag[_ngcontent-%COMP%]{display:inline-block;padding:.2em .5em .3em;border-radius:2px;background:#454e56;color:#b2becd;font-weight:600;margin:.25em .1em}.tag-lg[_ngcontent-%COMP%]{font-size:1.2em;border-radius:4px}"]}),lt})()},6406:(Ir,Dn,Oe)=>{"use strict";Oe.r(Dn),Oe.d(Dn,{ProductModule:()=>TJ});var oe={};Oe.r(oe),Oe.d(oe,{Arc:()=>uF,Circle:()=>oF,Matrix:()=>Zs,Point:()=>un,Rect:()=>Lh,Segment:()=>xF,Size:()=>Uv,Transformation:()=>Lk,toMatrix:()=>Mk,transform:()=>Fm});var ht={};Oe.r(ht),Oe.d(ht,{DEG_TO_RAD:()=>Ik,LRUCache:()=>ND,MAX_NUM:()=>Nh,MIN_NUM:()=>Fh,TextMetrics:()=>BD,append:()=>CF,arabicToRoman:()=>EF,bindEvents:()=>UF,createPromise:()=>wF,defined:()=>bs,definitionId:()=>TF,deg:()=>tc,elementOffset:()=>BF,elementPadding:()=>ZF,elementScale:()=>JF,elementSize:()=>GF,elementStyles:()=>Uk,encodeBase64:()=>DF,eventCoordinates:()=>AF,eventElement:()=>OF,hashKey:()=>PD,isTransparent:()=>IF,last:()=>MF,limitValue:()=>RF,measureText:()=>WF,mergeSort:()=>NF,normalizeText:()=>FD,now:()=>FF,objectKey:()=>LD,promiseAll:()=>LF,rad:()=>ja,round:()=>Vn,unbindEvents:()=>zF,valueOrDefault:()=>PF});var X=Oe(6895),P=Oe(9132),ze=Oe(5861),Je=Oe(3905),t=Oe(4650),ue=Oe(4916),ft=Oe(3165),lt=Oe(466),Tt=Oe(4669),H=Oe(4006),Lt=Oe(8361),An=Oe(8619);function Ui(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",37),t._uU(1),t.TgZ(2,"button",38),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.removeCategory(a.id))}),t._UZ(3,"i",39),t.qZA()()}if(2&i){const e=r.$implicit;t.Q6J("id",e.id),t.xp6(1),t.hij(" ",e.vch_nombre," ")}}function Bt(i,r){if(1&i&&(t.TgZ(0,"div",35)(1,"h5"),t._uU(2,"Seleccionadas"),t.qZA(),t.YNc(3,Ui,4,2,"span",36),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.companyCategories)}}function ca(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",42),t._uU(1),t.TgZ(2,"button",38),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.removeCategory(a.id))}),t._UZ(3,"i",39),t.qZA()()}if(2&i){const e=r.$implicit;t.Q6J("id",e.id),t.xp6(1),t.hij(" ",e.vch_nombre," ")}}function Rn(i,r){if(1&i&&(t.TgZ(0,"div",40)(1,"h5"),t._uU(2,"Seleccionadas de Aibo"),t.qZA(),t.YNc(3,ca,4,2,"span",41),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.aiboCategories)}}function So(i,r){1&i&&(t.TgZ(0,"span",56),t._uU(1,"AIBO"),t.qZA())}const Js=function(i){return{ocultItem:i}};function w(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",46),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.addCategoria(a))}),t.YNc(1,So,2,0,"span",47),t.TgZ(2,"div",48)(3,"div",49)(4,"label",50),t._UZ(5,"i",51),t.qZA(),t.TgZ(6,"div",52)(7,"span",53),t._uU(8),t.qZA(),t.TgZ(9,"div",54),t._uU(10),t.qZA()()()(),t._UZ(11,"div",55),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.Q6J("ngClass",t.VKq(4,Js,n.toggleElement(e.id))),t.xp6(1),t.Q6J("ngIf",n.isAibo(e)),t.xp6(7),t.Oqu(e.vch_nombre),t.xp6(2),t.Oqu(n.getCatPadres(e))}}function M(i,r){if(1&i&&(t.TgZ(0,"div",43)(1,"div",44),t.YNc(2,w,12,6,"div",45),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.categories)}}const O=function(i){return{"d-none":i}};let q=(()=>{class i{constructor(e,n){this.prodProvider=e,this.userProvider=n,this.isAdmin=!1,this.idCompany=this.userProvider.usuario.id_empresa,this.categoriasSelectOut=new t.vpe,this.categories=[],this.loading=!0,this.tieneValue=!1,this.noResultados=!1,this.idCompanyAibo="48af74ca-3937-11ed-a734-0e6a408582e7"}ngOnInit(){this.getCategoriasBD("-1")}get companyCategories(){return this.selectedCategories.filter(e=>e.id_empresa==this.idCompany)}get aiboCategories(){return this.selectedCategories.filter(e=>e.id_empresa==this.idCompanyAibo)}buscarCategorias(e){this.tieneValue="-1"!=(e=""==e?"-1":e),this.getCategoriasBD(e)}getCategoriasBD(e){this.loading=!0,this.prodProvider.getCategoriaXEmpresa(this.idCompany,e,this.isAdmin).subscribe({next:n=>{this.categories=n.data?.filter(s=>0==s.bit_campana)||[],this.noResultados=0==n.data.length},error:n=>console.error(n),complete:()=>this.loading=!1})}getCatPadres(e){return null!=e.id_categoriapadre?`Categor\xeda padre -> ${e.tbl_categorium.vch_nombre}`:"Categor\xeda padre"}removeCategory(e){this.selectedCategories=this.selectedCategories?.filter(n=>n.id!==e),this.categoriasSelectOut.emit(this.selectedCategories)}addCategoria(e){this.selectedCategories?.find(s=>s.id==e.id)||(this.selectedCategories?.push(e),this.categoriasSelectOut.emit(this.selectedCategories))}toggleElement(e=""){return this.selectedCategories?.find(n=>n.id==e)}isAibo(e){return e.id_empresa==this.idCompanyAibo}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M),t.Y36(ft.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-category-modal"]],inputs:{selectedCategories:"selectedCategories",modal:"modal",isAdmin:"isAdmin",idCompany:"idCompany"},outputs:{categoriasSelectOut:"categoriasSelectOut"},decls:43,vars:12,consts:[["id","kt_modal_users_search","tabindex","-1","aria-hidden","true"],[1,"modal-content"],[1,"modal-header","pb-0","border-0","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-18","pt-0","pb-15"],[1,"text-center","mb-13"],[1,"mb-3"],[1,"text-muted","fw-bold","fs-5"],["id","kt_modal_users_search_handler","data-kt-search-keypress","true","data-kt-search-min-length","2","data-kt-search-enter","enter","data-kt-search-layout","inline"],["data-kt-search-element","form","autocomplete","off",1,"w-100","position-relative","mb-5"],["type","hidden"],[1,"svg-icon","svg-icon-2","svg-icon-lg-1","svg-icon-gray-500","position-absolute","top-50","ms-5","translate-middle-y"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","name","search","value","","placeholder","Busca por nombre de categor\xeda","data-kt-search-element","input",1,"form-control","form-control-lg","form-control-solid","px-15",3,"keyup"],["buscaCat",""],["data-kt-search-element","spinner",1,"position-absolute","top-50","end-0","translate-middle-y","lh-0","me-5",3,"ngClass"],[1,"spinner-border","h-15px","w-15px","align-middle","text-muted"],["data-kt-search-element","clear",1,"btn","btn-flush","btn-active-color-primary","position-absolute","top-50","end-0","translate-middle-y","lh-0","me-5",3,"ngClass","click"],[1,"svg-icon","svg-icon-2","svg-icon-lg-1","me-0"],[1,"py-5"],[1,"d-flex","flex-column","gap-5","mt-3"],["style","transition: all .5s ease-in-out;",4,"ngIf"],["class","mt-1",4,"ngIf"],["data-kt-search-element","results","class","",4,"ngIf"],["data-kt-search-element","empty",1,"text-center",3,"ngClass"],[1,"fw-bold","py-10"],[1,"text-gray-600","fs-3","mb-2"],[1,"text-muted","fs-6"],[1,"text-center","px-5"],["src","assets/media/illustrations/sketchy-1/1.png","alt","",1,"w-100","h-200px","h-sm-325px"],[2,"transition","all .5s ease-in-out"],["class","tag tag-cloud-functions tag-lg","style","transition: all .5s ease-in-out;",3,"id",4,"ngFor","ngForOf"],[1,"tag","tag-cloud-functions","tag-lg",2,"transition","all .5s ease-in-out",3,"id"],[1,"btn","btn-flush",3,"click"],[1,"fa-solid","fa-xmark","text-gray-600"],[1,"mt-1"],["class","tag tag-cloud-functions tag-lg",3,"id",4,"ngFor","ngForOf"],[1,"tag","tag-cloud-functions","tag-lg",3,"id"],["data-kt-search-element","results",1,""],[1,"mh-375px","scroll-y","me-n7","pe-7"],["class","text-hover-primary item","style","cursor:pointer;",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"text-hover-primary","item",2,"cursor","pointer",3,"ngClass","click"],["class","badge width-auto badge-light-success position-absolute top-0 end-0 mt-1",4,"ngIf"],["data-user-id","0",1,"rounded","d-flex","flex-stack","bg-active-lighten","p-4"],[1,"d-flex","align-items-center"],[1,"form-check","form-check-custom","form-check-solid","me-5"],[1,"fa-solid","fa-plus","text"],[1,"ms-5"],[1,"fs-5","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"fw-bold","text-muted"],[1,"border-bottom","border-gray-300","border-bottom-dashed"],[1,"badge","width-auto","badge-light-success","position-absolute","top-0","end-0","mt-1"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.NdJ("click",function(){return n.modal.dismiss()}),t.TgZ(4,"span",4),t.O4$(),t.TgZ(5,"svg",5),t._UZ(6,"rect",6)(7,"rect",7),t.qZA()()()(),t.kcU(),t.TgZ(8,"div",8)(9,"div",9)(10,"h1",10),t._uU(11,"Buscar Categor\xedas"),t.qZA(),t.TgZ(12,"div",11),t._uU(13,"Agrega categor\xedas al producto"),t.qZA()(),t.TgZ(14,"div",12)(15,"form",13),t._UZ(16,"input",14),t.TgZ(17,"span",15),t.O4$(),t.TgZ(18,"svg",5),t._UZ(19,"rect",16)(20,"path",17),t.qZA()(),t.kcU(),t.TgZ(21,"input",18,19),t.NdJ("keyup",function(){t.CHM(s);const d=t.MAs(22);return t.KtG(n.buscarCategorias(d.value))}),t.qZA(),t.TgZ(23,"span",20),t._UZ(24,"span",21),t.qZA(),t.TgZ(25,"span",22),t.NdJ("click",function(){return t.CHM(s),t.MAs(22).value="",t.KtG(n.tieneValue=!1)}),t.TgZ(26,"span",23),t.O4$(),t.TgZ(27,"svg",5),t._UZ(28,"rect",6)(29,"rect",7),t.qZA()()()(),t.kcU(),t.TgZ(30,"div",24)(31,"div",25),t.YNc(32,Bt,4,1,"div",26),t.YNc(33,Rn,4,1,"div",27),t.qZA(),t.YNc(34,M,3,1,"div",28),t.TgZ(35,"div",29)(36,"div",30)(37,"div",31),t._uU(38,"Categor\xeda no encontrada"),t.qZA(),t.TgZ(39,"div",32),t._uU(40,"Trata de buscar por le nombre de la categor\xeda"),t.qZA()(),t.TgZ(41,"div",33),t._UZ(42,"img",34),t.qZA()()()()()()()}2&e&&(t.xp6(23),t.Q6J("ngClass",t.VKq(6,O,!n.loading)),t.xp6(2),t.Q6J("ngClass",t.VKq(8,O,!n.tieneValue)),t.xp6(7),t.Q6J("ngIf",n.companyCategories.length>0),t.xp6(1),t.Q6J("ngIf",n.isAdmin&&n.aiboCategories.length>0),t.xp6(1),t.Q6J("ngIf",n.categories.length>0),t.xp6(1),t.Q6J("ngClass",t.VKq(10,O,!n.noResultados)))},dependencies:[X.mk,X.sg,X.O5,H._Y,H.JL,H.F],styles:[".tag-cloud-functions[_ngcontent-%COMP%]{background:#498afb;color:#fff}.tag-flutter[_ngcontent-%COMP%]{background:#54c5f8;color:#003b6c}.tag[_ngcontent-%COMP%]{display:inline-block;padding:.2em .5em .3em;border-radius:2px;background:#454e56;color:#b2becd;font-weight:600;margin:.25em .1em}.tag-lg[_ngcontent-%COMP%]{font-size:1.2em;border-radius:4px}.item[_ngcontent-%COMP%]{transition:all .3s ease-in-out;transform:translateY(0);opacity:1}.ocultItem[_ngcontent-%COMP%]{transform:translateY(-100%);opacity:0;pointer-events:none;position:absolute}"]}),i})();var re=Oe(7026);const ae=["dangerTpl"];function ee(i,r){if(1&i&&(t.TgZ(0,"option",41),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.vch_nombre)}}function me(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"select",38,39),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(1),a=t.oxw();return t.KtG(a.setCbEmpresa(s.value))}),t.TgZ(2,"option",40),t._uU(3,"Empresa"),t.qZA(),t._UZ(4,"option"),t.YNc(5,ee,2,2,"option",22),t.qZA()}if(2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.empresas)}}function Ye(i,r){if(1&i&&(t.TgZ(0,"option",41),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.vch_nombre)}}function He(i,r){1&i&&(t.TgZ(0,"div",55)(1,"div"),t._uU(2,"No hay datos para mostrar"),t.qZA()())}function Be(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&i){const e=r.$implicit;t.xp6(2),t.hij(" ",e.vch_nombre," "),t.xp6(2),t.hij(" ",e.vch_sku," ")}}function Ne(i,r){if(1&i&&(t.TgZ(0,"table",56)(1,"thead")(2,"tr",57)(3,"th",58),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"th",59),t._uU(6,"SKU"),t.qZA()()(),t.TgZ(7,"tbody"),t.YNc(8,Be,5,2,"tr",60),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(8),t.Q6J("ngForOf",e.selectedArr)}}function te(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"i",70),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&i){const e=r.$implicit;t.xp6(4),t.Oqu(e.vch_nombre)}}function Ie(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"i",70),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&i){const e=r.$implicit;t.xp6(4),t.Oqu(e.vch_nombre)}}function dt(i,r){if(1&i&&(t.TgZ(0,"table",56)(1,"tbody")(2,"caption"),t._uU(3,"Aibo"),t.qZA(),t.YNc(4,Ie,5,1,"tr",60),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(4),t.Q6J("ngForOf",e.categoriasAibo)}}function mt(i,r){1&i&&(t.TgZ(0,"div",71),t._uU(1," -- Seleccione categor\xedas -- "),t.qZA())}function Gt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",61)(2,"div",62)(3,"div",63)(4,"h2"),t._uU(5,"Categor\xedas"),t.qZA()()(),t.TgZ(6,"div",64)(7,"table",56)(8,"tbody"),t.YNc(9,te,5,1,"tr",60),t.qZA()(),t.YNc(10,dt,5,1,"table",46),t.YNc(11,mt,2,0,"ng-template",65),t.TgZ(12,"button",66),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2),a=t.MAs(52);return t.KtG(s.open(a))}),t.TgZ(13,"span",67),t.O4$(),t.TgZ(14,"svg",12),t._UZ(15,"rect",68)(16,"rect",69),t.qZA()(),t._uU(17,"categor\xeda"),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(9),t.Q6J("ngForOf",e.categoriasEmpresa),t.xp6(1),t.Q6J("ngIf",e.admin),t.xp6(1),t.Q6J("ngIf",0==e.categories.length)}}function bt(i,r){if(1&i&&(t.TgZ(0,"option",79),t._uU(1),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(3);t.Q6J("selected",n.selectedStatus&&e.id==n.selectedStatus.id)("value",e.id),t.xp6(1),t.Oqu(e.vch_nombre)}}function ti(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",62)(2,"div",63)(3,"h2"),t._uU(4,"Nuevo estado"),t.qZA()(),t.TgZ(5,"div",72),t._UZ(6,"div",73),t.qZA()(),t.TgZ(7,"div",64)(8,"select",74,75),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(9),a=t.oxw(2);return t.KtG(a.changeStatus(s.value))}),t.TgZ(10,"option",76),t._uU(11,"Seleccione un estado"),t.qZA(),t.YNc(12,bt,2,3,"option",77),t.qZA(),t.TgZ(13,"div",78),t._uU(14,"Ingrese el estado del producto."),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(6),t.Q6J("ngClass",e.classEstado),t.xp6(4),t.Q6J("selected",!e.selectedStatus),t.xp6(2),t.Q6J("ngForOf",e.estados)}}function Yi(i,r){1&i&&(t.TgZ(0,"button",83),t._UZ(1,"span",84),t._uU(2," Cargando... "),t.qZA())}function Mr(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.submitMultipleUpdate())}),t._uU(1," Aplicar cambios "),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("disabled",!e.validateSubmitButton)}}function li(i,r){if(1&i&&(t.TgZ(0,"div",80),t.YNc(1,Yi,3,0,"button",81),t.YNc(2,Mr,2,1,"button",82),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.actionButtonLoader),t.xp6(1),t.Q6J("ngIf",!e.actionButtonLoader)}}function Yn(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",42)(1,"div",43)(2,"h4",44),t._uU(3,"Productos seleccionados"),t.qZA(),t.YNc(4,He,3,0,"div",45),t.YNc(5,Ne,9,1,"table",46),t.qZA(),t.TgZ(6,"div",47)(7,"div")(8,"select",48,49),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(9),a=t.oxw();return t.KtG(a.onChangeAction(s.value))}),t.TgZ(10,"option",50),t._uU(11,"Acci\xf3n a realizar"),t.qZA(),t.TgZ(12,"option",51),t._uU(13,"Agregar categor\xeda"),t.qZA(),t.TgZ(14,"option",52),t._uU(15,"Cambiar estado"),t.qZA()()(),t.YNc(16,Gt,18,3,"div",53),t.YNc(17,ti,15,3,"div",53),t.YNc(18,li,3,2,"div",54),t.qZA()()}if(2&i){const e=t.MAs(9),n=t.oxw();t.xp6(4),t.Q6J("ngIf",!n.allProductsSelected||0==n.allProductsSelected.length),t.xp6(1),t.Q6J("ngIf",n.allProductsSelected&&n.allProductsSelected.length>0),t.xp6(11),t.Q6J("ngIf",n.showUpdateCategory),t.xp6(1),t.Q6J("ngIf",n.showUpdateStatus),t.xp6(1),t.Q6J("ngIf",e.length>0)}}function _i(i,r){if(1&i&&(t.TgZ(0,"p",88),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.error)}}function Ki(i,r){if(1&i&&(t.TgZ(0,"div",86)(1,"h4"),t._uU(2,"Ocurrieron los siguientes errores:"),t.qZA(),t.YNc(3,_i,2,1,"p",87),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.errors)}}function da(i,r){1&i&&(t.TgZ(0,"div",89),t._UZ(1,"img",90),t.qZA())}function uc(i,r){1&i&&(t.TgZ(0,"div",91)(1,"strong"),t._uU(2,"Sin productos"),t.qZA()())}const xt=function(i){return[i]};function il(i,r){if(1&i&&(t.TgZ(0,"a",130),t._UZ(1,"span",131),t.ALo(2,"noImagen"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(5,xt,"../unique/"+e.id)),t.xp6(1),t.Akn("background-image:url("+t.lcZ(2,3,e)+")")}}function Kd(i,r){1&i&&(t.TgZ(0,"span",118),t._uU(1,"Ninguna"),t.qZA())}function $d(i,r){if(1&i&&(t.TgZ(0,"span",118),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.vch_nombre)}}function Eo(i,r){if(1&i&&(t.TgZ(0,"div",132),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,e.db_preciooferta,"$","code","1.0-0"))}}function rg(i,r){1&i&&(t.TgZ(0,"span",133),t._uU(1,"En campa\xf1a"),t.qZA())}function qb(i,r){1&i&&(t.TgZ(0,"span",134),t._uU(1,"Con instalaci\xf3n"),t.qZA())}function Yb(i,r){1&i&&(t.TgZ(0,"span",135),t._uU(1,"Con preventa"),t.qZA())}function sg(i,r){1&i&&(t.TgZ(0,"span",135),t._uU(1,"A Pedido"),t.qZA())}const Wh=function(i){return{campain:i}},Kb=function(i){return{empresa:i}},$b=function(i){return{"text-decoration-line-through text-muted":i}};function Wb(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr",110)(1,"td")(2,"div",111)(3,"input",112),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.addToProductsSelected(a))}),t.qZA()()(),t.TgZ(4,"td")(5,"div",113),t.YNc(6,il,3,7,"a",114),t.TgZ(7,"div",115)(8,"a",116),t._uU(9),t.qZA()()()(),t.TgZ(10,"td",117)(11,"span",118),t._uU(12),t.qZA()(),t.TgZ(13,"td",117),t.YNc(14,Kd,2,0,"span",119),t.YNc(15,$d,2,1,"span",120),t.qZA(),t.TgZ(16,"td",121)(17,"span",122),t._uU(18),t.qZA()(),t.TgZ(19,"td",117)(20,"div",123),t._uU(21),t.ALo(22,"currency"),t.qZA(),t.YNc(23,Eo,3,6,"div",124),t.qZA(),t.TgZ(24,"td",125)(25,"span",126),t._uU(26),t.qZA(),t.YNc(27,rg,2,0,"span",127),t.YNc(28,qb,2,0,"span",128),t.YNc(29,Yb,2,0,"span",129),t.YNc(30,sg,2,0,"span",129),t.qZA()()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.Q6J("ngClass",t.VKq(24,Wh,n.isCampain(e.categorias))),t.xp6(3),t.Q6J("checked",e.selected),t.xp6(3),t.Q6J("ngIf",e.tbl_documentos),t.xp6(2),t.Q6J("routerLink",t.VKq(26,xt,"../unique/"+e.id))("queryParams",t.VKq(28,Kb,n.empresa)),t.xp6(1),t.Oqu(e.vch_nombre),t.xp6(3),t.Oqu(e.vch_sku),t.xp6(2),t.Q6J("ngIf",0==e.categorias.length),t.xp6(1),t.Q6J("ngForOf",e.categorias),t.xp6(3),t.Oqu(e.int_stock),t.xp6(2),t.Q6J("ngClass",t.VKq(30,$b,n.isCampain(e.categorias))),t.xp6(1),t.Oqu(t.gM2(22,19,e.db_precio,"$","code","1.0-0")),t.xp6(2),t.Q6J("ngIf",n.isCampain(e.categorias)),t.xp6(2),t.Q6J("ngClass",n.getCssStatus(e.tbl_estado.vch_color)),t.xp6(1),t.Oqu(null==e.tbl_estado?null:e.tbl_estado.vch_nombre),t.xp6(1),t.Q6J("ngIf",n.isCampain(e.categorias)),t.xp6(1),t.Q6J("ngIf",e.bit_instalacion),t.xp6(1),t.Q6J("ngIf",e.bit_preventa),t.xp6(1),t.Q6J("ngIf",e.bit_apedido)}}const hc=function(i){return{active:i}};function ua(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"li",136)(1,"button",105),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.pressNumPage(a.num))}),t._uU(2),t.qZA()()}if(2&i){const e=r.$implicit;t.Q6J("ngClass",t.VKq(2,hc,e.selected)),t.xp6(2),t.Oqu(e.num)}}function jb(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",64)(1,"table",92)(2,"thead")(3,"tr",93),t._UZ(4,"th",94),t.TgZ(5,"th",95),t._uU(6,"Producto"),t.qZA(),t.TgZ(7,"th",96),t._uU(8,"SKU"),t.qZA(),t.TgZ(9,"th",97),t._uU(10,"Campa\xf1a"),t.qZA(),t.TgZ(11,"th",97),t._uU(12,"Stock"),t.qZA(),t.TgZ(13,"th",96),t._uU(14,"Precio"),t.qZA(),t.TgZ(15,"th",98),t._uU(16,"Estado"),t.qZA()()(),t.TgZ(17,"tbody",99),t.YNc(18,Wb,31,32,"tr",100),t.qZA()(),t.TgZ(19,"div",101)(20,"div",102),t._uU(21),t.qZA(),t.TgZ(22,"ul",103)(23,"li",104)(24,"button",105),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.pressPagination(0))}),t._UZ(25,"i",106),t.qZA()(),t.YNc(26,ua,3,4,"li",107),t.TgZ(27,"li",108)(28,"button",105),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.pressPagination(1))}),t._UZ(29,"i",109),t.qZA()()()()()}if(2&i){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.productos),t.xp6(3),t.hij(" ",e.countProdSearch," productos totales"),t.xp6(5),t.Q6J("ngForOf",e.listPage)}}function Qb(i,r){1&i&&(t.O4$(),t.TgZ(0,"svg",137),t._UZ(1,"path",138),t.qZA(),t._uU(2," Error del servidor, favor intente nuevamente "))}function wo(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-add-category-modal",139),t.NdJ("categoriasSelectOut",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.setCategories(s))}),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw();t.Q6J("isAdmin",n.admin)("idCompany",n.empresa)("selectedCategories",n.categories)("modal",e)}}const og=function(){return["/product/unique/-1"]};let ha=(()=>{class i{constructor(e,n,s,a,d){this.prodService=e,this.userService=n,this.toastService=s,this.modalService=a,this.rutaActiva=d,this.productos=[],this.estados=[],this.empresas=[],this.texto="",this.estado="all",this.empresa="",this.loading=!0,this.sinProd=!1,this.admin=!1,this.page=0,this.countProdSearch=0,this.allProductsSelected=[],this.actionButtonLoader=!1,this.showUpdateStatus=!1,this.classEstado="",this.showUpdateCategory=!1,this.categories=[],this.installation=!1,this.presale=!1,this.onDemand=!1,this.errors=[],this.userService.adminAibo?(this.admin=!0,this.loadAdmin()):(this.load(),this.empresa=n.usuario.id_empresa)}get selectedArr(){return this.allProductsSelected}get validateSubmitButton(){return"updateStatus"==this.action?!!this.selectedStatus?.id:"updateCategory"==this.action&&0!=this.categories.length}isSelected(e){for(const n of this.allProductsSelected)if(n.id==e.id)return!0;return!1}addToProductsSelected(e){for(const n of this.allProductsSelected)if(n.id==e.id)return this.allProductsSelected=this.allProductsSelected.filter(s=>s.id!=e.id),void(e.selected=!1);e.selected=!0,this.allProductsSelected.push(e)}onChangeAction(e){switch(this.ocultAllActions(),this.action=e,this.action){case"updateCategory":this.changeShowUpdateCategory();break;case"updateStatus":this.changeShowUpdateStatus()}}changeShowUpdateCategory(){this.showUpdateCategory=!this.showUpdateCategory}changeShowUpdateStatus(){this.showUpdateStatus=!this.showUpdateStatus}ocultAllActions(){this.showUpdateCategory=!1,this.showUpdateStatus=!1}changeStatus(e){this.selectedStatus=this.estados.find(n=>n.id==e),this.classEstado=this.selectedStatus?.vch_color||""}get categoriasEmpresa(){return this.categories.filter(e=>e.id_empresa==this.empresa)}get categoriasAibo(){return this.categories.filter(e=>"48af74ca-3937-11ed-a734-0e6a408582e7"==e.id_empresa)}setCategories(e){this.categories=[...e]}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(n=>{},n=>{})}submitMultipleUpdate(){this.errors=[],this.actionButtonLoader=!0;let e,n={products:this.allProductsSelected,id_user:this.userService.usuario.id};"updateStatus"==this.action?(n={...n,id_status:this.selectedStatus?.id},e=this.prodService.postUpdateMultipleProducts(n)):"updateCategory"==this.action&&(n={...n,categories:this.categories},e=this.prodService.postUpdateMultipleProductsXcategory(n)),e.subscribe({next:s=>{this.toastService.show(s.message,{classname:"bg-success text-light",delay:3e3}),this.userService.adminAibo?(this.admin=!0,this.loadAdmin()):this.load(),this.actionButtonLoader=!1},error:s=>{this.actionButtonLoader=!1,this.errors=s.error.data,this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:3e3})}})}ngOnInit(){}load(){this.loadProductos({id_empresa:this.userService.usuario.id_empresa,page:this.page}),this.loadEstadosProd()}loadAdmin(){var e=this;return(0,ze.Z)(function*(){yield e.loadEmpresas(),yield e.loadEstadosProd(),e.loading=!1})()}loadProductos(e){this.prodService.getProductsxEmpresa(e).subscribe({next:n=>{if(n.data){this.productos=[];for(const s of n.data)this.isSelected(s)?this.productos.push({...s,selected:!0}):this.productos.push({...s,selected:!1})}this.sinProd=!1,0==this.page&&(this.countProdSearch=n.code),this.setPageList()},error:n=>{console.log(n),n?.error?.code&&3==n?.error?.code?(this.productos=[],this.sinProd=!0):this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3}),this.loading=!1},complete:()=>this.loading=!1})}loadEstadosProd(){var e=this;return(0,ze.Z)(function*(){try{e.estados=(yield(0,Je.z)(e.prodService.getEstadoProducto())).data||[]}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3})}})()}loadEmpresas(){var e=this;return(0,ze.Z)(function*(){try{e.empresas=(yield(0,Je.z)(e.prodService.getEmpresas())).data?.filter(n=>n.int_idwoo)||[]}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3})}})()}getCssStatus(e){let n;switch(e){case"bg-success":n="badge-light-success";break;case"bg-warning":n="badge-light-warning";break;case"bg-danger":n="badge-light-danger";break;default:n="badge-light-info"}return n}setCbEmpresa(e){this.empresa=e,this.page=0,"-1"!=e&&this.buscaProductos()}setCbEstado(e){this.estado=e,this.page=0,this.buscaProductos()}setCbinstallation(){this.installation=!this.installation,this.page=0,this.buscaProductos()}setCbPresale(){this.presale=!this.presale,this.page=0,this.buscaProductos()}setCbOnDemand(){this.onDemand=!this.onDemand,this.page=0,this.buscaProductos()}setText(e){this.texto=e,this.page=0,this.buscaProductos()}buscaProductos(){let e={id_empresa:this.empresa||this.userService.usuario.id_empresa,page:this.page};""!=this.texto&&(e.texto=this.texto),"all"!=this.estado&&(e.id_estado=this.estado),e.bit_instalacion=this.installation,e.bit_preventa=this.presale,e.bit_apedido=this.onDemand,this.loading=!0,this.loadProductos(e)}isCampain(e){return e.length>0}pressPagination(e){this.page=1==e?this.page+1:this.page-1,this.buscaProductos()}setPageList(){this.listPage=[];const e=Math.ceil(this.countProdSearch/30);if(e-(this.page+1)>5)for(let s=this.page+1;s<=this.page+6;s++)this.listPage.push({num:s,selected:this.page+1==s});else{let s=e-6>0?e-6:0;for(s+=1;s<=e;s++)this.listPage.push({num:s,selected:this.page+1==s})}}pressNumPage(e){this.page=e-1,this.buscaProductos()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M),t.Y36(ft.i),t.Y36(lt.k),t.Y36(Tt.FF),t.Y36(P.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(ae,5),2&e){let s;t.iGM(s=t.CRH())&&(n.errorToast=s.first)}},decls:53,vars:9,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title","d-flex","justify-content-between","w-100"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],["table","kt_ecommerce_products_table","name","ListadoProductos.xlsx"],[1,"btn","btn-primary",3,"routerLink"],[1,"card-toolbar","flex-row-fluid","justify-content-start","gap-5"],[1,"d-flex","align-items-center","position-relative","mb-1"],[1,"svg-icon","svg-icon-1","position-absolute","ms-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","currentColor"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","currentColor"],["type","text","placeholder","Buscar producto",1,"form-control","form-control-solid","w-250px","ps-14",3,"keyup"],["txtTexto",""],["class","form-select form-select-lg m-5 w-auto",3,"change",4,"ngIf"],[1,"w-100","mw-150px"],["data-placeholder","Estado",1,"form-select","form-select-solid",3,"change"],["cbEstado",""],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check","form-switch","mb-0","d-flex","flex-column","align-items-center","p-0","ms-3"],[1,"form-check-label","text-start","fw-bolder","mb-1"],["type","checkbox",1,"form-check-input","m-0",3,"change"],["cbinstallation",""],["cbpresale",""],["cbondemand",""],["class","d-flex justify-content-between w-100 gap-3 mb-5 mt-5",4,"ngIf"],["class","w-100",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["style","width: 1000px;"],["modal",""],[1,"form-select","form-select-lg","m-5","w-auto",3,"change"],["cbEmpresa",""],["value","-1","selected",""],[3,"value"],[1,"d-flex","justify-content-between","w-100","gap-3","mb-5","mt-5"],[1,"table-responsive"],[1,"mb-5"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf"],["class","table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-between","flex-column","col-6"],["name","actions","id","",1,"form-select","form-select-lg","m-5","mt-0",3,"change"],["action",""],["value","","selected","","hidden",""],["value","updateCategory"],["value","updateStatus"],[4,"ngIf"],["class","d-flex",4,"ngIf"],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3"],[1,"fw-bolder","text-muted"],[1,"min-w-150px"],[1,"min-w-140px"],[4,"ngFor","ngForOf"],[1,"card","card-flush","py-4"],[1,"card-header"],[1,"card-title"],[1,"card-body","pt-0"],[3,"ngIf"],["type","button",1,"btn","btn-light-primary","btn-sm","mb-10",3,"click"],[1,"svg-icon","svg-icon-2"],["opacity","0.5","x","11","y","18","width","12","height","2","rx","1","transform","rotate(-90 11 18)","fill","currentColor"],["x","6","y","11","width","12","height","2","rx","1","fill","currentColor"],[1,"fa-solid","fa-circle-chevron-right",2,"color","#009EF7"],[1,"bg-light","mb-5","text-center"],[1,"card-toolbar"],[1,"rounded-circle","w-15px","h-15px",3,"ngClass"],["data-control","select2","data-hide-search","true","data-placeholder","Select an option","id","kt_ecommerce_add_product_status_select",1,"form-select","mb-2",3,"change"],["cbStatus",""],["value","","hidden","",3,"selected"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"text-muted","fs-7"],[3,"selected","value"],[1,"d-flex"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-primary",3,"disabled","click"],[1,"w-100"],["class","badge badge-light-danger mt-2",4,"ngFor","ngForOf"],[1,"badge","badge-light-danger","mt-2"],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],["role","alert",1,"alert","alert-danger","m-10"],["id","kt_ecommerce_products_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"w-25px"],[1,"min-w-200px"],[1,"text-end","min-w-100px"],[1,"text-end","min-w-70px"],[1,"text-end","max-w-100px"],[1,"fw-bold","text-gray-600"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"d-flex","flex-stack","flex-wrap","pt-10"],[1,"fs-6","fw-bold","text-gray-700"],[1,"pagination"],[1,"page-item","previous"],[1,"page-link",3,"click"],[1,"previous"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item","next"],[1,"next"],[3,"ngClass"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox",1,"form-check-input","widget-13-check",3,"checked","click"],[1,"d-flex","align-items-center"],["class","symbol symbol-50px",3,"routerLink",4,"ngIf"],[1,"ms-5"],["data-kt-ecommerce-product-filter","product_name",1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink","queryParams"],[1,"text-end","pe-0"],[1,"fw-bolder"],["class","fw-bolder",4,"ngIf"],["class","fw-bolder",4,"ngFor","ngForOf"],["data-order","25",1,"text-end","pe-0"],[1,"fw-bolder","ms-3"],[1,"fw-bolder","text-dark",3,"ngClass"],["class","fw-bolder text-dark",4,"ngIf"],["data-order","Published",1,"text-end","pe-0","flex-column","align-items-end","justify-content-center",2,"max-width","100px"],[1,"badge","width-auto",3,"ngClass"],["class","badge width-auto badge-light-primary mt-2",4,"ngIf"],["class","badge width-auto badge-light-info mt-2",4,"ngIf"],["class","badge badge-light-primary mt-2 width-auto",4,"ngIf"],[1,"symbol","symbol-50px",3,"routerLink"],[1,"symbol-label"],[1,"fw-bolder","text-dark"],[1,"badge","width-auto","badge-light-primary","mt-2"],[1,"badge","width-auto","badge-light-info","mt-2"],[1,"badge","badge-light-primary","mt-2","width-auto"],[1,"page-item",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"],[3,"isAdmin","idCompany","selectedCategories","modal","categoriasSelectOut"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1"),t._uU(7,"Productos"),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"app-export-excel",7),t.TgZ(10,"a",8),t._uU(11,"Agregar Producto"),t.qZA()()(),t.TgZ(12,"div",9)(13,"div",10)(14,"span",11),t.O4$(),t.TgZ(15,"svg",12),t._UZ(16,"rect",13)(17,"path",14),t.qZA()(),t.kcU(),t.TgZ(18,"input",15,16),t.NdJ("keyup",function(){t.CHM(s);const d=t.MAs(19);return t.KtG(n.setText(d.value))}),t.qZA()(),t.YNc(20,me,6,1,"select",17),t.TgZ(21,"div",18)(22,"select",19,20),t.NdJ("change",function(){t.CHM(s);const d=t.MAs(23);return t.KtG(n.setCbEstado(d.value))}),t.TgZ(24,"option",21),t._uU(25,"Todos"),t.qZA(),t.YNc(26,Ye,2,2,"option",22),t.qZA()(),t.TgZ(27,"div",23)(28,"label",24),t._uU(29,"Con instalaci\xf3n"),t.qZA(),t.TgZ(30,"input",25,26),t.NdJ("change",function(){return n.setCbinstallation()}),t.qZA()(),t.TgZ(32,"div",23)(33,"label",24),t._uU(34,"Con preventa"),t.qZA(),t.TgZ(35,"input",25,27),t.NdJ("change",function(){return n.setCbPresale()}),t.qZA()(),t.TgZ(37,"div",23)(38,"label",24),t._uU(39,"A pedido"),t.qZA(),t.TgZ(40,"input",25,28),t.NdJ("change",function(){return n.setCbOnDemand()}),t.qZA()()(),t._UZ(42,"br"),t.YNc(43,Yn,19,5,"div",29),t.YNc(44,Ki,4,1,"div",30),t.qZA(),t.YNc(45,da,2,0,"div",31),t.YNc(46,uc,3,0,"div",32),t.YNc(47,jb,30,3,"div",33),t.qZA()()()(),t._UZ(48,"app-toast",34),t.YNc(49,Qb,3,0,"ng-template",null,35,t.W1O),t.YNc(51,wo,1,4,"ng-template",36,37,t.W1O)}2&e&&(t.xp6(10),t.Q6J("routerLink",t.DdM(8,og)),t.xp6(10),t.Q6J("ngIf",n.admin),t.xp6(6),t.Q6J("ngForOf",n.estados),t.xp6(17),t.Q6J("ngIf",n.allProductsSelected.length>0),t.xp6(1),t.Q6J("ngIf",n.errors.length>0),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.sinProd),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[X.mk,X.sg,X.O5,P.yS,H.YN,H.Kr,Lt.q,An.$,q,X.H9,re.h],styles:[".campain[_ngcontent-%COMP%]{background:rgb(255,255,255);background:linear-gradient(90deg,rgb(255,255,255) 17%,rgb(29,238,197) 55%,rgb(235,244,246) 100%)}"]}),i})();var qs=Oe(7818),$i=Oe(2340),Ss=Oe(3970),Xb=Oe(3474),jh=Oe(529),Qh=Oe(1481),Un=Oe(7579),rl=Oe(1135),ur=Oe(2557),vi=Oe(4968),Wd=Oe(4986),ag=Oe(5963);function jd(i=0,r=Wd.z){return i<0&&(i=0),(0,ag.H)(i,i,r)}var gn=Oe(5698),Kn=Oe(4004),Ot=Oe(9300),fc=Oe(4351),Bi=Oe(2722);const Cr=(i,r)=>e=>r(i(e)),as=(i,r,e)=>i.addEventListener&&i.addEventListener(r,e),Wi=(i,r,e)=>i&&i.removeEventListener&&i.removeEventListener(r,e),ls=()=>{},Xh=i=>i.preventDefault(),lg=/touch/;function sl(i){return i.type.match(lg)?{pageX:i.changedTouches[0].pageX,pageY:i.changedTouches[0].pageY,clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY,type:i.type,originalEvent:i,isTouch:!0}:{pageX:i.pageX,pageY:i.pageY,clientX:i.clientX,clientY:i.clientY,offsetX:i.offsetX,offsetY:i.offsetY,type:i.type,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,altKey:i.altKey,originalEvent:i}}let Sr=(()=>{class i{static supportPointerEvent(){return typeof window<"u"&&window.PointerEvent}get document(){return this._element?this._element.ownerDocument:document}constructor({press:e=ls,drag:n=ls,release:s=ls,mouseOnly:a=!1}){this._pressHandler=Cr(sl,e),this._dragHandler=Cr(sl,n),this._releaseHandler=Cr(sl,s),this._ignoreMouse=!1,this._mouseOnly=a,this._touchstart=d=>{1===d.touches.length&&this._pressHandler(d)},this._touchmove=d=>{1===d.touches.length&&this._dragHandler(d)},this._touchend=d=>{0===d.touches.length&&1===d.changedTouches.length&&(this._releaseHandler(d),this._ignoreMouse=!0,setTimeout(this._restoreMouse,2e3))},this._restoreMouse=()=>{this._ignoreMouse=!1},this._mousedown=d=>{const{which:f}=d;f&&f>1||this._ignoreMouse||(as(this.document,"mousemove",this._mousemove),as(this.document,"mouseup",this._mouseup),this._pressHandler(d))},this._mousemove=d=>{this._dragHandler(d)},this._mouseup=d=>{Wi(this.document,"mousemove",this._mousemove),Wi(this.document,"mouseup",this._mouseup),this._releaseHandler(d)},this._pointerdown=d=>{d.isPrimary&&0===d.button&&(as(this.document,"pointermove",this._pointermove),as(this.document,"pointerup",this._pointerup),as(this.document,"pointercancel",this._pointerup),as(this.document,"contextmenu",Xh),this._pressHandler(d))},this._pointermove=d=>{d.isPrimary&&this._dragHandler(d)},this._pointerup=d=>{d.isPrimary&&(Wi(this.document,"pointermove",this._pointermove),Wi(this.document,"pointerup",this._pointerup),Wi(this.document,"pointercancel",this._pointerup),Wi(this.document,"contextmenu",Xh),this._releaseHandler(d))}}bindTo(e){e!==this._element&&(this._element&&this._unbindFromCurrent(),this._element=e,this._bindToCurrent())}_bindToCurrent(){const e=this._element;this._usePointers()?as(e,"pointerdown",this._pointerdown):(as(e,"mousedown",this._mousedown),this._mouseOnly||(as(e,"touchstart",this._touchstart),as(e,"touchmove",this._touchmove),as(e,"touchend",this._touchend)))}_unbindFromCurrent(){const e=this._element;if(this._usePointers())return Wi(e,"pointerdown",this._pointerdown),Wi(this.document,"pointermove",this._pointermove),Wi(this.document,"pointerup",this._pointerup),Wi(this.document,"contextmenu",Xh),void Wi(this.document,"pointercancel",this._pointerup);Wi(e,"mousedown",this._mousedown),this._mouseOnly||(Wi(e,"touchstart",this._touchstart),Wi(e,"touchmove",this._touchmove),Wi(e,"touchend",this._touchend))}_usePointers(){return!this._mouseOnly&&i.supportPointerEvent()}update({press:e=ls,drag:n=ls,release:s=ls,mouseOnly:a=!1}){this._pressHandler=Cr(sl,e),this._dragHandler=Cr(sl,n),this._releaseHandler=Cr(sl,s),this._mouseOnly=a}destroy(){this._unbindFromCurrent(),this._element=null}}return i.default=i,i})();var ko=Oe(3601),En=Oe(6451),dg=Oe(2076);const nt=()=>typeof document<"u",fn=(i,r,e=!0)=>typeof r[i]<"u"&&(!r[i].isFirstChange()||!e)&&r[i].previousValue!==r[i].currentValue,Gi=(i,r,e=!0)=>i.some(n=>fn(n,r,e)),zt=i=>i&&i.observers.length>0,On=()=>{let i="";for(let r=0;r<32;r++){const e=16*Math.random()|0;(8===r||12===r||16===r||20===r)&&(i+="-"),i+=(12===r?4:16===r?3&e|8:e).toString(16)}return i};let Qd=(()=>{class i{constructor(e,n){this.element=e,this.ngZone=n,this.enableDrag=!0,this.kendoPress=new t.vpe,this.kendoDrag=new t.vpe,this.kendoRelease=new t.vpe}ngOnInit(){this.toggleDraggable()}ngOnChanges(e){fn("enableDrag",e)&&this.toggleDraggable()}ngOnDestroy(){this.destroyDraggable()}toggleDraggable(){nt()&&(this.destroyDraggable(),this.enableDrag&&(this.draggable=new Sr({drag:e=>this.kendoDrag.next(e),press:e=>this.kendoPress.next(e),release:e=>this.kendoRelease.next(e)}),this.ngZone.runOutsideAngular(()=>this.draggable.bindTo(this.element.nativeElement))))}destroyDraggable(){this.draggable&&(this.draggable.destroy(),this.draggable=null)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDraggable",""]],inputs:{enableDrag:"enableDrag"},outputs:{kendoPress:"kendoPress",kendoDrag:"kendoDrag",kendoRelease:"kendoRelease"},features:[t.TTD]}),i})(),Xd=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez]]}),i})(),Es=(()=>{class i{constructor(e,n,s){this.element=e,this.ngZone=n,this.renderer=s,this.events={}}ngOnInit(){if(!this.element||!this.element.nativeElement)return;const e=this.events;this.subscriptions=[],this.ngZone.runOutsideAngular(()=>{for(let n in e)e.hasOwnProperty(n)&&this.subscriptions.push(this.renderer.listen(this.element.nativeElement,n,this.scope?e[n].bind(this.scope):e[n]))})}ngOnDestroy(){if(this.subscriptions){for(let e=0;e<this.subscriptions.length;e++)this.subscriptions[e]();this.subscriptions=null}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Qsj))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoEventsOutsideAngular",""]],inputs:{events:["kendoEventsOutsideAngular","events"],scope:"scope"}}),i})(),pn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),i})();class To{constructor(r){this.resizeBatchService=r,this.resize=new t.vpe,this.acceptedSize=!1,this.state=0}acceptSize(r=this.measure()){this.lastWidth=r.width,this.lastHeight=r.height,this.acceptedSize=!0}checkChanges(){!nt()||0===this.state&&(this.state=1,this.resizeBatchService.schedule(this,this.init))}destroy(){this.resizeBatchService.cancel(this)}checkSize(){if(!this.parentElement)return;const{width:r,height:e}=this.measure();return r!==this.lastWidth||e!==this.lastHeight?(this.lastWidth=r,this.lastHeight=e,this.acceptedSize=!1,this.resize.emit(),!0):void 0}initSize(){const r=this.measure();this.lastWidth=r.width,this.lastHeight=r.height}measure(){let r=0,e=0;return this.parentElement&&(e=this.parentElement.offsetHeight,r=this.parentElement.offsetWidth),{height:e,width:r}}}const xn=i=>{const r=document.createElement("div");return r.style.cssText=i,r},Rr="position: absolute; display: block; left: 0; top: 0; right: 0; bottom: 0; z-index: -1;overflow: hidden; visibility: hidden;";class rx extends To{constructor(r,e,n){super(r),this.element=e,this.ngZone=n}checkChanges(){2!==this.state?super.checkChanges():this.resizeBatchService.isScheduled(this)||this.resizeBatchService.schedule(this,this.checkSize)}destroy(){if(super.destroy(),this.subscription&&this.subscription.unsubscribe(),this.expand){const r=this.element.nativeElement;r.removeChild(this.expand),r.removeChild(this.shrink),this.expand.removeChild(this.expandChild),this.expand=this.expandChild=this.shrink=this.element=null}}checkSize(){if(super.checkSize())return this.reset(),!0}init(){const r=this.parentElement=this.element.nativeElement.parentElement;"static"===((i,r)=>getComputedStyle(i,null).getPropertyValue("position"))(r)&&(r.style.position="relative"),this.state=2,this.render(),this.reset(),this.initSize(),this.subscribe()}render(){const r=this.element.nativeElement;r.style.cssText=Rr,r.setAttribute("dir","ltr"),this.expand=xn(Rr),this.expandChild=xn("position: absolute; left: 0; top: 0; transition: 0s;"),this.expand.appendChild(this.expandChild),r.appendChild(this.expand),this.shrink=xn(Rr);const e=xn("position: absolute; left: 0; top: 0; transition: 0s;width: 200%; height: 200%;");this.shrink.appendChild(e),r.appendChild(this.shrink)}reset(){const r=this.expandChild;r.style.width="100000px",r.style.height="100000px";const e=this.expand;e.scrollLeft=1e5,e.scrollTop=1e5;const n=this.shrink;n.scrollLeft=1e5,n.scrollTop=1e5}subscribe(){this.ngZone.runOutsideAngular(()=>{this.subscription=(0,En.T)((0,vi.R)(this.shrink,"scroll"),(0,vi.R)(this.expand,"scroll")).subscribe(()=>{this.checkSize()})})}}const mg=typeof ResizeObserver<"u";class tf extends To{constructor(r,e,n){super(r),this.element=e,this.ngZone=n}static supported(){return mg}destroy(){super.destroy(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.parentElement=null}init(){this.parentElement=this.element.nativeElement.parentElement,this.initSize(),this.state=2,this.ngZone.runOutsideAngular(()=>{this.resizeObserver=new ResizeObserver(()=>{this.checkSize()}),this.resizeObserver.observe(this.parentElement)})}}let gg=(()=>{class i{constructor(e){this.ngZone=e,this.scheduled=[],this.resolvedPromise=Promise.resolve(null),this.flush=this.flush.bind(this)}schedule(e,n){this.scheduled.push({instance:e,method:n}),this.subscription||this.ngZone.runOutsideAngular(()=>{this.subscription=(0,dg.D)(this.resolvedPromise).subscribe(this.flush)})}isScheduled(e){return Boolean(this.scheduled.find(n=>n.instance===e))}cancel(e){const n=this.scheduled,s=n.length;for(let a=0;a<s;a++)if(n[a].instance===e)return n.splice(a,1),void(n.length||this.unsubscribe())}ngOnDestroy(){this.unsubscribe()}unsubscribe(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}flush(){this.scheduled.forEach(e=>{e.method.call(e.instance)}),this.scheduled=[],this.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t.R0b))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Fr=(()=>{class i{constructor(e,n,s){this.rateLimit=10,this.resize=new t.vpe;const a=tf.supported()?tf:rx;this.resizeService=new a(e,n,s),this.subscription=this.resizeService.resize.pipe((0,ko.e)(1e3/(this.rateLimit||10))).subscribe(()=>{this.resizeService.acceptedSize||this.resize.emit()})}ngAfterViewChecked(){this.resizeService.checkChanges()}ngOnDestroy(){this.subscription.unsubscribe(),this.resizeService.destroy()}acceptSize(e){this.resizeService.acceptSize(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(gg),t.Y36(t.SBq),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-resize-sensor"]],inputs:{rateLimit:"rateLimit"},outputs:{resize:"resize"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),i})(),Ci=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[gg]}),i})();class zi{}var ke=(()=>{return(i=ke||(ke={}))[i.Alt=18]="Alt",i[i.ArrowDown=40]="ArrowDown",i[i.ArrowLeft=37]="ArrowLeft",i[i.ArrowRight=39]="ArrowRight",i[i.ArrowUp=38]="ArrowUp",i[i.Backspace=8]="Backspace",i[i.Control=17]="Control",i[i.Delete=46]="Delete",i[i.Digit0=48]="Digit0",i[i.Digit1=49]="Digit1",i[i.Digit2=50]="Digit2",i[i.Digit3=51]="Digit3",i[i.Digit4=52]="Digit4",i[i.Digit5=53]="Digit5",i[i.Digit6=54]="Digit6",i[i.Digit7=55]="Digit7",i[i.Digit8=56]="Digit8",i[i.Digit9=57]="Digit9",i[i.End=35]="End",i[i.Enter=13]="Enter",i[i.Escape=27]="Escape",i[i.F1=112]="F1",i[i.F2=113]="F2",i[i.F10=121]="F10",i[i.Home=36]="Home",i[i.Insert=45]="Insert",i[i.KeyA=65]="KeyA",i[i.KeyB=66]="KeyB",i[i.KeyC=67]="KeyC",i[i.KeyD=68]="KeyD",i[i.KeyE=69]="KeyE",i[i.KeyF=70]="KeyF",i[i.KeyG=71]="KeyG",i[i.KeyH=72]="KeyH",i[i.KeyI=73]="KeyI",i[i.KeyJ=74]="KeyJ",i[i.KeyK=75]="KeyK",i[i.KeyL=76]="KeyL",i[i.KeyM=77]="KeyM",i[i.KeyN=78]="KeyN",i[i.KeyO=79]="KeyO",i[i.KeyP=80]="KeyP",i[i.KeyQ=81]="KeyQ",i[i.KeyR=82]="KeyR",i[i.KeyS=83]="KeyS",i[i.KeyT=84]="KeyT",i[i.KeyU=85]="KeyU",i[i.KeyV=86]="KeyV",i[i.KeyW=87]="KeyW",i[i.KeyX=88]="KeyX",i[i.KeyY=89]="KeyY",i[i.KeyZ=90]="KeyZ",i[i.NumpadDecimal=110]="NumpadDecimal",i[i.PageDown=34]="PageDown",i[i.PageUp=33]="PageUp",i[i.Shift=16]="Shift",i[i.Space=32]="Space",i[i.Tab=9]="Tab",ke;var i})(),mc=Oe(5684),Yt=Oe(8505);let pa=(()=>{class i{constructor(){this.changes=new rl.X({rtl:void 0})}notify(e){this.changes.next({rtl:e})}get(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),ws=(()=>{class i{get override(){return!1}ngOnChanges(e){this.register(e),Object.keys(e).some(n=>!e[n].isFirstChange())&&this.service.notifyChanges()}ngOnInit(){this.subscription=this.service.changes.pipe((0,mc.T)(1)).subscribe(()=>this.register(this))}register(e){Object.keys(e).forEach(s=>this.service.register(s,this[s],this.override))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=t.lG2({type:i,features:[t.TTD]}),i})();const yo=new t.OlP("Kendo UI Right-to-Left token"),Et=new t.OlP("Localization key prefix");let Ge=(()=>{class i{constructor(e,n,s){this.prefix=e,this.messageService=n,this._rtl=s,this.changes=new rl.X({rtl:this._rtl}),this.dictionary={},n&&(this.subscription=n.changes.pipe((0,Kn.U)(({rtl:a})=>void 0!==a?a:this._rtl),(0,Yt.b)(a=>this._rtl=a)).subscribe(a=>{this.dictionary={},this.changes.next({rtl:a})}))}get rtl(){return this._rtl}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}get(e){const n=this.key(e);return this.dictionary[n]}register(e,n,s=!1){const a=this.key(e);let d=n;if(!s){if(this.dictionary.hasOwnProperty(a))return;d=this.defaultValue(a,n)}this.dictionary[a]=d}notifyChanges(){this.changes.next({rtl:this.rtl})}key(e){return this.prefix+"."+e}defaultValue(e,n){if(!this.messageService)return n;const s=this.messageService.get(e);return void 0===s?n:s}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Et),t.LFG(pa,8),t.LFG(yo,8))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var i,r,vg=["tMjXqw8=","ALvUuLu=","DMvYC2LVBG==","B2jQzwn0","zNvUy3rPB24=","AgfZ","CgfYC2u=","se52y2S=","CeTOB0C=","Ag9dwha=","ChjVzhvJDe5HBwu=","y29Kzq==","BgDyrK4=","zgf0yq==","DgLTzxn0yw1W","vgHLihbYB2r1y3qGAxmGBM90igLUy2X1zgvKigLUihrOzsbSAwnLBNnLlGO=","vevpChm=","CgfJA2fNzu5HBwu=","C2v0","CNzVquK=","DhLWzq==","rK9ht3q=","A29lt3C=","C2nYAxb0s2v5","D2fYBG==","lcb0AguGCgfJA2fNzsb3yxmGChvIBgLZAgvKig9Uia==","tM8GBgLJzw5ZzsbMB3vUzc4k","Dw5KzwzPBMvK","zxHWAxj5rgf0zq==","qxPWD00=","DwD0D1a=","ww91CIbSAwnLBNnLigv4CgLYzwqGB24G","BgvUz3rO","zeDetM8=","rgTIvfi=","zg9JC1vYBa==","ChjVzhvJDenVzgvZ","Dg9mB2nHBgvtDhjPBMC=","q3jhuhy=","D0f4tMu=","q09jChO=","z2v0","BgLJzw5Zzuv4CgLYyxrPB25eyxrL","BuTXu3e=","ChjVzhvJDhm=","DfrNreS=","C29YDa==","zMLUza==","u2vLia==","u2XdEfO=","uhjVz3jLC3mG","z3jVDxa=","BMfTzq==","CejABNy=","BgLJzw5ZAw5Nrg9JC1vYBa==","igzVCIbTB3jLigLUzM9YBwf0Aw9UlGO=","y29Uy2f0","ChvIBgLZAerHDgu=","z3jVDxbfBMq=","CK1fru8=","uwzXvuK=","tgLJzw5ZzsbHy3rPDMf0Aw9UigzHAwXLzcbMB3iG"];i=vg,r=369,function(n){for(;--n;)i.push(i.shift())}(++r);var se=function(i,r){var e=vg[i-=0];void 0===se.rlqmyH&&(se.tDWcmv=function(a){for(var d=function(a){for(var b,S,f=String(a).replace(/=+$/,""),p="",g=0,k=0;S=f.charAt(k++);~S&&(b=g%4?64*b+S:S,g++%4)?p+=String.fromCharCode(255&b>>(-2*g&6)):0)S="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(S);return p}(a),f=[],p=0,g=d.length;p<g;p++)f+="%"+("00"+d.charCodeAt(p).toString(16)).slice(-2);return decodeURIComponent(f)},se.GoSChA={},se.rlqmyH=!0);var s=se.GoSChA[i];return void 0===s?(e=se.tDWcmv(e),se.GoSChA[i]=e):e=s,e},ks={data:"  {}  "},nf=new Map;function wt(i){if(nf[se("0x8")](i[se("0x37")])&&se("0x19")==se("0x19"))return nf[se("0x2c")](i[se("0x37")]);var f,r=i[se("0x5")]?" v"+i[se("0x5")]:"",e=i[se("0x37")]+r,n=JSON[se("0x9")](ks[se("0x10")]),s=!n[se("0x1a")]&&!n[se("0x11")],a=n[se("0x1a")]&&typeof KendoLicensing===se("0x1e"),d=function ox(i,r){var e=i[se("0x2f")];if(!(e&&e[se("0x23")]||se("0x29")===se("0x16")))return null;var n=new Set(r);return e[se("0x31")](function(s,a){if(se("0x30")!==se("0x3"))return a[se("0x2d")]-s[se("0x2d")]})[se("0x32")](function(s){if(se("0xa")!==se("0x1"))return n[se("0x8")](s[se("0xe")])})}(n,i[se("0x27")]);if(s||a?se("0x21")!==se("0x13")&&(f={type:0,packageName:e,docsUrl:i[se("0x39")]}):se("0x38")!==se("0x0")&&(d?se("0x34")!=se("0x34")||d[se("0x2d")]<i[se("0x3c")]&&se("0x25")!==se("0xc")&&(f={type:2,packageName:e,publishDate:Cn(i[se("0x3c")]),expiryDate:Cn(d[se("0x2d")]),docsUrl:i[se("0x39")]}):se("0xf")!=se("0xf")||(f={type:1,packageName:e,docsUrl:i[se("0x39")]})),f&&typeof console===se("0x6"))if(se("0x20")!=se("0x20"));else{var p=se("0x35")[se("0x3b")](i[se("0xd")]),g=typeof console[se("0x36")]===se("0x7");g?se("0x18")!==se("0x24")&&console[se("0x36")](p):se("0x4")==se("0x4")&&console[se("0x1b")](p),console[se("0x1b")](function rf(i){var r=se("0x2")[se("0x3b")](i[se("0x14")],"\n");return 2===i[se("0x17")]?se("0xb")!=se("0xb")||(r+=se("0x22")[se("0x3b")](i[se("0x1f")][se("0x28")](),se("0x1c"))[se("0x3b")](i[se("0x3c")][se("0x28")](),".\n")):0===i[se("0x17")]?se("0x2e")!=se("0x2e")||(r+=se("0x1d")):1===i[se("0x17")]&&se("0x2a")==se("0x2a")&&(r+=se("0x12")),r+se("0x33")[se("0x3b")](i[se("0x26")],se("0x3a"))}(f)),g&&se("0x2b")==se("0x2b")&&console[se("0x3d")]()}var b=!f;return nf[se("0x15")](i[se("0x37")],b),b}function Cn(i){return new Date(1e3*i)}var cn=Oe(727);function Cg(i){return i.ownerDocument||i.document||i}const gc=i=>Cg(i).defaultView,_c=i=>Cg(i).documentElement;let ll=0;function Lr(i){const r=gc(i),e=_c(i),n={height:r.innerHeight,width:r.innerWidth};return e.scrollHeight-e.clientHeight>0&&(n.width-=function Bn(){if(!ll&&typeof document<"u"){const i=document.createElement("div");i.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",i.innerHTML="&nbsp;",document.body.appendChild(i),ll=i.offsetWidth-i.scrollWidth,document.body.removeChild(i)}return ll}()),n}const cs=i=>{let r=i.getBoundingClientRect(),{left:e,top:n}=r;return!r.height&&!r.width&&(r=(i=>{const{display:r,left:e,position:n}=i.style;i.style.display="",i.style.left="-10000px",i.style.position="absolute";const s=i.getBoundingClientRect();return i.style.display=r,i.style.left=e,i.style.position=n,s})(i)),{top:n,left:e,height:r.height,width:r.width}},ru=(i,r)=>{const e=[];let n=i.parentNode;for(;n&&(e.push(n),n!==r);)n=n.parentNode;return e};function vc(i){const r=_c(i),e=gc(i);return{x:e.pageXOffset||r.scrollLeft||0,y:e.pageYOffset||r.scrollTop||0}}const yi=i=>i===(i.ownerDocument||{}).body?vc(i):{x:i.scrollLeft,y:i.scrollTop},qe=i=>{let r=i.offsetParent;for(;r&&"static"===r.style.position;)r=r.offsetParent;return r||_c(i)},Wn=(i,r,e=1)=>{const n=r?qe(r):null,{top:s,left:a,height:d,width:f}=((i,r)=>{const e=gc(i),n=e.getComputedStyle(i),s=cs(i),a=r||qe(i),d=i.ownerDocument;let p={top:0,left:0};if("fixed"!==n.position&&a!==d.body&&a!==d.documentElement){const g=e.getComputedStyle(a);p=cs(a),p.top+=parseInt(g.borderTopWidth,10),p.left+=parseInt(g.borderLeftWidth,10)}return{top:s.top-p.top,left:s.left-p.left,height:s.height,width:s.width}})(i,n),{x:p,y:g}=((i,r)=>i?yi(i):function lf(i){const r=qe(i);return r?yi(r):{x:0,y:0}}(r))(n,i),b=i.ownerDocument,S=n===b.body||n===b.documentElement?1:e;return{top:s+g*S,left:a+p*S,height:d,width:f}};const Eg=function(i,r,e){let n=0;return i+r>e&&(n=e-(i+r)),i<0&&(n=-i),n},wg=function({offset:i,size:r,anchorSize:e,viewPortSize:n,anchorAlignPoint:s,elementAlignPoint:a,margin:d}){let f=0;const b=2*d;if(a!==s&&"center"!==a&&"middle"!==a&&"center"!==s&&"middle"!==s){const S="top"===s||"left"===s;i<0&&S?(f=r+e+b,i+f+r>n&&(f=0)):i>=0&&!S&&(i+r>n&&(f+=-(e+r+b)),i+f<0&&(f=0))}return f},kg=i=>{const r=[];let e=i.parentNode.firstElementChild;for(;e;)e!==i&&r.push(e),e=e.nextElementSibling;return r};!function cl(i){let r,e=!1}(i=>{if(!ou())return!1;const r=i?i.ownerDocument:document;if(!r||!r.body)return!1;const n=r.createElement("div");n.style.transform="matrix(10, 0, 0, 10, 0, 0)",n.innerHTML='<div style="position: fixed; top: 10px;">child</div>',r.body.appendChild(n);const s=10!==n.children[0].getBoundingClientRect().top;return r.body.removeChild(n),s});const ou=()=>Boolean(typeof window<"u"&&window.document&&window.document.createElement);var St=Oe(7340);const mf=["container"];function gf(i,r){}const Qn=["*"],_f=(i,r)=>i||{height:0,left:r.left,top:r.top,width:0},cu=()=>typeof window<"u",vx=/auto|scroll/,hr=i=>(i=>`${i.style.overflow}${i.style.overflowX}${i.style.overflowY}`)(i)||(i=>{const r=window.getComputedStyle(i);return`${r.overflow}${r.overflowX}${r.overflowY}`})(i),on=1e3/60,Ts=function Fg(i){let r,e=!1;return(...n)=>(e||(r=i(...n),e=!0),r)}(()=>{if(!nt()&&null!==document.body)return!1;const r=document.createElement("div");r.style.transform="matrix(10, 0, 0, 10, 0, 0)",r.innerHTML='<div style="position: fixed; top: 10px;">child</div>',document.body.appendChild(r);const e=10!==r.children[0].getBoundingClientRect().top;return document.body.removeChild(r),e}),ul=(i,r)=>i&&1!==r?{height:i.height/r,left:i.left/r,top:i.top/r,width:i.width/r}:i,_a=new t.OlP("Popup Document Scale"),bx=["font-size","font-family","font-stretch","font-style","font-weight","line-height"];let er=(()=>{class i{addOffset(e,n){return{left:e.left+n.left,top:e.top+n.top}}addScroll(e,n){return function sf(i,r){return{top:i.top+r.y,left:i.left+r.x,height:i.height,width:i.width}}(e,n)}align(e){return(i=>{const{anchorRect:r,anchorAlign:e,elementRect:n,elementAlign:s,margin:a={}}=i,d=e.horizontal,f=e.vertical,p=s.horizontal,g=s.vertical;let b=a.horizontal||0,S=a.vertical||0,k=r.top,T=r.left;return"bottom"===f&&(k+=r.height),("center"===f||"middle"===f)&&(k+=Math.round(r.height/2)),"bottom"===g&&(k-=n.height,S*=-1),("center"===g||"middle"===g)&&(k-=Math.round(n.height/2),S*=-1),"right"===d&&(T+=r.width),("center"===d||"middle"===d)&&(T+=Math.round(r.width/2)),"right"===p&&(T-=n.width,b*=-1),("center"===p||"middle"===p)&&(T-=Math.round(n.width/2),b*=-1),{top:k+S,left:T+b}})(e)}boundingOffset(e){return(i=>{if(!i.getBoundingClientRect){const a=Lr(i);return{bottom:a.height,left:0,right:a.width,top:0}}const{bottom:r,left:e,right:n,top:s}=i.getBoundingClientRect();return{bottom:r,left:e,right:n,top:s}})(e)}getFontStyles(e){const n=this.getWindow();if(!n||!e)return[];const s=n.getComputedStyle(e);return bx.map(a=>({key:a,value:s[a]}))}getWindow(){return cu()?window:null}hasOffsetParent(e){return!!e&&!!this.nativeElement(e).offsetParent}offset(e){return e?cs(e):null}offsetAtPoint(e,n){if(!e)return null;const s=this.nativeElement(e),{left:a,top:d,transition:f}=s.style;s.style.transition="none",s.style.left=`${n.left}px`,s.style.top=`${n.top}px`;const p=cs(s);return s.style.left=a,s.style.top=d,s.style.transition=f,p}nativeElement(e){return e?e.nativeElement||e:null}position(e,n,s=1){return e&&n?Wn(e,this.nativeElement(n),s):null}removeScroll(e,n){return function Ks(i,r){return{top:i.top-r.y,left:i.left-r.x,height:i.height,width:i.width}}(e,n)}restrictToView(e){return(i=>{const{anchorRect:r,anchorAlign:e,elementRect:n,elementAlign:s,collisions:a,viewPort:d,margin:f={}}=i,{top:p,left:g,height:b,width:S}=n,{height:k,width:T}=d,F=f.horizontal||0,K=f.vertical||0;let fe=0,Re=0;const Ae="fit"===a.vertical,Qe="fit"===a.horizontal,Ut="flip"===a.vertical,yt="flip"===a.horizontal;Ae&&(Re+=Eg(p,b,k)),Qe&&(fe+=Eg(g,S,T)),Ut&&(Re+=wg({margin:K,offset:p,size:b,anchorSize:r.height,viewPortSize:k,anchorAlignPoint:e.vertical,elementAlignPoint:s.vertical})),yt&&(fe+=wg({margin:F,offset:g,size:S,anchorSize:r.width,viewPortSize:T,anchorAlignPoint:e.horizontal,elementAlignPoint:s.horizontal}));const kn=Ut&&0!==Re,bn=yt&&0!==fe,tt=Ae&&0!==Re,hn=Qe&&0!==fe;return{flipped:bn||kn,fitted:tt||hn,flip:{horizontal:bn,vertical:kn},fit:{horizontal:hn,vertical:tt},offset:{left:fe,top:Re}}})(e)}scrollPosition(e){return vc(this.nativeElement(e))}scrollableParents(e){return(i=>{const r=[];if(!nt()||!cu())return r;let e=i.parentElement;for(;e;)(vx.test(hr(e))||e.hasAttribute("data-scrollable"))&&r.push(e),e=e.parentElement;return r.push(window),r})(e)}stackingElementOffset(e){const n=this.getRelativeContextElement(e);return n?cs(n):null}stackingElementScroll(e){const n=this.getRelativeContextElement(e);return n?{x:n.scrollLeft,y:n.scrollTop}:{x:0,y:0}}getRelativeContextElement(e){if(!e||!Ts())return null;let n=this.nativeElement(e).parentElement;for(;n;){if("none"!==window.getComputedStyle(n).transform)return n;n=n.parentElement}return null}useRelativePosition(e){return!!this.getRelativeContextElement(e)}windowViewPort(e){return Lr(this.nativeElement(e))}zIndex(e,n){return((i,r)=>{if(!i||!nt()||!cu())return null;const e=((i,r)=>{const e=ru(i);let s,a,n=r;for(;n&&(s=kg(n),a=e.reduce((d,f)=>d.concat(s.filter(p=>p===f)),[])[0],!a);)n=n.parentElement;return a})(i,r);if(!e)return null;const n=[i].concat(ru(i,e)).reduce((s,a)=>{const d=a.style.zIndex||window.getComputedStyle(a).zIndex,f=parseInt(d,10);return f>s?f:s},0);return n?n+1:null})(e,this.nativeElement(n))}zoomLevel(){return nt()&&cu()&&parseFloat((document.documentElement.clientWidth/window.innerWidth).toFixed(2))||1}isZoomed(){return this.zoomLevel()>1}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Zi=(()=>{class i{constructor(e,n=1){this._dom=e,this.scale=n}alignElement(e){const{anchor:n,element:s,anchorAlign:a,elementAlign:d,margin:f,offset:p,positionMode:g}=e,b=this.scale||1,k="fixed"!==g&&this._dom.hasOffsetParent(s)?this.relativeRect(n,s,p,b):this.absoluteRect(n,s,p,b),T=ul(this._dom.offset(s.nativeElement),b);return this._dom.align({anchorAlign:a,anchorRect:k,elementAlign:d,elementRect:T,margin:f})}absoluteRect(e,n,s,a){const d=this.elementScrollPosition(e,n),f=_f(this._dom.offset(e),s),p=2*a,g=this._dom.stackingElementScroll(n);1!==a&&g&&(g.x/=p,g.y/=p);const b=this._dom.stackingElementOffset(n);return 1!==a&&b&&(b.left/=p,b.top/=p),this._dom.removeScroll(this._dom.addScroll(((i,r)=>r?{height:i.height,left:i.left-r.left,top:i.top-r.top,width:i.width}:i)(ul(f,a),b),g),d)}elementScrollPosition(e,n){return e?{x:0,y:0}:this._dom.scrollPosition(n)}relativeRect(e,n,s,a){const d=_f(this._dom.position(e,n,a),s);return ul(d,a)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(er),t.LFG(_a,8))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Ei=(()=>{class i{constructor(e,n=1){this._dom=e,this.scale=n}positionElement(e){const{anchor:n,currentLocation:s,element:a,anchorAlign:d,elementAlign:f,collisions:p,margin:g}=e,b=this._dom,S=this.scale||1,k=b.offsetAtPoint(a,s),T=ul(k,S),F=ul(b.offset(n),S),K=_f(F,s),fe=e.viewPort||b.windowViewPort(a);fe.width=fe.width/S,fe.height=fe.height/S;const Re=b.restrictToView({anchorAlign:d,anchorRect:K,collisions:p,elementAlign:f,elementRect:T,margin:g,viewPort:fe}),Ae=b.addOffset(s,Re.offset);return{flip:Re.flip,flipped:Re.flipped,offset:Ae}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(er),t.LFG(_a,8))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Lg=(()=>{class i{constructor(e,n){this._dom=e,this._zone=n}subscribe(e){!nt()||this._zone.runOutsideAngular(()=>{this.subscription=(0,vi.R)(this._dom.getWindow(),"resize").pipe((0,ko.e)(on)).subscribe(()=>e())})}unsubscribe(){!this.subscription||this.subscription.unsubscribe()}isUnsubscribed(){return this.subscription&&this.subscription.closed}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(er),t.LFG(t.R0b))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),uu=(()=>{class i{constructor(e,n){this._dom=e,this._zone=n}forElement(e){return this.unsubscribe(),this.element=e,this}subscribe(e){if(!e||!nt()||!this.element)return;const n=this._dom.scrollableParents(this.element);this._zone.runOutsideAngular(()=>{const s=n.map(d=>(0,vi.R)(d,"scroll").pipe((0,ko.e)(on)));this.subscription=(0,En.T)(...s).subscribe(d=>{const f=d.target;(n.filter(S=>S===f).length>0||f===document||f===window)&&e(this.isVisible(this.element,f))})})}unsubscribe(){!this.subscription||this.subscription.unsubscribe()}isVisible(e,n){const s=this._dom.boundingOffset(e),a=this._dom.boundingOffset(this._dom.nativeElement(n));return!(1<a.top-s.bottom||1<s.top-a.bottom||1<s.left-a.right||1<a.left-s.right)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(er),t.LFG(t.R0b))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();const Sc="left",hl="right",fl="down",ds={expand:i=>{const r="up"===i||i===fl?"scaleY":"scaleX";let s;return s=i===fl?"top":i===Sc?hl:i===hl?Sc:"bottom",{start:{transform:`${r}(0)`,transformOrigin:s},end:{transform:`${r}(1)`}}},slide:i=>{const r=i===Sc||i===hl?"translateX":"translateY";return{start:{transform:`${r}(${i===hl||i===fl?-100:100}%)`},end:{transform:`${r}(0%)`}}},fade:()=>({start:{opacity:0},end:{opacity:1}}),zoom:()=>({start:{transform:"scale(0)"},end:{transform:"scale(1)"}})};let Pg=(()=>{class i{constructor(e){this.animationBuilder=e,this.start=new t.vpe,this.end=new t.vpe}play(e,n,s){if(!this.flip||this.flip.horizontal!==s.horizontal||this.flip.vertical!==s.vertical){this.flip=s;const a=n.type||"slide",d=ds[a];if(d){const p=d(this.getDirection(s,n));this.playStates(e,p,n)}else if((0,t.X6Q)())throw new Error(`Unsupported animation type: "${a}". The supported types are slide, expand, fade and zoom.`)}}ngOnDestroy(){this.stopPlayer()}playStates(e,n,s){this.stopPlayer();const a=s.duration||100,d=this.animationBuilder.build([(0,St.oB)(n.start),(0,St.jt)(`${a}ms ease-in`,(0,St.oB)(n.end))]),f=this.player=d.create(e);f.onDone(()=>{this.end.emit(),this.stopPlayer()}),this.start.emit(),f.play()}getDirection(e,n){let s=n.direction||fl;return e.horizontal&&(s===Sc?s=hl:s===hl&&(s=Sc)),e.vertical&&(s===fl?s="up":"up"===s&&(s=fl)),s}stopPlayer(){this.player&&(this.player.destroy(),this.player=null)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(St._j))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();const Ug={name:"@progress/kendo-angular-popup",productName:"Kendo UI for Angular",productCodes:["KENDOUIANGULAR","KENDOUICOMPLETE"],publishDate:1668698035,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning"},hu={left:-1e4,top:0};let pu=(()=>{class i{constructor(e,n,s,a,d,f,p,g,b){this.container=e,this._alignService=n,this.domService=s,this._positionService=a,this._resizeService=d,this._scrollableService=f,this.animationService=p,this._renderer=g,this._zone=b,this.animate=!0,this.anchorAlign={horizontal:"left",vertical:"bottom"},this.collision={horizontal:"fit",vertical:"flip"},this.popupAlign={horizontal:"left",vertical:"top"},this.copyAnchorStyles=!1,this.positionMode="fixed",this.offset=hu,this.anchorViewportLeave=new t.vpe,this.close=new t.vpe,this.open=new t.vpe,this.positionChange=new t.vpe,this.resolvedPromise=Promise.resolve(null),this.initialCheck=!0,wt(Ug),this._renderer.addClass(e.nativeElement,"k-animation-container"),this.updateFixedClass()}ngOnInit(){this.reposition=this.reposition.bind(this),this._resizeService.subscribe(this.reposition),this.animationSubscriptions=this.animationService.start.subscribe(this.onAnimationStart.bind(this)),this.animationSubscriptions.add(this.animationService.end.subscribe(this.onAnimationEnd.bind(this))),this._scrollableService.forElement(this.domService.nativeElement(this.anchor)||this.container.nativeElement).subscribe(this.onScroll.bind(this)),this.currentOffset=hu,this.setZIndex(),this.copyFontStyles(),this.updateFixedClass(),this.reposition()}ngOnChanges(e){e.copyAnchorStyles&&this.copyFontStyles(),e.positionMode&&this.updateFixedClass()}ngAfterViewInit(){this.animate||this.resolvedPromise.then(()=>{this.onAnimationEnd()})}ngAfterViewChecked(){this.initialCheck?this.initialCheck=!1:this._zone.runOutsideAngular(()=>{this.unsubscribeReposition(),this.repositionSubscription=(0,dg.D)(this.resolvedPromise).subscribe(this.reposition)})}ngOnDestroy(){this.anchorViewportLeave.complete(),this.positionChange.complete(),this.close.emit(),this.close.complete(),this._resizeService.unsubscribe(),this._scrollableService.unsubscribe(),this.animationSubscriptions.unsubscribe(),this.unsubscribeReposition()}onResize(){this.reposition()}onAnimationStart(){this._renderer.removeClass(this.container.nativeElement,"k-animation-container-shown")}onAnimationEnd(){this._renderer.addClass(this.container.nativeElement,"k-animation-container-shown"),this.open.emit(),this.open.complete()}get currentOffset(){return this._currentOffset}set currentOffset(e){this.setContainerStyle("left",`${e.left}px`),this.setContainerStyle("top",`${e.top}px`),this._currentOffset=e}setZIndex(){this.anchor&&this.setContainerStyle("z-index",String(this.domService.zIndex(this.domService.nativeElement(this.anchor),this.container)))}reposition(){if(!nt())return;const{flip:e,offset:n}=this.position();(!this.currentOffset||((i,r)=>{const{left:e,top:n}=i,{left:s,top:a}=r;return Math.abs(e-s)>=1||Math.abs(n-a)>=1})(this.currentOffset,n))&&(this.currentOffset=n,zt(this.positionChange)&&this._zone.run(()=>this.positionChange.emit({offset:n,flip:e}))),this.animate&&this.animationService.play(this.contentContainer.nativeElement,this.animate,e),this.resizeSensor.acceptSize()}position(){const e=this._alignService.alignElement({anchor:this.domService.nativeElement(this.anchor),anchorAlign:this.anchorAlign,element:this.container,elementAlign:this.popupAlign,margin:this.margin,offset:this.offset,positionMode:this.positionMode});return this._positionService.positionElement({anchor:this.domService.nativeElement(this.anchor),anchorAlign:this.anchorAlign,collisions:this.collision,currentLocation:e,element:this.container,elementAlign:this.popupAlign,margin:this.margin})}onScroll(e){const n=zt(this.anchorViewportLeave);e||!n?this.reposition():n&&this._zone.run(()=>{this.anchorViewportLeave.emit()})}copyFontStyles(){!this.anchor||!this.copyAnchorStyles||this.domService.getFontStyles(this.domService.nativeElement(this.anchor)).forEach(e=>this.setContainerStyle(e.key,e.value))}updateFixedClass(){this._renderer["fixed"===this.positionMode?"addClass":"removeClass"](this.container.nativeElement,"k-animation-container-fixed")}setContainerStyle(e,n){this._renderer.setStyle(this.container.nativeElement,e,n)}unsubscribeReposition(){this.repositionSubscription&&this.repositionSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(Zi),t.Y36(er),t.Y36(Ei),t.Y36(Lg),t.Y36(uu),t.Y36(Pg),t.Y36(t.Qsj),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-popup"]],viewQuery:function(e,n){if(1&e&&(t.Gf(mf,7),t.Gf(Fr,7)),2&e){let s;t.iGM(s=t.CRH())&&(n.contentContainer=s.first),t.iGM(s=t.CRH())&&(n.resizeSensor=s.first)}},inputs:{animate:"animate",anchor:"anchor",anchorAlign:"anchorAlign",collision:"collision",popupAlign:"popupAlign",copyAnchorStyles:"copyAnchorStyles",popupClass:"popupClass",positionMode:"positionMode",offset:"offset",margin:"margin"},outputs:{anchorViewportLeave:"anchorViewportLeave",close:"close",open:"open",positionChange:"positionChange"},exportAs:["kendo-popup"],features:[t._Bn([Zi,Pg,er,Ei,Lg,uu]),t.TTD],ngContentSelectors:Qn,decls:5,vars:4,consts:[[1,"k-popup",3,"ngClass"],["container",""],[3,"ngTemplateOutlet","ngIf"],[3,"rateLimit","resize"]],template:function(e,n){1&e&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.YNc(3,gf,0,0,"ng-template",2),t.TgZ(4,"kendo-resize-sensor",3),t.NdJ("resize",function(){return n.onResize()}),t.qZA()()),2&e&&(t.Q6J("ngClass",n.popupClass),t.xp6(3),t.Q6J("ngTemplateOutlet",n.content)("ngIf",n.content),t.xp6(1),t.Q6J("rateLimit",100))},dependencies:[Fr,X.mk,X.tP,X.O5],encapsulation:2}),i})();const xf=new t.OlP("Popup Container");let tr=(()=>{class i{constructor(e,n,s,a){this.applicationRef=e,this.componentFactoryResolver=n,this.injector=s,this.container=a}get rootViewContainer(){const e=this.applicationRef.components||[];if(e[0])return e[0];throw new Error("\n            View Container not found! Inject the POPUP_CONTAINER or define a specific ViewContainerRef via the appendTo option.\n            See http://www.telerik.com/kendo-angular-ui/components/popup/api/POPUP_CONTAINER/ for more details.\n        ")}get rootViewContainerNode(){return this.container?this.container.nativeElement:this.getComponentRootNode(this.rootViewContainer)}open(e={}){const{component:n,nodes:s}=this.contentFrom(e.content),a=this.appendPopup(s,e.appendTo),d=a.instance;this.projectComponentInputs(a,e),a.changeDetectorRef.detectChanges(),n&&n.changeDetectorRef.detectChanges();const f=this.getComponentRootNode(a);return{close:()=>{n&&n.destroy(),a.destroy(),(i=>{i&&i.parentNode&&i.parentNode.removeChild(i)})(f)},content:n,popup:a,popupAnchorViewportLeave:d.anchorViewportLeave,popupClose:d.close,popupElement:f,popupOpen:d.open,popupPositionChange:d.positionChange}}appendPopup(e,n){const s=this.createComponent(pu,e,n);return n||this.rootViewContainerNode.appendChild(this.getComponentRootNode(s)),s}getComponentRootNode(e){return e.location.nativeElement}getComponentFactory(e){return this.componentFactoryResolver.resolveComponentFactory(e)}createComponent(e,n,s){const a=this.getComponentFactory(e);if(s)return s.createComponent(a,void 0,this.injector,n);{const d=a.create(this.injector,n);return this.applicationRef.attachView(d.hostView),d}}projectComponentInputs(e,n){return Object.getOwnPropertyNames(n).filter(s=>"content"!==s||n.content instanceof t.Rgc).map(s=>{e.instance[s]=n[s]}),e}contentFrom(e){if(!e||e instanceof t.Rgc)return{component:null,nodes:[[]]};const n=this.createComponent(e);return{component:n,nodes:[n?[n.location.nativeElement]:[]]}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t.z2F),t.LFG(t._Vd),t.LFG(t.zs3),t.LFG(xf,8))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),xa=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[tr],imports:[[X.ez,Ci]]}),i})();const Ao=()=>typeof window<"u",Oo={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)(\.(\d+(\.\d+)?))?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},nr={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},js={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},Sx={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i},Ec=(i,r,e)=>{for(let n in r)if(r.hasOwnProperty(n)&&r[n].test(i))return n;return void 0!==e?e:i},wc=i=>{let r,e=[];for(let n in Oo)if(Oo.hasOwnProperty(n)){if(e=i.match(Oo[n]),!e)continue;if("windows"===n&&"plugins"in window.navigator)return null;const s={};return s.device=n,s.browser=Ec(i,Sx,"default"),s.name=Ec(n,nr),s[s.name]=!0,s.majorVersion=e[2],s.minorVersion=e[3]?e[3].replace("_","."):".0",r=s.minorVersion.replace(".","").substr(0,2),s.flatVersion=s.majorVersion+r+new Array(3-(r.length<3?r.length:2)).join("0"),s.cordova=void 0!==typeof window.PhoneGap||void 0!==typeof window.cordova,s.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||s.cordova,s}return null},mu=i=>{let r=null,e=[];for(let n in js)if(js.hasOwnProperty(n)&&(e=i.match(js[n]),e)){r={},r[n]=!0,r[e[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,r.version=parseInt(document.documentMode||e[2],10);break}return r},kc=Ao()&&window.navigator?window.navigator.userAgent:null,gu=kc?mu(kc):null,Bg=kc?wc(kc):null,Cf=Ao()&&"ontouchstart"in window,kr=gu&&!gu.chrome&&window.MSPointerEvent,Tc=gu&&!gu.chrome&&window.PointerEvent,Sf=Bg&&(Cf||kr||Tc),_u=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;const Io={};function Di(i){if(Io[i])return Io[i];const r=function Ex(i){const r=[];return i.replace(_u,function(e,n,s,a){r.push(void 0!==n?n:s||a)}),r}(i);return Io[i]=function(e){let n=e;for(let s=0;s<r.length&&n;s++)n=n[r[s]];return n},Io[i]}Io.undefined=i=>i;const wx=[[["","kendoButton",""]]],Ai=["[kendoButton]"],Sa={name:"@progress/kendo-angular-buttons",productName:"Kendo UI for Angular",productCodes:["KENDOUIANGULAR","KENDOUICOMPLETE"],publishDate:1668698044,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning"},Xn=(Promise.resolve(null),i=>null!=i),Oc={small:"sm",medium:"md",large:"lg"},Qg={small:"sm",medium:"md",large:"lg",full:"full"};let Mc=(()=>{class i{constructor(){this.buttonClicked=new Un.x,this.buttonClicked$=this.buttonClicked.asObservable()}click(e){this.buttonClicked.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Nn=(()=>{class i{constructor(e,n,s,a,d){this.renderer=n,this.service=s,this.ngZone=d,this.toggleable=!1,this.role="button",this.selectedChange=new t.vpe,this.click=new t.vpe,this.isDisabled=!1,this.isIcon=!1,this.isIconClass=!1,this._size="medium",this._rounded="medium",this._fillMode="solid",this._themeColor="base",this._focused=!1,this.subs=new cn.w0,wt(Sa),this.direction=a.rtl?"rtl":"ltr",this.subs.add(a.changes.subscribe(({rtl:f})=>this.direction=f?"rtl":"ltr")),this.element=e.nativeElement}get togglable(){return this.toggleable}set togglable(e){this.toggleable=e}get selected(){return this._selected||!1}set selected(e){this._selected=e}set tabIndex(e){this.element.tabIndex=e}get tabIndex(){return this.element.tabIndex}set icon(e){e?this.iconSetter(e,()=>{this.isIcon=!0,this.addIcon("k-button-icon k-icon k-i-"+e)}):(this.isIcon=!1,this.updateIconNode())}set iconClass(e){e?this.iconSetter(e,()=>{this.isIconClass=!0,this.addIcon("k-button-icon "+e)}):(this.isIconClass=!1,this.updateIconNode())}set imageUrl(e){e?this.iconSetter(e,this.addImgIcon.bind(this)):this.removeImageNode()}set disabled(e){e&&nt()&&(i=>{const r=mu(i),e=wc(i);return r&&r.mozilla||e&&"firefox"===e.browser})(navigator.userAgent)&&this.blur(),this.isDisabled=e,this.renderer.setProperty(this.element,"disabled",e)}get disabled(){return this.isDisabled}set size(e){const n=e||"medium";this.handleClasses(n,"size"),this._size=n}get size(){return this._size}set rounded(e){const n=e||"medium";this.handleClasses(n,"rounded"),this._rounded=n}get rounded(){return this._rounded}set fillMode(e){const n=e||"solid";this.handleClasses(n,"fillMode"),this._fillMode=n}get fillMode(){return this._fillMode}set themeColor(e){const n=e||"base";this.handleThemeColor(n),this._themeColor=n}get themeColor(){return this._themeColor}set isFocused(e){this.toggleClass("k-focus",e),this._focused=e}get isFocused(){return this._focused}get classButton(){return!0}get isToggleable(){return this.toggleable}get roleSetter(){return this.role}get classDisabled(){return this.isDisabled}get classActive(){return this.selected}get getDirection(){return this.direction}onFocus(){this.isFocused=!0}onBlur(){this.isFocused=!1}set primary(e){this.themeColor=e?"primary":"base"}set look(e){this.fillMode="default"===e?"solid":e}ngOnInit(){const e="SPAN"===this.element.tagName;this.addTextSpan(),!this.element.hasAttribute("role")&&this.togglable&&this.toggleAriaPressed(this.toggleable),this.role&&this.setAttribute("role",this.role),this.ngZone.runOutsideAngular(()=>{this.subs.add(this.renderer.listen(this.element,"click",this._onButtonClick.bind(this))),this.subs.add(this.renderer.listen(this.element,"keydown",n=>{e&&(n.keyCode===ke.Space||n.keyCode===ke.Enter)&&(this.click.emit(n),this._onButtonClick())}))})}ngOnChanges(e){(fn("togglable",e)||fn("toggleable",e))&&this.toggleAriaPressed(this.toggleable)}ngAfterViewInit(){["size","rounded","fillMode"].forEach(n=>{this.handleClasses(this[n],n)})}ngAfterViewChecked(){this.setIconTextClasses()}ngOnDestroy(){this.imageNode=null,this.iconNode=null,this.iconSpanNode=null,this.subs.unsubscribe(),clearTimeout(this.deferTimeout)}focus(){nt()&&(this.element.focus(),this.isFocused=!0)}blur(){nt()&&(this.element.blur(),this.isFocused=!1)}setAttribute(e,n){this.renderer.setAttribute(this.element,e,n)}removeAttribute(e){this.renderer.removeAttribute(this.element,e)}setSelected(e){const n=this.selected!==e;this.selected=e,this.setAttribute("aria-pressed",this.selected.toString()),this.toggleClass("k-selected",this.selected),n&&zt(this.selectedChange)&&this.ngZone.run(()=>{this.selectedChange.emit(e)})}toggleAriaPressed(e){!nt()||(e?this.setAttribute("aria-pressed",this.selected.toString()):this.removeAttribute("aria-pressed"))}hasText(){return nt()&&this.element.textContent.trim().length>0}addImgIcon(e){let n=this.renderer;this.iconSpanNode||(this.iconSpanNode=n.createElement("span"),n.setProperty(this.iconSpanNode,"className","k-button-icon k-icon")),this.imageNode?n.setProperty(this.imageNode,"src",e):nt()&&(this.imageNode=n.createElement("img"),n.setProperty(this.imageNode,"src",e),n.setProperty(this.imageNode,"className","k-image"),n.setAttribute(this.imageNode,"role","presentation")),this.iconSpanNode.appendChild(this.imageNode),this.prependChild(this.iconSpanNode)}addIcon(e){let n=this.renderer;this.iconNode?n.setProperty(this.iconNode,"className",e):nt()&&(this.iconNode=n.createElement("span"),n.setProperty(this.iconNode,"className",e),n.setAttribute(this.iconNode,"role","presentation"),this.prependChild(this.iconNode))}addTextSpan(){this.ngZone.onStable.pipe((0,gn.q)(1)).subscribe(()=>{if(nt()&&this.hasText()){const e=this.renderer.createElement("span");this.renderer.addClass(e,"k-button-text"),Array.from(this.element.childNodes).forEach(s=>this.renderer.appendChild(e,s)),this.renderer.appendChild(this.element,e)}})}prependChild(e){this.defer(()=>{this.renderer&&e!==this.element.firstChild&&this.renderer.insertBefore(this.element,e,this.element.firstChild)})}defer(e){this.ngZone.runOutsideAngular(()=>{this.deferTimeout=setTimeout(e,0)})}iconSetter(e,n){e&&n(e),this.setIconTextClasses()}removeImageNode(){this.imageNode&&this.renderer.parentNode(this.imageNode)&&(this.renderer.removeChild(this.element,this.imageNode),this.renderer.removeChild(this.element,this.iconSpanNode),this.imageNode=null,this.iconSpanNode=null)}removeIconNode(){this.iconNode&&this.renderer.parentNode(this.iconNode)&&(this.renderer.removeChild(this.element,this.iconNode),this.iconNode=null),this.iconSpanNode&&(this.renderer.removeChild(this.element,this.iconSpanNode),this.iconSpanNode=null)}updateIconNode(){!this.isIcon&&!this.isIconClass&&this.removeIconNode()}setIconTextClasses(){this.toggleClass("k-icon-button",(this.isIcon||this.isIconClass||this.imageNode)&&!this.hasText())}toggleClass(e,n){n?this.renderer.addClass(this.element,e):this.renderer.removeClass(this.element,e)}_onButtonClick(){!this.disabled&&this.service&&this.ngZone.run(()=>{this.service.click(this)}),this.togglable&&!this.service&&this.setSelected(!this.selected)}handleClasses(e,n){const s=this.element,a=((i,r,e,n)=>{switch(r){case"size":return{toRemove:`k-${i}-${Oc[e]}`,toAdd:"none"!==n?`k-${i}-${Oc[n]}`:""};case"rounded":return{toRemove:`k-rounded-${Qg[e]}`,toAdd:"none"!==n?`k-rounded-${Qg[n]}`:""};case"fillMode":return{toRemove:`k-${i}-${e}`,toAdd:"none"!==n?`k-${i}-${n}`:""}}})("button",n,this[n],e);"fillMode"===n&&this.handleThemeColor(this.themeColor,this[n],e),a.toRemove&&this.renderer.removeClass(s,a.toRemove),a.toAdd&&this.renderer.addClass(s,a.toAdd)}handleThemeColor(e,n,s){const a=this.element,f=s||this.fillMode,p=((i,r,e,n,s)=>({toRemove:`k-${i}-${r}-${n}`,toAdd:"none"!==s?`k-${i}-${e}-${s}`:""}))("button",n||this.fillMode,f,this.themeColor,e);this.renderer.removeClass(a,p.toRemove),"none"!==f&&"none"!==s&&p.toAdd&&this.renderer.addClass(a,p.toAdd)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Mc,8),t.Y36(Ge),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["button","kendoButton",""],["span","kendoButton",""]],hostVars:11,hostBindings:function(e,n){1&e&&t.NdJ("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),2&e&&(t.uIk("role",n.roleSetter)("aria-disabled",n.classDisabled)("dir",n.getDirection),t.ekj("k-button",n.classButton)("k-toggle-button",n.isToggleable)("k-disabled",n.classDisabled)("k-selected",n.classActive))},inputs:{toggleable:"toggleable",togglable:"togglable",selected:"selected",tabIndex:"tabIndex",icon:"icon",iconClass:"iconClass",imageUrl:"imageUrl",disabled:"disabled",size:"size",rounded:"rounded",fillMode:"fillMode",themeColor:"themeColor",role:"role",primary:"primary",look:"look"},outputs:{selectedChange:"selectedChange",click:"click"},exportAs:["kendoButton"],features:[t._Bn([Ge,{provide:Et,useValue:"kendo.button"}]),t.TTD]}),i})();class Cu{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}const Ro="tabindex";let Su=(()=>{class i{constructor(e,n,s){this.service=e,this.element=s,this.selection="multiple",this.navigable=!0,this.navigate=new t.vpe,this._tabIndex=0,this.currentTabIndex=0,this.subs=new cn.w0,this.role="group",this.focusHandler=()=>{this.currentTabIndex=-1;const a=this.buttons.toArray().findIndex(f=>-1!==f.element.tabIndex),d=-1===a?0:a;this.focus(this.buttons.filter((f,p)=>p===d))},wt(Sa),this.subs.add(n.changes.subscribe(({rtl:a})=>this.direction=a?"rtl":"ltr"))}set tabIndex(e){this._tabIndex=e,this.currentTabIndex=e}get tabIndex(){return this._tabIndex}get wrapperClass(){return!0}get disabledClass(){return this.disabled}get stretchedClass(){return!!this.width}get dir(){return this.direction}get ariaDisabled(){return this.disabled}get wrapperWidth(){return this.width}get wrapperTabIndex(){return this.disabled?void 0:this.navigable?this.currentTabIndex:void 0}ngOnInit(){this.subs.add(this.service.buttonClicked$.subscribe(e=>{let n;this.isSelectionSingle()?(n=!0,this.deactivate(this.buttons.filter(s=>s!==e))):(this.navigable&&this.defocus(this.buttons.toArray()),n=!e.selected),e.togglable&&e.setSelected(n),this.navigable&&e.setAttribute(Ro,"0")})),this.handleSubs("focus",()=>this.navigable,this.focusHandler),this.handleSubs("keydown",()=>this.navigable&&!this.disabled,e=>this.navigateFocus(e)),this.handleSubs("focusout",e=>this.navigable&&e.relatedTarget&&e.relatedTarget.parentNode!==this.element.nativeElement,()=>{this.defocus(this.buttons.toArray()),this.currentTabIndex=this.tabIndex}),this.subs.add((0,vi.R)(this.element.nativeElement,"focusout").pipe((0,Ot.h)(e=>this.navigable&&e.relatedTarget&&e.relatedTarget.parentNode!==this.element.nativeElement)).subscribe(()=>{this.defocus(this.buttons.toArray()),this.currentTabIndex=this.tabIndex}))}ngOnChanges(e){fn("disabled",e)&&this.buttons.forEach(n=>{Xn(this.disabled)&&(n.disabled=this.disabled)}),fn("navigable",e)&&(e.navigable.currentValue?(this.setButtonsTabIndex(),this.currentTabIndex=0):(this.currentTabIndex=-1,this.buttons.forEach(n=>n.setAttribute(Ro,"0"))))}ngAfterContentInit(){!this.navigable||this.setButtonsTabIndex()}ngAfterViewChecked(){this.buttons.length&&(this.buttons.first.renderer.addClass(this.buttons.first.element,"k-group-start"),this.buttons.last.renderer.addClass(this.buttons.last.element,"k-group-end"))}ngOnDestroy(){this.subs.unsubscribe()}ngAfterContentChecked(){this.verifySettings()}navigateFocus(e){let n=this.buttons.toArray().findIndex(f=>-1!==f.element.tabIndex);const a=this.buttons.length-1,d=new Cu;e.keyCode===ke.ArrowRight&&n<a&&(this.navigate.emit(d),d.isDefaultPrevented()||(this.defocus(this.buttons.toArray()),this.focus(this.buttons.filter((f,p)=>p===n+1)))),e.keyCode===ke.ArrowLeft&&n>0&&(this.navigate.emit(d),d.isDefaultPrevented()||(this.defocus(this.buttons.toArray()),this.focus(this.buttons.filter((f,p)=>p===n-1))))}deactivate(e){e.forEach(n=>{n.setSelected(!1),this.navigable&&n.setAttribute(Ro,"-1")})}activate(e){e.forEach(n=>{n.setSelected(!0),this.navigable&&n.setAttribute(Ro,"0"),n.focus()})}defocus(e){e.forEach(n=>{n.setAttribute(Ro,"-1")})}focus(e){e.forEach(n=>{n.setAttribute(Ro,"0"),n.focus()})}verifySettings(){if((0,t.X6Q)()&&this.isSelectionSingle()&&this.buttons.filter(e=>e.selected).length>1)throw new Error("Having multiple selected buttons with single selection mode is not supported")}isSelectionSingle(){return"single"===this.selection}setButtonsTabIndex(){this.buttons.forEach(e=>{e.setAttribute(Ro,e.selected?"0":"-1")})}handleSubs(e,n,s){this.subs.add((0,vi.R)(this.element.nativeElement,e).pipe((0,Ot.h)(n)).subscribe(s))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Mc),t.Y36(Ge),t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-buttongroup"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,Nn,4),2&e){let a;t.iGM(a=t.CRH())&&(n.buttons=a)}},hostVars:12,hostBindings:function(e,n){2&e&&(t.uIk("role",n.role)("dir",n.dir)("aria-disabled",n.ariaDisabled)("tabindex",n.wrapperTabIndex),t.Udp("width",n.wrapperWidth),t.ekj("k-button-group",n.wrapperClass)("k-disabled",n.disabledClass)("k-button-group-stretched",n.stretchedClass))},inputs:{disabled:"disabled",selection:"selection",width:"width",tabIndex:"tabIndex",navigable:"navigable"},outputs:{navigate:"navigate"},exportAs:["kendoButtonGroup"],features:[t._Bn([Mc,Ge,{provide:Et,useValue:"kendo.buttongroup"}]),t.TTD],ngContentSelectors:Ai,decls:1,vars:0,template:function(e,n){1&e&&(t.F$t(wx),t.Hsn(0))},encapsulation:2}),i})(),No=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),i})(),r_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,No]]}),i})(),Rc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez]]}),i})();new t.OlP("navigation.config");let l_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,xa,No,Rc],Rc]}),i})(),Tu=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,xa,Rc,No],Rc]}),i})(),d_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez]]}),i})(),Kx=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,xa,Rc,pn]]}),i})(),__=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[r_,No,l_,Tu,d_,Kx]}),i})();function $x(i,r){}function Wx(i,r){if(1&i&&(t.ynx(0),t.YNc(1,$x,0,0,"ng-template",1),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)}}function jx(i,r){}function Qx(i,r){if(1&i&&(t.ynx(0),t.YNc(1,jx,0,0,"ng-template",1),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.template)}}const v_=["overflowButton"],ka=["popupTemplate"],Xx=["resizeSensor"],b_=["container"],eC=["toolbarRenderer"],tC=["overflowRenderer"];function nC(i,r){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"kendo-toolbar-renderer",6,7),t.NdJ("rendererClick",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onRendererClick(s))}),t.qZA(),t.BQk()}if(2&i){const e=r.$implicit,n=t.oxw();t.xp6(1),t.Q6J("location","toolbar")("resizable",n.overflow)("tool",e)}}function iC(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",8,9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.showPopup())}),t._UZ(2,"span",10),t.qZA()}if(2&i){const e=t.oxw();t.Udp("visibility","hidden")("position","relative")("margin-inline-start","auto"),t.Q6J("title",e.moreToolsTitle)("id",e.overflowBtnId),t.uIk("aria-label",e.moreToolsTitle)("aria-expanded",e.popupOpen)}}function rC(i,r){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"li",12)(2,"kendo-toolbar-renderer",6,13),t.NdJ("rendererClick",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onRendererClick(s))}),t.qZA()(),t.BQk()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("location","overflow")("resizable",n.overflow)("tool",e)}}function sC(i,r){if(1&i&&(t.TgZ(0,"ul",11),t.YNc(1,rC,4,3,"ng-container",1),t.qZA()),2&i){const e=t.oxw();t.Q6J("id",e.popupId),t.uIk("aria-labelledby",e.overflowBtnId),t.xp6(1),t.Q6J("ngForOf",e.allTools)}}function oC(i,r){1&i&&t._UZ(0,"kendo-resize-sensor",null,14)}const gl=["toolbarTemplate"],aC=["toolbarButton"];function lC(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",2,3),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.click.emit(s))})("pointerdown",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.pointerdown.emit(s))})("selectedChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedChange.emit(s))})("blur",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onBlur())}),t._uU(2),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("tabindex",e.tabIndex)("ngStyle",e.style)("ngClass",e.className)("disabled",e.disabled)("toggleable",e.toggleable)("fillMode",e.fillMode)("themeColor",e.fillMode?e.themeColor:null)("selected",e.selected)("icon",e.toolbarOptions.icon)("iconClass",e.toolbarOptions.iconClass)("imageUrl",e.toolbarOptions.imageUrl),t.uIk("title",e.title),t.xp6(2),t.hij(" ",e.toolbarOptions.text," ")}}function cC(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",4,5),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.click.emit(s))})("selectedChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.selectedChange.emit(s))}),t._uU(2),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("ngStyle",e.style)("ngClass",e.className)("disabled",e.disabled)("toggleable",e.toggleable)("fillMode",e.fillMode)("themeColor",e.fillMode?e.themeColor:null)("selected",e.selected)("icon",e.overflowOptions.icon)("iconClass",e.overflowOptions.iconClass)("imageUrl",e.overflowOptions.imageUrl),t.uIk("title",e.title),t.xp6(2),t.hij(" ",e.overflowOptions.text," ")}}const dC=["toolbarButtonGroup"],uC=["overflowButtonGroup"];function hC(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",5),t.NdJ("click",function(s){const d=t.CHM(e).$implicit,f=t.oxw(2);return d.click.emit(s),t.KtG(f.onButtonClick(s))})("pointerdown",function(s){const d=t.CHM(e).$implicit;return t.KtG(d.pointerdown.emit(s))})("selectedChange",function(s){const d=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.selectedChangeHandler(s,d))}),t._uU(1),t.qZA()}if(2&i){const e=r.$implicit;t.Q6J("ngStyle",e.style)("ngClass",e.className)("disabled",e.disabled)("togglable",e.togglable)("selected",e.selected)("fillMode",e.fillMode)("themeColor",e.fillMode?e.themeColor:null)("icon",e.toolbarOptions.icon)("iconClass",e.toolbarOptions.iconClass)("imageUrl",e.toolbarOptions.imageUrl),t.uIk("title",e.title),t.xp6(1),t.hij(" ",e.toolbarOptions.text," ")}}function x_(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"kendo-buttongroup",2,3),t.NdJ("navigate",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onNavigate(s))})("focus",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onFocus())}),t.YNc(2,hC,2,12,"span",4),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("tabIndex",-1)("selection",e.selection)("disabled",e.disabled)("width",e.width),t.xp6(2),t.Q6J("ngForOf",e.buttonComponents)}}function fC(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",9),t.NdJ("click",function(s){const d=t.CHM(e).$implicit,f=t.oxw(2);return d.click.emit(s),t.KtG(f.onButtonClick(s))})("selectedChange",function(s){const d=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.selectedChangeHandler(s,d))}),t._uU(1),t.qZA()}if(2&i){const e=r.$implicit;t.Q6J("ngStyle",e.style)("ngClass",e.className)("disabled",e.disabled)("togglable",e.togglable)("selected",e.selected)("fillMode",e.fillMode)("themeColor",e.fillMode?e.themeColor:null)("icon",e.overflowOptions.icon)("iconClass",e.overflowOptions.iconClass)("imageUrl",e.overflowOptions.imageUrl),t.uIk("title",e.title),t.xp6(1),t.hij(" ",e.overflowOptions.text," ")}}function pC(i,r){if(1&i&&(t.TgZ(0,"kendo-buttongroup",6,7),t.YNc(2,fC,2,12,"span",8),t.qZA()),2&i){const e=t.oxw();t.Q6J("tabIndex",-1)("selection",e.selection)("disabled",e.disabled)("width",e.width),t.xp6(2),t.Q6J("ngForOf",e.buttonComponents)}}const kC={name:"@progress/kendo-angular-toolbar",productName:"Kendo UI for Angular",productCodes:["KENDOUIANGULAR","KENDOUICOMPLETE"],publishDate:1668698440,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning"};let Au=(()=>{class i{constructor(){this.onRefresh=new t.vpe}refresh(e){this.onRefresh.emit(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();const k_=/^(?:a|input|select|textarea|button|object)$/i,Ou=(i,r,e=!0)=>{if(i){if(e&&r(i))return i;for(i=i.firstChild;i;){if(1===i.nodeType){const n=Ou(i,r);if(n)return n}i=i.nextSibling}}},Lf=(i,r=!0)=>{if(i.tagName){const e=i.tagName.toLowerCase();let s=null!==i.getAttribute("tabIndex");return k_.test(e)&&(s=!i.disabled),s&&(!r||(i=>{const r=i.getBoundingClientRect();return(r.width>0&&r.height>0||0!==r.x&&0!==r.y)&&"hidden"!==window.getComputedStyle(i).visibility})(i))}return!1},y_=(i,r=!0,e)=>{let n=e?i.prevSibling:i.nextSibling;for(;n;){if(1===n.nodeType){const s=Ou(n,a=>Lf(a,r));if(s)return s}n=e?n.prevSibling:n.nextSibling}},Iu=i=>null!=i,Ii=(i,r,e)=>{switch(r){case"toolbar":return e?void 0:i;case"overflow":return e?i:void 0;default:return i}};let D_=(()=>{class i{constructor(e){this.zone=e,this.focused={renderedTool:null,index:-1},this.renderedTools=[],this.isPopupFocused=!1,this.isOverflowButtonFocused=!1}setRenderedTools(e){this.renderedTools=[...e]}click({context:e,event:n}){this.focused.renderedTool!==e&&n&&this.focus(e,n)}moveFocusToToolBar(){this.isPopupFocused=!1,this.focusOverflowButton()}moveFocusToPopup(){this.isPopupFocused=!0,this.blurOverflowButton(),this.focus()}focusNext(e){if(this.isOverflowButtonFocused){const n=this.getFocusableTools()[0];this.focus(n,e)}else if(!this.isOverflowButtonFocused&&this.focused.renderedTool&&!this.focused.renderedTool.tool.handleKey(e)){const n=this.getFocusableTools().slice(this.focused.index+1)[0];if(n)this.focus(n,e);else if(this.isOverflowButtonVisible()&&!this.isPopupFocused)this.focusOverflowButton();else{const s=this.getFocusableTools()[0];this.focus(s,e)}}}focusPrev(e){if(this.isOverflowButtonFocused){const n=this.getFocusableTools().reverse()[0];this.focus(n,e)}else if(!this.isOverflowButtonFocused&&this.focused.renderedTool&&!this.focused.renderedTool.tool.handleKey(e)){const n=this.getFocusableTools().slice(0,this.focused.index).reverse()[0];if(n)this.focus(n,e);else if(this.isOverflowButtonVisible()&&!this.isPopupFocused)this.focusOverflowButton();else{const s=this.getFocusableTools().reverse()[0];this.focus(s,e)}}}resetNavigation(){this.blurOverflowButton(),this.focused.renderedTool=null,this.focused.index=-1}focusFirst(e){const n=this.getFocusableTools()[0],s=this.overflowButton;n?(this.focused.renderedTool=n,this.focused.index=this.getFocusableTools().findIndex(a=>a===n),this.focus(n,e)):s&&s.nativeElement.focus()}focusLast(e){const n=this.getFocusableTools().reverse()[0],s=this.overflowButton;n?(this.focused.renderedTool=n,this.focused.index=this.getFocusableTools().findIndex(a=>a===n),this.focus(n,e)):s&&s.nativeElement.focus()}getFocusableTools(){return this.renderedTools.filter(e=>e.tool.overflows===this.isPopupFocused&&e.tool.canFocus())}focus(e,n){this.zone.onStable.pipe((0,gn.q)(1)).subscribe(()=>{if(e)e.tool.canFocus&&e.tool.canFocus()&&(this.focused.renderedTool=e,this.focused.index=this.getFocusableTools().findIndex(s=>s===e),e.tool.focus(n),this.blurOverflowButton());else{const s=this.getFocusableTools(),a=s.find(d=>d===this.focused.renderedTool)||s[0];a&&(this.focused.renderedTool=a,this.focused.index=this.getFocusableTools().findIndex(d=>d===a),a.tool.focus(n))}})}blurOverflowButton(){this.overflowButton&&(this.isOverflowButtonFocused=!1,this.overflowButton.nativeElement.tabIndex=-1)}focusOverflowButton(){this.isOverflowButtonFocused=!0,this.overflowButton.nativeElement.tabIndex=0,this.overflowButton.nativeElement.focus()}isOverflowButtonVisible(){return Iu(this.overflowButton)&&"visible"===window.getComputedStyle(this.overflowButton.nativeElement).getPropertyValue("visibility")}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t.R0b))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Zn=(()=>{class i{constructor(){this.tabIndex=-1,this.overflows=!0,this.responsive=!0}get toolbarDisplay(){return this.overflows?"none":"inline-block"}get overflowDisplay(){return this.overflows?"block":"none"}canFocus(){return!1}focus(e){}handleKey(e){return!1}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["toolbar-tool"]],inputs:{responsive:"responsive"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),i})();class IC{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}let Hf=(()=>{class i{getElement(){return this.element.nativeElement}querySelector(e){return this.element.nativeElement.querySelector(e)}querySelectorAll(e){return this.element.nativeElement.querySelectorAll(e)}findFocusable(){return((i,r=!0)=>Ou(this.element.nativeElement,e=>Lf(e,r)))(0,!1)}findFocusableChild(e){return e||(e=this.findFocusable()),((i,r=!0)=>Ou(i,e=>Lf(e,r),!1))(e,!1)}findNextFocusableSibling(e){return e||(e=this.findFocusable()),y_(e,!1)}findPrevFocusableSibling(e){return e||(e=this.findFocusable()),y_(e,!1,!0)}setAttribute(e,n,s){this.renderer.setAttribute(e,n,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),A_=(()=>{class i{constructor(e,n,s,a){this.element=e,this.renderer=n,this.rendererService=s,this.refreshService=a,this.rendererClick=new t.vpe,this.rendererService.element=e,this.rendererService.renderer=this,this.refreshSubscription=this.refreshService.onRefresh.subscribe(d=>{this.tool===d&&this.refresh()})}get spacerClass(){return"toolbar"===this.location&&this.isSpacer}get isSpacer(){return this.tool&&this.tool.__isSpacer}onClick(e){this.rendererClick.emit({context:this,event:e})}ngOnInit(){this.resizable?"toolbar"===this.location?(this.template=this.tool.toolbarTemplate,this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.renderer.setStyle(this.element.nativeElement,"display","none")):(this.template=this.tool.popupTemplate,this.renderer.setStyle(this.element.nativeElement,"display","none")):(this.tool.overflows=!1,this.template=this.tool.toolbarTemplate,this.renderer.setStyle(this.element.nativeElement,"visibility","display"),this.renderer.setStyle(this.element.nativeElement,"display","inline-block"))}ngOnDestroy(){this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.resizable&&this.refresh()}get width(){return this.isSpacer?18:this.tool.overflows?0:function TC(i){var r=i.offsetWidth,e=getComputedStyle(i);return r+(parseFloat(e.marginLeft)||0+parseFloat(e.marginRight)||0)}(this.element.nativeElement)}isDisplayed(){return"none"!==this.element.nativeElement.style.display}refresh(){this.resizable&&("toolbar"===this.location?(this.renderer.setStyle(this.element.nativeElement,"visibility",this.tool.visibility),this.renderer.setStyle(this.element.nativeElement,"display",this.tool.toolbarDisplay)):this.renderer.setStyle(this.element.nativeElement,"display",this.tool.overflowDisplay))}setAttribute(e,n,s){this.renderer.setAttribute(e,n,s)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Hf),t.Y36(Au))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-toolbar-renderer"]],hostVars:2,hostBindings:function(e,n){1&e&&t.NdJ("click",function(a){return n.onClick(a)}),2&e&&t.ekj("k-spacer",n.spacerClass)},inputs:{tool:"tool",location:"location",resizable:"resizable"},outputs:{rendererClick:"rendererClick"},exportAs:["kendoToolBarRenderer"],features:[t._Bn([Hf])],decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(e,n){1&e&&(t.YNc(0,Wx,2,1,"ng-container",0),t.YNc(1,Qx,2,1,"ng-container",0)),2&e&&(t.Q6J("ngIf","toolbar"===n.location),t.xp6(1),t.Q6J("ngIf","overflow"===n.location&&n.tool.responsive))},dependencies:[X.O5,X.tP],encapsulation:2}),i})(),Mu=(()=>{class i extends ws{}return i.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(i)))(n||i)}}(),i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-messages-base"]],inputs:{moreToolsTitle:"moreToolsTitle"},features:[t.qOj]}),i})(),O_=(()=>{class i extends Mu{constructor(e){super(),this.service=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoToolbarLocalizedMessages",""]],features:[t._Bn([{provide:Mu,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj]}),i})();const I_=i=>({animate:!0,anchorAlign:{horizontal:i?"left":"right",vertical:"bottom"},popupAlign:{horizontal:i?"left":"right",vertical:"top"}});let _l=(()=>{class i{constructor(e,n,s,a,d,f,p,g){this.localization=e,this.popupService=n,this.refreshService=s,this.navigationService=a,this.element=d,this.zone=f,this.renderer=p,this._cdr=g,this.overflow=!1,this.tabindex=0,this.open=new t.vpe,this.close=new t.vpe,this.hostClasses=!0,this.cancelRenderedToolsSubscription$=new Un.x,this.subscriptions=new cn.w0,this.popupSubs=new cn.w0,this.role="toolbar",this.overflowBtnId=On(),this.popupId=On(),wt(kC),this.direction=e.rtl?"rtl":"ltr"}set resizable(e){this.overflow=e}get resizable(){return this.overflow}set popupSettings(e){this._popupSettings=Object.assign({},I_(this.localization.rtl),e)}get popupSettings(){return this._popupSettings||I_(this.localization.rtl)}set tabIndex(e){this.tabindex=e}get tabIndex(){return this.tabindex}get appendTo(){const{appendTo:e}=this.popupSettings;if(e&&"root"!==e)return"component"===e?this.container:e}set popupOpen(e){if(this.popupOpen===e)return;const n=new IC;e?this.open.emit(n):this.close.emit(n),!n.isDefaultPrevented()&&this.toggle(e)}get popupOpen(){return this._open}onFocus(e){this.navigationService.resetNavigation(),this.navigationService.focusFirst(e),this.element.nativeElement.setAttribute("tabindex","-1")}onFocusOut(e){((i,r)=>{for(;i&&!r(i);)i=i.parentNode;return i})(e.relatedTarget,n=>n===this.element.nativeElement)?this.element.nativeElement.setAttribute("tabindex","-1"):this.element.nativeElement.setAttribute("tabindex",this.tabindex.toString())}get getDir(){return this.direction}get resizableClass(){return this.overflow}ngAfterViewInit(){this.element.nativeElement.getAttribute("tabindex")||this.element.nativeElement.setAttribute("tabindex","0"),this.zone.runOutsideAngular(()=>{this.toolbarKeydownListener=this.renderer.listen(this.element.nativeElement,"keydown",n=>{switch(n.keyCode){case ke.ArrowLeft:this.zone.run(()=>{n.preventDefault(),"ltr"===this.direction?this.navigationService.focusPrev(n):this.navigationService.focusNext(n),this.element.nativeElement.setAttribute("tabindex","-1")});break;case ke.ArrowRight:this.zone.run(()=>{n.preventDefault(),"ltr"===this.direction?this.navigationService.focusNext(n):this.navigationService.focusPrev(n),this.element.nativeElement.setAttribute("tabindex","-1")});break;case ke.Tab:this.zone.run(()=>this.navigationService.resetNavigation());break;case ke.Escape:this.zone.run(()=>this.toggle(!1));break;case ke.Home:this.zone.run(()=>this.navigationService.focusFirst(n));break;case ke.End:this.zone.run(()=>this.navigationService.focusLast(n))}})}),this.overflow&&(this.subscriptions.add((0,En.T)(this.resizeSensor.resize,this.renderedTools.changes).subscribe(()=>this.onResize())),this.navigationService.overflowButton=this.overflowButton,this.onResize()),this.navigationService.setRenderedTools(this.renderedTools.toArray()),this.subscriptions.add(this.renderedTools.changes.subscribe(n=>this.navigationService.setRenderedTools(n.toArray())))}ngOnInit(){this.subscriptions.add(this.localization.changes.subscribe(({rtl:e})=>this.direction=e?"rtl":"ltr")),nt()&&this.zone.runOutsideAngular(()=>this.subscriptions.add((0,vi.R)(document,"click").pipe((0,Ot.h)(()=>!!this.popupRef),(0,Ot.h)(e=>!this.popupRef.popup.instance.container.nativeElement.contains(e.target)),(0,Ot.h)(e=>!this.overflowButton.nativeElement.contains(e.target))).subscribe(()=>{this.zone.run(()=>{this.popupOpen=!1})})))}ngOnChanges(e){e.tabindex&&this.element.nativeElement.setAttribute("tabindex",e.tabindex.currentValue.toString())}ngOnDestroy(){this.destroyPopup(),this.toolbarKeydownListener&&this.toolbarKeydownListener(),this.cancelRenderedToolsSubscription$.next(),this.subscriptions.unsubscribe()}get moreToolsTitle(){return this.localization.get("moreToolsTitle")}get cdr(){return this._cdr}onRendererClick(e){this.navigationService.click(e),this.element.nativeElement.setAttribute("tabindex","-1")}showPopup(){this.popupOpen=!this.popupOpen,this.navigationService.click({context:void 0,event:void 0})}toggle(e){this._open=void 0!==e?e:!this.popupOpen,this.popupRef&&(this.popupRef.close(),this.popupRef=null),this.popupOpen&&(this.popupRef=this.popupService.open({anchor:this.overflowButton,anchorAlign:this.popupSettings.anchorAlign,popupAlign:this.popupSettings.popupAlign,content:this.popupTemplate,appendTo:this.appendTo,animate:this.popupSettings.animate,popupClass:this.popupSettings.popupClass,positionMode:"absolute"}),this.setPopupContentDimensions(),this.popupSubs.add(this.popupRef.popupOpen.subscribe(this.onPopupOpen.bind(this))),this.popupSubs.add(this.popupRef.popupClose.subscribe(this.onPopupClose.bind(this))))}onResize(){if(nt()){const e=function yC(i){var r=i.offsetWidth,e=getComputedStyle(i);return(r-=parseFloat(e.paddingLeft)||0+parseFloat(e.borderLeftWidth)||0)-(parseFloat(e.paddingRight)||0+parseFloat(e.borderRightWidth)||0)}(this.element.nativeElement)-this.overflowAnchorWidth;this.shrink(e,this.childrenWidth),this.stretch(e,this.childrenWidth),this.displayAnchor(),this.resizeSensor.acceptSize()}}onPopupOpen(){this.zone.runOutsideAngular(()=>{this.overflowKeydownListener=this.renderer.listen(this.popupRef.popupElement,"keydown",e=>{switch(e.keyCode){case ke.ArrowUp:this.zone.run(()=>{e.preventDefault(),this.navigationService.focusPrev(e)});break;case ke.ArrowDown:this.zone.run(()=>{e.preventDefault(),this.navigationService.focusNext(e)});break;case ke.Escape:this.zone.run(()=>this.toggle(!1));break;case ke.Tab:this.zone.run(()=>{this.toggle(!1),this.navigationService.resetNavigation()})}})}),this.cancelRenderedToolsSubscription$.next(),this.navigationService.moveFocusToPopup(),this.navigationService.setRenderedTools(this.overflowRenderedTools.toArray()),this.overflowRenderedTools.changes.pipe((0,Bi.R)(this.cancelRenderedToolsSubscription$)).subscribe(e=>this.navigationService.setRenderedTools(e.toArray())),this.renderer.setAttribute(this.overflowButton.nativeElement,"aria-controls",this.popupId)}onPopupClose(){this.cancelRenderedToolsSubscription$.next(),this.navigationService.setRenderedTools(this.renderedTools.toArray()),this.renderedTools.changes.pipe((0,Bi.R)(this.cancelRenderedToolsSubscription$)).subscribe(e=>this.navigationService.setRenderedTools(e.toArray())),this.navigationService.moveFocusToToolBar(),this.overflowKeydownListener&&this.overflowKeydownListener(),this.renderer.removeAttribute(this.overflowButton.nativeElement,"aria-controls")}displayAnchor(){const e=this.allTools.filter(n=>n.overflows&&n.responsive).length>0?"visible":"hidden";this.renderer.setStyle(this.overflowButton.nativeElement,"visibility",e)}get popupWidth(){return this.popupSettings&&this.popupSettings.width?isNaN(this.popupSettings.width)?this.popupSettings.width:`${this.popupSettings.width}px`:"150px"}get popupHeight(){if(this.popupSettings&&this.popupSettings.height)return isNaN(this.popupSettings.height)?this.popupSettings.height:`${this.popupSettings.height}px`}get overflowAnchorWidth(){return this.overflow?(this.cachedOverflowAnchorWidth||(this.cachedOverflowAnchorWidth=this.overflowButton.nativeElement.offsetWidth),this.cachedOverflowAnchorWidth):0}get gap(){if(Iu(this.cachedGap))return this.cachedGap;const e=getComputedStyle(this.element.nativeElement).gap;return this.cachedGap=Iu(e)?parseInt(e,10):0,this.cachedGap}get childrenWidth(){const e=this.renderedTools.reduce((n,s)=>s.width+n+(s.isDisplayed()?this.gap:0),0);return Math.ceil(e)}get visibleTools(){return this.allTools.filter(e=>!1===e.overflows)}get overflowTools(){return this.allTools.filter(e=>!0===e.overflows)}shrink(e,n){let s;if(e<n)for(var a=this.visibleTools.length-1;a>=0&&!(e>n);a--)s=this.hideLastVisibleTool(),n-=s}stretch(e,n){let s;if(e>n)for(var a=this.overflowTools.length-1;a>=0&&(s=this.showFirstHiddenTool(e,n),s);a--)n+=s}hideLastVisibleTool(){const e=this.visibleTools[this.visibleTools.length-1],s=this.renderedTools.find(a=>a.tool===e).width;return e.overflows=!0,this.refreshService.refresh(e),s}showFirstHiddenTool(e,n){const s=this.overflowTools[0],a=this.renderedTools.find(d=>d.tool===s);return s.overflows=!1,s.visibility="hidden",this.refreshService.refresh(s),e>n+a.width?(s.visibility="visible",this.refreshService.refresh(s)):(s.overflows=!0,this.refreshService.refresh(s)),a.width}setPopupContentDimensions(){const e=this.popupRef.popup.instance.contentContainer.nativeElement;e.style.width=this.popupWidth,e.style.height=this.popupHeight,e.style.overflow="auto"}destroyPopup(){this.popupRef&&(this.popupSubs.unsubscribe(),this.popupRef.close(),this.popupRef=null)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge),t.Y36(tr),t.Y36(Au),t.Y36(D_),t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(t.Qsj),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-toolbar"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,Zn,4),2&e){let a;t.iGM(a=t.CRH())&&(n.allTools=a)}},viewQuery:function(e,n){if(1&e&&(t.Gf(v_,5),t.Gf(ka,7),t.Gf(Xx,5),t.Gf(b_,7,t.s_b),t.Gf(eC,5),t.Gf(tC,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.overflowButton=s.first),t.iGM(s=t.CRH())&&(n.popupTemplate=s.first),t.iGM(s=t.CRH())&&(n.resizeSensor=s.first),t.iGM(s=t.CRH())&&(n.container=s.first),t.iGM(s=t.CRH())&&(n.renderedTools=s),t.iGM(s=t.CRH())&&(n.overflowRenderedTools=s)}},hostVars:8,hostBindings:function(e,n){1&e&&t.NdJ("focus",function(a){return n.onFocus(a)})("focusout",function(a){return n.onFocusOut(a)}),2&e&&(t.uIk("role",n.role)("dir",n.getDir),t.ekj("k-widget",n.hostClasses)("k-toolbar",n.hostClasses)("k-toolbar-resizable",n.resizableClass))},inputs:{overflow:"overflow",resizable:"resizable",popupSettings:"popupSettings",tabindex:"tabindex",tabIndex:"tabIndex"},outputs:{open:"open",close:"close"},exportAs:["kendoToolBar"],features:[t._Bn([Au,D_,Ge,{provide:Et,useValue:"kendo.toolbar"}]),t.TTD],decls:8,vars:3,consts:function(){let r;return r=$localize`:kendo.toolbar.moreToolsTitle|The title of the **more tools** button in a responsive ToolBar:More tools`,[["kendoToolbarLocalizedMessages","","moreToolsTitle",r],[4,"ngFor","ngForOf"],["type","button","tabindex","-1","aria-haspopup","menu","class","k-overflow-anchor k-button k-button-flat",3,"title","id","visibility","position","margin-inline-start","click",4,"ngIf"],["popupTemplate",""],["container",""],[4,"ngIf"],[3,"location","resizable","tool","rendererClick"],["toolbarRenderer",""],["type","button","tabindex","-1","aria-haspopup","menu",1,"k-overflow-anchor","k-button","k-button-flat",3,"title","id","click"],["overflowButton",""],[1,"k-icon","k-i-more-vertical"],["role","menu",1,"k-overflow-container","k-list-container","k-reset",3,"id"],["role","menuitem",1,"k-item"],["overflowRenderer",""],["resizeSensor",""]]},template:function(e,n){1&e&&(t.GkF(0,0),t.YNc(1,nC,3,3,"ng-container",1),t.YNc(2,iC,3,10,"button",2),t.YNc(3,sC,2,3,"ng-template",null,3,t.W1O),t.GkF(5,null,4),t.YNc(7,oC,2,0,"kendo-resize-sensor",5)),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.allTools),t.xp6(1),t.Q6J("ngIf",n.overflow),t.xp6(5),t.Q6J("ngIf",n.overflow))},dependencies:[A_,Fr,O_,X.sg,X.O5],encapsulation:2}),i})(),$t=(()=>{class i extends Zn{constructor(){super(),this.showIcon="both",this.toggleable=!1,this.selected=!1,this.fillMode="solid",this.themeColor="base",this.click=new t.vpe,this.pointerdown=new t.vpe,this.selectedChange=new t.vpe,this.toolbarOptions={text:"",icon:"",iconClass:"",imageUrl:""},this.overflowOptions={text:"",icon:"",iconClass:"",imageUrl:""},this._showText="both"}set showText(e){this._showText=e,this.setTextDisplayMode()}get showText(){return this._showText}set look(e){e&&(this.fillMode="default"===e?"solid":e)}get togglable(){return this.toggleable}set togglable(e){this.toggleable=e}set icon(e){this.toolbarOptions.icon=Ii(e,this.showIcon,!1),this.overflowOptions.icon=Ii(e,this.showIcon,!0)}set iconClass(e){this.toolbarOptions.iconClass=Ii(e,this.showIcon,!1),this.overflowOptions.iconClass=Ii(e,this.showIcon,!0)}set imageUrl(e){this.toolbarOptions.imageUrl=Ii(e,this.showIcon,!1),this.overflowOptions.imageUrl=Ii(e,this.showIcon,!0)}ngOnInit(){this.setTextDisplayMode()}onBlur(){this.getButton().tabIndex=-1}canFocus(){return!this.disabled}focus(e){(!e||"focus"===e.type||"keydown"===e.type)&&this.getButton().focus(),this.getButton().tabIndex=0}handleKey(){return this.getButton().tabIndex=-1,!1}getButton(){return(this.overflows?this.overflowButtonElement:this.toolbarButtonElement).nativeElement}setTextDisplayMode(){this.toolbarOptions.text="overflow"===this.showText?void 0:this.text,this.overflowOptions.text="toolbar"===this.showText?void 0:this.text}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-toolbar-button"]],viewQuery:function(e,n){if(1&e&&(t.Gf(gl,7),t.Gf(ka,7),t.Gf(aC,5,t.SBq),t.Gf(v_,5,t.SBq)),2&e){let s;t.iGM(s=t.CRH())&&(n.toolbarTemplate=s.first),t.iGM(s=t.CRH())&&(n.popupTemplate=s.first),t.iGM(s=t.CRH())&&(n.toolbarButtonElement=s.first),t.iGM(s=t.CRH())&&(n.overflowButtonElement=s.first)}},inputs:{showText:"showText",showIcon:"showIcon",text:"text",style:"style",className:"className",title:"title",disabled:"disabled",toggleable:"toggleable",look:"look",togglable:"togglable",selected:"selected",fillMode:"fillMode",themeColor:"themeColor",icon:"icon",iconClass:"iconClass",imageUrl:"imageUrl"},outputs:{click:"click",pointerdown:"pointerdown",selectedChange:"selectedChange"},exportAs:["kendoToolBarButton"],features:[t._Bn([{provide:Zn,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj],decls:4,vars:0,consts:[["toolbarTemplate",""],["popupTemplate",""],["type","button","kendoButton","",3,"tabindex","ngStyle","ngClass","disabled","toggleable","fillMode","themeColor","selected","icon","iconClass","imageUrl","click","pointerdown","selectedChange","blur"],["toolbarButton",""],["tabindex","-1","type","button","kendoButton","",1,"k-overflow-button",3,"ngStyle","ngClass","disabled","toggleable","fillMode","themeColor","selected","icon","iconClass","imageUrl","click","selectedChange"],["overflowButton",""]],template:function(e,n){1&e&&(t.YNc(0,lC,3,13,"ng-template",null,0,t.W1O),t.YNc(2,cC,3,12,"ng-template",null,1,t.W1O))},dependencies:[Nn,X.PC,X.mk],encapsulation:2}),i})(),Ru=(()=>{class i extends Zn{constructor(e){super(),this.localization=e,this.selection="multiple",this.focusedIndex=-1,this.getNextKey=((i=!1)=>(r=!0)=>r?ke.ArrowDown:i?ke.ArrowLeft:ke.ArrowRight)(this.localization.rtl),this.getPrevKey=((i=!1)=>(r=!0)=>r?ke.ArrowUp:i?ke.ArrowRight:ke.ArrowLeft)(this.localization.rtl)}set look(e){e&&this.buttonComponents.forEach(n=>n.fillMode="default"===e?"solid":e)}get buttonElements(){return this.getButtonGroup().buttons.filter(e=>!e.isDisabled).map(e=>e.element)}onFocus(){this.focusedIndex=0}onNavigate(e){e.preventDefault()}selectedChangeHandler(e,n){n.selected=e,n.selectedChange.emit(e)}onButtonClick(e){this.focusedIndex=this.buttonElements.findIndex(n=>n===e.target||n.contains(e.target)),this.focusButton(this.focusedIndex,e)}canFocus(){return!(this.disabled||0===this.buttonElements.length)}focus(e={}){const n=this.getNextKey(this.overflows),s=this.getPrevKey(this.overflows);this.focusedIndex=((i,r,e)=>n=>{switch(n.type){case"keydown":if(n.keyCode===i)return e.length-1;if(n.keyCode===r)return 0;break;case"click":return e.findIndex(s=>s===n.target||s.contains(n.target));default:return 0}})(s,n,this.buttonElements)(e),this.focusButton(this.focusedIndex,e)}handleKey(e){const n=this.getNextKey(this.overflows),s=this.getPrevKey(this.overflows),a=(i=>r=>Iu(i[r]))(this.buttonElements),d=(i=>r=>i===r)(this.focusedIndex);return this.focusedIndex=((i,r,e)=>(n,s)=>{switch(s.keyCode){case i:return e(n-1)?n-1:n;case r:return e(n+1)?n+1:n;default:return n}})(s,n,a)(this.focusedIndex,e),this.focusButton(this.focusedIndex,e),!d(this.focusedIndex)}getButtonGroup(){return this.overflows?this.overflowButtonGroup:this.toolbarButtonGroup}focusButton(e,n){var s;(!n.type||"focus"===n.type||"keydown"===n.type)&&(null===(s=this.buttonElements[e])||void 0===s||s.focus())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-toolbar-buttongroup"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,$t,4),2&e){let a;t.iGM(a=t.CRH())&&(n.buttonComponents=a)}},viewQuery:function(e,n){if(1&e&&(t.Gf(gl,7),t.Gf(ka,7),t.Gf(dC,5),t.Gf(uC,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.toolbarTemplate=s.first),t.iGM(s=t.CRH())&&(n.popupTemplate=s.first),t.iGM(s=t.CRH())&&(n.toolbarButtonGroup=s.first),t.iGM(s=t.CRH())&&(n.overflowButtonGroup=s.first)}},inputs:{disabled:"disabled",selection:"selection",width:"width",look:"look"},exportAs:["kendoToolBarButtonGroup"],features:[t._Bn([Ge,{provide:Zn,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj],decls:4,vars:0,consts:[["toolbarTemplate",""],["popupTemplate",""],[3,"tabIndex","selection","disabled","width","navigate","focus"],["toolbarButtonGroup",""],["kendoButton","",3,"ngStyle","ngClass","disabled","togglable","selected","fillMode","themeColor","icon","iconClass","imageUrl","click","pointerdown","selectedChange",4,"ngFor","ngForOf"],["kendoButton","",3,"ngStyle","ngClass","disabled","togglable","selected","fillMode","themeColor","icon","iconClass","imageUrl","click","pointerdown","selectedChange"],[1,"k-overflow-button",3,"tabIndex","selection","disabled","width"],["overflowButtonGroup",""],["kendoButton","","class","k-overflow-button",3,"ngStyle","ngClass","disabled","togglable","selected","fillMode","themeColor","icon","iconClass","imageUrl","click","selectedChange",4,"ngFor","ngForOf"],["kendoButton","",1,"k-overflow-button",3,"ngStyle","ngClass","disabled","togglable","selected","fillMode","themeColor","icon","iconClass","imageUrl","click","selectedChange"]],template:function(e,n){1&e&&(t.YNc(0,x_,3,5,"ng-template",null,0,t.W1O),t.YNc(2,pC,3,5,"ng-template",null,1,t.W1O))},dependencies:[Su,X.sg,Nn,X.PC,X.mk],encapsulation:2}),i})(),M_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,__,xa,Ci]]}),i})();function Mi(i){this.content=i}Mi.prototype={constructor:Mi,find:function(i){for(var r=0;r<this.content.length;r+=2)if(this.content[r]===i)return r;return-1},get:function(i){var r=this.find(i);return-1==r?void 0:this.content[r+1]},update:function(i,r,e){var n=e&&e!=i?this.remove(e):this,s=n.find(i),a=n.content.slice();return-1==s?a.push(e||i,r):(a[s+1]=r,e&&(a[s]=e)),new Mi(a)},remove:function(i){var r=this.find(i);if(-1==r)return this;var e=this.content.slice();return e.splice(r,2),new Mi(e)},addToStart:function(i,r){return new Mi([i,r].concat(this.remove(i).content))},addToEnd:function(i,r){var e=this.remove(i).content.slice();return e.push(i,r),new Mi(e)},addBefore:function(i,r,e){var n=this.remove(r),s=n.content.slice(),a=n.find(i);return s.splice(-1==a?s.length:a,0,r,e),new Mi(s)},forEach:function(i){for(var r=0;r<this.content.length;r+=2)i(this.content[r],this.content[r+1])},prepend:function(i){return(i=Mi.from(i)).size?new Mi(i.content.concat(this.subtract(i).content)):this},append:function(i){return(i=Mi.from(i)).size?new Mi(this.subtract(i).content.concat(i.content)):this},subtract:function(i){var r=this;i=Mi.from(i);for(var e=0;e<i.content.length;e+=2)r=r.remove(i.content[e]);return r},toObject:function(){var i={};return this.forEach(function(r,e){i[r]=e}),i},get size(){return this.content.length>>1}},Mi.from=function(i){if(i instanceof Mi)return i;var r=[];if(i)for(var e in i)r.push(e,i[e]);return new Mi(r)};const Jf=Mi;function qf(i,r,e){for(let n=0;;n++){if(n==i.childCount||n==r.childCount)return i.childCount==r.childCount?null:e;let s=i.child(n),a=r.child(n);if(s!=a){if(!s.sameMarkup(a))return e;if(s.isText&&s.text!=a.text){for(let d=0;s.text[d]==a.text[d];d++)e++;return e}if(s.content.size||a.content.size){let d=qf(s.content,a.content,e+1);if(null!=d)return d}e+=s.nodeSize}else e+=s.nodeSize}}function Yf(i,r,e,n){for(let s=i.childCount,a=r.childCount;;){if(0==s||0==a)return s==a?null:{a:e,b:n};let d=i.child(--s),f=r.child(--a),p=d.nodeSize;if(d!=f){if(!d.sameMarkup(f))return{a:e,b:n};if(d.isText&&d.text!=f.text){let g=0,b=Math.min(d.text.length,f.text.length);for(;g<b&&d.text[d.text.length-g-1]==f.text[f.text.length-g-1];)g++,e--,n--;return{a:e,b:n}}if(d.content.size||f.content.size){let g=Yf(d.content,f.content,e-1,n-1);if(g)return g}e-=p,n-=p}else e-=p,n-=p}}class Me{constructor(r,e){if(this.content=r,this.size=e||0,null==e)for(let n=0;n<r.length;n++)this.size+=r[n].nodeSize}nodesBetween(r,e,n,s=0,a){for(let d=0,f=0;f<e;d++){let p=this.content[d],g=f+p.nodeSize;if(g>r&&!1!==n(p,s+f,a||null,d)&&p.content.size){let b=f+1;p.nodesBetween(Math.max(0,r-b),Math.min(p.content.size,e-b),n,s+b)}f=g}}descendants(r){this.nodesBetween(0,this.size,r)}textBetween(r,e,n,s){let a="",d=!0;return this.nodesBetween(r,e,(f,p)=>{f.isText?(a+=f.text.slice(Math.max(r,p)-p,e-p),d=!n):f.isLeaf?(s?a+="function"==typeof s?s(f):s:f.type.spec.leafText&&(a+=f.type.spec.leafText(f)),d=!n):!d&&f.isBlock&&(a+=n,d=!0)},0),a}append(r){if(!r.size)return this;if(!this.size)return r;let e=this.lastChild,n=r.firstChild,s=this.content.slice(),a=0;for(e.isText&&e.sameMarkup(n)&&(s[s.length-1]=e.withText(e.text+n.text),a=1);a<r.content.length;a++)s.push(r.content[a]);return new Me(s,this.size+r.size)}cut(r,e=this.size){if(0==r&&e==this.size)return this;let n=[],s=0;if(e>r)for(let a=0,d=0;d<e;a++){let f=this.content[a],p=d+f.nodeSize;p>r&&((d<r||p>e)&&(f=f.isText?f.cut(Math.max(0,r-d),Math.min(f.text.length,e-d)):f.cut(Math.max(0,r-d-1),Math.min(f.content.size,e-d-1))),n.push(f),s+=f.nodeSize),d=p}return new Me(n,s)}cutByIndex(r,e){return r==e?Me.empty:0==r&&e==this.content.length?this:new Me(this.content.slice(r,e))}replaceChild(r,e){let n=this.content[r];if(n==e)return this;let s=this.content.slice(),a=this.size+e.nodeSize-n.nodeSize;return s[r]=e,new Me(s,a)}addToStart(r){return new Me([r].concat(this.content),this.size+r.nodeSize)}addToEnd(r){return new Me(this.content.concat(r),this.size+r.nodeSize)}eq(r){if(this.content.length!=r.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(r.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(r){let e=this.content[r];if(!e)throw new RangeError("Index "+r+" out of range for "+this);return e}maybeChild(r){return this.content[r]||null}forEach(r){for(let e=0,n=0;e<this.content.length;e++){let s=this.content[e];r(s,n,e),n+=s.nodeSize}}findDiffStart(r,e=0){return qf(this,r,e)}findDiffEnd(r,e=this.size,n=r.size){return Yf(this,r,e,n)}findIndex(r,e=-1){if(0==r)return As(0,r);if(r==this.size)return As(this.content.length,r);if(r>this.size||r<0)throw new RangeError(`Position ${r} outside of fragment (${this})`);for(let n=0,s=0;;n++){let d=s+this.child(n).nodeSize;if(d>=r)return d==r||e>0?As(n+1,d):As(n,s);s=d}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(r=>r.toJSON()):null}static fromJSON(r,e){if(!e)return Me.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Me(e.map(r.nodeFromJSON))}static fromArray(r){if(!r.length)return Me.empty;let e,n=0;for(let s=0;s<r.length;s++){let a=r[s];n+=a.nodeSize,s&&a.isText&&r[s-1].sameMarkup(a)?(e||(e=r.slice(0,s)),e[e.length-1]=a.withText(e[e.length-1].text+a.text)):e&&e.push(a)}return new Me(e||r,n)}static from(r){if(!r)return Me.empty;if(r instanceof Me)return r;if(Array.isArray(r))return this.fromArray(r);if(r.attrs)return new Me([r],r.nodeSize);throw new RangeError("Can not convert "+r+" to a Fragment"+(r.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Me.empty=new Me([],0);const Kf={index:0,offset:0};function As(i,r){return Kf.index=i,Kf.offset=r,Kf}function $f(i,r){if(i===r)return!0;if(!i||"object"!=typeof i||!r||"object"!=typeof r)return!1;let e=Array.isArray(i);if(Array.isArray(r)!=e)return!1;if(e){if(i.length!=r.length)return!1;for(let n=0;n<i.length;n++)if(!$f(i[n],r[n]))return!1}else{for(let n in i)if(!(n in r)||!$f(i[n],r[n]))return!1;for(let n in r)if(!(n in i))return!1}return!0}let Ln=(()=>{class i{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,s=!1;for(let a=0;a<e.length;a++){let d=e[a];if(this.eq(d))return e;if(this.type.excludes(d.type))n||(n=e.slice(0,a));else{if(d.type.excludes(this.type))return e;!s&&d.type.rank>this.type.rank&&(n||(n=e.slice(0,a)),n.push(this),s=!0),n&&n.push(d)}}return n||(n=e.slice()),s||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&$f(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let s=e.marks[n.type];if(!s)throw new RangeError(`There is no mark type ${n.type} in this schema`);return s.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let s=0;s<e.length;s++)if(!e[s].eq(n[s]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return i.none;if(e instanceof i)return[e];let n=e.slice();return n.sort((s,a)=>s.type.rank-a.type.rank),n}}return i.none=[],i})();class Uc extends Error{}class st{constructor(r,e,n){this.content=r,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(r,e){let n=N_(this.content,r+this.openStart,e);return n&&new st(n,this.openStart,this.openEnd)}removeBetween(r,e){return new st(R_(this.content,r+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(r){return this.content.eq(r.content)&&this.openStart==r.openStart&&this.openEnd==r.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let r={content:this.content.toJSON()};return this.openStart>0&&(r.openStart=this.openStart),this.openEnd>0&&(r.openEnd=this.openEnd),r}static fromJSON(r,e){if(!e)return st.empty;let n=e.openStart||0,s=e.openEnd||0;if("number"!=typeof n||"number"!=typeof s)throw new RangeError("Invalid input for Slice.fromJSON");return new st(Me.fromJSON(r,e.content),n,s)}static maxOpen(r,e=!0){let n=0,s=0;for(let a=r.firstChild;a&&!a.isLeaf&&(e||!a.type.spec.isolating);a=a.firstChild)n++;for(let a=r.lastChild;a&&!a.isLeaf&&(e||!a.type.spec.isolating);a=a.lastChild)s++;return new st(r,n,s)}}function R_(i,r,e){let{index:n,offset:s}=i.findIndex(r),a=i.maybeChild(n),{index:d,offset:f}=i.findIndex(e);if(s==r||a.isText){if(f!=e&&!i.child(d).isText)throw new RangeError("Removing non-flat range");return i.cut(0,r).append(i.cut(e))}if(n!=d)throw new RangeError("Removing non-flat range");return i.replaceChild(n,a.copy(R_(a.content,r-s-1,e-s-1)))}function N_(i,r,e,n){let{index:s,offset:a}=i.findIndex(r),d=i.maybeChild(s);if(a==r||d.isText)return n&&!n.canReplace(s,s,e)?null:i.cut(0,r).append(e).append(i.cut(r));let f=N_(d.content,r-a-1,e);return f&&i.replaceChild(s,d.copy(f))}function F_(i,r,e){if(e.openStart>i.depth)throw new Uc("Inserted content deeper than insertion position");if(i.depth-e.openStart!=r.depth-e.openEnd)throw new Uc("Inconsistent open depths");return L_(i,r,e,0)}function L_(i,r,e,n){let s=i.index(n),a=i.node(n);if(s==r.index(n)&&n<i.depth-e.openStart){let d=L_(i,r,e,n+1);return a.copy(a.content.replaceChild(s,d))}if(e.content.size){if(e.openStart||e.openEnd||i.depth!=n||r.depth!=n){let{start:d,end:f}=function BC(i,r){let e=r.depth-i.openStart,s=r.node(e).copy(i.content);for(let a=e-1;a>=0;a--)s=r.node(a).copy(Me.from(s));return{start:s.resolveNoCache(i.openStart+e),end:s.resolveNoCache(s.content.size-i.openEnd-e)}}(e,i);return Lo(a,U_(i,d,f,r,n))}{let d=i.parent,f=d.content;return Lo(d,f.cut(0,i.parentOffset).append(e.content).append(f.cut(r.parentOffset)))}}return Lo(a,Nu(i,r,n))}function P_(i,r){if(!r.type.compatibleContent(i.type))throw new Uc("Cannot join "+r.type.name+" onto "+i.type.name)}function Wf(i,r,e){let n=i.node(e);return P_(n,r.node(e)),n}function Ta(i,r){let e=r.length-1;e>=0&&i.isText&&i.sameMarkup(r[e])?r[e]=i.withText(r[e].text+i.text):r.push(i)}function Bc(i,r,e,n){let s=(r||i).node(e),a=0,d=r?r.index(e):s.childCount;i&&(a=i.index(e),i.depth>e?a++:i.textOffset&&(Ta(i.nodeAfter,n),a++));for(let f=a;f<d;f++)Ta(s.child(f),n);r&&r.depth==e&&r.textOffset&&Ta(r.nodeBefore,n)}function Lo(i,r){if(!i.type.validContent(r))throw new Uc("Invalid content for node "+i.type.name);return i.copy(r)}function U_(i,r,e,n,s){let a=i.depth>s&&Wf(i,r,s+1),d=n.depth>s&&Wf(e,n,s+1),f=[];return Bc(null,i,s,f),a&&d&&r.index(s)==e.index(s)?(P_(a,d),Ta(Lo(a,U_(i,r,e,n,s+1)),f)):(a&&Ta(Lo(a,Nu(i,r,s+1)),f),Bc(r,e,s,f),d&&Ta(Lo(d,Nu(e,n,s+1)),f)),Bc(n,null,s,f),new Me(f)}function Nu(i,r,e){let n=[];return Bc(null,i,e,n),i.depth>e&&Ta(Lo(Wf(i,r,e+1),Nu(i,r,e+1)),n),Bc(r,null,e,n),new Me(n)}st.empty=new st(Me.empty,0,0);class Gc{constructor(r,e,n){this.pos=r,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(r){return null==r?this.depth:r<0?this.depth+r:r}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(r){return this.path[3*this.resolveDepth(r)]}index(r){return this.path[3*this.resolveDepth(r)+1]}indexAfter(r){return r=this.resolveDepth(r),this.index(r)+(r!=this.depth||this.textOffset?1:0)}start(r){return 0==(r=this.resolveDepth(r))?0:this.path[3*r-1]+1}end(r){return r=this.resolveDepth(r),this.start(r)+this.node(r).content.size}before(r){if(!(r=this.resolveDepth(r)))throw new RangeError("There is no position before the top-level node");return r==this.depth+1?this.pos:this.path[3*r-1]}after(r){if(!(r=this.resolveDepth(r)))throw new RangeError("There is no position after the top-level node");return r==this.depth+1?this.pos:this.path[3*r-1]+this.path[3*r].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let r=this.parent,e=this.index(this.depth);if(e==r.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=r.child(e);return n?r.child(e).cut(n):s}get nodeBefore(){let r=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(r).cut(0,e):0==r?null:this.parent.child(r-1)}posAtIndex(r,e){e=this.resolveDepth(e);let n=this.path[3*e],s=0==e?0:this.path[3*e-1]+1;for(let a=0;a<r;a++)s+=n.child(a).nodeSize;return s}marks(){let r=this.parent,e=this.index();if(0==r.content.size)return Ln.none;if(this.textOffset)return r.child(e).marks;let n=r.maybeChild(e-1),s=r.maybeChild(e);if(!n){let f=n;n=s,s=f}let a=n.marks;for(var d=0;d<a.length;d++)!1===a[d].type.spec.inclusive&&(!s||!a[d].isInSet(s.marks))&&(a=a[d--].removeFromSet(a));return a}marksAcross(r){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,s=r.parent.maybeChild(r.index());for(var a=0;a<n.length;a++)!1===n[a].type.spec.inclusive&&(!s||!n[a].isInSet(s.marks))&&(n=n[a--].removeFromSet(n));return n}sharedDepth(r){for(let e=this.depth;e>0;e--)if(this.start(e)<=r&&this.end(e)>=r)return e;return 0}blockRange(r=this,e){if(r.pos<this.pos)return r.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==r.pos?1:0);n>=0;n--)if(r.pos<=this.end(n)&&(!e||e(this.node(n))))return new zc(this,r,n);return null}sameParent(r){return this.pos-this.parentOffset==r.pos-r.parentOffset}max(r){return r.pos>this.pos?r:this}min(r){return r.pos<this.pos?r:this}toString(){let r="";for(let e=1;e<=this.depth;e++)r+=(r?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return r+":"+this.parentOffset}static resolve(r,e){if(!(e>=0&&e<=r.content.size))throw new RangeError("Position "+e+" out of range");let n=[],s=0,a=e;for(let d=r;;){let{index:f,offset:p}=d.content.findIndex(a),g=a-p;if(n.push(d,f,s+p),!g||(d=d.child(f),d.isText))break;a=g-1,s+=p+1}return new Gc(e,n,a)}static resolveCached(r,e){for(let s=0;s<jf.length;s++){let a=jf[s];if(a.pos==e&&a.doc==r)return a}let n=jf[Fu]=Gc.resolve(r,e);return Fu=(Fu+1)%to,n}}let jf=[],Fu=0,to=12;class zc{constructor(r,e,n){this.$from=r,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const GC=Object.create(null);class us{constructor(r,e,n,s=Ln.none){this.type=r,this.attrs=e,this.marks=s,this.content=n||Me.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(r){return this.content.child(r)}maybeChild(r){return this.content.maybeChild(r)}forEach(r){this.content.forEach(r)}nodesBetween(r,e,n,s=0){this.content.nodesBetween(r,e,n,s,this)}descendants(r){this.nodesBetween(0,this.content.size,r)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(r,e,n,s){return this.content.textBetween(r,e,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(r){return this==r||this.sameMarkup(r)&&this.content.eq(r.content)}sameMarkup(r){return this.hasMarkup(r.type,r.attrs,r.marks)}hasMarkup(r,e,n){return this.type==r&&$f(this.attrs,e||r.defaultAttrs||GC)&&Ln.sameSet(this.marks,n||Ln.none)}copy(r=null){return r==this.content?this:new us(this.type,this.attrs,r,this.marks)}mark(r){return r==this.marks?this:new us(this.type,this.attrs,this.content,r)}cut(r,e=this.content.size){return 0==r&&e==this.content.size?this:this.copy(this.content.cut(r,e))}slice(r,e=this.content.size,n=!1){if(r==e)return st.empty;let s=this.resolve(r),a=this.resolve(e),d=n?0:s.sharedDepth(e),f=s.start(d),g=s.node(d).content.cut(s.pos-f,a.pos-f);return new st(g,s.depth-d,a.depth-d)}replace(r,e,n){return F_(this.resolve(r),this.resolve(e),n)}nodeAt(r){for(let e=this;;){let{index:n,offset:s}=e.content.findIndex(r);if(e=e.maybeChild(n),!e)return null;if(s==r||e.isText)return e;r-=s+1}}childAfter(r){let{index:e,offset:n}=this.content.findIndex(r);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(r){if(0==r)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(r);if(n<r)return{node:this.content.child(e),index:e,offset:n};let s=this.content.child(e-1);return{node:s,index:e-1,offset:n-s.nodeSize}}resolve(r){return Gc.resolveCached(this,r)}resolveNoCache(r){return Gc.resolve(this,r)}rangeHasMark(r,e,n){let s=!1;return e>r&&this.nodesBetween(r,e,a=>(n.isInSet(a.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let r=this.type.name;return this.content.size&&(r+="("+this.content.toStringInner()+")"),B_(this.marks,r)}contentMatchAt(r){let e=this.type.contentMatch.matchFragment(this.content,0,r);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(r,e,n=Me.empty,s=0,a=n.childCount){let d=this.contentMatchAt(r).matchFragment(n,s,a),f=d&&d.matchFragment(this.content,e);if(!f||!f.validEnd)return!1;for(let p=s;p<a;p++)if(!this.type.allowsMarks(n.child(p).marks))return!1;return!0}canReplaceWith(r,e,n,s){if(s&&!this.type.allowsMarks(s))return!1;let a=this.contentMatchAt(r).matchType(n),d=a&&a.matchFragment(this.content,e);return!!d&&d.validEnd}canAppend(r){return r.content.size?this.canReplace(this.childCount,this.childCount,r.content):this.type.compatibleContent(r.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let r=Ln.none;for(let e=0;e<this.marks.length;e++)r=this.marks[e].addToSet(r);if(!Ln.sameSet(r,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let r={type:this.type.name};for(let e in this.attrs){r.attrs=this.attrs;break}return this.content.size&&(r.content=this.content.toJSON()),this.marks.length&&(r.marks=this.marks.map(e=>e.toJSON())),r}static fromJSON(r,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(r.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return r.text(e.text,n)}let s=Me.fromJSON(r,e.content);return r.nodeType(e.type).create(e.attrs,s,n)}}us.prototype.text=void 0;class Lu extends us{constructor(r,e,n,s){if(super(r,e,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B_(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(r,e){return this.text.slice(r,e)}get nodeSize(){return this.text.length}mark(r){return r==this.marks?this:new Lu(this.type,this.attrs,this.text,r)}withText(r){return r==this.text?this:new Lu(this.type,this.attrs,r,this.marks)}cut(r=0,e=this.text.length){return 0==r&&e==this.text.length?this:this.withText(this.text.slice(r,e))}eq(r){return this.sameMarkup(r)&&this.text==r.text}toJSON(){let r=super.toJSON();return r.text=this.text,r}}function B_(i,r){for(let e=i.length-1;e>=0;e--)r=i[e].type.name+"("+r+")";return r}class ya{constructor(r){this.validEnd=r,this.next=[],this.wrapCache=[]}static parse(r,e){let n=new G_(r,e);if(null==n.next)return ya.empty;let s=Qf(n);n.next&&n.err("Unexpected trailing text");let a=function qC(i){let r=Object.create(null);return function e(n){let s=[];n.forEach(d=>{i[d].forEach(({term:f,to:p})=>{if(!f)return;let g;for(let b=0;b<s.length;b++)s[b][0]==f&&(g=s[b][1]);Z_(i,p).forEach(b=>{g||s.push([f,g=[]]),-1==g.indexOf(b)&&g.push(b)})})});let a=r[n.join(",")]=new ya(n.indexOf(i.length-1)>-1);for(let d=0;d<s.length;d++){let f=s[d][1].sort(ep);a.next.push({type:s[d][0],next:r[f.join(",")]||e(f)})}return a}(Z_(i,0))}(function Xf(i){let r=[[]];return s(function a(d,f){if("choice"==d.type)return d.exprs.reduce((p,g)=>p.concat(a(g,f)),[]);if("seq"!=d.type){if("star"==d.type){let p=e();return n(f,p),s(a(d.expr,p),p),[n(p)]}if("plus"==d.type){let p=e();return s(a(d.expr,f),p),s(a(d.expr,p),p),[n(p)]}if("opt"==d.type)return[n(f)].concat(a(d.expr,f));if("range"==d.type){let p=f;for(let g=0;g<d.min;g++){let b=e();s(a(d.expr,p),b),p=b}if(-1==d.max)s(a(d.expr,p),p);else for(let g=d.min;g<d.max;g++){let b=e();n(p,b),s(a(d.expr,p),b),p=b}return[n(p)]}if("name"==d.type)return[n(f,void 0,d.value)];throw new Error("Unknown expr type")}for(let p=0;;p++){let g=a(d.exprs[p],f);if(p==d.exprs.length-1)return g;s(g,f=e())}}(i,0),e()),r;function e(){return r.push([])-1}function n(d,f,p){let g={term:p,to:f};return r[d].push(g),g}function s(d,f){d.forEach(p=>p.to=f)}}(s));return function YC(i,r){for(let e=0,n=[i];e<n.length;e++){let s=n[e],a=!s.validEnd,d=[];for(let f=0;f<s.next.length;f++){let{type:p,next:g}=s.next[f];d.push(p.name),a&&!(p.isText||p.hasRequiredAttrs())&&(a=!1),-1==n.indexOf(g)&&n.push(g)}a&&r.err("Only non-generatable nodes ("+d.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(a,n),a}matchType(r){for(let e=0;e<this.next.length;e++)if(this.next[e].type==r)return this.next[e].next;return null}matchFragment(r,e=0,n=r.childCount){let s=this;for(let a=e;s&&a<n;a++)s=s.matchType(r.child(a).type);return s}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let r=0;r<this.next.length;r++){let{type:e}=this.next[r];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(r){for(let e=0;e<this.next.length;e++)for(let n=0;n<r.next.length;n++)if(this.next[e].type==r.next[n].type)return!0;return!1}fillBefore(r,e=!1,n=0){let s=[this];return function a(d,f){let p=d.matchFragment(r,n);if(p&&(!e||p.validEnd))return Me.from(f.map(g=>g.createAndFill()));for(let g=0;g<d.next.length;g++){let{type:b,next:S}=d.next[g];if(!b.isText&&!b.hasRequiredAttrs()&&-1==s.indexOf(S)){s.push(S);let k=a(S,f.concat(b));if(k)return k}}return null}(this,[])}findWrapping(r){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==r)return this.wrapCache[n+1];let e=this.computeWrapping(r);return this.wrapCache.push(r,e),e}computeWrapping(r){let e=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),a=s.match;if(a.matchType(r)){let d=[];for(let f=s;f.type;f=f.via)d.push(f.type);return d.reverse()}for(let d=0;d<a.next.length;d++){let{type:f,next:p}=a.next[d];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in e)&&(!s.type||p.validEnd)&&(n.push({match:f.contentMatch,type:f,via:s}),e[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(r){if(r>=this.next.length)throw new RangeError(`There's no ${r}th edge in this content match`);return this.next[r]}toString(){let r=[];return function e(n){r.push(n);for(let s=0;s<n.next.length;s++)-1==r.indexOf(n.next[s].next)&&e(n.next[s].next)}(this),r.map((n,s)=>{let a=s+(n.validEnd?"*":" ")+" ";for(let d=0;d<n.next.length;d++)a+=(d?", ":"")+n.next[d].type.name+"->"+r.indexOf(n.next[d].next);return a}).join("\n")}}ya.empty=new ya(!0);class G_{constructor(r,e){this.string=r,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=r.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(r){return this.next==r&&(this.pos++||!0)}err(r){throw new SyntaxError(r+" (in content expression '"+this.string+"')")}}function Qf(i){let r=[];do{r.push(zC(i))}while(i.eat("|"));return 1==r.length?r[0]:{type:"choice",exprs:r}}function zC(i){let r=[];do{r.push(ZC(i))}while(i.next&&")"!=i.next&&"|"!=i.next);return 1==r.length?r[0]:{type:"seq",exprs:r}}function ZC(i){let r=function JC(i){if(i.eat("(")){let r=Qf(i);return i.eat(")")||i.err("Missing closing paren"),r}if(!/\W/.test(i.next)){let r=function VC(i,r){let e=i.nodeTypes,n=e[r];if(n)return[n];let s=[];for(let a in e){let d=e[a];d.groups.indexOf(r)>-1&&s.push(d)}return 0==s.length&&i.err("No node type or group '"+r+"' found"),s}(i,i.next).map(e=>(null==i.inline?i.inline=e.isInline:i.inline!=e.isInline&&i.err("Mixing inline and block content"),{type:"name",value:e}));return i.pos++,1==r.length?r[0]:{type:"choice",exprs:r}}i.err("Unexpected token '"+i.next+"'")}(i);for(;;)if(i.eat("+"))r={type:"plus",expr:r};else if(i.eat("*"))r={type:"star",expr:r};else if(i.eat("?"))r={type:"opt",expr:r};else{if(!i.eat("{"))break;r=HC(i,r)}return r}function z_(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let r=Number(i.next);return i.pos++,r}function HC(i,r){let e=z_(i),n=e;return i.eat(",")&&(n="}"!=i.next?z_(i):-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:e,max:n,expr:r}}function ep(i,r){return r-i}function Z_(i,r){let e=[];return function n(s){let a=i[s];if(1==a.length&&!a[0].term)return n(a[0].to);e.push(s);for(let d=0;d<a.length;d++){let{term:f,to:p}=a[d];!f&&-1==e.indexOf(p)&&n(p)}}(r),e.sort(ep)}function H_(i){let r=Object.create(null);for(let e in i){let n=i[e];if(!n.hasDefault)return null;r[e]=n.default}return r}function V_(i,r){let e=Object.create(null);for(let n in i){let s=r&&r[n];if(void 0===s){let a=i[n];if(!a.hasDefault)throw new RangeError("No value supplied for attribute "+n);s=a.default}e[n]=s}return e}function tp(i){let r=Object.create(null);if(i)for(let e in i)r[e]=new Zc(i[e]);return r}class Pu{constructor(r,e,n){this.name=r,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=tp(n.attrs),this.defaultAttrs=H_(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==r),this.isText="text"==r}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ya.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let r in this.attrs)if(this.attrs[r].isRequired)return!0;return!1}compatibleContent(r){return this==r||this.contentMatch.compatible(r.contentMatch)}computeAttrs(r){return!r&&this.defaultAttrs?this.defaultAttrs:V_(this.attrs,r)}create(r=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new us(this,this.computeAttrs(r),Me.from(e),Ln.setFrom(n))}createChecked(r=null,e,n){if(e=Me.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new us(this,this.computeAttrs(r),e,Ln.setFrom(n))}createAndFill(r=null,e,n){if(r=this.computeAttrs(r),(e=Me.from(e)).size){let d=this.contentMatch.fillBefore(e);if(!d)return null;e=d.append(e)}let s=this.contentMatch.matchFragment(e),a=s&&s.fillBefore(Me.empty,!0);return a?new us(this,r,e.append(a),Ln.setFrom(n)):null}validContent(r){let e=this.contentMatch.matchFragment(r);if(!e||!e.validEnd)return!1;for(let n=0;n<r.childCount;n++)if(!this.allowsMarks(r.child(n).marks))return!1;return!0}allowsMarkType(r){return null==this.markSet||this.markSet.indexOf(r)>-1}allowsMarks(r){if(null==this.markSet)return!0;for(let e=0;e<r.length;e++)if(!this.allowsMarkType(r[e].type))return!1;return!0}allowedMarks(r){if(null==this.markSet)return r;let e;for(let n=0;n<r.length;n++)this.allowsMarkType(r[n].type)?e&&e.push(r[n]):e||(e=r.slice(0,n));return e?e.length?e:Ln.none:r}static compile(r,e){let n=Object.create(null);r.forEach((a,d)=>n[a]=new Pu(a,e,d));let s=e.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let a in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Zc{constructor(r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default}get isRequired(){return!this.hasDefault}}class Hc{constructor(r,e,n,s){this.name=r,this.rank=e,this.schema=n,this.spec=s,this.attrs=tp(s.attrs),this.excluded=null;let a=H_(this.attrs);this.instance=a?new Ln(this,a):null}create(r=null){return!r&&this.instance?this.instance:new Ln(this,V_(this.attrs,r))}static compile(r,e){let n=Object.create(null),s=0;return r.forEach((a,d)=>n[a]=new Hc(a,s++,e,d)),n}removeFromSet(r){for(var e=0;e<r.length;e++)r[e].type==this&&(r=r.slice(0,e).concat(r.slice(e+1)),e--);return r}isInSet(r){for(let e=0;e<r.length;e++)if(r[e].type==this)return r[e]}excludes(r){return this.excluded.indexOf(r)>-1}}class np{constructor(r){this.cached=Object.create(null),this.spec={nodes:Jf.from(r.nodes),marks:Jf.from(r.marks||{}),topNode:r.topNode},this.nodes=Pu.compile(this.spec.nodes,this),this.marks=Hc.compile(this.spec.marks,this);let e=Object.create(null);for(let n in this.nodes){if(n in this.marks)throw new RangeError(n+" can not be both a node and a mark");let s=this.nodes[n],a=s.spec.content||"",d=s.spec.marks;s.contentMatch=e[a]||(e[a]=ya.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet="_"==d?null:d?Vc(this,d.split(" ")):""!=d&&s.inlineContent?null:[]}for(let n in this.marks){let s=this.marks[n],a=s.spec.excludes;s.excluded=null==a?[s]:""==a?[]:Vc(this,a.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(r,e=null,n,s){if("string"==typeof r)r=this.nodeType(r);else{if(!(r instanceof Pu))throw new RangeError("Invalid node type: "+r);if(r.schema!=this)throw new RangeError("Node type from different schema used ("+r.name+")")}return r.createChecked(e,n,s)}text(r,e){let n=this.nodes.text;return new Lu(n,n.defaultAttrs,r,Ln.setFrom(e))}mark(r,e){return"string"==typeof r&&(r=this.marks[r]),r.create(e)}nodeFromJSON(r){return us.fromJSON(this,r)}markFromJSON(r){return Ln.fromJSON(this,r)}nodeType(r){let e=this.nodes[r];if(!e)throw new RangeError("Unknown node type: "+r);return e}}function Vc(i,r){let e=[];for(let n=0;n<r.length;n++){let s=r[n],a=i.marks[s],d=a;if(a)e.push(a);else for(let f in i.marks){let p=i.marks[f];("_"==s||p.spec.group&&p.spec.group.split(" ").indexOf(s)>-1)&&e.push(d=p)}if(!d)throw new SyntaxError("Unknown mark type: '"+r[n]+"'")}return e}class Da{constructor(r,e){this.schema=r,this.rules=e,this.tags=[],this.styles=[],e.forEach(n=>{n.tag?this.tags.push(n):n.style&&this.styles.push(n)}),this.normalizeLists=!this.tags.some(n=>{if(!/^(ul|ol)\b/.test(n.tag)||!n.node)return!1;let s=r.nodes[n.node];return s.contentMatch.matchType(s)})}parse(r,e={}){let n=new no(this,e,!1);return n.addAll(r,e.from,e.to),n.finish()}parseSlice(r,e={}){let n=new no(this,e,!0);return n.addAll(r,e.from,e.to),st.maxOpen(n.finish())}matchTag(r,e,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let a=this.tags[s];if(q_(r,a.tag)&&(void 0===a.namespace||r.namespaceURI==a.namespace)&&(!a.context||e.matchesContext(a.context))){if(a.getAttrs){let d=a.getAttrs(r);if(!1===d)continue;a.attrs=d||void 0}return a}}}matchStyle(r,e,n,s){for(let a=s?this.styles.indexOf(s)+1:0;a<this.styles.length;a++){let d=this.styles[a],f=d.style;if(!(0!=f.indexOf(r)||d.context&&!n.matchesContext(d.context)||f.length>r.length&&(61!=f.charCodeAt(r.length)||f.slice(r.length+1)!=e))){if(d.getAttrs){let p=d.getAttrs(e);if(!1===p)continue;d.attrs=p||void 0}return d}}}static schemaRules(r){let e=[];function n(s){let a=s.priority??50,d=0;for(;d<e.length;d++){if((e[d].priority??50)<a)break}e.splice(d,0,s)}for(let s in r.marks){let a=r.marks[s].spec.parseDOM;a&&a.forEach(d=>{n(d=qc(d)),d.mark=s})}for(let s in r.nodes){let a=r.nodes[s].spec.parseDOM;a&&a.forEach(d=>{n(d=qc(d)),d.node=s})}return e}static fromSchema(r){return r.cached.domParser||(r.cached.domParser=new Da(r,Da.schemaRules(r)))}}const J_={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},KC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Hi={ol:!0,ul:!0};function Uu(i,r,e){return null!=r?(r?1:0)|("full"===r?2:0):i&&"pre"==i.whitespace?3:-5&e}class vl{constructor(r,e,n,s,a,d,f){this.type=r,this.attrs=e,this.marks=n,this.pendingMarks=s,this.solid=a,this.options=f,this.content=[],this.activeMarks=Ln.none,this.stashMarks=[],this.match=d||(4&f?null:r.contentMatch)}findWrapping(r){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(Me.from(r));if(!e){let s,n=this.type.contentMatch;return(s=n.findWrapping(r.type))?(this.match=n,s):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(r.type)}finish(r){if(!(1&this.options)){let s,n=this.content[this.content.length-1];if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let a=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-s[0].length))}}let e=Me.from(this.content);return!r&&this.match&&(e=e.append(this.match.fillBefore(Me.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(r){for(let e=this.stashMarks.length-1;e>=0;e--)if(r.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(r){for(let e=0,n=this.pendingMarks;e<n.length;e++){let s=n[e];(this.type?this.type.allowsMarkType(s.type):WC(s.type,r))&&!s.isInSet(this.activeMarks)&&(this.activeMarks=s.addToSet(this.activeMarks),this.pendingMarks=s.removeFromSet(this.pendingMarks))}}inlineContext(r){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:r.parentNode&&!J_.hasOwnProperty(r.parentNode.nodeName.toLowerCase())}}class no{constructor(r,e,n){this.parser=r,this.options=e,this.isOpen=n,this.open=0;let a,s=e.topNode,d=Uu(null,e.preserveWhitespace,0)|(n?4:0);a=s?new vl(s.type,s.attrs,Ln.none,Ln.none,!0,e.topMatch||s.type.contentMatch,d):new vl(n?null:r.schema.topNodeType,null,Ln.none,Ln.none,!0,null,d),this.nodes=[a],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(r){if(3==r.nodeType)this.addTextNode(r);else if(1==r.nodeType){let e=r.getAttribute("style"),n=e?this.readStyles(function Jc(i){let e,r=/\s*([\w-]+)\s*:\s*([^;]+)/g,n=[];for(;e=r.exec(i);)n.push(e[1],e[2].trim());return n}(e)):null,s=this.top;if(null!=n)for(let a=0;a<n.length;a++)this.addPendingMark(n[a]);if(this.addElement(r),null!=n)for(let a=0;a<n.length;a++)this.removePendingMark(n[a],s)}}addTextNode(r){let e=r.nodeValue,n=this.top;if(2&n.options||n.inlineContext(r)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let s=n.content[n.content.length-1],a=r.previousSibling;(!s||a&&"BR"==a.nodeName||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(r)}else this.findInside(r)}addElement(r,e){let s,n=r.nodeName.toLowerCase();Hi.hasOwnProperty(n)&&this.parser.normalizeLists&&function $C(i){for(let r=i.firstChild,e=null;r;r=r.nextSibling){let n=1==r.nodeType?r.nodeName.toLowerCase():null;n&&Hi.hasOwnProperty(n)&&e?(e.appendChild(r),r=e):"li"==n?e=r:n&&(e=null)}}(r);let a=this.options.ruleFromNode&&this.options.ruleFromNode(r)||(s=this.parser.matchTag(r,this,e));if(a?a.ignore:KC.hasOwnProperty(n))this.findInside(r),this.ignoreFallback(r);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(r=a.skip);let d,f=this.top,p=this.needsBlock;if(J_.hasOwnProperty(n))d=!0,f.type||(this.needsBlock=!0);else if(!r.firstChild)return void this.leafFallback(r);this.addAll(r),d&&this.sync(f),this.needsBlock=p}else this.addElementByRule(r,a,!1===a.consuming?s:void 0)}leafFallback(r){"BR"==r.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(r.ownerDocument.createTextNode("\n"))}ignoreFallback(r){"BR"==r.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(r){let e=Ln.none;e:for(let n=0;n<r.length;n+=2)for(let s;;){let a=this.parser.matchStyle(r[n],r[n+1],this,s);if(!a)continue e;if(a.ignore)return null;if(e=this.parser.schema.marks[a.mark].create(a.attrs).addToSet(e),!1!==a.consuming)break;s=a}return e}addElementByRule(r,e,n){let s,a,d;e.node?(a=this.parser.schema.nodes[e.node],a.isLeaf?this.insertNode(a.create(e.attrs))||this.leafFallback(r):s=this.enter(a,e.attrs||null,e.preserveWhitespace)):(d=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(d));let f=this.top;if(a&&a.isLeaf)this.findInside(r);else if(n)this.addElement(r,n);else if(e.getContent)this.findInside(r),e.getContent(r,this.parser.schema).forEach(p=>this.insertNode(p));else{let p=r;"string"==typeof e.contentElement?p=r.querySelector(e.contentElement):"function"==typeof e.contentElement?p=e.contentElement(r):e.contentElement&&(p=e.contentElement),this.findAround(r,p,!0),this.addAll(p)}s&&this.sync(f)&&this.open--,d&&this.removePendingMark(d,f)}addAll(r,e,n){let s=e||0;for(let a=e?r.childNodes[e]:r.firstChild,d=null==n?null:r.childNodes[n];a!=d;a=a.nextSibling,++s)this.findAtPoint(r,s),this.addDOM(a);this.findAtPoint(r,s)}findPlace(r){let e,n;for(let s=this.open;s>=0;s--){let a=this.nodes[s],d=a.findWrapping(r);if(d&&(!e||e.length>d.length)&&(e=d,n=a,!d.length)||a.solid)break}if(!e)return!1;this.sync(n);for(let s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0}insertNode(r){if(r.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(r)){this.closeExtra();let e=this.top;e.applyPending(r.type),e.match&&(e.match=e.match.matchType(r.type));let n=e.activeMarks;for(let s=0;s<r.marks.length;s++)(!e.type||e.type.allowsMarkType(r.marks[s].type))&&(n=r.marks[s].addToSet(n));return e.content.push(r.mark(n)),!0}return!1}enter(r,e,n){let s=this.findPlace(r.create(e));return s&&this.enterInner(r,e,!0,n),s}enterInner(r,e=null,n=!1,s){this.closeExtra();let a=this.top;a.applyPending(r),a.match=a.match&&a.match.matchType(r);let d=Uu(r,s,a.options);4&a.options&&0==a.content.length&&(d|=4),this.nodes.push(new vl(r,e,a.activeMarks,a.pendingMarks,n,null,d)),this.open++}closeExtra(r=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(r));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(r){for(let e=this.open;e>=0;e--)if(this.nodes[e]==r)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let r=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let s=n.length-1;s>=0;s--)r+=n[s].nodeSize;e&&r++}return r}findAtPoint(r,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==r&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(r){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==r.nodeType&&r.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(r,e,n){if(r!=e&&this.find)for(let s=0;s<this.find.length;s++)null==this.find[s].pos&&1==r.nodeType&&r.contains(this.find[s].node)&&e.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(r){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==r&&(this.find[e].pos=this.currentPos-(r.nodeValue.length-this.find[e].offset))}matchesContext(r){if(r.indexOf("|")>-1)return r.split(/\s*\|\s*/).some(this.matchesContext,this);let e=r.split("/"),n=this.options.context,s=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),a=(s?0:1)-(n?n.depth+1:0),d=(f,p)=>{for(;f>=0;f--){let g=e[f];if(""==g){if(f==e.length-1||0==f)continue;for(;p>=a;p--)if(d(f-1,p))return!0;return!1}{let b=p>0||0==p&&s?this.nodes[p].type:n&&p>=a?n.node(p-a).type:null;if(!b||b.name!=g&&-1==b.groups.indexOf(g))return!1;p--}}return!0};return d(e.length-1,this.open)}textblockFromContext(){let r=this.options.context;if(r)for(let e=r.depth;e>=0;e--){let n=r.node(e).contentMatchAt(r.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let n=this.parser.schema.nodes[e];if(n.isTextblock&&n.defaultAttrs)return n}}addPendingMark(r){let e=function sy(i,r){for(let e=0;e<r.length;e++)if(i.eq(r[e]))return r[e]}(r,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=r.addToSet(this.top.pendingMarks)}removePendingMark(r,e){for(let n=this.open;n>=0;n--){let s=this.nodes[n];if(s.pendingMarks.lastIndexOf(r)>-1)s.pendingMarks=r.removeFromSet(s.pendingMarks);else{s.activeMarks=r.removeFromSet(s.activeMarks);let d=s.popFromStashMark(r);d&&s.type&&s.type.allowsMarkType(d.type)&&(s.activeMarks=d.addToSet(s.activeMarks))}if(s==e)break}}}function q_(i,r){return(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,r)}function qc(i){let r={};for(let e in i)r[e]=i[e];return r}function WC(i,r){let e=r.schema.nodes;for(let n in e){let s=e[n];if(!s.allowsMarkType(i))continue;let a=[],d=f=>{a.push(f);for(let p=0;p<f.edgeCount;p++){let{type:g,next:b}=f.edge(p);if(g==r||a.indexOf(b)<0&&d(b))return!0}};if(d(s.contentMatch))return!0}}class io{constructor(r,e){this.nodes=r,this.marks=e}serializeFragment(r,e={},n){n||(n=Y_(e).createDocumentFragment());let s=n,a=[];return r.forEach(d=>{if(a.length||d.marks.length){let f=0,p=0;for(;f<a.length&&p<d.marks.length;){let g=d.marks[p];if(this.marks[g.type.name]){if(!g.eq(a[f][0])||!1===g.type.spec.spanning)break;f++,p++}else p++}for(;f<a.length;)s=a.pop()[1];for(;p<d.marks.length;){let g=d.marks[p++],b=this.serializeMark(g,d.isInline,e);b&&(a.push([g,s]),s.appendChild(b.dom),s=b.contentDOM||b.dom)}}s.appendChild(this.serializeNodeInner(d,e))}),n}serializeNodeInner(r,e){let{dom:n,contentDOM:s}=io.renderSpec(Y_(e),this.nodes[r.type.name](r));if(s){if(r.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(r.content,e,s)}return n}serializeNode(r,e={}){let n=this.serializeNodeInner(r,e);for(let s=r.marks.length-1;s>=0;s--){let a=this.serializeMark(r.marks[s],r.isInline,e);a&&((a.contentDOM||a.dom).appendChild(n),n=a.dom)}return n}serializeMark(r,e,n={}){let s=this.marks[r.type.name];return s&&io.renderSpec(Y_(n),s(r,e))}static renderSpec(r,e,n=null){if("string"==typeof e)return{dom:r.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let s=e[0],a=s.indexOf(" ");a>0&&(n=s.slice(0,a),s=s.slice(a+1));let d,f=n?r.createElementNS(n,s):r.createElement(s),p=e[1],g=1;if(p&&"object"==typeof p&&null==p.nodeType&&!Array.isArray(p)){g=2;for(let b in p)if(null!=p[b]){let S=b.indexOf(" ");S>0?f.setAttributeNS(b.slice(0,S),b.slice(S+1),p[b]):f.setAttribute(b,p[b])}}for(let b=g;b<e.length;b++){let S=e[b];if(0===S){if(b<e.length-1||b>g)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}{let{dom:k,contentDOM:T}=io.renderSpec(r,S,n);if(f.appendChild(k),T){if(d)throw new RangeError("Multiple content holes");d=T}}}return{dom:f,contentDOM:d}}static fromSchema(r){return r.cached.domSerializer||(r.cached.domSerializer=new io(this.nodesFromSchema(r),this.marksFromSchema(r)))}static nodesFromSchema(r){let e=jC(r.nodes);return e.text||(e.text=n=>n.text),e}static marksFromSchema(r){return jC(r.marks)}}function jC(i){let r={};for(let e in i){let n=i[e].spec.toDOM;n&&(r[e]=n)}return r}function Y_(i){return i.document||window.document}const Yc=Math.pow(2,16);function Bu(i,r){return i+r*Yc}function QC(i){return 65535&i}class rp{constructor(r,e,n){this.pos=r,this.delInfo=e,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class qr{constructor(r,e=!1){if(this.ranges=r,this.inverted=e,!r.length&&qr.empty)return qr.empty}recover(r){let e=0,n=QC(r);if(!this.inverted)for(let s=0;s<n;s++)e+=this.ranges[3*s+2]-this.ranges[3*s+1];return this.ranges[3*n]+e+function XC(i){return(i-(65535&i))/Yc}(r)}mapResult(r,e=1){return this._map(r,e,!1)}map(r,e=1){return this._map(r,e,!0)}_map(r,e,n){let s=0,a=this.inverted?2:1,d=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let p=this.ranges[f]-(this.inverted?s:0);if(p>r)break;let g=this.ranges[f+a],b=this.ranges[f+d],S=p+g;if(r<=S){let T=p+s+((g?r==p?-1:r==S?1:e:e)<0?0:b);if(n)return T;let F=r==(e<0?p:S)?null:Bu(f/3,r-p),K=r==p?2:r==S?1:4;return(e<0?r!=p:r!=S)&&(K|=8),new rp(T,K,F)}s+=b-g}return n?r+s:new rp(r+s,0,null)}touches(r,e){let n=0,s=QC(e),a=this.inverted?2:1,d=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let p=this.ranges[f]-(this.inverted?n:0);if(p>r)break;let g=this.ranges[f+a];if(r<=p+g&&f==3*s)return!0;n+=this.ranges[f+d]-g}return!1}forEach(r){let e=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,a=0;s<this.ranges.length;s+=3){let d=this.ranges[s],f=d-(this.inverted?a:0),p=d+(this.inverted?0:a),g=this.ranges[s+e],b=this.ranges[s+n];r(f,f+g,p,p+b),a+=b-g}}invert(){return new qr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(r){return 0==r?qr.empty:new qr(r<0?[0,-r,0]:[0,0,r])}}qr.empty=new qr([]);class bl{constructor(r=[],e,n=0,s=r.length){this.maps=r,this.mirror=e,this.from=n,this.to=s}slice(r=0,e=this.maps.length){return new bl(this.maps,this.mirror,r,e)}copy(){return new bl(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(r,e){this.to=this.maps.push(r),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(r){for(let e=0,n=this.maps.length;e<r.maps.length;e++){let s=r.getMirror(e);this.appendMap(r.maps[e],null!=s&&s<e?n+s:void 0)}}getMirror(r){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==r)return this.mirror[e+(e%2?-1:1)]}setMirror(r,e){this.mirror||(this.mirror=[]),this.mirror.push(r,e)}appendMappingInverted(r){for(let e=r.maps.length-1,n=this.maps.length+r.maps.length;e>=0;e--){let s=r.getMirror(e);this.appendMap(r.maps[e].invert(),null!=s&&s>e?n-s-1:void 0)}}invert(){let r=new bl;return r.appendMappingInverted(this),r}map(r,e=1){if(this.mirror)return this._map(r,e,!0);for(let n=this.from;n<this.to;n++)r=this.maps[n].map(r,e);return r}mapResult(r,e=1){return this._map(r,e,!1)}_map(r,e,n){let s=0;for(let a=this.from;a<this.to;a++){let f=this.maps[a].mapResult(r,e);if(null!=f.recover){let p=this.getMirror(a);if(null!=p&&p>a&&p<this.to){a=p,r=this.maps[p].recover(f.recover);continue}}s|=f.delInfo,r=f.pos}return n?r:new rp(r,s,null)}}const Kc=Object.create(null);class Tr{getMap(){return qr.empty}merge(r){return null}static fromJSON(r,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Kc[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(r,e)}static jsonID(r,e){if(r in Kc)throw new RangeError("Duplicate use of step JSON ID "+r);return Kc[r]=e,e.prototype.jsonID=r,e}}class ci{constructor(r,e){this.doc=r,this.failed=e}static ok(r){return new ci(r,null)}static fail(r){return new ci(null,r)}static fromReplace(r,e,n,s){try{return ci.ok(r.replace(e,n,s))}catch(a){if(a instanceof Uc)return ci.fail(a.message);throw a}}}function sp(i,r,e){let n=[];for(let s=0;s<i.childCount;s++){let a=i.child(s);a.content.size&&(a=a.copy(sp(a.content,r,a))),a.isInline&&(a=r(a,e,s)),n.push(a)}return Me.fromArray(n)}class Os extends Tr{constructor(r,e,n){super(),this.from=r,this.to=e,this.mark=n}apply(r){let e=r.slice(this.from,this.to),n=r.resolve(this.from),s=n.node(n.sharedDepth(this.to)),a=new st(sp(e.content,(d,f)=>d.isAtom&&f.type.allowsMarkType(this.mark.type)?d.mark(this.mark.addToSet(d.marks)):d,s),e.openStart,e.openEnd);return ci.fromReplace(r,this.from,this.to,a)}invert(){return new sr(this.from,this.to,this.mark)}map(r){let e=r.mapResult(this.from,1),n=r.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new Os(e.pos,n.pos,this.mark)}merge(r){return r instanceof Os&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from?new Os(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(r,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Os(e.from,e.to,r.markFromJSON(e.mark))}}Tr.jsonID("addMark",Os);class sr extends Tr{constructor(r,e,n){super(),this.from=r,this.to=e,this.mark=n}apply(r){let e=r.slice(this.from,this.to),n=new st(sp(e.content,s=>s.mark(this.mark.removeFromSet(s.marks)),r),e.openStart,e.openEnd);return ci.fromReplace(r,this.from,this.to,n)}invert(){return new Os(this.from,this.to,this.mark)}map(r){let e=r.mapResult(this.from,1),n=r.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new sr(e.pos,n.pos,this.mark)}merge(r){return r instanceof sr&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from?new sr(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(r,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new sr(e.from,e.to,r.markFromJSON(e.mark))}}Tr.jsonID("removeMark",sr);class Go extends Tr{constructor(r,e){super(),this.pos=r,this.mark=e}apply(r){let e=r.nodeAt(this.pos);if(!e)return ci.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return ci.fromReplace(r,this.pos,this.pos+1,new st(Me.from(n),0,e.isLeaf?0:1))}invert(r){let e=r.nodeAt(this.pos);if(e){let n=this.mark.addToSet(e.marks);if(n.length==e.marks.length){for(let s=0;s<e.marks.length;s++)if(!e.marks[s].isInSet(n))return new Go(this.pos,e.marks[s]);return new Go(this.pos,this.mark)}}return new xl(this.pos,this.mark)}map(r){let e=r.mapResult(this.pos,1);return e.deletedAfter?null:new Go(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(r,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Go(e.pos,r.markFromJSON(e.mark))}}Tr.jsonID("addNodeMark",Go);class xl extends Tr{constructor(r,e){super(),this.pos=r,this.mark=e}apply(r){let e=r.nodeAt(this.pos);if(!e)return ci.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return ci.fromReplace(r,this.pos,this.pos+1,new st(Me.from(n),0,e.isLeaf?0:1))}invert(r){let e=r.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new Go(this.pos,this.mark):this}map(r){let e=r.mapResult(this.pos,1);return e.deletedAfter?null:new xl(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(r,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new xl(e.pos,r.markFromJSON(e.mark))}}Tr.jsonID("removeNodeMark",xl);class fr extends Tr{constructor(r,e,n,s=!1){super(),this.from=r,this.to=e,this.slice=n,this.structure=s}apply(r){return this.structure&&op(r,this.from,this.to)?ci.fail("Structure replace would overwrite content"):ci.fromReplace(r,this.from,this.to,this.slice)}getMap(){return new qr([this.from,this.to-this.from,this.slice.size])}invert(r){return new fr(this.from,this.from+this.slice.size,r.slice(this.from,this.to))}map(r){let e=r.mapResult(this.from,1),n=r.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new fr(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(r){if(!(r instanceof fr)||r.structure||this.structure)return null;if(this.from+this.slice.size!=r.from||this.slice.openEnd||r.slice.openStart){if(r.to!=this.from||this.slice.openStart||r.slice.openEnd)return null;{let e=this.slice.size+r.slice.size==0?st.empty:new st(r.slice.content.append(this.slice.content),r.slice.openStart,this.slice.openEnd);return new fr(r.from,this.to,e,this.structure)}}{let e=this.slice.size+r.slice.size==0?st.empty:new st(this.slice.content.append(r.slice.content),this.slice.openStart,r.slice.openEnd);return new fr(this.from,this.to+(r.to-r.from),e,this.structure)}}toJSON(){let r={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r}static fromJSON(r,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new fr(e.from,e.to,st.fromJSON(r,e.slice),!!e.structure)}}Tr.jsonID("replace",fr);class wi extends Tr{constructor(r,e,n,s,a,d,f=!1){super(),this.from=r,this.to=e,this.gapFrom=n,this.gapTo=s,this.slice=a,this.insert=d,this.structure=f}apply(r){if(this.structure&&(op(r,this.from,this.gapFrom)||op(r,this.gapTo,this.to)))return ci.fail("Structure gap-replace would overwrite content");let e=r.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return ci.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?ci.fromReplace(r,this.from,this.to,n):ci.fail("Content does not fit in gap")}getMap(){return new qr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(r){let e=this.gapTo-this.gapFrom;return new wi(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,r.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(r){let e=r.mapResult(this.from,1),n=r.mapResult(this.to,-1),s=r.map(this.gapFrom,-1),a=r.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||s<e.pos||a>n.pos?null:new wi(e.pos,n.pos,s,a,this.slice,this.insert,this.structure)}toJSON(){let r={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(r.slice=this.slice.toJSON()),this.structure&&(r.structure=!0),r}static fromJSON(r,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new wi(e.from,e.to,e.gapFrom,e.gapTo,st.fromJSON(r,e.slice),e.insert,!!e.structure)}}function op(i,r,e){let n=i.resolve(r),s=e-r,a=n.depth;for(;s>0&&a>0&&n.indexAfter(a)==n.node(a).childCount;)a--,s--;if(s>0){let d=n.node(a).maybeChild(n.indexAfter(a));for(;s>0;){if(!d||d.isLeaf)return!0;d=d.firstChild,s--}}return!1}function iS(i,r,e){return(0==r||i.canReplace(r,i.childCount))&&(e==i.childCount||i.canReplace(0,e))}function Cl(i){let e=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let n=i.depth;;--n){let s=i.$from.node(n),a=i.$from.index(n),d=i.$to.indexAfter(n);if(n<i.depth&&s.canReplace(a,d,e))return n;if(0==n||s.type.spec.isolating||!iS(s,a,d))break}return null}function j_(i,r,e=null,n=i){let s=function sS(i,r){let{parent:e,startIndex:n,endIndex:s}=i,a=e.contentMatchAt(n).findWrapping(r);return a&&e.canReplaceWith(n,s,a.length?a[0]:r)?a:null}(i,r),a=s&&function oy(i,r){let{parent:e,startIndex:n,endIndex:s}=i,a=e.child(n),d=r.contentMatch.findWrapping(a.type);if(!d)return null;let p=(d.length?d[d.length-1]:r).contentMatch;for(let g=n;p&&g<s;g++)p=p.matchType(e.child(g).type);return p&&p.validEnd?d:null}(n,r);return a?s.map(Q_).concat({type:r,attrs:e}).concat(a.map(Q_)):null}function Q_(i){return{type:i,attrs:null}}function Sl(i,r,e=1,n){let s=i.resolve(r),a=s.depth-e,d=n&&n[n.length-1]||s.parent;if(a<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!d.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let g=s.depth-1,b=e-2;g>a;g--,b--){let S=s.node(g),k=s.index(g);if(S.type.spec.isolating)return!1;let T=S.content.cutByIndex(k,S.childCount),F=n&&n[b]||S;if(F!=S&&(T=T.replaceChild(0,F.type.create(F.attrs))),!S.canReplace(k+1,S.childCount)||!F.type.validContent(T))return!1}let f=s.indexAfter(a),p=n&&n[0];return s.node(a).canReplaceWith(f,f,p?p.type:s.node(a+1).type)}function zu(i,r){let e=i.resolve(r),n=e.index();return function X_(i,r){return!(!i||!r||i.isLeaf||!i.canAppend(r))}(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(n,n+1)}function lp(i,r,e=r,n=st.empty){if(r==e&&!n.size)return null;let s=i.resolve(r),a=i.resolve(e);return t0(s,a,n)?new fr(r,e,n):new hS(s,a,n).fit()}function t0(i,r,e){return!e.openStart&&!e.openEnd&&i.start()==r.start()&&i.parent.canReplace(i.index(),r.index(),e.content)}Tr.jsonID("replaceAround",wi);class hS{constructor(r,e,n){this.$from=r,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=Me.empty;for(let s=0;s<=r.depth;s++){let a=r.node(s);this.frontier.push({type:a.type,match:a.contentMatchAt(r.indexAfter(s))})}for(let s=r.depth;s>0;s--)this.placed=Me.from(r.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let g=this.findFittable();g?this.placeNodes(g):this.openMore()||this.dropNode()}let r=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(r<0?this.$to:n.doc.resolve(r));if(!s)return null;let a=this.placed,d=n.depth,f=s.depth;for(;d&&f&&1==a.childCount;)a=a.firstChild.content,d--,f--;let p=new st(a,d,f);return r>-1?new wi(n.pos,r,this.$to.pos,this.$to.end(),p,e):p.size||n.pos!=this.$to.pos?new fr(n.pos,s.pos,p):null}findFittable(){for(let r=1;r<=2;r++)for(let e=this.unplaced.openStart;e>=0;e--){let n,s=null;e?(s=cp(this.unplaced.content,e-1).firstChild,n=s.content):n=this.unplaced.content;let a=n.firstChild;for(let d=this.depth;d>=0;d--){let g,{type:f,match:p}=this.frontier[d],b=null;if(1==r&&(a?p.matchType(a.type)||(b=p.fillBefore(Me.from(a),!1)):s&&f.compatibleContent(s.type)))return{sliceDepth:e,frontierDepth:d,parent:s,inject:b};if(2==r&&a&&(g=p.findWrapping(a.type)))return{sliceDepth:e,frontierDepth:d,parent:s,wrap:g};if(s&&p.matchType(s.type))break}}}openMore(){let{content:r,openStart:e,openEnd:n}=this.unplaced,s=cp(r,e);return!(!s.childCount||s.firstChild.isLeaf||(this.unplaced=new st(r,e+1,Math.max(n,s.size+e>=r.size-n?e+1:0)),0))}dropNode(){let{content:r,openStart:e,openEnd:n}=this.unplaced,s=cp(r,e);if(s.childCount<=1&&e>0){let a=r.size-e<=e+s.size;this.unplaced=new st($c(r,e-1,1),e-1,a?e-1:n)}else this.unplaced=new st($c(r,e,1),e,n)}placeNodes({sliceDepth:r,frontierDepth:e,parent:n,inject:s,wrap:a}){for(;this.depth>e;)this.closeFrontierNode();if(a)for(let K=0;K<a.length;K++)this.openFrontierNode(a[K]);let d=this.unplaced,f=n?n.content:d.content,p=d.openStart-r,g=0,b=[],{match:S,type:k}=this.frontier[e];if(s){for(let K=0;K<s.childCount;K++)b.push(s.child(K));S=S.matchFragment(s)}let T=f.size+r-(d.content.size-d.openEnd);for(;g<f.childCount;){let K=f.child(g),fe=S.matchType(K.type);if(!fe)break;g++,(g>1||0==p||K.content.size)&&(S=fe,b.push(n0(K.mark(k.allowedMarks(K.marks)),1==g?p:0,g==f.childCount?T:-1)))}let F=g==f.childCount;F||(T=-1),this.placed=Wc(this.placed,e,Me.from(b)),this.frontier[e].match=S,F&&T<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let K=0,fe=f;K<T;K++){let Re=fe.lastChild;this.frontier.push({type:Re.type,match:Re.contentMatchAt(Re.childCount)}),fe=Re.content}this.unplaced=F?0==r?st.empty:new st($c(d.content,r-1,1),r-1,T<0?d.openEnd:r-1):new st($c(d.content,r,g),d.openStart,d.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,r=this.frontier[this.depth];if(!r.type.isTextblock||!dp(this.$to,this.$to.depth,r.type,r.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(r){e:for(let e=Math.min(this.depth,r.depth);e>=0;e--){let{match:n,type:s}=this.frontier[e],a=e<r.depth&&r.end(e+1)==r.pos+(r.depth-(e+1)),d=dp(r,e,s,n,a);if(d){for(let f=e-1;f>=0;f--){let{match:p,type:g}=this.frontier[f],b=dp(r,f,g,p,!0);if(!b||b.childCount)continue e}return{depth:e,fit:d,move:a?r.doc.resolve(r.after(e+1)):r}}}}close(r){let e=this.findCloseLevel(r);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Wc(this.placed,e.depth,e.fit)),r=e.move;for(let n=e.depth+1;n<=r.depth;n++){let s=r.node(n),a=s.type.contentMatch.fillBefore(s.content,!0,r.index(n));this.openFrontierNode(s.type,s.attrs,a)}return r}openFrontierNode(r,e=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(r),this.placed=Wc(this.placed,this.depth,Me.from(r.create(e,n))),this.frontier.push({type:r,match:r.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(Me.empty,!0);e.childCount&&(this.placed=Wc(this.placed,this.frontier.length,e))}}function $c(i,r,e){return 0==r?i.cutByIndex(e,i.childCount):i.replaceChild(0,i.firstChild.copy($c(i.firstChild.content,r-1,e)))}function Wc(i,r,e){return 0==r?i.append(e):i.replaceChild(i.childCount-1,i.lastChild.copy(Wc(i.lastChild.content,r-1,e)))}function cp(i,r){for(let e=0;e<r;e++)i=i.firstChild.content;return i}function n0(i,r,e){if(r<=0)return i;let n=i.content;return r>1&&(n=n.replaceChild(0,n0(n.firstChild,r-1,1==n.childCount?e-1:0))),r>0&&(n=i.type.contentMatch.fillBefore(n).append(n),e<=0&&(n=n.append(i.type.contentMatch.matchFragment(n).fillBefore(Me.empty,!0)))),i.copy(n)}function dp(i,r,e,n,s){let a=i.node(r),d=s?i.indexAfter(r):i.index(r);if(d==a.childCount&&!e.compatibleContent(a.type))return null;let f=n.fillBefore(a.content,!0,d);return f&&!function fS(i,r,e){for(let n=e;n<r.childCount;n++)if(!i.allowsMarks(r.child(n).marks))return!0;return!1}(e,a.content,d)?f:null}function pS(i){return i.spec.defining||i.spec.definingForContent}function r0(i,r,e,n,s){if(r<e){let a=i.firstChild;i=i.replaceChild(0,a.copy(r0(a.content,r+1,e,n,a)))}if(r>n){let a=s.contentMatchAt(0),d=a.fillBefore(i).append(i);i=d.append(a.matchFragment(d).fillBefore(Me.empty,!0))}return i}function s0(i,r){let e=[];for(let s=Math.min(i.depth,r.depth);s>=0;s--){let a=i.start(s);if(a<i.pos-(i.depth-s)||r.end(s)>r.pos+(r.depth-s)||i.node(s).type.spec.isolating||r.node(s).type.spec.isolating)break;(a==r.start(s)||s==i.depth&&s==r.depth&&i.parent.inlineContent&&r.parent.inlineContent&&s&&r.start(s-1)==a-1)&&e.push(s)}return e}class El extends Tr{constructor(r,e,n){super(),this.pos=r,this.attr=e,this.value=n}apply(r){let e=r.nodeAt(this.pos);if(!e)return ci.fail("No node at attribute step's position");let n=Object.create(null);for(let a in e.attrs)n[a]=e.attrs[a];n[this.attr]=this.value;let s=e.type.create(n,null,e.marks);return ci.fromReplace(r,this.pos,this.pos+1,new st(Me.from(s),0,e.isLeaf?0:1))}getMap(){return qr.empty}invert(r){return new El(this.pos,this.attr,r.nodeAt(this.pos).attrs[this.attr])}map(r){let e=r.mapResult(this.pos,1);return e.deletedAfter?null:new El(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(r,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new El(e.pos,e.attr,e.value)}}Tr.jsonID("attr",El);let wl=class extends Error{};wl=function i(r){let e=Error.call(this,r);return e.__proto__=i.prototype,e},(wl.prototype=Object.create(Error.prototype)).constructor=wl,wl.prototype.name="TransformError";class o0{constructor(r){this.doc=r,this.steps=[],this.docs=[],this.mapping=new bl}get before(){return this.docs.length?this.docs[0]:this.doc}step(r){let e=this.maybeStep(r);if(e.failed)throw new wl(e.failed);return this}maybeStep(r){let e=r.apply(this.doc);return e.failed||this.addStep(r,e.doc),e}get docChanged(){return this.steps.length>0}addStep(r,e){this.docs.push(this.doc),this.steps.push(r),this.mapping.appendMap(r.getMap()),this.doc=e}replace(r,e=r,n=st.empty){let s=lp(this.doc,r,e,n);return s&&this.step(s),this}replaceWith(r,e,n){return this.replace(r,e,new st(Me.from(n),0,0))}delete(r,e){return this.replace(r,e,st.empty)}insert(r,e){return this.replaceWith(r,r,e)}replaceRange(r,e,n){return function mS(i,r,e,n){if(!n.size)return i.deleteRange(r,e);let s=i.doc.resolve(r),a=i.doc.resolve(e);if(t0(s,a,n))return i.step(new fr(r,e,n));let d=s0(s,i.doc.resolve(e));0==d[d.length-1]&&d.pop();let f=-(s.depth+1);d.unshift(f);for(let k=s.depth,T=s.pos-1;k>0;k--,T--){let F=s.node(k).type.spec;if(F.defining||F.definingAsContext||F.isolating)break;d.indexOf(k)>-1?f=k:s.before(k)==T&&d.splice(1,0,-k)}let p=d.indexOf(f),g=[],b=n.openStart;for(let k=n.content,T=0;;T++){let F=k.firstChild;if(g.push(F),T==n.openStart)break;k=F.content}for(let k=b-1;k>=0;k--){let T=g[k].type,F=pS(T);if(F&&s.node(p).type!=T)b=k;else if(F||!T.isTextblock)break}for(let k=n.openStart;k>=0;k--){let T=(k+b+1)%(n.openStart+1),F=g[T];if(F)for(let K=0;K<d.length;K++){let fe=d[(K+p)%d.length],Re=!0;fe<0&&(Re=!1,fe=-fe);let Ae=s.node(fe-1),Qe=s.index(fe-1);if(Ae.canReplaceWith(Qe,Qe,F.type,F.marks))return i.replace(s.before(fe),Re?a.after(fe):e,new st(r0(n.content,0,n.openStart,T),T,n.openEnd))}}let S=i.steps.length;for(let k=d.length-1;k>=0&&(i.replace(r,e,n),!(i.steps.length>S));k--){let T=d[k];T<0||(r=s.before(T),e=a.after(T))}}(this,r,e,n),this}replaceRangeWith(r,e,n){return function gS(i,r,e,n){if(!n.isInline&&r==e&&i.doc.resolve(r).parent.content.size){let s=function e0(i,r,e){let n=i.resolve(r);if(n.parent.canReplaceWith(n.index(),n.index(),e))return r;if(0==n.parentOffset)for(let s=n.depth-1;s>=0;s--){let a=n.index(s);if(n.node(s).canReplaceWith(a,a,e))return n.before(s+1);if(a>0)return null}if(n.parentOffset==n.parent.content.size)for(let s=n.depth-1;s>=0;s--){let a=n.indexAfter(s);if(n.node(s).canReplaceWith(a,a,e))return n.after(s+1);if(a<n.node(s).childCount)return null}return null}(i.doc,r,n.type);null!=s&&(r=e=s)}i.replaceRange(r,e,new st(Me.from(n),0,0))}(this,r,e,n),this}deleteRange(r,e){return function _S(i,r,e){let n=i.doc.resolve(r),s=i.doc.resolve(e),a=s0(n,s);for(let d=0;d<a.length;d++){let f=a[d],p=d==a.length-1;if(p&&0==f||n.node(f).type.contentMatch.validEnd)return i.delete(n.start(f),s.end(f));if(f>0&&(p||n.node(f-1).canReplace(n.index(f-1),s.indexAfter(f-1))))return i.delete(n.before(f),s.after(f))}for(let d=1;d<=n.depth&&d<=s.depth;d++)if(r-n.start(d)==n.depth-d&&e>n.end(d)&&s.end(d)-e!=s.depth-d)return i.delete(n.before(d),e);i.delete(r,e)}(this,r,e),this}lift(r,e){return function rS(i,r,e){let{$from:n,$to:s,depth:a}=r,d=n.before(a+1),f=s.after(a+1),p=d,g=f,b=Me.empty,S=0;for(let F=a,K=!1;F>e;F--)K||n.index(F)>0?(K=!0,b=Me.from(n.node(F).copy(b)),S++):p--;let k=Me.empty,T=0;for(let F=a,K=!1;F>e;F--)K||s.after(F+1)<s.end(F)?(K=!0,k=Me.from(s.node(F).copy(k)),T++):g++;i.step(new wi(p,g,d,f,new st(b.append(k),S,T),b.size-S,!0))}(this,r,e),this}join(r,e=1){return function uS(i,r,e){let n=new fr(r-e,r+e,st.empty,!0);i.step(n)}(this,r,e),this}wrap(r,e){return function oS(i,r,e){let n=Me.empty;for(let d=e.length-1;d>=0;d--){if(n.size){let f=e[d].type.contentMatch.matchFragment(n);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=Me.from(e[d].type.create(e[d].attrs,n))}let s=r.start,a=r.end;i.step(new wi(s,a,s,a,new st(n,0,0),e.length,!0))}(this,r,e),this}setBlockType(r,e=r,n,s=null){return function aS(i,r,e,n,s){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=i.steps.length;i.doc.nodesBetween(r,e,(d,f)=>{if(d.isTextblock&&!d.hasMarkup(n,s)&&function lS(i,r,e){let n=i.resolve(r),s=n.index();return n.parent.canReplaceWith(s,s+1,e)}(i.doc,i.mapping.slice(a).map(f),n)){i.clearIncompatible(i.mapping.slice(a).map(f,1),n);let p=i.mapping.slice(a),g=p.map(f,1),b=p.map(f+d.nodeSize,1);return i.step(new wi(g,b,g+1,b-1,new st(Me.from(n.create(s,null,d.marks)),0,0),1,!0)),!1}})}(this,r,e,n,s),this}setNodeMarkup(r,e,n=null,s=[]){return function cS(i,r,e,n,s){let a=i.doc.nodeAt(r);if(!a)throw new RangeError("No node at given position");e||(e=a.type);let d=e.create(n,null,s||a.marks);if(a.isLeaf)return i.replaceWith(r,r+a.nodeSize,d);if(!e.validContent(a.content))throw new RangeError("Invalid content for node type "+e.name);i.step(new wi(r,r+a.nodeSize,r+1,r+a.nodeSize-1,new st(Me.from(d),0,0),1,!0))}(this,r,e,n,s),this}setNodeAttribute(r,e,n){return this.step(new El(r,e,n)),this}addNodeMark(r,e){return this.step(new Go(r,e)),this}removeNodeMark(r,e){if(!(e instanceof Ln)){let n=this.doc.nodeAt(r);if(!n)throw new RangeError("No node at position "+r);if(!(e=e.isInSet(n.marks)))return this}return this.step(new xl(r,e)),this}split(r,e=1,n){return function dS(i,r,e=1,n){let s=i.doc.resolve(r),a=Me.empty,d=Me.empty;for(let f=s.depth,p=s.depth-e,g=e-1;f>p;f--,g--){a=Me.from(s.node(f).copy(a));let b=n&&n[g];d=Me.from(b?b.type.create(b.attrs,d):s.node(f).copy(d))}i.step(new fr(r,r,new st(a.append(d),e,e),!0))}(this,r,e,n),this}addMark(r,e,n){return function eS(i,r,e,n){let d,f,s=[],a=[];i.doc.nodesBetween(r,e,(p,g,b)=>{if(!p.isInline)return;let S=p.marks;if(!n.isInSet(S)&&b.type.allowsMarkType(n.type)){let k=Math.max(g,r),T=Math.min(g+p.nodeSize,e),F=n.addToSet(S);for(let K=0;K<S.length;K++)S[K].isInSet(F)||(d&&d.to==k&&d.mark.eq(S[K])?d.to=T:s.push(d=new sr(k,T,S[K])));f&&f.to==k?f.to=T:a.push(f=new Os(k,T,n))}}),s.forEach(p=>i.step(p)),a.forEach(p=>i.step(p))}(this,r,e,n),this}removeMark(r,e,n){return function tS(i,r,e,n){let s=[],a=0;i.doc.nodesBetween(r,e,(d,f)=>{if(!d.isInline)return;a++;let p=null;if(n instanceof Hc){let b,g=d.marks;for(;b=n.isInSet(g);)(p||(p=[])).push(b),g=b.removeFromSet(g)}else n?n.isInSet(d.marks)&&(p=[n]):p=d.marks;if(p&&p.length){let g=Math.min(f+d.nodeSize,e);for(let b=0;b<p.length;b++){let k,S=p[b];for(let T=0;T<s.length;T++){let F=s[T];F.step==a-1&&S.eq(s[T].style)&&(k=F)}k?(k.to=g,k.step=a):s.push({style:S,from:Math.max(f,r),to:g,step:a})}}}),s.forEach(d=>i.step(new sr(d.from,d.to,d.style)))}(this,r,e,n),this}clearIncompatible(r,e,n){return function nS(i,r,e,n=e.contentMatch){let s=i.doc.nodeAt(r),a=[],d=r+1;for(let f=0;f<s.childCount;f++){let p=s.child(f),g=d+p.nodeSize,b=n.matchType(p.type);if(b){n=b;for(let S=0;S<p.marks.length;S++)e.allowsMarkType(p.marks[S].type)||i.step(new sr(d,g,p.marks[S]))}else a.push(new fr(d,g,st.empty));d=g}if(!n.validEnd){let f=n.fillBefore(Me.empty,!0);i.replace(d,d,new st(f,0,0))}for(let f=a.length-1;f>=0;f--)i.step(a[f])}(this,r,e,n),this}}const Zu=Object.create(null);class Zt{constructor(r,e,n){this.$anchor=r,this.$head=e,this.ranges=n||[new a0(r.min(e),r.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let r=this.ranges;for(let e=0;e<r.length;e++)if(r[e].$from.pos!=r[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(r,e=st.empty){let n=e.content.lastChild,s=null;for(let f=0;f<e.openEnd;f++)s=n,n=n.lastChild;let a=r.steps.length,d=this.ranges;for(let f=0;f<d.length;f++){let{$from:p,$to:g}=d[f],b=r.mapping.slice(a);r.replaceRange(b.map(p.pos),b.map(g.pos),f?st.empty:e),0==f&&c0(r,a,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(r,e){let n=r.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:d,$to:f}=s[a],p=r.mapping.slice(n),g=p.map(d.pos),b=p.map(f.pos);a?r.deleteRange(g,b):(r.replaceRangeWith(g,b,e),c0(r,n,e.isInline?-1:1))}}static findFrom(r,e,n=!1){let s=r.parent.inlineContent?new en(r):Aa(r.node(0),r.parent,r.pos,r.index(),e,n);if(s)return s;for(let a=r.depth-1;a>=0;a--){let d=e<0?Aa(r.node(0),r.node(a),r.before(a+1),r.index(a),e,n):Aa(r.node(0),r.node(a),r.after(a+1),r.index(a)+1,e,n);if(d)return d}return null}static near(r,e=1){return this.findFrom(r,e)||this.findFrom(r,-e)||new Vi(r.node(0))}static atStart(r){return Aa(r,r,0,0,1)||new Vi(r)}static atEnd(r){return Aa(r,r,r.content.size,r.childCount,-1)||new Vi(r)}static fromJSON(r,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Zu[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(r,e)}static jsonID(r,e){if(r in Zu)throw new RangeError("Duplicate use of selection JSON ID "+r);return Zu[r]=e,e.prototype.jsonID=r,e}getBookmark(){return en.between(this.$anchor,this.$head).getBookmark()}}Zt.prototype.visible=!0;class a0{constructor(r,e){this.$from=r,this.$to=e}}let l0=!1;function vS(i){!l0&&!i.parent.inlineContent&&(l0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}class en extends Zt{constructor(r,e=r){vS(r),vS(e),super(r,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(r,e){let n=r.resolve(e.map(this.head));if(!n.parent.inlineContent)return Zt.near(n);let s=r.resolve(e.map(this.anchor));return new en(s.parent.inlineContent?s:n,n)}replace(r,e=st.empty){if(super.replace(r,e),e==st.empty){let n=this.$from.marksAcross(this.$to);n&&r.ensureMarks(n)}}eq(r){return r instanceof en&&r.anchor==this.anchor&&r.head==this.head}getBookmark(){return new Hu(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(r,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new en(r.resolve(e.anchor),r.resolve(e.head))}static create(r,e,n=e){let s=r.resolve(e);return new this(s,n==e?s:r.resolve(n))}static between(r,e,n){let s=r.pos-e.pos;if((!n||s)&&(n=s>=0?1:-1),!e.parent.inlineContent){let a=Zt.findFrom(e,n,!0)||Zt.findFrom(e,-n,!0);if(!a)return Zt.near(e,n);e=a.$head}return r.parent.inlineContent||(0==s||(r=(Zt.findFrom(r,-n,!0)||Zt.findFrom(r,n,!0)).$anchor).pos<e.pos!=s<0)&&(r=e),new en(r,e)}}Zt.jsonID("text",en);class Hu{constructor(r,e){this.anchor=r,this.head=e}map(r){return new Hu(r.map(this.anchor),r.map(this.head))}resolve(r){return en.between(r.resolve(this.anchor),r.resolve(this.head))}}class vt extends Zt{constructor(r){let e=r.nodeAfter,n=r.node(0).resolve(r.pos+e.nodeSize);super(r,n),this.node=e}map(r,e){let{deleted:n,pos:s}=e.mapResult(this.anchor),a=r.resolve(s);return n?Zt.near(a):new vt(a)}content(){return new st(Me.from(this.node),0,0)}eq(r){return r instanceof vt&&r.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Vu(this.anchor)}static fromJSON(r,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new vt(r.resolve(e.anchor))}static create(r,e){return new vt(r.resolve(e))}static isSelectable(r){return!r.isText&&!1!==r.type.spec.selectable}}vt.prototype.visible=!1,Zt.jsonID("node",vt);class Vu{constructor(r){this.anchor=r}map(r){let{deleted:e,pos:n}=r.mapResult(this.anchor);return e?new Hu(n,n):new Vu(n)}resolve(r){let e=r.resolve(this.anchor),n=e.nodeAfter;return n&&vt.isSelectable(n)?new vt(e):Zt.near(e)}}class Vi extends Zt{constructor(r){super(r.resolve(0),r.resolve(r.content.size))}replace(r,e=st.empty){if(e==st.empty){r.delete(0,r.doc.content.size);let n=Zt.atStart(r.doc);n.eq(r.selection)||r.setSelection(n)}else super.replace(r,e)}toJSON(){return{type:"all"}}static fromJSON(r){return new Vi(r)}map(r){return new Vi(r)}eq(r){return r instanceof Vi}getBookmark(){return bS}}Zt.jsonID("all",Vi);const bS={map(){return this},resolve:i=>new Vi(i)};function Aa(i,r,e,n,s,a=!1){if(r.inlineContent)return en.create(i,e);for(let d=n-(s>0?0:1);s>0?d<r.childCount:d>=0;d+=s){let f=r.child(d);if(f.isAtom){if(!a&&vt.isSelectable(f))return vt.create(i,e-(s<0?f.nodeSize:0))}else{let p=Aa(i,f,e+s,s<0?f.childCount:0,s,a);if(p)return p}e+=f.nodeSize*s}return null}function c0(i,r,e){let n=i.steps.length-1;if(n<r)return;let d,s=i.steps[n];(s instanceof fr||s instanceof wi)&&(i.mapping.maps[n].forEach((f,p,g,b)=>{null==d&&(d=b)}),i.setSelection(Zt.near(i.doc.resolve(d),e)))}class xS extends o0{constructor(r){super(r.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=r.selection,this.storedMarks=r.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(r){if(r.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=r,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(r){return this.storedMarks=r,this.updated|=2,this}ensureMarks(r){return Ln.sameSet(this.storedMarks||this.selection.$from.marks(),r)||this.setStoredMarks(r),this}addStoredMark(r){return this.ensureMarks(r.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(r){return this.ensureMarks(r.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(r,e){super.addStep(r,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(r){return this.time=r,this}replaceSelection(r){return this.selection.replace(this,r),this}replaceSelectionWith(r,e=!0){let n=this.selection;return e&&(r=r.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Ln.none))),n.replaceWith(this,r),this}deleteSelection(){return this.selection.replace(this),this}insertText(r,e,n){let s=this.doc.type.schema;if(null==e)return r?this.replaceSelectionWith(s.text(r),!0):this.deleteSelection();{if(null==n&&(n=e),n=n??e,!r)return this.deleteRange(e,n);let a=this.storedMarks;if(!a){let d=this.doc.resolve(e);a=n==e?d.marks():d.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,s.text(r,a)),this.selection.empty||this.setSelection(Zt.near(this.selection.$to)),this}}setMeta(r,e){return this.meta["string"==typeof r?r:r.key]=e,this}getMeta(r){return this.meta["string"==typeof r?r:r.key]}get isGeneric(){for(let r in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function h0(i,r){return r&&i?i.bind(r):i}class jc{constructor(r,e,n){this.name=r,this.init=h0(e.init,n),this.apply=h0(e.apply,n)}}const CS=[new jc("doc",{init:i=>i.doc||i.schema.topNodeType.createAndFill(),apply:i=>i.doc}),new jc("selection",{init:(i,r)=>i.selection||Zt.atStart(r.doc),apply:i=>i.selection}),new jc("storedMarks",{init:i=>i.storedMarks||null,apply:(i,r,e,n)=>n.selection.$cursor?i.storedMarks:null}),new jc("scrollToSelection",{init:()=>0,apply:(i,r)=>i.scrolledIntoView?r+1:r})];class up{constructor(r,e){this.schema=r,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=CS.slice(),e&&e.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new jc(n.key,n.spec.state,n))})}}class Oa{constructor(r){this.config=r}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(r){return this.applyTransaction(r).state}filterTransaction(r,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let s=this.config.plugins[n];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,r,this))return!1}return!0}applyTransaction(r){if(!this.filterTransaction(r))return{state:this,transactions:[]};let e=[r],n=this.applyInner(r),s=null;for(;;){let a=!1;for(let d=0;d<this.config.plugins.length;d++){let f=this.config.plugins[d];if(f.spec.appendTransaction){let p=s?s[d].n:0,g=s?s[d].state:this,b=p<e.length&&f.spec.appendTransaction.call(f,p?e.slice(p):e,g,n);if(b&&n.filterTransaction(b,d)){if(b.setMeta("appendedTransaction",r),!s){s=[];for(let S=0;S<this.config.plugins.length;S++)s.push(S<d?{state:n,n:e.length}:{state:this,n:0})}e.push(b),n=n.applyInner(b),a=!0}s&&(s[d]={state:n,n:e.length})}}if(!a)return{state:n,transactions:e}}}applyInner(r){if(!r.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new Oa(this.config),n=this.config.fields;for(let s=0;s<n.length;s++){let a=n[s];e[a.name]=a.apply(r,this[a.name],this,e)}return e}get tr(){return new xS(this)}static create(r){let e=new up(r.doc?r.doc.type.schema:r.schema,r.plugins),n=new Oa(e);for(let s=0;s<e.fields.length;s++)n[e.fields[s].name]=e.fields[s].init(r,n);return n}reconfigure(r){let e=new up(this.schema,r.plugins),n=e.fields,s=new Oa(e);for(let a=0;a<n.length;a++){let d=n[a].name;s[d]=this.hasOwnProperty(d)?this[d]:n[a].init(r,s)}return s}toJSON(r){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(n=>n.toJSON())),r&&"object"==typeof r)for(let n in r){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=r[n],a=s.spec.state;a&&a.toJSON&&(e[n]=a.toJSON.call(s,this[s.key]))}return e}static fromJSON(r,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!r.schema)throw new RangeError("Required config field 'schema' missing");let s=new up(r.schema,r.plugins),a=new Oa(s);return s.fields.forEach(d=>{if("doc"==d.name)a.doc=us.fromJSON(r.schema,e.doc);else if("selection"==d.name)a.selection=Zt.fromJSON(a.doc,e.selection);else if("storedMarks"==d.name)e.storedMarks&&(a.storedMarks=e.storedMarks.map(r.schema.markFromJSON));else{if(n)for(let f in n){let p=n[f],g=p.spec.state;if(p.key==d.name&&g&&g.fromJSON&&Object.prototype.hasOwnProperty.call(e,f))return void(a[d.name]=g.fromJSON.call(p,r,e[f],a))}a[d.name]=d.init(r,a)}}),a}}function f0(i,r,e){for(let n in i){let s=i[n];s instanceof Function?s=s.bind(r):"handleDOMEvents"==n&&(s=f0(s,r,{})),e[n]=s}return e}class Yr{constructor(r){this.spec=r,this.props={},r.props&&f0(r.props,this,this.props),this.key=r.key?r.key.key:fp("plugin")}getState(r){return r[this.key]}}const hp=Object.create(null);function fp(i){return i in hp?i+"$"+ ++hp[i]:(hp[i]=0,i+"$")}class yr{constructor(r="key"){this.key=fp(r)}get(r){return r.config.pluginsByKey[this.key]}getState(r){return r[this.key]}}const Is="k-parent-node",zn="k-colgroup-data",Ms="k-resizable-node",Qc="k-editor-resize-handle",qu="data-dir-table-resize",pp="data-dir-image-resize",mp=(i,r)=>{const e=(i.ownerDocument||document).createElement(r);Array.from(i.rows).filter(n=>n.getAttribute(Is)===r).forEach(n=>{n.removeAttribute(Is),e.appendChild(n)}),e.children.length&&i.appendChild(e)},ei=(i,r)=>{const e=r.toUpperCase();i.filter(n=>n.nodeName===e).forEach(n=>{Array.from(n.children).forEach(s=>{s.setAttribute(Is,r),n.parentNode&&n.parentNode.insertBefore(s,n)}),n.remove()})},gp=i=>{const r=document.createElement("template");let e;if("content"in r)r.innerHTML=i,e=r.content;else{const n=(new DOMParser).parseFromString(i,"text/html");e=document.createDocumentFragment();const s=n.body;for(;s&&s.firstChild;)e.appendChild(s.firstChild)}return e},p0=i=>{const r=io.fromSchema(i.type.schema).serializeFragment(i.content);return(i=>{Array.from(i.querySelectorAll("table")).forEach(r=>{mp(r,"thead"),mp(r,"tbody"),mp(r,"tfoot");const e=Array.from(r.children).find(n=>0===n.children.length);e&&e.remove()})})(r),r},_p=(i,r,e)=>Da.fromSchema(r).parse(i,e),vp=(i,r,e)=>{const n=gp(i);return(i=>{Array.from(i.querySelectorAll("table")).forEach(r=>{const e=Array.from(r.children);e.some(s=>"THEAD"===s.nodeName||"TFOOT"===s.nodeName)&&(ei(e,"thead"),ei(e,"tbody"),ei(e,"tfoot"));const n=e.find(s=>"COLGROUP"===s.nodeName);n&&(r.setAttribute(zn,n.outerHTML),n.remove())})})(n),_p(n,r,e)},bp=i=>{const r=p0(i.doc),e=document.createElement("div");return e.appendChild(r),e.innerHTML},Tl=(i,r)=>{const e=r.style,n=r.value,s=r.newValue;if(!i)return{changed:!1,style:null};const a=i.split(/\s*;\s*/).filter(f=>Boolean(f)),d=a.filter(f=>{const p=f.split(/\s*:\s*/);return!(p[0].toLowerCase()===e&&n.test(p[1]))});return s&&d.push(`${e}: ${s}`),{style:d.join("; ")+(d.length?";":""),changed:Boolean(s)||d.length!==a.length}},m0=i=>i instanceof us?i.type.name:i.name,g0=(i,r=1)=>e=>((i,r=1)=>e=>{const{$from:n}=e;for(let s=n.depth;s>0;s--){const a=n.node(s);if(i(a)&&0==(r-=1))return{depth:s,node:a}}})(n=>m0(n)===m0(i),r)(e),_0=(i,r)=>(e,n)=>{const s=e.tr.replaceSelectionWith(i);r&&s.scrollIntoView(),n(s)},yl=i=>{const r=i.selection;if(r instanceof en||r instanceof Vi){const e=r.content().content;return e.textBetween(0,e.size)}return""},yS={before:/[^ !,?.\[\]{}()]+$/i,after:/^[^ !,?.\[\]{}()]+/i},Yu=(i,r,e)=>{if(!e.applyToWord||!i.selection.empty)return{state:i,dispatch:r};const n=!0===e.applyToWord?yS:e.applyToWord;let s=null;const a=i.tr,d=i.selection,f=d.$head.nodeBefore,p=d.$head.nodeAfter;if(f&&"text"===f.type.name&&f.text&&p&&"text"===p.type.name&&p.text){const g=[];d.$head.parent.descendants((Ae,Qe)=>(g.push({node:Ae,pos:Qe}),!1));let b=d.$head.parentOffset;const S=g.findIndex(({node:Ae,pos:Qe})=>Qe<=b&&Qe+Ae.nodeSize>=b);let k=g[S].node.text,T=!1;for(let Ae=S-1;Ae>=0;Ae--){const Qe=g[Ae];!T&&Qe&&"text"===Qe.node.type.name?k=Qe.node.text+k:(T=!0,b-=Qe.node.nodeSize)}for(let Ae=S+1;Ae<g.length;Ae++){const Qe=g[Ae];if(!Qe||"text"!==Qe.node.type.name)break;k+=Qe.node.text}const F=k.substring(0,b),K=k.substring(b),fe=n.before.exec(F),Re=n.after.exec(K);if(fe&&Re){const Ut=s=d.from;return a.setSelection(en.create(i.doc,Ut-fe[0].length,Ut+Re[0].length)),{state:{tr:a,selection:a.selection,doc:a.doc,storedMarks:null,schema:a.doc.type.schema},dispatch:bn=>{bn.setSelection(en.create(bn.doc,s)),r(bn)}}}}return{state:i,dispatch:r}},pr=(i,r)=>(e,n,s)=>{const{state:a,dispatch:d}=Yu(e,n,r);return i(r)(a,d)},xp=(i,r,e)=>{let n=s=>{let a=r[s],d=a.$from,f=a.$to,p=0===d.depth&&i.type.allowsMarkType(e);if(i.nodesBetween(d.pos,f.pos,g=>{if(p)return!1;p=g.inlineContent&&g.type.allowsMarkType(e)}),p)return{v:!0}};for(let s=0;s<r.length;s++){let a=n(s);if(a)return a.v}return!1},v0=(i,r,e)=>(n,s)=>{let{empty:a,$cursor:d,ranges:f}=n.selection;if(a&&!d||!xp(n.doc,f,i))return!1;if(s)if(d)i.isInSet(n.storedMarks||d.marks())?s(e.removeStoredMark(i)):s(e.addStoredMark(i.create(r)));else{let p=!1;for(let g=0;!p&&g<f.length;g++){let{$from:b,$to:S}=f[g];p=n.doc.rangeHasMark(b.pos,S.pos,i)}for(let g=0;g<f.length;g++){let{$from:b,$to:S}=f[g];p?e.removeMark(b.pos,S.pos,i):e.addMark(b.pos,S.pos,i.create(r))}s(e.scrollIntoView())}return!0},b0=(i,r,e,n)=>{void 0===n&&(n=null);let s=[],a=0;return i.doc.nodesBetween(r,e,(d,f)=>{if(!d.isInline)return;a++;let p=null;if(n instanceof Hc){let g=n.isInSet(d.marks);g&&(p=[g])}else n?n.isInSet(d.marks)&&(p=[n]):p=d.marks;if(p&&p.length){let g=Math.min(f+d.nodeSize,e);for(let b=0;b<p.length;b++){let k,S=p[b];for(let T=0;T<s.length;T++){let F=s[T];F.step===a-1&&S.eq(F.style)&&(k=F)}k?(k.to=g,k.step=a):s.push({style:S,from:Math.max(f,r),to:g,step:a})}}}),s.forEach(d=>i.step(new sr(d.from,d.to,d.style))),i},ro=(i,r)=>{const e=i.schema.marks,n=(r.altMarks||[]).filter(T=>e[T]),s=r.altStyle;let{from:a,$from:d,to:f,empty:p}=i.selection;const g=e[r.mark],b=i.doc;let k,S=!1;return p?(k=i.storedMarks||d.marks(),S=g&&g.isInSet(k)||n.some(T=>e[T].isInSet(k))):S=g&&b.rangeHasMark(a,f,g)||n.some(T=>b.rangeHasMark(a,f,e[T])),!S&&s&&e.style?Ku(i,e.style).some(T=>null!==C0(T,s)):Boolean(S)},C0=(i,r)=>{const n=(i&&i.attrs.style||"").split(/\s*;\s*/).filter(s=>Boolean(s));for(let s=0;s<n.length;s++){const a=n[s].split(/\s*:\s*/);if(a[0].toLowerCase()===r.name&&r.value.test(a[1]))return a[1]}return null},Ku=(i,r)=>{let{from:e,$from:n,to:s,empty:a}=i.selection,d=[];return a?d.push(r.isInSet(i.storedMarks||n.marks())):i.doc.nodesBetween(e,s,f=>{f.isInline&&d.push(r.isInSet(f.marks))}),d},IS=(i,r)=>{const e=Ku(i,r),n=e.filter(a=>Boolean(a));return{hasNodesWithoutMarks:e.length!==n.length,marks:n}},S0=(i,r)=>{const e=i.find(s=>"style"===s.type.name);return Tl(e&&e.attrs.style,r)},MS=(i,r,e,n,s)=>{const a=s.create({style:n.style});let d=[],f=[],p=null,g=null;return i.doc.nodesBetween(r,e,(b,S,k)=>{if(!b.isInline)return;let T=b.marks;if(!a.isInSet(T)&&k.type.allowsMarkType(a.type)){let F=Math.max(S,r),K=Math.min(S+b.nodeSize,e);const fe=S0(T,n);if(fe.changed||n.newValue){const Re=fe.changed?{style:fe.style||null}:{style:`${[n.style]}: ${n.newValue};`},Ae=s.isInSet(T)?T.find(tt=>"style"===tt.type.name):null,Qe=Ae?Object.assign(Object.assign({},Ae.attrs),Re):Re,Ut=s.create(Qe);let yt=Ut.addToSet(T);for(let tt=0;tt<T.length;tt++)T[tt].isInSet(yt)||(p&&p.to===F&&p.mark.eq(T[tt])?p.to=K:(p=new sr(F,K,T[tt]),d.push(p)));const kn=g&&g.to===F,bn=kn&&Ut.attrs.style===g.mark.attrs.style;kn&&bn?g.to=K:Object.keys(Qe).some(tt=>null!==Qe[tt])&&(g=new Os(F,K,Ut),f.push(g))}}}),d.forEach(b=>i.step(b)),f.forEach(b=>i.step(b)),d.length+f.length>0},E0=(i,r)=>function(e,n,s){let{empty:a,$cursor:d,ranges:f}=e.selection;if(a&&!d||!xp(e.doc,f,i))return!1;let p=!1;if(n){const g=s||e.tr;if(d){const b=e.storedMarks||d.marks();if(i.isInSet(b)){const S=S0(b,r),k=b.find(F=>"style"===F.type.name),T=Object.assign(Object.assign({},k?k.attrs:{}),{style:S.style||null});if(((i,r)=>{const e=Object.keys(i),n=Object.keys(r);return e.length===n.length&&e.every(s=>i[s]===r[s])})(k.attrs,T))return!1;n(g.removeStoredMark(i)),Object.keys(T).some(F=>null!==T[F])&&n(g.addStoredMark(i.create(T))),p=!0}}else{for(let b=0;b<f.length;b++){let{$from:S,$to:k}=f[b];p=MS(g,S.pos,k.pos,r,i)}p&&(g.scrollIntoView(),n(g))}}return p},hs=(i,r,e)=>(n,s)=>{const a=n.schema.marks,{altStyle:d,altMarks:f=[],mark:p}=i,g=r||n.tr;let b=!1,S=!1;const k=()=>S=!0;d&&a.style&&(b=E0(a.style,{style:d.name,value:d.value})(n,k,g));const F=[p,...f].filter(K=>a[K]).map(K=>ro(n,{mark:K})&&a[K]).filter(K=>K);return F.length?((i,r,e,n)=>{let{$cursor:s,ranges:a}=r.selection;if(n=n||r.tr,s)i.forEach(d=>{d.isInSet(r.storedMarks||s.marks())&&e(n.removeStoredMark(d))});else{for(let d=0;d<a.length;d++){let{$from:f,$to:p}=a[d];i.forEach(g=>{b0(n,f.pos,p.pos,g)})}e(n.scrollIntoView())}})(F,n,k,g):b||v0(a[p],e,g)(n,k),S&&s(g),S},$u=(i,r)=>(e,n)=>{const a=e.schema.marks.style,d={style:i.style,value:/^.+$/,newValue:i.value},f=e.tr;r&&f.setMeta("commandName",r),f.setMeta("args",i);let{empty:p,$cursor:g,ranges:b}=e.selection;if(p&&!g||!a||!xp(e.doc,b,a))return!1;if(g){const S=e.storedMarks||g.marks(),k=a.isInSet(S)?S.find(K=>"style"===K.type.name):null,T={style:null};if(k&&k.attrs.style){const K=Tl(k.attrs.style,d);K.changed&&K.style&&(T.style=K.style)}else d.newValue&&(T.style=`${[d.style]}: ${d.newValue};`);const F=k?Object.assign(Object.assign({},k.attrs),T):T;return Object.keys(F).some(K=>null!==F[K])?n(f.addStoredMark(a.create(F))):n(f.removeStoredMark(a)),!0}return E0(a,d)(e,n,f)},w0=(i,r)=>(e,n)=>{const{$cursor:s}=e.selection;if(s){const a=s.parent,d=s.index(),f=e.schema.marks[i.mark],p=a.child(d).marks.find(F=>F.type===f),g=a.childCount;let k,T,b=s.pos-s.textOffset,S=a.child(d).nodeSize;for(k=d-1;k>=0&&p.isInSet(a.child(k).marks);)T=a.child(k).nodeSize,S+=T,b-=T,k-=1;for(k=d+1;k<g&&p.isInSet(a.child(k).marks);)S+=a.child(k).nodeSize,k+=1;n(b0(r||e.tr,b,b+S,p))}else hs(i,r)(e,n)},k0=({mark:i,attrs:r},e="link")=>(n,s)=>{const a=n.schema.marks,d=n.tr;e&&(d.setMeta("commandName",e),d.setMeta("args",r));let f=!1;const p=()=>f=!0;if(((i,r)=>{const e=Ku(i,r);return 1===e.length&&e[0]?e[0]:null})(n,a[i]))((i,r)=>(e,n)=>{const{$cursor:s,from:a,to:d}=e.selection,f=e.schema.marks[i.mark];if(s){const p=s.parent,g=s.index(),b=p.child(g).marks.find(fe=>fe.type===f),S=p.childCount;let F,K,k=s.pos-s.textOffset,T=p.child(g).nodeSize;for(F=g-1;F>=0&&b.isInSet(p.child(F).marks);)K=p.child(F).nodeSize,T+=K,k-=K,F-=1;for(F=g+1;F<S&&b.isInSet(p.child(F).marks);)T+=p.child(F).nodeSize,F+=1;r.removeMark(k,k+T,f),r.addMark(k,k+T,f.create(i.attrs)),n(r)}else r.doc.nodesBetween(a,d,(p,g)=>{p.isInline&&f.isInSet(p.marks)&&(r.removeMark(g,g+p.nodeSize,f),r.addMark(g,g+p.nodeSize,f.create(i.attrs)),n(r))})})({mark:i,attrs:r},d)(n,p);else{let g=n;ro(n,{mark:i})&&(w0({mark:i,attrs:r},d)(n,p),g=Oa.create({doc:d.doc,selection:d.selection})),f?v0(a[i],r,d)(g,p):hs({mark:i},d,r)(g,p)}return f&&s(d),f};var Cp=Oe(655);const Dl=(i,r,e,n)=>{if(!e.isTextblock)return!1;const{ranges:s}=i.selection;s.forEach(a=>{const d=i.steps.length;i.doc.nodesBetween(a.$from.pos,a.$to.pos,(g,b)=>{if(g.eq(r)&&g.isTextblock&&!g.hasMarkup(e,n)&&((i,r,e)=>{let n=i.resolve(r),s=n.index();return n.parent.canReplaceWith(s,s+1,e)})(i.doc,i.mapping.slice(d).map(b),e)){i.clearIncompatible(i.mapping.slice(d).map(b,1),e);let S=i.mapping.slice(d),k=S.map(b,1),T=S.map(b+g.nodeSize,1),F=new st(Me.from(e.create(n,null,g.marks)),0,0);return i.step(new wi(k,T,k+1,T-1,F,1,!0)),!1}})})},fs=(i,r={blocksInSelection:!1})=>{const{doc:e,selection:n}=i;let{$from:s,ranges:a}=n;const{blocksInSelection:d}=r,f=[],p=n instanceof vt?n.node:void 0;return p?p.isBlock?(f.push(p),p.nodesBetween(0,p.content.size,g=>{g.isBlock&&f.push(g)})):!d&&s.parent&&s.parent.isBlock&&f.push(s.parent):a.forEach(g=>{const b=g.$from.pos,S=g.$to.pos;e.nodesBetween(b,S,(k,T,F,K)=>{k.isBlock&&(!d||T>=b&&T+k.content.size+2<=S)&&f.push(k)})}),f},T0=(i,r)=>{let n,s,e=i.attrs.style;return e&&r.forEach(d=>{s={style:d.name,value:/^.+$/,newValue:d.value},n=Tl(e,s),e=n.changed?n.style:e}),e=e||r.reduce((d,f)=>(d&&f.value?d+" ":"")+f.value?`${f.name}: ${f.value};`:"",""),Object.assign({},i.attrs,{style:e||null})},Al=(i,r)=>{let{from:e,to:n}=i.selection,s=!1;return i.doc.nodesBetween(e,n,a=>(s=s||a.type===r,!s)),s},y0=i=>{const r=(i=>{const r=fs(i),e=i.schema.nodes,n=[];return r.forEach(s=>{s.type===e.paragraph?n.push("p"):s.type===e.heading?n.push(`h${s.attrs.level}`):s.type===e.blockquote&&e.blockquote.isTextblock&&n.push("blockquote")}),n})(i);return 1===new Set(r).size?r[0]:null},GS=i=>({tag:y0(i)||""}),Xc=(i,r)=>(e,n)=>{const s=fs(e),a=e.tr;a.setMeta("commandName",r),s.forEach(f=>{if(f.type.isTextblock){let p={};const g=i.find(b=>b.node===f.type.name);g&&(p=T0(f,g.style)),Dl(a,f,f.type,p)}});const d=a.docChanged;return d&&n(a.scrollIntoView()),d},Zo=(i,r)=>{const e=fs(i);let n=!1;return e.forEach(s=>{if(!n&&s.type.isTextblock&&s.attrs.style){const a=r.find(d=>d.node===s.type.name);a&&(n=a.style.every(d=>!!d.value&&new RegExp(`${d.name}:\\s?${d.value}`,"i").test(s.attrs.style)))}}),n},D0=(i={blocksInSelection:!0})=>(r,e)=>{const n=r.tr,{blocksInSelection:s,blockNodeType:a,exceptMarks:d}=i;((i,{except:r})=>{const{doc:e,selection:n}=i,s=e.type.schema,{empty:a,ranges:d}=n,f=(r||[]).map(p=>p.name);if(!a){const p=Object.keys(s.marks).map(g=>s.marks[g]).filter(g=>-1===f.indexOf(g.name));d.forEach(({$from:g,$to:b})=>{p.forEach(S=>i.removeMark(g.pos,b.pos,S))})}})(n,{except:(d||[r.schema.marks.link]).filter(Boolean)}),((i,r={blocksInSelection:!0})=>{const{doc:e,selection:n}=i,{blocksInSelection:s,blockNodeType:a}=r;fs({doc:e,selection:n},{blocksInSelection:s}).filter(p=>p.isTextblock).forEach(p=>{const g=p.attrs||{},{style:b="",class:S=""}=g,k=(0,Cp._T)(g,["style","class"]),T=a||p.type;(b||S||T!==p.type)&&Dl(i,p,T,k)})})(n,{blocksInSelection:s,blockNodeType:a});const p=n.docChanged;return p&&e&&e(n),p};function O0(i){return function(r,e){let{$from:n,$to:s}=r.selection,a=n.blockRange(s,d=>d.childCount>0&&d.firstChild.type==i);return!!a&&(!e||(n.node(a.depth-1).type==i?function $S(i,r,e,n){let s=i.tr,a=n.end,d=n.$to.end(n.depth);a<d&&(s.step(new wi(a-1,d,a,d,new st(Me.from(e.create(null,n.parent.copy())),1,0),1,!0)),n=new zc(s.doc.resolve(n.$from.pos),s.doc.resolve(d),n.depth));const f=Cl(n);if(null==f)return!1;s.lift(n,f);let p=s.mapping.map(a,-1)-1;return zu(s.doc,p)&&s.join(p),r(s.scrollIntoView()),!0}(r,e,i,a):function ed(i,r,e){let n=i.tr,s=e.parent;for(let T=e.end,F=e.endIndex-1,K=e.startIndex;F>K;F--)T-=s.child(F).nodeSize,n.delete(T-1,T+1);let a=n.doc.resolve(e.start),d=a.nodeAfter;if(n.mapping.map(e.end)!=e.start+a.nodeAfter.nodeSize)return!1;let f=0==e.startIndex,p=e.endIndex==s.childCount,g=a.node(-1),b=a.index(-1);if(!g.canReplace(b+(f?0:1),b+1,d.content.append(p?Me.empty:Me.from(s))))return!1;let S=a.pos,k=S+d.nodeSize;return n.step(new wi(S-(f?1:0),k+(p?1:0),S+1,k-1,new st((f?Me.empty:Me.from(s.copy(Me.empty))).append(p?Me.empty:Me.from(s.copy(Me.empty))),f?0:1,p?0:1),f?0:1)),r(n.scrollIntoView()),!0}(r,e,a)))}}function Ol(i){return function(r,e){let{$from:n,$to:s}=r.selection,a=n.blockRange(s,g=>g.childCount>0&&g.firstChild.type==i);if(!a)return!1;let d=a.startIndex;if(0==d)return!1;let f=a.parent,p=f.child(d-1);if(p.type!=i)return!1;if(e){let g=p.lastChild&&p.lastChild.type==f.type,b=Me.from(g?i.create():null),S=new st(Me.from(i.create(null,Me.from(f.type.create(null,b)))),g?3:1,0),k=a.start,T=a.end;e(r.tr.step(new wi(k-(g?3:1),T,k,T,S,1,!0)).scrollIntoView())}return!0}}const Il={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"},I0={listType:Il.orderedList,types:Object.assign({},Il)},M0={listType:Il.bulletList,types:Object.assign({},Il)},Ia={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:Object.assign({},Il)},Ma={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:Object.assign({},Il)},Ri=(i,r)=>!i.selection.empty&&(r&&r(i.tr.deleteSelection().scrollIntoView()),!0),R0=(i,r,e)=>{let{$cursor:n}=i.selection;if(!n||(e?!e.endOfTextblock("backward",i):n.parentOffset>0))return!1;let s=F0(n);if(!s){let d=n.blockRange(),f=d&&Cl(d);return null!=f&&(r&&r(i.tr.lift(d,f).scrollIntoView()),!0)}let a=s.nodeBefore;if(!a.type.spec.isolating&&nd(i,s,r))return!0;if(0==n.parent.content.size&&(Ml(a,"end")||vt.isSelectable(a))){let d=lp(i.doc,n.before(),n.after(),st.empty);if(d&&d.slice.size<d.to-d.from){if(r){let f=i.tr.step(d);f.setSelection(Ml(a,"end")?Zt.findFrom(f.doc.resolve(f.mapping.map(s.pos,-1)),-1):vt.create(f.doc,s.pos-a.nodeSize)),r(f.scrollIntoView())}return!0}}return!(!a.isAtom||s.depth!=n.depth-1||(r&&r(i.tr.delete(s.pos-a.nodeSize,s.pos).scrollIntoView()),0))};function Ml(i,r,e=!1){for(let n=i;n;n="start"==r?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(e&&1!=n.childCount)return!1}return!1}const N0=(i,r,e)=>{let{$head:n,empty:s}=i.selection,a=n;if(!s)return!1;if(n.parent.isTextblock){if(e?!e.endOfTextblock("backward",i):n.parentOffset>0)return!1;a=F0(n)}let d=a&&a.nodeBefore;return!(!d||!vt.isSelectable(d)||(r&&r(i.tr.setSelection(vt.create(i.doc,a.pos-d.nodeSize)).scrollIntoView()),0))};function F0(i){if(!i.parent.type.spec.isolating)for(let r=i.depth-1;r>=0;r--){if(i.index(r)>0)return i.doc.resolve(i.before(r+1));if(i.node(r).type.spec.isolating)break}return null}function Wu(i){if(!i.parent.type.spec.isolating)for(let r=i.depth-1;r>=0;r--){let e=i.node(r);if(i.index(r)+1<e.childCount)return i.doc.resolve(i.after(r+1));if(e.type.spec.isolating)break}return null}const td=(i,r)=>{let{$head:e,$anchor:n}=i.selection;return!(!e.parent.type.spec.code||!e.sameParent(n)||(r&&r(i.tr.insertText("\n").scrollIntoView()),0))};function kp(i){for(let r=0;r<i.edgeCount;r++){let{type:e}=i.edge(r);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const L0=(i,r)=>{let{$head:e,$anchor:n}=i.selection;if(!e.parent.type.spec.code||!e.sameParent(n))return!1;let s=e.node(-1),a=e.indexAfter(-1),d=kp(s.contentMatchAt(a));if(!d||!s.canReplaceWith(a,a,d))return!1;if(r){let f=e.after(),p=i.tr.replaceWith(f,f,d.createAndFill());p.setSelection(Zt.near(p.doc.resolve(f),1)),r(p.scrollIntoView())}return!0},P0=(i,r)=>{let e=i.selection,{$from:n,$to:s}=e;if(e instanceof Vi||n.parent.inlineContent||s.parent.inlineContent)return!1;let a=kp(s.parent.contentMatchAt(s.indexAfter()));if(!a||!a.isTextblock)return!1;if(r){let d=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,f=i.tr.insert(d,a.createAndFill());f.setSelection(en.create(f.doc,d+1)),r(f.scrollIntoView())}return!0},Tp=(i,r)=>{let{$cursor:e}=i.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let a=e.before();if(Sl(i.doc,a))return r&&r(i.tr.split(a).scrollIntoView()),!0}let n=e.blockRange(),s=n&&Cl(n);return null!=s&&(r&&r(i.tr.lift(n,s).scrollIntoView()),!0)},U0=(i,r)=>{let{$from:e,$to:n}=i.selection;if(i.selection instanceof vt&&i.selection.node.isBlock)return!(!e.parentOffset||!Sl(i.doc,e.pos)||(r&&r(i.tr.split(e.pos).scrollIntoView()),0));if(!e.parent.isBlock)return!1;if(r){let s=n.parentOffset==n.parent.content.size,a=i.tr;(i.selection instanceof en||i.selection instanceof Vi)&&a.deleteSelection();let d=0==e.depth?null:kp(e.node(-1).contentMatchAt(e.indexAfter(-1))),f=s&&d?[{type:d}]:void 0,p=Sl(a.doc,a.mapping.map(e.pos),1,f);if(!f&&!p&&Sl(a.doc,a.mapping.map(e.pos),1,d?[{type:d}]:void 0)&&(d&&(f=[{type:d}]),p=!0),p&&(a.split(a.mapping.map(e.pos),1,f),!s&&!e.parentOffset&&e.parent.type!=d)){let g=a.mapping.map(e.before()),b=a.doc.resolve(g);d&&e.node(-1).canReplaceWith(b.index(),b.index()+1,d)&&a.setNodeMarkup(a.mapping.map(e.before()),d)}r(a.scrollIntoView())}return!0},B0=(i,r)=>U0(i,r&&(e=>{let n=i.storedMarks||i.selection.$to.parentOffset&&i.selection.$from.marks();n&&e.ensureMarks(n),r(e)})),ju=(i,r)=>(r&&r(i.tr.setSelection(new Vi(i.doc))),!0);function nd(i,r,e){let a,d,n=r.nodeBefore,s=r.nodeAfter;if(n.type.spec.isolating||s.type.spec.isolating)return!1;if(function QS(i,r,e){let n=r.nodeBefore,s=r.nodeAfter,a=r.index();return!(!(n&&s&&n.type.compatibleContent(s.type))||(!n.content.size&&r.parent.canReplace(a-1,a)?(e&&e(i.tr.delete(r.pos-n.nodeSize,r.pos).scrollIntoView()),0):!r.parent.canReplace(a,a+1)||!s.isTextblock&&!zu(i.doc,r.pos)||(e&&e(i.tr.clearIncompatible(r.pos,n.type,n.contentMatchAt(n.childCount)).join(r.pos).scrollIntoView()),0)))}(i,r,e))return!0;let f=r.parent.canReplace(r.index(),r.index()+1);if(f&&(a=(d=n.contentMatchAt(n.childCount)).findWrapping(s.type))&&d.matchType(a[0]||s.type).validEnd){if(e){let S=r.pos+s.nodeSize,k=Me.empty;for(let K=a.length-1;K>=0;K--)k=Me.from(a[K].create(null,k));k=Me.from(n.copy(k));let T=i.tr.step(new wi(r.pos-1,S,r.pos,S,new st(k,1,0),a.length,!0)),F=S+2*a.length;zu(T.doc,F)&&T.join(F),e(T.scrollIntoView())}return!0}let p=Zt.findFrom(r,1),g=p&&p.$from.blockRange(p.$to),b=g&&Cl(g);if(null!=b&&b>=r.depth)return e&&e(i.tr.lift(g,b).scrollIntoView()),!0;if(f&&Ml(s,"start",!0)&&Ml(n,"end")){let S=n,k=[];for(;k.push(S),!S.isTextblock;)S=S.lastChild;let T=s,F=1;for(;!T.isTextblock;T=T.firstChild)F++;if(S.canReplace(S.childCount,S.childCount,T.content)){if(e){let K=Me.empty;for(let Re=k.length-1;Re>=0;Re--)K=Me.from(k[Re].copy(K));e(i.tr.step(new wi(r.pos-k.length,r.pos+s.nodeSize,r.pos+F,r.pos+s.nodeSize-F,new st(K,k.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Ra(i){return function(r,e){let n=r.selection,s=i<0?n.$from:n.$to,a=s.depth;for(;s.node(a).isInline;){if(!a)return!1;a--}return!!s.node(a).isTextblock&&(e&&e(r.tr.setSelection(en.create(r.doc,i<0?s.start(a):s.end(a)))),!0)}}const id=Ra(-1),yp=Ra(1);function Nl(...i){return function(r,e,n){for(let s=0;s<i.length;s++)if(i[s](r,e,n))return!0;return!1}}let Dp=Nl(Ri,R0,N0),G0=Nl(Ri,(i,r,e)=>{let{$cursor:n}=i.selection;if(!n||(e?!e.endOfTextblock("forward",i):n.parentOffset<n.parent.content.size))return!1;let s=Wu(n);if(!s)return!1;let a=s.nodeAfter;if(nd(i,s,r))return!0;if(0==n.parent.content.size&&(Ml(a,"start")||vt.isSelectable(a))){let d=lp(i.doc,n.before(),n.after(),st.empty);if(d&&d.slice.size<d.to-d.from){if(r){let f=i.tr.step(d);f.setSelection(Ml(a,"start")?Zt.findFrom(f.doc.resolve(f.mapping.map(s.pos)),1):vt.create(f.doc,f.mapping.map(s.pos))),r(f.scrollIntoView())}return!0}}return!(!a.isAtom||s.depth!=n.depth-1||(r&&r(i.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),0))},(i,r,e)=>{let{$head:n,empty:s}=i.selection,a=n;if(!s)return!1;if(n.parent.isTextblock){if(e?!e.endOfTextblock("forward",i):n.parentOffset<n.parent.content.size)return!1;a=Wu(n)}let d=a&&a.nodeAfter;return!(!d||!vt.isSelectable(d)||(r&&r(i.tr.setSelection(vt.create(i.doc,a.pos)).scrollIntoView()),0))});const so={Enter:Nl(td,P0,Tp,U0),"Mod-Enter":L0,Backspace:Dp,"Mod-Backspace":Dp,"Shift-Backspace":Dp,Delete:G0,"Mod-Delete":G0,"Mod-a":ju},z0={"Ctrl-h":so.Backspace,"Alt-Backspace":so["Mod-Backspace"],"Ctrl-d":so.Delete,"Ctrl-Alt-Backspace":so["Mod-Delete"],"Alt-Delete":so["Mod-Delete"],"Alt-d":so["Mod-Delete"],"Ctrl-a":id,"Ctrl-e":yp};for(let i in so)z0[i]=so[i];const tE=(typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&"darwin"==os.platform())?z0:so,Ap=(i,r)=>function Qu(i,r=null){return function(e,n){let{$from:s,$to:a}=e.selection,d=s.blockRange(a),f=d&&j_(d,i,r);return!!f&&(n&&n(e.tr.wrap(d,f).scrollIntoView()),!0)}}(i.schema.nodes.blockquote)(i,r),Z0=(i,r,e)=>(n,s)=>{const a=fs(n),d=n.tr;d.setMeta("commandName",r),a.forEach(p=>{if(p.type.isTextblock){let g;const b=i.find(S=>S.node===p.type.name);if(b){const S="rtl"===e?b.rtlStyle:b.style,k={name:S,value:b.step>0?`${b.step}${b.unit}`:""};if(p.attrs.style){const T=new RegExp(`${S}:\\s?(\\d+)${b.unit}`,"i"),F=p.attrs.style.match(T);if(F){let K=parseFloat(F[1])+b.step;K=K<=0?"":K,k.value=`${K}${K?b.unit:""}`}}g=T0(p,[k])}g&&Dl(d,p,p.type,g)}});const f=d.docChanged;return f&&s(d.scrollIntoView()),f},H0=(i,r,e)=>{const n=fs(i);let s=!1;return n.forEach(a=>{if(!s&&a.type.isTextblock&&a.attrs.style){const d=r.find(f=>f.node===a.type.name);d&&(s=new RegExp(`${"rtl"===e?d.rtlStyle:d.style}:\\s?\\d+${d.unit}`,"i").test(a.attrs.style))}}),s},V0=(i,r)=>Ol(r)(i),Xu=(i,r)=>{const e=i.schema.nodes[r.listsTypes.listItem],s=i.schema.nodes[r.listsTypes.bulletList],a=!!g0(i.schema.nodes[r.listsTypes.orderedList],2)(i.selection),d=!!g0(s,2)(i.selection);return(a||d)&&O0(e)(i)},Op=(i,r)=>{const e=i.schema.nodes,n=e[Ia.listsTypes.listItem];return(H0(i,r.nodes)||Ia.nodes.some(s=>e[s.node]&&Al(i,e[s.node])))&&!Al(i,n)},iE=(i,r)=>{const e=i.schema.nodes[Ia.listsTypes.listItem],n=Op(i,Ia);V0(i,e)?Ol(e)(i,r):n&&Z0(Ia.nodes)(i,r)},rE=(i,r)=>{const e=i.schema.nodes,n=e[Ma.listsTypes.listItem],s=Op(i,Ma);Al(i,e.blockquote)?((i,r)=>{const{$from:e,$to:n}=i.selection,s=i.schema.nodes.blockquote,a=i.doc;let d=-1;const f=e.blockRange(n);f&&a.nodesBetween(f.start,f.end,(g,b,S,k)=>{g.type===s&&(d=b)});r&&-1!==d&&r(i.tr.lift(f,a.resolve(d).depth))})(i,r):Xu(i,Ma)?O0(n)(i,r):s&&Z0(Ma.nodes)(i,r)},oE=(i,r,e)=>{let n=r.depth;const s=i.nodes[e.bulletList],a=i.nodes[e.orderedList],d=i.nodes[e.listItem];for(let f=r.depth;f>0;f--){const p=r.node(f);if((p.type===s||p.type===a)&&(n=f),p.type!==s&&p.type!==a&&p.type!==d)break}return n-1};function lE(i){return function(r,e,n){if(!n)return!1;const s=(r=n.state).schema.nodes[i.listType],{$from:a,$to:d}=r.selection,f=a.node(-2),p=a.node(-3),g=function uE(i,r,e,n){return 0===function hE(i,r,e){const n=Array(),s=function fE(i,r){const e=["blockquote","bulletList","orderedList"];if(1===r.depth)return r;let n=r.node(r.depth),s=r;for(;r.depth>=1;)n=(r=i.resolve(r.before(r.depth))).node(r.depth),n&&-1!==e.indexOf(n.type.name)&&(s=r);return s}(i,r).depth;let a=i.resolve(r.start(s));for(;a.pos<=e.start(e.depth);){const d=Math.min(a.depth,s),f=a.node(d);if(f&&n.push(f),0===d)break;let p=i.resolve(a.after(d));if(p.start(d)>=i.nodeSize-2)break;p.depth!==a.depth&&(p=i.resolve(p.pos+2)),a=i.resolve(p.depth?p.start(p.depth):p.end(p.depth))}return n}(i,r,e).filter(s=>s.type!==n).length}(r.doc,a,d,s);return(f&&f.type===s||p&&p.type===s)&&g?J0(i)(r,e):(g||(J0(i)(r,e),r=n.state),function pE(i,r={}){return function eE(i,r){let e=Array.isArray(r)?n=>r.indexOf(n.type.name)>-1:r;return(n,s,a)=>i(n,s&&function XS(i,r){return e=>{if(!e.isGeneric)return i(e);let n=[];for(let a=0;a<e.mapping.maps.length;a++){let d=e.mapping.maps[a];for(let f=0;f<n.length;f++)n[f]=d.map(n[f]);d.forEach((f,p,g,b)=>n.push(g,b))}let s=[];for(let a=0;a<n.length;a+=2){let f=n[a+1],p=e.doc.resolve(n[a]),g=p.sharedDepth(f),b=p.node(g);for(let S=p.indexAfter(g),k=p.after(g+1);k<=f;++S){let T=b.maybeChild(S);if(!T)break;if(S&&-1==s.indexOf(k)){let F=b.child(S-1);F.type==T.type&&r(F,T)&&s.push(k)}k+=T.nodeSize}}s.sort((a,d)=>a-d);for(let a=s.length-1;a>=0;a--)zu(e.doc,s[a])&&e.join(s[a]);i(e)}}(s,e),a)}(function YS(i,r=null){return function(e,n){let{$from:s,$to:a}=e.selection,d=s.blockRange(a),f=!1,p=d;if(!d)return!1;if(d.depth>=2&&s.node(d.depth-1).type.compatibleContent(i)&&0==d.startIndex){if(0==s.index(d.depth-1))return!1;let b=e.doc.resolve(d.start-2);p=new zc(b,b,d.depth),d.endIndex<d.parent.childCount&&(d=new zc(s,e.doc.resolve(a.end(d.depth)),d.depth)),f=!0}let g=j_(p,i,r,d);return!!g&&(n&&n(function A0(i,r,e,n,s){let a=Me.empty;for(let b=e.length-1;b>=0;b--)a=Me.from(e[b].type.create(e[b].attrs,a));i.step(new wi(r.start-(n?2:0),r.end,r.start,r.end,new st(a,0,0),e.length,!0));let d=0;for(let b=0;b<e.length;b++)e[b].type==s&&(d=b+1);let f=e.length-d,p=r.start+e.length-(n?2:0),g=r.parent;for(let b=r.startIndex,S=r.endIndex,k=!0;b<S;b++,k=!1)!k&&Sl(i.doc,p,f)&&(i.split(p,f),p+=2*f),p+=g.child(b).nodeSize;return i}(e.tr,d,g,f,i).scrollIntoView()),!0)}}(i,r),(e,n)=>e.type===n.type&&e.type===i)}(s,i.listAttrs)(r,e))}}function cE(i,r,e,n){const s=n||i.schema.nodes.listItem;let{$from:a,$to:d}=r,f=a.blockRange(d,b=>b.childCount&&b.firstChild.type===s);if(!f||f.depth<2||a.node(f.depth-1).type!==s)return e;let p=f.end,g=d.end(f.depth);return p<g&&(e.step(new wi(p-1,g,p,g,new st(Me.from(s.create(void 0,f.parent.copy())),1,0),1,!0)),f=new zc(e.doc.resolve(a.pos),e.doc.resolve(g),f.depth)),e.lift(f,Cl(f)).scrollIntoView()}function J0(i){return function(r,e){const{tr:n}=r,{$from:s,$to:a}=r.selection;return n.doc.nodesBetween(s.pos,a.pos,(d,f)=>{if(d.isTextblock||"blockquote"===d.type.name||"div"===d.type.name){const p=new vt(n.doc.resolve(n.mapping.map(f))),g=p.$from.blockRange(p.$to);if(!g||p.$from.parent.type!==r.schema.nodes[i.listItem])return!1;const b=g&&Cl(g);if(null==b)return!1;n.lift(g,b)}}),e&&e(n),!0}}const mE=/list\-style\-type:\s?([\w-]+)/,eh=i=>{const e=mE.exec(i.style||"");return e&&e[1]||""},q0=(i,r,e,n,s)=>{const{listType:a,listAttrs:d={style:null}}=n,{selection:f}=i,p=f.$from.node(f.$from.depth-2),g=f.$to.node(f.$to.depth-2);if(!p||p.type.name!==a||eh(p.attrs)!==eh(d)||!g||g.type.name!==a||eh(g.attrs)!==eh(d))return lE(n)(i,r,e);{const b=e.state.schema.nodes,S={bulletList:b[n.bulletList],orderedList:b[n.orderedList],listItem:b[n.listItem]},k=((i,r)=>{const{bulletList:e,orderedList:n,listItem:s}=r;let a;for(let d=i.depth-1;d>0;d--){const f=i.node(d);if((f.type===e||f.type===n)&&(a=d),f.type!==e&&f.type!==n&&f.type!==s)break}return a})(f.$to,S);let T=function dE(i,r,e,n,s,a){a||(a=i.schema.nodes.listItem);let d=!1;return s.doc.nodesBetween(r,e,(f,p)=>{if(!d&&f.type===a&&p>r){d=!0;let g=n+3;for(;g>n+2;){const b=s.doc.resolve(s.mapping.map(p));g=b.depth;const S=s.doc.resolve(s.mapping.map(p+f.textContent.length)),k=new en(b,S);s=cE(i,k,s,a)}}}),s}(i,f.$to.pos,f.$to.end(k),k,e.state.tr,S.listItem);return T=function aE(i,r,e){const{from:n,to:s}=i.selection,{paragraph:a,heading:d}=i.schema.nodes,f=[];r.doc.nodesBetween(n,s,(p,g)=>{(p.type===a||p.type===d)&&f.push({node:p,pos:g})});for(let p=f.length-1;p>=0;p--){const g=f[p],b=r.doc.resolve(r.mapping.map(g.pos));if(b.depth>0){let S;S=r.doc.resolve(r.mapping.map(g.node.textContent&&g.node.textContent.length>0?g.pos+g.node.textContent.length:g.pos+1));const k=b.blockRange(S);k&&r.lift(k,oE(i.schema,b,e))}}return r}(i,T,n),T.setMeta("commandName",s),r(T),!0}};function gE(i,r,e){return q0(i,r,e,Object.assign({listType:M0.listType},M0.types))}function Y0(i,r,e){return q0(i,r,e,Object.assign({listType:I0.listType},I0.types))}const Rs=(i,r)=>({name:i,value:r}),Ip=[{node:"paragraph",style:[Rs("text-align","left")]},{node:"heading",style:[Rs("text-align","left")]}],Mp=[{node:"paragraph",style:[Rs("text-align","right")]},{node:"heading",style:[Rs("text-align","right")]}],Rp=[{node:"paragraph",style:[Rs("text-align","center")]},{node:"heading",style:[Rs("text-align","center")]}],Np=[{node:"paragraph",style:[Rs("text-align","justify")]},{node:"heading",style:[Rs("text-align","justify")]}],vE=[{node:"paragraph",style:[Rs("text-align","")]},{node:"heading",style:[Rs("text-align","")]}];for(var Vo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},th={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},K0=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),bE=(typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),typeof navigator<"u"&&/Mac/.test(navigator.platform)),xE=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),CE=bE||K0&&+K0[1]<57,Ji=0;Ji<10;Ji++)Vo[48+Ji]=Vo[96+Ji]=String(Ji);for(Ji=1;Ji<=24;Ji++)Vo[Ji+111]="F"+Ji;for(Ji=65;Ji<=90;Ji++)Vo[Ji]=String.fromCharCode(Ji+32),th[Ji]=String.fromCharCode(Ji);for(var Fp in Vo)th.hasOwnProperty(Fp)||(th[Fp]=Vo[Fp]);const EE=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function wE(i){let n,s,a,d,r=i.split(/-(?!$)/),e=r[r.length-1];"Space"==e&&(e=" ");for(let f=0;f<r.length-1;f++){let p=r[f];if(/^(cmd|meta|m)$/i.test(p))d=!0;else if(/^a(lt)?$/i.test(p))n=!0;else if(/^(c|ctrl|control)$/i.test(p))s=!0;else if(/^s(hift)?$/i.test(p))a=!0;else{if(!/^mod$/i.test(p))throw new Error("Unrecognized modifier name: "+p);EE?d=!0:s=!0}}return n&&(e="Alt-"+e),s&&(e="Ctrl-"+e),d&&(e="Meta-"+e),a&&(e="Shift-"+e),e}function Lp(i,r,e){return r.altKey&&(i="Alt-"+i),r.ctrlKey&&(i="Ctrl-"+i),r.metaKey&&(i="Meta-"+i),!1!==e&&r.shiftKey&&(i="Shift-"+i),i}function Pp(i){return new Yr({props:{handleKeyDown:Up(i)}})}function Up(i){let r=function kE(i){let r=Object.create(null);for(let e in i)r[wE(e)]=i[e];return r}(i);return function(e,n){let d,s=function SE(i){var e=!(CE&&(i.ctrlKey||i.altKey||i.metaKey)||xE&&i.shiftKey&&i.key&&1==i.key.length||"Unidentified"==i.key)&&i.key||(i.shiftKey?th:Vo)[i.keyCode]||i.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),a=1==s.length&&" "!=s,f=r[Lp(s,n,!a)];if(f&&f(e.state,e.dispatch,e))return!0;if(a&&(n.shiftKey||n.altKey||n.metaKey||s.charCodeAt(0)>127)&&(d=Vo[n.keyCode])&&d!=s){let p=r[Lp(d,n,!0)];if(p&&p(e.state,e.dispatch,e))return!0}else if(a&&n.shiftKey){let p=r[Lp(s,n,!0)];if(p&&p(e.state,e.dispatch,e))return!0}return!1}}const Jo=typeof navigator<"u"?navigator:null,$0=typeof document<"u"?document:null,qo=Jo&&Jo.userAgent||"",nh=/Edge\/(\d+)/.exec(qo),W0=/MSIE \d/.exec(qo),Bp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qo),Dr=!!(W0||Bp||nh),Yo=W0?document.documentMode:Bp?+Bp[1]:nh?+nh[1]:0,ps=!Dr&&/gecko\/(\d+)/i.test(qo);ps&&/Firefox\/(\d+)/.exec(qo);const Gp=!Dr&&/Chrome\/(\d+)/.exec(qo),mr=!!Gp,TE=Gp?+Gp[1]:0,Ar=!Dr&&!!Jo&&/Apple Computer/.test(Jo.vendor),Fl=Ar&&(/Mobile\/\w+/.test(qo)||!!Jo&&Jo.maxTouchPoints>2),Kr=Fl||!!Jo&&/Mac/.test(Jo.platform),Ns=/Android \d/.test(qo),ih=!!$0&&"webkitFontSmoothing"in $0.documentElement.style,yE=ih?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,Pr=function(i){for(var r=0;;r++)if(!(i=i.previousSibling))return r},zp=function(i){let r=i.assignedSlot||i.parentNode;return r&&11==r.nodeType?r.host:r};let j0=null;const oo=function(i,r,e){let n=j0||(j0=document.createRange());return n.setEnd(i,e??i.nodeValue.length),n.setStart(i,r||0),n},rd=function(i,r,e,n){return e&&(Q0(i,r,e,n,-1)||Q0(i,r,e,n,1))},DE=/^(img|br|input|textarea|hr)$/i;function Q0(i,r,e,n,s){for(;;){if(i==e&&r==n)return!0;if(r==(s<0?0:Fs(i))){let a=i.parentNode;if(!a||1!=a.nodeType||X0(i)||DE.test(i.nodeName)||"false"==i.contentEditable)return!1;r=Pr(i)+(s<0?0:1),i=a}else{if(1!=i.nodeType)return!1;if("false"==(i=i.childNodes[r+(s<0?-1:0)]).contentEditable)return!1;r=s<0?Fs(i):0}}}function Fs(i){return 3==i.nodeType?i.nodeValue.length:i.childNodes.length}function X0(i){let r;for(let e=i;e&&!(r=e.pmViewDesc);e=e.parentNode);return r&&r.node&&r.node.isBlock&&(r.dom==i||r.contentDOM==i)}const rh=function(i){let r=i.isCollapsed;return r&&mr&&i.rangeCount&&!i.getRangeAt(0).collapsed&&(r=!1),r};function Ll(i,r){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=i,e.key=e.code=r,e}function OE(i){return{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}function Ko(i,r){return"number"==typeof i?i:i[r]}function IE(i){let r=i.getBoundingClientRect();return{left:r.left,right:r.left+i.clientWidth*(r.width/i.offsetWidth||1),top:r.top,bottom:r.top+i.clientHeight*(r.height/i.offsetHeight||1)}}function e1(i,r,e){let n=i.someProp("scrollThreshold")||0,s=i.someProp("scrollMargin")||5,a=i.dom.ownerDocument;for(let d=e||i.dom;d;d=zp(d)){if(1!=d.nodeType)continue;let f=d,p=f==a.body,g=p?OE(a):IE(f),b=0,S=0;if(r.top<g.top+Ko(n,"top")?S=-(g.top-r.top+Ko(s,"top")):r.bottom>g.bottom-Ko(n,"bottom")&&(S=r.bottom-g.bottom+Ko(s,"bottom")),r.left<g.left+Ko(n,"left")?b=-(g.left-r.left+Ko(s,"left")):r.right>g.right-Ko(n,"right")&&(b=r.right-g.right+Ko(s,"right")),b||S)if(p)a.defaultView.scrollBy(b,S);else{let k=f.scrollLeft,T=f.scrollTop;S&&(f.scrollTop+=S),b&&(f.scrollLeft+=b);let F=f.scrollLeft-k,K=f.scrollTop-T;r={left:r.left-F,top:r.top-K,right:r.right-F,bottom:r.bottom-K}}if(p)break}}function t1(i){let r=[],e=i.ownerDocument;for(let n=i;n&&(r.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),i!=e);n=zp(n));return r}function n1(i,r){for(let e=0;e<i.length;e++){let{dom:n,top:s,left:a}=i[e];n.scrollTop!=s+r&&(n.scrollTop=s+r),n.scrollLeft!=a&&(n.scrollLeft=a)}}let Pl=null;function r1(i,r){let e,s,n=2e8,a=0,d=r.top,f=r.top;for(let p=i.firstChild,g=0;p;p=p.nextSibling,g++){let b;if(1==p.nodeType)b=p.getClientRects();else{if(3!=p.nodeType)continue;b=oo(p).getClientRects()}for(let S=0;S<b.length;S++){let k=b[S];if(k.top<=d&&k.bottom>=f){d=Math.max(k.bottom,d),f=Math.min(k.top,f);let T=k.left>r.left?k.left-r.left:k.right<r.left?r.left-k.right:0;if(T<n){e=p,n=T,s=T&&3==e.nodeType?{left:k.right<r.left?k.right:k.left,top:r.top}:r,1==p.nodeType&&T&&(a=g+(r.left>=(k.left+k.right)/2?1:0));continue}}!e&&(r.left>=k.right&&r.top>=k.top||r.left>=k.left&&r.top>=k.bottom)&&(a=g+1)}}return e&&3==e.nodeType?function FE(i,r){let e=i.nodeValue.length,n=document.createRange();for(let s=0;s<e;s++){n.setEnd(i,s+1),n.setStart(i,s);let a=$o(n,1);if(a.top!=a.bottom&&Zp(r,a))return{node:i,offset:s+(r.left>=(a.left+a.right)/2?1:0)}}return{node:i,offset:0}}(e,s):!e||n&&1==e.nodeType?{node:i,offset:a}:r1(e,s)}function Zp(i,r){return i.left>=r.left-1&&i.left<=r.right+1&&i.top>=r.top-1&&i.top<=r.bottom+1}function BE(i,r,e){let n=i.childNodes.length;if(n&&e.top<e.bottom)for(let s=Math.max(0,Math.min(n-1,Math.floor(n*(r.top-e.top)/(e.bottom-e.top))-2)),a=s;;){let d=i.childNodes[a];if(1==d.nodeType){let f=d.getClientRects();for(let p=0;p<f.length;p++){let g=f[p];if(Zp(r,g))return BE(d,r,g)}}if((a=(a+1)%n)==s)break}return i}function GE(i,r){let n,e=i.dom.ownerDocument,s=0;if(e.caretPositionFromPoint)try{let p=e.caretPositionFromPoint(r.left,r.top);p&&({offsetNode:n,offset:s}=p)}catch{}if(!n&&e.caretRangeFromPoint){let p=e.caretRangeFromPoint(r.left,r.top);p&&({startContainer:n,startOffset:s}=p)}let d,a=(i.root.elementFromPoint?i.root:e).elementFromPoint(r.left,r.top);if(!a||!i.dom.contains(1!=a.nodeType?a.parentNode:a)){let p=i.dom.getBoundingClientRect();if(!Zp(r,p)||(a=BE(i.dom,r,p),!a))return null}if(Ar)for(let p=a;n&&p;p=zp(p))p.draggable&&(n=void 0);if(a=function LE(i,r){let e=i.parentNode;return e&&/^li$/i.test(e.nodeName)&&r.left<i.getBoundingClientRect().left?e:i}(a,r),n){if(ps&&1==n.nodeType&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let g,p=n.childNodes[s];"IMG"==p.nodeName&&(g=p.getBoundingClientRect()).right<=r.left&&g.bottom>r.top&&s++}n==i.dom&&s==n.childNodes.length-1&&1==n.lastChild.nodeType&&r.top>n.lastChild.getBoundingClientRect().bottom?d=i.state.doc.content.size:(0==s||1!=n.nodeType||"BR"!=n.childNodes[s-1].nodeName)&&(d=function UE(i,r,e,n){let s=-1;for(let a=r;a!=i.dom;){let d=i.docView.nearestDesc(a,!0);if(!d)return null;if(d.node.isBlock&&d.parent){let f=d.dom.getBoundingClientRect();if(f.left>n.left||f.top>n.top)s=d.posBefore;else{if(!(f.right<n.left||f.bottom<n.top))break;s=d.posAfter}}a=d.dom.parentNode}return s>-1?s:i.docView.posFromDOM(r,e,1)}(i,n,s,r))}null==d&&(d=function PE(i,r,e){let{node:n,offset:s}=r1(r,e),a=-1;if(1==n.nodeType&&!n.firstChild){let d=n.getBoundingClientRect();a=d.left!=d.right&&e.left>(d.left+d.right)/2?1:-1}return i.docView.posFromDOM(n,s,a)}(i,a,r));let f=i.docView.nearestDesc(a,!0);return{pos:d,inside:f?f.posAtStart-f.border:-1}}function $o(i,r){let e=i.getClientRects();return e.length?e[r<0?0:e.length-1]:i.getBoundingClientRect()}const zE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function s1(i,r,e){let{node:n,offset:s,atom:a}=i.docView.domFromPos(r,e<0?-1:1),d=ih||ps;if(3==n.nodeType){if(!d||!zE.test(n.nodeValue)&&(e<0?s:s!=n.nodeValue.length)){let p=s,g=s,b=e<0?1:-1;return e<0&&!s?(g++,b=-1):e>=0&&s==n.nodeValue.length?(p--,b=1):e<0?p--:g++,sd($o(oo(n,p,g),1),b<0)}{let p=$o(oo(n,s,s),e);if(ps&&s&&/\s/.test(n.nodeValue[s-1])&&s<n.nodeValue.length){let g=$o(oo(n,s-1,s-1),-1);if(g.top==p.top){let b=$o(oo(n,s,s+1),-1);if(b.top!=p.top)return sd(b,b.left<g.left)}}return p}}if(!i.state.doc.resolve(r-(a||0)).parent.inlineContent){if(null==a&&s&&(e<0||s==Fs(n))){let p=n.childNodes[s-1];if(1==p.nodeType)return Hp(p.getBoundingClientRect(),!1)}if(null==a&&s<Fs(n)){let p=n.childNodes[s];if(1==p.nodeType)return Hp(p.getBoundingClientRect(),!0)}return Hp(n.getBoundingClientRect(),e>=0)}if(null==a&&s&&(e<0||s==Fs(n))){let p=n.childNodes[s-1],g=3==p.nodeType?oo(p,Fs(p)-(d?0:1)):1!=p.nodeType||"BR"==p.nodeName&&p.nextSibling?null:p;if(g)return sd($o(g,1),!1)}if(null==a&&s<Fs(n)){let p=n.childNodes[s];for(;p.pmViewDesc&&p.pmViewDesc.ignoreForCoords;)p=p.nextSibling;let g=p?3==p.nodeType?oo(p,0,d?0:1):1==p.nodeType?p:null:null;if(g)return sd($o(g,-1),!0)}return sd($o(3==n.nodeType?oo(n):n,-e),e>=0)}function sd(i,r){if(0==i.width)return i;let e=r?i.left:i.right;return{top:i.top,bottom:i.bottom,left:e,right:e}}function Hp(i,r){if(0==i.height)return i;let e=r?i.top:i.bottom;return{top:e,bottom:e,left:i.left,right:i.right}}function o1(i,r,e){let n=i.state,s=i.root.activeElement;n!=r&&i.updateState(r),s!=i.dom&&i.focus();try{return e()}finally{n!=r&&i.updateState(n),s!=i.dom&&s&&s.focus()}}const HE=/[\u0590-\u08ac]/;let a1=null,l1=null,c1=!1;class Bl{constructor(r,e,n,s){this.parent=r,this.children=e,this.dom=n,this.contentDOM=s,this.dirty=0,n.pmViewDesc=this}matchesWidget(r){return!1}matchesMark(r){return!1}matchesNode(r,e,n){return!1}matchesHack(r){return!1}parseRule(){return null}stopEvent(r){return!1}get size(){let r=0;for(let e=0;e<this.children.length;e++)r+=this.children[e].size;return r}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let r=0;r<this.children.length;r++)this.children[r].destroy()}posBeforeChild(r){for(let e=0,n=this.posAtStart;;e++){let s=this.children[e];if(s==r)return n;n+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(r,e,n){if(this.contentDOM&&this.contentDOM.contains(1==r.nodeType?r:r.parentNode)){if(n<0){let a,d;if(r==this.contentDOM)a=r.childNodes[e-1];else{for(;r.parentNode!=this.contentDOM;)r=r.parentNode;a=r.previousSibling}for(;a&&(!(d=a.pmViewDesc)||d.parent!=this);)a=a.previousSibling;return a?this.posBeforeChild(d)+d.size:this.posAtStart}{let a,d;if(r==this.contentDOM)a=r.childNodes[e];else{for(;r.parentNode!=this.contentDOM;)r=r.parentNode;a=r.nextSibling}for(;a&&(!(d=a.pmViewDesc)||d.parent!=this);)a=a.nextSibling;return a?this.posBeforeChild(d):this.posAtEnd}}let s;if(r==this.dom&&this.contentDOM)s=e>Pr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=2&r.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let a=r;;a=a.parentNode){if(a==this.dom){s=!1;break}if(a.previousSibling)break}if(null==s&&e==r.childNodes.length)for(let a=r;;a=a.parentNode){if(a==this.dom){s=!0;break}if(a.nextSibling)break}}return s??n>0?this.posAtEnd:this.posAtStart}nearestDesc(r,e=!1){for(let n=!0,s=r;s;s=s.parentNode){let d,a=this.getDesc(s);if(a&&(!e||a.node)){if(!n||!(d=a.nodeDOM)||(1==d.nodeType?d.contains(1==r.nodeType?r:r.parentNode):d==r))return a;n=!1}}}getDesc(r){let e=r.pmViewDesc;for(let n=e;n;n=n.parent)if(n==this)return e}posFromDOM(r,e,n){for(let s=r;s;s=s.parentNode){let a=this.getDesc(s);if(a)return a.localPosFromDOM(r,e,n)}return-1}descAt(r){for(let e=0,n=0;e<this.children.length;e++){let s=this.children[e],a=n+s.size;if(n==r&&a!=n){for(;!s.border&&s.children.length;)s=s.children[0];return s}if(r<a)return s.descAt(r-n-s.border);n=a}}domFromPos(r,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:r+1};let a,n=0,s=0;for(let a=0;n<this.children.length;n++){let d=this.children[n],f=a+d.size;if(f>r||d instanceof f1){s=r-a;break}a=f}if(s)return this.children[n].domFromPos(s-this.children[n].border,e);for(;n&&!(a=this.children[n-1]).size&&a instanceof u1&&a.side>=0;n--);if(e<=0){let a,d=!0;for(;a=n?this.children[n-1]:null,a&&a.dom.parentNode!=this.contentDOM;n--,d=!1);return a&&e&&d&&!a.border&&!a.domAtom?a.domFromPos(a.size,e):{node:this.contentDOM,offset:a?Pr(a.dom)+1:0}}{let a,d=!0;for(;a=n<this.children.length?this.children[n]:null,a&&a.dom.parentNode!=this.contentDOM;n++,d=!1);return a&&d&&!a.border&&!a.domAtom?a.domFromPos(0,e):{node:this.contentDOM,offset:a?Pr(a.dom):this.contentDOM.childNodes.length}}}parseRange(r,e,n=0){if(0==this.children.length)return{node:this.contentDOM,from:r,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,a=-1;for(let d=n,f=0;;f++){let p=this.children[f],g=d+p.size;if(-1==s&&r<=g){let b=d+p.border;if(r>=b&&e<=g-p.border&&p.node&&p.contentDOM&&this.contentDOM.contains(p.contentDOM))return p.parseRange(r,e,b);r=d;for(let S=f;S>0;S--){let k=this.children[S-1];if(k.size&&k.dom.parentNode==this.contentDOM&&!k.emptyChildAt(1)){s=Pr(k.dom)+1;break}r-=k.size}-1==s&&(s=0)}if(s>-1&&(g>e||f==this.children.length-1)){e=g;for(let b=f+1;b<this.children.length;b++){let S=this.children[b];if(S.size&&S.dom.parentNode==this.contentDOM&&!S.emptyChildAt(-1)){a=Pr(S.dom);break}e+=S.size}-1==a&&(a=this.contentDOM.childNodes.length);break}d=g}return{node:this.contentDOM,from:r,to:e,fromOffset:s,toOffset:a}}emptyChildAt(r){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[r<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(r)}domAfterPos(r){let{node:e,offset:n}=this.domFromPos(r,0);if(1!=e.nodeType||n==e.childNodes.length)throw new RangeError("No node after pos "+r);return e.childNodes[n]}setSelection(r,e,n,s=!1){let a=Math.min(r,e),d=Math.max(r,e);for(let k=0,T=0;k<this.children.length;k++){let F=this.children[k],K=T+F.size;if(a>T&&d<K)return F.setSelection(r-T-F.border,e-T-F.border,n,s);T=K}let f=this.domFromPos(r,r?-1:1),p=e==r?f:this.domFromPos(e,e?-1:1),g=n.getSelection(),b=!1;if((ps||Ar)&&r==e){let{node:k,offset:T}=f;if(3==k.nodeType){if(b=!(!T||"\n"!=k.nodeValue[T-1]),b&&T==k.nodeValue.length)for(let K,F=k;F;F=F.parentNode){if(K=F.nextSibling){"BR"==K.nodeName&&(f=p={node:K.parentNode,offset:Pr(K)+1});break}let fe=F.pmViewDesc;if(fe&&fe.node&&fe.node.isBlock)break}}else{let F=k.childNodes[T-1];b=F&&("BR"==F.nodeName||"false"==F.contentEditable)}}if(ps&&g.focusNode&&g.focusNode!=p.node&&1==g.focusNode.nodeType){let k=g.focusNode.childNodes[g.focusOffset];k&&"false"==k.contentEditable&&(s=!0)}if(!(s||b&&Ar)&&rd(f.node,f.offset,g.anchorNode,g.anchorOffset)&&rd(p.node,p.offset,g.focusNode,g.focusOffset))return;let S=!1;if((g.extend||r==e)&&!b){g.collapse(f.node,f.offset);try{if(r!=e)try{g.extend(p.node,p.offset)}catch{}S=!0}catch(k){if(!(k instanceof DOMException))throw k}}if(!S){if(r>e){let T=f;f=p,p=T}let k=document.createRange();k.setEnd(p.node,p.offset),k.setStart(f.node,f.offset),g.removeAllRanges(),g.addRange(k)}}ignoreMutation(r){return!this.contentDOM&&"selection"!=r.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(r,e){for(let n=0,s=0;s<this.children.length;s++){let a=this.children[s],d=n+a.size;if(n==d?r<=d&&e>=n:r<d&&e>n){let f=n+a.border,p=d-a.border;if(r>=f&&e<=p)return this.dirty=r==n||e==d?2:1,void(r!=f||e!=p||!a.contentLost&&a.dom.parentNode==this.contentDOM?a.markDirty(r-f,e-f):a.dirty=3);a.dirty=a.dom!=a.contentDOM||a.dom.parentNode!=this.contentDOM||a.children.length?3:2}n=d}this.dirty=2}markParentsDirty(){let r=1;for(let e=this.parent;e;e=e.parent,r++){let n=1==r?2:1;e.dirty<n&&(e.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class u1 extends Bl{constructor(r,e,n,s){let a,d=e.type.toDOM;if("function"==typeof d&&(d=d(n,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s)),!e.type.spec.raw){if(1!=d.nodeType){let f=document.createElement("span");f.appendChild(d),d=f}d.contentEditable="false",d.classList.add("ProseMirror-widget")}super(r,[],d,null),this.widget=e,this.widget=e,a=this}matchesWidget(r){return 0==this.dirty&&r.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(r){let e=this.widget.spec.stopEvent;return!!e&&e(r)}ignoreMutation(r){return"selection"!=r.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class h1 extends Bl{constructor(r,e,n,s){super(r,[],e,null),this.textDOM=n,this.text=s}get size(){return this.text.length}localPosFromDOM(r,e){return r!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(r){return{node:this.textDOM,offset:r}}ignoreMutation(r){return"characterData"===r.type&&r.target.nodeValue==r.oldValue}}class Na extends Bl{constructor(r,e,n,s){super(r,[],n,s),this.mark=e}static create(r,e,n,s){let a=s.nodeViews[e.type.name],d=a&&a(e,s,n);return(!d||!d.dom)&&(d=io.renderSpec(document,e.type.spec.toDOM(e,n))),new Na(r,e,d.dom,d.contentDOM||d.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(r){return 3!=this.dirty&&this.mark.eq(r)}markDirty(r,e){if(super.markDirty(r,e),0!=this.dirty){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}}slice(r,e,n){let s=Na.create(this.parent,this.mark,!0,n),a=this.children,d=this.size;e<d&&(a=$p(a,e,d,n)),r>0&&(a=$p(a,0,r,n));for(let f=0;f<a.length;f++)a[f].parent=s;return s.children=a,s}}class Fa extends Bl{constructor(r,e,n,s,a,d,f,p,g){super(r,[],a,d),this.node=e,this.outerDeco=n,this.innerDeco=s,this.nodeDOM=f,d&&this.updateChildren(p,g)}static create(r,e,n,s,a,d){let p,f=a.nodeViews[e.type.name],g=f&&f(e,a,()=>p?p.parent?p.parent.posBeforeChild(p):void 0:d,n,s),b=g&&g.dom,S=g&&g.contentDOM;if(e.isText)if(b){if(3!=b.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else b=document.createTextNode(e.text);else b||({dom:b,contentDOM:S}=io.renderSpec(document,e.type.spec.toDOM(e)));!S&&!e.isText&&"BR"!=b.nodeName&&(b.hasAttribute("contenteditable")||(b.contentEditable="false"),e.type.spec.draggable&&(b.draggable=!0));let k=b;return b=g1(b,n,e),g?p=new VE(r,e,n,s,b,S||null,k,g,a,d+1):e.isText?new sh(r,e,n,s,b,k,a):new Fa(r,e,n,s,b,S||null,k,a,d+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let r={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(r.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let n=this.children[e];if(this.dom.contains(n.dom.parentNode)){r.contentElement=n.dom.parentNode;break}}r.contentElement||(r.getContent=()=>Me.empty)}else r.contentElement=this.contentDOM;else r.getContent=()=>this.node.content;return r}matchesNode(r,e,n){return 0==this.dirty&&r.eq(this.node)&&Kp(e,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(r,e){let n=this.node.inlineContent,s=e,a=r.composing?this.localCompositionInfo(r,e):null,d=a&&a.pos>-1?a:null,f=a&&a.pos<0,p=new qE(this,d&&d.node,r);(function $E(i,r,e,n){let s=r.locals(i),a=0;if(0==s.length){for(let g=0;g<i.childCount;g++){let b=i.child(g);n(b,s,r.forChild(a,b),g),a+=b.nodeSize}return}let d=0,f=[],p=null;for(let g=0;;){if(d<s.length&&s[d].to==a){let K,F=s[d++];for(;d<s.length&&s[d].to==a;)(K||(K=[F])).push(s[d++]);if(K){K.sort(KE);for(let fe=0;fe<K.length;fe++)e(K[fe],g,!!p)}else e(F,g,!!p)}let b,S;if(p)S=-1,b=p,p=null;else{if(!(g<i.childCount))break;S=g,b=i.child(g++)}for(let F=0;F<f.length;F++)f[F].to<=a&&f.splice(F--,1);for(;d<s.length&&s[d].from<=a&&s[d].to>a;)f.push(s[d++]);let k=a+b.nodeSize;if(b.isText){let F=k;d<s.length&&s[d].from<F&&(F=s[d].from);for(let K=0;K<f.length;K++)f[K].to<F&&(F=f[K].to);F<k&&(p=b.cut(F-a),b=b.cut(0,F-a),k=F,S=-1)}n(b,b.isInline&&!b.isLeaf?f.filter(F=>!F.inline):f.slice(),r.forChild(a,b),S),a=k}})(this.node,this.innerDeco,(g,b,S)=>{g.spec.marks?p.syncToMarks(g.spec.marks,n,r):g.type.side>=0&&!S&&p.syncToMarks(b==this.node.childCount?Ln.none:this.node.child(b).marks,n,r),p.placeWidget(g,r,s)},(g,b,S,k)=>{let T;p.syncToMarks(g.marks,n,r),p.findNodeMatch(g,b,S,k)||f&&r.state.selection.from>s&&r.state.selection.to<s+g.nodeSize&&(T=p.findIndexWithChild(a.node))>-1&&p.updateNodeAt(g,b,S,T,r)||p.updateNextNode(g,b,S,r,k)||p.addNode(g,b,S,r,s),s+=g.nodeSize}),p.syncToMarks([],n,r),this.node.isTextblock&&p.addTextblockHacks(),p.destroyRest(),(p.changed||2==this.dirty)&&(d&&this.protectLocalComposition(r,d),p1(this.contentDOM,this.children,r),Fl&&function WE(i){if("UL"==i.nodeName||"OL"==i.nodeName){let r=i.style.cssText;i.style.cssText=r+"; list-style: square !important",window.getComputedStyle(i),i.style.cssText=r}}(this.dom))}localCompositionInfo(r,e){let{from:n,to:s}=r.state.selection;if(!(r.state.selection instanceof en)||n<e||s>e+this.node.content.size)return null;let a=r.domSelection(),d=function jE(i,r){for(;;){if(3==i.nodeType)return i;if(1==i.nodeType&&r>0){if(i.childNodes.length>r&&3==i.childNodes[r].nodeType)return i.childNodes[r];r=Fs(i=i.childNodes[r-1])}else{if(!(1==i.nodeType&&r<i.childNodes.length))return null;i=i.childNodes[r],r=0}}}(a.focusNode,a.focusOffset);if(!d||!this.dom.contains(d.parentNode))return null;if(this.node.inlineContent){let f=d.nodeValue,p=function QE(i,r,e,n){for(let s=0,a=0;s<i.childCount&&a<=n;){let d=i.child(s++),f=a;if(a+=d.nodeSize,!d.isText)continue;let p=d.text;for(;s<i.childCount;){let g=i.child(s++);if(a+=g.nodeSize,!g.isText)break;p+=g.text}if(a>=e){let g=f<n?p.lastIndexOf(r,n-f-1):-1;if(g>=0&&g+r.length+f>=e)return f+g;if(e==n&&p.length>=n+r.length-f&&p.slice(n-f,n-f+r.length)==r)return n}}return-1}(this.node.content,f,n-e,s-e);return p<0?null:{node:d,pos:p,text:f}}return{node:d,pos:-1,text:""}}protectLocalComposition(r,{node:e,pos:n,text:s}){if(this.getDesc(e))return;let a=e;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let d=new h1(this,a,e,s);r.input.compositionNodes.push(d),this.children=$p(this.children,n,n+s.length,r,d)}update(r,e,n,s){return!(3==this.dirty||!r.sameMarkup(this.node)||(this.updateInner(r,e,n,s),0))}updateInner(r,e,n,s){this.updateOuterDeco(e),this.node=r,this.innerDeco=n,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=0}updateOuterDeco(r){if(Kp(r,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=m1(this.dom,this.nodeDOM,Yp(this.outerDeco,this.node,e),Yp(r,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=r}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function qp(i,r,e,n,s){return g1(n,r,i),new Fa(void 0,i,r,e,n,n,n,s,0)}class sh extends Fa{constructor(r,e,n,s,a,d,f){super(r,e,n,s,a,null,d,f,0)}parseRule(){let r=this.nodeDOM.parentNode;for(;r&&r!=this.dom&&!r.pmIsDeco;)r=r.parentNode;return{skip:r||!0}}update(r,e,n,s){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!r.sameMarkup(this.node)||(this.updateOuterDeco(e),(0!=this.dirty||r.text!=this.node.text)&&r.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=r.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=r,this.dirty=0,0))}inParent(){let r=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==r)return!0;return!1}domFromPos(r){return{node:this.nodeDOM,offset:r}}localPosFromDOM(r,e,n){return r==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(r,e,n)}ignoreMutation(r){return"characterData"!=r.type&&"selection"!=r.type}slice(r,e,n){let s=this.node.cut(r,e),a=document.createTextNode(s.text);return new sh(this.parent,s,this.outerDeco,this.innerDeco,a,a,n)}markDirty(r,e){super.markDirty(r,e),this.dom!=this.nodeDOM&&(0==r||e==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}class f1 extends Bl{parseRule(){return{ignore:!0}}matchesHack(r){return 0==this.dirty&&this.dom.nodeName==r}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class VE extends Fa{constructor(r,e,n,s,a,d,f,p,g,b){super(r,e,n,s,a,d,f,g,b),this.spec=p}update(r,e,n,s){if(3==this.dirty)return!1;if(this.spec.update){let a=this.spec.update(r,e,n);return a&&this.updateInner(r,e,n,s),a}return!(!this.contentDOM&&!r.isLeaf)&&super.update(r,e,n,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(r,e,n,s){this.spec.setSelection?this.spec.setSelection(r,e,n):super.setSelection(r,e,n,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(r){return!!this.spec.stopEvent&&this.spec.stopEvent(r)}ignoreMutation(r){return this.spec.ignoreMutation?this.spec.ignoreMutation(r):super.ignoreMutation(r)}}function p1(i,r,e){let n=i.firstChild,s=!1;for(let a=0;a<r.length;a++){let d=r[a],f=d.dom;if(f.parentNode==i){for(;f!=n;)n=_1(n),s=!0;n=n.nextSibling}else s=!0,i.insertBefore(f,n);if(d instanceof Na){let p=n?n.previousSibling:i.lastChild;p1(d.contentDOM,d.children,e),n=p?p.nextSibling:i.firstChild}}for(;n;)n=_1(n),s=!0;s&&e.trackWrites==i&&(e.trackWrites=null)}const od=function(i){i&&(this.nodeName=i)};od.prototype=Object.create(null);const La=[new od];function Yp(i,r,e){if(0==i.length)return La;let n=e?La[0]:new od,s=[n];for(let a=0;a<i.length;a++){let d=i[a].type.attrs;if(d){d.nodeName&&s.push(n=new od(d.nodeName));for(let f in d){let p=d[f];null!=p&&(e&&1==s.length&&s.push(n=new od(r.isInline?"span":"div")),"class"==f?n.class=(n.class?n.class+" ":"")+p:"style"==f?n.style=(n.style?n.style+";":"")+p:"nodeName"!=f&&(n[f]=p))}}}return s}function m1(i,r,e,n){if(e==La&&n==La)return r;let s=r;for(let a=0;a<n.length;a++){let d=n[a],f=e[a];if(a){let p;f&&f.nodeName==d.nodeName&&s!=i&&(p=s.parentNode)&&p.nodeName.toLowerCase()==d.nodeName||(p=document.createElement(d.nodeName),p.pmIsDeco=!0,p.appendChild(s),f=La[0]),s=p}JE(s,f||La[0],d)}return s}function JE(i,r,e){for(let n in r)"class"!=n&&"style"!=n&&"nodeName"!=n&&!(n in e)&&i.removeAttribute(n);for(let n in e)"class"!=n&&"style"!=n&&"nodeName"!=n&&e[n]!=r[n]&&i.setAttribute(n,e[n]);if(r.class!=e.class){let n=r.class?r.class.split(" ").filter(Boolean):[],s=e.class?e.class.split(" ").filter(Boolean):[];for(let a=0;a<n.length;a++)-1==s.indexOf(n[a])&&i.classList.remove(n[a]);for(let a=0;a<s.length;a++)-1==n.indexOf(s[a])&&i.classList.add(s[a]);0==i.classList.length&&i.removeAttribute("class")}if(r.style!=e.style){if(r.style){let s,n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;s=n.exec(r.style);)i.style.removeProperty(s[1])}e.style&&(i.style.cssText+=e.style)}}function g1(i,r,e){return m1(i,i,La,Yp(r,e,1!=i.nodeType))}function Kp(i,r){if(i.length!=r.length)return!1;for(let e=0;e<i.length;e++)if(!i[e].type.eq(r[e].type))return!1;return!0}function _1(i){let r=i.nextSibling;return i.parentNode.removeChild(i),r}class qE{constructor(r,e,n){this.lock=e,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=r,this.preMatch=function YE(i,r){let e=r,n=e.children.length,s=i.childCount,a=new Map,d=[];e:for(;s>0;){let f;for(;;)if(n){let g=e.children[n-1];if(!(g instanceof Na)){f=g,n--;break}e=g,n=g.children.length}else{if(e==r)break e;n=e.parent.children.indexOf(e),e=e.parent}let p=f.node;if(p){if(p!=i.child(s-1))break;--s,a.set(f,s),d.push(f)}}return{index:s,matched:a,matches:d.reverse()}}(r.node.content,r)}destroyBetween(r,e){if(r!=e){for(let n=r;n<e;n++)this.top.children[n].destroy();this.top.children.splice(r,e-r),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(r,e,n){let s=0,a=this.stack.length>>1,d=Math.min(a,r.length);for(;s<d&&(s==a-1?this.top:this.stack[s+1<<1]).matchesMark(r[s])&&!1!==r[s].type.spec.spanning;)s++;for(;s<a;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<r.length;){this.stack.push(this.top,this.index+1);let f=-1;for(let p=this.index;p<Math.min(this.index+3,this.top.children.length);p++)if(this.top.children[p].matchesMark(r[a])){f=p;break}if(f>-1)f>this.index&&(this.changed=!0,this.destroyBetween(this.index,f)),this.top=this.top.children[this.index];else{let p=Na.create(this.top,r[a],e,n);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,a++}}findNodeMatch(r,e,n,s){let d,a=-1;if(s>=this.preMatch.index&&(d=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&d.matchesNode(r,e,n))a=this.top.children.indexOf(d,this.index);else for(let f=this.index,p=Math.min(this.top.children.length,f+5);f<p;f++){let g=this.top.children[f];if(g.matchesNode(r,e,n)&&!this.preMatch.matched.has(g)){a=f;break}}return!(a<0||(this.destroyBetween(this.index,a),this.index++,0))}updateNodeAt(r,e,n,s,a){let d=this.top.children[s];return 3==d.dirty&&d.dom==d.contentDOM&&(d.dirty=2),!!d.update(r,e,n,a)&&(this.destroyBetween(this.index,s),this.index++,!0)}findIndexWithChild(r){for(;;){let e=r.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let n=r.pmViewDesc;if(n)for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==n)return s;return-1}r=e}}updateNextNode(r,e,n,s,a){for(let d=this.index;d<this.top.children.length;d++){let f=this.top.children[d];if(f instanceof Fa){let p=this.preMatch.matched.get(f);if(null!=p&&p!=a)return!1;let g=f.dom;if((!this.lock||!(g==this.lock||1==g.nodeType&&g.contains(this.lock.parentNode))||r.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==r.text&&3!=f.dirty&&Kp(e,f.outerDeco))&&f.update(r,e,n,s))return this.destroyBetween(this.index,d),f.dom!=g&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(r,e,n,s,a){this.top.children.splice(this.index++,0,Fa.create(this.top,r,e,n,s,a)),this.changed=!0}placeWidget(r,e,n){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(!s||!s.matchesWidget(r)||r!=s.widget&&s.widget.type.toDOM.parentNode){let a=new u1(this.top,r,e,n);this.top.children.splice(this.index++,0,a),this.changed=!0}else this.index++}addTextblockHacks(){let r=this.top.children[this.index-1],e=this.top;for(;r instanceof Na;)e=r,r=e.children[e.children.length-1];(!r||!(r instanceof sh)||/\n$/.test(r.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(r.node.text))&&((Ar||mr)&&r&&"false"==r.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(r,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(r))this.index++;else{let n=document.createElement(r);"IMG"==r&&(n.className="ProseMirror-separator",n.alt=""),"BR"==r&&(n.className="ProseMirror-trailingBreak");let s=new f1(this.top,[],n,null);e!=this.top?e.children.push(s):e.children.splice(this.index++,0,s),this.changed=!0}}}function KE(i,r){return i.type.side-r.type.side}function $p(i,r,e,n,s){let a=[];for(let d=0,f=0;d<i.length;d++){let p=i[d],g=f,b=f+=p.size;g>=e||b<=r?a.push(p):(g<r&&a.push(p.slice(0,r-g,n)),s&&(a.push(s),s=void 0),b>e&&a.push(p.slice(e-g,p.size,n)))}return a}function Wp(i,r=null){let e=i.domSelection(),n=i.state.doc;if(!e.focusNode)return null;let s=i.docView.nearestDesc(e.focusNode),a=s&&0==s.size,d=i.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(d<0)return null;let p,g,f=n.resolve(d);if(rh(e)){for(p=f;s&&!s.node;)s=s.parent;let b=s.node;if(s&&b.isAtom&&vt.isSelectable(b)&&s.parent&&(!b.isInline||!function AE(i,r,e){for(let n=0==r,s=r==Fs(i);n||s;){if(i==e)return!0;let a=Pr(i);if(!(i=i.parentNode))return!1;n=n&&0==a,s=s&&a==Fs(i)}}(e.focusNode,e.focusOffset,s.dom))){let S=s.posBefore;g=new vt(d==S?f:n.resolve(S))}}else{let b=i.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(b<0)return null;p=n.resolve(b)}return g||(g=oh(i,p,f,"pointer"==r||i.state.selection.head<f.pos&&!a?1:-1)),g}function v1(i){return i.editable?i.hasFocus():Wr(i)&&document.activeElement&&document.activeElement.contains(i.dom)}function ao(i,r=!1){let e=i.state.selection;if(C1(i,e),v1(i)){if(!r&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&mr){let n=i.domSelection(),s=i.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&rd(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset))return i.input.mouseDown.delayedSelectionSync=!0,void i.domObserver.setCurSelection()}if(i.domObserver.disconnectSelection(),i.cursorWrapper)!function tw(i){let r=i.domSelection(),e=document.createRange(),n=i.cursorWrapper.dom,s="IMG"==n.nodeName;s?e.setEnd(n.parentNode,Pr(n)+1):e.setEnd(n,0),e.collapse(!1),r.removeAllRanges(),r.addRange(e),!s&&!i.state.selection.visible&&Dr&&Yo<=11&&(n.disabled=!0,n.disabled=!1)}(i);else{let a,d,{anchor:n,head:s}=e;b1&&!(e instanceof en)&&(e.$from.parent.inlineContent||(a=x1(i,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(d=x1(i,e.to))),i.docView.setSelection(n,s,i.root,r),b1&&(a&&XE(a),d&&XE(d)),e.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function ew(i){let r=i.dom.ownerDocument;r.removeEventListener("selectionchange",i.input.hideSelectionGuard);let e=i.domSelection(),n=e.anchorNode,s=e.anchorOffset;r.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(e.anchorNode!=n||e.anchorOffset!=s)&&(r.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!v1(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}const b1=Ar||mr&&TE<63;function x1(i,r){let{node:e,offset:n}=i.docView.domFromPos(r,0),s=n<e.childNodes.length?e.childNodes[n]:null,a=n?e.childNodes[n-1]:null;if(Ar&&s&&"false"==s.contentEditable)return jp(s);if(!(s&&"false"!=s.contentEditable||a&&"false"!=a.contentEditable)){if(s)return jp(s);if(a)return jp(a)}}function jp(i){return i.contentEditable="true",Ar&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}function XE(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}function C1(i,r){if(r instanceof vt){let e=i.docView.descAt(r.from);e!=i.lastSelectedViewDesc&&(S1(i),e&&e.selectNode(),i.lastSelectedViewDesc=e)}else S1(i)}function S1(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}function oh(i,r,e,n){return i.someProp("createSelectionBetween",s=>s(i,r,e))||en.between(r,e,n)}function Qp(i){return!(i.editable&&!i.hasFocus())&&Wr(i)}function Wr(i){let r=i.domSelection();if(!r.anchorNode)return!1;try{return i.dom.contains(3==r.anchorNode.nodeType?r.anchorNode.parentNode:r.anchorNode)&&(i.editable||i.dom.contains(3==r.focusNode.nodeType?r.focusNode.parentNode:r.focusNode))}catch{return!1}}function Pa(i,r){let{$anchor:e,$head:n}=i.selection,s=r>0?e.max(n):e.min(n),a=s.parent.inlineContent?s.depth?i.doc.resolve(r>0?s.after():s.before()):null:s;return a&&Zt.findFrom(a,r)}function Ua(i,r){return i.dispatch(i.state.tr.setSelection(r).scrollIntoView()),!0}function E1(i,r,e){let n=i.state.selection;if(!(n instanceof en)){if(n instanceof vt&&n.node.isInline)return Ua(i,new en(r>0?n.$to:n.$from));{let s=Pa(i.state,r);return!!s&&Ua(i,s)}}if(!n.empty||e.indexOf("s")>-1)return!1;if(i.endOfTextblock(r>0?"right":"left")){let s=Pa(i.state,r);return!!(s&&s instanceof vt)&&Ua(i,s)}if(!(Kr&&e.indexOf("m")>-1)){let d,s=n.$head,a=s.textOffset?null:r<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText)return!1;let f=r<0?s.pos-a.nodeSize:s.pos;return!!(a.isAtom||(d=i.docView.descAt(f))&&!d.contentDOM)&&(vt.isSelectable(a)?Ua(i,new vt(r<0?i.state.doc.resolve(s.pos-a.nodeSize):s)):!!ih&&Ua(i,new en(i.state.doc.resolve(r<0?f:f+a.nodeSize))))}}function ah(i){return 3==i.nodeType?i.nodeValue.length:i.childNodes.length}function ad(i){let r=i.pmViewDesc;return r&&0==r.size&&(i.nextSibling||"BR"!=i.nodeName)}function Xp(i){let r=i.domSelection(),e=r.focusNode,n=r.focusOffset;if(!e)return;let s,a,d=!1;for(ps&&1==e.nodeType&&n<ah(e)&&ad(e.childNodes[n])&&(d=!0);;)if(n>0){if(1!=e.nodeType)break;{let f=e.childNodes[n-1];if(ad(f))s=e,a=--n;else{if(3!=f.nodeType)break;e=f,n=e.nodeValue.length}}}else{if(lh(e))break;{let f=e.previousSibling;for(;f&&ad(f);)s=e.parentNode,a=Pr(f),f=f.previousSibling;if(f)e=f,n=ah(e);else{if(e=e.parentNode,e==i.dom)break;n=0}}}d?ld(i,r,e,n):s&&ld(i,r,s,a)}function em(i){let r=i.domSelection(),e=r.focusNode,n=r.focusOffset;if(!e)return;let a,d,s=ah(e);for(;;)if(n<s){if(1!=e.nodeType)break;if(!ad(e.childNodes[n]))break;a=e,d=++n}else{if(lh(e))break;{let f=e.nextSibling;for(;f&&ad(f);)a=f.parentNode,d=Pr(f)+1,f=f.nextSibling;if(f)e=f,n=0,s=ah(e);else{if(e=e.parentNode,e==i.dom)break;n=s=0}}}a&&ld(i,r,a,d)}function lh(i){let r=i.pmViewDesc;return r&&r.node&&r.node.isBlock}function ld(i,r,e,n){if(rh(r)){let a=document.createRange();a.setEnd(e,n),a.setStart(e,n),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(e,n);i.domObserver.setCurSelection();let{state:s}=i;setTimeout(()=>{i.state==s&&ao(i)},50)}function w1(i,r,e){let n=i.state.selection;if(n instanceof en&&!n.empty||e.indexOf("s")>-1||Kr&&e.indexOf("m")>-1)return!1;let{$from:s,$to:a}=n;if(!s.parent.inlineContent||i.endOfTextblock(r<0?"up":"down")){let d=Pa(i.state,r);if(d&&d instanceof vt)return Ua(i,d)}if(!s.parent.inlineContent){let d=r<0?s:a,f=n instanceof Vi?Zt.near(d,r):Zt.findFrom(d,r);return!!f&&Ua(i,f)}return!1}function k1(i,r){if(!(i.state.selection instanceof en))return!0;let{$head:e,$anchor:n,empty:s}=i.state.selection;if(!e.sameParent(n))return!0;if(!s)return!1;if(i.endOfTextblock(r>0?"forward":"backward"))return!0;let a=!e.textOffset&&(r<0?e.nodeBefore:e.nodeAfter);if(a&&!a.isText){let d=i.state.tr;return r<0?d.delete(e.pos-a.nodeSize,e.pos):d.delete(e.pos,e.pos+a.nodeSize),i.dispatch(d),!0}return!1}function T1(i,r,e){i.domObserver.stop(),r.contentEditable=e,i.domObserver.start()}function D1(i,r){i.someProp("transformCopied",T=>{r=T(r)});let e=[],{content:n,openStart:s,openEnd:a}=r;for(;s>1&&a>1&&1==n.childCount&&1==n.firstChild.childCount;){s--,a--;let T=n.firstChild;e.push(T.type.name,T.attrs!=T.type.defaultAttrs?T.attrs:null),n=T.content}let d=i.someProp("clipboardSerializer")||io.fromSchema(i.state.schema),f=cd(),p=f.createElement("div");p.appendChild(d.serializeFragment(n,{document:f}));let b,g=p.firstChild,S=0;for(;g&&1==g.nodeType&&(b=N1[g.nodeName.toLowerCase()]);){for(let T=b.length-1;T>=0;T--){let F=f.createElement(b[T]);for(;p.firstChild;)F.appendChild(p.firstChild);p.appendChild(F),S++}g=p.firstChild}return g&&1==g.nodeType&&g.setAttribute("data-pm-slice",`${s} ${a}${S?` -${S}`:""} ${JSON.stringify(e)}`),{dom:p,text:i.someProp("clipboardTextSerializer",T=>T(r))||r.content.textBetween(0,r.content.size,"\n\n")}}function A1(i,r,e,n,s){let d,f,a=s.parent.type.spec.code;if(!e&&!r)return null;let p=r&&(n||a||!e);if(p){if(i.someProp("transformPastedText",k=>{r=k(r,a||n)}),a)return r?new st(Me.from(i.state.schema.text(r.replace(/\r\n?/g,"\n"))),0,0):st.empty;let S=i.someProp("clipboardTextParser",k=>k(r,s,n));if(S)f=S;else{let k=s.marks(),{schema:T}=i.state,F=io.fromSchema(T);d=document.createElement("div"),r.split(/(?:\r\n?|\n)+/).forEach(K=>{let fe=d.appendChild(document.createElement("p"));K&&fe.appendChild(F.serializeNode(T.text(K,k)))})}}else i.someProp("transformPastedHTML",S=>{e=S(e)}),d=function aw(i){let r=/^(\s*<meta [^>]*>)*/.exec(i);r&&(i=i.slice(r[0].length));let s,e=cd().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(i);if((s=n&&N1[n[1].toLowerCase()])&&(i=s.map(a=>"<"+a+">").join("")+i+s.map(a=>"</"+a+">").reverse().join("")),e.innerHTML=i,s)for(let a=0;a<s.length;a++)e=e.querySelector(s[a])||e;return e}(e),ih&&function dd(i){let r=i.querySelectorAll(mr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<r.length;e++){let n=r[e];1==n.childNodes.length&&"\xa0"==n.textContent&&n.parentNode&&n.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),n)}}(d);let g=d&&d.querySelector("[data-pm-slice]"),b=g&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(g.getAttribute("data-pm-slice")||"");if(b&&b[3])for(let S=+b[3];S>0&&d.firstChild;S--)d=d.firstChild;if(f||(f=(i.someProp("clipboardParser")||i.someProp("domParser")||Da.fromSchema(i.state.schema)).parseSlice(d,{preserveWhitespace:!(!p&&!b),context:s,ruleFromNode:k=>"BR"!=k.nodeName||k.nextSibling||!k.parentNode||sw.test(k.parentNode.nodeName)?null:{ignore:!0}})),b)f=function lw(i,r){if(!i.size)return i;let n,e=i.content.firstChild.type.schema;try{n=JSON.parse(r)}catch{return i}let{content:s,openStart:a,openEnd:d}=i;for(let f=n.length-2;f>=0;f-=2){let p=e.nodes[n[f]];if(!p||p.hasRequiredAttrs())break;s=Me.from(p.create(n[f+1],s)),a++,d++}return new st(s,a,d)}(R1(f,+b[1],+b[2]),b[4]);else if(f=st.maxOpen(function ow(i,r){if(i.childCount<2)return i;for(let e=r.depth;e>=0;e--){let a,s=r.node(e).contentMatchAt(r.index(e)),d=[];if(i.forEach(f=>{if(!d)return;let g,p=s.findWrapping(f.type);if(!p)return d=null;if(g=d.length&&a.length&&I1(p,a,f,d[d.length-1],0))d[d.length-1]=g;else{d.length&&(d[d.length-1]=M1(d[d.length-1],a.length));let b=O1(f,p);d.push(b),s=s.matchType(b.type),a=p}}),d)return Me.from(d)}return i}(f.content,s),!0),f.openStart||f.openEnd){let S=0,k=0;for(let T=f.content.firstChild;S<f.openStart&&!T.type.spec.isolating;S++,T=T.firstChild);for(let T=f.content.lastChild;k<f.openEnd&&!T.type.spec.isolating;k++,T=T.lastChild);f=R1(f,S,k)}return i.someProp("transformPasted",S=>{f=S(f)}),f}const sw=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function O1(i,r,e=0){for(let n=r.length-1;n>=e;n--)i=r[n].create(null,Me.from(i));return i}function I1(i,r,e,n,s){if(s<i.length&&s<r.length&&i[s]==r[s]){let a=I1(i,r,e,n.lastChild,s+1);if(a)return n.copy(n.content.replaceChild(n.childCount-1,a));if(n.contentMatchAt(n.childCount).matchType(s==i.length-1?e.type:i[s+1]))return n.copy(n.content.append(Me.from(O1(e,i,s+1))))}}function M1(i,r){if(0==r)return i;let e=i.content.replaceChild(i.childCount-1,M1(i.lastChild,r-1)),n=i.contentMatchAt(i.childCount).fillBefore(Me.empty,!0);return i.copy(e.append(n))}function tm(i,r,e,n,s,a){let d=r<0?i.firstChild:i.lastChild,f=d.content;return s<n-1&&(f=tm(f,r,e,n,s+1,a)),s>=e&&(f=r<0?d.contentMatchAt(0).fillBefore(f,i.childCount>1||a<=s).append(f):f.append(d.contentMatchAt(d.childCount).fillBefore(Me.empty,!0))),i.replaceChild(r<0?0:i.childCount-1,d.copy(f))}function R1(i,r,e){return r<i.openStart&&(i=new st(tm(i.content,-1,r,i.openStart,0,i.openEnd),r,i.openEnd)),e<i.openEnd&&(i=new st(tm(i.content,1,e,i.openEnd,0,0),i.openStart,e)),i}const N1={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ms=null;function cd(){return ms||(ms=document.implementation.createHTMLDocument("title"))}const gr={},or={},cw={touchstart:!0,touchmove:!0};class ud{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ve(i,r){i.input.lastSelectionOrigin=r,i.input.lastSelectionTime=Date.now()}function Ba(i){i.someProp("handleDOMEvents",r=>{for(let e in r)i.input.eventHandlers[e]||i.dom.addEventListener(e,i.input.eventHandlers[e]=n=>im(i,n))})}function im(i,r){return i.someProp("handleDOMEvents",e=>{let n=e[r.type];return!!n&&(n(i,r)||r.defaultPrevented)})}function uw(i,r){if(!r.bubbles)return!0;if(r.defaultPrevented)return!1;for(let e=r.target;e!=i.dom;e=e.parentNode)if(!e||11==e.nodeType||e.pmViewDesc&&e.pmViewDesc.stopEvent(r))return!1;return!0}function ch(i){return{left:i.clientX,top:i.clientY}}function rm(i,r,e,n,s){if(-1==n)return!1;let a=i.state.doc.resolve(n);for(let d=a.depth+1;d>0;d--)if(i.someProp(r,f=>d>a.depth?f(i,e,a.nodeAfter,a.before(d),s,!0):f(i,e,a.node(d),a.before(d),s,!1)))return!0;return!1}function Gl(i,r,e){i.focused||i.focus();let n=i.state.tr.setSelection(r);"pointer"==e&&n.setMeta("pointer",!0),i.dispatch(n)}function _w(i,r,e,n){return rm(i,"handleDoubleClickOn",r,e,n)||i.someProp("handleDoubleClick",s=>s(i,r,n))}function vw(i,r,e,n){return rm(i,"handleTripleClickOn",r,e,n)||i.someProp("handleTripleClick",s=>s(i,r,n))||function bw(i,r,e){if(0!=e.button)return!1;let n=i.state.doc;if(-1==r)return!!n.inlineContent&&(Gl(i,en.create(n,0,n.content.size),"pointer"),!0);let s=n.resolve(r);for(let a=s.depth+1;a>0;a--){let d=a>s.depth?s.nodeAfter:s.node(a),f=s.before(a);if(d.inlineContent)Gl(i,en.create(n,f+1,f+1+d.content.size),"pointer");else{if(!vt.isSelectable(d))continue;Gl(i,vt.create(n,f),"pointer")}return!0}}(i,e,n)}function sm(i){return hd(i)}or.keydown=(i,r)=>{let e=r;if(i.input.shiftKey=16==e.keyCode||e.shiftKey,!om(i,e)&&(i.input.lastKeyCode=e.keyCode,i.input.lastKeyCodeTime=Date.now(),!Ns||!mr||13!=e.keyCode))if(229!=e.keyCode&&i.domObserver.forceFlush(),!Fl||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)i.someProp("handleKeyDown",n=>n(i,e))||function rw(i,r){let e=r.keyCode,n=function iw(i){let r="";return i.ctrlKey&&(r+="c"),i.metaKey&&(r+="m"),i.altKey&&(r+="a"),i.shiftKey&&(r+="s"),r}(r);return 8==e||Kr&&72==e&&"c"==n?k1(i,-1)||Xp(i):46==e||Kr&&68==e&&"c"==n?k1(i,1)||em(i):13==e||27==e||(37==e||Kr&&66==e&&"c"==n?E1(i,-1,n)||Xp(i):39==e||Kr&&70==e&&"c"==n?E1(i,1,n)||em(i):38==e||Kr&&80==e&&"c"==n?w1(i,-1,n)||Xp(i):40==e||Kr&&78==e&&"c"==n?function y1(i){if(!Ar||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:r,focusOffset:e}=i.domSelection();if(r&&1==r.nodeType&&0==e&&r.firstChild&&"false"==r.firstChild.contentEditable){let n=r.firstChild;T1(i,n,"true"),setTimeout(()=>T1(i,n,"false"),20)}return!1}(i)||w1(i,1,n)||em(i):n==(Kr?"m":"c")&&(66==e||73==e||89==e||90==e))}(i,e)?e.preventDefault():Ve(i,"key");else{let n=Date.now();i.input.lastIOSEnter=n,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==n&&(i.someProp("handleKeyDown",s=>s(i,Ll(13,"Enter"))),i.input.lastIOSEnter=0)},200)}},or.keyup=(i,r)=>{16==r.keyCode&&(i.input.shiftKey=!1)},or.keypress=(i,r)=>{let e=r;if(om(i,e)||!e.charCode||e.ctrlKey&&!e.altKey||Kr&&e.metaKey)return;if(i.someProp("handleKeyPress",s=>s(i,e)))return void e.preventDefault();let n=i.state.selection;if(!(n instanceof en&&n.$from.sameParent(n.$to))){let s=String.fromCharCode(e.charCode);i.someProp("handleTextInput",a=>a(i,n.$from.pos,n.$to.pos,s))||i.dispatch(i.state.tr.insertText(s).scrollIntoView()),e.preventDefault()}};const F1=Kr?"metaKey":"ctrlKey";gr.mousedown=(i,r)=>{let e=r;i.input.shiftKey=e.shiftKey;let n=sm(i),s=Date.now(),a="singleClick";s-i.input.lastClick.time<500&&function fw(i,r){let e=r.x-i.clientX,n=r.y-i.clientY;return e*e+n*n<100}(e,i.input.lastClick)&&!e[F1]&&("singleClick"==i.input.lastClick.type?a="doubleClick":"doubleClick"==i.input.lastClick.type&&(a="tripleClick")),i.input.lastClick={time:s,x:e.clientX,y:e.clientY,type:a};let d=i.posAtCoords(ch(e));!d||("singleClick"==a?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new L1(i,d,e,!!n)):("doubleClick"==a?_w:vw)(i,d.pos,d.inside,e)?e.preventDefault():Ve(i,"pointer"))};class L1{constructor(r,e,n,s){let a,d;if(this.view=r,this.pos=e,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=r.state.doc,this.selectNode=!!n[F1],this.allowDefault=n.shiftKey,e.inside>-1)a=r.state.doc.nodeAt(e.inside),d=e.inside;else{let b=r.state.doc.resolve(e.pos);a=b.parent,d=b.depth?b.before():0}const f=s?null:n.target,p=f?r.docView.nearestDesc(f,!0):null;this.target=p?p.dom:null;let{selection:g}=r.state;(0==n.button&&a.type.spec.draggable&&!1!==a.type.spec.selectable||g instanceof vt&&g.from<=d&&g.to>d)&&(this.mightDrag={node:a,pos:d,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!ps||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),r.root.addEventListener("mouseup",this.up=this.up.bind(this)),r.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ve(r,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ao(this.view)),this.view.input.mouseDown=null}up(r){if(this.done(),!this.view.dom.contains(r.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(ch(r))),this.updateAllowDefault(r),this.allowDefault||!e?Ve(this.view,"pointer"):function gw(i,r,e,n,s){return rm(i,"handleClickOn",r,e,n)||i.someProp("handleClick",a=>a(i,r,n))||(s?function mw(i,r){if(-1==r)return!1;let n,s,e=i.state.selection;e instanceof vt&&(n=e.node);let a=i.state.doc.resolve(r);for(let d=a.depth+1;d>0;d--){let f=d>a.depth?a.nodeAfter:a.node(d);if(vt.isSelectable(f)){s=n&&e.$from.depth>0&&d>=e.$from.depth&&a.before(e.$from.depth+1)==e.$from.pos?a.before(e.$from.depth):a.before(d);break}}return null!=s&&(Gl(i,vt.create(i.state.doc,s),"pointer"),!0)}(i,e):function pw(i,r){if(-1==r)return!1;let e=i.state.doc.resolve(r),n=e.nodeAfter;return!!(n&&n.isAtom&&vt.isSelectable(n))&&(Gl(i,new vt(e),"pointer"),!0)}(i,e))}(this.view,e.pos,e.inside,r,this.selectNode)?r.preventDefault():0==r.button&&(this.flushed||Ar&&this.mightDrag&&!this.mightDrag.node.isAtom||mr&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Gl(this.view,Zt.near(this.view.state.doc.resolve(e.pos)),"pointer"),r.preventDefault()):Ve(this.view,"pointer")}move(r){this.updateAllowDefault(r),Ve(this.view,"pointer"),0==r.buttons&&this.done()}updateAllowDefault(r){!this.allowDefault&&(Math.abs(this.event.x-r.clientX)>4||Math.abs(this.event.y-r.clientY)>4)&&(this.allowDefault=!0)}}function om(i,r){return!!i.composing||!!(Ar&&Math.abs(r.timeStamp-i.input.compositionEndedAt)<500)&&(i.input.compositionEndedAt=-2e8,!0)}gr.touchstart=i=>{i.input.lastTouch=Date.now(),sm(i),Ve(i,"pointer")},gr.touchmove=i=>{i.input.lastTouch=Date.now(),Ve(i,"pointer")},gr.contextmenu=i=>sm(i);const P1=Ns?5e3:-1;function am(i,r){clearTimeout(i.input.composingTimeout),r>-1&&(i.input.composingTimeout=setTimeout(()=>hd(i),r))}function lm(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=function xw(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}function hd(i,r=!1){if(!(Ns&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),lm(i),r||i.docView&&i.docView.dirty){let e=Wp(i);return e&&!e.eq(i.state.selection)?i.dispatch(i.state.tr.setSelection(e)):i.updateState(i.state),!0}return!1}}or.compositionstart=or.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:r}=i,e=r.selection.$from;if(r.selection.empty&&(r.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(n=>!1===n.type.spec.inclusive)))i.markCursor=i.state.storedMarks||e.marks(),hd(i,!0),i.markCursor=null;else if(hd(i),ps&&r.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let n=i.domSelection();for(let s=n.focusNode,a=n.focusOffset;s&&1==s.nodeType&&0!=a;){let d=a<0?s.lastChild:s.childNodes[a-1];if(!d)break;if(3==d.nodeType){n.collapse(d,d.nodeValue.length);break}s=d,a=-1}}i.input.composing=!0}am(i,P1)},or.compositionend=(i,r)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=r.timeStamp,am(i,20))};const Ga=Dr&&Yo<15||Fl&&yE<604;function dh(i,r,e,n){let s=A1(i,r,e,i.input.shiftKey,i.state.selection.$from);if(i.someProp("handlePaste",f=>f(i,n,s||st.empty)))return!0;if(!s)return!1;let a=function B1(i){return 0==i.openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null}(s),d=a?i.state.tr.replaceSelectionWith(a,i.input.shiftKey):i.state.tr.replaceSelection(s);return i.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}gr.copy=or.cut=(i,r)=>{let e=r,n=i.state.selection,s="cut"==e.type;if(n.empty)return;let a=Ga?null:e.clipboardData,d=n.content(),{dom:f,text:p}=D1(i,d);a?(e.preventDefault(),a.clearData(),a.setData("text/html",f.innerHTML),a.setData("text/plain",p)):function U1(i,r){if(!i.dom.parentNode)return;let e=i.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(r),e.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(r),i.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),i.focus()},50)}(i,f),s&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},or.paste=(i,r)=>{let e=r;if(i.composing&&!Ns)return;let n=Ga?null:e.clipboardData;n&&dh(i,n.getData("text/plain"),n.getData("text/html"),e)?e.preventDefault():function Cw(i,r){if(!i.dom.parentNode)return;let e=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,n=i.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{i.focus(),n.parentNode&&n.parentNode.removeChild(n),e?dh(i,n.value,null,r):dh(i,n.textContent,n.innerHTML,r)},50)}(i,e)};class Sw{constructor(r,e){this.slice=r,this.move=e}}const G1=Kr?"altKey":"ctrlKey";gr.dragstart=(i,r)=>{let e=r,n=i.input.mouseDown;if(n&&n.done(),!e.dataTransfer)return;let s=i.state.selection,a=s.empty?null:i.posAtCoords(ch(e));if(!(a&&a.pos>=s.from&&a.pos<=(s instanceof vt?s.to-1:s.to)))if(n&&n.mightDrag)i.dispatch(i.state.tr.setSelection(vt.create(i.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){let g=i.docView.nearestDesc(e.target,!0);g&&g.node.type.spec.draggable&&g!=i.docView&&i.dispatch(i.state.tr.setSelection(vt.create(i.state.doc,g.posBefore)))}let d=i.state.selection.content(),{dom:f,text:p}=D1(i,d);e.dataTransfer.clearData(),e.dataTransfer.setData(Ga?"Text":"text/html",f.innerHTML),e.dataTransfer.effectAllowed="copyMove",Ga||e.dataTransfer.setData("text/plain",p),i.dragging=new Sw(d,!e[G1])},gr.dragend=i=>{let r=i.dragging;window.setTimeout(()=>{i.dragging==r&&(i.dragging=null)},50)},or.dragover=or.dragenter=(i,r)=>r.preventDefault(),or.drop=(i,r)=>{let e=r,n=i.dragging;if(i.dragging=null,!e.dataTransfer)return;let s=i.posAtCoords(ch(e));if(!s)return;let a=i.state.doc.resolve(s.pos),d=n&&n.slice;d?i.someProp("transformPasted",F=>{d=F(d)}):d=A1(i,e.dataTransfer.getData(Ga?"Text":"text/plain"),Ga?null:e.dataTransfer.getData("text/html"),!1,a);let f=!(!n||e[G1]);if(i.someProp("handleDrop",F=>F(i,e,d||st.empty,f)))return void e.preventDefault();if(!d)return;e.preventDefault();let p=d?function ap(i,r,e){let n=i.resolve(r);if(!e.content.size)return r;let s=e.content;for(let a=0;a<e.openStart;a++)s=s.firstChild.content;for(let a=1;a<=(0==e.openStart&&e.size?2:1);a++)for(let d=n.depth;d>=0;d--){let f=d==n.depth?0:n.pos<=(n.start(d+1)+n.end(d+1))/2?-1:1,p=n.index(d)+(f>0?1:0),g=n.node(d),b=!1;if(1==a)b=g.canReplace(p,p,s);else{let S=g.contentMatchAt(p).findWrapping(s.firstChild.type);b=S&&g.canReplaceWith(p,p,S[0])}if(b)return 0==f?n.pos:f<0?n.before(d+1):n.after(d+1)}return null}(i.state.doc,a.pos,d):a.pos;null==p&&(p=a.pos);let g=i.state.tr;f&&g.deleteSelection();let b=g.mapping.map(p),S=0==d.openStart&&0==d.openEnd&&1==d.content.childCount,k=g.doc;if(S?g.replaceRangeWith(b,b,d.content.firstChild):g.replaceRange(b,b,d),g.doc.eq(k))return;let T=g.doc.resolve(b);if(S&&vt.isSelectable(d.content.firstChild)&&T.nodeAfter&&T.nodeAfter.sameMarkup(d.content.firstChild))g.setSelection(new vt(T));else{let F=g.mapping.map(p);g.mapping.maps[g.mapping.maps.length-1].forEach((K,fe,Re,Ae)=>F=Ae),g.setSelection(oh(i,T,g.doc.resolve(F)))}i.focus(),i.dispatch(g.setMeta("uiEvent","drop"))},gr.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelection())&&ao(i)},20))},gr.blur=(i,r)=>{let e=r;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),e.relatedTarget&&i.dom.contains(e.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)},gr.beforeinput=(i,r)=>{if(mr&&Ns&&"deleteContentBackward"==r.inputType){i.domObserver.flushSoon();let{domChangeCount:n}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=n||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",a=>a(i,Ll(8,"Backspace")))))return;let{$cursor:s}=i.state.selection;s&&s.pos>0&&i.dispatch(i.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let i in or)gr[i]=or[i];function zl(i,r){if(i==r)return!0;for(let e in i)if(i[e]!==r[e])return!1;for(let e in r)if(!(e in i))return!1;return!0}class uh{constructor(r,e){this.toDOM=r,this.spec=e||Wo,this.side=this.spec.side||0}map(r,e,n,s){let{pos:a,deleted:d}=r.mapResult(e.from+s,this.side<0?-1:1);return d?null:new Ni(a-n,a-n,this)}valid(){return!0}eq(r){return this==r||r instanceof uh&&(this.spec.key&&this.spec.key==r.spec.key||this.toDOM==r.toDOM&&zl(this.spec,r.spec))}destroy(r){this.spec.destroy&&this.spec.destroy(r)}}class lo{constructor(r,e){this.attrs=r,this.spec=e||Wo}map(r,e,n,s){let a=r.map(e.from+s,this.spec.inclusiveStart?-1:1)-n,d=r.map(e.to+s,this.spec.inclusiveEnd?1:-1)-n;return a>=d?null:new Ni(a,d,this)}valid(r,e){return e.from<e.to}eq(r){return this==r||r instanceof lo&&zl(this.attrs,r.attrs)&&zl(this.spec,r.spec)}static is(r){return r.type instanceof lo}destroy(){}}class hh{constructor(r,e){this.attrs=r,this.spec=e||Wo}map(r,e,n,s){let a=r.mapResult(e.from+s,1);if(a.deleted)return null;let d=r.mapResult(e.to+s,-1);return d.deleted||d.pos<=a.pos?null:new Ni(a.pos-n,d.pos-n,this)}valid(r,e){let a,{index:n,offset:s}=r.content.findIndex(e.from);return s==e.from&&!(a=r.child(n)).isText&&s+a.nodeSize==e.to}eq(r){return this==r||r instanceof hh&&zl(this.attrs,r.attrs)&&zl(this.spec,r.spec)}destroy(){}}class Ni{constructor(r,e,n){this.from=r,this.to=e,this.type=n}copy(r,e){return new Ni(r,e,this.type)}eq(r,e=0){return this.type.eq(r.type)&&this.from+e==r.from&&this.to+e==r.to}map(r,e,n){return this.type.map(r,this,e,n)}static widget(r,e,n){return new Ni(r,r,new uh(e,n))}static inline(r,e,n,s){return new Ni(r,e,new lo(n,s))}static node(r,e,n,s){return new Ni(r,e,new hh(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof lo}}const za=[],Wo={};class an{constructor(r,e){this.local=r.length?r:za,this.children=e.length?e:za}static create(r,e){return e.length?Qo(e,r,0,Wo):Fi}find(r,e,n){let s=[];return this.findInner(r??0,e??1e9,s,0,n),s}findInner(r,e,n,s,a){for(let d=0;d<this.local.length;d++){let f=this.local[d];f.from<=e&&f.to>=r&&(!a||a(f.spec))&&n.push(f.copy(f.from+s,f.to+s))}for(let d=0;d<this.children.length;d+=3)if(this.children[d]<e&&this.children[d+1]>r){let f=this.children[d]+1;this.children[d+2].findInner(r-f,e-f,n,s+f,a)}}map(r,e,n){return this==Fi||0==r.maps.length?this:this.mapInner(r,e,0,0,n||Wo)}mapInner(r,e,n,s,a){let d;for(let f=0;f<this.local.length;f++){let p=this.local[f].map(r,n,s);p&&p.type.valid(e,p)?(d||(d=[])).push(p):a.onRemove&&a.onRemove(this.local[f].spec)}return this.children.length?function Ew(i,r,e,n,s,a,d){let f=i.slice();for(let g=0,b=a;g<e.maps.length;g++){let S=0;e.maps[g].forEach((k,T,F,K)=>{let fe=K-F-(T-k);for(let Re=0;Re<f.length;Re+=3){let Ae=f[Re+1];if(Ae<0||k>Ae+b-S)continue;let Qe=f[Re]+b-S;T>=Qe?f[Re+1]=k<=Qe?-2:-1:F>=s&&fe&&(f[Re]+=fe,f[Re+1]+=fe)}S+=fe}),b=e.maps[g].map(b,-1)}let p=!1;for(let g=0;g<f.length;g+=3)if(f[g+1]<0){if(-2==f[g+1]){p=!0,f[g+1]=-1;continue}let b=e.map(i[g]+a),S=b-s;if(S<0||S>=n.content.size){p=!0;continue}let T=e.map(i[g+1]+a,-1)-s,{index:F,offset:K}=n.content.findIndex(S),fe=n.maybeChild(F);if(fe&&K==S&&K+fe.nodeSize==T){let Re=f[g+2].mapInner(e,fe,b+1,i[g]+a+1,d);Re!=Fi?(f[g]=S,f[g+1]=T,f[g+2]=Re):(f[g+1]=-2,p=!0)}else p=!0}if(p){let g=function z1(i,r,e,n,s,a,d){function f(p,g){for(let b=0;b<p.local.length;b++){let S=p.local[b].map(n,s,g);S?e.push(S):d.onRemove&&d.onRemove(p.local[b].spec)}for(let b=0;b<p.children.length;b+=3)f(p.children[b+2],p.children[b]+g+1)}for(let p=0;p<i.length;p+=3)-1==i[p+1]&&f(i[p+2],r[p]+a+1);return e}(f,i,r,e,s,a,d),b=Qo(g,n,0,d);r=b.local;for(let S=0;S<f.length;S+=3)f[S+1]<0&&(f.splice(S,3),S-=3);for(let S=0,k=0;S<b.children.length;S+=3){let T=b.children[S];for(;k<f.length&&f[k]<T;)k+=3;f.splice(k,0,b.children[S],b.children[S+1],b.children[S+2])}}return new an(r.sort(ln),f)}(this.children,d||[],r,e,n,s,a):d?new an(d.sort(ln),za):Fi}add(r,e){return e.length?this==Fi?an.create(r,e):this.addInner(r,e,0):this}addInner(r,e,n){let s,a=0;r.forEach((f,p)=>{let b,g=p+n;if(b=Z1(e,f,g)){for(s||(s=this.children.slice());a<s.length&&s[a]<p;)a+=3;s[a]==p?s[a+2]=s[a+2].addInner(f,b,g+1):s.splice(a,0,p,p+f.nodeSize,Qo(b,f,g+1,Wo)),a+=3}});let d=co(a?H1(e):e,-n);for(let f=0;f<d.length;f++)d[f].type.valid(r,d[f])||d.splice(f--,1);return new an(d.length?this.local.concat(d).sort(ln):this.local,s||this.children)}remove(r){return 0==r.length||this==Fi?this:this.removeInner(r,0)}removeInner(r,e){let n=this.children,s=this.local;for(let a=0;a<n.length;a+=3){let d,f=n[a]+e,p=n[a+1]+e;for(let S,b=0;b<r.length;b++)(S=r[b])&&S.from>f&&S.to<p&&(r[b]=null,(d||(d=[])).push(S));if(!d)continue;n==this.children&&(n=this.children.slice());let g=n[a+2].removeInner(d,f+1);g!=Fi?n[a+2]=g:(n.splice(a,3),a-=3)}if(s.length)for(let d,a=0;a<r.length;a++)if(d=r[a])for(let f=0;f<s.length;f++)s[f].eq(d,e)&&(s==this.local&&(s=this.local.slice()),s.splice(f--,1));return n==this.children&&s==this.local?this:s.length||n.length?new an(s,n):Fi}forChild(r,e){if(this==Fi)return this;if(e.isLeaf)return an.empty;let n,s;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=r){this.children[f]==r&&(n=this.children[f+2]);break}let a=r+1,d=a+e.content.size;for(let f=0;f<this.local.length;f++){let p=this.local[f];if(p.from<d&&p.to>a&&p.type instanceof lo){let g=Math.max(a,p.from)-a,b=Math.min(d,p.to)-a;g<b&&(s||(s=[])).push(p.copy(g,b))}}if(s){let f=new an(s.sort(ln),za);return n?new jo([f,n]):f}return n||Fi}eq(r){if(this==r)return!0;if(!(r instanceof an)||this.local.length!=r.local.length||this.children.length!=r.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(r.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=r.children[e]||this.children[e+1]!=r.children[e+1]||!this.children[e+2].eq(r.children[e+2]))return!1;return!0}locals(r){return Hn(this.localsInner(r))}localsInner(r){if(this==Fi)return za;if(r.inlineContent||!this.local.some(lo.is))return this.local;let e=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof lo||e.push(this.local[n]);return e}}an.empty=new an([],[]),an.removeOverlap=Hn;const Fi=an.empty;class jo{constructor(r){this.members=r}map(r,e){const n=this.members.map(s=>s.map(r,e,Wo));return jo.from(n)}forChild(r,e){if(e.isLeaf)return an.empty;let n=[];for(let s=0;s<this.members.length;s++){let a=this.members[s].forChild(r,e);a!=Fi&&(a instanceof jo?n=n.concat(a.members):n.push(a))}return jo.from(n)}eq(r){if(!(r instanceof jo)||r.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(r.members[e]))return!1;return!0}locals(r){let e,n=!0;for(let s=0;s<this.members.length;s++){let a=this.members[s].localsInner(r);if(a.length)if(e){n&&(e=e.slice(),n=!1);for(let d=0;d<a.length;d++)e.push(a[d])}else e=a}return e?Hn(n?e:e.sort(ln)):za}static from(r){switch(r.length){case 0:return Fi;case 1:return r[0];default:return new jo(r)}}}function co(i,r){if(!r||!i.length)return i;let e=[];for(let n=0;n<i.length;n++){let s=i[n];e.push(new Ni(s.from+r,s.to+r,s.type))}return e}function Z1(i,r,e){if(r.isLeaf)return null;let n=e+r.nodeSize,s=null;for(let d,a=0;a<i.length;a++)(d=i[a])&&d.from>e&&d.to<n&&((s||(s=[])).push(d),i[a]=null);return s}function H1(i){let r=[];for(let e=0;e<i.length;e++)null!=i[e]&&r.push(i[e]);return r}function Qo(i,r,e,n){let s=[],a=!1;r.forEach((f,p)=>{let g=Z1(i,f,p+e);if(g){a=!0;let b=Qo(g,f,e+p+1,n);b!=Fi&&s.push(p,p+f.nodeSize,b)}});let d=co(a?H1(i):i,-e).sort(ln);for(let f=0;f<d.length;f++)d[f].type.valid(r,d[f])||(n.onRemove&&n.onRemove(d[f].spec),d.splice(f--,1));return d.length||s.length?new an(d,s):Fi}function ln(i,r){return i.from-r.from||i.to-r.to}function Hn(i){let r=i;for(let e=0;e<r.length-1;e++){let n=r[e];if(n.from!=n.to)for(let s=e+1;s<r.length;s++){let a=r[s];if(a.from!=n.from){a.from<n.to&&(r==i&&(r=i.slice()),r[e]=n.copy(n.from,a.from),mn(r,s,n.copy(a.from,n.to)));break}a.to!=n.to&&(r==i&&(r=i.slice()),r[s]=a.copy(a.from,n.to),mn(r,s+1,a.copy(n.to,a.to)))}}return r}function mn(i,r,e){for(;r<i.length&&ln(e,i[r])>0;)r++;i.splice(r,0,e)}function di(i){let r=[];return i.someProp("decorations",e=>{let n=e(i.state);n&&n!=Fi&&r.push(n)}),i.cursorWrapper&&r.push(an.create(i.state.doc,[i.cursorWrapper.deco])),jo.from(r)}const cm={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},jr=Dr&&Yo<=11;class Zl{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(r){this.anchorNode=r.anchorNode,this.anchorOffset=r.anchorOffset,this.focusNode=r.focusNode,this.focusOffset=r.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(r){return r.anchorNode==this.anchorNode&&r.anchorOffset==this.anchorOffset&&r.focusNode==this.focusNode&&r.focusOffset==this.focusOffset}}class ww{constructor(r,e){this.view=r,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Zl,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let s=0;s<n.length;s++)this.queue.push(n[s]);Dr&&Yo<=11&&n.some(s=>"childList"==s.type&&s.removedNodes.length||"characterData"==s.type&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),jr&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,cm)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let r=this.observer.takeRecords();if(r.length){for(let e=0;e<r.length;e++)this.queue.push(r[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Qp(this.view)){if(this.suppressingSelectionUpdates)return ao(this.view);if(Dr&&Yo<=11&&!this.view.state.selection.empty){let r=this.view.domSelection();if(r.focusNode&&rd(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(r){if(0==r.rangeCount)return!0;let e=r.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}flush(){let{view:r}=this;if(!r.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let n=r.domSelection(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Qp(r)&&!this.ignoreSelectionChange(n),a=-1,d=-1,f=!1,p=[];if(r.editable)for(let b=0;b<e.length;b++){let S=this.registerMutation(e[b],p);S&&(a=a<0?S.from:Math.min(S.from,a),d=d<0?S.to:Math.max(S.to,d),S.typeOver&&(f=!0))}if(ps&&p.length>1){let b=p.filter(S=>"BR"==S.nodeName);if(2==b.length){let S=b[0],k=b[1];S.parentNode&&S.parentNode.parentNode==k.parentNode?k.remove():S.remove()}}let g=null;a<0&&s&&r.input.lastFocus>Date.now()-200&&r.input.lastTouch<Date.now()-300&&rh(n)&&(g=Wp(r))&&g.eq(Zt.near(r.state.doc.resolve(0),1))?(r.input.lastFocus=0,ao(r),this.currentSelection.set(n),r.scrollToSelection()):(a>-1||s)&&(a>-1&&(r.docView.markDirty(a,d),function kw(i){if(!Ur.has(i)&&(Ur.set(i,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace))){if(i.requiresGeckoHackNode=ps,Za)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Za=!0}}(r)),this.handleDOMChange(a,d,f,p),r.docView&&r.docView.dirty?r.updateState(r.state):this.currentSelection.eq(n)||ao(r),this.currentSelection.set(n))}registerMutation(r,e){if(e.indexOf(r.target)>-1)return null;let n=this.view.docView.nearestDesc(r.target);if("attributes"==r.type&&(n==this.view.docView||"contenteditable"==r.attributeName||"style"==r.attributeName&&!r.oldValue&&!r.target.getAttribute("style"))||!n||n.ignoreMutation(r))return null;if("childList"==r.type){for(let b=0;b<r.addedNodes.length;b++)e.push(r.addedNodes[b]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(r.target))return{from:n.posBefore,to:n.posAfter};let s=r.previousSibling,a=r.nextSibling;if(Dr&&Yo<=11&&r.addedNodes.length)for(let b=0;b<r.addedNodes.length;b++){let{previousSibling:S,nextSibling:k}=r.addedNodes[b];(!S||Array.prototype.indexOf.call(r.addedNodes,S)<0)&&(s=S),(!k||Array.prototype.indexOf.call(r.addedNodes,k)<0)&&(a=k)}let d=s&&s.parentNode==r.target?Pr(s)+1:0,f=n.localPosFromDOM(r.target,d,-1),p=a&&a.parentNode==r.target?Pr(a):r.target.childNodes.length;return{from:f,to:n.localPosFromDOM(r.target,p,1)}}return"attributes"==r.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:r.target.nodeValue==r.oldValue}}}let pm,mm,Ur=new WeakMap,Za=!1;function dm(i){let r=i.pmViewDesc;if(r)return r.parseRule();if("BR"==i.nodeName&&i.parentNode){if(Ar&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(i.parentNode.lastChild==i||Ar&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if("IMG"==i.nodeName&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}function V1(i,r,e){return Math.max(e.anchor,e.head)>r.content.size?null:oh(i,r.resolve(e.anchor),r.resolve(e.head))}function fh(i,r,e){let n=i.depth,s=r?i.end():i.pos;for(;n>0&&(r||i.indexAfter(n)==i.node(n).childCount);)n--,s++,r=!1;if(e){let a=i.node(n).maybeChild(i.indexAfter(n));for(;a&&!a.isLeaf;)a=a.firstChild,s++}return s}class Dw{constructor(r,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ud,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(mh),this.dispatch=this.dispatch.bind(this),this.dom=r&&r.mount||document.createElement("div"),r&&(r.appendChild?r.appendChild(this.dom):"function"==typeof r?r(this.dom):r.mount&&(this.mounted=!0)),this.editable=q1(this),ph(this),this.nodeViews=hm(this),this.docView=qp(this.state.doc,J1(this),di(this),this.dom,this),this.domObserver=new ww(this,(n,s,a,d)=>function um(i,r,e,n,s){if(r<0){let tt=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,hn=Wp(i,tt);if(hn&&!i.state.selection.eq(hn)){let ss=i.state.tr.setSelection(hn);"pointer"==tt?ss.setMeta("pointer",!0):"key"==tt&&ss.scrollIntoView(),i.dispatch(ss)}return}let a=i.state.doc.resolve(r),d=a.sharedDepth(e);r=a.before(d+1),e=i.state.doc.resolve(e).after(d+1);let S,k,f=i.state.selection,p=function Tw(i,r,e){let g,{node:n,fromOffset:s,toOffset:a,from:d,to:f}=i.docView.parseRange(r,e),p=i.domSelection(),b=p.anchorNode;if(b&&i.dom.contains(1==b.nodeType?b:b.parentNode)&&(g=[{node:b,offset:p.anchorOffset}],rh(p)||g.push({node:p.focusNode,offset:p.focusOffset})),mr&&8===i.input.lastKeyCode)for(let fe=a;fe>s;fe--){let Re=n.childNodes[fe-1],Ae=Re.pmViewDesc;if("BR"==Re.nodeName&&!Ae){a=fe;break}if(!Ae||Ae.size)break}let S=i.state.doc,k=i.someProp("domParser")||Da.fromSchema(i.state.schema),T=S.resolve(d),F=null,K=k.parse(n,{topNode:T.parent,topMatch:T.parent.contentMatchAt(T.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=T.parent.type.whitespace||"full",findPositions:g,ruleFromNode:dm,context:T});if(g&&null!=g[0].pos){let fe=g[0].pos,Re=g[1]&&g[1].pos;null==Re&&(Re=fe),F={anchor:fe+d,head:Re+d}}return{doc:K,sel:F,from:d,to:f}}(i,r,e),g=i.state.doc,b=g.slice(p.from,p.to);8===i.input.lastKeyCode&&Date.now()-100<i.input.lastKeyCodeTime?(S=i.state.selection.to,k="end"):(S=i.state.selection.from,k="start"),i.input.lastKeyCode=null;let T=function yw(i,r,e,n,s){let a=i.findDiffStart(r,e);if(null==a)return null;let{a:d,b:f}=i.findDiffEnd(r,e+i.size,e+r.size);return"end"==s&&(n-=d+Math.max(0,a-Math.min(d,f))-a),d<a&&i.size<r.size?(a-=n<=a&&n>=d?a-n:0,f=a+(f-d),d=a):f<a&&(a-=n<=a&&n>=f?a-n:0,d=a+(d-f),f=a),{start:a,endA:d,endB:f}}(b.content,p.doc.content,p.from,S,k);if((Fl&&i.input.lastIOSEnter>Date.now()-225||Ns)&&s.some(tt=>"DIV"==tt.nodeName||"P"==tt.nodeName)&&(!T||T.endA>=T.endB)&&i.someProp("handleKeyDown",tt=>tt(i,Ll(13,"Enter"))))return void(i.input.lastIOSEnter=0);if(!T){if(!(n&&f instanceof en&&!f.empty&&f.$head.sameParent(f.$anchor))||i.composing||p.sel&&p.sel.anchor!=p.sel.head){if(p.sel){let tt=V1(i,i.state.doc,p.sel);tt&&!tt.eq(i.state.selection)&&i.dispatch(i.state.tr.setSelection(tt))}return}T={start:f.from,endA:f.to,endB:f.to}}if(mr&&i.cursorWrapper&&p.sel&&p.sel.anchor==i.cursorWrapper.deco.from&&p.sel.head==p.sel.anchor){let tt=T.endB-T.start;p.sel={anchor:p.sel.anchor+tt,head:p.sel.anchor+tt}}i.input.domChangeCount++,i.state.selection.from<i.state.selection.to&&T.start==T.endB&&i.state.selection instanceof en&&(T.start>i.state.selection.from&&T.start<=i.state.selection.from+2&&i.state.selection.from>=p.from?T.start=i.state.selection.from:T.endA<i.state.selection.to&&T.endA>=i.state.selection.to-2&&i.state.selection.to<=p.to&&(T.endB+=i.state.selection.to-T.endA,T.endA=i.state.selection.to)),Dr&&Yo<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>p.from&&" \xa0"==p.doc.textBetween(T.start-p.from-1,T.start-p.from+1)&&(T.start--,T.endA--,T.endB--);let Ae,F=p.doc.resolveNoCache(T.start-p.from),K=p.doc.resolveNoCache(T.endB-p.from),fe=g.resolve(T.start),Re=F.sameParent(K)&&F.parent.inlineContent&&fe.end()>=T.endA;if((Fl&&i.input.lastIOSEnter>Date.now()-225&&(!Re||s.some(tt=>"DIV"==tt.nodeName||"P"==tt.nodeName))||!Re&&F.pos<p.doc.content.size&&(Ae=Zt.findFrom(p.doc.resolve(F.pos+1),1,!0))&&Ae.head==K.pos)&&i.someProp("handleKeyDown",tt=>tt(i,Ll(13,"Enter"))))return void(i.input.lastIOSEnter=0);if(i.state.selection.anchor>T.start&&function Ey(i,r,e,n,s){if(!n.parent.isTextblock||e-r<=s.pos-n.pos||fh(n,!0,!1)<s.pos)return!1;let a=i.resolve(r);if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let d=i.resolve(fh(a,!0,!0));return!(!d.parent.isTextblock||d.pos>e||fh(d,!0,!1)<e)&&n.parent.content.cut(n.parentOffset).eq(d.parent.content)}(g,T.start,T.endA,F,K)&&i.someProp("handleKeyDown",tt=>tt(i,Ll(8,"Backspace"))))return void(Ns&&mr&&i.domObserver.suppressSelectionUpdates());mr&&Ns&&T.endB==T.start&&(i.input.lastAndroidDelete=Date.now()),Ns&&!Re&&F.start()!=K.start()&&0==K.parentOffset&&F.depth==K.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==T.endA&&(T.endB-=2,K=p.doc.resolveNoCache(T.endB-p.from),setTimeout(()=>{i.someProp("handleKeyDown",function(tt){return tt(i,Ll(13,"Enter"))})},20));let yt,kn,bn,Qe=T.start,Ut=T.endA;if(Re)if(F.pos==K.pos)Dr&&Yo<=11&&0==F.parentOffset&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>ao(i),20)),yt=i.state.tr.delete(Qe,Ut),kn=g.resolve(T.start).marksAcross(g.resolve(T.endA));else if(T.endA==T.endB&&(bn=function ar(i,r){let d,f,p,e=i.firstChild.marks,n=r.firstChild.marks,s=e,a=n;for(let b=0;b<n.length;b++)s=n[b].removeFromSet(s);for(let b=0;b<e.length;b++)a=e[b].removeFromSet(a);if(1==s.length&&0==a.length)f=s[0],d="add",p=b=>b.mark(f.addToSet(b.marks));else{if(0!=s.length||1!=a.length)return null;f=a[0],d="remove",p=b=>b.mark(f.removeFromSet(b.marks))}let g=[];for(let b=0;b<r.childCount;b++)g.push(p(r.child(b)));if(Me.from(g).eq(i))return{mark:f,type:d}}(F.parent.content.cut(F.parentOffset,K.parentOffset),fe.parent.content.cut(fe.parentOffset,T.endA-fe.start()))))yt=i.state.tr,"add"==bn.type?yt.addMark(Qe,Ut,bn.mark):yt.removeMark(Qe,Ut,bn.mark);else if(F.parent.child(F.index()).isText&&F.index()==K.index()-(K.textOffset?0:1)){let tt=F.parent.textBetween(F.parentOffset,K.parentOffset);if(i.someProp("handleTextInput",hn=>hn(i,Qe,Ut,tt)))return;yt=i.state.tr.insertText(tt,Qe,Ut)}if(yt||(yt=i.state.tr.replace(Qe,Ut,p.doc.slice(T.start-p.from,T.endB-p.from))),p.sel){let tt=V1(i,yt.doc,p.sel);tt&&!(mr&&Ns&&i.composing&&tt.empty&&(T.start!=T.endB||i.input.lastAndroidDelete<Date.now()-100)&&(tt.head==Qe||tt.head==yt.mapping.map(Ut)-1)||Dr&&tt.empty&&tt.head==Qe)&&yt.setSelection(tt)}kn&&yt.ensureMarks(kn),i.dispatch(yt.scrollIntoView())}(this,n,s,a,d)),this.domObserver.start(),function nm(i){for(let r in gr){let e=gr[r];i.dom.addEventListener(r,i.input.eventHandlers[r]=n=>{uw(i,n)&&!im(i,n)&&(i.editable||!(n.type in or))&&e(i,n)},cw[r]?{passive:!0}:void 0)}Ar&&i.dom.addEventListener("input",()=>null),Ba(i)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let r=this._props;this._props={};for(let e in r)this._props[e]=r[e];this._props.state=this.state}return this._props}update(r){r.handleDOMEvents!=this._props.handleDOMEvents&&Ba(this);let e=this._props;this._props=r,r.plugins&&(r.plugins.forEach(mh),this.directPlugins=r.plugins),this.updateStateInner(r.state,e)}setProps(r){let e={};for(let n in this._props)e[n]=this._props[n];e.state=this.state;for(let n in r)e[n]=r[n];this.update(e)}updateState(r){this.updateStateInner(r,this._props)}updateStateInner(r,e){let n=this.state,s=!1,a=!1;r.storedMarks&&this.composing&&(lm(this),a=!0),this.state=r;let d=n.plugins!=r.plugins||this._props.plugins!=e.plugins;if(d||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let k=hm(this);(function fm(i,r){let e=0,n=0;for(let s in i){if(i[s]!=r[s])return!0;e++}for(let s in r)n++;return e!=n})(k,this.nodeViews)&&(this.nodeViews=k,s=!0)}(d||e.handleDOMEvents!=this._props.handleDOMEvents)&&Ba(this),this.editable=q1(this),ph(this);let f=di(this),p=J1(this),g=n.plugins==r.plugins||n.doc.eq(r.doc)?r.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",b=s||!this.docView.matchesNode(r.doc,p,f);(b||!r.selection.eq(n.selection))&&(a=!0);let S="preserve"==g&&a&&null==this.dom.style.overflowAnchor&&function ME(i){let n,s,r=i.dom.getBoundingClientRect(),e=Math.max(0,r.top);for(let a=(r.left+r.right)/2,d=e+1;d<Math.min(innerHeight,r.bottom);d+=5){let f=i.root.elementFromPoint(a,d);if(!f||f==i.dom||!i.dom.contains(f))continue;let p=f.getBoundingClientRect();if(p.top>=e-20){n=f,s=p.top;break}}return{refDOM:n,refTop:s,stack:t1(i.dom)}}(this);if(a){this.domObserver.stop();let k=b&&(Dr||mr)&&!this.composing&&!n.selection.empty&&!r.selection.empty&&function Aw(i,r){let e=Math.min(i.$anchor.sharedDepth(i.head),r.$anchor.sharedDepth(r.head));return i.$anchor.start(e)!=r.$anchor.start(e)}(n.selection,r.selection);if(b){let T=mr?this.trackWrites=this.domSelection().focusNode:null;(s||!this.docView.update(r.doc,p,f,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=qp(r.doc,p,f,this.dom,this)),T&&!this.trackWrites&&(k=!0)}k||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&function nw(i){let r=i.docView.domFromPos(i.state.selection.anchor,0),e=i.domSelection();return rd(r.node,r.offset,e.anchorNode,e.anchorOffset)}(this))?ao(this,k):(C1(this,r.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==g?this.dom.scrollTop=0:"to selection"==g?this.scrollToSelection():S&&function RE({refDOM:i,refTop:r,stack:e}){let n=i?i.getBoundingClientRect().top:0;n1(e,0==n?0:n-r)}(S)}scrollToSelection(){let r=this.domSelection().focusNode;if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof vt){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&e1(this,e.getBoundingClientRect(),r)}else e1(this,this.coordsAtPos(this.state.selection.head,1),r)}destroyPluginViews(){let r;for(;r=this.pluginViews.pop();)r.destroy&&r.destroy()}updatePluginViews(r){if(r&&r.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let n=this.pluginViews[e];n.update&&n.update(this,r)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let n=this.directPlugins[e];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let n=this.state.plugins[e];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}}someProp(r,e){let s,n=this._props&&this._props[r];if(null!=n&&(s=e?e(n):n))return s;for(let d=0;d<this.directPlugins.length;d++){let f=this.directPlugins[d].props[r];if(null!=f&&(s=e?e(f):f))return s}let a=this.state.plugins;if(a)for(let d=0;d<a.length;d++){let f=a[d].props[r];if(null!=f&&(s=e?e(f):f))return s}}hasFocus(){if(Dr){let r=this.root.activeElement;if(r==this.dom)return!0;if(!r||!this.dom.contains(r))return!1;for(;r&&this.dom!=r&&this.dom.contains(r);){if("false"==r.contentEditable)return!1;r=r.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function NE(i){if(i.setActive)return i.setActive();if(Pl)return i.focus(Pl);let r=t1(i);i.focus(null==Pl?{get preventScroll(){return Pl={preventScroll:!0},!0}}:void 0),Pl||(Pl=!1,n1(r,0))}(this.dom),ao(this),this.domObserver.start()}get root(){let r=this._root;if(null==r)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return r||document}posAtCoords(r){return GE(this,r)}coordsAtPos(r,e=1){return s1(this,r,e)}domAtPos(r,e=0){return this.docView.domFromPos(r,e)}nodeDOM(r){let e=this.docView.descAt(r);return e?e.nodeDOM:null}posAtDOM(r,e,n=-1){let s=this.docView.posFromDOM(r,e,n);if(null==s)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(r,e){return function d1(i,r,e){return a1==r&&l1==e?c1:(a1=r,l1=e,c1="up"==e||"down"==e?function ZE(i,r,e){let n=r.selection,s="up"==e?n.$from:n.$to;return o1(i,r,()=>{let{node:a}=i.docView.domFromPos(s.pos,"up"==e?-1:1);for(;;){let f=i.docView.nearestDesc(a,!0);if(!f)break;if(f.node.isBlock){a=f.dom;break}a=f.dom.parentNode}let d=s1(i,s.pos,1);for(let f=a.firstChild;f;f=f.nextSibling){let p;if(1==f.nodeType)p=f.getClientRects();else{if(3!=f.nodeType)continue;p=oo(f,0,f.nodeValue.length).getClientRects()}for(let g=0;g<p.length;g++){let b=p[g];if(b.bottom>b.top+1&&("up"==e?d.top-b.top>2*(b.bottom-d.top):b.bottom-d.bottom>2*(d.bottom-b.top)))return!1}}return!0})}(i,r,e):function Vp(i,r,e){let{$head:n}=r.selection;if(!n.parent.isTextblock)return!1;let s=n.parentOffset,a=!s,d=s==n.parent.content.size,f=i.domSelection();return HE.test(n.parent.textContent)&&f.modify?o1(i,r,()=>{let p=f.getRangeAt(0),g=f.focusNode,b=f.focusOffset,S=f.caretBidiLevel;f.modify("move",e,"character");let T=!(n.depth?i.docView.domAfterPos(n.before()):i.dom).contains(1==f.focusNode.nodeType?f.focusNode:f.focusNode.parentNode)||g==f.focusNode&&b==f.focusOffset;return f.removeAllRanges(),f.addRange(p),null!=S&&(f.caretBidiLevel=S),T}):"left"==e||"backward"==e?a:d}(i,r,e))}(this,e||this.state,r)}destroy(){!this.docView||(function dw(i){i.domObserver.stop();for(let r in i.input.eventHandlers)i.dom.removeEventListener(r,i.input.eventHandlers[r]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],di(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(r){return function hw(i,r){!im(i,r)&&gr[r.type]&&(i.editable||!(r.type in or))&&gr[r.type](i,r)}(this,r)}dispatch(r){let e=this._props.dispatchTransaction;e?e.call(this,r):this.updateState(this.state.apply(r))}domSelection(){return this.root.getSelection()}}function J1(i){let r=Object.create(null);return r.class="ProseMirror",r.contenteditable=String(i.editable),r.translate="no",i.someProp("attributes",e=>{if("function"==typeof e&&(e=e(i.state)),e)for(let n in e)"class"==n&&(r.class+=" "+e[n]),"style"==n?r.style=(r.style?r.style+";":"")+e[n]:!r[n]&&"contenteditable"!=n&&"nodeName"!=n&&(r[n]=String(e[n]))}),[Ni.node(0,i.state.doc.content.size,r)]}function ph(i){if(i.markCursor){let r=document.createElement("img");r.className="ProseMirror-separator",r.setAttribute("mark-placeholder","true"),r.setAttribute("alt",""),i.cursorWrapper={dom:r,deco:Ni.widget(i.state.selection.head,r,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}function q1(i){return!i.someProp("editable",r=>!1===r(i.state))}function hm(i){let r=Object.create(null);function e(n){for(let s in n)Object.prototype.hasOwnProperty.call(r,s)||(r[s]=n[s])}return i.someProp("nodeViews",e),i.someProp("markViews",e),r}function mh(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}if(typeof WeakMap<"u"){let i=new WeakMap;pm=r=>i.get(r),mm=(r,e)=>(i.set(r,e),e)}else{let i=[],r=10,e=0;pm=n=>{for(let s=0;s<i.length;s+=2)if(i[s]==n)return i[s+1]},mm=(n,s)=>(e==r&&(e=0),i[e++]=n,i[e++]=s)}class Hl{constructor(r,e,n,s){this.left=r,this.top=e,this.right=n,this.bottom=s}}class Wt{constructor(r,e,n,s){this.width=r,this.height=e,this.map=n,this.problems=s}findCell(r){for(let e=0;e<this.map.length;e++){let n=this.map[e];if(n!=r)continue;let s=e%this.width,a=e/this.width|0,d=s+1,f=a+1;for(let p=1;d<this.width&&this.map[e+p]==n;p++)d++;for(let p=1;f<this.height&&this.map[e+this.width*p]==n;p++)f++;return new Hl(s,a,d,f)}throw new RangeError("No cell with offset "+r+" found")}colCount(r){for(let e=0;e<this.map.length;e++)if(this.map[e]==r)return e%this.width;throw new RangeError("No cell with offset "+r+" found")}nextCell(r,e,n){let{left:s,right:a,top:d,bottom:f}=this.findCell(r);return"horiz"==e?(n<0?0==s:a==this.width)?null:this.map[d*this.width+(n<0?s-1:a)]:(n<0?0==d:f==this.height)?null:this.map[s+this.width*(n<0?d-1:f)]}rectBetween(r,e){let{left:n,right:s,top:a,bottom:d}=this.findCell(r),{left:f,right:p,top:g,bottom:b}=this.findCell(e);return new Hl(Math.min(n,f),Math.min(a,g),Math.max(s,p),Math.max(d,b))}cellsInRect(r){let e=[],n={};for(let s=r.top;s<r.bottom;s++)for(let a=r.left;a<r.right;a++){let d=s*this.width+a,f=this.map[d];n[f]||(n[f]=!0,(a!=r.left||!a||this.map[d-1]!=f)&&(s!=r.top||!s||this.map[d-this.width]!=f)&&e.push(f))}return e}positionAt(r,e,n){for(let s=0,a=0;;s++){let d=a+n.child(s).nodeSize;if(s==r){let f=e+r*this.width,p=(r+1)*this.width;for(;f<p&&this.map[f]<a;)f++;return f==p?d-1:this.map[f]}a=d}}static get(r){return pm(r)||mm(r,function Ow(i){if("table"!=i.type.spec.tableRole)throw new RangeError("Not a table node: "+i.type.name);let r=function Iw(i){let r=-1,e=!1;for(let n=0;n<i.childCount;n++){let s=i.child(n),a=0;if(e)for(let d=0;d<n;d++){let f=i.child(d);for(let p=0;p<f.childCount;p++){let g=f.child(p);d+g.attrs.rowspan>n&&(a+=g.attrs.colspan)}}for(let d=0;d<s.childCount;d++){let f=s.child(d);a+=f.attrs.colspan,f.attrs.rowspan>1&&(e=!0)}-1==r?r=a:r!=a&&(r=Math.max(r,a))}return r}(i),e=i.childCount,n=[],s=0,a=null,d=[];for(let g=0,b=r*e;g<b;g++)n[g]=0;for(let g=0,b=0;g<e;g++){let S=i.child(g);b++;for(let F=0;;F++){for(;s<n.length&&0!=n[s];)s++;if(F==S.childCount)break;let K=S.child(F),{colspan:fe,rowspan:Re,colwidth:Ae}=K.attrs;for(let Qe=0;Qe<Re;Qe++){if(Qe+g>=e){(a||(a=[])).push({type:"overlong_rowspan",pos:b,n:Re-Qe});break}let Ut=s+Qe*r;for(let yt=0;yt<fe;yt++){0==n[Ut+yt]?n[Ut+yt]=b:(a||(a=[])).push({type:"collision",row:g,pos:b,n:fe-yt});let kn=Ae&&Ae[yt];if(kn){let bn=(Ut+yt)%r*2,tt=d[bn];null==tt||tt!=kn&&1==d[bn+1]?(d[bn]=kn,d[bn+1]=1):tt==kn&&d[bn+1]++}}}s+=fe,b+=K.nodeSize}let k=(g+1)*r,T=0;for(;s<k;)0==n[s++]&&T++;T&&(a||(a=[])).push({type:"missing",row:g,n:T}),b++}let f=new Wt(r,e,n,a),p=!1;for(let g=0;!p&&g<d.length;g+=2)null!=d[g]&&d[g+1]<e&&(p=!0);return p&&function Mw(i,r,e){i.problems||(i.problems=[]);for(let n=0,s={};n<i.map.length;n++){let a=i.map[n];if(s[a])continue;s[a]=!0;let d=e.nodeAt(a),f=null;for(let p=0;p<d.attrs.colspan;p++){let b=r[(n+p)%i.width*2];null!=b&&(!d.attrs.colwidth||d.attrs.colwidth[p]!=b)&&((f||(f=Rw(d.attrs)))[p]=b)}f&&i.problems.unshift({type:"colwidth mismatch",pos:a,colwidth:f})}}(f,d,i),f}(r))}}function Rw(i){if(i.colwidth)return i.colwidth.slice();let r=[];for(let e=0;e<i.colspan;e++)r.push(0);return r}function gm(i,r){let e=i.getAttribute("data-colwidth"),n=e&&/^\d+(,\d+)*$/.test(e)?e.split(",").map(d=>Number(d)):null,s=Number(i.getAttribute("colspan")||1),a={colspan:s,rowspan:Number(i.getAttribute("rowspan")||1),colwidth:n&&n.length==s?n:null};for(let d in r){let f=r[d].getFromDOM,p=f&&f(i);null!=p&&(a[d]=p)}return a}function gh(i,r){let e={};1!=i.attrs.colspan&&(e.colspan=i.attrs.colspan),1!=i.attrs.rowspan&&(e.rowspan=i.attrs.rowspan),i.attrs.colwidth&&(e["data-colwidth"]=i.attrs.colwidth.join(","));for(let n in r){let s=r[n].setDOMAttr;s&&s(i.attrs[n],e)}return e}function Li(i){let r=i.cached.tableNodeTypes;if(!r){r=i.cached.tableNodeTypes={};for(let e in i.nodes){let n=i.nodes[e],s=n.spec.tableRole;s&&(r[s]=n)}}return r}const uo=new yr("selectingCells");function Vl(i){for(let r=i.depth-1;r>0;r--)if("row"==i.node(r).type.spec.tableRole)return i.node(0).resolve(i.before(r+1));return null}function gs(i){let r=i.selection.$head;for(let e=r.depth;e>0;e--)if("row"==r.node(e).type.spec.tableRole)return!0;return!1}function Jl(i){let r=i.selection;return r.$anchorCell?r.$anchorCell.pos>r.$headCell.pos?r.$anchorCell:r.$headCell:r.node&&"cell"==r.node.type.spec.tableRole?r.$anchor:Vl(r.$head)||function _m(i){for(let r=i.nodeAfter,e=i.pos;r;r=r.firstChild,e++){let n=r.type.spec.tableRole;if("cell"==n||"header_cell"==n)return i.doc.resolve(e)}for(let r=i.nodeBefore,e=i.pos;r;r=r.lastChild,e--){let n=r.type.spec.tableRole;if("cell"==n||"header_cell"==n)return i.doc.resolve(e-r.nodeSize)}}(r.$head)}function Y1(i){return"row"==i.parent.type.spec.tableRole&&i.nodeAfter}function vm(i,r){return i.depth==r.depth&&i.pos>=r.start(-1)&&i.pos<=r.end(-1)}function $1(i,r,e){let n=i.start(-1),a=Wt.get(i.node(-1)).nextCell(i.pos-n,r,e);return null==a?null:i.node(0).resolve(n+a)}function In(i,r,e){let n={};for(let s in i)n[s]=i[s];return n[r]=e,n}function Ha(i,r,e=1){let n=In(i,"colspan",i.colspan-e);return n.colwidth&&(n.colwidth=n.colwidth.slice(),n.colwidth.splice(r,e),n.colwidth.some(s=>s>0)||(n.colwidth=null)),n}function fd(i,r,e=1){let n=In(i,"colspan",i.colspan+e);if(n.colwidth){n.colwidth=n.colwidth.slice();for(let s=0;s<e;s++)n.colwidth.splice(r,0,0)}return n}class dn extends Zt{constructor(r,e=r){let n=r.node(-1),s=Wt.get(n),a=r.start(-1),d=s.rectBetween(r.pos-a,e.pos-a),f=r.node(0),p=s.cellsInRect(d).filter(b=>b!=e.pos-a);p.unshift(e.pos-a);let g=p.map(b=>{let S=n.nodeAt(b),k=b+a+1;return new a0(f.resolve(k),f.resolve(k+S.content.size))});super(g[0].$from,g[0].$to,g),this.$anchorCell=r,this.$headCell=e}map(r,e){let n=r.resolve(e.map(this.$anchorCell.pos)),s=r.resolve(e.map(this.$headCell.pos));if(Y1(n)&&Y1(s)&&vm(n,s)){let a=this.$anchorCell.node(-1)!=n.node(-1);return a&&this.isRowSelection()?dn.rowSelection(n,s):a&&this.isColSelection()?dn.colSelection(n,s):new dn(n,s)}return en.between(n,s)}content(){let r=this.$anchorCell.node(-1),e=Wt.get(r),n=this.$anchorCell.start(-1),s=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),a={},d=[];for(let p=s.top;p<s.bottom;p++){let g=[];for(let b=p*e.width+s.left,S=s.left;S<s.right;S++,b++){let k=e.map[b];if(!a[k]){a[k]=!0;let T=e.findCell(k),F=r.nodeAt(k),K=s.left-T.left,fe=T.right-s.right;if(K>0||fe>0){let Re=F.attrs;K>0&&(Re=Ha(Re,0,K)),fe>0&&(Re=Ha(Re,Re.colspan-fe,fe)),F=T.left<s.left?F.type.createAndFill(Re):F.type.create(Re,F.content)}if(T.top<s.top||T.bottom>s.bottom){let Re=In(F.attrs,"rowspan",Math.min(T.bottom,s.bottom)-Math.max(T.top,s.top));F=T.top<s.top?F.type.createAndFill(Re):F.type.create(Re,F.content)}g.push(F)}}d.push(r.child(p).copy(Me.from(g)))}const f=this.isColSelection()&&this.isRowSelection()?r:d;return new st(Me.from(f),1,1)}replace(r,e=st.empty){let n=r.steps.length,s=this.ranges;for(let d=0;d<s.length;d++){let{$from:f,$to:p}=s[d],g=r.mapping.slice(n);r.replace(g.map(f.pos),g.map(p.pos),d?st.empty:e)}let a=Zt.findFrom(r.doc.resolve(r.mapping.slice(n).map(this.to)),-1);a&&r.setSelection(a)}replaceWith(r,e){this.replace(r,new st(Me.from(e),0,0))}forEachCell(r){let e=this.$anchorCell.node(-1),n=Wt.get(e),s=this.$anchorCell.start(-1),a=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let d=0;d<a.length;d++)r(e.nodeAt(a[d]),s+a[d])}isColSelection(){let r=this.$anchorCell.index(-1),e=this.$headCell.index(-1);return!(Math.min(r,e)>0)&&Math.max(r+this.$anchorCell.nodeAfter.attrs.rowspan,e+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(r,e=r){let n=Wt.get(r.node(-1)),s=r.start(-1),a=n.findCell(r.pos-s),d=n.findCell(e.pos-s),f=r.node(0);return a.top<=d.top?(a.top>0&&(r=f.resolve(s+n.map[a.left])),d.bottom<n.height&&(e=f.resolve(s+n.map[n.width*(n.height-1)+d.right-1]))):(d.top>0&&(e=f.resolve(s+n.map[d.left])),a.bottom<n.height&&(r=f.resolve(s+n.map[n.width*(n.height-1)+a.right-1]))),new dn(r,e)}isRowSelection(){let r=Wt.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=r.colCount(this.$anchorCell.pos-e),s=r.colCount(this.$headCell.pos-e);return!(Math.min(n,s)>0)&&Math.max(n+this.$anchorCell.nodeAfter.attrs.colspan,s+this.$headCell.nodeAfter.attrs.colspan)==r.width}eq(r){return r instanceof dn&&r.$anchorCell.pos==this.$anchorCell.pos&&r.$headCell.pos==this.$headCell.pos}static rowSelection(r,e=r){let n=Wt.get(r.node(-1)),s=r.start(-1),a=n.findCell(r.pos-s),d=n.findCell(e.pos-s),f=r.node(0);return a.left<=d.left?(a.left>0&&(r=f.resolve(s+n.map[a.top*n.width])),d.right<n.width&&(e=f.resolve(s+n.map[n.width*(d.top+1)-1]))):(d.left>0&&(e=f.resolve(s+n.map[d.top*n.width])),a.right<n.width&&(r=f.resolve(s+n.map[n.width*(a.top+1)-1]))),new dn(r,e)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(r,e){return new dn(r.resolve(e.anchor),r.resolve(e.head))}static create(r,e,n=e){return new dn(r.resolve(e),r.resolve(n))}getBookmark(){return new pd(this.$anchorCell.pos,this.$headCell.pos)}}dn.prototype.visible=!1,Zt.jsonID("cell",dn);class pd{constructor(r,e){this.anchor=r,this.head=e}map(r){return new pd(r.map(this.anchor),r.map(this.head))}resolve(r){let e=r.resolve(this.anchor),n=r.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&vm(e,n)?new dn(e,n):Zt.near(n,1)}}function Pw(i){if(!(i.selection instanceof dn))return null;let r=[];return i.selection.forEachCell((e,n)=>{r.push(Ni.node(n,n+e.nodeSize,{class:"selectedCell"}))}),an.create(i.doc,r)}function vh(i,r){let e=i.createAndFill();return new o0(e).replace(0,e.content.size,r).doc}function ev(i,r,e,n,s,a,d,f){if(0==d||d==r.height)return!1;let p=!1;for(let g=s;g<a;g++){let b=d*r.width+g,S=r.map[b];if(r.map[b-r.width]==S){p=!0;let k=e.nodeAt(S),{top:T,left:F}=r.findCell(S);i.setNodeMarkup(i.mapping.slice(f).map(S+n),null,In(k.attrs,"rowspan",d-T)),i.insert(i.mapping.slice(f).map(r.positionAt(d,F,e)),k.type.createAndFill(In(k.attrs,"rowspan",T+k.attrs.rowspan-d))),g+=k.attrs.colspan-1}}return p}function xm(i,r,e,n,s,a,d,f){if(0==d||d==r.width)return!1;let p=!1;for(let g=s;g<a;g++){let b=g*r.width+d,S=r.map[b];if(r.map[b-1]==S){p=!0;let k=e.nodeAt(S),T=r.colCount(S),F=i.mapping.slice(f).map(S+n);i.setNodeMarkup(F,null,Ha(k.attrs,d-T,k.attrs.colspan-(d-T))),i.insert(F+k.nodeSize,k.type.createAndFill(Ha(k.attrs,0,d-T))),g+=k.attrs.rowspan-1}}return p}function tv(i,r,e,n,s){let a=e?i.doc.nodeAt(e-1):i.doc,d=Wt.get(a),{top:f,left:p}=n,g=p+s.width,b=f+s.height,S=i.tr,k=0;function T(){a=e?S.doc.nodeAt(e-1):S.doc,d=Wt.get(a),k=S.mapping.maps.length}(function X1(i,r,e,n,s,a,d){let g,b,p=Li(i.doc.type.schema);if(s>r.width)for(let S=0,k=0;S<r.height;S++){let T=e.child(S);k+=T.nodeSize;let K,F=[];K=null==T.lastChild||T.lastChild.type==p.cell?g||(g=p.cell.createAndFill()):b||(b=p.header_cell.createAndFill());for(let fe=r.width;fe<s;fe++)F.push(K);i.insert(i.mapping.slice(d).map(k-1+n),F)}if(a>r.height){let S=[];for(let F=0,K=(r.height-1)*r.width;F<Math.max(r.width,s);F++){let fe=!(F>=r.width)&&e.nodeAt(r.map[K+F]).type==p.header_cell;S.push(fe?b||(b=p.header_cell.createAndFill()):g||(g=p.cell.createAndFill()))}let k=p.row.create(null,Me.from(S)),T=[];for(let F=r.height;F<a;F++)T.push(k);i.insert(i.mapping.slice(d).map(n+e.nodeSize-2),T)}return!(!g&&!b)})(S,d,a,e,g,b,k)&&T(),ev(S,d,a,e,p,g,f,k)&&T(),ev(S,d,a,e,p,g,b,k)&&T(),xm(S,d,a,e,f,b,p,k)&&T(),xm(S,d,a,e,f,b,g,k)&&T();for(let F=f;F<b;F++){let K=d.positionAt(F,p,a),fe=d.positionAt(F,g,a);S.replace(S.mapping.slice(k).map(K+e),S.mapping.slice(k).map(fe+e),new st(s.rows[F-f],0,0))}T(),S.setSelection(new dn(S.doc.resolve(e+d.positionAt(f,p,a)),S.doc.resolve(e+d.positionAt(b-1,g-1,a)))),r(S)}const md=Up({ArrowLeft:ql("horiz",-1),ArrowRight:ql("horiz",1),ArrowUp:ql("vert",-1),ArrowDown:ql("vert",1),"Shift-ArrowLeft":Yl("horiz",-1),"Shift-ArrowRight":Yl("horiz",1),"Shift-ArrowUp":Yl("vert",-1),"Shift-ArrowDown":Yl("vert",1),Backspace:xh,"Mod-Backspace":xh,Delete:xh,"Mod-Delete":xh});function bh(i,r,e){return!e.eq(i.selection)&&(r&&r(i.tr.setSelection(e).scrollIntoView()),!0)}function ql(i,r){return(e,n,s)=>{let a=e.selection;if(a instanceof dn)return bh(e,n,Zt.near(a.$headCell,r));if("horiz"!=i&&!a.empty)return!1;let d=iv(s,i,r);if(null==d)return!1;if("horiz"==i)return bh(e,n,Zt.near(e.doc.resolve(a.head+r),r));{let g,f=e.doc.resolve(d),p=$1(f,i,r);return g=p?Zt.near(p,1):r<0?Zt.near(e.doc.resolve(f.before(-1)),-1):Zt.near(e.doc.resolve(f.after(-1)),1),bh(e,n,g)}}}function Yl(i,r){return(e,n,s)=>{let a=e.selection;if(!(a instanceof dn)){let f=iv(s,i,r);if(null==f)return!1;a=new dn(e.doc.resolve(f))}let d=$1(a.$headCell,i,r);return!!d&&bh(e,n,new dn(a.$anchorCell,d))}}function xh(i,r){let e=i.selection;if(!(e instanceof dn))return!1;if(r){let n=i.tr,s=Li(i.schema).cell.createAndFill().content;e.forEachCell((a,d)=>{a.content.eq(s)||n.replace(n.mapping.map(d+1),n.mapping.map(d+a.nodeSize-1),new st(s,0,0))}),n.docChanged&&r(n)}return!0}function Uw(i,r){let n=Vl(i.state.doc.resolve(r));return!!n&&(i.dispatch(i.state.tr.setSelection(new dn(n))),!0)}function nv(i,r,e){if(!gs(i.state))return!1;let n=function _h(i){if(!i.size)return null;let{content:r,openStart:e,openEnd:n}=i;for(;1==r.childCount&&(e>0&&n>0||"table"==r.firstChild.type.spec.tableRole);)e--,n--,r=r.firstChild.content;let s=r.firstChild,a=s.type.spec.tableRole,d=s.type.schema,f=[];if("row"==a)for(let p=0;p<r.childCount;p++){let g=r.child(p).content,b=p?0:Math.max(0,e-1),S=p<r.childCount-1?0:Math.max(0,n-1);(b||S)&&(g=vh(Li(d).row,new st(g,b,S)).content),f.push(g)}else{if("cell"!=a&&"header_cell"!=a)return null;f.push(e||n?vh(Li(d).row,new st(r,e,n)).content:r)}return function Q1(i,r){let e=[];for(let s=0;s<r.length;s++){let a=r[s];for(let d=a.childCount-1;d>=0;d--){let{rowspan:f,colspan:p}=a.child(d).attrs;for(let g=s;g<s+f;g++)e[g]=(e[g]||0)+p}}let n=0;for(let s=0;s<e.length;s++)n=Math.max(n,e[s]);for(let s=0;s<e.length;s++)if(s>=r.length&&r.push(Me.empty),e[s]<n){let a=Li(i).cell.createAndFill(),d=[];for(let f=e[s];f<n;f++)d.push(a);r[s]=r[s].append(Me.from(d))}return{height:r.length,width:n,rows:r}}(d,f)}(e),s=i.state.selection;if(s instanceof dn){n||(n={width:1,height:1,rows:[Me.from(vh(Li(i.state.schema).cell,e))]});let a=s.$anchorCell.node(-1),d=s.$anchorCell.start(-1),f=Wt.get(a).rectBetween(s.$anchorCell.pos-d,s.$headCell.pos-d);return n=function bm({width:i,height:r,rows:e},n,s){if(i!=n){let a=[],d=[];for(let f=0;f<e.length;f++){let p=e[f],g=[];for(let b=a[f]||0,S=0;b<n;S++){let k=p.child(S%p.childCount);b+k.attrs.colspan>n&&(k=k.type.create(Ha(k.attrs,k.attrs.colspan,b+k.attrs.colspan-n),k.content)),g.push(k),b+=k.attrs.colspan;for(let T=1;T<k.attrs.rowspan;T++)a[f+T]=(a[f+T]||0)+k.attrs.colspan}d.push(Me.from(g))}e=d,i=n}if(r!=s){let a=[];for(let d=0,f=0;d<s;d++,f++){let p=[],g=e[f%r];for(let b=0;b<g.childCount;b++){let S=g.child(b);d+S.attrs.rowspan>s&&(S=S.type.create(In(S.attrs,"rowspan",Math.max(1,s-S.attrs.rowspan)),S.content)),p.push(S)}a.push(Me.from(p))}e=a,r=s}return{width:i,height:r,rows:e}}(n,f.right-f.left,f.bottom-f.top),tv(i.state,i.dispatch,d,f,n),!0}if(n){let a=Jl(i.state),d=a.start(-1);return tv(i.state,i.dispatch,d,Wt.get(a.node(-1)).findCell(a.pos-d),n),!0}return!1}function Bw(i,r){if(r.ctrlKey||r.metaKey)return;let n,e=rv(i,r.target);if(r.shiftKey&&i.state.selection instanceof dn)s(i.state.selection.$anchorCell,r),r.preventDefault();else if(r.shiftKey&&e&&null!=(n=Vl(i.state.selection.$anchor))&&Cm(i,r).pos!=n.pos)s(n,r),r.preventDefault();else if(!e)return;function s(f,p){let g=Cm(i,p),b=null==uo.getState(i.state);if(!g||!vm(f,g)){if(!b)return;g=f}let S=new dn(f,g);if(b||!i.state.selection.eq(S)){let k=i.state.tr.setSelection(S);b&&k.setMeta(uo,f.pos),i.dispatch(k)}}function a(){i.root.removeEventListener("mouseup",a),i.root.removeEventListener("dragstart",a),i.root.removeEventListener("mousemove",d),null!=uo.getState(i.state)&&i.dispatch(i.state.tr.setMeta(uo,-1))}function d(f){let g,p=uo.getState(i.state);if(null!=p)g=i.state.doc.resolve(p);else if(rv(i,f.target)!=e&&(g=Cm(i,r),!g))return a();g&&s(g,f)}i.root.addEventListener("mouseup",a),i.root.addEventListener("dragstart",a),i.root.addEventListener("mousemove",d)}function iv(i,r,e){if(!(i.state.selection instanceof en))return null;let{$head:n}=i.state.selection;for(let s=n.depth-1;s>=0;s--){let a=n.node(s);if((e<0?n.index(s):n.indexAfter(s))!=(e<0?0:a.childCount))return null;if("cell"==a.type.spec.tableRole||"header_cell"==a.type.spec.tableRole){let f=n.before(s);return i.endOfTextblock("vert"==r?e>0?"down":"up":e>0?"right":"left")?f:null}}return null}function rv(i,r){for(;r&&r!=i.dom;r=r.parentNode)if("TD"==r.nodeName||"TH"==r.nodeName)return r}function Cm(i,r){let e=i.posAtCoords({left:r.clientX,top:r.clientY});return e&&e?Vl(i.state.doc.resolve(e.pos)):null}const Ch=new yr("fix-tables");function sv(i,r,e,n){let s=i.childCount,a=r.childCount;e:for(let d=0,f=0;d<a;d++){let p=r.child(d);for(let g=f,b=Math.min(s,d+3);g<b;g++)if(i.child(g)==p){f=g+1,e+=p.nodeSize;continue e}n(p,e),f<s&&i.child(f).sameMarkup(p)?sv(i.child(f),p,e+1,n):p.nodesBetween(0,p.content.size,n,e+1),e+=p.nodeSize}}function Gw(i,r){let e,n=(s,a)=>{"table"==s.type.spec.tableRole&&(e=function zw(i,r,e,n){let s=Wt.get(r);if(!s.problems)return n;n||(n=i.tr);let d,f,a=[];for(let p=0;p<s.height;p++)a.push(0);for(let p=0;p<s.problems.length;p++){let g=s.problems[p];if("collision"==g.type){let b=r.nodeAt(g.pos);for(let S=0;S<b.attrs.rowspan;S++)a[g.row+S]+=g.n;n.setNodeMarkup(n.mapping.map(e+1+g.pos),null,Ha(b.attrs,b.attrs.colspan-g.n,g.n))}else if("missing"==g.type)a[g.row]+=g.n;else if("overlong_rowspan"==g.type){let b=r.nodeAt(g.pos);n.setNodeMarkup(n.mapping.map(e+1+g.pos),null,In(b.attrs,"rowspan",b.attrs.rowspan-g.n))}else if("colwidth mismatch"==g.type){let b=r.nodeAt(g.pos);n.setNodeMarkup(n.mapping.map(e+1+g.pos),null,In(b.attrs,"colwidth",g.colwidth))}}for(let p=0;p<a.length;p++)a[p]&&(null==d&&(d=p),f=p);for(let p=0,g=e+1;p<s.height;p++){let b=r.child(p),S=g+b.nodeSize,k=a[p];if(k>0){let T="cell";b.firstChild&&(T=b.firstChild.type.spec.tableRole);let F=[];for(let fe=0;fe<k;fe++)F.push(Li(i.schema)[T].createAndFill());n.insert(n.mapping.map(0!=p&&d!=p-1||f!=p?S-1:g+1),F)}g=S}return n.setMeta(Ch,{fixTables:!0})}(i,s,a,e))};return r?r.doc!=i.doc&&sv(r.doc,i.doc,0,n):i.doc.descendants(n),e}function Ps(i){let d,r=i.selection,e=Jl(i),n=e.node(-1),s=e.start(-1),a=Wt.get(n);return d=r instanceof dn?a.rectBetween(r.$anchorCell.pos-s,r.$headCell.pos-s):a.findCell(e.pos-s),d.tableStart=s,d.map=a,d.table=n,d}function Zw(i,{map:r,tableStart:e,table:n},s){let a=s>0?-1:0;(function W1(i,r,e){let n=Li(r.type.schema).header_cell;for(let s=0;s<i.height;s++)if(r.nodeAt(i.map[e+s*i.width]).type!=n)return!1;return!0})(r,n,s+a)&&(a=0==s||s==r.width?null:0);for(let d=0;d<r.height;d++){let f=d*r.width+s;if(s>0&&s<r.width&&r.map[f-1]==r.map[f]){let p=r.map[f],g=n.nodeAt(p);i.setNodeMarkup(i.mapping.map(e+p),null,fd(g.attrs,s-r.colCount(p))),d+=g.attrs.rowspan-1}else{let p=null==a?Li(n.type.schema).cell:n.nodeAt(r.map[f+a]).type,g=r.positionAt(d,s,n);i.insert(i.mapping.map(e+g),p.createAndFill())}}return i}function c(i,{map:r,table:e,tableStart:n},s){let a=i.mapping.maps.length;for(let d=0;d<r.height;){let f=d*r.width+s,p=r.map[f],g=e.nodeAt(p);if(s>0&&r.map[f-1]==p||s<r.width-1&&r.map[f+1]==p)i.setNodeMarkup(i.mapping.slice(a).map(n+p),null,Ha(g.attrs,s-r.colCount(p)));else{let b=i.mapping.slice(a).map(n+p);i.delete(b,b+g.nodeSize)}d+=g.attrs.rowspan}}function h(i,{map:r,tableStart:e,table:n},s){let a=e;for(let p=0;p<s;p++)a+=n.child(p).nodeSize;let d=[],f=s>0?-1:0;(function u(i,r,e){let n=Li(r.type.schema).header_cell;for(let s=0;s<i.width;s++)if(r.nodeAt(i.map[s+e*i.width]).type!=n)return!1;return!0})(r,n,s+f)&&(f=0==s||s==r.height?null:0);for(let p=0,g=r.width*s;p<r.width;p++,g++)if(s>0&&s<r.height&&r.map[g]==r.map[g-r.width]){let b=r.map[g],S=n.nodeAt(b).attrs;i.setNodeMarkup(e+b,null,In(S,"rowspan",S.rowspan+1)),p+=S.colspan-1}else{let b=null==f?Li(n.type.schema).cell:n.nodeAt(r.map[g+f*r.width]).type;d.push(b.createAndFill())}return i.insert(a,Li(n.type.schema).row.create(null,d)),i}function v(i,{map:r,table:e,tableStart:n},s){let a=0;for(let p=0;p<s;p++)a+=e.child(p).nodeSize;let d=a+e.child(s).nodeSize,f=i.mapping.maps.length;i.delete(a+n,d+n);for(let p=0,g=s*r.width;p<r.width;p++,g++){let b=r.map[g];if(s>0&&b==r.map[g-r.width]){let S=e.nodeAt(b).attrs;i.setNodeMarkup(i.mapping.slice(f).map(b+n),null,In(S,"rowspan",S.rowspan-1)),p+=S.colspan-1}else if(s<r.width&&b==r.map[g+r.width]){let S=e.nodeAt(b),k=S.type.create(In(S.attrs,"rowspan",S.attrs.rowspan-1),S.content),T=r.positionAt(s+1,p,e);i.insert(i.mapping.slice(f).map(n+T),k),p+=S.attrs.colspan-1}}}function x(i,r){if(!gs(i))return!1;if(r){let e=Ps(i),n=i.tr;if(0==e.top&&e.bottom==e.map.height)return!1;for(let s=e.bottom-1;v(n,e,s),s!=e.top;s--)e.table=e.tableStart?n.doc.nodeAt(e.tableStart-1):n.doc,e.map=Wt.get(e.table);r(n)}return!0}function C(i){let r=i.content;return 1==r.childCount&&r.firstChild.isTextblock&&0==r.firstChild.childCount}function D(i,r){let e=i.selection;if(!(e instanceof dn)||e.$anchorCell.pos==e.$headCell.pos)return!1;let n=Ps(i),{map:s}=n;if(function E({width:i,height:r,map:e},n){let s=n.top*i+n.left,a=s,d=(n.bottom-1)*i+n.left,f=s+(n.right-n.left-1);for(let p=n.top;p<n.bottom;p++){if(n.left>0&&e[a]==e[a-1]||n.right<i&&e[f]==e[f+1])return!0;a+=i,f+=i}for(let p=n.left;p<n.right;p++){if(n.top>0&&e[s]==e[s-i]||n.bottom<r&&e[d]==e[d+i])return!0;s++,d++}return!1}(s,n))return!1;if(r){let p,g,a=i.tr,d={},f=Me.empty;for(let b=n.top;b<n.bottom;b++)for(let S=n.left;S<n.right;S++){let k=s.map[b*s.width+S],T=n.table.nodeAt(k);if(!d[k])if(d[k]=!0,null==p)p=k,g=T;else{C(T)||(f=f.append(T.content));let F=a.mapping.map(k+n.tableStart);a.delete(F,F+T.nodeSize)}}if(a.setNodeMarkup(p+n.tableStart,null,In(fd(g.attrs,g.attrs.colspan,n.right-n.left-g.attrs.colspan),"rowspan",n.bottom-n.top)),f.size){let b=p+1+g.content.size,S=C(g)?p+1:b;a.replaceWith(S+n.tableStart,b+n.tableStart,f)}a.setSelection(new dn(a.doc.resolve(p+n.tableStart))),r(a)}return!0}function A(i,r){const e=Li(i.schema);return function I(i){return(r,e)=>{let s,a,n=r.selection;if(n instanceof dn){if(n.$anchorCell.pos!=n.$headCell.pos)return!1;s=n.$anchorCell.nodeAfter,a=n.$anchorCell.pos}else{if(s=function Fw(i){for(let r=i.depth;r>0;r--){const e=i.node(r).type.spec.tableRole;if("cell"===e||"header_cell"===e)return i.node(r)}return null}(n.$from),!s)return!1;a=Vl(n.$from).pos}if(1==s.attrs.colspan&&1==s.attrs.rowspan)return!1;if(e){let d=s.attrs,f=[],p=d.colwidth;d.rowspan>1&&(d=In(d,"rowspan",1)),d.colspan>1&&(d=In(d,"colspan",1));let S,g=Ps(r),b=r.tr;for(let k=0;k<g.right-g.left;k++)f.push(p?In(d,"colwidth",p&&p[k]?[p[k]]:null):d);for(let k=g.top;k<g.bottom;k++){let T=g.map.positionAt(k,g.left,g.table);k==g.top&&(T+=s.nodeSize);for(let F=g.left,K=0;F<g.right;F++,K++)F==g.left&&k==g.top||b.insert(S=b.mapping.map(T+g.tableStart,1),i({node:s,row:k,col:F}).createAndFill(f[K]))}b.setNodeMarkup(a,i({node:s,row:g.top,col:g.left}),f[0]),n instanceof dn&&b.setSelection(new dn(b.doc.resolve(n.$anchorCell.pos),S&&b.doc.resolve(S))),e(b)}return!0}}(({node:n})=>e[n.type.spec.tableRole])(i,r)}function N(i,r,e){const n=r.map.cellsInRect({left:0,top:0,right:"row"==i?r.map.width:1,bottom:"column"==i?r.map.height:1});for(let s=0;s<n.length;s++){const a=r.table.nodeAt(n[s]);if(a&&a.type!==e.header_cell)return!1}return!0}function Z(i,r){return(r=r||{useDeprecatedLogic:!1}).useDeprecatedLogic?function y(i){return function(r,e){if(!gs(r))return!1;if(e){let n=Li(r.schema),s=Ps(r),a=r.tr,d=s.map.cellsInRect("column"==i?new Hl(s.left,0,s.right,s.map.height):"row"==i?new Hl(0,s.top,s.map.width,s.bottom):s),f=d.map(p=>s.table.nodeAt(p));for(let p=0;p<d.length;p++)f[p].type==n.header_cell&&a.setNodeMarkup(s.tableStart+d[p],n.cell,f[p].attrs);if(0==a.steps.length)for(let p=0;p<d.length;p++)a.setNodeMarkup(s.tableStart+d[p],n.header_cell,f[p].attrs);e(a)}return!0}}(i):function(e,n){if(!gs(e))return!1;if(n){let s=Li(e.schema),a=Ps(e),d=e.tr,f=N("row",a,s),p=N("column",a,s),b=("column"===i?f:"row"===i&&p)?1:0,S="column"==i?new Hl(0,b,1,a.map.height):"row"==i?new Hl(b,0,a.map.width,1):a,k="column"==i?p?s.cell:s.header_cell:"row"==i?f?s.cell:s.header_cell:s.cell;a.map.cellsInRect(S).forEach(T=>{const F=T+a.tableStart,K=d.doc.nodeAt(F);K&&d.setNodeMarkup(F,k,K.attrs)}),n(d)}return!0}}function j(i,r){let e=i.selection.$anchor;for(let n=e.depth;n>0;n--)if("table"==e.node(n).type.spec.tableRole)return r&&r(i.tr.delete(e.before(n),e.after(n)).scrollIntoView()),!0;return!1}function ne({allowTableNodeSelection:i=!1}={}){return new Yr({key:uo,state:{init:()=>null,apply(r,e){let n=r.getMeta(uo);if(null!=n)return-1==n?null:n;if(null==e||!r.docChanged)return e;let{deleted:s,pos:a}=r.mapping.mapResult(e);return s?null:a}},props:{decorations:Pw,handleDOMEvents:{mousedown:Bw},createSelectionBetween(r){if(null!=uo.getState(r.state))return r.state.selection},handleTripleClick:Uw,handleKeyDown:md,handlePaste:nv},appendTransaction:(r,e,n)=>function j1(i,r,e){let a,d,n=(r||i).selection,s=(r||i).doc;if(n instanceof vt&&(d=n.node.type.spec.tableRole)){if("cell"==d||"header_cell"==d)a=dn.create(s,n.from);else if("row"==d){let f=s.resolve(n.from+1);a=dn.rowSelection(f,f)}else if(!e){let f=Wt.get(n.node),p=n.from+1;a=dn.create(s,p+1,p+f.map[f.width*f.height-1])}}else n instanceof en&&function Dy({$from:i,$to:r}){if(i.pos==r.pos||i.pos<i.pos-6)return!1;let e=i.pos,n=r.pos,s=i.depth;for(;s>=0&&!(i.after(s+1)<i.end(s));s--,e++);for(let a=r.depth;a>=0&&!(r.before(a+1)>r.start(a));a--,n--);return e==n&&/row|table/.test(i.node(s).type.spec.tableRole)}(n)?a=en.create(s,n.from):n instanceof en&&function Ay({$from:i,$to:r}){let e,n;for(let s=i.depth;s>0;s--){let a=i.node(s);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){e=a;break}}for(let s=r.depth;s>0;s--){let a=r.node(s);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){n=a;break}}return e!==n&&0===r.parentOffset}(n)&&(a=en.create(s,n.$from.start(),n.$from.end()));return a&&(r||(r=i.tr)).setSelection(a),r}(n,Gw(n,e),i)})}Z("row",{useDeprecatedLogic:!0}),Z("column",{useDeprecatedLogic:!0}),Z("cell",{useDeprecatedLogic:!0}),new yr("tableColumnResizing");const ot=["blockquote",0],$e=["hr"],We=["pre",["code",0]],Le=["ol",0],jt=["ul",0],W=["li",0],At=i=>{const r={};let n,e=i.attributes;for(let s=0;s<e.length;s++)n=e[s],r[n.name]=n.value;return r},Kt=i=>{const r={};return i.forEach(e=>{r[e]={default:null}}),r},tn=()=>Kt(["style","class","id"]),Nt=(i,r)=>{for(let e in i)if(e&&null!==i[e]&&e!==r)return!0;return!1},Ke=(i,r=[])=>{const e={};for(let n in i)n&&null!==i[n]&&!r.find(s=>s===n)&&(e[n]=i[n]);return e},wn=i=>({[i]:{name:i,inclusive:!0,parseDOM:[{tag:i}],toDOM:()=>[i,0]}}),Qr=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({link:{attrs:Object.assign(Object.assign({},tn()),{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:At}],toDOM:i=>["a",Ke(i.attrs),0]}},wn("strong")),wn("b")),wn("em")),wn("i")),wn("u")),wn("del")),wn("sub")),wn("sup")),wn("code")),{style:{attrs:Object.assign({},tn()),parseDOM:[{tag:"span",getAttrs:At}],toDOM:i=>Nt(i.attrs)?["span",Ke(i.attrs),0]:["span",0]}}),Br=i=>({[i]:{default:null,getFromDOM:r=>r.getAttribute(i),setDOMAttr:(r,e)=>{e[i]=r}}}),ho=Object.assign(Object.assign(Object.assign(Object.assign({},Br("style")),Br("class")),Br("id")),Br("headers")),gd={doc:{content:"colgroup*"},col:{attrs:Kt(["id","class","style","span"]),parseDOM:[{getAttrs:At,tag:"col"}],toDOM:i=>["col",i.attrs]},colgroup:{attrs:Kt(["id","class","style","span"]),content:"col*",parseDOM:[{getAttrs:At,tag:"colgroup"}],toDOM:i=>["colgroup",i.attrs,0]},text:{inline:!0,group:"inline"}},Xo=new np({nodes:gd,marks:{}}),Xr=i=>{const r=_p(gp(i),Xo,{preserveWhitespace:!1});return p0(r).firstChild},lr=function Nw(i){let r=i.cellAttributes||{},e={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(let n in r)e[n]={default:r[n].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:i.tableGroup,parseDOM:[{tag:"table"}],toDOM:()=>["table",["tbody",0]]},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0]},table_cell:{content:i.cellContent,attrs:e,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:n=>gm(n,r)}],toDOM:n=>["td",gh(n,r),0]},table_header:{content:i.cellContent,attrs:e,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:n=>gm(n,r)}],toDOM:n=>["th",gh(n,r),0]}}}({tableGroup:"block",cellContent:"block+",cellAttributes:ho});lr.table_row.attrs=Object.assign(Object.assign({},lr.table_row.attrs),Kt([Is,"style","class","id"])),lr.table_row.toDOM=i=>["tr",Ke(i.attrs),0],lr.table_row.parseDOM=[{tag:"tr",getAttrs:At}],lr.table.attrs=Object.assign(Object.assign({},lr.table.attrs),Kt(["style","class","id",zn,Ms])),lr.table.toDOM=i=>{const r=Nt(i.attrs)?Ke(i.attrs,[zn,Ms]):{};let e=null;if(i.attrs[zn]&&!(i=>{let r=!1;const e=i.child(0);for(let n=0;n<e.childCount;n++)if(e.child(n).attrs.colwidth){r=!0;break}return r})(i)){const n=Xr(i.attrs[zn]);if(n){const s=Array.from(n.children).map(a=>["col",At(a)]);e=["colgroup",At(n)].concat(s)}}return e?["table",r,e,["tbody",0]]:["table",r,["tbody",0]]},lr.table.parseDOM=[{tag:"table",getAttrs:i=>{const r=At(i),e=Array.from(i.childNodes).find(n=>"COLGROUP"===n.nodeName);return e&&(r[zn]=e.outerHTML),r}}];const _d=Object.assign({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:Object.assign({},tn()),parseDOM:[{tag:"p",getAttrs:At}],toDOM:i=>Nt(i.attrs)?["p",Ke(i.attrs),0]:["p",0]},div:{content:"block*",group:"block",attrs:Object.assign({},tn()),parseDOM:[{tag:"div",getAttrs:At}],toDOM:i=>Nt(i.attrs)?["div",Ke(i.attrs),0]:["div",0]},blockquote:{attrs:Object.assign({},tn()),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:At}],toDOM:i=>Nt(i.attrs)?["blockquote",Ke(i.attrs),0]:ot},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>$e},heading:{attrs:Object.assign(Object.assign({},tn()),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:i=>Object.assign(Object.assign({},At(i)),{level:1})},{tag:"h2",getAttrs:i=>Object.assign(Object.assign({},At(i)),{level:2})},{tag:"h3",getAttrs:i=>Object.assign(Object.assign({},At(i)),{level:3})},{tag:"h4",getAttrs:i=>Object.assign(Object.assign({},At(i)),{level:4})},{tag:"h5",getAttrs:i=>Object.assign(Object.assign({},At(i)),{level:5})},{tag:"h6",getAttrs:i=>Object.assign(Object.assign({},At(i)),{level:6})}],toDOM:i=>Nt(i.attrs,"level")?["h"+i.attrs.level,Ke(i.attrs,["level"]),0]:["h"+i.attrs.level,0]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>We},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:Object.assign({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},tn()),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:At}],toDOM:i=>Nt(i.attrs)?["img",Ke(i.attrs)]:["img"]},hard_break:{inline:!0,attrs:Object.assign({},tn()),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:At}],toDOM:i=>Nt(i.attrs)?["br",Ke(i.attrs)]:["br"]},ordered_list:{content:"list_item+",group:"block",attrs:Object.assign(Object.assign({},tn()),{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:i=>Object.assign(Object.assign({},At(i)),{order:i.hasAttribute("start")?parseInt(i.getAttribute("start")||"1",10):1})}],toDOM:i=>1===i.attrs.order?Nt(i.attrs,"order")?["ol",Ke(i.attrs,["order"]),0]:Le:["ol",Object.assign(Object.assign({},Ke(i.attrs,["order"])),{start:i.attrs.order}),0]},bullet_list:{content:"list_item+",group:"block",attrs:Object.assign({},tn()),parseDOM:[{tag:"ul",getAttrs:At}],toDOM:i=>Nt(i.attrs)?["ul",Ke(i.attrs),0]:jt},list_item:{content:"(paragraph | heading) block*",attrs:Object.assign({},tn()),parseDOM:[{tag:"li",getAttrs:At}],toDOM:i=>Nt(i.attrs)?["li",Ke(i.attrs),0]:W,defining:!0}},lr);var Pn=function(){};Pn.prototype.append=function(r){return r.length?(r=Pn.from(r),!this.length&&r||r.length<200&&this.leafAppend(r)||this.length<200&&r.leafPrepend(this)||this.appendInner(r)):this},Pn.prototype.prepend=function(r){return r.length?Pn.from(r).append(this):this},Pn.prototype.appendInner=function(r){return new ri(this,r)},Pn.prototype.slice=function(r,e){return void 0===r&&(r=0),void 0===e&&(e=this.length),r>=e?Pn.empty:this.sliceInner(Math.max(0,r),Math.min(this.length,e))},Pn.prototype.get=function(r){if(!(r<0||r>=this.length))return this.getInner(r)},Pn.prototype.forEach=function(r,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(r,e,n,0):this.forEachInvertedInner(r,e,n,0)},Pn.prototype.map=function(r,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var s=[];return this.forEach(function(a,d){return s.push(r(a,d))},e,n),s},Pn.from=function(r){return r instanceof Pn?r:r&&r.length?new nn(r):Pn.empty};var nn=function(i){function r(n){i.call(this),this.values=n}i&&(r.__proto__=i),(r.prototype=Object.create(i&&i.prototype)).constructor=r;var e={length:{configurable:!0},depth:{configurable:!0}};return r.prototype.flatten=function(){return this.values},r.prototype.sliceInner=function(s,a){return 0==s&&a==this.length?this:new r(this.values.slice(s,a))},r.prototype.getInner=function(s){return this.values[s]},r.prototype.forEachInner=function(s,a,d,f){for(var p=a;p<d;p++)if(!1===s(this.values[p],f+p))return!1},r.prototype.forEachInvertedInner=function(s,a,d,f){for(var p=a-1;p>=d;p--)if(!1===s(this.values[p],f+p))return!1},r.prototype.leafAppend=function(s){if(this.length+s.length<=200)return new r(this.values.concat(s.flatten()))},r.prototype.leafPrepend=function(s){if(this.length+s.length<=200)return new r(s.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(r.prototype,e),r}(Pn);Pn.empty=new nn([]);var ri=function(i){function r(e,n){i.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return i&&(r.__proto__=i),(r.prototype=Object.create(i&&i.prototype)).constructor=r,r.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},r.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},r.prototype.forEachInner=function(n,s,a,d){var f=this.left.length;if(s<f&&!1===this.left.forEachInner(n,s,Math.min(a,f),d)||a>f&&!1===this.right.forEachInner(n,Math.max(s-f,0),Math.min(this.length,a)-f,d+f))return!1},r.prototype.forEachInvertedInner=function(n,s,a,d){var f=this.left.length;if(s>f&&!1===this.right.forEachInvertedInner(n,s-f,Math.max(a,f)-f,d+f)||a<f&&!1===this.left.forEachInvertedInner(n,Math.min(s,f),a,d))return!1},r.prototype.sliceInner=function(n,s){if(0==n&&s==this.length)return this;var a=this.left.length;return s<=a?this.left.slice(n,s):n>=a?this.right.slice(n-a,s-a):this.left.slice(n,a).append(this.right.slice(0,s-a))},r.prototype.leafAppend=function(n){var s=this.right.leafAppend(n);if(s)return new r(this.left,s)},r.prototype.leafPrepend=function(n){var s=this.left.leafPrepend(n);if(s)return new r(s,this.right)},r.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new r(this.left,new r(this.right,n)):new r(this,n)},r}(Pn);const ui=Pn;class ts{constructor(r,e){this.items=r,this.eventCount=e}popEvent(r,e){if(0==this.eventCount)return null;let s,a,n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}e&&(s=this.remapping(n,this.items.length),a=s.maps.length);let f,p,d=r.tr,g=[],b=[];return this.items.forEach((S,k)=>{if(!S.step)return s||(s=this.remapping(n,k+1),a=s.maps.length),a--,void b.push(S);if(s){b.push(new Us(S.map));let F,T=S.step.map(s.slice(a));T&&d.maybeStep(T).doc&&(F=d.mapping.maps[d.mapping.maps.length-1],g.push(new Us(F,void 0,void 0,g.length+b.length))),a--,F&&s.appendMap(F,a)}else d.maybeStep(S.step);return S.selection?(f=s?S.selection.map(s.slice(a)):S.selection,p=new ts(this.items.slice(0,n).append(b.reverse().concat(g)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:p,transform:d,selection:f}}addTransform(r,e,n,s){let a=[],d=this.eventCount,f=this.items,p=!s&&f.length?f.get(f.length-1):null;for(let b=0;b<r.steps.length;b++){let T,S=r.steps[b].invert(r.docs[b]),k=new Us(r.mapping.maps[b],S,e);(T=p&&p.merge(k))&&(k=T,b?a.pop():f=f.slice(0,f.length-1)),a.push(k),e&&(d++,e=void 0),s||(p=k)}let g=d-n.depth;return g>ov&&(f=function Hw(i,r){let e;return i.forEach((n,s)=>{if(n.selection&&0==r--)return e=s,!1}),i.slice(e)}(f,g),d-=g),new ts(f.append(a),d)}remapping(r,e){let n=new bl;return this.items.forEach((s,a)=>{n.appendMap(s.map,null!=s.mirrorOffset&&a-s.mirrorOffset>=r?n.maps.length-s.mirrorOffset:void 0)},r,e),n}addMaps(r){return 0==this.eventCount?this:new ts(this.items.append(r.map(e=>new Us(e))),this.eventCount)}rebased(r,e){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-e),a=r.mapping,d=r.steps.length,f=this.eventCount;this.items.forEach(k=>{k.selection&&f--},s);let p=e;this.items.forEach(k=>{let T=a.getMirror(--p);if(null==T)return;d=Math.min(d,T);let F=a.maps[T];if(k.step){let K=r.steps[T].invert(r.docs[T]),fe=k.selection&&k.selection.map(a.slice(p+1,T));fe&&f++,n.push(new Us(F,K,fe))}else n.push(new Us(F))},s);let g=[];for(let k=e;k<d;k++)g.push(new Us(a.maps[k]));let b=this.items.slice(0,s).append(g).append(n),S=new ts(b,f);return S.emptyItemCount()>500&&(S=S.compress(this.items.length-n.length)),S}emptyItemCount(){let r=0;return this.items.forEach(e=>{e.step||r++}),r}compress(r=this.items.length){let e=this.remapping(0,r),n=e.maps.length,s=[],a=0;return this.items.forEach((d,f)=>{if(f>=r)s.push(d),d.selection&&a++;else if(d.step){let p=d.step.map(e.slice(n)),g=p&&p.getMap();if(n--,g&&e.appendMap(g,n),p){let b=d.selection&&d.selection.map(e.slice(n));b&&a++;let k,S=new Us(g.invert(),p,b),T=s.length-1;(k=s.length&&s[T].merge(S))?s[T]=k:s.push(S)}}else d.map&&n--},this.items.length,0),new ts(ui.from(s.reverse()),a)}}ts.empty=new ts(ui.empty,0);class Us{constructor(r,e,n,s){this.map=r,this.step=e,this.selection=n,this.mirrorOffset=s}merge(r){if(this.step&&r.step&&!r.selection){let e=r.step.merge(this.step);if(e)return new Us(e.getMap().invert(),e,this.selection)}}}class fo{constructor(r,e,n,s){this.done=r,this.undone=e,this.prevRanges=n,this.prevTime=s}}const ov=20;function lv(i){let r=[];return i.forEach((e,n,s,a)=>r.push(s,a)),r}function Kl(i,r){if(!i)return null;let e=[];for(let n=0;n<i.length;n+=2){let s=r.map(i[n],1),a=r.map(i[n+1],-1);s<=a&&e.push(s,a)}return e}function cv(i,r,e,n){let s=Sh(r),a=Bs.get(r).spec.config,d=(n?i.undone:i.done).popEvent(r,s);if(!d)return;let f=d.selection.resolve(d.transform.doc),p=(n?i.done:i.undone).addTransform(d.transform,r.selection.getBookmark(),a,s),g=new fo(n?p:d.remaining,n?d.remaining:p,null,0);e(d.transform.setSelection(f).setMeta(Bs,{redo:n,historyState:g}).scrollIntoView())}let Sm=!1,dv=null;function Sh(i){let r=i.plugins;if(dv!=r){Sm=!1,dv=r;for(let e=0;e<r.length;e++)if(r[e].spec.historyPreserveItems){Sm=!0;break}}return Sm}const Bs=new yr("history"),uv=new yr("closeHistory");function Jw(i={}){return new Yr({key:Bs,state:{init:()=>new fo(ts.empty,ts.empty,null,0),apply:(r,e,n)=>function av(i,r,e,n){let a,s=e.getMeta(Bs);if(s)return s.historyState;e.getMeta(uv)&&(i=new fo(i.done,i.undone,null,0));let d=e.getMeta("appendedTransaction");if(0==e.steps.length)return i;if(d&&d.getMeta(Bs))return d.getMeta(Bs).redo?new fo(i.done.addTransform(e,void 0,n,Sh(r)),i.undone,lv(e.mapping.maps[e.steps.length-1]),i.prevTime):new fo(i.done,i.undone.addTransform(e,void 0,n,Sh(r)),null,i.prevTime);if(!1===e.getMeta("addToHistory")||d&&!1===d.getMeta("addToHistory"))return(a=e.getMeta("rebased"))?new fo(i.done.rebased(e,a),i.undone.rebased(e,a),Kl(i.prevRanges,e.mapping),i.prevTime):new fo(i.done.addMaps(e.mapping.maps),i.undone.addMaps(e.mapping.maps),Kl(i.prevRanges,e.mapping),i.prevTime);{let f=0==i.prevTime||!d&&(i.prevTime<(e.time||0)-n.newGroupDelay||!function Vw(i,r){if(!r)return!1;if(!i.docChanged)return!0;let e=!1;return i.mapping.maps[0].forEach((n,s)=>{for(let a=0;a<r.length;a+=2)n<=r[a+1]&&s>=r[a]&&(e=!0)}),e}(e,i.prevRanges)),p=d?Kl(i.prevRanges,e.mapping):lv(e.mapping.maps[e.steps.length-1]);return new fo(i.done.addTransform(e,f?r.selection.getBookmark():void 0,n,Sh(r)),ts.empty,p,e.time)}}(e,n,r,i)},config:i={depth:i.depth||100,newGroupDelay:i.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(r,e){let n=e.inputType,s="historyUndo"==n?$l:"historyRedo"==n?vd:null;return!!s&&(e.preventDefault(),s(r.state,r.dispatch))}}}})}const $l=(i,r)=>{let e=Bs.getState(i);return!(!e||0==e.done.eventCount||(r&&cv(e,i,r,!1),0))},vd=(i,r)=>{let e=Bs.getState(i);return!(!e||0==e.undone.eventCount||(r&&cv(e,i,r,!0),0))};class L{constructor(r,e){this.match=r,this.match=r,this.handler="string"==typeof e?function V(i){return function(r,e,n,s){let a=i;if(e[1]){let d=e[0].lastIndexOf(e[1]);a+=e[0].slice(d+e[1].length);let f=(n+=d)-s;f>0&&(a=e[0].slice(d-f,d)+a,n=s)}return r.tr.insertText(a,n,s)}}(e):e}}const Y=(i,r)=>{let e=i.plugins;for(let n=0;n<e.length;n++){let a,s=e[n];if(s.spec.isInputRules&&(a=s.getState(i))){if(r){let d=i.tr,f=a.transform;for(let p=f.steps.length-1;p>=0;p--)d.step(f.steps[p].invert(f.docs[p]));if(a.text){let p=d.doc.resolve(a.from).marks();d.replaceWith(a.from,a.to,i.schema.text(a.text,p))}else d.delete(a.from,a.to);r(d)}return!0}}return!1};new L(/--$/,"\u2014"),new L(/\.\.\.$/,"\u2026"),new L(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),new L(/"$/,"\u201d"),new L(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new L(/'$/,"\u2019");const rt={mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}},Pt={mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}},Mn={mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}},_r={mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}},si={mark:"sub"},Or={mark:"sup"},Wl={mark:"link"},Ja=typeof navigator<"u"&&/Mac/.test(navigator.platform),Em=(i,r)=>{const e={},n=r&&r.applyToWord||!1;if(e["Mod-z"]=$l,e["Shift-Mod-z"]=vd,e.Backspace=Nl(Y,Ri,R0,N0),e.Enter=Nl(td,P0,Tp,B0),Ja||(e["Mod-y"]=vd),i.marks.strong&&(e["Mod-b"]=pr(hs,Object.assign(Object.assign({},rt),{applyToWord:n}))),i.marks.em&&(e["Mod-i"]=pr(hs,Object.assign(Object.assign({},Pt),{applyToWord:n}))),i.marks.u&&(e["Mod-u"]=pr(hs,Object.assign(Object.assign({},Mn),{applyToWord:n}))),i.nodes.hard_break){const s=i.nodes.hard_break,a=Nl(L0,(d,f)=>(f(d.tr.replaceSelectionWith(s.create()).scrollIntoView()),!0));e["Shift-Enter"]=a}return e},po=i=>{const r={};return i.nodes.list_item&&(r.Enter=(i=>(r,e)=>function KS(i){return function(r,e){let{$from:n,$to:s,node:a}=r.selection;if(a&&a.isBlock||n.depth<2||!n.sameParent(s))return!1;let d=n.node(-1);if(d.type!=i)return!1;if(0==n.parent.content.size&&n.node(-1).childCount==n.indexAfter(-1)){if(3==n.depth||n.node(-3).type!=i||n.index(-2)!=n.node(-2).childCount-1)return!1;if(e){let b=Me.empty,S=n.index(-1)?1:n.index(-2)?2:3;for(let fe=n.depth-S;fe>=n.depth-3;fe--)b=Me.from(n.node(fe).copy(b));let k=n.indexAfter(-1)<n.node(-2).childCount?1:n.indexAfter(-2)<n.node(-3).childCount?2:3;b=b.append(Me.from(i.createAndFill()));let T=n.before(n.depth-(S-1)),F=r.tr.replace(T,n.after(-k),new st(b,4-S,0)),K=-1;F.doc.nodesBetween(T,F.doc.content.size,(fe,Re)=>{if(K>-1)return!1;fe.isTextblock&&0==fe.content.size&&(K=Re+1)}),K>-1&&F.setSelection(Zt.near(F.doc.resolve(K))),e(F.scrollIntoView())}return!0}let f=s.pos==n.end()?d.contentMatchAt(0).defaultType:null,p=r.tr.delete(n.pos,s.pos),g=f?[null,{type:f}]:void 0;return!!Sl(p.doc,n.pos,2,g)&&(e&&e(p.split(n.pos,2,g).scrollIntoView()),!0)}}(i)(r,n=>{let s=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();s&&n.ensureMarks(s),e(n)}))(i.nodes.list_item)),r},o3=/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,Ny=i=>/^MsoListParagraph/.test(i.className),qw=i=>{let r=i.innerHTML;return r=r.replace(/<!--(.|\s)*?-->/gi,""),r=r.replace(/<\/?[^>]+?\/?>/gm,""),r},Fy=(i,r)=>{const e=document.createElement(i);return e.style.listStyleType=r,e},l3=i=>/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(i)?null:/^o/.test(i)?"circle":"square",c3=i=>{let r=null;return/^\d/.test(i)||(r=(/^[a-z]/.test(i)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(i)?"roman":"alpha")),r},Yw=(i,r)=>{let e=[];Array.from(i).forEach(n=>{if(n.nodeType!==Node.ELEMENT_NODE)return;let s=n;s.getAttribute("datalist")?(e.push(n),r.add(e)):Ny(s)&&e.length?e.push(n):(e=[],"DIV"===s.nodeName?Yw(s.children,r):"TABLE"===s.nodeName&&Array.from(s.querySelectorAll("td,th")).forEach(a=>{Yw(a.children,r)}))})},d3=i=>{let r=i.innerHTML,e=n=>n.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"");return r=r.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,"\xa0"),/^[\u2022\u00b7\u00a7\u00d8o\xd8\xfcvn][\u00a0 ]+/.test(r)?{tag:"ul",style:l3(e(qw(i)))}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(r)?{tag:"ol",style:c3(e(qw(i)))}:void 0},u3=i=>{let r,e=i.nodeName.toLowerCase();i.firstChild&&i.firstChild.nodeType===Node.COMMENT_NODE&&i.removeChild(i.firstChild),1===i.childNodes.length?r=i.firstChild.nodeType===Node.TEXT_NODE?qw(i):i.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(i.removeChild(i.firstChild),3===i.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(i.firstChild.nodeValue)&&i.removeChild(i.firstChild),/^(&nbsp;|\s)+$/i.test(i.firstChild.innerHTML)&&i.removeChild(i.firstChild),r="p"!==e?"<"+e+">"+i.innerHTML+"</"+e+">":i.innerHTML),i.parentNode.removeChild(i);const n=document.createElement("li");return n.innerHTML=r,n},hv=i=>{i.ownerElement&&i.ownerElement.removeAttribute(i.name)},_3=i=>{/^Mso/.test(i.value)&&hv(i)},v3=/\s*;\s*/,b3=/\s*:\s*/,x3=i=>{const r=i.value.split(v3).filter(f=>Boolean(f)),n=i.ownerElement.style;let a,d,s="";r.forEach(f=>{[a,d]=f.split(b3),void 0!==n[a]&&(s+=`${a}: ${d}; `)}),s=s.trim(),s?i.value=s:hv(i)},E3=(i,r)=>{let e=i;if(r.convertMsLists&&(e=(i=>{const r=document.createElement("div");r.innerHTML=(i=>(i=i.replace(o3,(r,e,n)=>`datalist="${e}" datalevel="${n}" ${r}`),i))(i);const e=new Set;return Yw(r.children,e),e.forEach(n=>(i=>{let n,s,a,d,f,p,g,b,S,k,T,F,K,r=-1,e={};for(b=0;b<i.length;b++){S=i[b],K={datalist:S.getAttribute("datalist"),datalevel:S.getAttribute("datalevel")};let fe=K.datalist,Re=d3(S);if(k=Re&&Re.tag,!k){n&&(!f||Ny(S))&&(S.style.marginLeft&&(S.style.marginLeft=""),S.style.marginLeft&&(S.style.margin=""),n.appendChild(S));continue}if(T=K.datalevel||parseFloat(S.style.marginLeft||0),!K.datalevel&&!S.style.marginLeft)continue;let Ae=k+fe;e[T]||(e[T]={}),(!s||s<0)&&(s=T,a=fe,g=i.filter(Qe=>Qe.getAttribute("datalist")===String(a)),d=g[g.length-1],p=Fy(k,Re&&Re.style),S.parentNode.insertBefore(p,S),r=T,e[T][Ae]=p),f=d===S,F=e[T][Ae],(T>r||!F)&&(F=Fy(k,Re&&Re.style),e[T][Ae]=F,n.appendChild(F)),n=u3(S),F.appendChild(n),f?s=r=-1:r=T}})(n)),r.innerHTML})(e)),r.stripTags&&(e=((i,r)=>i.replace(new RegExp("<\\/?("+r+")(?:\\s[^>]*?)?>","gi"),""))(e,r.stripTags)),r.attributes){const n=document.createElement("div");n.innerHTML=e,Array.from(n.querySelectorAll("*")).forEach(s=>((i,r)=>{if(i.nodeType===Node.ELEMENT_NODE){for(let e=i.attributes.length-1;e>=0;e--){const n=i.attributes[e];r[n.name]?r[n.name](n):r["*"]&&r["*"](n)}"SPAN"===i.nodeName&&0===i.attributes.length&&(i=>{const r=i.parentNode;if(r){for(;i.firstChild;)r.insertBefore(i.firstChild,i);r.removeChild(i)}})(i)}})(s,r.attributes)),e=n.innerHTML}return e};new RegExp("(?:("+/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/.source+"))([\\da-fA-F\\s]+)\\}","g"),new yr("highlight");const Kw={southeast:{x:1,y:1},east:{x:1,y:0},south:{x:0,y:1},north:{x:0,y:-1},west:{x:-1,y:0},southwest:{x:-1,y:1},northwest:{x:-1,y:-1},northeast:{x:1,y:-1}},fv=Object.keys(Kw),mo=new yr("image-resize"),By=(i,r,e)=>{i.style[r]=e+"px"},I3=/[^\-]width:|[^\-]height:/,Gy=/^.+$/;class $w{constructor(r,e,n,s){this.activeHandle=r,this.dragging=e,this.rect=n,this.nodePosition=s}apply(r){let n=r.getMeta(mo);return n?new $w(n.activeHandle,n.setDragging,n.rect,n.nodePosition):this}}const F3=(i={node:"image",lockRatio:!0})=>new Yr({key:mo,view:r=>({resize(){mo.getState(r.state).rect&&r.dispatch(r.state.tr.setMeta("resize",!0))},get window(){return r.dom.ownerDocument&&r.dom.ownerDocument.defaultView},attachResize(){const e=this.window;e&&(e.removeEventListener("resize",this.resize),e.addEventListener("resize",this.resize))},removeResize(){const e=this.window;e&&e.removeEventListener("resize",this.resize)},update(e,n){const s=e.state,a=s.selection,d=s.schema.nodes[i.node],f=mo.getState(s),p=f.rect;if(a instanceof vt&&d===a.node.type){const g=e.nodeDOM(a.from),b={top:g.offsetTop,left:g.offsetLeft,width:g.offsetWidth,height:g.offsetHeight};if(!n.selection.eq(a)||p&&(p.width!==b.width||p.height!==b.height||p.top!==b.top||p.left!==b.left)){const S=s.tr;S.setMeta(mo,{rect:b,nodePosition:a.from}),e.dispatch(S),this.attachResize()}}else p&&(f.rect=null,f.nodePosition=-1)},destroy(){this.removeResize()}}),state:{init:()=>new $w("",null,null,-1),apply:(r,e)=>e.apply(r)},props:{handleDOMEvents:{mousedown:(r,e)=>((i,r,e)=>{const s=r.target.getAttribute(pp);if(!s)return!1;const a=mo.getState(i.state);r.preventDefault();const d=i.state.tr;function f(g){((i,r,e)=>{const n=mo.getState(i.state),{rect:s,dragging:a,nodePosition:d,activeHandle:f}=n;if(!a||!s)return;const p=i.nodeDOM(d),g=Kw[f];let k=g.x?(r.clientX-a.startX)*g.x+p.width:s.width,T=g.y?(r.clientY-a.startY)*g.y+p.height:s.height;if(e.lockRatio&&g.x&&g.y){let K=Math.min(k/p.width,T/p.height),fe=p.width*K,Re=p.height*K;a.startX=r.clientX-(k-fe)*g.x,a.startY=r.clientY-(T-Re)*g.y,k=fe,T=Re}else a.startX=g.x?r.clientX:a.startX,a.startY=g.y?r.clientY:a.startY;By(p,"width",k),By(p,"height",T),s.top=p.offsetTop,s.left=p.offsetLeft,s.width=p.offsetWidth,s.height=p.offsetHeight;const F=p.nextElementSibling;F.style.width=s.width+"px",F.style.height=s.height+"px",F.style.top=s.top+"px",F.style.left=s.left+"px"})(i,g,e)}return d.setMeta(mo,{setDragging:{startX:r.clientX,startY:r.clientY},activeHandle:s,rect:a.rect,nodePosition:a.nodePosition}),d.setMeta("addToHistory",!1),i.dispatch(d),r.view.addEventListener("mouseup",function p(g){g.view.removeEventListener("mouseup",p),g.view.removeEventListener("mousemove",f),(i=>{const{rect:r,dragging:e,nodePosition:n}=mo.getState(i.state);if(e&&r){const s=i.state.selection;if(s instanceof vt){const a=s.node.attrs,d=r.width,f=r.height;let p;if(I3.test(a.style||"")){const b=Tl(a.style,{style:"width",value:Gy,newValue:d+"px"}),{style:S}=Tl(b.style||"",{style:"height",value:Gy,newValue:f+"px"});p=Object.assign(Object.assign({},a),{style:S})}else p=Object.assign(Object.assign({},a),{width:d,height:f});const g=s.node.type.createAndFill(p);if(g){const b=i.state.tr;b.replaceWith(n,n+1,g),b.setSelection(vt.create(b.doc,n)),b.setMeta("commandName","image-resize"),b.setMeta("args",p),b.setMeta(mo,{setDragging:null,activeHandle:null,rect:r,nodePosition:n}),i.dispatch(b)}}}})(i)}),r.view.addEventListener("mousemove",f),!0})(r,e,i)},decorations(r){const e=r.selection,n=r.schema.nodes[i.node],s=mo.getState(r).rect;if(s&&e instanceof vt&&n===e.node.type){const a=document.createElement("div");a.className="k-editor-resize-handles-wrapper",a.style.width=s.width+"px",a.style.height=s.height+"px",a.style.top=s.top+"px",a.style.left=s.left+"px";for(let d=0;d<fv.length;d++){let f=document.createElement("div");f.className=Qc+" "+fv[d],f.setAttribute(pp,fv[d]),a.appendChild(f)}return an.create(r.doc,[Ni.widget(r.selection.from+1,a)])}return an.empty}}}),L3=new yr("caret-color");class U3{constructor(r,e){this.node=r,this.view=e,this.dom=document.createElement("div"),this.dom.className="k-editor-resize-wrap-element",this.table=this.dom.appendChild(document.createElement("table")),r.attrs[zn]&&this.renderColgroup(r.attrs[zn]);const n=this.table.appendChild(document.createElement("tbody"));this.setAttributes(this.table,r.attrs),this.resizeHandles=fv.map(s=>{const a=document.createElement("span");return a.className=Qc+" "+s,a.setAttribute(qu,s),a}),this.contentDOM=n}update(r){if(r.type!==this.node.type)return!1;const e=this.node;return this.node=r,r.attrs[Ms]?this.resizeHandles.forEach(n=>{this.dom.appendChild(n)}):Array.from(this.dom.children).filter(n=>n.classList.contains(Qc)).forEach(n=>n.remove()),this.setAttributes(this.table,r.attrs),e.attrs[zn]!==r.attrs[zn]&&this.renderColgroup(r.attrs[zn]),!0}ignoreMutation(r){return"attributes"===r.type&&(r.target===this.table||r.target.firstChild===this.table||this.colgroup&&this.colgroup.contains(r.target))}destroy(){this.node=void 0,this.view=void 0,this.table=void 0,this.colgroup=void 0,this.resizeHandles=void 0}renderColgroup(r){this.table&&this.table.firstChild&&"COLGROUP"===this.table.firstChild.nodeName&&this.table.removeChild(this.table.firstChild),r&&(this.colgroup=Xr(r),this.table.insertBefore(this.colgroup,this.table.firstChild))}setAttributes(r,e){const n=[zn,Ms];for(let s in e)if(s&&-1===n.indexOf(s)){const a=r.getAttribute(s),d=e[s];d&&d!==a?r.setAttribute(s,d):d||r.removeAttribute(s)}}}const B3=/^.+$/,bd=i=>(i||"").split(/\s*;\s*/).filter(Boolean).map(e=>{const n=e.split(/\s*:\s*/);return{[n[0]]:n[1]}}).reduce((e,n)=>Object.assign(Object.assign({},e),n),{});function ea(i,r,e){let n;if(new RegExp("[^-]?"+r+":").test(i.style||"")){const{style:s}=Tl(i.style||"",{style:r,value:B3,newValue:e});n=Object.assign(Object.assign({},i),{style:s})}else n=Object.assign(Object.assign({},i),i.style?{style:i.style.replace(/;$/,"")+"; "+r+": "+e+";"}:{style:r+": "+e+";"});return n}const ns=new yr("table-resize"),ki=new yr("table-column-resizing"),Ti=new yr("table-row-resizing");function pv(i,r){let e=!1;return e=e||i!==ns&&Boolean(ns.get(r))&&ns.getState(r).dragging,e=e||i!==ki&&Boolean(ki.get(r))&&ki.getState(r).dragging,e=e||i!==Ti&&Boolean(Ti.get(r))&&Ti.getState(r).dragging,e}function zy(i,r){let e=!1;return e=e||i!==ki&&Boolean(ki.get(r))&&ki.getState(r).activeHandle>-1,e=e||i!==Ti&&Boolean(Ti.get(r))&&Ti.getState(r).activeHandle>-1,e}function mv(i){return i&&i.firstChild&&"TABLE"===i.firstChild.nodeName?i.firstChild:i}function Zy(i){for(;i&&"TD"!==i.nodeName&&"TH"!==i.nodeName;)i=i.classList.contains("ProseMirror")?null:i.parentNode;return i}function Hy(i){const r=function G3(i){const r=Array.from(i&&i.rows||[]),e=Array.from(r&&r[0]&&r[0].cells||[]).map(s=>s.colSpan).reduce((s,a)=>s+a,0),n=r.map(()=>new Array(e));return r.forEach((s,a)=>{let d=0;Array.from(s.cells).forEach(f=>{for(let p=0;p<f.colSpan;p++){for(let g=0;g<f.rowSpan;g++){const b=n[a+g].findIndex((S,k)=>k>=d&&!S);n[a+g][b]=f}d++}})}),n}(i.closest("table"));let e=null;for(let n=0;n<r.length&&(r[n].forEach((a,d)=>{i===a&&(e={rowIndex:n,cellIndex:d})}),!e);n++);return e||{rowIndex:-1,cellIndex:-1}}function Vy(i,r){for(let e=i.depth;e>0;e--){let n=i.node(e);if(r(n))return{node:n,depth:e}}return null}function gv(i,r,e){const n=i.posAtCoords({left:r.clientX,top:r.clientY});if(!n)return-1;const s=i.state.doc.resolve(n.pos),a=Vy(s,b=>"table"===b.type.spec.tableRole);if(null===a)return-1;const d=s.start(a.depth),p=Wt.get(a.node);return d+p.map[p.width*e.rowIndex+e.cellIndex]}function z3(){const i=U3;return new Yr({key:ki,state:{init(s,a){return this.spec.props.nodeViews[Li(a.schema).table.name]=(d,f)=>new i(d,f),new wm(-1,null)},apply:(s,a)=>a.apply(s)},props:{attributes:s=>zy(ki,s)?null:ki.getState(s).activeHandle>-1?{class:"resize-cursor"}:null,handleDOMEvents:{mousemove:(s,a)=>(pv(ki,s.state)||function H3(i,r,e){let n=ki.getState(i.state);if(!n.dragging){let s=Zy(r.target),a=-1;if(s){const d=Hy(s);let{left:f,right:p}=s.getBoundingClientRect();Math.abs(r.clientX-f)<=e&&d.cellIndex>0?(d.cellIndex-=s.colSpan,a=gv(i,r,d)):p-r.clientX>0&&p-r.clientX<=e&&(a=gv(i,r,d))}a!==n.activeHandle&&qy(i,a)}}(s,a,5),!1),mouseleave:s=>(function V3(i){let r=ki.getState(i.state);r.activeHandle>-1&&!r.dragging&&qy(i,-1)}(s),!1),mousedown:(s,a)=>function J3(i,r,e){let n=ki.getState(i.state);if(-1===n.activeHandle||n.dragging)return!1;let s=i.state.doc.resolve(n.activeHandle);const a=s.parent,d=s.index();let f=0;for(let Ae=0;Ae<=d;Ae++)f+=a.child(Ae).attrs.colspan;const p=s.node(s.depth-1);let k,T,g=i.domAtPos(n.activeHandle),S=g.node.childNodes[g.offset].closest("table");if(p.attrs[zn])k=S.firstChild.children[f-1],k.style.width||(k.style.width=k.offsetWidth+"px");else{let Ae=0;for(let yt=0;yt<a.childCount;yt++)Ae+=a.child(yt).attrs.colspan;const Qe=document.createElement("colgroup"),Ut=new Array(Ae);for(let yt=0;yt<Ae;yt++)Ut[yt]=document.createElement("col"),Qe.appendChild(Ut[yt]);S.insertBefore(Qe,S.firstChild),k=Ut[d],k.style.width=k.offsetWidth+"px",T=Object.assign(Object.assign({},p.attrs),{[zn]:"<colgroup>"+Ut.reduce((yt,kn)=>yt+kn.outerHTML,"")+"</colgroup>"})}let F=parseFloat(k.style.width);const K=i.state.tr.setMeta(ki,{setDragging:{startX:r.clientX,startWidth:F}});if(!S.style.width){const Ae=Array.from(k.parentNode.children).map(Qe=>Qe.style.width);if(Ae.every(Boolean)){const Qe=Ae.reduce((Ut,yt)=>Ut+parseFloat(yt),0);T=ea(T||p.attrs,"width",Qe+"px")}}if(T){const Ae=s.posAtIndex(0,s.depth-1)-1;K.setNodeMarkup(Ae,null,T)}function fe(Ae){Ae.view.removeEventListener("mouseup",fe),Ae.view.removeEventListener("mousemove",Re);let Qe=ki.getState(i.state);if(Qe.dragging){const Ut=i.state.tr;(function q3(i,r,e,n){let s=i.state.doc.resolve(e),a=s.node(-1),d=s.start(-1);const f=s.posAtIndex(0,s.depth-1)-1,p=i.nodeDOM(d).closest("table");let g=a.attrs;if(a&&g[zn]){const S=p.firstChild;g=Object.assign(Object.assign({},g),{[zn]:S.outerHTML})}const b=p.style.width;p&&b&&bd(g.style).width!==b&&(g=ea(g,"width",b)),r.setNodeMarkup(f,null,g)})(i,Ut,Qe.activeHandle,Jy(Qe.dragging,Ae,e)),i.dispatch(Ut.setMeta(ki,{setDragging:null}))}}function Re(Ae){if(!Ae.which)return fe(Ae);let Qe=ki.getState(i.state),Ut=Jy(Qe.dragging,Ae,e);!function Y3(i,r,e,n){let s=i.state.doc.resolve(r),a=s.node(-1),d=s.start(-1),f=Wt.get(a).colCount(s.pos-d)+s.nodeAfter.attrs.colspan-1,p=i.domAtPos(s.start(-1)).node;"TABLE"!==p.nodeName&&(p=p.closest("table"));const g=p,S=Array.from(g.firstChild.children);if(S[f].style.width=e+"px",g.style.width){const k=S.map(T=>T.style.width);if(k.every(Boolean)){const T=k.reduce((F,K)=>F+parseFloat(K),0);g.style.width=T+"px"}}}(i,Qe.activeHandle,Ut)}return i.dispatch(K),r.view.addEventListener("mouseup",fe),r.view.addEventListener("mousemove",Re),r.preventDefault(),!0}(s,a,25)},decorations(s){if(!pv(ki,s)){let a=ki.getState(s);if(a.activeHandle>-1)return function K3(i,r){let e=[],n=i.doc.resolve(r),s=n.node(-1),a=Wt.get(s),d=n.start(-1);const f=[],p=r-d;let g=-1;for(let S=0;S<a.height;S++)f.push(a.map.slice(S*a.width,S*a.width+a.width)),-1===g&&(g=f[S].lastIndexOf(p));const b=[];return f.forEach(S=>{S[g]!==S[g+1]&&b.push(S[g])}),b.forEach(S=>{let k=d+S+s.nodeAt(S).nodeSize-1,T=document.createElement("div");T.className="column-resize-handle",e.push(Ni.widget(k,T))}),an.create(i.doc,e)}(s,a.activeHandle)}return an.empty},nodeViews:{}}})}class wm{constructor(r,e){this.activeHandle=r,this.dragging=e}apply(r){let e=this,n=r.getMeta(ki);if(n&&null!=n.setHandle)return new wm(n.setHandle,null);if(n&&void 0!==n.setDragging)return new wm(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&r.docChanged){let s=r.mapping.map(e.activeHandle,-1);(function Z3(i){return Boolean("row"===i.parent.type.spec.tableRole&&i.nodeAfter)})(r.doc.resolve(s))||(s=-1),e=new wm(s,e.dragging)}return e}}function Jy(i,r,e){return Math.max(e,i.startWidth+(r.clientX-i.startX))}function qy(i,r){const e=i.state.tr;e.setMeta("addToHistory",!1),e.setMeta(ki,{setHandle:r}),i.dispatch(e)}const Yy={southeast:!0,southwest:!0,northwest:!0,northeast:!0},Ky=Object.assign({east:!0,west:!0},Yy),$y=Object.assign({south:!0,north:!0},Yy);class Ww{constructor(r,e,n){this.activeHandle=r,this.dragging=e,this.nodePosition=n}apply(r){let n=r.getMeta(ns);return n?new Ww(n.activeHandle,n.setDragging,n.nodePosition):this}}const Wy=i=>{const e=Array.from(i.firstChild.children).map(p=>p.offsetWidth),n=Array.from(i.rows).map(p=>p.offsetHeight);return{width:e.reduce((p,g)=>p+g,0),height:n.reduce((p,g)=>p+g,0),colsWidth:e,rowsHeight:n,offsetWidth:i.offsetWidth,offsetHeight:i.offsetHeight}},X3=(i,r)=>{const n=r.target.getAttribute(qu);if(!n)return!1;const s=ns.getState(i.state);r.preventDefault();const a=i.state.tr;a.setMeta(ns,{setDragging:{startX:r.clientX,startY:r.clientY},activeHandle:n,nodePosition:s.nodePosition}),a.setMeta("addToHistory",!1),((i,r,e)=>{const n=i.state.doc.nodeAt(e),s=mv(i.nodeDOM(e)),{width:a,height:d,colsWidth:f,rowsHeight:p,offsetWidth:g,offsetHeight:b}=Wy(s),S=s.firstChild,k=Array.from(S&&S.children||[]);let T=!1;k.forEach((fe,Re)=>{fe.style.width&&!/%$/.test(fe.style.width)&&(fe.style.width=100*f[Re]/a+"%",T=!0)});let F=!1;n.forEach((fe,Re,Ae)=>{const Qe=bd(fe.attrs.style).height;Qe&&!/%$/.test(Qe)&&(r.setNodeMarkup(e+Re+1,null,ea(fe.attrs,"height",100*p[Ae]/d+"%")),F=!0)});let K=n.attrs;bd(K.style).width!==g+"px"&&(K=ea(K,"width",g+"px")),T&&(K[zn]=S.outerHTML),F&&(K=ea(K,"height",b+"px")),(T||F)&&r.setNodeMarkup(e,null,K)})(i,a,s.nodePosition),i.dispatch(a);const d=r.view||window;function f(g){((i,r)=>{const e=ns.getState(i.state),{dragging:n,nodePosition:s,activeHandle:a}=e;if(s<0||!n)return;let d=mv(i.nodeDOM(s));const f=d.getBoundingClientRect(),p=Kw[a],g=(r.clientX-n.startX)*p.x,b=(r.clientY-n.startY)*p.y,k=(d.ownerDocument&&d.ownerDocument.defaultView||window).getComputedStyle(d),T=/px/.test(k.width)?parseFloat(k.width):d.offsetWidth,F=/px/.test(k.height)?parseFloat(k.height):d.offsetHeight,K=p.x?g+T:f.width,fe=p.y?b+F:f.height;n.startX=p.x?r.clientX:n.startX,n.startY=p.y?r.clientY:n.startY,Ky[a]&&(d.style.width=K+"px"),$y[a]&&(d.style.height=fe+"px")})(i,g)}return d.addEventListener("mouseup",function p(g){d.removeEventListener("mouseup",p),d.removeEventListener("mousemove",f),(i=>{const{dragging:r,nodePosition:e,activeHandle:n}=ns.getState(i.state);if(r){const s=i.state.doc.nodeAt(e),a=mv(i.nodeDOM(e)),d=Wy(a);if(s){const f=d.offsetWidth+"px",p=d.offsetHeight+"px",g=i.state.tr;let b=s.attrs;const S=bd(b.style);Ky[n]&&a.style.width&&S.width!==f&&(b=ea(b,"width",f)),$y[n]&&a.style.height&&S.height!==p&&(b=ea(b,"height",p)),b=((i,r,e,n)=>{const s=i.state.doc.nodeAt(e),a=mv(i.nodeDOM(e)),f=(a.ownerDocument&&a.ownerDocument.defaultView||window).getComputedStyle,p=Array.from(a.rows);s.forEach((T,F,K)=>{const fe=bd(T.attrs.style).height;fe&&!/px$/.test(fe)&&r.setNodeMarkup(e+F+1,null,ea(T.attrs,"height",f(p[K]).height))});const g=a.firstChild,b=Array.from(g&&g.children||[]);let S=!1;b.forEach((T,F)=>{T.style.width&&!/px$/.test(T.style.width)&&(T.style.width=f(b[F]).width,S=!0)});let k=Object.assign({},n);return S&&(k[zn]=g.outerHTML),k})(i,g,e,b),g.setNodeMarkup(e,null,b),g.setMeta("commandName","node-resize"),g.setMeta("args",b),g.setMeta(ns,{setDragging:null,activeHandle:null,nodePosition:e}),i.dispatch(g)}}})(i)}),d.addEventListener("mousemove",f),!0},eM=(i={node:"table"})=>new Yr({key:ns,view:r=>({selectedNode(e,n){const s=e.selection;if(s instanceof vt&&n===s.node.type&&s instanceof vt)return{node:s.node,pos:s.from};const d=Vy(s.$from,p=>p.type===n),f=d&&d.node;return f?{node:f,pos:s.$from.start(d.depth)-1}:null},update(e,n){const s=e.state,a=s.schema.nodes[i.node],d=this.selectedNode(s,a),f=this.selectedNode(n,a);if((d||!f||n.doc.eq(e.state.doc))&&(d||f)){const p=s.tr;p.setMeta("addToHistory",!1),d&&f&&d.pos!==f.pos?(p.setMeta(ns,{nodePosition:d.pos}),p.setNodeMarkup(f.pos,a,Object.assign(Object.assign({},f.node.attrs),{[Ms]:!1})),p.setNodeMarkup(d.pos,a,Object.assign(Object.assign({},d.node.attrs),{[Ms]:!0})),e.dispatch(p)):d&&f&&d.pos===f.pos&&!d.node.attrs[Ms]&&!s.selection.eq(n.selection)?(p.setMeta(ns,{nodePosition:d.pos}),e.dispatch(p.setNodeMarkup(d.pos,a,Object.assign(Object.assign({},d.node.attrs),{[Ms]:!0})))):d&&!f?(p.setMeta(ns,{nodePosition:d.pos}),e.dispatch(p.setNodeMarkup(d.pos,a,Object.assign(Object.assign({},d.node.attrs),{[Ms]:!0})))):!d&&f&&(p.setMeta(ns,{nodePosition:-1}),e.dispatch(p.setNodeMarkup(f.pos,a,Object.assign(Object.assign({},f.node.attrs),{[Ms]:!1}))))}}}),state:{init:()=>new Ww("",null,-1),apply:(r,e)=>e.apply(r)},props:{handleDOMEvents:{mousedown:(r,e)=>X3(r,e)}}});class tM{ignoreMutation(r){return"attributes"===r.type&&"style"===r.attributeName&&"TR"===r.target.nodeName}}class km{constructor(r,e){this.activeHandle=r,this.dragging=e}apply(r){let e=this,n=r.getMeta(Ti);if(n&&null!=n.setHandle)return new km(n.setHandle,null);if(n&&void 0!==n.setDragging)return new km(e.activeHandle,n.setDragging);if(e.activeHandle>-1){let s=r.mapping.map(e.activeHandle,-1);(function iM(i){return"row"===i.parent.type.spec.tableRole&&i.nodeAfter})(r.doc.resolve(s))||(s=null),e=new km(s,e.dragging)}return e}}function jy(i,r){const e=i.state.tr;e.setMeta("addToHistory",!1),e.setMeta(Ti,{setHandle:r}),i.dispatch(e)}class hi extends Zt{constructor(r){super(r,r)}map(r,e){let n=r.resolve(e.map(this.head));return hi.valid(n)?new hi(n):Zt.near(n)}content(){return st.empty}eq(r){return r instanceof hi&&r.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(r,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new hi(r.resolve(e.pos))}getBookmark(){return new jw(this.anchor)}static valid(r){let e=r.parent;if(e.isTextblock||!function hM(i){for(let r=i.depth;r>=0;r--){let e=i.index(r),n=i.node(r);if(0!=e)for(let s=n.child(e-1);;s=s.lastChild){if(0==s.childCount&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}else if(n.type.spec.isolating)return!0}return!0}(r)||!function fM(i){for(let r=i.depth;r>=0;r--){let e=i.indexAfter(r),n=i.node(r);if(e!=n.childCount)for(let s=n.child(e);;s=s.firstChild){if(0==s.childCount&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}else if(n.type.spec.isolating)return!0}return!0}(r))return!1;let n=e.type.spec.allowGapCursor;if(null!=n)return n;let s=e.contentMatchAt(r.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(r,e,n=!1){e:for(;;){if(!n&&hi.valid(r))return r;let s=r.pos,a=null;for(let d=r.depth;;d--){let f=r.node(d);if(e>0?r.indexAfter(d)<f.childCount:r.index(d)>0){a=f.child(e>0?r.indexAfter(d):r.index(d)-1);break}if(0==d)return null;s+=e;let p=r.doc.resolve(s);if(hi.valid(p))return p}for(;;){let d=e>0?a.firstChild:a.lastChild;if(!d){if(a.isAtom&&!a.isText&&!vt.isSelectable(a)){r=r.doc.resolve(s+a.nodeSize*e),n=!1;continue e}break}a=d,s+=e;let f=r.doc.resolve(s);if(hi.valid(f))return f}return null}}}hi.prototype.visible=!1,hi.findFrom=hi.findGapCursorFrom,Zt.jsonID("gapcursor",hi);class jw{constructor(r){this.pos=r}map(r){return new jw(r.map(this.pos))}resolve(r){let e=r.resolve(this.pos);return hi.valid(e)?new hi(e):Zt.near(e)}}const mM=Up({ArrowLeft:_v("horiz",-1),ArrowRight:_v("horiz",1),ArrowUp:_v("vert",-1),ArrowDown:_v("vert",1)});function _v(i,r){const e="vert"==i?r>0?"down":"up":r>0?"right":"left";return function(n,s,a){let d=n.selection,f=r>0?d.$to:d.$from,p=d.empty;if(d instanceof en){if(!a.endOfTextblock(e)||0==f.depth)return!1;p=!1,f=n.doc.resolve(r>0?f.after():f.before())}let g=hi.findGapCursorFrom(f,r,p);return!!g&&(s&&s(n.tr.setSelection(new hi(g))),!0)}}function gM(i,r,e){if(!i||!i.editable)return!1;let n=i.state.doc.resolve(r);if(!hi.valid(n))return!1;let s=i.posAtCoords({left:e.clientX,top:e.clientY});return!(s&&s.inside>-1&&vt.isSelectable(i.state.doc.nodeAt(s.inside))||(i.dispatch(i.state.tr.setSelection(new hi(n))),0))}function _M(i,r){if("insertCompositionText"!=r.inputType||!(i.state.selection instanceof hi))return!1;let{$from:e}=i.state.selection,n=e.parent.contentMatchAt(e.index()).findWrapping(i.state.schema.nodes.text);if(!n)return!1;let s=Me.empty;for(let d=n.length-1;d>=0;d--)s=Me.from(n[d].createAndFill(null,s));let a=i.state.tr.replace(e.pos,e.pos,new st(s,0,0));return a.setSelection(en.near(a.doc.resolve(e.pos+1))),i.dispatch(a),!1}function vM(i){if(!(i.selection instanceof hi))return null;let r=document.createElement("div");return r.className="ProseMirror-gapcursor",an.create(i.doc,[Ni.widget(i.selection.head,r,{key:"gapcursor"})])}const Tm=/^table$/,Qy=/^table_row$/,xM=/^table_cell|table_header$/,jl=(i,r)=>{const e=i.$head;for(let n=e.depth;n>0;n--){const s=e.node(n);if(r.test(s.type.name))return{pos:e.before(n),node:s}}return null},Xy=(i,r)=>function m(i,r){if(!gs(i))return!1;if(r){let e=Ps(i);r(h(i.tr,e,e.top))}return!0}(i,r&&(n=>{const s=jl(n.selection,Qy),a=jl(n.selection,Tm);if(s&&a&&s.node.attrs[Is]){let d=0;for(let g=0;g<a.node.nodeSize;g++)if(a.node.child(g).eq(s.node)){d=g;break}const f=a.node.child(d-1);n.setNodeMarkup(s.pos-f.nodeSize,void 0,{[Is]:s.node.attrs[Is]})}return r(n)})),e2=(i,r)=>function _(i,r){if(!gs(i))return!1;if(r){let e=Ps(i);r(h(i.tr,e,e.bottom))}return!0}(i,r&&(n=>{const s=jl(n.selection,Qy);return s&&s.node.attrs[Is]&&n.setNodeMarkup(s.pos+s.node.nodeSize,void 0,{[Is]:s.node.attrs[Is]}),r(n)})),t2=(i,r)=>{if(!i)return-1;const e=Wt.get(i.node),n=jl(r,xM),s=e.map.indexOf(n.pos-i.pos-1);let a=-1;return-1!==s&&(a=s%e.width),a},n2=(i,r,e)=>{const n=t2(r,i.selection),s=Xr(r.node.attrs[zn]);s.insertBefore(s.ownerDocument.createElement("col"),s.children[n+e]),i.setNodeMarkup(r.pos,null,Object.assign(Object.assign({},r.node.attrs),{[zn]:s.outerHTML}))},r2=(i,r)=>function Oy(i,r){if(!gs(i))return!1;if(r){let e=Ps(i);r(Zw(i.tr,e,e.left))}return!0}(i,r&&(n=>{const s=jl(n.selection,Tm);return s.node.attrs[zn]&&n2(n,s,-1),r(n)})),s2=(i,r)=>function o(i,r){if(!gs(i))return!1;if(r){let e=Ps(i);r(Zw(i.tr,e,e.right))}return!0}(i,r&&(n=>{const s=jl(n.selection,Tm);return s.node.attrs[zn]&&n2(n,s,1),r(n)})),o2=(i,r)=>{const e=t2(jl(i.selection,Tm),i.selection);return function l(i,r){if(!gs(i))return!1;if(r){let e=Ps(i),n=i.tr;if(0==e.left&&e.right==e.map.width)return!1;for(let s=e.right-1;c(n,e,s),s!=e.left;s--)e.table=e.tableStart?n.doc.nodeAt(e.tableStart-1):n.doc,e.map=Wt.get(e.table);r(n)}return!0}(i,r&&(s=>{const a=jl(s.selection,Tm);return a.node.attrs[zn]&&((i,r,e)=>{const n=Xr(r.node.attrs[zn]);n.removeChild(n.children[e]),i.setNodeMarkup(r.pos,null,Object.assign(Object.assign({},r.node.attrs),{[zn]:n.outerHTML}))})(s,a,e),r(s)}))};var go=Oe(9646),a2=Oe(3099),ym=Oe(3900);function SM(i,r){1&i&&t.Hsn(0,0,["*ngIf","!actions"])}function EM(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(s){const d=t.CHM(e).$implicit,f=t.oxw(2);return t.KtG(f.onButtonClick(d,s))}),t._uU(1),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.Q6J("ngClass",n.buttonClass(e)),t.uIk("aria-label",e.text),t.xp6(1),t.hij(" ",e.text," ")}}function wM(i,r){if(1&i&&(t.ynx(0),t.YNc(1,EM,2,3,"button",4),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.actionsArray)}}function kM(i,r){}const Qw=["*"],TM=["dialog"];function yM(i,r){if(1&i&&(t.TgZ(0,"kendo-dialog-titlebar",8),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.Q6J("closeTitle",e.closeTitle)("id",e.titleId),t.xp6(1),t.Oqu(e.title)}}function DM(i,r){1&i&&t.Hsn(0,0,["*ngIf","!title"])}function AM(i,r){1&i&&t.Hsn(0,1,["*ngIf","!contentTemplate"])}function OM(i,r){}function IM(i,r){if(1&i&&t.YNc(0,OM,0,0,"ng-template",9),2&i){const e=t.oxw();t.Q6J("ngTemplateOutlet",e.contentTemplate)}}function MM(i,r){1&i&&t.Hsn(0,2,["*ngIf","!actions"])}function RM(i,r){if(1&i&&t._UZ(0,"kendo-dialog-actions",10),2&i){const e=t.oxw();t.Q6J("actions",e.actions)("layout",e.actionsLayout)}}const NM=[[["kendo-dialog-titlebar"]],"*",[["kendo-dialog-actions"]]],FM=["kendo-dialog-titlebar","*","kendo-dialog-actions"];function LM(i,r){1&i&&t.Hsn(0,0,["*ngIf","!template"])}function PM(i,r){}const UM=function(i){return{$implicit:i}};function BM(i,r){if(1&i&&t.YNc(0,PM,0,0,"ng-template",1),2&i){const e=t.oxw();t.Q6J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",t.VKq(2,UM,e.service))}}function GM(i,r){if(1&i&&(t.TgZ(0,"kendo-window-titlebar",5)(1,"div",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7),t._UZ(4,"button",8)(5,"button",9)(6,"button",10)(7,"button",11),t.qZA()()),2&i){const e=t.oxw();t.Q6J("template",e.titleBarTemplate)("id",e.titleId),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.uIk("title",e.minimizeButtonTitle)("aria-label",e.minimizeButtonTitle),t.xp6(1),t.uIk("title",e.maximizeButtonTitle)("aria-label",e.maximizeButtonTitle),t.xp6(1),t.uIk("title",e.restoreButtonTitle)("aria-label",e.restoreButtonTitle),t.xp6(1),t.uIk("title",e.closeButtonTitle)("aria-label",e.closeButtonTitle)}}function zM(i,r){1&i&&t.Hsn(0,0,["*ngIf","!showDefaultTitleBar"])}function ZM(i,r){1&i&&t.Hsn(0,1,["*ngIf","!contentTemplate"])}function HM(i,r){}function VM(i,r){if(1&i&&t.YNc(0,HM,0,0,"ng-template",13),2&i){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.contentTemplate)}}function JM(i,r){if(1&i&&(t.TgZ(0,"div",12),t.YNc(1,ZM,1,0,"ng-content",2),t.YNc(2,VM,1,1,null,2),t.qZA()),2&i){const e=t.oxw();t.Q6J("hidden","minimized"===e.state&&e.keepContent),t.xp6(1),t.Q6J("ngIf",!e.contentTemplate),t.xp6(1),t.Q6J("ngIf",e.contentTemplate)}}function qM(i,r){1&i&&t._UZ(0,"div",15),2&i&&t.Q6J("direction",r.$implicit)}function YM(i,r){if(1&i&&t.YNc(0,qM,1,1,"div",14),2&i){const e=t.oxw();t.Q6J("ngForOf",e.resizeDirections)}}const KM=[[["kendo-window-titlebar"]],"*"],$M=["kendo-window-titlebar","*"],Ht=i=>null!=i,l2=i=>String(i).trim().split(" "),jM=/^(?:a|input|select|textarea|button|object)$/i;var Tn=(()=>(function(i){i[i.esc=27]="esc",i[i.tab=9]="tab",i[i.enter=13]="enter",i[i.space=32]="space",i[i.ctrl=17]="ctrl",i[i.shift=16]="shift",i[i.left=37]="left",i[i.up=38]="up",i[i.right=39]="right",i[i.down=40]="down"}(Tn||(Tn={})),Tn))();const c2="k-dialog-wrapper k-dialog-buttongroup k-dialog-action",wh=(i,r)=>{const e=l2(r);return Boolean(l2(i.className).find(n=>e.indexOf(n)>=0))},d2=(i,r=!0)=>{if(i.tagName){const e=i.tagName.toLowerCase(),n=i.getAttribute("tabIndex"),s=null!==n&&!isNaN(n)&&n>-1;let a=!1;return a=jM.test(e)?!i.disabled:s,a&&(!r||(i=>{const r=i.getBoundingClientRect();return!(!r.width||!r.height)&&"hidden"!==window.getComputedStyle(i).visibility})(i))}return!1},u2=(i,r,e)=>{for(const n in i)n&&r.setAttribute(e,n,i[n])},Dm=i=>oR(i)?tR(i):Xw(i)?nR(i):Array.isArray(i)?iR(i):void 0,tR=i=>{const r=[];return Object.keys(i).forEach(e=>{const n=ek(e);i[e]&&n[0]&&r.push(...n)}),r},nR=i=>{const r=[];return ek(i).forEach(n=>{r.push(n)}),r},iR=i=>{const r=[];return i.forEach(e=>{const n=ek(e);n[0]&&r.push(...n)}),r},rR=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"].join(","),h2=({originalEvent:i})=>{i.stopPropagation(),i.preventDefault()},sR=["n","e","s","w","se","sw","ne","nw"],Am=["top","left","width","height"],Xw=i=>i instanceof String||"string"==typeof i,oR=i=>Ht(i)&&!Array.isArray(i)&&"object"==typeof i,kh=i=>i+((i=>"number"==typeof i&&isFinite(i))(i)?"px":""),ek=i=>i.trim().replace(/\s+/g," ").split(" ");let Gs=(()=>{class i{constructor(e){this.el=e,this.layout="stretched",this.action=new t.vpe,this.buttonGroupClassName=!0}set actions(e){if(e instanceof t.Rgc)this.actionsTemplate=e;else{if(!Array.isArray(e))throw new Error('"actions" must be either TemplateRef or DialogAction[] instance.');this.actionsArray=e}}get className(){return"stretched"===this.layout}onButtonClick(e,n){this.action.emit(e)}buttonClass(e){let n=["k-button k-button-md k-rounded-md"];const s=e.fillMode?e.fillMode:"solid",a=e.themeColor?e.themeColor:"base",d=e.cssClass?Dm(e.cssClass):[];return n.push(`k-button-${s} k-button-${s}-${a}`),d.length>0&&(n=n.concat(d)),n.join(" ")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-dialog-actions"]],hostVars:6,hostBindings:function(e,n){2&e&&t.ekj("k-dialog-buttongroup",n.buttonGroupClassName)("k-actions",n.buttonGroupClassName)("k-actions-stretched",n.className)},inputs:{actions:"actions",layout:"layout"},outputs:{action:"action"},ngContentSelectors:Qw,decls:4,vars:4,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"],["actionTemplate",""],["type","button",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",3,"ngClass","click"]],template:function(e,n){if(1&e&&(t.F$t(),t.YNc(0,SM,1,0,"ng-content",0),t.YNc(1,wM,2,1,"ng-container",1),t.YNc(2,kM,0,0,"ng-template",2,3,t.W1O)),2&e){const s=t.MAs(3);t.Q6J("ngIf",!n.actions),t.xp6(1),t.Q6J("ngIf",n.actionsArray)("ngIfElse",s),t.xp6(1),t.Q6J("ngTemplateOutlet",n.actionsTemplate)}},dependencies:[X.O5,X.sg,X.mk,X.tP],encapsulation:2}),i})();class tk{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}const f2=new t.OlP("Dialog LocalizationService");let p2=(()=>{class i extends Ge{constructor(e,n,s,a){super(e,n,s),this.dialogLocalization=a}get(e){return this.dialogLocalization?this.dialogLocalization.get(e):super.get(e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Et),t.LFG(pa,8),t.LFG(yo,8),t.LFG(f2,8))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),vv=(()=>{class i extends ws{}return i.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(i)))(n||i)}}(),i.\u0275dir=t.lG2({type:i,selectors:[["kendo-dialog-messages-base"]],inputs:{closeTitle:"closeTitle",restoreTitle:"restoreTitle",maximizeTitle:"maximizeTitle",minimizeTitle:"minimizeTitle"},features:[t.qOj]}),i})(),bv=(()=>{class i extends vv{constructor(e){super(),this.service=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDialogLocalizedMessages",""],["","kendoWindowLocalizedMessages",""],["","kendoDialogTitleBarLocalizedMessages",""]],features:[t._Bn([{provide:vv,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj]}),i})(),_s=(()=>{class i{constructor(e,n,s){this.zone=e,this.hostElement=n,this.localizationService=s,this.close=new t.vpe}get className(){return!0}get closeButtonTitle(){return this.closeTitle||this.localizationService.get("closeTitle")}ngAfterViewInit(){this.zone.onStable.pipe((0,gn.q)(1)).subscribe(()=>{this.hostElement.nativeElement.querySelector(".k-dialog-title").setAttribute("id",this.id)})}onCloseClick(e){e.preventDefault();const n=new tk;this.close.emit(n)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(Ge,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-dialog-titlebar"]],hostVars:4,hostBindings:function(e,n){2&e&&t.ekj("k-window-titlebar",n.className)("k-dialog-titlebar",n.className)},inputs:{id:"id",closeTitle:"closeTitle"},outputs:{close:"close"},features:[t._Bn([p2,{provide:Ge,useExisting:p2},{provide:Et,useValue:"kendo.dialog"}])],ngContentSelectors:Qw,decls:6,vars:2,consts:function(){let r;return r=$localize`:kendo.dialog.closeTitle|The title of the close button:Close`,[["kendoDialogTitleBarLocalizedMessages","","closeTitle",r],[1,"k-window-title","k-dialog-title"],[1,"k-window-actions","k-dialog-actions"],["role","button",1,"k-button","k-button-md","k-rounded-md","k-button-flat","k-button-flat-base","k-icon-button","k-window-action","k-dialog-action",3,"click"],[1,"k-button-icon","k-icon","k-i-x"]]},template:function(e,n){1&e&&(t.F$t(),t.ynx(0,0),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(a){return n.onCloseClick(a)}),t._UZ(5,"span",4),t.qZA()(),t.BQk()),2&e&&(t.xp6(4),t.uIk("title",n.closeButtonTitle)("aria-label",n.closeButtonTitle))},dependencies:[bv],encapsulation:2}),i})();const m2={name:"@progress/kendo-angular-dialog",productName:"Kendo UI for Angular",productCodes:["KENDOUIANGULAR","KENDOUICOMPLETE"],publishDate:1668698060,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning"};class xv{}const hR={duration:300,type:"translate"};let g2=(()=>{class i{constructor(e,n,s,a,d,f){this.wrapper=e,this.renderer=n,this.cdr=a,this.ngZone=d,this.builder=f,this.actionsLayout="stretched",this.animation=!0,this.titleId=null,this.contentId=null,this.action=new t.vpe,this.close=new t.vpe,this.tabIndex=0,this.subscriptions=[],this.domSubs=new cn.w0,wt(m2),this.direction=s.rtl?"rtl":"ltr",this.subscriptions.push(s.changes.subscribe(({rtl:p})=>this.direction=p?"rtl":"ltr")),this.titleId=this.generateTitleId(),this.contentId=this.generateContentId()}set htmlAttributes(e){u2(e,this.renderer,this.wrapper.nativeElement);const n=this.wrapper.nativeElement,s=n.getAttribute("dir"),a=n.getAttribute("tabindex");this.direction!==s&&s&&(this.direction=s),this.tabIndex!==a&&a&&(this.tabIndex=a),this._htmlAttributes=e}get htmlAttributes(){return this._htmlAttributes}set cssClass(e){this.setServiceClasses(this._cssClass,e),this._cssClass=e}get cssClass(){return this._cssClass}get dir(){return this.direction}ngAfterContentInit(){this.bubble("close",this.titlebarContent.first),this.renderer.setAttribute(this.wrapper.nativeElement.querySelector(".k-dialog"),"aria-describedby",this.contentId),this.titlebarContent.first?this.titlebarContent.first.id=this.titleId:this.subscriptions.push(this.titlebarContent.changes.subscribe(()=>{Ht(this.titlebarContent.first)&&(this.titlebarContent.first.id=this.titleId,this.ngZone.onStable.pipe((0,gn.q)(1)).subscribe(()=>{this.bubble("close",this.titlebarContent.first),this.renderer.setAttribute(this.wrapper.nativeElement.querySelector(".k-dialog"),"aria-labelledby",this.titleId)}))}))}ngAfterViewInit(){this.handleInitialFocus(),this.bubble("close",this.titlebarView.first),this.bubble("action",this.actionsView),this.titlebarView.first||this.titlebarContent.first?this.renderer.setAttribute(this.wrapper.nativeElement.querySelector(".k-dialog"),"aria-labelledby",this.titleId):this.subscriptions.push(this.titlebarView.changes.subscribe(()=>{Ht(this.titlebarView.first)&&(this.titlebarView.first.id=this.titleId,this.ngZone.onStable.pipe((0,gn.q)(1)).subscribe(()=>{this.bubble("close",this.titlebarView.first),this.renderer.setAttribute(this.wrapper.nativeElement.querySelector(".k-dialog"),"aria-labelledby",this.titleId)}))})),this.initDomEvents()}ngOnInit(){this.animation&&((i,r,e,n)=>{let s=r;"boolean"!=typeof i&&(s=i,s.duration=s.duration?s.duration:r.duration);const a=function cR(i,r,e){switch(e){case"slide":const n="left"===r||"right"===r?"translateX":"translateY",a=0;return[(0,St.oB)({transform:`${n}(${"right"===r||"down"===r?-100:100}%)`}),(0,St.jt)(`${i}ms ease-in`,(0,St.oB)({transform:`${n}(${a}%)`}))];case"expand":const d="up"===r||"down"===r?"scaleY":"scaleX",p=1;let g;return g="down"===r?"top":"left"===r?"right":"right"===r?"left":"bottom",[(0,St.oB)({transform:`${d}(0)`,transformOrigin:g}),(0,St.jt)(`${i}ms ease-in`,(0,St.oB)({transform:`${d}(${p})`}))];case"zoom":const S=1;return[(0,St.jt)(i,(0,St.F4)([(0,St.oB)({transform:"scale(0)"}),(0,St.oB)({transform:`scale(${S})`})]))];case"fade":const T=1;return[(0,St.jt)(i,(0,St.F4)([(0,St.oB)({opacity:"0"}),(0,St.oB)({opacity:`${T}`})]))];default:return[(0,St.oB)({transform:"translate(0, -10%)"}),(0,St.jt)(`${i}ms cubic-bezier(.2, 1, .2, 1)`)]}}(s.duration,s.direction,s.type);((i,r,e)=>{let s=i.build(r).create(e);return s.onDone(()=>{s&&(s.destroy(),s=null)}),s})(n,a,e).play()})(this.animation,hR,this.dialog.nativeElement,this.builder),this.renderer.removeAttribute(this.wrapper.nativeElement,"title"),this.cdr.detectChanges()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions=[],this.domSubs&&this.domSubs.unsubscribe()}focus(){const e=this.wrapper.nativeElement;Ht(e)&&e.focus()}initDomEvents(){!this.wrapper||this.ngZone.runOutsideAngular(()=>{this.domSubs.add(this.renderer.listen(this.wrapper.nativeElement,"keydown",e=>{this.onKeyDown(e)}))})}onKeyDown(e){const n=e.target,s=n.parentElement;(wh(n,c2)||wh(s,c2))&&e.keyCode===Tn.esc&&this.ngZone.run(()=>{this.close.emit(new xv)}),wh(n,"k-button")&&wh(s,"k-dialog-buttongroup")&&(e.keyCode===Tn.left||e.keyCode===Tn.right)&&this.ngZone.run(()=>{this.handleActionButtonFocus(s,e.keyCode)}),e.keyCode===Tn.tab&&this.ngZone.run(()=>{this.keepFocusWithinComponent(n,e)})}setServiceClasses(e,n){const s=this.wrapper.nativeElement;e&&Dm(e).forEach(a=>{this.renderer.removeClass(s,a)}),n&&Dm(n).forEach(a=>{this.renderer.addClass(s,a)})}handleInitialFocus(){const e=this.wrapper.nativeElement,n=this.findPrimary(e);if(this.autoFocusedElement){const s=e.querySelector(this.autoFocusedElement);s&&s.focus()}else this.shouldFocusPrimary(n)?n.focus():e.focus()}findPrimary(e){return(i=>{for(let r=i.length-1;r>=0;r--){const e=i[r].classList;for(let n=0;n<e.length;n++)if(e[n].endsWith("-primary"))return i[r]}})(e.querySelectorAll(".k-actions .k-button"))}handleActionButtonFocus(e,n){const s=this.getAllFocusableChildren(e);for(let a=0;a<s.length;a++)if(s[a]===document.activeElement){if(n===Tn.left&&a>0){s[a-1].focus();break}if(n===Tn.right&&a<s.length-1){s[a+1].focus();break}}}keepFocusWithinComponent(e,n){const s=this.wrapper.nativeElement,[a,d]=this.getFirstAndLastFocusable(s),p=n.shiftKey&&e===a;!n.shiftKey&&e===d&&(n.preventDefault(),a.focus()),p&&(n.preventDefault(),d.focus())}shouldFocusPrimary(e){return Ht(e)&&d2(e)}getAllFocusableChildren(e){return e.querySelectorAll(rR)}getFirstAndLastFocusable(e){const n=this.getAllFocusableChildren(e);return[n.length>0?n[0]:e,n.length>0?n[n.length-1]:e]}generateTitleId(){return"kendo-dialog-title-"+Math.ceil(1e6*Math.random()).toString()}generateContentId(){return"kendo-dialog-content-"+Math.ceil(1e6*Math.random()).toString()}get wrapperClass(){return!0}get styles(){const e={};return this.width&&(e.width=kh(this.width)),this.height&&(e.height=kh(this.height)),this.minWidth&&(e.minWidth=kh(this.minWidth)),this.maxWidth&&(e.maxWidth=kh(this.maxWidth)),this.minHeight&&(e.minHeight=kh(this.minHeight)),this.maxHeight&&(e.maxHeight=kh(this.maxHeight)),e}bubble(e,n){if(n){const a=n[e].subscribe(d=>this[e].emit(d));this.subscriptions.push(a)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Ge),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(St._j))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-dialog"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,_s,4),2&e){let a;t.iGM(a=t.CRH())&&(n.titlebarContent=a)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Gs,5),t.Gf(TM,7),t.Gf(_s,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.actionsView=s.first),t.iGM(s=t.CRH())&&(n.dialog=s.first),t.iGM(s=t.CRH())&&(n.titlebarView=s)}},hostVars:4,hostBindings:function(e,n){2&e&&(t.uIk("dir",n.dir)("tabIndex",n.tabIndex),t.ekj("k-dialog-wrapper",n.wrapperClass))},inputs:{actions:"actions",actionsLayout:"actionsLayout",autoFocusedElement:"autoFocusedElement",title:"title",width:"width",minWidth:"minWidth",maxWidth:"maxWidth",height:"height",minHeight:"minHeight",maxHeight:"maxHeight",animation:"animation"},outputs:{action:"action",close:"close"},exportAs:["kendoDialog"],features:[t._Bn([Ge,{provide:f2,useExisting:Ge},{provide:Et,useValue:"kendo.dialog"}])],ngContentSelectors:FM,decls:11,vars:9,consts:function(){let r;return r=$localize`:kendo.dialog.closeTitle|The title of the close button:Close`,[["kendoDialogLocalizedMessages","","closeTitle",r],[1,"k-overlay"],["role","dialog","aria-modal","true",1,"k-window","k-dialog",3,"ngStyle"],["dialog",""],[3,"closeTitle","id",4,"ngIf"],[4,"ngIf"],[1,"k-content","k-window-content","k-dialog-content",3,"id"],[3,"actions","layout",4,"ngIf"],[3,"closeTitle","id"],[3,"ngTemplateOutlet"],[3,"actions","layout"]]},template:function(e,n){1&e&&(t.F$t(NM),t.ynx(0,0),t._UZ(1,"div",1),t.TgZ(2,"div",2,3),t.YNc(4,yM,2,3,"kendo-dialog-titlebar",4),t.YNc(5,DM,1,0,"ng-content",5),t.TgZ(6,"div",6),t.YNc(7,AM,1,0,"ng-content",5),t.YNc(8,IM,1,1,null,5),t.qZA(),t.YNc(9,MM,1,0,"ng-content",5),t.YNc(10,RM,1,2,"kendo-dialog-actions",7),t.qZA(),t.BQk()),2&e&&(t.xp6(1),t.Q6J("@overlayAppear",void 0),t.xp6(1),t.Q6J("ngStyle",n.styles),t.xp6(2),t.Q6J("ngIf",n.title),t.xp6(1),t.Q6J("ngIf",!n.title),t.xp6(1),t.Q6J("id",n.contentId),t.xp6(1),t.Q6J("ngIf",!n.contentTemplate),t.xp6(1),t.Q6J("ngIf",n.contentTemplate),t.xp6(1),t.Q6J("ngIf",!n.actions),t.xp6(1),t.Q6J("ngIf",n.actions))},dependencies:[_s,Gs,bv,X.PC,X.O5,X.tP],encapsulation:2,data:{animation:[(0,St.X$)("overlayAppear",[(0,St.SB)("in",(0,St.oB)({opacity:1})),(0,St.eR)("void => *",[(0,St.oB)({opacity:.1}),(0,St.jt)(".3s cubic-bezier(.2, .6, .4, 1)")])])]}}),i})();class ta{}let qa=(()=>{class i{constructor(e){this.dialog=e}ngAfterViewInit(){this.dialogTitleBar&&this.dialogTitleBar.close.pipe((0,Ot.h)(e=>!e.isDefaultPrevented())).subscribe(()=>{this.dialog.close()}),this.dialogActions&&this.dialogActions.actions&&this.dialogActions.action.subscribe(e=>this.dialog.dialog.instance.action.emit(e))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ta))},i.\u0275dir=t.lG2({type:i,viewQuery:function(e,n){if(1&e&&(t.Gf(_s,5),t.Gf(Gs,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.dialogTitleBar=s.first),t.iGM(s=t.CRH())&&(n.dialogActions=s.first)}}}),i})(),_2=(()=>{class i{set container(e){i.container=e}get container(){return i.container}}return i.container=null,i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();class pR{constructor(r,e){this.getDialogRef=r,this.parentInjector=e}get(r,e){return r===ta?this.getDialogRef():this.parentInjector.get(r,e)}}let xd=(()=>{class i{constructor(e,n){this.resolver=e,this.containerService=n}open(e){const n=this.resolver.resolveComponentFactory(g2),s=e.appendTo||this.containerService.container;if(!s)throw new Error("\nCannot attach dialog to the page.\nAdd an element that uses the kendoDialogContainer directive, or set the 'appendTo' property.\nSee https://www.telerik.com/kendo-angular-ui/components/dialogs/dialog/service/.\n          ");return this.initializeDialog(e.content,n,s,{close:()=>{},content:null,dialog:null,result:null},e)}initializeDialog(e,n,s,a,d){const f=this.contentFrom(e,s,a),p=s.createComponent(n,void 0,void 0,f.nodes);a.dialog=p,p.changeDetectorRef.markForCheck(),this.applyOptions(p.instance,d);const g=new Un.x,b=k=>{k instanceof tk&&(k=new xv),g.next(k||new xv),f.componentRef&&f.componentRef.destroy(),p.destroy()},S=(0,En.T)(g,(0,En.T)(p.instance.close,p.instance.action).pipe((0,Kn.U)(k=>k instanceof tk?new xv:k),(0,Ot.h)(k=>{if(d.preventAction){const T=(i=>Xw(i)||i instanceof t.Rgc)(e)?void 0:a;return!d.preventAction(k,T)}return!0}))).pipe((0,gn.q)(1),(0,a2.B)());if(S.subscribe(b),a.close=b,a.result=S,e&&(0,t.X6Q)()){const k=f.nodes[0]&&f.nodes[0].length>0,T=f.nodes[2]&&f.nodes[2].length>0,F=d.title&&k,K=d.actions&&T;e.prototype instanceof qa?(F||K)&&console.warn("\n                    Multiple Title and/or Actions configurations detected.\n                    When using a component as content, provide the title and actions either in the component's markup\n                    or via the title and actions properties of the DialogSettings object, but not both.\n                    See https://www.telerik.com/kendo-angular-ui/components/dialogs/dialog/service/#toc-passing-title-content-and-actions-as-a-single-component'"):(k||T)&&console.warn("\n                    When Title and/or Actions markup is provided in content component's template,\n                    the component needs to inherit the DialogContentBase class to ensure that close and result events are properly hooked.\n                    See https://www.telerik.com/kendo-angular-ui/components/dialogs/dialog/service/#toc-passing-title-content-and-actions-as-a-single-component'")}return a}applyOptions(e,n){e.title=n.title,e.actions=n.actions,e.actionsLayout=n.actionsLayout||"stretched",e.width=n.width,e.minWidth=n.minWidth,e.maxWidth=n.maxWidth,e.height=n.height,e.minHeight=n.minHeight,e.maxHeight=n.maxHeight,e.autoFocusedElement=n.autoFocusedElement,e.closeTitle=n.closeTitle,e.cssClass=n.cssClass,e.htmlAttributes=n.htmlAttributes,e.animation=void 0===n.animation||n.animation,n.content instanceof t.Rgc&&(e.contentTemplate=n.content)}contentFrom(e,n,s){const a=n.injector.get(t.Qsj);let d=[],f=[],p=[],g=null;if("string"==typeof e)d=[a.createText(e)];else if(e&&!(e instanceof t.Rgc)){const b=new pR(()=>s,n.injector),S=this.resolver.resolveComponentFactory(e);g=n.createComponent(S,void 0,b),f=Array.from(g.location.nativeElement.querySelectorAll("kendo-dialog-titlebar")),d=[g.location.nativeElement],p=Array.from(g.location.nativeElement.querySelectorAll("kendo-dialog-actions")),s.content=g}return{componentRef:g,nodes:[f,d,p]}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t._Vd),t.LFG(_2))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),v2=10002;const mR={draggable:!0,height:null,left:null,minHeight:100,minWidth:120,position:"absolute",resizable:!0,state:"default",top:null,width:null},b2=(i,r)=>e=>i.kendoDrag.pipe((0,Bi.R)(i.kendoRelease.pipe((0,Yt.b)(()=>{r.emit()}))),(0,Kn.U)(({pageX:n,pageY:s})=>({originalX:e.pageX,originalY:e.pageY,pageX:n,pageY:s})));let Ya=(()=>{class i{constructor(e){this.ngZone=e,this.close=new t.vpe,this.focus=new t.vpe,this.change=new t.vpe,this.stateChange=new t.vpe,this.dragStart=new t.vpe,this.dragEnd=new t.vpe,this.resizeStart=new t.vpe,this.resizeEnd=new t.vpe,this.options=Object.assign({},mR),this.lastAction=null,this.subscriptions=new cn.w0,this.dragSubscription=new cn.w0}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe(),this.dragSubscription&&this.dragSubscription.unsubscribe()}init(e){const n=this.options.state;let s=this.options;this.window=e,"default"!==n&&(this.restoreOptions=Object.assign({},s)),"minimized"===n&&(s.height=0,s.minHeight=0),"maximized"===n&&(s.position="fixed")}onDrag(e){this.subscriptions.add(this.ngZone.runOutsideAngular(()=>{let n,s;this.dragSubscription=e.kendoPress.pipe((0,Yt.b)(a=>{a.isTouch||h2(a),this.focus.emit(),n=this.currentPosition(),s=!1}),(0,ym.w)(b2(e,this.dragEnd))).subscribe(({pageX:a,pageY:d,originalX:f,originalY:p})=>{s||(this.ensureWidth(),this.dragStart.emit(),s=!0),this.handleDrag({originalX:f,originalY:p,pageX:a,pageY:d,startPosition:n})})}))}handleDrag({originalX:e,originalY:n,pageX:s,pageY:a,startPosition:d}){this.options.left=d.x+s-e,this.options.top=d.y+a-n,"minimized"===this.options.state&&Ht(this.restoreOptions)&&(this.restoreOptions.left=this.options.left,this.restoreOptions.top=this.options.top),this.change.emit({left:d.x+s-e,top:d.y+a-n})}onResize(e,n){this.subscriptions.add(this.ngZone.runOutsideAngular(()=>{let s,a=!1;e.kendoPress.pipe((0,Yt.b)(d=>{h2(d),this.focus.emit(),s=this.currentOffsetAndPosition(),a=!1}),(0,ym.w)(b2(e,this.resizeEnd))).subscribe(({pageX:d,pageY:f,originalX:p,originalY:g})=>{a||(this.resizeStart.emit(n),a=!0),this.handleResize(s,n,d-p,f-g)})}))}handleResize(e,n,s,a){const d=this.options;let f={};if(n.indexOf("e")>=0){const p=e.width+s;p!==d.width&&p>=d.minWidth&&(f.width=p)}if(n.indexOf("n")>=0){const p=e.height-a,g=e.y+a;p!==d.height&&p>=d.minHeight&&g!==d.top&&(f.height=p,f.top=g)}if(n.indexOf("s")>=0){const p=e.height+a;p!==d.height&&p>=d.minHeight&&(f.height=p)}if(n.indexOf("w")>=0){const p=e.x+s,g=e.width-s;g!==d.width&&g>=d.minWidth&&p!==d.left&&(f.width=g,f.left=p)}(Ht(f.width)||Ht(f.height))&&(Am.forEach(p=>{Ht(f[p])&&(this.options[p]=f[p])}),this.change.emit(f))}restoreAction(){this.lastAction="restore",this.defaultState()}defaultState(){Ht(this.restoreOptions)&&(this.options=Object.assign({},this.restoreOptions)),this.options.state="default",this.stateChange.emit("default")}storeOptions(){this.restoreOptions=Object.assign({},this.options)}maximizeAction(){this.lastAction="maximize",this.maximizeState()}maximizeState(){this.storeOptions();const e=this.windowViewPort;this.options=Object.assign({},this.options,{height:e.height,left:0,position:"fixed",state:"maximized",top:0,width:e.width}),this.stateChange.emit("maximized")}minimizeAction(){this.lastAction="minimize",this.minimizeState()}minimizeState(){this.storeOptions(),this.options=Object.assign({},this.options,{height:null,minHeight:0,state:"minimized"}),this.stateChange.emit("minimized")}applyManualState(){switch(this.options.state){case"default":this.clearHeight(),this.defaultState();break;case"maximized":this.clearHeight(),this.maximizeState();break;case"minimized":this.minimizeState()}}closeAction(){this.close.emit()}ensureWidth(){const e=cs(this.window.nativeElement);Ht(this.options.width)||(this.options.width=e.width,this.change.emit({width:e.width}))}clearHeight(){0===this.options.height&&delete this.options.height,0===this.options.minHeight&&delete this.options.minHeight}center(){if("maximized"===this.options.state)return;let e=vc(this.window.nativeElement),n=this.windowViewPort,s=cs(this.window.nativeElement),a={};Ht(this.options.left)||(this.options.left=e.x+Math.max(0,(n.width-s.width)/2),a.left=this.options.left),Ht(this.options.top)||(this.options.top=e.y+Math.max(0,(n.height-s.height)/2),a.top=this.options.top),this.change.emit(a)}currentOffsetAndPosition(){const e=this.options,n=cs(this.window.nativeElement);return Object.assign({},this.currentPosition(),{height:e.height?e.height:n.height,width:e.width?e.width:n.width})}currentPosition(){const e=this.options;return(!e.top||!e.left)&&this.setPosition(),{x:this.options.left,y:this.options.top}}setPosition(){const e=Wn(this.window.nativeElement,_c(this.window.nativeElement));this.options.left=e.left,this.options.top=e.top}setRestoreOption(e,n){Ht(this.restoreOptions)&&(this.restoreOptions[e]=n)}get nextPossibleZIndex(){return v2}get nextZIndex(){return v2++}get windowViewPort(){return Lr(this.window.nativeElement)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t.R0b))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),nk=(()=>{class i{constructor(e,n,s,a){this.draggable=e,this.el=n,this.renderer=s,this.service=a,this.subscriptions=new cn.w0}get hostClass(){return!0}ngOnInit(){this.setDisplay(),this.renderer.addClass(this.el.nativeElement,"k-resize-"+this.direction),this.subscriptions.add((0,go.of)(this.draggable).subscribe(e=>{this.service.onResize(e,this.direction)})),this.subscriptions.add(this.service.resizeStart.subscribe(e=>{e!==this.direction&&this.setDisplay("none")})),this.subscriptions.add(this.service.dragStart.subscribe(()=>{this.setDisplay("none")})),this.subscriptions.add((0,En.T)(this.service.resizeEnd,this.service.dragEnd).subscribe(()=>{this.setDisplay("block")})),this.subscriptions.add(this.service.stateChange.subscribe(e=>{this.setDisplay("default"===e?"block":"none")}))}ngOnDestroy(){this.subscriptions.unsubscribe()}setDisplay(e="block"){this.renderer.setStyle(this.el.nativeElement,"display","default"===this.service.options.state?e:"none")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Qd,1),t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Ya))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoWindowResizeHandle",""]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("k-resize-handle",n.hostClass)},inputs:{direction:"direction"}}),i})(),Th=(()=>{class i{constructor(e,n,s){this.el=e,this.ngZone=s,this.service=n}ngOnInit(){this.dragDirective=new Qd(this.el,this.ngZone),this.dragDirective.ngOnInit(),this.isDraggable&&this.subscribeDrag(),this.subscribeStateChange()}ngAfterViewInit(){const e=this.el.nativeElement.querySelector(".k-window-title");Ht(e)&&e.setAttribute("id",this.id)}ngOnDestroy(){this.dragDirective.ngOnDestroy(),this.unsubscribeDrag(),this.unsubscribeState()}subscribeDrag(){this.unsubscribeDrag(),this.dragSubscription=(0,go.of)(this.dragDirective).subscribe(e=>{this.service.onDrag(e)})}subscribeStateChange(){this.stateSubscription=this.service.stateChange.subscribe(e=>{this.service.options.draggable&&("maximized"===e?this.unsubscribeDrag():this.subscribeDrag())})}unsubscribeDrag(){this.dragSubscription&&(this.service.dragSubscription.unsubscribe(),this.dragSubscription.unsubscribe(),this.dragSubscription=null)}unsubscribeState(){this.stateSubscription&&(this.stateSubscription.unsubscribe(),this.stateSubscription=null)}get className(){return!0}get touchAction(){if(this.isDraggable)return"none"}handle(e){const n=e.target,s=this.service.options.state;!wh(n,"k-icon")&&!d2(n,!1)&&this.service.options.resizable&&("default"===s?this.service.maximizeAction():"maximized"===s&&this.service.restoreAction())}get isDraggable(){const e=this.service.options;return e.draggable&&"maximized"!==e.state}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(Ya),t.Y36(t.R0b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-window-titlebar"]],hostVars:6,hostBindings:function(e,n){1&e&&t.NdJ("dblclick",function(a){return n.handle(a)}),2&e&&(t.Udp("touch-action",n.touchAction),t.ekj("k-window-titlebar",n.className)("k-dialog-titlebar",n.className))},inputs:{template:"template",id:"id"},ngContentSelectors:Qw,decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(t.F$t(),t.YNc(0,LM,1,0,"ng-content",0),t.YNc(1,BM,1,4,null,0)),2&e&&(t.Q6J("ngIf",!n.template),t.xp6(1),t.Q6J("ngIf",n.template))},dependencies:[X.O5,X.tP],encapsulation:2}),i})(),x2=(()=>{class i{constructor(e,n){this.window=e,this.ngZone=n}process(e){const n=e.keyCode;switch(n){case Tn.up:case Tn.down:case Tn.left:case Tn.right:e.preventDefault(),this.ngZone.run(()=>{this.handleArrow(n,e)});break;case Tn.esc:this.ngZone.run(()=>{this.handleEscape()})}}handleArrow(e,n){const s=this.window.options;n.altKey?this.handleStateChange(e,s.state):(n.ctrlKey||n.metaKey)&&"default"===s.state?this.handleResize(e):this.handleDrag(e)}handleEscape(){this.window.closeAction()}handleDrag(e){let n=this.window.options;if(!n.draggable)return;const s=this.window.currentOffsetAndPosition();let a=this.window.restoreOptions,d={},f=10;switch((e===Tn.left||e===Tn.up)&&(f*=-1),e){case Tn.left:case Tn.right:d.left=s.x+f,n.left=d.left;break;case Tn.up:case Tn.down:d.top=s.y+f,n.top=d.top}"minimized"===n.state&&Ht(a)&&(a.left=n.left,a.top=n.top),this.window.change.emit(d)}handleResize(e){const n=this.window.options;if(!n.resizable)return;const s=this.window.currentOffsetAndPosition();let a,d,f={},p=10;switch((e===Tn.left||e===Tn.up)&&(p*=-1),e){case Tn.left:case Tn.right:a=s.width+p,a!==n.width&&a>=n.minWidth&&(f.width=a);break;case Tn.up:case Tn.down:d=s.height+p,d!==n.height&&d>=n.minHeight&&(f.height=d)}(Ht(f.width)||Ht(f.height))&&(Am.forEach(g=>{Ht(f[g])&&(this.window.options[g]=f[g])}),this.window.change.emit(f))}handleStateChange(e,n){"minimized"===n&&e===Tn.up||"maximized"===n&&e===Tn.down?this.window.restoreAction():"default"===n&&(e===Tn.up?this.window.maximizeAction():e===Tn.down&&this.window.minimizeAction())}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Ya),t.LFG(t.R0b))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),ik=(()=>{class i extends Nn{constructor(e,n,s,a,d){super(e,n,null,a,d),this.buttonType="button",this.buttonClass=!0,this.window=s,this.fillMode="flat",this.icon="window-minimize"}onClick(){this.isDisabled||this.window.minimizeAction()}get visible(){return"default"===this.window.options.state?"inline-flex":"none"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Ya,8),t.Y36(Ge),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["button","kendoWindowMinimizeAction",""]],hostVars:5,hostBindings:function(e,n){1&e&&t.NdJ("click",function(){return n.onClick()}),2&e&&(t.uIk("type",n.buttonType),t.Udp("display",n.visible),t.ekj("k-window-action",n.buttonClass))},inputs:{window:"window"},exportAs:["kendoWindowMinimizeAction"],features:[t._Bn([Ge,{provide:Et,useValue:"kendo.button"}]),t.qOj]}),i})(),rk=(()=>{class i extends Nn{constructor(e,n,s,a,d){super(e,n,null,a,d),this.buttonType="button",this.buttonClass=!0,this.window=s,this.fillMode="flat",this.icon="window"}onClick(){this.isDisabled||this.window.maximizeAction()}get visible(){return"default"===this.window.options.state?"inline-flex":"none"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Ya,8),t.Y36(Ge),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["button","kendoWindowMaximizeAction",""]],hostVars:5,hostBindings:function(e,n){1&e&&t.NdJ("click",function(){return n.onClick()}),2&e&&(t.uIk("type",n.buttonType),t.Udp("display",n.visible),t.ekj("k-window-action",n.buttonClass))},inputs:{window:"window"},exportAs:["kendoWindowMaximizeAction"],features:[t._Bn([Ge,{provide:Et,useValue:"kendo.button"}]),t.qOj]}),i})(),sk=(()=>{class i extends Nn{constructor(e,n,s,a,d){super(e,n,null,a,d),this.buttonType="button",this.buttonClass=!0,this.window=s,this.fillMode="flat",this.icon="window-restore"}onClick(){this.isDisabled||this.window.restoreAction()}get visible(){return"default"===this.window.options.state?"none":"inline-flex"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Ya,8),t.Y36(Ge),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["button","kendoWindowRestoreAction",""]],hostVars:5,hostBindings:function(e,n){1&e&&t.NdJ("click",function(){return n.onClick()}),2&e&&(t.uIk("type",n.buttonType),t.Udp("display",n.visible),t.ekj("k-window-action",n.buttonClass))},inputs:{window:"window"},exportAs:["kendoWindowRestoreAction"],features:[t._Bn([Ge,{provide:Et,useValue:"kendo.button"}]),t.qOj]}),i})(),ok=(()=>{class i extends Nn{constructor(e,n,s,a,d){super(e,n,null,a,d),this.buttonType="button",this.buttonClass=!0,this.window=s,this.fillMode="flat",this.icon="x"}onClick(){this.isDisabled||this.window.closeAction()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Ya,8),t.Y36(Ge),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["button","kendoWindowCloseAction",""]],hostVars:3,hostBindings:function(e,n){1&e&&t.NdJ("click",function(){return n.onClick()}),2&e&&(t.uIk("type",n.buttonType),t.ekj("k-window-action",n.buttonClass))},inputs:{window:"window"},exportAs:["kendoWindowCloseAction"],features:[t._Bn([Ge,{provide:Et,useValue:"kendo.button"}]),t.qOj]}),i})(),Cv=(()=>{class i{constructor(e,n,s,a,d,f){this.el=e,this.renderer=n,this.service=s,this.navigation=a,this.ngZone=d,this.localization=f,this.keepContent=!1,this.dragStart=new t.vpe,this.dragEnd=new t.vpe,this.resizeStart=new t.vpe,this.resizeEnd=new t.vpe,this.close=new t.vpe,this.widthChange=new t.vpe,this.heightChange=new t.vpe,this.topChange=new t.vpe,this.leftChange=new t.vpe,this.stateChange=new t.vpe,this.messages={},this.tabIndex=0,this.role="dialog",this.titleId=null,this.draged=!1,this.resized=!1,this.windowSubscription=new cn.w0,this.domSubs=new cn.w0,wt(m2),this.direction=this.localization.rtl?"rtl":"ltr",this.localizationChangeSubscription=this.localization.changes.subscribe(({rtl:p})=>this.direction=p?"rtl":"ltr"),this.resizeDirections=sR,this.subscribeEvents(),this.titleId=this.generateTitleId()}set draggable(e){this.options.draggable=e}get draggable(){return this.options.draggable}set resizable(e){this.options.resizable=e}get resizable(){return this.options.resizable}set cssClass(e){this.setServiceClasses(this._cssClass,e),this._cssClass=e}get cssClass(){return this._cssClass}set htmlAttributes(e){u2(e,this.renderer,this.el.nativeElement);const n=this.el.nativeElement,s=n.getAttribute("dir"),a=n.getAttribute("tabindex");this.direction!==s&&(this.direction=s),this.tabIndex!==a&&(this.tabIndex=a),this._htmlAttributes=e}get htmlAttributes(){return this._htmlAttributes}set state(e){this.options.state=e}get state(){return this.options.state}set minWidth(e){this.setOption("minWidth",e)}get minWidth(){return this.options.minWidth}set minHeight(e){this.setOption("minHeight",e)}get minHeight(){return this.options.minHeight}set width(e){this.setOption("width",e)}get width(){return this.options.width}set height(e){this.setOption("height",e)}get height(){return this.options.height}set top(e){this.setOption("top",e)}get top(){return this.options.top}set left(e){this.setOption("left",e)}get left(){return this.options.left}get closeButtonTitle(){return this.messages&&this.messages.closeTitle?this.messages.closeTitle:this.localization.get("closeTitle")}get restoreButtonTitle(){return this.messages&&this.messages.restoreTitle?this.messages.restoreTitle:this.localization.get("restoreTitle")}get maximizeButtonTitle(){return this.messages&&this.messages.maximizeTitle?this.messages.maximizeTitle:this.localization.get("maximizeTitle")}get minimizeButtonTitle(){return this.messages&&this.messages.minimizeTitle?this.messages.minimizeTitle:this.localization.get("minimizeTitle")}get hostClasses(){return!0}get dir(){return this.direction}ngAfterViewInit(){this.setNextZIndex(),this.handleInitialFocus(),this.ngZone.runOutsideAngular(()=>Promise.resolve(null).then(()=>this.setInitialOffset())),this.initDomEvents(),(this.titleBarView||this.titleBarContent)&&this.renderer.setAttribute(this.el.nativeElement,"aria-labelledby",this.titleId)}ngOnInit(){this.renderer.removeAttribute(this.el.nativeElement,"title"),this.service.init(this.el)}ngOnChanges(e){if(Am.forEach(n=>{fn(n,e)&&this.setStyle(n,this.options[n])}),fn("draggable",e)){const n=Ht(this.titleBarContent)?this.titleBarContent:this.titleBarView;(i=>!!i)(e.draggable.currentValue)?n.subscribeDrag():n.unsubscribeDrag()}fn("state",e)&&(Ht(this.service.lastAction)?this.service.lastAction=null:(this.service.applyManualState(),this.updateAllOffset()))}ngOnDestroy(){this.windowSubscription&&this.windowSubscription.unsubscribe(),this.domSubs&&this.domSubs.unsubscribe(),this.localizationChangeSubscription.unsubscribe()}focus(){const e=this.el.nativeElement;Ht(e)&&e.focus()}bringToFront(){this.setNextZIndex()}setDimension(e,n){this.setOption(e,n),this.setStyle(e,n)}setOffset(e,n){this.setOption(e,n),this.setStyle(e,n)}get showDefaultTitleBar(){return!Ht(this.titleBarContent)}get styleMinWidth(){return this.minWidth+"px"}get styleMinHeight(){return this.minHeight+"px"}get stylePosition(){return this.options.position}get wrapperMaximizedClass(){return"maximized"===this.state}get wrapperMinimizedClass(){return"minimized"===this.state}onComponentFocus(){this.renderer.addClass(this.el.nativeElement,"k-focus"),this.setNextZIndex()}onComponentBlur(){this.renderer.removeClass(this.el.nativeElement,"k-focus")}subscribeEvents(){!nt()||(this.windowSubscription.add(this.service.focus.subscribe(()=>{this.el.nativeElement.focus()})),this.windowSubscription.add(this.service.dragStart.subscribe(()=>{this.draged=!0,this.ngZone.run(()=>{this.dragStart.emit()})})),this.windowSubscription.add(this.service.dragEnd.subscribe(()=>{this.draged&&(this.draged=!1,this.ngZone.run(()=>{this.dragEnd.emit()}))})),this.windowSubscription.add(this.service.close.subscribe(()=>{this.close.emit()})),this.windowSubscription.add(this.service.resizeStart.subscribe(()=>{this.resized=!0,this.ngZone.run(()=>{this.resizeStart.emit()})})),this.windowSubscription.add(this.service.resizeEnd.subscribe(()=>{this.resized&&(this.resized=!1,this.ngZone.run(()=>{this.resizeEnd.emit()}))})),this.windowSubscription.add(this.service.change.subscribe(e=>{Am.forEach(n=>{if(Ht(e[n])&&(this.setStyle(n,e[n]),"maximized"!==this.state)){const s=this[n+"Change"];s.observers.length&&this.ngZone.run(()=>{s.emit(e[n])})}})})),this.windowSubscription.add(this.service.stateChange.subscribe(e=>{Ht(this.service.lastAction)&&(this.updateAllOffset(),this.stateChange.emit(e))})))}initDomEvents(){!this.el||this.ngZone.runOutsideAngular(()=>{this.domSubs.add(this.renderer.listen(this.el.nativeElement,"keydown",e=>{this.onKeyDown(e)}))})}onKeyDown(e){wh(e.target,"k-window")&&this.navigation.process(e)}setServiceClasses(e,n){const s=this.el.nativeElement;e&&Dm(e).forEach(a=>{this.renderer.removeClass(s,a)}),n&&Dm(n).forEach(a=>{this.renderer.addClass(s,a)})}setNextZIndex(){const e=this.el.nativeElement.style["z-index"];(!e||this.service.nextPossibleZIndex-e>1)&&this.renderer.setStyle(this.el.nativeElement,"z-index",this.service.nextZIndex)}setInitialOffset(){if("maximized"!==this.state)this.updateAllOffset(),(!Ht(this.left)||!Ht(this.top))&&this.service.center();else{const e=this.service.windowViewPort;this.setStyle("width",e.width),this.setStyle("height",e.height),this.setStyle("top",0),this.setStyle("left",0)}}updateAllOffset(){Am.forEach(e=>{Ht(this[e])?this.setStyle(e,this[e]):this.removeStyle(e)})}setStyle(e,n){this.renderer.setStyle(this.el.nativeElement,e,n+"px")}removeStyle(e){this.renderer.removeStyle(this.el.nativeElement,e)}get options(){return this.service.options}setOption(e,n){if("number"!=typeof n&&"string"!=typeof n)return;const s="number"==typeof n?n:parseInt(n,10);this.options[e]=s,this.service.setRestoreOption(e,s)}handleInitialFocus(){if(this.autoFocusedElement){const n=this.el.nativeElement.querySelector(this.autoFocusedElement);n&&n.focus()}else this.focus()}generateTitleId(){return"kendo-window-title-"+Math.ceil(1e6*Math.random()).toString()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Ya),t.Y36(x2),t.Y36(t.R0b),t.Y36(Ge))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-window"]],contentQueries:function(e,n,s){if(1&e&&t.Suo(s,Th,5),2&e){let a;t.iGM(a=t.CRH())&&(n.titleBarContent=a.first)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Th,5),t.Gf(nk,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.titleBarView=s.first),t.iGM(s=t.CRH())&&(n.resizeHandles=s)}},hostVars:15,hostBindings:function(e,n){1&e&&t.NdJ("focus",function(){return n.onComponentFocus()})("blur",function(){return n.onComponentBlur()}),2&e&&(t.uIk("tabIndex",n.tabIndex)("role",n.role)("dir",n.dir),t.Udp("min-width",n.styleMinWidth)("min-height",n.styleMinHeight)("position",n.stylePosition),t.ekj("k-window",n.hostClasses)("k-window-maximized",n.wrapperMaximizedClass)("k-window-minimized",n.wrapperMinimizedClass))},inputs:{autoFocusedElement:"autoFocusedElement",title:"title",draggable:"draggable",resizable:"resizable",keepContent:"keepContent",state:"state",minWidth:"minWidth",minHeight:"minHeight",width:"width",height:"height",top:"top",left:"left"},outputs:{dragStart:"dragStart",dragEnd:"dragEnd",resizeStart:"resizeStart",resizeEnd:"resizeEnd",close:"close",widthChange:"widthChange",heightChange:"heightChange",topChange:"topChange",leftChange:"leftChange",stateChange:"stateChange"},exportAs:["kendoWindow"],features:[t._Bn([Ya,x2,Ge,{provide:Et,useValue:"kendo.window"}]),t.TTD],ngContentSelectors:$M,decls:6,vars:4,consts:function(){let r,e,n,s;return r=$localize`:kendo.window.closeTitle|The title of the close button:Close`,e=$localize`:kendo.window.restoreTitle|The title of the restore button:Restore`,n=$localize`:kendo.window.maximizeTitle|The title of the maximize button:Maximize`,s=$localize`:kendo.window.minimizeTitle|The title of the minimize button:Minimize`,[["kendoWindowLocalizedMessages","","closeTitle",r,"restoreTitle",e,"maximizeTitle",n,"minimizeTitle",s],[3,"template","id",4,"ngIf"],[4,"ngIf"],["class","k-content k-window-content",3,"hidden",4,"ngIf"],[3,"ngIf"],[3,"template","id"],[1,"k-window-title"],[1,"k-window-actions"],["kendoWindowMinimizeAction",""],["kendoWindowMaximizeAction",""],["kendoWindowRestoreAction",""],["kendoWindowCloseAction",""],[1,"k-content","k-window-content",3,"hidden"],[3,"ngTemplateOutlet"],["kendoWindowResizeHandle","","kendoDraggable","",3,"direction",4,"ngFor","ngForOf"],["kendoWindowResizeHandle","","kendoDraggable","",3,"direction"]]},template:function(e,n){1&e&&(t.F$t(KM),t.ynx(0,0)(1),t.YNc(2,GM,8,11,"kendo-window-titlebar",1),t.YNc(3,zM,1,0,"ng-content",2),t.YNc(4,JM,3,3,"div",3),t.YNc(5,YM,1,1,"ng-template",4),t.BQk()()),2&e&&(t.xp6(2),t.Q6J("ngIf",n.showDefaultTitleBar),t.xp6(1),t.Q6J("ngIf",!n.showDefaultTitleBar),t.xp6(1),t.Q6J("ngIf","minimized"!==n.state||n.keepContent),t.xp6(1),t.Q6J("ngIf",n.resizable))},dependencies:[Th,bv,X.O5,ik,rk,sk,ok,X.tP,X.sg,nk,Qd],encapsulation:2}),i})();class C2{}let S2=(()=>{class i{set container(e){i.container=e}get container(){return i.container}}return i.container=null,i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();class vR{constructor(r,e){this.getWindowRef=r,this.parentInjector=e}get(r,e){return r===class gR{}?this.getWindowRef():this.parentInjector.get(r,e)}}let bR=(()=>{class i{constructor(e,n){this.resolver=e,this.containerService=n}open(e){const n=this.resolver.resolveComponentFactory(Cv),s=e.appendTo||this.containerService.container;if(!s)throw new Error("Cannot attach window to the page.\n                Add an element that uses the kendoWindowContainer directive, or set the 'appendTo' property.\n                See https://www.telerik.com/kendo-angular-ui/components/dialogs/window/service/\n            ");const a={close:()=>{},content:null,result:null,window:null},d=this.contentFrom(e.content,s,a),f=s.createComponent(n,void 0,void 0,d.nodes);a.window=f,this.applyOptions(f.instance,e);const p=new Un.x,g=S=>{p.next(S||new C2),d.componentRef&&d.componentRef.destroy(),f.destroy()},b=(0,En.T)(p,f.instance.close.pipe((0,Kn.U)(S=>S||new C2),(0,Ot.h)(S=>{if(e.preventClose){const k=(i=>Xw(i)||i instanceof t.Rgc)(e.content)?void 0:a;return!e.preventClose(S,k)}return!0}))).pipe((0,gn.q)(1),(0,a2.B)());return b.subscribe(g),a.close=g,a.result=b,f.changeDetectorRef.markForCheck(),a}applyOptions(e,n){Ht(n.htmlAttributes)&&(e.htmlAttributes=n.htmlAttributes),Ht(n.cssClass)&&(e.cssClass=n.cssClass),Ht(n.title)&&(e.title=n.title),Ht(n.keepContent)&&(e.keepContent=n.keepContent),Ht(n.width)&&(e.width=n.width),Ht(n.minWidth)&&(e.minWidth=n.minWidth),Ht(n.height)&&(e.height=n.height),Ht(n.minHeight)&&(e.minHeight=n.minHeight),Ht(n.left)&&(e.left=n.left),Ht(n.top)&&(e.top=n.top),Ht(n.draggable)&&(e.draggable=n.draggable),Ht(n.resizable)&&(e.resizable=n.resizable),Ht(n.messages&&n.messages.closeTitle)&&(e.messages.closeTitle=n.messages.closeTitle),Ht(n.messages&&n.messages.restoreTitle)&&(e.messages.restoreTitle=n.messages.restoreTitle),Ht(n.messages&&n.messages.maximizeTitle)&&(e.messages.maximizeTitle=n.messages.maximizeTitle),Ht(n.messages&&n.messages.minimizeTitle)&&(e.messages.minimizeTitle=n.messages.minimizeTitle),Ht(n.autoFocusedElement)&&(e.autoFocusedElement=n.autoFocusedElement),Ht(n.state)&&(e.state=n.state,"minimized"===n.state&&(e.keepContent=!0)),n.content instanceof t.Rgc&&(e.contentTemplate=n.content),n.titleBarContent instanceof t.Rgc&&(e.titleBarTemplate=n.titleBarContent)}contentFrom(e,n,s){const a=n.injector.get(t.Qsj);let d=[],f=null;if("string"==typeof e)d=[a.createText(e)];else if(e&&!(e instanceof t.Rgc)){const p=new vR(()=>s,n.injector),g=this.resolver.resolveComponentFactory(e);f=n.createComponent(g,void 0,p),d=[f.location.nativeElement],s.content=f}return{componentRef:f,nodes:[[],d]}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(t._Vd),t.LFG(S2))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),E2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez],X.ez]}),i})(),w2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[_2,xd],imports:[[E2]]}),i})(),xR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[S2,bR],imports:[[E2,Xd]]}),i})(),CR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[w2,xR]}),i})();Oe(8675);var ak=Oe(4482),Sv=Oe(5403),wR=Oe(8421);const k2={leading:!0,trailing:!1};function Ev(i){return"string"==typeof i}const DR=/\{(\d+)}?\}/g;class AR{constructor({name:r,message:e}){if(!r||!e)throw new Error("{ name: string, message: string } object is required!");this.name=r,this.message=e}formatMessage(...r){const e=OR(r),n=this.message.replace(DR,function(s,a){return e[parseInt(a,10)]});return`${this.name}: ${n}`}error(...r){return new Error(this.formatMessage(r))}}const OR=function(i){return i.reduce((r,e)=>r.concat(e),[])},yh=function(i){return Object.keys(i).reduce(function(e,n){return e[n]=new AR({name:n,message:i[n]}),e},{})}({NoLocale:"Missing locale info for '{0}'",NoCurrency:"Cannot determine currency information. Please load the locale currencies data.",NoSupplementalCurrency:"Cannot determine currency. Please load the supplemental currencyData.",NoCurrencyRegion:"No currency data for region '{0}'",NoCurrencyDisplay:"Cannot determine currency display information. Please load the locale currencies data. The default culture does not include the all currencies data.",NoGMTInfo:"Cannot determine locale GMT format. Please load the locale timeZoneNames data.",NoWeekData:"Cannot determine locale first day of week. Please load the supplemental weekData.",NoFirstDay:"Cannot determine locale first day of week. Please load the supplemental weekData. The default culture includes only the 'en-US' first day info.",NoValidCurrency:"Cannot determine a default currency for the {0} locale. Please specify explicitly the currency with the format options.",NoDateFieldNames:"Cannot determine the locale date field names. Please load the locale dateFields data."}),qn={en:{name:"en",identity:{version:{_unicodeVersion:"14.0.0",_cldrVersion:"41"},language:"en"},territory:"US",numbers:{symbols:{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":",approximatelySign:"~"},decimal:{patterns:["n"],groupSize:[3]},scientific:{patterns:["nEn"],groupSize:[]},percent:{patterns:["n%"],groupSize:[3]},currency:{patterns:["$n"],groupSize:[3],"unitPattern-count-one":"n $","unitPattern-count-other":"n $"},currencies:{BGN:{displayName:"Bulgarian Lev","displayName-count-one":"Bulgarian lev","displayName-count-other":"Bulgarian leva",symbol:"BGN"},EUR:{displayName:"Euro","displayName-count-one":"euro","displayName-count-other":"euros",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},USD:{displayName:"US Dollar","displayName-count-one":"US dollar","displayName-count-other":"US dollars",symbol:"$","symbol-alt-narrow":"$"}},localeCurrency:"USD",accounting:{patterns:["$n","($n)"],groupSize:[3]}},calendar:{gmtFormat:"GMT{0}",gmtZeroFormat:"GMT",patterns:{d:"M/d/y",D:"EEEE, MMMM d, y",m:"MMM d",M:"MMMM d",y:"MMM y",Y:"MMMM y",F:"EEEE, MMMM d, y h:mm:ss a",g:"M/d/y h:mm a",G:"M/d/y h:mm:ss a",t:"h:mm a",T:"h:mm:ss a",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{Bh:"h B",Bhm:"h:mm B",Bhms:"h:mm:ss B",d:"d",E:"ccc",EBhm:"E h:mm B",EBhms:"E h:mm:ss B",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMd:"M/d/y GGGGG",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d","MMMMW-count-one":"'week' W 'of' MMMM","MMMMW-count-other":"'week' W 'of' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y","yw-count-one":"'week' w 'of' Y","yw-count-other":"'week' w 'of' Y"}},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},days:{format:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},"stand-alone":{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},months:{format:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},"stand-alone":{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]}},quarters:{format:{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},"stand-alone":{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]}},dayPeriods:{format:{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},narrow:{midnight:"mi",am:"a","am-alt-variant":"am",noon:"n",pm:"p","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"}},"stand-alone":{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},narrow:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"}}},eras:{format:{wide:{0:"Before Christ",1:"Anno Domini","0-alt-variant":"Before Common Era","1-alt-variant":"Common Era"},abbreviated:{0:"BC",1:"AD","0-alt-variant":"BCE","1-alt-variant":"CE"},narrow:{0:"B",1:"A","0-alt-variant":"BCE","1-alt-variant":"CE"}}},dateFields:{era:{wide:"era",short:"era",narrow:"era"},year:{wide:"year",short:"yr.",narrow:"yr."},quarter:{wide:"quarter",short:"qtr.",narrow:"qtr."},month:{wide:"month",short:"mo.",narrow:"mo."},week:{wide:"week",short:"wk.",narrow:"wk."},weekOfMonth:{wide:"week of month",short:"wk. of mo.",narrow:"wk. of mo."},day:{wide:"day",short:"day",narrow:"day"},dayOfYear:{wide:"day of year",short:"day of yr.",narrow:"day of yr."},weekday:{wide:"day of the week",short:"day of wk.",narrow:"day of wk."},weekdayOfMonth:{wide:"weekday of the month",short:"wkday. of mo.",narrow:"wkday. of mo."},dayperiod:{short:"AM/PM",wide:"AM/PM",narrow:"AM/PM"},hour:{wide:"hour",short:"hr.",narrow:"hr."},minute:{wide:"minute",short:"min.",narrow:"min."},second:{wide:"second",short:"sec.",narrow:"sec."},zone:{wide:"time zone",short:"zone",narrow:"zone"},millisecond:{narrow:"ms",short:"ms",wide:"millisecond"}}}},supplemental:{likelySubtags:{en:"en-Latn-US"},currencyData:{region:{US:[{USD:{_from:"1792-01-01"}}]}},weekData:{firstDay:{US:"sun"},weekendStart:{"001":"sat"},weekendEnd:{"001":"sun"}}}};function Dh(i){let r;return r=Ev(i)?Cd(i):i,r}function Cd(i){if(qn[i])return qn[i];if(qn.supplemental.likelySubtags){const e=i.split("-"),n=e[0],s=e.slice(1),a=function MR(i,r){const e=qn.supplemental.likelySubtags;for(let n=0;n<r.length;n++){let s=e[i+"-"+r[n]];if(s)return s}if(e[i])return e[i]}(n,s),d=a?function IR(i,r){const e=i.split("-"),n=e[0],s=e[1],a=e[2];return qn[i]||-1!==r.indexOf(a)&&qn[n+"-"+a]||-1!==r.indexOf(s)&&qn[n+"-"+s]||qn[n]}(a,s):null;if(d)return d}throw yh.NoLocale.error(i)}const lk="decimal",Om="currency",wv="accounting",Ah="percent",y2="scientific",Ka=".",Ih="en",uk="Formats-numberSystem-latn",kv=/([#,0.]+)/g,NR=/\xa4/g;function A2(i){return kv.lastIndex=0,i.replace(NR,"$").replace(kv,"n").split(";")}function O2(i){return kv.lastIndex=0,kv.exec(i.split(";")[0])[0].split(Ka)[0].split(",").slice(1).map(function(s){return s.length}).reverse()}function FR(i,r){for(let e in r)e.startsWith("unitPattern")&&(i[e]=r[e].replace("{0}","n").replace("{1}","$"))}function LR(i,r){const e=qn[i],n=e.numbers=e.numbers||{};n.symbols=n.symbols||{};for(let s in r)if("symbols-numberSystem-latn"===s)Object.assign(n.symbols,r[s]);else if(s.includes(uk)){const a=s.substr(0,s.indexOf(uk)),d=r[s].standard;n[a]={patterns:A2(d)},a===Om?(n[a].groupSize=O2((r[lk+uk]||r[s]).standard),FR(n[a],r[s]),n[wv]={patterns:A2(r[s][wv]),groupSize:n[a].groupSize}):n[a].groupSize=O2(d)}else"currencies"===s&&(n.currencies=r[s])}const I2={s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},PR=/y+/g,UR=[["dateFormats","short"]],M2={D:[["dateFormats","full"]],m:[["dateTimeFormats","availableFormats","MMMd"]],M:[["dateTimeFormats","availableFormats","MMMMd"]],y:[["dateTimeFormats","availableFormats","yMMM"]],Y:[["dateTimeFormats","availableFormats","yMMMM"]],F:[["dateFormats","full"],["timeFormats","medium"]],g:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","short"]],G:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","medium"]],t:[["timeFormats","short"]],T:[["timeFormats","medium"]]};function BR(i){let r=[],e=Object.getOwnPropertyNames(i);for(let n=0;n<e.length;n++)r.push(i[e[n]]);return r}function Tv(i,r){const e={};for(let n in i){let s=e[n]={};for(let a in i[n]){let d=i[n][a];s[a]=r?d:BR(d)}}return e}function zR(i,r){const e=qn[i].calendar;e.days=Tv(r.days),e.months=Tv(r.months),e.quarters=Tv(r.quarters),e.dayPeriods=Tv(r.dayPeriods,!0),e.eras=function GR(i){const r={},e=r.format={},n={eraAbbr:"abbreviated",eraNames:"wide",eraNarrow:"narrow"};for(let s in i)e[n[s]]=i[s];return r}(r.eras)}function ZR(i,r){const e=qn[i].calendar,n={};for(let s in r){const[a,d="wide"]=s.split("-"),f=n[a]||{},p=r[s].displayName;!p||(f[d]=p,n[a]=f)}e.dateFields=n}function R2(i,r){const e=[];for(let n=0;n<i.length;n++){let s=i[n],a=r;for(let d=0;d<s.length;d++)a=a[s[d]];e.push(a)}return e.join(" ")}function HR(i,r){const e=qn[i].calendar,n=e.patterns={};n.d=R2(UR,r).replace(PR,"y");for(let a in M2)n[a]=R2(M2[a],r);for(let a in I2)n[a]=I2[a];const s=r.dateTimeFormats;e.dateTimeFormats={full:s.full,long:s.long,medium:s.medium,short:s.short,availableFormats:s.availableFormats},e.timeFormats=r.timeFormats,e.dateFormats=r.dateFormats}function VR(i,r){const e=qn[i].calendar=qn[i].calendar||{};for(let n in r)"timeZoneNames"===n?(e.gmtFormat=r[n].gmtFormat,e.gmtZeroFormat=r[n].gmtZeroFormat):"calendars"===n&&r[n].gregorian?(HR(i,r[n].gregorian),zR(i,r[n].gregorian)):"fields"===n&&ZR(i,r.fields)}function yv(i){if(i.territory)return i.territory;const e=i.identity;let n;return n=e&&e.territory?e.territory:function JR(i,r){const e=qn.supplemental.likelySubtags;let n=i.split("-");if(e){const a=e[i]||e[n[0]];a&&(n=a.split("-"))}if(r)for(let a=n.length-1;a>=1;a--){const d=n[a];(d===r.variant||d===r.script)&&n.splice(a,1)}const s=n.length;if(s>1)return n[s-1].toUpperCase()}(i.name,e),i.territory=n,n}const hk="duration-millisecond",KR=/\{0\}\s?/;function fk(i){return(i["unitPattern-count-one"]||i["unitPattern-count-other"]).replace(KR,"")}function $R(i,r){i.calendar.dateFields.millisecond={narrow:fk(r.narrow[hk]),short:fk(r.short[hk]),wide:fk(r.long[hk])}}function WR(i,r){for(let e in r)"numbers"===e?LR(i,r[e]):"dates"===e&&VR(i,r[e])}function N2(i,r){const{type:e,nameType:n,standAlone:s,lower:a}=r,p=(a?"lower-":"")+n,g=Dh(i).calendar[e][s?"stand-alone":"format"];let b=g[p];return!b&&a&&(b=g[p]=function tN(i){return Array.isArray(i)?function XR(i){const r=[];for(let e=0;e<i.length;e++)r.push(i[e].toLowerCase());return r}(i):function eN(i){const r={};for(let e in i)r[e]=i[e].toLowerCase();return r}(i)}(g[n])),b}function pk(i){const r=i.split("-"),e=parseInt(r[0],10),n=parseInt(r[1],10)-1,s=parseInt(r[2],10);return new Date(e,n,s)}const{NoCurrency:nN,NoCurrencyDisplay:iN,NoSupplementalCurrency:rN,NoCurrencyRegion:sN,NoValidCurrency:oN}=yh,mk="symbol",L2={"001":"USD",150:"EUR"};function P2(i,r,e){const s=Dh(i).numbers.currencies;if(!s){if(e)throw nN.error();return}const a=s[r];if(a)return a;if(e)throw iN.error()}function lN(i,r){return r.length-i.length}function U2(i,r){const e=Dh(i),n=e.numbers;if(!n.localeCurrency){const s=function fN(i,r=!0){if(L2[i])return L2[i];const e=qn.supplemental.currencyData;if(!e){if(r)throw rN.error();return}const n=e.region[i];if(n)return function cN(i){let r,e,n,s;for(let a=0;a<i.length;a++){const d=i[a],f=Object.keys(d)[0],p=d[f];if("XXX"!==f&&"false"!==p._tender&&p._from)if(p._to){if(!n){const g=pk(p._from),b=pk(p._to);(!e||e.to<b||e.from<g)&&(r=f,e={from:g,to:b})}}else{const g=pk(p._from);(!s||s<g)&&(n=f,s=g)}}return n||r}(n);if(r)throw sN.error(i)}(yv(e),r);if(!s&&r)throw oN.error(e.name);n.localeCurrency=s}return n.localeCurrency}const gk=["sun","mon","tue","wed","thu","fri","sat"],{NoWeekData:pN,NoFirstDay:mN}=yh;function B2(i){const r=Dh(i);if(!isNaN(r.firstDay))return r.firstDay;const e=qn.supplemental.weekData;if(!e)throw pN.error();const n=e.firstDay[yv(r)]||e.firstDay["001"];if(!n)throw mN.error();return r.firstDay=gk.indexOf(n),r.firstDay}const{NoWeekData:gN}=yh;function G2(i){return 1/i==-1/0}function z2(i,r={}){return r.currency||(r.currency=U2(i,!0)),function uN(i,r){const{value:e,currency:n,currencyDisplay:s=mk}=r;if("code"===s)return n;const a=P2(i,n,!0);let d;return d=s===mk?a["symbol-alt-narrow"]||a[mk]:typeof e>"u"||1!==e?a["displayName-count-other"]:a["displayName-count-one"],d}(i,r)}function Z2(i,r,e,n,s){const a=s.numbers.symbols,d=i.indexOf(a.decimal),f=n.groupSize.slice();let p=f.shift(),g=-1!==d?d:e+1,b=i.substring(r,g),S=i;const k=b.length;if(k>=p){let T=k,F=[];for(;T>-1;){let K=b.substring(T-p,T);K&&F.push(K),T-=p;let fe=f.shift();if(p=void 0!==fe?fe:p,0===p){K=b.substring(0,T),K&&F.push(K);break}}b=F.reverse().join(a.group),S=i.substring(0,r)+b+i.substring(g)}return S}function vk(i){return i===Om||i===wv}function zr(i,r=2,e=!1){const n=r-String(i).length;let s=i;if(n>0){const a=new Array(n+1).join("0");s=e?i+a:a+i}return s}function Im(i,r){let e=i,n=r||0;return e=e.toString().split("e"),e=Math.round(Number(e[0]+"e"+(e[1]?Number(e[1])+n:n))),e=e.toString().split("e"),e=Number(e[0]+"e"+(e[1]?Number(e[1])-n:-n)),e.toFixed(Math.min(n,20))}const SN=/0+$/;function TN(i,r,e){const n=e.numbers.symbols,{style:s}=r,a=vk(s);if(s===y2)return(void 0!==r.minimumFractionDigits?i.toExponential(r.minimumFractionDigits):i.toExponential()).replace(Ka,n.decimal);let f,d=i;a&&(r.value=d,f=z2(e,r)),s===Ah&&(d*=100,f=n.percentSign);const{minimumFractionDigits:p,maximumFractionDigits:g}=function EN(i){let{minimumFractionDigits:r,maximumFractionDigits:e,style:n}=i;const s=vk(n);let a;return s&&(a=function hN(i){let r=2,e=2;const n=((qn.supplemental.currencyData||{}).fractions||{})[i];return n&&n._digits&&(e=r=parseInt(n._digits,10)),{minimumFractionDigits:r,maximumFractionDigits:e}}(i.currency)),void 0===r&&(r=s?a.minimumFractionDigits:0),void 0===e&&(e=n===Ah?Math.max(r,0):s?Math.max(r,a.maximumFractionDigits):Math.max(r,3)),{minimumFractionDigits:r,maximumFractionDigits:e}}(r);d=Im(d,g);const b=d<0,S=G2(i),k=d.split(Ka);let T=k[0],F=zr(k[1]?k[1].replace(SN,""):"",p,!0);b&&(T=T.substring(1)),r.minimumIntegerDigits&&(T=zr(T,r.minimumIntegerDigits));let fe,K=!1!==r.useGrouping?Z2(T,0,T.length,r,e):T;if(F&&(K+=n.decimal+F),a&&"name"===r.currencyDisplay)fe=function kN(i,r){const e=i.numbers.currency;let n=1!==r?e["unitPattern-count-other"]:e["unitPattern-count-one"];return r<0&&(n=n.replace("n","-n")),n}(e,i);else{const Ae=r.patterns;fe=b||S?Ae[1]||"-"+Ae[0]:Ae[0]}return"n"!==fe||b?function wN(i,r,e){let n="";for(let s=0,a=r.length;s<a;s++){let d=r.charAt(s);n+="n"===d?i:"$"===d||"%"===d?e:d}return n}(K,fe,f):K}const yN=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g;function V2(i,r){const e=i.format;-1!==e.indexOf("%")&&(i.style=Ah,i.symbol=r.numbers.symbols.percentSign,i.number*=100),-1!==e.indexOf("$")&&(i.style=Om,i.symbol=z2(r))}function J2(i){let r=i.format;if(r.indexOf("'")>-1||r.indexOf('"')>-1||r.indexOf("\\")>-1){const e=i.literals=[];i.format=r.replace(yN,function(n){const s=n.charAt(0).replace("\\",""),a=n.slice(1).replace(s,"");return e.push(a),"__??__"})}}const AN=/(\.(?:[0-9]*[1-9])?)0+$/g,ON=/\.$/,IN=/,/g;function q2(i,r,e){let n;return n=-1===i&&-1!==r?r:-1!==i&&-1===r?i:e?Math.min(i,r):Math.max(i,r),n}function zN(i,r,e){const n={negative:i<0,number:Math.abs(i),negativeZero:G2(i),format:r};return function FN(i){let{number:r,format:e}=i;if(e=e.split(";"),(i.negative||i.negativeZero)&&e[1])e=e[1],i.hasNegativeFormat=!0;else if(0===r){const n=e[2];e=n||e[0],n&&function NN(i){return-1===i.indexOf("#")&&-1===i.indexOf("0")}(n)&&(i.constant=n)}else e=e[0];i.format=e}(n),n.constant?n.constant:(J2(n),V2(n,e),function LN(i){i.hasGroup=i.format.indexOf(",")>-1,i.hasGroup&&(i.format=i.format.replace(IN,""))}(n),function RN(i){let{number:r,format:e}=i,n=e.indexOf(Ka);if(-1!==n){const s=e.lastIndexOf("0")-n,a=e.lastIndexOf("#")-n,d=s>-1,f=a>-1;let p=r.toString().split("e");p=p[1]?Im(r,Math.abs(p[1])):p[0],p=p.split(Ka)[1]||"";let g=p.length,b=-1;d||f?d&&s>a?g=s:a>s&&(f&&g>a?g=a:d&&g<s&&(g=s),b=d?s:0):(i.format=e.substring(0,n)+e.substring(n+1),n=-1,g=0),g>-1&&(r=Im(r,g),b>-1&&(r=function MN(i,r){let e;return e=0===r?AN:new RegExp(`(\\.[0-9]{${r}}[1-9]*)0+$`,"g"),i.replace(e,"$1").replace(ON,"")}(r,b)))}else r=Im(r);i.negative&&-1*r>=0&&!i.negativeZero&&(i.negative=!1),i.number=r,i.decimalIndex=n}(n),function PN(i){const r=i.format;let e=r.indexOf("#"),n=r.indexOf("0"),s=q2(e,n,!0);e=r.lastIndexOf("#"),n=r.lastIndexOf("0");let a=q2(e,n);s===r.length&&(a=s),i.start=s,i.end=a,i.lastZeroIndex=n}(n),function GN(i,r){let e=i.number;return-1!==i.start&&(e=function BN(i,r){const{start:e,end:n,negative:s,negativeZero:a,format:d,decimalIndex:f,lastZeroIndex:p,hasNegativeFormat:g,hasGroup:b}=i;let S=i.number;const k=S.toString().split(Ka),T=d.length,F=k[0],K=k[1]||"",fe=F.length;let Re="";S=d.substring(0,e),(s||a)&&!g&&(S+="-");for(let Ae=e;Ae<T;Ae++){let Qe=d.charAt(Ae);if(-1===f){if(n-Ae<fe){S+=F;break}}else if(-1!==p&&p<Ae&&(Re=""),f-Ae<=fe&&f-Ae>-1&&(S+=F,Ae=f),f===Ae){S+=(K?r.numbers.symbols.decimal:"")+K,Ae+=n-f+1;continue}"0"===Qe?(S+=Qe,Re=Qe):"#"===Qe&&(S+=Re)}return b&&(S=Z2(S,e+(s&&!g?1:0),Math.max(n,fe+e),r.numbers.decimal,r)),n>=e&&(S+=d.substring(n+1)),S}(i,r),e=function UN(i,r,e){let n=i;if(r===Om||r===Ah){n="";for(let s=0,a=i.length;s<a;s++){let d=i.charAt(s);n+="$"===d||"%"===d?e:d}}return n}(e,i.style,i.symbol),e=function DN(i,r){let e=i;if(r){const n=r.length;for(let s=0;s<n;s++)e=e.replace("__??__",r[s])}return e}(e,i.literals)),e}(n,e))}const ZN=/^(n|c|p|e|a)(\d*)$/i;function Y2(i){let r;return r=Ev(i)?function HN(i){const r=ZN.exec(i);if(r){const e={style:lk};let n=r[1].toLowerCase();return"c"===n?e.style=Om:"a"===n?e.style=wv:"p"===n?e.style=Ah:"e"===n&&(e.style=y2),r[2]&&(e.minimumFractionDigits=e.maximumFractionDigits=parseInt(r[2],10)),e}}(i):i,r}function K2(i,r="n",e=Ih){if(null==i)return"";if(!isFinite(i))return String(i);const n=Cd(e),s=Y2(r);let a;return a=s?TN(i,Object.assign({},n.numbers[s.style||lk],s),n):zN(i,r,n),a}function bk(i){return"number"==typeof i}const VN=/[eE][-+]?[0-9]+/,$2=/\u00A0/g;function W2(i,r){if(r.length>1){const e=(r[1]||"").replace("$","").split("n");if(i.indexOf(e[0])>-1&&i.indexOf(e[1])>-1)return i.replace(e[0],"").replace(e[1],"")}}const $N=/\{(\d+)}/g;function xk(i){const r=arguments;return i.replace($N,(e,n)=>r[parseInt(n,10)+1])}const j2=[2,1,5,3,4],n6={[(-2).toString()]:8,[(-1).toString()]:6,[2..toString()]:6,[1..toString()]:3},i6={numeric:1,"2-digit":2,short:3,long:4,narrow:5},r6=/[hHmsSzZoOvVxX]/,Q2=[{key:"era",specifier:"G"},{key:"year",specifier:"y"},{key:"month",specifier:"M"},{key:"day",specifier:"d"},{key:"weekday",specifier:"E"},{key:"hour",getSpecifier:function s6(i){return i.hour12?"h":"H"}},{key:"minute",specifier:"m"},{key:"second",specifier:"s"},{key:"timeZoneName",specifier:"z"}],X2={e:"c",E:"c",M:"L",Q:"q"},Ck={},Mh={};function Sk(i){return Ck[i]||(Ck[i]=new RegExp(i+"+")),Ck[i]}function Dv(i){const r=[];let e=i.charAt(0),n=e;for(let s=1;s<i.length;s++){let a=i.charAt(s);a===n?e+=a:(r.push(e),e=n=a)}return r.push(e),r}function Ek(i,r){const e=i.length;let s,a,n=-Number.MAX_VALUE;for(let d in r){const f=[];let p=d.replace("v","z"),g=0;for(let b=0;b<e;b++){const S=i[b];let T=(Sk(S[0]).exec(p)||[])[0];if(T){if(p=p.replace(T,""),T.length!==S.length){let F=Math.max(Math.min(j2[T.length]-j2[S.length],2),-2);g-=n6[F]}}else g-=120;if(f.push(T),g<n)break}p.length&&(g-=20*Dv(p).length),g>n&&(n=g,s=f,a=r[d])}a=a.replace("v","z");for(let d=0;d<e;d++){const f=s[d];if(f&&f!==i[d]){const p=s[d][0];a=a.replace(Sk(p),i[d]),X2[p]&&(a=a.replace(Sk(X2[p]),i[d]))}}return a}function wk(i,r){const e=r.calendar;let n;if(Ev(i))n=e.patterns[i]?e.patterns[i]:i;else if(i){if(i.pattern)return i.pattern;let s=i.skeleton;s||(i.datetime?n=xk(e.dateTimeFormats[i.datetime],e.timeFormats[i.datetime],e.dateFormats[i.datetime]):i.date?n=e.dateFormats[i.date]:i.time?n=e.timeFormats[i.time]:s=function l6(i){let r=[];for(let e=0;e<Q2.length;e++){let n=Q2[e],a=i[n.key];if(a){let d=n.specifier||n.getSpecifier(i);r.push(d.repeat(i6[a]))}}return r.join("")}(i)),s&&(n=function a6(i,r){const e=r.calendar.dateTimeFormats.availableFormats;if(e[i])return e[i];if(Mh[r.name]&&Mh[r.name][i])return Mh[r.name][i];const n=i.search(r6);let s;if(n>0){const a=i.substr(0,n),d=i.substr(n);s=xk(r.calendar.dateTimeFormats.short,e[d]||Ek(Dv(d),e),e[a]||Ek(Dv(a),e))}else s=Ek(Dv(i),e);return function o6(i,r,e){Mh[e]||(Mh[e]={}),Mh[e][i]=r}(i,s,r.name),s}(s,r))}return n||(n=e.patterns.d),n}function eD(i){let r;return i<=3?r="abbreviated":4===i?r="wide":5===i?r="narrow":6===i&&(r="short"),r}function _o(i,r,e,n,s){return N2(i,{type:r,nameType:eD(e),standAlone:n,lower:s})}function tD(i){return"function"==typeof i}function kk(i){return Boolean(i)&&tD(i.getTime)&&tD(i.getMonth)}const Av="hour",Ov="zone",Tk="weekday",iD="quarter",c6={G:"era",y:"year",q:iD,Q:iD,M:"month",L:"month",d:"day",E:Tk,c:Tk,e:Tk,h:Av,H:Av,k:Av,K:Av,m:"minute",s:"second",S:"millisecond",a:"dayperiod",x:Ov,X:Ov,z:Ov,Z:Ov},Nm=/d{1,2}|E{1,6}|e{1,6}|c{3,6}|c{1}|M{1,5}|L{1,5}|y{1,4}|H{1,2}|h{1,2}|k{1,2}|K{1,2}|m{1,2}|a{1,5}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|x{1,5}|X{1,5}|G{1,5}|q{1,5}|Q{1,5}|"[^"]*"|'[^']*'/g;function rD(i,r,e,n){return r<=2?zr(i+1,r):_o(e,"months",r,n)[i]}function sD(i,r,e,n){const s=Math.floor(i.getMonth()/3);return r<3?s+1:_o(e,"quarters",r,n)[s]}function Iv(i,r,e){const{shortHours:n,optionalMinutes:s,separator:a,localizedName:d,zZeroOffset:f}=e,p=i.getTimezoneOffset()/60;if(0===p&&f)return"Z";const g=p<=0?"+":"-",b=Math.abs(p).toString().split("."),S=b[1]||0;let k=g+(n?b[0]:zr(b[0],2));return(S||!s)&&(k+=(a?":":"")+zr(S,2)),d&&(k=xk(0===p?r.calendar.gmtZeroFormat:r.calendar.gmtFormat,k)),k}function oD(i,r,e,n){let s;return s=r<3?function d6(i,r,e){const n=B2(e);let s;return s=i<n?7-n+i:i-n,s+1}(i.getDay(),0,e):_o(e,"days",r,n)[i.getDay()],s}const oi={};function aD(i,r,e=Ih){if(!kk(i))return i??"";const n=Cd(e);return wk(r,n).replace(Nm,function(a){let f,d=a.length;return f=a.includes("'")||a.includes('"')?a.slice(1,d-1):oi[a[0]](i,d,n),f})}function lD(i,r,e){const n=i.getTimezoneOffset(),s=new Date(i.getTime()+6e4*(r-e)),a=s.getTimezoneOffset();return new Date(s.getTime()+6e4*(a-n))}oi.d=function(i,r){return zr(i.getDate(),r)},oi.E=function(i,r,e){return _o(e,"days",r)[i.getDay()]},oi.M=function(i,r,e){return rD(i.getMonth(),r,e,!1)},oi.L=function(i,r,e){return rD(i.getMonth(),r,e,!0)},oi.y=function(i,r){let e=i.getFullYear();return 2===r&&(e%=100),zr(e,r)},oi.h=function(i,r){return zr(i.getHours()%12||12,r)},oi.H=function(i,r){return zr(i.getHours(),r)},oi.k=function(i,r){return zr(i.getHours()||24,r)},oi.K=function(i,r){return zr(i.getHours()%12,r)},oi.m=function(i,r){return zr(i.getMinutes(),r)},oi.s=function(i,r){return zr(i.getSeconds(),r)},oi.S=function(i,r){const e=i.getMilliseconds();let n;return n=0!==e?zr(String(e/1e3).split(".")[1].substr(0,r),r,!0):zr("",r),n},oi.a=function(i,r,e){return _o(e,"dayPeriods",r)[i.getHours()<12?"am":"pm"]},oi.z=function(i,r,e){return Iv(i,e,{shortHours:r<4,optionalMinutes:r<4,separator:!0,localizedName:!0})},oi.Z=function(i,r,e){return Iv(i,e,{separator:r>3,localizedName:4===r,zZeroOffset:5===r})},oi.x=function(i,r,e){return Iv(i,e,{optionalMinutes:1===r,separator:3===r||5===r})},oi.X=function(i,r,e){return Iv(i,e,{optionalMinutes:1===r,separator:3===r||5===r,zZeroOffset:!0})},oi.G=function(i,r,e){let n=i.getFullYear()>=0?1:0;return _o(e,"eras",r)[n]},oi.e=oD,oi.c=function(i,r,e){return oD(i,r,e,!0)},oi.q=function(i,r,e){return sD(i,r,e,!0)},oi.Q=sD;const h6=/([+|-]\d{1,2})(:?)(\d{2})?/,f6=/^\/Date\((.*?)\)\/$/,p6=/[+-]\d*/,m6={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},g6=/\d+/,_6=/^ */,v6=/ *$/,b6=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","E MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.SSSSSSSXXX","yyyy-MM-ddTHH:mm:ss.SSSXXX","yyyy-MM-ddTHH:mm:ss.SSXXX","yyyy-MM-ddTHH:mm:ssXXX","yyyy-MM-ddTHH:mm:ss.SSSSSSS","yyyy-MM-ddTHH:mm:ss.SSS","yyyy-MM-ddTHH:mmXXX","yyyy-MM-ddTHH:mmX","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"],dD=["G","g","F","Y","y","M","m","D","d","y","T","t"];function zs(i,r,e){return!(i>=r&&i<=e)}function cr(i,r){let{format:e,idx:n}=r,s=0;for(;e[n]===i;)s++,n++;return s>0&&(n-=1),r.idx=n,s}function na(i,r){let e=i?m6[i]||new RegExp("^\\d{1,"+i+"}"):g6,n=r.value.substr(r.valueIdx,i).match(e);return n?(n=n[0],r.valueIdx+=n.length,parseInt(n,10)):null}function Sd(i,r,e){let a,d,g,n=0,s=i.length,f=0,p=0;for(;n<s;n++)a=i[n],d=a.length,g=r.value.substr(r.valueIdx,d),e&&(g=g.toLowerCase()),g===a&&d>f&&(f=d,p=n);return f?(r.valueIdx+=f,p+1):null}function yk(i){let r=!1;return i.value.charAt(i.valueIdx)===i.format[i.idx]&&(i.valueIdx++,r=!0),r}function Mv(i,r,e){const{shortHours:n,noSeparator:s,optionalMinutes:a,localizedName:d,zLiteral:f}=e;if(i.UTC=!0,f&&"Z"===i.value.charAt(i.valueIdx))return i.valueIdx++,!1;if(d&&!Sd(function C6(i){const{gmtFormat:r,gmtZeroFormat:e}=i;if(!r)throw yh.NoGMTInfo.error();return[r.replace("{0}","").toLowerCase(),e.replace("{0}","").toLowerCase()]}(r.calendar),i,!0))return!0;const p=h6.exec(i.value.substr(i.valueIdx,6));if(!p)return!d;const g=p[1],b=p[3],S=parseInt(g,10),k=p[2];let T=parseInt(b,10);if(isNaN(S)||!n&&3!==g.length||!a&&isNaN(T)||s&&k||(isNaN(T)&&(T=null),zs(S,-12,13)||T&&zs(T,0,59)))return!0;i.valueIdx+=p[0].length,i.hoursOffset=S,i.minutesOffset=T}function uD(i,r,e){const n=cr(i,r),s=_o(e,"months",n,"L"===i,!0),a=n<3?na(2,r):Sd(s,r,!0);if(null===a||zs(a,1,12))return!0;r.month=a-1}function hD(i,r,e){const n=cr(i,r),s=_o(e,"days",n,"c"===i,!0);let a=n<3?na(1,r):Sd(s,r,!0);if(!a&&0!==a||zs(a,1,7))return!0}const fi={};function E6(i,r){return`${_6.exec(r)[0]}${i}${v6.exec(r)[0]}`}function w6(i,r,e){let n=wk(r,e).split("");const s={format:n,idx:0,value:E6(i,r),valueIdx:0,year:null,month:null,day:null,hours:null,minutes:null,seconds:null,milliseconds:null},a=n.length;let d=!1;for(;s.idx<a;s.idx++){let f=n[s.idx];if(d)"'"===f&&(d=!1),yk(s);else if(fi[f]){if(fi[f](s,e))return null}else if("'"===f)d=!0,yk(s);else if(!yk(s))return null}return s.valueIdx<i.length?null:function S6(i){let{year:r,month:e,day:n,hours:s,minutes:a,seconds:d,milliseconds:f,pmHour:p,UTC:g,hoursOffset:b,minutesOffset:S}=i;const k=null!==s||null!==a||d||null,T=new Date;let F;return null===r&&null===e&&null===n&&k?(r=T.getFullYear(),e=T.getMonth(),n=T.getDate()):(null===r&&(r=T.getFullYear()),null===n&&(n=1)),p&&s<12&&(s+=12),g?(b&&(s+=-b),S&&(a+=-S*(b<0?-1:1)),F=new Date(Date.UTC(r,e,n,s,a,d,f))):(F=new Date(r,e,n,s,a,d,f),function u6(i,r){!r&&23===i.getHours()&&i.setHours(i.getHours()+2)}(F,s)),r<100&&F.setFullYear(r),F.getDate()!==n&&void 0===g?null:F}(s)||null}fi.d=function(i){cr("d",i);const r=na(2,i);if(null===r||zs(r,1,31))return!0;null===i.day&&(i.day=r)},fi.E=function(i,r){if(null===Sd(_o(r,"days",cr("E",i),!1,!0),i,!0))return!0},fi.M=function(i,r){return uD("M",i,r)},fi.L=function(i,r){return uD("L",i,r)},fi.y=function(i){const r=cr("y",i);let e=na(1===r?void 0:r,i);if(null===e)return!0;if(2===r){const n=(new Date).getFullYear();e=n-n%100+e,e>2029&&(e-=100)}i.year=e},fi.h=function(i){cr("h",i);let r=na(2,i);if(12===r&&(r=0),null===r||zs(r,0,11))return!0;i.hours=r},fi.K=function(i){cr("K",i);let r=na(2,i);if(null===r||zs(r,0,11))return!0;i.hours=r},fi.a=function(i,r){let n=_o(r,"dayPeriods",cr("a",i),!1,!0);const s=Sd([n.pm],i,!0);if(!s&&!Sd([n.am],i,!0))return!0;i.pmHour=s},fi.H=function(i){cr("H",i);const r=na(2,i);if(null===r||zs(r,0,23))return!0;i.hours=r},fi.k=function(i){cr("k",i);let r=na(2,i);if(null===r||zs(r,1,24))return!0;i.hours=24===r?0:r},fi.m=function(i){cr("m",i);const r=na(2,i);if(null===r||zs(r,0,59))return!0;i.minutes=r},fi.s=function(i){cr("s",i);const r=na(2,i);if(null===r||zs(r,0,59))return!0;i.seconds=r},fi.S=function(i){const r=cr("S",i),e=i.value.substr(i.valueIdx,r);let n=null;if(isNaN(parseInt(e,10))||(n=parseFloat("0."+e,10),n=Im(n,3),n*=1e3,i.valueIdx+=r),null===n||zs(n,0,999))return!0;i.milliseconds=n},fi.z=function(i,r){const n=cr("z",i)<4,s=Mv(i,r,{shortHours:n,optionalMinutes:n,localizedName:!0});if(s)return s},fi.Z=function(i,r){const e=cr("Z",i),n=Mv(i,r,{noSeparator:e<4,zLiteral:5===e,localizedName:4===e});if(n)return n},fi.x=function(i,r){const e=cr("x",i),n=Mv(i,r,{noSeparator:3!==e&&5!==e,optionalMinutes:1===e});if(n)return n},fi.X=function(i,r){const e=cr("X",i),n=Mv(i,r,{noSeparator:3!==e&&5!==e,optionalMinutes:1===e,zLiteral:!0});if(n)return n},fi.G=function(i,r){const n=_o(r,"eras",cr("G",i),!1,!0);if(null===Sd([n[0],n[1]],i,!0))return!0},fi.e=function(i,r){return hD("e",i,r)},fi.c=function(i,r){return hD("c",i,r)};const A6={month:{type:"months",minLength:3,standAlone:"L"},quarter:{type:"quarters",minLength:3,standAlone:"q"},weekday:{type:"days",minLength:{E:0,c:3,e:3},standAlone:"c"},dayperiod:{type:"dayPeriods",minLength:0},era:{type:"eras",minLength:0}},fD="literal";function Dk(i,r){const e=i[i.length-1];e&&e.type===fD?e.pattern+=r:i.push({type:fD,pattern:r})}function O6(i){return"h"===i||"K"===i}const M6=/\{(\d+)(:[^}]+)?\}/g;function pD(i,r,e){if(r){if(kk(i))return aD(i,r,e);if(bk(i))return K2(i,r,e)}return i??""}const $a="http://www.telerik.com/kendo-angular-ui/components/internationalization/troubleshooting/",mD={NoCurrency:`Solution: ${$a}#toc-no-currency`,NoCurrencyDisplay:`Solution: ${$a}#toc-no-currency-display`,NoCurrencyRegion:`Solution: ${$a}#toc-no-currency-region`,NoDateFieldNames:`Solution: ${$a}#toc-no-date-filed-names`,NoFirstDay:`Solution: ${$a}#toc-no-first-day`,NoGMTInfo:`Solution: ${$a}#toc-no-gmt-info`,NoLocale:`Solution: ${$a}#toc-no-locale`,NoValidCurrency:`Solution: ${$a}#toc-no-valid-currency`,NoWeekData:`Solution: ${$a}#toc-no-week-data`};function vs(i){return function(...r){try{return i.apply(null,r)}catch(e){throw e.message=function gD(i){const r=i.message,e=mD[Object.keys(mD).filter(n=>0===r.indexOf(n))[0]];return e?`${r} ${e}`:r}(e),e}}}vs(N2),vs(function QR(i,r=Ih){const n=Cd(r).calendar.dateFields;if(!n)throw yh.NoDateFieldNames.error();const s=n[i.type]||{};return s[i.nameType]||s.wide}),vs(B2),vs(function R6(i,r,e){return i.replace(M6,function(n,s,a){return pD(r[parseInt(s,10)],a?a.substring(1):"",e)})}),vs(aD),vs(K2),vs(function jR(){const i=arguments.length;for(let r=0;r<i;r++){let e=arguments[r];if(e.main){let n=Object.keys(e.main)[0],s=e.main[n],a=qn[n]=qn[n]||{};s.units?$R(a,s.units):(a.name=a.name||n,a.identity=a.identity||s.identity,yv(a),WR(n,s))}else if(e.supplemental)if(e.supplemental.weekData)qn.supplemental.weekData={firstDay:e.supplemental.weekData.firstDay,weekendStart:e.supplemental.weekData.weekendStart,weekendEnd:e.supplemental.weekData.weekendEnd};else if(e.supplemental.likelySubtags)qn.supplemental.likelySubtags=Object.assign(qn.supplemental.likelySubtags,e.supplemental.likelySubtags);else if(e.supplemental.currencyData){const n=qn.supplemental.currencyData;n.region=Object.assign(n.region||{},e.supplemental.currencyData.region),n.fractions=Object.assign(n.fractions||{},e.supplemental.currencyData.fractions)}}}),vs(function vN(i){return Dh(i).numbers.symbols}),vs(function D6(i,r,e=Ih){if(!i)return null;if(kk(i))return i;let n=String(i).trim(),s=function T6(i){if(i&&0===i.indexOf("/D")){let r=f6.exec(i);if(r){r=r[1];let e=p6.exec(r.substring(1));return r=new Date(parseInt(r,10)),e&&(e=function k6(i){const r="-"===i.substr(0,1)?-1:1;let e=i.substring(1);return e=60*parseInt(e.substr(0,2),10)+parseInt(e.substring(2),10),r*e}(e[0]),r=lD(r,r.getTimezoneOffset(),0),r=lD(r,0,-1*e)),r}}}(n);if(s)return s;const a=Cd(e);let d=r||function y6(i){const r=[],e=i.patterns,n=dD.length;for(let s=0;s<n;s++)r.push(e[dD[s]]);return r.concat(b6)}(a.calendar);d=Array.isArray(d)?d:[d];const f=d.length;for(let p=0;p<f;p++)if(s=w6(n,d[p],a),s)return s;return s}),vs(function KN(i,r=Ih,e={}){if(!i&&0!==i)return null;if(bk(i))return i;const n=Cd(r),s=n.numbers.symbols;let f,a=i.toString(),d=e||{};if(Ev(e)&&(d={format:e},J2(d),a=function qN(i,r){const e=r.literals;let n=i;if(e)for(let s=0;s<e.length;s++)n=n.replace(e[s],"");return n}(a,d),V2(d,n)),(d.style===Ah||a.indexOf(s.percentSign)>-1)&&(a=a.replace(s.percentSign,""),f=!0),VN.test(a))return a=parseFloat(a.replace(s.decimal,Ka)),isNaN(a)?null:a;const{negative:p,number:g}=function JN(i,r,e){const n=Y2(e)||{};let d,s=vk(n.style),a=i;const f=n.currency||U2(r,s);if(f){const p=function dN(i,r,e=!0){const n=P2(i,r,e);if(n){if(!n.displays){const s=[r];for(let a in n)s.push(n[a]);s.sort(lN),n.displays=s}return n.displays}}(r,f,s);if(p)for(let g=0;g<p.length;g++){let b=p[g];if(a.includes(b)){a=a.replace(b,""),s=!0;break}}if(s){const g=W2(a,r.numbers.currency.patterns)||W2(a,r.numbers.accounting.patterns);g&&(d=!0,a=g)}}return{number:a,negative:d}}(a,n,d);a=String(g).trim();const b=a.indexOf("-");if(b>0)return null;let S=b>-1;return S=void 0!==p?p:S,a=a.replace("-","").replace($2," ").split(s.group.replace($2," ")).join("").replace(s.decimal,Ka),a=parseFloat(a),isNaN(a)?a=null:S&&(a*=-1),a&&f&&(a=function YN(i){const r=String(i),e=r.indexOf(Ka);let s=i/Math.pow(10,2);return-1===e||String(s).length<=r.length+2?s:parseFloat(s.toFixed(r.length-e+1+2))}(a)),a}),vs(function I6(i,r=Ih){const n=wk(i,Cd(r)),s=[];let a=Nm.lastIndex=0,d=Nm.exec(n);for(;d;){let f=d[0];if(a<d.index&&Dk(s,n.substring(a,d.index)),f.startsWith('"')||f.startsWith("'"))Dk(s,f);else{const p=f[0],g=c6[p],b={type:g,pattern:f};"hour"===g&&(b.hour12=O6(f));const S=A6[g];if(S){const k=bk(S.minLength)?S.minLength:S.minLength[p],T=f.length;T>=k&&(b.names={type:S.type,nameType:eD(T),standAlone:S.standAlone===p})}s.push(b)}a=Nm.lastIndex,d=Nm.exec(n)}return a<n.length&&Dk(s,n.substring(a)),s}),vs(pD),vs(function _N(i){const r=Dh(i);if(r.weekendRange)return r.weekendRange;const e=qn.supplemental.weekData;if(!e)throw gN.error();const n=yv(r),a=e.weekendEnd[n]||e.weekendEnd["001"];return r.weekendRange={start:gk.indexOf(e.weekendStart[n]||e.weekendStart["001"]),end:gk.indexOf(a)},r.weekendRange});class Ed{}function eF(i){return function(r){return this[i]!==r&&(this[i]=r,this.geometryChange()),this}}function tF(i){return function(){return this[i]}}const Pv=(i,r)=>{const e=class extends i{};return function nF(i,r){for(let e=0;e<r.length;e++){let n=r[e],s=n.charAt(0).toUpperCase()+n.substring(1,n.length);i["set"+s]=eF(n),i["get"+s]=tF(n)}}(e.prototype,r),e},kd=class iF extends Ed{observers(){return this._observers=this._observers||[],this._observers}addObserver(r){return this._observers?this._observers.push(r):this._observers=[r],this}removeObserver(r){const e=this.observers(),n=e.indexOf(r);return-1!==n&&e.splice(n,1),this}trigger(r,e){const n=this._observers;if(n&&!this._suspended)for(let s=0;s<n.length;s++){let a=n[s];a[r]&&a[r](e)}return this}optionsChange(r={}){r.element=this,this.trigger("optionsChange",r)}geometryChange(){this.trigger("geometryChange",{element:this})}suspend(){return this._suspended=(this._suspended||0)+1,this}resume(){return this._suspended=Math.max((this._suspended||0)-1,0),this}_observerField(r,e){this[r]&&this[r].removeObserver(this),this[r]=e,e.addObserver(this)}};function Vn(i,r){const e=function rF(i){return i?Math.pow(10,i):1}(r);return Math.round(i*e)/e}function bs(i){return void 0!==i}const Ik=Math.PI/180,Nh=Number.MAX_VALUE,Fh=-Number.MAX_VALUE;function ja(i){return i*Ik}class vo extends Ed{constructor(r=0,e=0,n=0,s=0,a=0,d=0){super(),this.a=r,this.b=e,this.c=n,this.d=s,this.e=a,this.f=d}multiplyCopy(r){return new vo(this.a*r.a+this.c*r.b,this.b*r.a+this.d*r.b,this.a*r.c+this.c*r.d,this.b*r.c+this.d*r.d,this.a*r.e+this.c*r.f+this.e,this.b*r.e+this.d*r.f+this.f)}invert(){const{a:r,b:e,c:n,d:s,e:a,f:d}=this,f=r*s-e*n;return 0===f?null:new vo(s/f,-e/f,-n/f,r/f,(n*d-s*a)/f,(e*a-r*d)/f)}clone(){return new vo(this.a,this.b,this.c,this.d,this.e,this.f)}equals(r){return!!r&&this.a===r.a&&this.b===r.b&&this.c===r.c&&this.d===r.d&&this.e===r.e&&this.f===r.f}round(r){return this.a=Vn(this.a,r),this.b=Vn(this.b,r),this.c=Vn(this.c,r),this.d=Vn(this.d,r),this.e=Vn(this.e,r),this.f=Vn(this.f,r),this}toArray(r){const e=[this.a,this.b,this.c,this.d,this.e,this.f];if(bs(r))for(let n=0;n<e.length;n++)e[n]=Vn(e[n],r);return e}toString(r,e=","){return this.toArray(r).join(e)}static translate(r,e){return new vo(1,0,0,1,r,e)}static unit(){return new vo(1,0,0,1,0,0)}static rotate(r,e,n){const s=new vo;return s.a=Math.cos(ja(r)),s.b=Math.sin(ja(r)),s.c=-s.b,s.d=s.a,s.e=e-e*s.a+n*s.b||0,s.f=n-n*s.a-e*s.b||0,s}static scale(r,e){return new vo(r,0,0,e,0,0)}}vo.IDENTITY=vo.unit();const Zs=vo;function Mk(i){return i&&"function"==typeof i.matrix?i.matrix():i}class xs extends(Pv(kd,["x","y"])){constructor(r,e){super(),this.x=r||0,this.y=e||0}equals(r){return r&&r.x===this.x&&r.y===this.y}clone(){return new xs(this.x,this.y)}rotate(r,e){const n=xs.create(e)||xs.ZERO;return this.transform(Zs.rotate(r,n.x,n.y))}translate(r,e){return this.x+=r,this.y+=e,this.geometryChange(),this}translateWith(r){return this.translate(r.x,r.y)}move(r,e){return this.x=this.y=0,this.translate(r,e)}scale(r,e=r){return this.x*=r,this.y*=e,this.geometryChange(),this}scaleCopy(r,e){return this.clone().scale(r,e)}transform(r){const e=Mk(r),{x:n,y:s}=this;return this.x=e.a*n+e.c*s+e.e,this.y=e.b*n+e.d*s+e.f,this.geometryChange(),this}transformCopy(r){const e=this.clone();return r&&e.transform(r),e}distanceTo(r){const e=this.x-r.x,n=this.y-r.y;return Math.sqrt(e*e+n*n)}round(r){return this.x=Vn(this.x,r),this.y=Vn(this.y,r),this.geometryChange(),this}toArray(r){const e=bs(r);return[e?Vn(this.x,r):this.x,e?Vn(this.y,r):this.y]}toString(r,e=" "){let{x:n,y:s}=this;return bs(r)&&(n=Vn(n,r),s=Vn(s,r)),n+e+s}static create(r,e){if(bs(r))return r instanceof xs?r:1===arguments.length&&2===r.length?new xs(r[0],r[1]):new xs(r,e)}static min(){let r=Nh,e=Nh;for(let n=0;n<arguments.length;n++){let s=arguments[n];r=Math.min(s.x,r),e=Math.min(s.y,e)}return new xs(r,e)}static max(){let r=Fh,e=Fh;for(let n=0;n<arguments.length;n++){const s=arguments[n];r=Math.max(s.x,r),e=Math.max(s.y,e)}return new xs(r,e)}static minPoint(){return new xs(Fh,Fh)}static maxPoint(){return new xs(Nh,Nh)}static get ZERO(){return new xs(0,0)}}const un=xs;class Td extends(Pv(kd,["width","height"])){constructor(r,e){super(),this.width=r||0,this.height=e||0}equals(r){return r&&r.width===this.width&&r.height===this.height}clone(){return new Td(this.width,this.height)}toArray(r){const e=bs(r);return[e?Vn(this.width,r):this.width,e?Vn(this.height,r):this.height]}static create(r,e){if(bs(r))return r instanceof Td?r:1===arguments.length&&2===r.length?new Td(r[0],r[1]):new Td(r,e)}static get ZERO(){return new Td(0,0)}}const Uv=Td;class ec extends kd{constructor(r=new un,e=new Uv,n=0){super(),this.setOrigin(r),this.setSize(e),this.setCornerRadius(n)}clone(){return new ec(this.origin.clone(),this.size.clone())}equals(r){return r&&r.origin.equals(this.origin)&&r.size.equals(this.size)}setOrigin(r){return this._observerField("origin",un.create(r)),this.geometryChange(),this}getOrigin(){return this.origin}setCornerRadius(r){return this.cornerRadius=Array.isArray(r)?r:[r,r],this.geometryChange(),this}getCornerRadius(){return this.cornerRadius}setSize(r){return this._observerField("size",Uv.create(r)),this.geometryChange(),this}getSize(){return this.size}width(){return this.size.width}height(){return this.size.height}topLeft(){return this.origin.clone()}bottomRight(){return this.origin.clone().translate(this.width(),this.height())}topRight(){return this.origin.clone().translate(this.width(),0)}bottomLeft(){return this.origin.clone().translate(0,this.height())}center(){return this.origin.clone().translate(this.width()/2,this.height()/2)}bbox(r){const e=this.topLeft().transformCopy(r),n=this.topRight().transformCopy(r),s=this.bottomRight().transformCopy(r),a=this.bottomLeft().transformCopy(r);return ec.fromPoints(e,n,s,a)}transformCopy(r){return ec.fromPoints(this.topLeft().transform(r),this.bottomRight().transform(r))}expand(r,e=r){return this.size.width+=2*r,this.size.height+=2*e,this.origin.translate(-r,-e),this}expandCopy(r,e){return this.clone().expand(r,e)}containsPoint(r){const e=this.origin,n=this.bottomRight();return!(r.x<e.x||r.y<e.y||n.x<r.x||n.y<r.y)}_isOnPath(r,e){const n=this.expandCopy(e,e),s=this.expandCopy(-e,-e);return n.containsPoint(r)&&!s.containsPoint(r)}static fromPoints(){const r=un.min.apply(null,arguments),e=un.max.apply(null,arguments),n=new Uv(e.x-r.x,e.y-r.y);return new ec(r,n)}static union(r,e){return ec.fromPoints(un.min(r.topLeft(),e.topLeft()),un.max(r.bottomRight(),e.bottomRight()))}static intersect(r,e){const n={left:r.topLeft().x,top:r.topLeft().y,right:r.bottomRight().x,bottom:r.bottomRight().y},s={left:e.topLeft().x,top:e.topLeft().y,right:e.bottomRight().x,bottom:e.bottomRight().y};if(n.left<=s.right&&s.left<=n.right&&n.top<=s.bottom&&s.top<=n.bottom)return ec.fromPoints(new un(Math.max(n.left,s.left),Math.max(n.top,s.top)),new un(Math.min(n.right,s.right),Math.min(n.bottom,s.bottom)))}}const Lh=ec;function SD(i,r,e,n){let s=0,a=0;return n&&(s=Math.atan2(n.c*e,n.a*r),0!==n.b&&(a=Math.atan2(n.d*e,n.b*r))),{x:s,y:a}}const ED=Math.PI/2;class Rk extends(Pv(kd,["radius"])){constructor(r=new un,e=0){super(),this.setCenter(r),this.setRadius(e)}setCenter(r){return this._observerField("center",un.create(r)),this.geometryChange(),this}getCenter(){return this.center}equals(r){return r&&r.center.equals(this.center)&&r.radius===this.radius}clone(){return new Rk(this.center.clone(),this.radius)}pointAt(r){return this._pointAt(ja(r))}bbox(r){const e=SD(0,this.radius,this.radius,r);let n=un.maxPoint(),s=un.minPoint();for(let a=0;a<4;a++){let d=this._pointAt(e.x+a*ED).transformCopy(r),f=this._pointAt(e.y+a*ED).transformCopy(r),p=new un(d.x,f.y);n=un.min(n,p),s=un.max(s,p)}return Lh.fromPoints(n,s)}_pointAt(r){const{center:e,radius:n}=this;return new un(e.x+n*Math.cos(r),e.y+n*Math.sin(r))}containsPoint(r){const{center:e,radius:n}=this;return Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2)<=Math.pow(n,2)}_isOnPath(r,e){const{center:n,radius:s}=this,a=n.distanceTo(r);return s-e<=a&&a<=s+e}}const oF=Rk;function tc(i){return i/Ik}function wD(i,r,e=10){return 0===Vn(Math.abs(i-r),e)}function Nk(i,r,e){return i<r||wD(i,r,e)}class Fk extends kd{constructor(r=Zs.unit()){super(),this._matrix=r}clone(){return new Fk(this._matrix.clone())}equals(r){return r&&r._matrix.equals(this._matrix)}translate(r,e){return this._matrix=this._matrix.multiplyCopy(Zs.translate(r,e)),this._optionsChange(),this}scale(r,e=r,n=null){let s=n;return s&&(s=un.create(s),this._matrix=this._matrix.multiplyCopy(Zs.translate(s.x,s.y))),this._matrix=this._matrix.multiplyCopy(Zs.scale(r,e)),s&&(this._matrix=this._matrix.multiplyCopy(Zs.translate(-s.x,-s.y))),this._optionsChange(),this}rotate(r,e){const n=un.create(e)||un.ZERO;return this._matrix=this._matrix.multiplyCopy(Zs.rotate(r,n.x,n.y)),this._optionsChange(),this}multiply(r){const e=Mk(r);return this._matrix=this._matrix.multiplyCopy(e),this._optionsChange(),this}matrix(r){return r?(this._matrix=r,this._optionsChange(),this):this._matrix}_optionsChange(){this.optionsChange({field:"transform",value:this})}}const Lk=Fk;function Fm(i){return null===i?null:i instanceof Lk?i:new Lk(i)}const Bv=Math.pow,cF=["radiusX","radiusY","startAngle","endAngle","anticlockwise"];class Gv extends(Pv(kd,cF)){constructor(r=new un,e={}){super(),this.setCenter(r),this.radiusX=e.radiusX,this.radiusY=e.radiusY||e.radiusX,this.startAngle=e.startAngle,this.endAngle=e.endAngle,this.anticlockwise=e.anticlockwise||!1,this.xRotation=e.xRotation}clone(){return new Gv(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})}setCenter(r){return this._observerField("center",un.create(r)),this.geometryChange(),this}getCenter(){return this.center}pointAt(r){const e=this.center,n=ja(r);return new un(e.x+this.radiusX*Math.cos(n),e.y+this.radiusY*Math.sin(n))}curvePoints(){const r=this.startAngle,e=this.anticlockwise?-1:1,n=[this.pointAt(r)],s=this._arcInterval(),a=s.endAngle-s.startAngle,d=Math.ceil(a/45),f=a/d;let g,p=r;this.xRotation&&(g=Fm().rotate(this.xRotation,this.center));for(let b=1;b<=d;b++){const S=p+e*f,k=this._intervalCurvePoints(p,S,g);n.push(k.cp1,k.cp2,k.p2),p=S}return n}bbox(r){const e=this._arcInterval(),n=e.startAngle,s=e.endAngle,a=SD(0,this.radiusX,this.radiusY,r),d=tc(a.x),f=tc(a.y),p=this.pointAt(s).transformCopy(r);let g=TD(d,n),b=TD(f,n),S=this.pointAt(n).transformCopy(r),k=un.min(S,p),T=un.max(S,p);for(;g<s||b<s;){let F,K;g<s&&(F=this.pointAt(g).transformCopy(r),g+=90),b<s&&(K=this.pointAt(b).transformCopy(r),b+=90),S=new un(F.x,K.y),k=un.min(k,S),T=un.max(T,S)}return Lh.fromPoints(k,T)}_arcInterval(){let{startAngle:r,endAngle:e,anticlockwise:n}=this;if(n){let s=r;r=e,e=s}return(r>e||n&&r===e)&&(e+=360),{startAngle:r,endAngle:e}}_intervalCurvePoints(r,e,n){const s=this.pointAt(r),a=this.pointAt(e),d=this._derivativeAt(r),f=this._derivativeAt(e),p=(ja(e)-ja(r))/3,g=new un(s.x+p*d.x,s.y+p*d.y),b=new un(a.x-p*f.x,a.y-p*f.y);return n&&(s.transform(n),a.transform(n),g.transform(n),b.transform(n)),{p1:s,cp1:g,cp2:b,p2:a}}_derivativeAt(r){const e=ja(r);return new un(-this.radiusX*Math.sin(e),this.radiusY*Math.cos(e))}containsPoint(r){const e=this._arcInterval(),n=e.endAngle-e.startAngle,{center:s,radiusX:a,radiusY:d}=this,f=s.distanceTo(r),p=Math.atan2(r.y-s.y,r.x-s.x),g=a*d/Math.sqrt(Bv(a,2)*Bv(Math.sin(p),2)+Bv(d,2)*Bv(Math.cos(p),2)),b=this.pointAt(this.startAngle).round(10),S=this.pointAt(this.endAngle).round(10),k=function aF(i,r,e,n){const s=r.x-i.x,a=n.x-e.x,d=r.y-i.y,f=n.y-e.y,p=i.x-e.x,g=i.y-e.y,b=s*f-a*d,S=(s*g-d*p)/b,k=(a*g-f*p)/b;if(S>=0&&S<=1&&k>=0&&k<=1)return new un(i.x+k*s,i.y+k*d)}(s,r.round(10),b,S);let T;if(n<180)T=k&&Nk(s.distanceTo(k),f)&&Nk(f,g);else{let F=kD(s.x,s.y,a,d,r.x,r.y);360!==F&&(F=(360+F)%360);let K=e.startAngle<=F&&F<=e.endAngle;T=K&&Nk(f,g)||!K&&(!k||k.equals(r))}return T}_isOnPath(r,e){const n=this._arcInterval(),s=this.center;let a=kD(s.x,s.y,this.radiusX,this.radiusY,r.x,r.y);return 360!==a&&(a=(360+a)%360),n.startAngle<=a&&a<=n.endAngle&&this.pointAt(a).distanceTo(r)<=e}static fromPoints(r,e,n,s,a,d,f){const p=function dF(i){let{x1:r,y1:e,x2:n,y2:s,rx:a,ry:d,largeArc:f,swipe:p,rotation:g=0}=i;const b=ja(g),S=Math.cos(b),k=Math.sin(b),T=S*(r-n)/2+k*(e-s)/2,F=-k*(r-n)/2+S*(e-s)/2,K=f!==p?1:-1,fe=Math.pow(T,2),Re=Math.pow(F,2);let Ae=Math.pow(a,2),Qe=Math.pow(d,2),Ut=fe/Ae+Re/Qe;Ut>1&&(Ut=Math.sqrt(fe/Ae+Re/Qe),a*=Ut,Ae=Math.pow(a,2),d*=Ut,Qe=Math.pow(d,2));let yt=K*Math.sqrt((Ae*Qe-Ae*Re-Qe*fe)/(Ae*Re+Qe*fe));isNaN(yt)&&(yt=0);const kn=yt*(a*F)/d,bn=d*T*-yt/a,tt=S*kn-k*bn+(r+n)/2,hn=k*kn+S*bn+(e+s)/2,ss=(T-kn)/a,la=(F-bn)/d,Jd=-(T+kn)/a,qd=-(F+bn)/d,ig=(la>=0?1:-1)*tc(Math.acos(ss/Math.sqrt(ss*ss+la*la))),Vb=Vn((ss*Jd+la*qd)/(Math.sqrt(ss*ss+la*la)*Math.sqrt(Jd*Jd+qd*qd)),10);let dc=(ss*qd-la*Jd>=0?1:-1)*tc(Math.acos(Vb));!p&&dc>0&&(dc-=360),p&&dc<0&&(dc+=360);let Yd=ig+dc;const Jb=Yd>=0?1:-1;return Yd=Math.abs(Yd)%360*Jb,{center:new un(tt,hn),startAngle:ig,endAngle:Yd,radiusX:a,radiusY:d,xRotation:g}}({x1:r.x,y1:r.y,x2:e.x,y2:e.y,rx:n,ry:s,largeArc:a,swipe:d,rotation:f});return new Gv(p.center,{startAngle:p.startAngle,endAngle:p.endAngle,radiusX:p.radiusX,radiusY:p.radiusY,xRotation:p.xRotation,anticlockwise:0===d})}}function kD(i,r,e,n,s,a){const d=Vn((s-i)/e,3),f=Vn((a-r)/n,3);return Vn(tc(Math.atan2(f,d)))}function TD(i,r){let e=i;for(;e<r;)e+=90;return e}const uF=Gv;function yD(i,r,e){const n=tc(Math.atan2(r.y-i.y,r.x-i.x));return e.transformCopy(Fm().rotate(-n,i)).x<i.x}function zv(i,r,e){const n=1-i;return Math.pow(n,3)*e[0][r]+3*Math.pow(n,2)*i*e[1][r]+3*Math.pow(i,2)*n*e[2][r]+Math.pow(i,3)*e[3][r]}function DD(i,r){return[3*i[1][r]-i[0][r]-3*i[2][r]+i[3][r],3*(i[0][r]-2*i[1][r]+i[2][r]),3*(-i[0][r]+i[1][r]),i[0][r]]}class nc extends Ed{constructor(r=0,e=0){super(),this.real=r,this.img=e}add(r){return new nc(Vn(this.real+r.real,10),Vn(this.img+r.img,10))}addConstant(r){return new nc(this.real+r,this.img)}negate(){return new nc(-this.real,-this.img)}multiply(r){return new nc(this.real*r.real-this.img*r.img,this.real*r.img+this.img*r.real)}multiplyConstant(r){return new nc(this.real*r,this.img*r)}nthRoot(r){const e=Math.atan2(this.img,this.real),n=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2)),s=Math.pow(n,1/r);return new nc(s*Math.cos(e/r),s*Math.sin(e/r))}equals(r){return this.real===r.real&&this.img===r.img}isReal(){return 0===this.img}}const Lm=nc;function AD(i){return i<0?-1:1}function OD(i,r,e,n){if(0===i)return function hF(i,r,e){const n=Math.sqrt(Math.pow(r,2)-4*i*e);return[(-r+n)/(2*i),(-r-n)/(2*i)]}(r,e,n);const s=(3*i*e-Math.pow(r,2))/(3*Math.pow(i,2)),a=(2*Math.pow(r,3)-9*i*r*e+27*Math.pow(i,2)*n)/(27*Math.pow(i,3)),d=Math.pow(s/3,3)+Math.pow(a/2,2),f=new Lm(0,1),p=-r/(3*i);let g,b,S,k,T,F,K;d<0?(g=new Lm(-a/2,Math.sqrt(-d)).nthRoot(3),b=new Lm(-a/2,-Math.sqrt(-d)).nthRoot(3)):(g=-a/2+Math.sqrt(d),g=new Lm(AD(g)*Math.pow(Math.abs(g),1/3)),b=-a/2-Math.sqrt(d),b=new Lm(AD(b)*Math.pow(Math.abs(b),1/3))),S=g.add(b),F=g.add(b).multiplyConstant(-.5),K=g.add(b.negate()).multiplyConstant(Math.sqrt(3)/2),k=F.add(f.multiply(K)),T=F.add(f.negate().multiply(K));const fe=[];return S.isReal()&&fe.push(Vn(S.real+p,10)),k.isReal()&&fe.push(Vn(k.real+p,10)),T.isReal()&&fe.push(Vn(T.real+p,10)),fe}function Zv(i,r,e,n,s){const a=DD(i,n),d=OD(a[0],a[1],a[2],a[3]-r[n]);let f;for(let p=0;p<d.length;p++)if(0<=d[p]&&d[p]<=1&&(f=zv(d[p],e,i),Math.abs(f-r[e])<=s))return!0}function mF(i){const r="_"+i;return function(e){return bs(e)?(this._observerField(r,un.create(e)),this.geometryChange(),this):this[r]}}const vF=["anchor","controlIn","controlOut"];class bF extends(((i,r)=>{const e=class extends i{};return function gF(i,r){for(let e=0;e<r.length;e++)i[r[e]]=mF(r[e])}(e.prototype,r),e})(kd,vF)){constructor(r,e,n){super(),this.anchor(r||new un),this.controlIn(e),this.controlOut(n)}bboxTo(r,e){const n=this.anchor().transformCopy(e),s=r.anchor().transformCopy(e);let a;return a=this.controlOut()&&r.controlIn()?this._curveBoundingBox(n,this.controlOut().transformCopy(e),r.controlIn().transformCopy(e),s):this._lineBoundingBox(n,s),a}_lineBoundingBox(r,e){return Lh.fromPoints(r,e)}_curveBoundingBox(r,e,n,s){const a=[r,e,n,s],d=this._curveExtremesFor(a,"x"),f=this._curveExtremesFor(a,"y"),p=ID([d.min,d.max,r.x,s.x]),g=ID([f.min,f.max,r.y,s.y]);return Lh.fromPoints(new un(p.min,g.min),new un(p.max,g.max))}_curveExtremesFor(r,e){const n=this._curveExtremes(r[0][e],r[1][e],r[2][e],r[3][e]);return{min:zv(n.min,e,r),max:zv(n.max,e,r)}}_curveExtremes(r,e,n,s){const a=r-3*e+3*n-s,d=-2*(r-2*e+n),f=r-e,p=Math.sqrt(d*d-4*a*f);let g=0,b=1;0===a?0!==d&&(g=b=-f/d):isNaN(p)||(g=(-d+p)/(2*a),b=(-d-p)/(2*a));let S=Math.max(Math.min(g,b),0);(S<0||S>1)&&(S=0);let k=Math.min(Math.max(g,b),1);return(k>1||k<0)&&(k=1),{min:S,max:k}}_intersectionsTo(r,e){let n;return n=this.controlOut()&&r.controlIn()?function fF(i,r,e){const n=DD(i,"x"),s=OD(n[0],n[1],n[2],n[3]-r.x);let a,d,f=0;for(let p=0;p<s.length;p++)a=zv(s[p],"y",i),d=wD(a,r.y)||a>r.y,d&&((0===s[p]||1===s[p])&&e.bottomRight().x>r.x||0<s[p]&&s[p]<1)&&f++;return f}([this.anchor(),this.controlOut(),r.controlIn(),r.anchor()],e,this.bboxTo(r)):function pF(i,r,e){let n;if(i.x!==r.x){const s=Math.min(i.x,r.x),a=Math.max(i.x,r.x),d=Math.min(i.y,r.y),f=Math.max(i.y,r.y),p=s<=e.x&&e.x<a;n=d===f?e.y<=d&&p:p&&(f-d)*((i.x-r.x)*(i.y-r.y)>0?e.x-s:a-e.x)/(a-s)+d-e.y>=0}return n?1:0}(this.anchor(),r.anchor(),e),n}_isOnCurveTo(r,e,n,s){if(this.bboxTo(r).expand(n,n).containsPoint(e)){const d=this.anchor(),f=this.controlOut(),p=r.controlIn(),g=r.anchor();if("start"===s&&d.distanceTo(e)<=n)return!yD(d,f,e);if("end"===s&&g.distanceTo(e)<=n)return!yD(g,p,e);const b=[d,f,p,g];if(Zv(b,e,"x","y",n)||Zv(b,e,"y","x",n))return!0;const S=Fm().rotate(45,e),k=[d.transformCopy(S),f.transformCopy(S),p.transformCopy(S),g.transformCopy(S)];return Zv(k,e,"x","y",n)||Zv(k,e,"y","x",n)}}_isOnLineTo(r,e,n){const s=this.anchor(),a=r.anchor(),d=tc(Math.atan2(a.y-s.y,a.x-s.x));return new Lh([s.x,s.y-n/2],[s.distanceTo(a),n]).containsPoint(e.transformCopy(Fm().rotate(-d,s)))}_isOnPathTo(r,e,n,s){let a;return a=this.controlOut()&&r.controlIn()?this._isOnCurveTo(r,e,n/2,s):this._isOnLineTo(r,e,n),a}}function ID(i){let r=i.length,e=Nh,n=Fh;for(let s=0;s<r;s++)n=Math.max(n,i[s]),e=Math.min(e,i[s]);return{min:e,max:n}}const xF=bF;function CF(i,r){return i.push.apply(i,r),i}const SF={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function EF(i){const r=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];let e="";for(;i>0;)i<r[0]?r.shift():(e+=SF[r[0]],i-=r[0]);return e}function wF(){let i,r;const e=new Promise((n,s)=>{i=a=>(e._state="resolved",n(a),e),r=a=>(e._state="rejected",s(a),e)});return e._state="pending",e.resolve=i,e.reject=r,e.state=()=>e._state,e}let kF=1;function TF(){return"kdef"+kF++}const Hs=String.fromCharCode,Hv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function DF(i){let r="",e=0;const n=function yF(i){let r="";for(let e=0;e<i.length;e++){let n=i.charCodeAt(e);if(55296<=n&&n<=56319){const s=n,a=i.charCodeAt(++e);isNaN(a)||(n=1024*(s-55296)+(a-56320)+65536)}n<128?r+=Hs(n):n<2048?(r+=Hs(192|n>>>6),r+=Hs(128|63&n)):n<65536?(r+=Hs(224|n>>>12),r+=Hs(128|n>>>6&63),r+=Hs(128|63&n)):n<1114111&&(r+=Hs(240|n>>>18),r+=Hs(128|n>>>12&63),r+=Hs(128|n>>>6&63),r+=Hs(128|63&n))}return r}(i);for(;e<n.length;){let s=n.charCodeAt(e++),a=n.charCodeAt(e++),d=n.charCodeAt(e++),f=s>>2,p=(3&s)<<4|a>>4,g=(15&a)<<2|d>>6,b=63&d;isNaN(a)?g=b=64:isNaN(d)&&(b=64),r=r+Hv.charAt(f)+Hv.charAt(p)+Hv.charAt(g)+Hv.charAt(b)}return r}function AF(i){return bs((i.x||{}).location)?{x:i.x.location,y:i.y.location}:{x:i.pageX||i.clientX||0,y:i.pageY||i.clientY||0}}function OF(i={}){return i.touch?i.touch.initialTouch:i.target}function IF(i){return""===i||null===i||"none"===i||"transparent"===i||!bs(i)}function MF(i){if(i)return i[i.length-1]}function RF(i,r,e){return Math.max(Math.min(i,e),r)}function NF(i,r){return i.length<2?i.slice():function n(s){if(s.length<=1)return s;var a=Math.floor(s.length/2),d=s.slice(0,a),f=s.slice(a);return function e(n,s){for(var a=[],d=0,f=0,p=0;d<n.length&&f<s.length;)r(n[d],s[f])<=0?a[p++]=n[d++]:a[p++]=s[f++];return d<n.length&&a.push.apply(a,n.slice(d)),f<s.length&&a.push.apply(a,s.slice(f)),a}(d=n(d),f=n(f))}(i)}const FF=Date.now||function(){return(new Date).getTime()};function LF(i){return Promise.all(i)}function PF(i,r){return bs(i)?i:r}function UF(i,r){for(let e in r){const n=e.trim().split(" ");for(let s=0;s<n.length;s++)i.addEventListener(n[s],r[e],!1)}}function BF(i){const r=i.getBoundingClientRect(),e=document.documentElement;return{top:r.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||0),left:r.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}function Uk(i,r){const e={},n=window.getComputedStyle(i)||{},s=Array.isArray(r)?r:[r];for(let a=0;a<s.length;a++){let d=s[a];e[d]=n[d]}return e}function MD(i){return isNaN(i)?i:i+"px"}function GF(i,r){if(!r){const e=Uk(i,["width","height"]);return{width:parseInt(e.width,10),height:parseInt(e.height,10)}}{const{width:e,height:n}=r;bs(e)&&(i.style.width=MD(e)),bs(n)&&(i.style.height=MD(n))}}function zF(i,r={}){for(let e in r){const n=e.trim().split(" ");for(let s=0;s<n.length;s++)i.removeEventListener(n[s],r[e],!1)}}function ZF(i){const{paddingLeft:r,paddingTop:e}=Uk(i,["paddingLeft","paddingTop"]);return{top:parseFloat(e),left:parseFloat(r)}}const HF=/matrix\((.*)\)/;function RD(i){const r=getComputedStyle(i).transform;return"none"===r?Zs.unit():function VF(i){const r=i.match(HF);if(null===r||2!==r.length)return Zs.unit();const e=r[1].split(",").map(n=>parseFloat(n));return new Zs(...e)}(r)}function JF(i){if(!i)return Zs.unit();let r=RD(i),e=i.parentElement;for(;e;){const n=RD(e);r=r.multiplyCopy(n),e=e.parentElement}return r.b=r.c=r.e=r.f=0,r}const ND=class qF extends Ed{constructor(r){super(),this._size=r,this._length=0,this._map={}}put(r,e){const n=this._map,s={key:r,value:e};n[r]=s,this._head?(this._tail.newer=s,s.older=this._tail,this._tail=s):this._head=this._tail=s,this._length>=this._size?(n[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++}get(r){const e=this._map[r];if(e)return e===this._head&&e!==this._tail&&(this._head=e.newer,this._head.older=null),e!==this._tail&&(e.older&&(e.older.newer=e.newer,e.newer.older=e.older),e.older=this._tail,e.newer=null,this._tail.newer=e,this._tail=e),e.value}},YF=/\r?\n|\r|\t/g;function FD(i){return String(i).replace(YF," ")}function LD(i){const r=[];for(let e in i)r.push(e+i[e]);return r.sort().join("")}function PD(i){let r=2166136261;for(let e=0;e<i.length;++e)r+=(r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24),r^=i.charCodeAt(e);return r>>>0}const $F={baselineMarkerSize:1};let Bk;typeof document<"u"&&(Bk=document.createElement("div"),Bk.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;");class Gk extends Ed{constructor(r){super(),this._cache=new ND(1e3),this.options=Object.assign({},$F,r)}measure(r,e,n={}){if(typeof r>"u"||null===r)return{width:0,height:0,baseline:0};const a=PD(r+LD(e)),d=this._cache.get(a);if(d)return d;const f={width:0,height:0,baseline:0},p=n.box||Bk,g=this._baselineMarker().cloneNode(!1);for(let S in e){let k=e[S];typeof k<"u"&&(p.style[S]=k)}const b=!1!==n.normalizeText?FD(r):String(r);return p.textContent=b,p.appendChild(g),document.body.appendChild(p),b.length&&(f.width=p.offsetWidth-this.options.baselineMarkerSize,f.height=p.offsetHeight,f.baseline=g.offsetTop+this.options.baselineMarkerSize),f.width>0&&f.height>0&&this._cache.put(a,f),p.parentNode.removeChild(p),f}_baselineMarker(){const r=document.createElement("div");return r.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",r}}Gk.current=new Gk;const BD=Gk;function WF(i,r,e){return BD.current.measure(i,r,e)}const D4=["input"];function A4(i,r){}function O4(i,r){if(1&i&&t.YNc(0,A4,0,0,"ng-template",8),2&i){const e=t.oxw();t.Q6J("ngTemplateOutlet",null==e.prefixTemplate?null:e.prefixTemplate.templateRef)}}function I4(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",9),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.clearValue())})("mousedown",function(s){return s.preventDefault()})("keydown.enter",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.clearValue(s))})("keydown.space",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.clearValue(s))}),t._UZ(1,"span",10),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("tabindex",e.tabIndex)("title",e.clearTitle()),t.uIk("aria-label",e.clearTitle()),t.xp6(1),t.Q6J("ngClass",e.clearButtonClasses)}}function M4(i,r){if(1&i&&t._UZ(0,"span",10),2&i){const e=t.oxw();t.Q6J("ngClass",e.errorIconClasses)}}function R4(i,r){if(1&i&&t._UZ(0,"span",10),2&i){const e=t.oxw();t.Q6J("ngClass",e.successIconClasses)}}function N4(i,r){}function F4(i,r){if(1&i&&t.YNc(0,N4,0,0,"ng-template",8),2&i){const e=t.oxw();t.Q6J("ngTemplateOutlet",null==e.suffixTemplate?null:e.suffixTemplate.templateRef)}}const L4=function(i,r,e){return{focus:i,blur:r,input:e}},qD={small:"sm",medium:"md",large:"lg"},YD={small:"sm",medium:"md",large:"lg",full:"full"},qv=(i,r,e,n)=>{switch(r){case"size":return{toRemove:`k-${i}-${qD[e]}`,toAdd:"none"!==n?`k-${i}-${qD[n]}`:""};case"rounded":return{toRemove:`k-rounded-${YD[e]}`,toAdd:"none"!==n?`k-rounded-${YD[n]}`:""};case"fillMode":return{toRemove:`k-${i}-${e}`,toAdd:"none"!==n?`k-${i}-${n}`:""}}};const Dd={name:"@progress/kendo-angular-inputs",productName:"Kendo UI for Angular",productCodes:["KENDOUIANGULAR","KENDOUICOMPLETE"],publishDate:1668698223,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning"};Promise.resolve(null);let fA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,Xd,pn,Ci],Xd,pn,Ci]}),i})(),pA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,fA]]}),i})(),CL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,fA]]}),i})(),SL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,pn,Ci]]}),i})(),Wk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,pn]]}),i})(),EL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,pn]]}),i})(),TL=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc,8))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoTextBoxSuffixTemplate",""]]}),i})(),mA=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc,8))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoTextBoxPrefixTemplate",""]]}),i})(),gA=(()=>{class i extends ws{}return i.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(i)))(n||i)}}(),i.\u0275dir=t.lG2({type:i,selectors:[["kendo-textbox-messages-base"]],inputs:{clear:"clear"},features:[t.qOj]}),i})(),yL=(()=>{class i extends gA{constructor(e){super(),this.service=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoTextBoxLocalizedMessages",""]],features:[t._Bn([{provide:gA,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj]}),i})();const _A="k-focus";let IL=(()=>{class i{constructor(e,n,s,a,d,f){this.localizationService=e,this.ngZone=n,this.changeDetector=s,this.renderer=a,this.injector=d,this.hostElement=f,this.focusableId=`k-${On()}`,this.title="",this.disabled=!1,this.readonly=!1,this.tabindex=0,this.value=null,this.selectOnFocus=!1,this.showSuccessIcon=!1,this.showErrorIcon=!1,this.clearButton=!1,this.valueChange=new t.vpe,this.inputFocus=new t.vpe,this.inputBlur=new t.vpe,this.onFocus=new t.vpe,this.onBlur=new t.vpe,this.hostClasses=!0,this._isFocused=!1,this.focusChangedProgrammatically=!1,this._size="medium",this._rounded="medium",this._fillMode="solid",this.handleInputFocus=()=>{this.disabled||(this.selectOnFocus&&this.value&&this.ngZone.run(()=>{setTimeout(()=>{this.selectAll()})}),zt(this.onFocus)&&(this.isFocused||this.ngZone.run(()=>{this.onFocus.emit()})),zt(this.inputFocus)&&(!this.focusChangedProgrammatically||this.focusChangedProgrammatically&&this.clearButtonClicked)&&this.ngZone.run(()=>{this.inputFocus.emit()}),this.ngZone.run(()=>{this.isFocused=!0}))},this.handleInputBlur=()=>{this.changeDetector.markForCheck(),(zt(this.inputBlur)||(i=>i&&(!i.touched||i.control&&"blur"===i.control.updateOn))(this.control))&&this.ngZone.run(()=>{this.ngTouched(),this.inputBlur.emit()})},this.handleInput=p=>{const g=p.target,b=(i=>{const r=mu(i),e=wc(i);return r&&r.safari||e&&"mobilesafari"===e.browser})(navigator.userAgent),S=b&&(i=>/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g.test(i))(g.value)?p.data:g.value,[k,T]=[g.selectionStart,g.selectionEnd];this.updateValue(S),b&&g.setSelectionRange(k,T)},this.ngChange=p=>{},this.ngTouched=()=>{},wt(Dd),this.direction=e.rtl?"rtl":"ltr"}set size(e){const n=e||"medium";this.handleClasses(n,"size"),this._size=n}get size(){return this._size}set rounded(e){const n=e||"medium";this.handleClasses(n,"rounded"),this._rounded=n}get rounded(){return this._rounded}set fillMode(e){const n=e||"solid";this.handleClasses(n,"fillMode"),this._fillMode=n}get fillMode(){return this._fillMode}set tabIndex(e){this.tabindex=e}get tabIndex(){return this.tabindex}get disabledClass(){return this.disabled}ngOnInit(){this.control=this.injector.get(H.a5,null),this.checkClearButton(),this.subscriptions=this.localizationService.changes.subscribe(({rtl:e})=>{this.direction=e?"rtl":"ltr"})}ngAfterViewInit(){const e=this.hostElement.nativeElement;let n=!1,s=!1;this.ngZone.runOutsideAngular(()=>{this.subscriptions.add(this.renderer.listen(e,"focusin",()=>{this.isFocused||this.ngZone.run(()=>{this.onFocus.emit(),this.isFocused=!0})})),this.subscriptions.add(this.renderer.listen(e,"focusout",d=>{!this.isFocused||(s?(((i,r)=>{for(;i&&!r(i);)i=i.parentNode;return i})(d.relatedTarget,p=>p===this.hostElement.nativeElement)||this.handleBlur(),s=!1):!n&&!this.clearButtonClicked&&this.handleBlur())})),this.subscriptions.add(this.renderer.listen(e,"mouseenter",()=>{n=!0})),this.subscriptions.add(this.renderer.listen(e,"mouseleave",()=>{n=!1})),this.subscriptions.add(this.renderer.listen(e,"keydown",d=>{s=d.keyCode===ke.Tab}))}),["size","rounded","fillMode"].forEach(d=>{this.handleClasses(this[d],d)})}ngOnChanges(e){(e.disabled||e.readonly||e.value)&&this.checkClearButton()}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}focus(){!this.input||(this.focusChangedProgrammatically=!0,this.isFocused=!0,this.input.nativeElement.focus(),this.focusChangedProgrammatically=!1)}blur(){this.focusChangedProgrammatically=!0;const e=this.hostElement.nativeElement.querySelector(":focus");e&&e.blur(),this.isFocused=!1,this.focusChangedProgrammatically=!1}clearTitle(){return this.localizationService.get("clear")}checkClearButton(){this.showClearButton=!this.disabled&&!this.readonly&&this.clearButton&&!!this.value}clearValue(e){e&&e.preventDefault(),this.clearButtonClicked=!0,this.input.nativeElement.value="",this.input.nativeElement.focus(),this.updateValue(""),this.checkClearButton(),this.clearButtonClicked=!1}writeValue(e){this.value=e,this.checkClearButton()}registerOnChange(e){this.ngChange=e}registerOnTouched(e){this.ngTouched=e}setDisabledState(e){this.changeDetector.markForCheck(),this.disabled=e}showErrorsInitial(){if(!this.control)return!1;const{invalid:e,dirty:n,touched:s}=this.control;return e&&(n||s)}showSuccessInitial(){if(!this.control)return!1;const{valid:e,dirty:n,touched:s}=this.control;return e&&(n||s)}get isControlInvalid(){return this.control&&this.control.touched&&!this.control.valid}get successIconClasses(){return this.successIcon?`${this.successIcon}`:"k-input-validation-icon k-icon k-i-check"}get errorIconClasses(){return this.errorIcon?`${this.errorIcon}`:"k-input-validation-icon k-icon k-i-exclamation-circle"}get clearButtonClasses(){return this.clearButtonIcon?this.clearButtonIcon:"k-icon k-i-x"}get hasErrors(){return"initial"===this.showErrorIcon?this.showErrorsInitial():this.showErrorIcon}get isSuccessful(){return"initial"===this.showSuccessIcon?this.showSuccessInitial():this.showSuccessIcon}setSelection(e,n){this.isFocused&&function ic(i,r,...e){if(i&&i.nativeElement)return i.nativeElement[r].apply(i.nativeElement,e)}(this.input,"setSelectionRange",e,n)}selectAll(){this.value&&this.setSelection(0,this.value.length)}updateValue(e){((i,r)=>i===r||null===i&&void 0===r||void 0===i&&null===r)(this.value,e)||this.ngZone.run(()=>{this.value=e,this.ngChange(e),this.valueChange.emit(e),this.checkClearButton(),this.changeDetector.markForCheck()})}get isFocused(){return this._isFocused}set isFocused(e){if(this._isFocused!==e&&this.hostElement){const n=this.hostElement.nativeElement;e&&!this.disabled?this.renderer.addClass(n,_A):this.renderer.removeClass(n,_A),this._isFocused=e}}handleBlur(){this.ngZone.run(()=>{this.focusChangedProgrammatically||this.onBlur.emit(),this.isFocused=!1})}handleClasses(e,n){const s=this.hostElement.nativeElement,a=qv("input",n,this[n],e);a.toRemove&&this.renderer.removeClass(s,a.toRemove),a.toAdd&&this.renderer.addClass(s,a.toAdd)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(t.Qsj),t.Y36(t.zs3),t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-textbox"]],contentQueries:function(e,n,s){if(1&e&&(t.Suo(s,TL,5),t.Suo(s,mA,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.suffixTemplate=a.first),t.iGM(a=t.CRH())&&(n.prefixTemplate=a.first)}},viewQuery:function(e,n){if(1&e&&t.Gf(D4,7),2&e){let s;t.iGM(s=t.CRH())&&(n.input=s.first)}},hostVars:7,hostBindings:function(e,n){2&e&&(t.uIk("dir",n.direction),t.ekj("k-disabled",n.disabledClass)("k-textbox",n.hostClasses)("k-input",n.hostClasses))},inputs:{focusableId:"focusableId",title:"title",disabled:"disabled",readonly:"readonly",tabindex:"tabindex",value:"value",selectOnFocus:"selectOnFocus",showSuccessIcon:"showSuccessIcon",showErrorIcon:"showErrorIcon",clearButton:"clearButton",successIcon:"successIcon",errorIcon:"errorIcon",clearButtonIcon:"clearButtonIcon",size:"size",rounded:"rounded",fillMode:"fillMode",tabIndex:"tabIndex",placeholder:"placeholder",maxlength:"maxlength"},outputs:{valueChange:"valueChange",inputFocus:"inputFocus",inputBlur:"inputBlur",onFocus:"focus",onBlur:"blur"},exportAs:["kendoTextBox"],features:[t._Bn([Ge,{provide:Et,useValue:"kendo.textbox"},{provide:H.JU,useExisting:(0,t.Gpc)(()=>i),multi:!0},{provide:zi,useExisting:(0,t.Gpc)(()=>i)}]),t.TTD],decls:10,vars:19,consts:function(){let r;return r=$localize`:kendo.textbox.clear|The title for the **Clear** button in the TextBox.:Clear`,[["kendoTextBoxLocalizedMessages","","clear",r],[1,"k-input-prefix"],[4,"ngIf"],[1,"k-input-inner",3,"id","disabled","readonly","value","kendoEventsOutsideAngular"],["input",""],["role","button","class","k-clear-value",3,"tabindex","title","click","mousedown","keydown.enter","keydown.space",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"k-input-suffix"],[3,"ngTemplateOutlet"],["role","button",1,"k-clear-value",3,"tabindex","title","click","mousedown","keydown.enter","keydown.space"],[3,"ngClass"]]},template:function(e,n){1&e&&(t.GkF(0,0),t.TgZ(1,"span",1),t.YNc(2,O4,1,1,null,2),t.qZA(),t._UZ(3,"input",3,4),t.YNc(5,I4,2,4,"span",5),t.YNc(6,M4,1,1,"span",6),t.YNc(7,R4,1,1,"span",6),t.TgZ(8,"span",7),t.YNc(9,F4,1,1,null,2),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",n.prefixTemplate),t.xp6(1),t.Q6J("id",n.focusableId)("disabled",n.disabled)("readonly",n.readonly)("value",n.value)("kendoEventsOutsideAngular",t.kEZ(15,L4,n.handleInputFocus,n.handleInputBlur,n.handleInput)),t.uIk("tabindex",n.disabled?void 0:n.tabindex)("placeholder",n.placeholder)("title",n.title)("maxlength",n.maxlength)("aria-invalid",n.isControlInvalid),t.xp6(2),t.Q6J("ngIf",n.showClearButton),t.xp6(1),t.Q6J("ngIf",n.hasErrors),t.xp6(1),t.Q6J("ngIf",n.isSuccessful),t.xp6(2),t.Q6J("ngIf",n.suffixTemplate))},dependencies:[yL,X.O5,X.tP,Es,X.mk],encapsulation:2}),i})(),vA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),i})(),bA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,pn,vA],pn]}),i})(),ML=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,pn,vA],pn]}),i})(),qA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[pA,Wk,X.ez,xa,Xd]]}),i})(),rP=(()=>{class i{constructor(e,n){this.renderer=e,this.hostElement=n,this.kendoClass=!0,this._size="medium",this._rounded="medium"}set size(e){const n=e||"medium";this.handleClasses(n,"size"),this._size=n}get size(){return this._size}set rounded(e){const n=e||"medium";this.handleClasses(n,"rounded"),this._rounded=n}get rounded(){return this._rounded}ngAfterViewInit(){["size","rounded"].forEach(n=>{this.handleClasses(this[n],n)})}handleClasses(e,n){const s=this.hostElement.nativeElement,a=qv("checkbox",n,this[n],e);a.toRemove&&this.renderer.removeClass(s,a.toRemove),a.toAdd&&this.renderer.addClass(s,a.toAdd)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Qsj),t.Y36(t.SBq))},i.\u0275dir=t.lG2({type:i,selectors:[["input","kendoCheckBox",""]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("k-checkbox",n.kendoClass)},inputs:{size:"size",rounded:"rounded"}}),i})(),YA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez]]}),i})(),sP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez]]}),i})(),oP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez]]}),i})(),aP=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[No,X.ez,CR]]}),i})(),KA=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez],ML,bA,pA,CL,SL,Wk,EL,qA,YA,sP,oP,aP]}),i})();function lP(i,r){return(e,n)=>!i.call(r,e,n)}var Qk=Oe(262);function $A(i){return(0,ak.e)((r,e)=>{let n=!1,s=0;r.subscribe((0,Sv.x)(e,a=>(n||(n=!i(a,s++)))&&e.next(a)))})}var dP=Oe(515),uP=Oe(1005),hP=Oe(8746);const fP=["kendoTreeViewGroup",""];function pP(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(),a=s.index,d=s.$implicit,f=t.oxw();return t.KtG(f.expandNode(f.nodeIndex(a),d,!f.isExpanded(d,f.nodeIndex(a))))}),t._UZ(1,"span",13),t.qZA()}if(2&i){const e=t.oxw(),n=e.$implicit,s=e.index,a=t.oxw();t.ekj("k-disabled",!a.isItemExpandable(n,s)),t.Q6J("kendoTreeViewLoading",a.nodeIndex(s)),t.xp6(1),t.ekj("k-i-caret-alt-down",a.isExpanded(n,a.nodeIndex(s)))("k-i-caret-alt-right",!a.isExpanded(n,a.nodeIndex(s)))}}function mP(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"kendo-checkbox",14),t.NdJ("checkStateChange",function(){t.CHM(e);const s=t.oxw().index,a=t.oxw();return t.KtG(a.checkNode(a.nodeIndex(s)))}),t.qZA()}if(2&i){const e=t.oxw(),n=e.$implicit,s=e.index,a=t.oxw();t.ekj("k-disabled",a.isItemDisabled(n,s)),t.Q6J("size",a.size)("node",n)("index",a.nodeIndex(s))("isChecked",a.isChecked)("tabindex",-1)}}function gP(i,r){}const _P=function(i,r){return{$implicit:i,index:r}};function vP(i,r){if(1&i&&(t.ynx(0),t.YNc(1,gP,0,0,"ng-template",15),t.BQk()),2&i){const e=t.oxw(),n=e.$implicit,s=e.index,a=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",a.nodeTemplateRef)("ngTemplateOutletContext",t.WLB(2,_P,n,a.nodeIndex(s)))}}function bP(i,r){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.nodeText(e)," ")}}function xP(i,r){if(1&i&&t._UZ(0,"ul",16),2&i){const e=t.oxw(),n=e.$implicit,s=e.index,a=t.oxw();t.Q6J("nodes",a.fetchChildren)("loadOnDemand",a.loadOnDemand)("checkboxes",a.checkboxes)("expandIcons",a.expandIcons)("selectable",a.selectable)("touchActions",a.touchActions)("children",a.children)("hasChildren",a.hasChildren)("isChecked",a.isChecked)("isDisabled",a.isDisabled)("disabled",a.isItemDisabled(n,s))("expandDisabledNodes",a.expandDisabledNodes)("isExpanded",a.isExpanded)("isSelected",a.isSelected)("isVisible",a.isVisible)("nodeTemplateRef",a.nodeTemplateRef)("loadMoreButtonTemplateRef",a.loadMoreButtonTemplateRef)("parentIndex",a.nodeIndex(s))("parentDataItem",n)("textField",a.nextFields)("loadMoreService",a.loadMoreService)("@toggle",!0)("trackBy",a.trackBy)("disableParentNodesOnly",a.disableParentNodesOnly)}}function CP(i,r){if(1&i&&(t.TgZ(0,"li",2)(1,"div",3),t.YNc(2,pP,2,7,"span",4),t.YNc(3,mP,1,7,"kendo-checkbox",5),t.TgZ(4,"span",6)(5,"span",7),t.ynx(6,8),t.YNc(7,vP,2,5,"ng-container",9),t.YNc(8,bP,2,1,"ng-container",10),t.BQk(),t.qZA()()(),t.YNc(9,xP,1,24,"ul",11),t.qZA()),2&i){const e=r.$implicit,n=r.index,s=t.oxw();t.ekj("k-display-none",!s.isVisible(e,s.nodeIndex(n))),t.Q6J("dataItem",e)("index",s.nodeIndex(n))("parentDataItem",s.parentDataItem)("parentIndex",s.parentIndex)("loadOnDemand",s.loadOnDemand)("checkable",s.checkboxes)("isChecked",s.isChecked(e,s.nodeIndex(n)))("isDisabled",s.isItemDisabled(e,n))("isVisible",s.isVisible(e,s.nodeIndex(n)))("expandable",s.expandIcons&&s.hasChildren(e))("isExpanded",s.isExpanded(e,s.nodeIndex(n)))("selectable",s.selectable)("isSelected",s.isSelected(e,s.nodeIndex(n))),t.uIk("aria-setsize",s.totalNodesCount)("data-treeindex",s.nodeIndex(n)),t.xp6(1),t.Q6J("ngClass",s.setItemClasses(s.data.length,n)),t.xp6(1),t.Q6J("ngIf",s.expandIcons&&s.hasChildren(e)),t.xp6(1),t.Q6J("ngIf",s.checkboxes),t.xp6(1),t.Udp("touch-action",s.touchActions?"":"none"),t.ekj("k-disabled",s.isItemDisabled(e,n)),t.Q6J("dataItem",e)("index",s.nodeIndex(n))("initialSelection",s.isSelected(e,s.nodeIndex(n)))("isSelected",s.isSelected),t.uIk("data-treeindex",s.nodeIndex(n)),t.xp6(2),t.Q6J("ngSwitch",s.hasTemplate),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(2),t.Q6J("ngIf",s.isExpanded(e,s.nodeIndex(n))&&s.hasChildren(e))}}function SP(i,r){1&i&&t._UZ(0,"span",22)}function EP(i,r){}const wP=function(i){return{index:i}};function kP(i,r){if(1&i&&t.YNc(0,EP,0,0,"ng-template",15),2&i){const e=t.oxw(2);t.Q6J("ngTemplateOutlet",e.loadMoreButtonTemplateRef)("ngTemplateOutletContext",t.VKq(2,wP,e.loadMoreButtonIndex))}}function TP(i,r){1&i&&(t.ynx(0),t._uU(1," Load more "),t.BQk())}function yP(i,r){if(1&i&&(t.TgZ(0,"li",17)(1,"div",18),t.YNc(2,SP,1,0,"span",19),t.TgZ(3,"span",20)(4,"span",7),t.YNc(5,kP,1,4,null,21),t.YNc(6,TP,2,0,"ng-container",21),t.qZA()()()()),2&i){const e=t.oxw();t.ekj("k-treeview-load-more-checkboxes-container",e.checkboxes),t.Q6J("selectable",!1)("checkable",!1)("expandable",!1)("index",e.loadMoreButtonIndex)("parentDataItem",e.parentDataItem)("parentIndex",e.parentIndex),t.uIk("data-treeindex",e.loadMoreButtonIndex),t.xp6(2),t.Q6J("ngIf",e.loadingMoreNodes),t.xp6(1),t.Q6J("index",e.loadMoreButtonIndex),t.uIk("data-treeindex",e.loadMoreButtonIndex),t.xp6(2),t.Q6J("ngIf",e.loadMoreButtonTemplateRef),t.xp6(1),t.Q6J("ngIf",!e.loadMoreButtonTemplateRef)}}const DP=["assetsContainer"];function AP(i,r){1&i&&t._UZ(0,"span",6)}function OP(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",3)(1,"kendo-textbox",4),t.NdJ("valueChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.filterChange.emit(s))}),t.YNc(2,AP,1,0,"ng-template",5),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("size",e.size)("value",e.filter)("clearButton",!0)("placeholder",e.filterInputPlaceholder)}}const GP={name:"@progress/kendo-angular-treeview",productName:"Kendo UI for Angular",productCodes:["KENDOUIANGULAR","KENDOUICOMPLETE"],publishDate:1668698257,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning"};class Xk{constructor(){this.changes=new t.vpe}notify(){this.changes.emit()}}const zP=()=>!1,ZP=()=>"none",HP=()=>!1,VP=()=>!0,WA=()=>!1,jA=()=>!0,JP=(i,r)=>r;let Hm=(()=>{class i{constructor(){this.changes=new Un.x}expand(e,n){this.changes.next({dataItem:n,index:e,expand:!0})}collapse(e,n){this.changes.next({dataItem:n,index:e,expand:!1})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Uh=(()=>{class i{constructor(){this.INDEX_SEPARATOR="_"}nodeIndex(e="",n=""){return`${n}${n?this.INDEX_SEPARATOR:""}${e}`}indexForLevel(e,n){return e.split(this.INDEX_SEPARATOR).slice(0,n).join(this.INDEX_SEPARATOR)}lastLevelIndex(e=""){const n=e.split(this.INDEX_SEPARATOR);return n.length?parseInt(n[n.length-1],10):NaN}level(e){return e.split(this.INDEX_SEPARATOR).length}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),eT=(()=>{class i{constructor(){this.changes=new Un.x}notifyLoaded(e){this.changes.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();const qP=/^(?:a|input|select|option|textarea|button|object)$/i,Md=(i,r)=>{const e=i.matches||i.msMatchesSelector||i.webkitMatchesSelector;return!!e&&e.call(i,r)},Bh=(i,r)=>{if(!document.documentElement.contains(i))return null;let e=i;for(;null!==e&&1===e.nodeType;){if(Md(e,r))return e;e=e.parentElement||e.parentNode}return null},Ue=i=>null!=i,eO=i=>Array.isArray(i),Rd=i=>{const r="li.k-treeview-item";return nt()?i.closest?i.closest(r):Bh(i,r):null},tO=i=>{if(i.tagName){const r=i.tagName.toLowerCase(),e=i.getAttribute("tabIndex"),n="-1"===e;let s=null!==e&&!n;return qP.test(r)&&(s=!i.disabled&&!n),s}return!1},nO=i=>Ue(Bh(i,".k-treeview-leaf.k-treeview-load-more-button")),iT=(i,r)=>Boolean(((i,r)=>{for(;i&&!r(i);)i=i.parentNode;return i})(i,e=>e===r)),iO=i=>i.nativeElement.querySelector('li[tabindex="0"]'),rT=i=>i?i.getAttribute("data-treeindex"):"",ia=i=>(i||{}).index,Vm=(i,r)=>[i,r].filter(e=>Ue(e)).join("_"),ab=(i,r)=>({small:`k-${i}-sm`,medium:`k-${i}-md`,large:`k-${i}-lg`}[r]),sT=i=>i||{},oT=i=>sT(i).children||[],aT=i=>{if(!Array.isArray(i)||0===i.length)return null;for(let n=i.length-1;n>=0;n-=1){const s=i[n];if(s.visible)return s}return null};class eU{constructor(){this.ib=new Uh,this.nodes=[]}firstVisibleNode(){return(this.nodes||[]).find(r=>r.visible)}lastVisibleNode(){let r=aT(this.nodes);for(;Ue(r)&&oT(r).length>0;){const e=oT(r),n=aT(e);if(!Ue(n))return r;r=n}return r}closestNode(r){const{prev:e}=sT(this.findNode(r)),n=e||this.firstVisibleNode();return sT(n).index===r?this.visibleSibling(n,1):n}firstFocusableNode(){return this.nodes.find(r=>!r.disabled&&r.visible)}findNode(r){return this.find(r,this.nodes)}findParent(r){const e=this.ib.level(r)-1;return this.findNode(this.ib.indexForLevel(r,e))}findVisibleChild(r){const e=this.findNode(r);return oT(e).find(s=>s.visible)}findVisiblePrev(r){const e=r.index,n=this.findParent(e),s=this.ib.lastLevelIndex(e),d=this.container(n).slice(0,s).every(g=>!g.visible);if(0===s||d)return n;const f=this.findNode(e);let p=this.visibleSibling(f,-1);if(p){let g=this.container(p);for(;g.length>0&&g.some(b=>b.visible);)p=aT(g),g=this.container(p)}return p}findVisibleNext(r){const e=this.container(r),n=e.some(s=>s.visible);return 0!==e.length&&n?e.find(s=>s.visible):this.visibleSibling(r,1)}registerItem(r,e,n,s=!1,a=!0){const d=[],f=this.ib.level(e),p=this.findParent(e);(p||1===f)&&this.insert({id:r,children:d,index:e,parent:p,disabled:n,loadMoreButton:s,visible:a},p)}unregisterItem(r,e){const n=this.find(e,this.nodes);if(!n||n.id!==r)return;const s=this.container(n.parent);s.splice(s.indexOf(n),1)}childLevel(r){const e=r.filter(n=>Ue(n));return e&&e.length?this.ib.level(e[0].index):1}container(r){return r?r.children:this.nodes}find(r,e){const n=this.childLevel(e),s=this.ib.indexForLevel(r,n),a=n===this.ib.level(r),d=e.find(f=>f&&f.index===s);return d?a?d:this.find(r,d.children):null}insert(r,e){this.container(e).splice(this.ib.lastLevelIndex(r.index),0,r)}visibleSibling(r,e){if(!r)return null;const n=this.findParent(r.index),s=this.container(n);let a=s.indexOf(r)+e,d=s[a];for(;Ue(d);){if(d.visible)return d;a+=e,d=s[a]}return this.visibleSibling(n,e)}}let zh=(()=>{class i{constructor(e){this.localization=e,this.expands=new Un.x,this.moves=new Un.x,this.checks=new Un.x,this.selects=new Un.x,this.deselectAllButCurrentItem=new Un.x,this.loadMore=new Un.x,this.navigable=!0,this.selection="single",this.actions={[ke.ArrowUp]:()=>this.activate(this.model.findVisiblePrev(this.focusableItem),!0),[ke.ArrowDown]:()=>this.activate(this.model.findVisibleNext(this.focusableItem),!0),[ke.ArrowLeft]:()=>!this.isLoadMoreButton&&this.expand({expand:this.localization.rtl,intercept:this.localization.rtl?this.moveToFirstVisibleChild:this.moveToParent}),[ke.ArrowRight]:()=>!this.isLoadMoreButton&&this.expand({expand:!this.localization.rtl,intercept:this.localization.rtl?this.moveToParent:this.moveToFirstVisibleChild}),[ke.Home]:()=>this.activate(this.model.firstVisibleNode(),!0),[ke.End]:()=>this.activate(this.model.lastVisibleNode(),!0),[ke.Enter]:n=>this.handleEnter(n),[ke.Space]:()=>this.handleSpace()},this.isFocused=!1,this.shouldScroll=!1,this._model=new eU,this.moveToFirstVisibleChild=this.moveToFirstVisibleChild.bind(this),this.moveToParent=this.moveToParent.bind(this)}get model(){return this._model}set model(e){this._model=e}get activeIndex(){return ia(this.activeItem)||null}get isActiveExpanded(){return this.activeItem&&this.activeItem.children.length>0}get isLoadMoreButton(){return this.activeItem&&this.activeItem.loadMoreButton}get focusableItem(){return this.activeItem||this.model.firstFocusableNode()}activate(e,n=!1){!this.navigable||!e||this.isActive(ia(e))||(this.isFocused=!0,this.activeItem=e||this.activeItem,this.shouldScroll=n,this.notifyMove())}activateParent(e){this.activate(this.model.findParent(e))}activateIndex(e){!e||this.activate(this.model.findNode(e))}activateClosest(e){!e||ia(this.focusableItem)!==e||(this.activeItem=this.model.closestNode(e),this.notifyMove())}activateFocusable(){this.activeItem||(this.activeItem=this.model.firstVisibleNode(),this.notifyMove())}deactivate(){!this.navigable||!this.isFocused||(this.isFocused=!1,this.notifyMove())}checkIndex(e){this.isDisabled(e)||this.checks.next(e)}selectIndex(e){this.isDisabled(e)||this.selects.next(e)}notifyLoadMore(e){!Ue(e)||this.loadMore.next(e)}isActive(e){return!!e&&this.isFocused&&this.activeIndex===e}isFocusable(e){return ia(this.focusableItem)===e}isDisabled(e){return!!e&&this.model.findNode(e).disabled}registerItem(e,n,s,a=!1,d=!0){const f=this.model.findNode(n);Ue(f)&&(this.model.unregisterItem(f.id,f.index),this.isActive(n)&&this.deactivate()),this.model.registerItem(e,n,s,a,d)}updateItem(e,n,s=!0){const a=this.model.findNode(e);Ue(a)&&this.isActive(e)&&this.deactivate(),a.disabled=n,a.visible=s}unregisterItem(e,n){this.isActive(n)&&this.activateParent(n),this.model.unregisterItem(e,n)}move(e){if(!this.navigable)return;const n=this.actions[e.keyCode];!n||(n(e),e.preventDefault())}expand({expand:e,intercept:n}){const s=ia(this.activeItem);!s||n(s)||this.notifyExpand(e)}moveToParent(){return!this.isActiveExpanded&&(this.activate(this.model.findParent(ia(this.activeItem))),!0)}moveToFirstVisibleChild(){return!!this.isActiveExpanded&&(this.activate(this.model.findVisibleChild(ia(this.activeItem))),!0)}notifyExpand(e){this.expands.next(this.navigationState(e))}notifyMove(){this.moves.next(this.navigationState())}navigationState(e=!1){return{expand:e,index:this.activeIndex,isFocused:this.isFocused,shouldScroll:this.shouldScroll}}handleEnter(e){!this.navigable||(this.isLoadMoreButton?this.notifyLoadMore(this.activeIndex):e.ctrlKey||e.metaKey?this.selectIndex(this.activeIndex):"multiple"===this.selection?this.deselectAllButCurrentItem.next({dataItem:this.activeItem,index:this.activeIndex}):this.selectIndex(this.activeIndex))}handleSpace(){!this.navigable||(this.isLoadMoreButton?this.notifyLoadMore(this.activeIndex):this.checkIndex(this.activeIndex))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Ge))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),lT=(()=>{class i{constructor(){this.changes=new Un.x}childrenLoaded(e,n){this.changes.next({item:e,children:n})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),cT=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc,8))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoTreeViewNodeTemplate",""]]}),i})(),dT=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc,8))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoTreeViewLoadMoreButtonTemplate",""]]}),i})(),ra=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Jm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),lb=(()=>{class i{constructor(){this.changes=new Un.x}isFirstSelected(e){return this.firstIndex===e}setFirstSelected(e,n){this.firstIndex===e&&!1===n?this.firstIndex=null:!this.firstIndex&&n&&(this.firstIndex=e)}select(e,n){this.changes.next({dataItem:n,index:e})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();const tU=/\d+$/;let cb=(()=>{class i{constructor(){this.map=new Map}reset(){this.map.clear()}registerItem(e,n){const s={children:[],item:e,parent:this.item(ia(n))};this.map.set(e.index,s)}registerChildren(e,n){const s=this.item(e);!s||(s.children=n)}unregisterItem(e,n){const s=this.item(e);s&&s.item.dataItem===n&&(this.map.delete(e),s.parent&&s.parent.children&&(s.parent.children=s.parent.children.filter(a=>a.dataItem!==n)))}replaceItem(e,n,s){!n||(this.unregisterItem(e,n.dataItem),this.registerItem(n,s),this.addToParent(n,s))}itemLookup(e){const n=this.item(e);return n?{children:this.mapChildren(n.children),item:n.item,parent:n.parent}:null}hasItem(e){return this.map.has(e)}item(e){return this.map.get(e)||null}addToParent(e,n){if(n){const s=this.item(n.index),a=parseInt(tU.exec(e.index)[0],10);s.children=s.children||[],s.children.splice(a,0,e)}}mapChildren(e=[]){return e.map(n=>{const{item:s,parent:a,children:d}=this.item(n.index);return{children:this.mapChildren(d),item:s,parent:a}})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),cO=(()=>{class i{constructor(e,n,s){this.element=e,this.renderer=n,this.changeDetector=s,this.id=`_${On()}`,this.tabindex=0,this.size="medium",this.checkStateChange=new t.vpe,this.checkState="none"}get classWrapper(){return!0}get indeterminate(){return"indeterminate"===this.checkState}get checked(){return"checked"===this.checkState}get checkBoxClasses(){return`k-checkbox ${this.size?ab("checkbox",this.size):""} k-rounded-md`}ngOnInit(){this.renderer.removeAttribute(this.element.nativeElement,"tabindex")}ngDoCheck(){this.checkState=this.isChecked(this.node,this.index)}handleChange(e){const n=e.target.checked?"checked":"none";this.checkState=n,this.changeDetector.detectChanges(),this.checkStateChange.emit(n)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-checkbox"]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("k-checkbox-wrapper",n.classWrapper)},inputs:{id:"id",isChecked:"isChecked",node:"node",index:"index",labelText:"labelText",tabindex:"tabindex",size:"size"},outputs:{checkStateChange:"checkStateChange"},decls:3,vars:9,consts:[["type","checkbox","role","none",3,"id","checked","indeterminate","tabindex","change"],["tabindex","-1",1,"k-checkbox-label",3,"for"]],template:function(e,n){1&e&&(t.TgZ(0,"input",0),t.NdJ("change",function(a){return n.handleChange(a)}),t.qZA(),t.TgZ(1,"label",1),t._uU(2),t.qZA()),2&e&&(t.Tol(n.checkBoxClasses),t.Q6J("id",n.id)("checked",n.checked)("indeterminate",n.indeterminate)("tabindex",n.tabindex),t.uIk("aria-hidden","true"),t.xp6(1),t.Q6J("for",n.id),t.xp6(1),t.Oqu(n.labelText))},encapsulation:2}),i})();const dO=(i,r)=>({dataItem:r,index:i});let nU=0,uO=(()=>{class i{constructor(e,n,s,a,d,f,p){this.element=e,this.expandService=n,this.navigationService=s,this.selectionService=a,this.lookupService=d,this.renderer=f,this.ib=p,this.role="treeitem",this.loadOnDemand=!0,this.isDisabled=!1,this.isVisible=!0,this.ariaChecked="false",this.id=nU++,this.isInitialized=!1,this.subscriptions=[],this.subscribe()}set isChecked(e){this.ariaChecked="checked"===e?"true":"indeterminate"===e?"mixed":"false"}get isExpanded(){return this._isExpanded||!1}set isExpanded(e){this._isExpanded=e}get isSelected(){return this._isSelected||!1}set isSelected(e){this._isSelected=e}get isButton(){return"button"===this.role}get treeItem(){return dO(this.index,this.dataItem)}get parentTreeItem(){return this.parentDataItem?dO(this.parentIndex,this.parentDataItem):null}ngOnInit(){this.loadOnDemand&&!this.isButton&&this.lookupService.registerItem(this.treeItem,this.parentTreeItem),this.registerNavigationItem(),this.isInitialized=!0,this.setAttribute("role",this.role),this.setAriaAttributes(),this.updateTabIndex()}ngOnChanges(e){const{index:n}=e;Gi(["index","checkable","isChecked","expandable","isExpanded","selectable","isSelected"],e)&&this.setAriaAttributes(),this.loadOnDemand&&!this.isButton&&this.moveLookupItem(e),this.moveNavigationItem(n),Gi(["isDisabled","isVisible"],e)&&this.updateNodeAvailability()}ngOnDestroy(){this.navigationService.unregisterItem(this.id,this.index),this.loadOnDemand&&!this.isButton&&this.lookupService.unregisterItem(this.index,this.dataItem),this.subscriptions=this.subscriptions.reduce((e,n)=>(n.unsubscribe(),e),[])}subscribe(){this.subscriptions=[this.navigationService.moves.subscribe(e=>{this.updateTabIndex(),this.focusItem(e.shouldScroll)}),this.navigationService.expands.pipe((0,Ot.h)(({index:e})=>e===this.index&&!this.isDisabled)).subscribe(({expand:e})=>this.expand(e))]}registerNavigationItem(){this.navigationService.registerItem(this.id,this.index,this.isDisabled,this.isButton,this.isVisible),this.activateItem()}activateItem(){if(this.isDisabled)return;const e=this.navigationService,n=this.selectionService,s=this.index;n.setFirstSelected(s,this.isSelected),!e.isActive(s)&&n.isFirstSelected(s)&&e.activateIndex(s)}expand(e){this.expandService[e?"expand":"collapse"](this.index,this.dataItem)}isFocusable(){return!this.isDisabled&&this.navigationService.isFocusable(this.index)}focusItem(e=!1){this.isInitialized&&this.navigationService.isActive(this.index)&&this.element.nativeElement.focus({preventScroll:!e})}moveLookupItem(e={}){const{dataItem:n,index:s,parentDataItem:a,parentIndex:d}=e;s&&s.firstChange||!(n||s||a||d)||this.lookupService.replaceItem((s||{}).previousValue||this.index,this.treeItem,this.parentTreeItem)}moveNavigationItem(e={}){const{currentValue:n,firstChange:s,previousValue:a}=e;!s&&Ue(n)&&Ue(a)&&(this.navigationService.unregisterItem(this.id,a),this.navigationService.registerItem(this.id,n,this.isDisabled,this.isButton))}updateNodeAvailability(){const e=this.navigationService;this.isDisabled||!this.isVisible?e.activateClosest(this.index):e.activateFocusable(),e.updateItem(this.index,this.isDisabled,this.isVisible)}setAriaAttributes(){this.setAttribute("aria-level",this.ib.level(this.index).toString()),this.setAttribute("aria-expanded",this.expandable?this.isExpanded.toString():null),this.setAttribute("aria-selected",this.selectable?this.isSelected.toString():null),this.setAttribute("aria-checked",this.checkable?this.ariaChecked:null)}updateTabIndex(){this.setAttribute("tabIndex",this.isFocusable()?"0":"-1")}setAttribute(e,n){Ue(n)?this.renderer.setAttribute(this.element.nativeElement,e,n):this.renderer.removeAttribute(this.element.nativeElement,e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(Hm),t.Y36(zh),t.Y36(lb),t.Y36(cb),t.Y36(t.Qsj),t.Y36(Uh))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoTreeViewItem",""]],inputs:{dataItem:"dataItem",index:"index",parentDataItem:"parentDataItem",parentIndex:"parentIndex",role:"role",loadOnDemand:"loadOnDemand",checkable:"checkable",selectable:"selectable",expandable:"expandable",isChecked:"isChecked",isDisabled:"isDisabled",isVisible:"isVisible",isExpanded:"isExpanded",isSelected:"isSelected"},features:[t.TTD]}),i})(),hO=(()=>{class i{constructor(e,n,s){this.expandService=e,this.loadingService=n,this.cd=s,this._loading=!1}get loading(){return this._loading}set loading(e){this._loading=e,this.cd.markForCheck()}ngOnInit(){const e=this.loadingService.changes.pipe((0,Ot.h)(n=>n===this.index));this.subscription=this.expandService.changes.pipe((0,Ot.h)(({index:n})=>n===this.index),(0,Yt.b)(({expand:n})=>{!n&&this.loading&&(this.loading=!1)}),(0,Ot.h)(({expand:n})=>n),(0,ym.w)(n=>(0,go.of)(n).pipe((0,uP.g)(100),(0,Bi.R)(e)))).subscribe(()=>this.loading=!0),this.subscription.add(e.subscribe(()=>this.loading=!1))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Hm),t.Y36(eT),t.Y36(t.sBO))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoTreeViewLoading",""]],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("k-i-loading",n.loading)},inputs:{index:["kendoTreeViewLoading","index"]}}),i})(),fO=(()=>{class i{constructor(e,n,s,a){this.element=e,this.navigationService=n,this.selectionService=s,this.renderer=a,this.initialSelection=!1,this.isSelected=WA,this.subscriptions=new cn.w0,this.subscriptions.add(this.navigationService.moves.subscribe(this.updateFocusClass.bind(this))),this.subscriptions.add(this.navigationService.selects.pipe((0,Ot.h)(d=>d===this.index)).subscribe(d=>this.selectionService.select(d,this.dataItem))),this.subscriptions.add(this.selectionService.changes.subscribe(()=>{this.updateSelectionClass(this.isSelected(this.dataItem,this.index))}))}ngOnChanges(e){e.initialSelection&&this.updateSelectionClass(this.initialSelection),e.index&&this.updateFocusClass()}ngOnDestroy(){this.subscriptions.unsubscribe()}updateFocusClass(){this.render(this.navigationService.isActive(this.index),"k-focus")}updateSelectionClass(e){this.render(e,"k-selected")}render(e,n){this.renderer[e?"addClass":"removeClass"](this.element.nativeElement,n)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(zh),t.Y36(lb),t.Y36(t.Qsj))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoTreeViewItemContent",""]],inputs:{dataItem:"dataItem",index:"index",initialSelection:"initialSelection",isSelected:"isSelected"},features:[t.TTD]}),i})();const pO="k-treeview-top",mO="k-treeview-mid",uT="k-treeview-bot";let gO=(()=>{class i{constructor(e,n,s,a,d,f,p,g){this.expandService=e,this.loadingService=n,this.indexBuilder=s,this.treeViewLookupService=a,this.navigationService=d,this.nodeChildrenService=f,this.dataChangeNotification=p,this.changeDetectorRef=g,this.kGroupClass=!0,this.role="group",this.loadOnDemand=!0,this.textField="",this.size="medium",this.initialNodesLoaded=!1,this.loadingMoreNodes=!1,this.isItemExpandable=(b,S)=>this.expandDisabledNodes||!this.isItemDisabled(b,S),this._data=[],this.singleRecordSubscriptions=new cn.w0,this.isChecked=()=>"none",this.isDisabled=()=>!1,this.isExpanded=()=>!1,this.isVisible=()=>!0,this.isSelected=()=>!1,this.children=()=>(0,go.of)([]),this.hasChildren=()=>!1}get moreNodesAvailable(){return!(!Ue(this.loadMoreService)||0===this.data.length)&&this.pageSize<this.totalNodesCount}get pageSize(){return Ue(this.loadMoreService)?this.loadMoreService.getGroupSize(this.parentDataItem):null}set pageSize(e){this.loadMoreService.setGroupSize(this.parentDataItem,e)}get data(){return Ue(this.pageSize)?this._data.slice(0,this.pageSize>0?this.pageSize:0):this._data}set data(e){this._data=e,this.registerLoadedNodes(this.data)}get loadMoreButtonIndex(){return this.loadMoreService?this.nodeIndex(this.data.length):null}get totalNodesCount(){return this.loadMoreService?this.loadMoreService.getTotalNodesCount(this.parentDataItem,this._data.length):this.data.length}get hasTemplate(){return Ue(this.nodeTemplateRef)}expandNode(e,n,s){s?this.expandService.expand(e,n):this.expandService.collapse(e,n)}checkNode(e){this.navigationService.checkIndex(e),this.navigationService.activateIndex(e)}nodeIndex(e){return this.indexBuilder.nodeIndex(e.toString(),this.parentIndex)}nodeText(e){return Di(eO(this.textField)?this.textField[0]:this.textField)(e)}ngOnDestroy(){Ue(this.nodesSubscription)&&this.nodesSubscription.unsubscribe(),Ue(this.loadMoreNodesSubscription)&&this.loadMoreNodesSubscription.unsubscribe(),this.singleRecordSubscriptions.unsubscribe()}ngOnInit(){this.subscribeToNodesChange(),this.singleRecordSubscriptions.add(this.dataChangeNotification.changes.subscribe(this.subscribeToNodesChange.bind(this))),this.singleRecordSubscriptions.add(this.navigationService.loadMore.pipe((0,Ot.h)(e=>e===this.loadMoreButtonIndex)).subscribe(this.loadMoreNodes.bind(this)))}ngOnChanges(e){e.parentIndex&&this.loadOnDemand&&this.setNodeChildren(this.mapToTreeItem(this.data))}fetchChildren(e,n){return this.children(e).pipe((0,Qk.K)(()=>(this.loadingService.notifyLoaded(n),dP.E)),(0,Yt.b)(()=>this.loadingService.notifyLoaded(n)))}get nextFields(){return eO(this.textField)?this.textField.length>1?this.textField.slice(1):this.textField:[this.textField]}loadMoreNodes(){Ue(this.loadMoreService.loadMoreNodes)?this.fetchMoreNodes():this.loadMoreLocalNodes()}isItemDisabled(e,n){return this.disabled&&!this.disableParentNodesOnly||this.isDisabled(e,this.nodeIndex(n))}setItemClasses(e,n){return 1===e?this.parentIndex?uT:`${pO} ${uT}`:0===n?pO:n>0&&n<e-1?mO:n===this.totalNodesCount-1?uT:mO}loadMoreLocalNodes(){const e=this.loadMoreButtonIndex;this.pageSize+=this.loadMoreService.getInitialPageSize(this.parentDataItem),this.registerLoadedNodes(this.data),this.changeDetectorRef.detectChanges(),this.reselectItemAt(e)}fetchMoreNodes(){this.loadingMoreNodes||(this.loadingMoreNodes=!0,Ue(this.loadMoreNodesSubscription)&&this.loadMoreNodesSubscription.unsubscribe(),this.loadMoreNodesSubscription=this.loadMoreService.loadMoreNodes({dataItem:this.parentDataItem,skip:this.data.length,take:this.loadMoreService.getInitialPageSize(this.parentDataItem)}).pipe((0,hP.x)(()=>this.loadingMoreNodes=!1)).subscribe(e=>{if(!(Array.isArray(e)&&e.length>0))return;const n=this.loadMoreButtonIndex;this.pageSize+=e.length,this.data=this.data.concat(e),this.navigationService.isActive(n)&&(this.changeDetectorRef.detectChanges(),this.reselectItemAt(n))}))}setNodeChildren(e){this.treeViewLookupService.registerChildren(this.parentIndex,e)}mapToTreeItem(e){return this.parentIndex?e.map((n,s)=>({dataItem:n,index:this.nodeIndex(s)})):[]}emitChildrenLoaded(e){if(!this.parentIndex)return;const n=e.filter(s=>s.dataItem);this.nodeChildrenService.childrenLoaded({dataItem:this.parentDataItem,index:this.parentIndex},n)}subscribeToNodesChange(){this.nodesSubscription&&this.nodesSubscription.unsubscribe(),this.nodesSubscription=this.nodes(this.parentDataItem,this.parentIndex).subscribe(e=>{this.data=e,this.initialNodesLoaded=!0})}reselectItemAt(e){!Ue(e)||(this.navigationService.deactivate(),this.navigationService.activateIndex(e))}registerLoadedNodes(e=[]){const n=this.mapToTreeItem(e);this.loadOnDemand&&this.setNodeChildren(n),this.emitChildrenLoaded(n)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Hm),t.Y36(eT),t.Y36(Uh),t.Y36(cb),t.Y36(zh),t.Y36(lT),t.Y36(Xk),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["","kendoTreeViewGroup",""]],hostVars:3,hostBindings:function(e,n){2&e&&(t.uIk("role",n.role),t.ekj("k-treeview-group",n.kGroupClass))},inputs:{checkboxes:"checkboxes",expandIcons:"expandIcons",disabled:"disabled",selectable:"selectable",touchActions:"touchActions",disableParentNodesOnly:"disableParentNodesOnly",loadOnDemand:"loadOnDemand",trackBy:"trackBy",nodes:"nodes",textField:"textField",parentDataItem:"parentDataItem",parentIndex:"parentIndex",nodeTemplateRef:"nodeTemplateRef",loadMoreButtonTemplateRef:"loadMoreButtonTemplateRef",loadMoreService:"loadMoreService",size:"size",expandDisabledNodes:"expandDisabledNodes",isChecked:"isChecked",isDisabled:"isDisabled",isExpanded:"isExpanded",isVisible:"isVisible",isSelected:"isSelected",children:"children",hasChildren:"hasChildren"},features:[t.TTD],attrs:fP,decls:2,vars:3,consts:[["class","k-treeview-item","kendoTreeViewItem","",3,"k-display-none","dataItem","index","parentDataItem","parentIndex","loadOnDemand","checkable","isChecked","isDisabled","isVisible","expandable","isExpanded","selectable","isSelected",4,"ngFor","ngForOf","ngForTrackBy"],["class","k-treeview-item","kendoTreeViewItem","","role","button",3,"k-treeview-load-more-checkboxes-container","selectable","checkable","expandable","index","parentDataItem","parentIndex",4,"ngIf"],["kendoTreeViewItem","",1,"k-treeview-item",3,"dataItem","index","parentDataItem","parentIndex","loadOnDemand","checkable","isChecked","isDisabled","isVisible","expandable","isExpanded","selectable","isSelected"],[3,"ngClass"],["class","k-treeview-toggle",3,"k-disabled","kendoTreeViewLoading","click",4,"ngIf"],[3,"k-disabled","size","node","index","isChecked","tabindex","checkStateChange",4,"ngIf"],["kendoTreeViewItemContent","",1,"k-treeview-leaf",3,"dataItem","index","initialSelection","isSelected"],[1,"k-treeview-leaf-text"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["kendoTreeViewGroup","","role","group",3,"nodes","loadOnDemand","checkboxes","expandIcons","selectable","touchActions","children","hasChildren","isChecked","isDisabled","disabled","expandDisabledNodes","isExpanded","isSelected","isVisible","nodeTemplateRef","loadMoreButtonTemplateRef","parentIndex","parentDataItem","textField","loadMoreService","trackBy","disableParentNodesOnly",4,"ngIf"],[1,"k-treeview-toggle",3,"kendoTreeViewLoading","click"],[1,"k-icon"],[3,"size","node","index","isChecked","tabindex","checkStateChange"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["kendoTreeViewGroup","","role","group",3,"nodes","loadOnDemand","checkboxes","expandIcons","selectable","touchActions","children","hasChildren","isChecked","isDisabled","disabled","expandDisabledNodes","isExpanded","isSelected","isVisible","nodeTemplateRef","loadMoreButtonTemplateRef","parentIndex","parentDataItem","textField","loadMoreService","trackBy","disableParentNodesOnly"],["kendoTreeViewItem","","role","button",1,"k-treeview-item",3,"selectable","checkable","expandable","index","parentDataItem","parentIndex"],[1,"k-treeview-bot"],["class","k-icon k-i-loading k-i-caret-alt-right",4,"ngIf"],["kendoTreeViewItemContent","",1,"k-treeview-leaf","k-treeview-load-more-button",3,"index"],[4,"ngIf"],[1,"k-icon","k-i-loading","k-i-caret-alt-right"]],template:function(e,n){1&e&&(t.YNc(0,CP,10,32,"li",0),t.YNc(1,yP,7,14,"li",1)),2&e&&(t.Q6J("ngForOf",n.data)("ngForTrackBy",n.trackBy),t.xp6(1),t.Q6J("ngIf",n.initialNodesLoaded&&n.moreNodesAvailable))},dependencies:[cO,i,X.sg,uO,X.mk,X.O5,hO,fO,X.RF,X.n9,X.tP,X.ED],encapsulation:2,data:{animation:[(0,St.X$)("toggle",[(0,St.eR)("void => *",[(0,St.oB)({height:0}),(0,St.jt)("0.1s ease-in",(0,St.oB)({height:"*"}))]),(0,St.eR)("* => void",[(0,St.oB)({height:"*"}),(0,St.jt)("0.1s ease-in",(0,St.oB)({height:0}))])])]}}),i})();const oU=[Hm,Uh,cb,eT,lT,zh,lb,Xk,Ge,{provide:Et,useValue:"kendo.treeview"},{provide:ra,useExisting:(0,t.Gpc)(()=>Cs)},{provide:Jm,useExisting:(0,t.Gpc)(()=>Cs)}];let Cs=(()=>{class i{constructor(e,n,s,a,d,f,p,g,b,S,k){this.element=e,this.changeDetectorRef=n,this.expandService=s,this.navigationService=a,this.nodeChildrenService=d,this.selectionService=f,this.treeViewLookupService=p,this.ngZone=g,this.renderer=b,this.dataChangeNotification=S,this.localization=k,this.classNames=!0,this.role="tree",this.filterInputPlaceholder="",this.fetchNodes=()=>this.data,this.childrenLoaded=new t.vpe,this.onBlur=new t.vpe,this.onFocus=new t.vpe,this.expand=new t.vpe,this.collapse=new t.vpe,this.nodeDragStart=new t.vpe,this.nodeDrag=new t.vpe,this.filterStateChange=new t.vpe,this.nodeDrop=new t.vpe,this.nodeDragEnd=new t.vpe,this.addItem=new t.vpe,this.removeItem=new t.vpe,this.checkedChange=new t.vpe,this.selectionChange=new t.vpe,this.filterChange=new t.vpe,this.nodeClick=new t.vpe,this.nodeDblClick=new t.vpe,this.trackBy=JP,this.isDisabled=HP,this.isVisible=jA,this.navigable=!0,this.children=()=>(0,go.of)([]),this.loadOnDemand=!0,this.filterable=!1,this.filter="",this.disableParentNodesOnly=!1,this.checkboxes=!1,this.expandIcons=!1,this.selectable=!1,this.touchActions=!0,this.isActive=!1,this.data=new rl.X([]),this._animate=!0,this._size="medium",this.subscriptions=new cn.w0,this.domSubscriptions=[],wt(GP)}get direction(){return this.localization.rtl?"rtl":"ltr"}set animate(e){this._animate=e}get animate(){return!this._animate}set nodeTemplateRef(e){this._nodeTemplateRef=e}get nodeTemplateRef(){return this._nodeTemplateRef||this.nodeTemplateQuery}set loadMoreButtonTemplateRef(e){this._loadMoreButtonTemplateRef=e}get loadMoreButtonTemplateRef(){return this._loadMoreButtonTemplateRef||this.loadMoreButtonTemplateQuery}set nodes(e){this.data.next(e||[]),this.dataChangeNotification.notify()}get nodes(){return this.data.value}get hasChildren(){return this._hasChildren||zP}set hasChildren(e){this._hasChildren=e,this.expandIcons=Boolean(this._isExpanded&&this._hasChildren)}get isChecked(){return this._isChecked||ZP}set isChecked(e){this._isChecked=e,this.checkboxes=Boolean(this._isChecked)}get isExpanded(){return this._isExpanded||VP}set isExpanded(e){this._isExpanded=e,this.expandIcons=Boolean(this._isExpanded&&this._hasChildren)}get isSelected(){return this._isSelected||WA}set isSelected(e){this._isSelected=e,this.selectable=Boolean(this._isSelected)}set size(e){const n=e||"medium";"none"!==this.size&&this.renderer.removeClass(this.element.nativeElement,ab("treeview",this.size)),this.renderer.addClass(this.element.nativeElement,ab("treeview",n)),this._size=e}get size(){return this._size}ngOnChanges(e){this.navigationService.navigable=Boolean(this.navigable),Gi(["nodes","children","hasChildren","loadOnDemand"],e,!1)&&!this.loadOnDemand&&this.preloadChildNodes()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.domSubscriptions.forEach(e=>e())}ngOnInit(){this.subscriptions.add(this.nodeChildrenService.changes.subscribe(e=>this.childrenLoaded.emit(e))),this.subscriptions.add(this.expandService.changes.subscribe(({index:e,dataItem:n,expand:s})=>s?this.expand.emit({index:e,dataItem:n}):this.collapse.emit({index:e,dataItem:n}))),this.subscriptions.add(this.navigationService.checks.subscribe(e=>this.checkedChange.emit(this.treeViewLookupService.itemLookup(e)))),this.subscriptions.add(this.selectionService.changes.subscribe(e=>{zt(this.selectionChange)&&this.ngZone.run(()=>{this.selectionChange.emit(e)})})),this.element&&this.ngZone.runOutsideAngular(()=>{this.attachDomHandlers()}),this.size&&this.renderer.addClass(this.element.nativeElement,ab("treeview",this.size))}blur(){if(!nt())return;const e=iO(this.element);document.activeElement===e&&e.blur()}focus(e){const n=e||ia(this.navigationService.focusableItem);this.navigationService.activateIndex(n);const s=iO(this.element);s&&s.focus()}itemLookup(e){return this.treeViewLookupService.itemLookup(e)}rebindChildren(){this.dataChangeNotification.notify()}expandNode(e,n){this.expandService.expand(n,e)}collapseNode(e,n){this.expandService.collapse(n,e)}getNodePageSize(e){return this.verifyLoadMoreService(),this.loadMoreService.getGroupSize(e)}setNodePageSize(e,n){this.verifyLoadMoreService(),this.loadMoreService.setGroupSize(e,n)}preloadChildNodes(){this.treeViewLookupService.reset(),this.registerLookupItems(this.nodes)}attachDomHandlers(){const e=this.element.nativeElement;this.clickHandler=this.clickHandler.bind(this),this.domSubscriptions.push(this.renderer.listen(e,"contextmenu",this.clickHandler),this.renderer.listen(e,"click",this.clickHandler),this.renderer.listen(e,"dblclick",this.clickHandler),this.renderer.listen(e,"focusin",this.focusHandler.bind(this)),this.renderer.listen(e,"focusout",this.blurHandler.bind(this)),this.renderer.listen(e,"keydown",this.keydownHandler.bind(this)))}focusHandler(e){let n;if(Md(e.target,".k-treeview-item")?n=e.target:tO(e.target)||(n=Rd(e.target)),n){const s=rT(e.target);if(this.navigationService.isDisabled(s))return;this.navigationService.activateIndex(s),!this.isActive&&zt(this.onFocus)&&this.ngZone.run(()=>{this.onFocus.emit()}),this.isActive=!0}}blurHandler(e){this.isActive&&Md(e.target,".k-treeview-item")&&(!e.relatedTarget||!Md(e.relatedTarget,".k-treeview-item")||!iT(e.relatedTarget,this.element.nativeElement))&&(this.navigationService.deactivate(),this.isActive=!1,zt(this.onBlur)&&this.ngZone.run(()=>{this.onBlur.emit()}))}clickHandler(e){const n=e.target;if("contextmenu"===e.type&&!zt(this.nodeClick)||"click"===e.type&&!zt(this.nodeClick)&&!zt(this.selectionChange)&&!nO(n)||"dblclick"===e.type&&!zt(this.nodeDblClick)||tO(n)||!(i=>{if(!nt())return null;let e=i;for(;e&&!Md(e,".k-treeview-leaf:not(.k-treeview-load-more-button),.k-treeview-item,.k-treeview");)e=e.parentNode;return e?Md(e,".k-treeview-leaf:not(.k-treeview-load-more-button)"):void 0})(n)&&!nO(n)||!iT(n,this.element.nativeElement))return;const s=rT(Rd(n));!s||this.navigationService.isDisabled(s)||this.ngZone.run(()=>{const a=this.treeViewLookupService.itemLookup(s);if("click"===e.type){if(this.navigationService.model.findNode(s).loadMoreButton)return void this.navigationService.notifyLoadMore(s);this.navigationService.selectIndex(s)}("dblclick"===e.type?this.nodeDblClick:this.nodeClick).emit({item:a.item,originalEvent:e,type:e.type})})}keydownHandler(e){this.isActive&&this.navigable&&this.ngZone.run(()=>{this.navigationService.move(e)})}verifyLoadMoreService(){if((0,t.X6Q)()&&!Ue(this.loadMoreService))throw new Error("To use the TreeView paging functionality, you need to assign the `kendoTreeViewLoadMore` directive. See http://www.telerik.com/kendo-angular-ui/components/treeview/load-more-button/.")}registerLookupItems(e,n=null){if(!Ue(e)||0===e.length)return;const s=ia(n),a=e.map((d,f)=>((i,r,e)=>Ue(i)?{dataItem:i,index:Vm(e,r)}:null)(d,f,s));Ue(n)&&this.treeViewLookupService.registerChildren(s,a),a.forEach(d=>{this.treeViewLookupService.registerItem(d,n),this.hasChildren(d.dataItem)&&this.children(d.dataItem).subscribe(f=>this.registerLookupItems(f,d))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(Hm),t.Y36(zh),t.Y36(lT),t.Y36(lb),t.Y36(cb),t.Y36(t.R0b),t.Y36(t.Qsj),t.Y36(Xk),t.Y36(Ge))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-treeview"]],contentQueries:function(e,n,s){if(1&e&&(t.Suo(s,cT,5),t.Suo(s,dT,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.nodeTemplateQuery=a.first),t.iGM(a=t.CRH())&&(n.loadMoreButtonTemplateQuery=a.first)}},viewQuery:function(e,n){if(1&e&&t.Gf(DP,7,t.s_b),2&e){let s;t.iGM(s=t.CRH())&&(n.assetsContainer=s.first)}},hostVars:5,hostBindings:function(e,n){2&e&&(t.uIk("role",n.role)("dir",n.direction),t.d8E("@.disabled",n.animate),t.ekj("k-treeview",n.classNames))},inputs:{filterInputPlaceholder:"filterInputPlaceholder",expandDisabledNodes:"expandDisabledNodes",animate:"animate",nodeTemplateRef:["nodeTemplate","nodeTemplateRef"],loadMoreButtonTemplateRef:["loadMoreButtonTemplate","loadMoreButtonTemplateRef"],trackBy:"trackBy",nodes:"nodes",textField:"textField",hasChildren:"hasChildren",isChecked:"isChecked",isDisabled:"isDisabled",isExpanded:"isExpanded",isSelected:"isSelected",isVisible:"isVisible",navigable:"navigable",children:"children",loadOnDemand:"loadOnDemand",filterable:"filterable",filter:"filter",size:"size",disableParentNodesOnly:"disableParentNodesOnly"},outputs:{childrenLoaded:"childrenLoaded",onBlur:"blur",onFocus:"focus",expand:"expand",collapse:"collapse",nodeDragStart:"nodeDragStart",nodeDrag:"nodeDrag",filterStateChange:"filterStateChange",nodeDrop:"nodeDrop",nodeDragEnd:"nodeDragEnd",addItem:"addItem",removeItem:"removeItem",checkedChange:"checkedChange",selectionChange:"selectionChange",filterChange:"filterChange",nodeClick:"nodeClick",nodeDblClick:"nodeDblClick"},exportAs:["kendoTreeView"],features:[t._Bn(oU),t.TTD],decls:4,vars:22,consts:[["class","k-treeview-filter",4,"ngIf"],["kendoTreeViewGroup","","role","group",1,"k-treeview-lines",3,"size","loadOnDemand","checkboxes","expandIcons","selectable","touchActions","children","hasChildren","isChecked","isDisabled","disableParentNodesOnly","isExpanded","isSelected","isVisible","nodeTemplateRef","loadMoreButtonTemplateRef","textField","nodes","loadMoreService","trackBy","expandDisabledNodes"],["assetsContainer",""],[1,"k-treeview-filter"],[3,"size","value","clearButton","placeholder","valueChange"],["kendoTextBoxPrefixTemplate",""],[1,"k-input-icon","k-icon","k-i-search"]],template:function(e,n){1&e&&(t.YNc(0,OP,3,4,"span",0),t._UZ(1,"ul",1),t.GkF(2,null,2)),2&e&&(t.Q6J("ngIf",n.filterable),t.xp6(1),t.Q6J("size",n.size)("loadOnDemand",n.loadOnDemand)("checkboxes",n.checkboxes)("expandIcons",n.expandIcons)("selectable",n.selectable)("touchActions",n.touchActions)("children",n.children)("hasChildren",n.hasChildren)("isChecked",n.isChecked)("isDisabled",n.isDisabled)("disableParentNodesOnly",n.disableParentNodesOnly)("isExpanded",n.isExpanded)("isSelected",n.isSelected)("isVisible",n.isVisible)("nodeTemplateRef",null==n.nodeTemplateRef?null:n.nodeTemplateRef.templateRef)("loadMoreButtonTemplateRef",null==n.loadMoreButtonTemplateRef?null:n.loadMoreButtonTemplateRef.templateRef)("textField",n.textField)("nodes",n.fetchNodes)("loadMoreService",n.loadMoreService)("trackBy",n.trackBy)("expandDisabledNodes",n.expandDisabledNodes))},dependencies:[IL,gO,X.O5,mA],encapsulation:2}),i})();!function fU(i){let r,e=!1}(()=>{if(!nt()||!Ue(document.body))return!1;const r=document.createElement("div");r.style.transform="matrix(10, 0, 0, 10, 0, 0)",r.innerHTML='<div style="position: fixed; top: 10px;">child</div>',document.body.appendChild(r);const e=10!==r.children[0].getBoundingClientRect().top;return document.body.removeChild(r),e}),new RegExp("(auto|scroll)"),new Uh,new Uh;let DU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),i})(),AU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,DU,KA]]}),i})(),OU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[AU]]}),i})();const IU=["input"],MU=function(i,r){return{focus:i,blur:r}},RU=["content"],NU=["list"],FU=["virtualContainer"];function LU(i,r){}const sa=function(i,r){return{templateRef:i,$implicit:r}};function PU(i,r){if(1&i&&t.YNc(0,LU,0,0,"ng-template",10),2&i){const e=t.oxw(2);t.Q6J("templateContext",t.WLB(1,sa,e.fixedGroupTemplate.templateRef,e.currentGroup))}}function UU(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.Tol(e.listGroupStickyHeaderTextClass),t.xp6(1),t.Oqu(e.currentGroup)}}const GO=function(i,r,e){return{"height.px":i,"minHeight.px":r,boxSizing:e}};function BU(i,r){if(1&i&&(t.TgZ(0,"div",8),t.YNc(1,PU,1,4,null,5),t.YNc(2,UU,2,3,"ng-template",9),t.qZA()),2&i){const e=t.oxw();t.Tol(e.listGroupStickyHeaderClass),t.Q6J("ngStyle",t.kEZ(5,GO,null==e.virtual?null:e.virtual.itemHeight,null==e.virtual?null:e.virtual.itemHeight,e.virtual?"border-box":"inherit")),t.xp6(1),t.Q6J("ngIf",e.fixedGroupTemplate),t.xp6(1),t.Q6J("ngIf",!e.fixedGroupTemplate)}}function GU(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"input",14),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw().index,d=t.oxw(2);return t.KtG(d.onCheckedChange(s,a))}),t.qZA()}if(2&i){const e=t.oxw().index,n=t.oxw(2);t.Q6J("ngClass",n.checkboxClasses)("checked",n.isChecked(e))}}function zU(i,r){}function ZU(i,r){if(1&i&&t.YNc(0,zU,0,0,"ng-template",10),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("templateContext",t.WLB(1,sa,n.template.templateRef,e))}}function HU(i,r){if(1&i&&(t.TgZ(0,"span",15),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.getText(e))}}const zO=function(i,r){return{"k-disabled":i,"k-table-alt-row":r}};function VU(i,r){if(1&i&&(t.TgZ(0,"li",12),t.YNc(1,GU,1,2,"input",13),t.YNc(2,ZU,1,4,null,5),t.YNc(3,HU,2,1,"ng-template",9),t.qZA()),2&i){const e=r.$implicit,n=r.index,s=t.oxw(2);t.Tol(s.listItemClass),t.Q6J("checkboxes",s.checkboxes)("height",null==s.virtual?null:s.virtual.itemHeight)("index",n+s.startFrom)("multipleSelection",s.multipleSelection)("ngClass",t.WLB(13,zO,s.isDisabled(n),s.isAltRow(n))),t.uIk("id",s.optionPrefix+"-"+s.getValue(e))("tabIndex",-1)("aria-selected",s.isItemSelected(n)),t.xp6(1),t.Q6J("ngIf",s.checkboxes.enabled),t.xp6(1),t.Q6J("ngIf",s.template),t.xp6(1),t.Q6J("ngIf",!s.template)}}function JU(i,r){if(1&i&&t.YNc(0,VU,4,16,"ng-template",11),2&i){const e=t.oxw();t.Q6J("ngForOf",e.data)}}function qU(i,r){}function YU(i,r){if(1&i&&t.YNc(0,qU,0,0,"ng-template",10),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.Q6J("templateContext",t.WLB(1,sa,n.groupTemplate.templateRef,e.value))}}function KU(i,r){if(1&i&&t._uU(0),2&i){const e=t.oxw(2).$implicit;t.Oqu(e.value)}}function $U(i,r){if(1&i&&(t.TgZ(0,"li",18)(1,"span"),t.YNc(2,YU,1,4,null,5),t.YNc(3,KU,1,1,"ng-template",9),t.qZA()()),2&i){const e=t.oxw(),n=e.index,s=e.$implicit,a=t.oxw(2);t.Tol(a.listGroupItemClass),t.ekj("k-table-alt-row",a.isAltRow(n-1)),t.Q6J("ngStyle",t.kEZ(12,GO,null==a.virtual?null:a.virtual.itemHeight,null==a.virtual?null:a.virtual.itemHeight,a.virtual?"border-box":"inherit")),t.uIk("group-index",s.index)("id",a.optionPrefix+"-"+a.getValue(s.value))("tabIndex",-1),t.xp6(1),t.Tol(a.listGroupItemTextClass),t.xp6(1),t.Q6J("ngIf",a.groupTemplate),t.xp6(1),t.Q6J("ngIf",!a.groupTemplate)}}function WU(i,r){}function jU(i,r){if(1&i&&t.YNc(0,WU,0,0,"ng-template",10),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.Q6J("templateContext",t.WLB(1,sa,n.template.templateRef,e.value))}}function QU(i,r){if(1&i&&(t.TgZ(0,"span",15),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(n.getText(e.value))}}function XU(i,r){if(1&i&&(t.TgZ(0,"li",19),t.YNc(1,jU,1,4,null,5),t.YNc(2,QU,2,1,"ng-template",9),t.qZA()),2&i){const e=t.oxw(),n=e.$implicit,s=e.index,a=t.oxw(2);t.Tol(a.listItemClass),t.Q6J("height",null==a.virtual?null:a.virtual.itemHeight)("index",n.offsetIndex)("multipleSelection",a.multipleSelection)("ngClass",t.WLB(12,zO,a.isDisabled(n.offsetIndex),a.isAltRow(s-1))),t.uIk("absolute-index",n.index)("id",a.optionPrefix+"-"+a.getValue(n.value))("tabIndex",-1)("aria-selected",a.isItemSelected(n.offsetIndex)),t.xp6(1),t.Q6J("ngIf",a.template),t.xp6(1),t.Q6J("ngIf",!a.template)}}function eB(i,r){if(1&i&&(t.YNc(0,$U,4,16,"li",16),t.YNc(1,XU,3,15,"li",17)),2&i){const e=r.$implicit;t.Q6J("ngIf",e.header&&e.index>0),t.xp6(1),t.Q6J("ngIf",!e.header)}}function tB(i,r){if(1&i&&t.YNc(0,eB,2,2,"ng-template",11),2&i){const e=t.oxw();t.Q6J("ngForOf",e.data)}}function nB(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"kendo-resize-sensor",20),t.NdJ("resize",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.listResize.emit())}),t.qZA()}}function iB(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",21,22)(2,"div")(3,"kendo-resize-sensor",20),t.NdJ("resize",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.listResize.emit())}),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(2),t.Udp("height",e.scrollHeight,"px")}}const Zh=["container"],Hh=["popupTemplate"],hb=["optionsList"];function rB(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",8),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.clearValue(s))})("mousedown",function(s){return s.preventDefault()}),t._UZ(1,"span",9),t.qZA()}if(2&i){const e=t.oxw();t.Udp("visibility",e.clearButtonVisiblity),t.uIk("title",e.messageFor("clearTitle"))}}function sB(i,r){1&i&&t._UZ(0,"span",10)}function oB(i,r){}const mi=function(i){return{templateRef:i}};function aB(i,r){if(1&i&&t.YNc(0,oB,0,0,"ng-template",15),2&i){const e=t.oxw(2);t.Q6J("templateContext",t.VKq(1,mi,e.headerTemplate.templateRef))}}function lB(i,r){}function cB(i,r){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(e.messageFor("noDataText"))}}function dB(i,r){if(1&i&&(t.TgZ(0,"div",16),t.YNc(1,lB,0,0,"ng-template",17),t.YNc(2,cB,2,1,"ng-template",6),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.noDataTemplate)("templateContext",t.VKq(3,mi,null==e.noDataTemplate?null:e.noDataTemplate.templateRef)),t.xp6(1),t.Q6J("ngIf",!e.noDataTemplate)}}function uB(i,r){}function hB(i,r){if(1&i&&t.YNc(0,uB,0,0,"ng-template",15),2&i){const e=t.oxw(2);t.Q6J("templateContext",t.VKq(1,mi,e.footerTemplate.templateRef))}}function fB(i,r){if(1&i){const e=t.EpF();t.YNc(0,aB,1,3,null,11),t.TgZ(1,"kendo-list",12,13),t.NdJ("pageChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.pageChange(s))}),t.qZA(),t.YNc(3,dB,3,5,"div",14),t.YNc(4,hB,1,3,null,11)}if(2&i){const e=t.oxw();t.Q6J("ngIf",e.headerTemplate),t.xp6(1),t.Q6J("size",e.size)("rounded",e.rounded)("id",e.listBoxId)("optionPrefix",e.optionPrefix)("data",e.data)("textField",e.valueField)("valueField",e.valueField)("template",e.template)("groupTemplate",e.groupTemplate)("fixedGroupTemplate",e.fixedGroupTemplate)("height",e.listHeight)("show",e.isOpen)("virtual",e.virtual),t.xp6(2),t.Q6J("ngIf",0===e.data.length),t.xp6(1),t.Q6J("ngIf",e.footerTemplate)}}function pB(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"kendo-resize-sensor",18),t.NdJ("resize",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onResize())}),t.qZA()}}const mB=["select"],qm=function(i){return{mousedown:i}};function gB(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",10),t.NdJ("click",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.clearValue(s))}),t._UZ(1,"span",11),t.qZA()}if(2&i){const e=t.oxw();t.Udp("visibility",e.clearButtonVisiblity),t.Q6J("kendoEventsOutsideAngular",t.VKq(4,qm,e.preventEventDefault)),t.uIk("title",e.messageFor("clearTitle"))}}function _B(i,r){}function vB(i,r){if(1&i&&t.YNc(0,_B,0,0,"ng-template",16),2&i){const e=t.oxw(2);t.Q6J("templateContext",t.VKq(1,mi,e.headerTemplate.templateRef))}}function bB(i,r){}function xB(i,r){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(e.messageFor("noDataText"))}}function CB(i,r){if(1&i&&(t.TgZ(0,"div",17),t.YNc(1,bB,0,0,"ng-template",18),t.YNc(2,xB,2,1,"ng-template",8),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.noDataTemplate)("templateContext",t.VKq(3,mi,e.noDataTemplate?e.noDataTemplate.templateRef:void 0)),t.xp6(1),t.Q6J("ngIf",!e.noDataTemplate)}}function SB(i,r){}function EB(i,r){if(1&i&&t.YNc(0,SB,0,0,"ng-template",16),2&i){const e=t.oxw(2);t.Q6J("templateContext",t.VKq(1,mi,e.footerTemplate.templateRef))}}function wB(i,r){if(1&i){const e=t.EpF();t.YNc(0,vB,1,3,null,12),t.TgZ(1,"kendo-list",13,14),t.NdJ("pageChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.pageChange(s))}),t.qZA(),t.YNc(3,CB,3,5,"div",15),t.YNc(4,EB,1,3,null,12)}if(2&i){const e=t.oxw();t.Q6J("ngIf",e.headerTemplate),t.xp6(1),t.Q6J("size",e.size)("rounded",e.rounded)("id",e.listBoxId)("optionPrefix",e.optionPrefix)("data",e.data)("textField",e.textField)("valueField",e.valueField)("template",e.template)("groupTemplate",e.groupTemplate)("fixedGroupTemplate",e.fixedGroupTemplate)("height",e.listHeight)("show",e.isOpen)("virtual",e.virtual),t.xp6(2),t.Q6J("ngIf",0===e.data.length),t.xp6(1),t.Q6J("ngIf",e.footerTemplate)}}function kB(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"kendo-resize-sensor",19),t.NdJ("resize",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onResize())}),t.qZA()}}function TB(i,r){}function yB(i,r){if(1&i&&t.YNc(0,TB,0,0,"ng-template",9),2&i){const e=t.oxw();t.Q6J("templateContext",t.WLB(1,sa,e.valueTemplate.templateRef,e.dataItem))}}function DB(i,r){if(1&i&&t._uU(0),2&i){const e=t.oxw();t.Oqu(e.getText())}}function AB(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(s){return s.stopImmediatePropagation()}),t.TgZ(1,"span",14),t._UZ(2,"span",15),t.TgZ(3,"input",16),t.NdJ("ngModelChange",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.filterText=s)})("keydown",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.keydown(s))})("input",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleFilter(s))})("focus",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onFilterFocus())})("blur",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.blurFilterInput())}),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngClass",e.filterInputClasses),t.xp6(2),t.Q6J("filterInput",e.isFocused&&!e.touchEnabled)("dir",e.direction)("ngModel",e.filterText),t.uIk("aria-controls",e.ariaControls)("aria-activedescendant",e.ariaActivedescendant)}}const ZO=function(i){return{"k-disabled":i}};function OB(i,r){if(1&i&&(t.TgZ(0,"div",17)(1,"div",18),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.Q6J("ngClass",e.optionLabelSizeClass),t.xp6(1),t.Q6J("ngClass",t.VKq(4,ZO,e.isDisabledDefaultItem))("index",-1),t.xp6(1),t.hij(" ",e.getDefaultItemText()," ")}}function IB(i,r){}function MB(i,r){if(1&i&&(t.TgZ(0,"div",17)(1,"div",18),t.YNc(2,IB,0,0,"ng-template",9),t.qZA()()),2&i){const e=t.oxw(2);t.Q6J("ngClass",e.optionLabelSizeClass),t.xp6(1),t.Q6J("ngClass",t.VKq(4,ZO,e.isDisabledDefaultItem))("index",-1),t.xp6(1),t.Q6J("templateContext",t.WLB(6,sa,e.itemTemplate.templateRef,e.defaultItem))}}function RB(i,r){}function NB(i,r){if(1&i&&t.YNc(0,RB,0,0,"ng-template",9),2&i){const e=t.oxw(2);t.Q6J("templateContext",t.VKq(1,mi,e.headerTemplate.templateRef))}}function FB(i,r){}function LB(i,r){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(e.messageFor("noDataText"))}}function PB(i,r){if(1&i&&(t.TgZ(0,"div",19),t.YNc(1,FB,0,0,"ng-template",20),t.YNc(2,LB,2,1,"ng-template",4),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.noDataTemplate)("templateContext",t.VKq(3,mi,e.noDataTemplate?e.noDataTemplate.templateRef:void 0)),t.xp6(1),t.Q6J("ngIf",!e.noDataTemplate)}}function UB(i,r){}function BB(i,r){if(1&i&&t.YNc(0,UB,0,0,"ng-template",9),2&i){const e=t.oxw(2);t.Q6J("templateContext",t.VKq(1,mi,e.footerTemplate.templateRef))}}function GB(i,r){if(1&i){const e=t.EpF();t.YNc(0,AB,4,6,"ng-template",4),t.YNc(1,OB,3,6,"ng-template",4),t.YNc(2,MB,3,9,"ng-template",4),t.YNc(3,NB,1,3,null,3),t.TgZ(4,"kendo-list",10,11),t.NdJ("pageChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.pageChange(s))}),t.qZA(),t.YNc(6,PB,3,5,"div",12),t.YNc(7,BB,1,3,null,3)}if(2&i){const e=t.oxw();t.Q6J("ngIf",e.filterable),t.xp6(1),t.Q6J("ngIf",e.defaultItem&&!e.itemTemplate),t.xp6(1),t.Q6J("ngIf",e.defaultItem&&e.itemTemplate),t.xp6(1),t.Q6J("ngIf",e.headerTemplate),t.xp6(1),t.Q6J("size",e.size)("rounded",e.rounded)("id",e.listBoxId)("optionPrefix",e.optionPrefix)("data",e.data)("textField",e.textField)("valueField",e.valueField)("template",e.itemTemplate)("groupTemplate",e.groupTemplate)("fixedGroupTemplate",e.fixedGroupTemplate)("height",e.listHeight)("show",e.isOpen)("virtual",e.virtual)("ariaLive",e.ariaLive),t.xp6(2),t.Q6J("ngIf",0===e.data.length),t.xp6(1),t.Q6J("ngIf",e.footerTemplate)}}function zB(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"kendo-resize-sensor",21),t.NdJ("resize",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onResize())}),t.qZA()}}function ZB(i,r){}function HB(i,r){1&i&&t.YNc(0,ZB,0,0,"ng-template")}function VB(i,r){}function JB(i,r){if(1&i&&t.YNc(0,VB,0,0,"ng-template",12),2&i){const e=t.oxw(2).$implicit,n=t.oxw();t.Q6J("templateContext",t.WLB(1,sa,n.groupTemplate.templateRef,e))}}function qB(i,r){if(1&i&&t._uU(0),2&i){const e=t.oxw(2).$implicit;t.AsE("",e.length," ",1===e.length?"item":"items"," selected")}}function YB(i,r){if(1&i&&(t.TgZ(0,"span",9),t.YNc(1,JB,1,4,null,10),t.YNc(2,qB,1,2,"ng-template",11),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.groupTemplate),t.xp6(1),t.Q6J("ngIf",!e.groupTemplate)}}function KB(i,r){}function $B(i,r){if(1&i&&t.YNc(0,KB,0,0,"ng-template",12),2&i){const e=t.oxw(2).$implicit,n=t.oxw();t.Q6J("templateContext",t.WLB(1,sa,n.template.templateRef,e))}}function WB(i,r){if(1&i&&t._uU(0),2&i){const e=t.oxw(2),n=e.$implicit,s=e.index,a=t.oxw();t.Oqu(a.tagProp(n,a.textField,s))}}function jB(i,r){if(1&i&&(t.TgZ(0,"span",9),t.YNc(1,$B,1,4,null,10),t.YNc(2,WB,1,1,"ng-template",11),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.template),t.xp6(1),t.Q6J("ngIf",!e.template)}}const QB=function(i,r,e,n,s,a,d,f,p,g,b,S){return{"k-focus":i,"k-disabled":r,"k-chip-sm":e,"k-chip-md":n,"k-chip-lg":s,"k-rounded-sm":a,"k-rounded-md":d,"k-rounded-lg":f,"k-rounded-full":p,"k-chip-solid k-chip-solid-base":g,"k-chip-flat k-chip-flat-base":b,"k-chip-outline k-chip-outline-base":S}};function XB(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",1)(1,"span",2),t.YNc(2,HB,1,0,null,3),t.YNc(3,YB,3,2,"ng-template",null,4,t.W1O),t.YNc(5,jB,3,2,"ng-template",null,5,t.W1O),t.qZA(),t.TgZ(7,"span",6)(8,"span",7)(9,"span",8),t.NdJ("mousedown",function(s){const a=t.CHM(e),d=a.$implicit,f=a.index,p=t.oxw();return t.KtG(p.deleteTag(s,d,f))}),t.qZA()()()()}if(2&i){const e=r.$implicit,n=r.index,s=t.MAs(4),a=t.MAs(6),d=t.oxw();t.Q6J("ngClass",t.rFY(7,QB,[n===d.focused,d.isTagDisabled(e,n),"small"===d.size,"medium"===d.size,"large"===d.size,"small"===d.rounded,"medium"===d.rounded,"large"===d.rounded,"full"===d.rounded,"solid"===d.fillMode,"flat"===d.fillMode,"outline"===d.fillMode])),t.uIk("id",d.itemId(e,n))("aria-hidden",d.tagAriaHidden(n)),t.xp6(2),t.Q6J("ngIf",d.isGroupTag(e))("ngIfThen",s)("ngIfElse",a),t.xp6(6),t.uIk("aria-hidden",n!==d.focused)}}const e5=["*"];function t5(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",9),t.NdJ("mousedown",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.clearAll(s))}),t._UZ(1,"span",10),t.qZA()}if(2&i){const e=t.oxw();t.Udp("visibility",e.clearButtonVisiblity),t.uIk("title",e.messageFor("clearTitle"))}}function n5(i,r){1&i&&t._UZ(0,"span",11)}function r5(i,r){}function s5(i,r){if(1&i&&t.YNc(0,r5,0,0,"ng-template",17),2&i){const e=t.oxw(2);t.Q6J("templateContext",t.VKq(1,mi,e.headerTemplate.templateRef))}}function o5(i,r){}function a5(i,r){if(1&i&&t.YNc(0,o5,0,0,"ng-template",17),2&i){const e=t.oxw(3);t.Q6J("templateContext",t.WLB(1,sa,e.customItemTemplate.templateRef,e.text))}}function l5(i,r){if(1&i&&t._uU(0),2&i){const e=t.oxw(3);t.Oqu(e.text)}}function c5(i,r){if(1&i&&(t.TgZ(0,"div",18)(1,"div",19),t.YNc(2,a5,1,4,null,20),t.YNc(3,l5,1,1,"ng-template",null,21,t.W1O),t._UZ(5,"span",22),t.qZA()()),2&i){const e=t.MAs(4),n=t.oxw(2);t.Q6J("ngClass",n.customItemSizeClass),t.xp6(1),t.Q6J("multipleSelection",!0)("index",-1),t.xp6(1),t.Q6J("ngIf",n.customItemTemplate)("ngIfElse",e)}}function d5(i,r){}function u5(i,r){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Oqu(e.messageFor("noDataText"))}}function h5(i,r){if(1&i&&(t.TgZ(0,"div",23),t.YNc(1,d5,0,0,"ng-template",24),t.YNc(2,u5,2,1,"ng-template",7),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.noDataTemplate)("templateContext",t.VKq(3,mi,e.noDataTemplate?e.noDataTemplate.templateRef:void 0)),t.xp6(1),t.Q6J("ngIf",!e.noDataTemplate)}}function f5(i,r){}function p5(i,r){if(1&i&&t.YNc(0,f5,0,0,"ng-template",17),2&i){const e=t.oxw(2);t.Q6J("templateContext",t.VKq(1,mi,e.footerTemplate.templateRef))}}function m5(i,r){if(1&i){const e=t.EpF();t.YNc(0,s5,1,3,null,12),t.YNc(1,c5,6,5,"div",13),t.TgZ(2,"kendo-list",14,15),t.NdJ("pageChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.pageChange(s))}),t.qZA(),t.YNc(4,h5,3,5,"div",16),t.YNc(5,p5,1,3,null,12)}if(2&i){const e=t.oxw();t.Q6J("ngIf",e.headerTemplate),t.xp6(1),t.Q6J("ngIf",e.allowCustom&&e.text),t.xp6(1),t.Q6J("size",e.size)("rounded",e.rounded)("id",e.listBoxId)("optionPrefix",e.optionPrefix)("data",e.data)("textField",e.textField)("valueField",e.valueField)("height",e.listHeight)("template",e.template)("groupTemplate",e.groupTemplate)("fixedGroupTemplate",e.fixedGroupTemplate)("show",e.isOpen)("multipleSelection",!0)("virtual",e.virtual)("checkboxes",e.checkboxes)("isMultiselect",!0),t.xp6(2),t.Q6J("ngIf",0===e.data.length),t.xp6(1),t.Q6J("ngIf",e.footerTemplate)}}function g5(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"kendo-resize-sensor",25),t.NdJ("resize",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onResize())}),t.qZA()}}const fb={name:"@progress/kendo-angular-dropdowns",productName:"Kendo UI for Angular",productCodes:["KENDOUIANGULAR","KENDOUICOMPLETE"],publishDate:1668698206,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning"},de=i=>null!=i,Hr=()=>{let r,e,i="";for(r=0;r<32;r++)e=16*Math.random()|0,(8===r||12===r||16===r||20===r)&&(i+="-"),i+=(12===r?4:16===r?3&e|8:e).toString(16);return i},xr=i=>Array.isArray(i),Ld=i=>de(i)&&"object"==typeof i,JO=i=>"string"==typeof i&&0===i.length,pb=i=>xr(i)&&i.every(r=>Ld(r)),xT=(i,r,e)=>{const n=r.map(s=>de(s)&&de(at(s,e))?at(s,e):s);return i.reduce((s,a)=>{const d=de(a)&&de(at(a,e))?at(a,e):a,f=n.indexOf(d);return-1!==f&&s.push(f),s},[])},at=(i,r)=>de(i)?de(r)&&Ld(i)?Di(r)(i):i:null,qO=(i,r,e)=>{if(!de(i))return!1;let n=String(i);return e&&(n=n.toLowerCase()),0===n.indexOf(r)},Vh=i=>i.className.includes("ng-untouched"),Pd=i=>{},kG=(i,r)=>{const e=i.matches||i.msMatchesSelector||i.webkitMatchesSelector;return!!e&&e.call(i,r)},Ym=(i,r,e)=>i.nativeElement.contains(r)||e&&e.popupElement.contains(r),vn=(i,r)=>({small:`k-${i}-sm`,medium:`k-${i}-md`,large:`k-${i}-lg`}[r]),gi=i=>({small:"k-rounded-sm",medium:"k-rounded-md",large:"k-rounded-lg",full:"k-rounded-full"}[i]),dr=(i,r)=>({solid:`k-${i}-solid`,flat:`k-${i}-flat`,outline:`k-${i}-outline`}[r]),KO=i=>mu(i).safari||wc(i)&&"mobilesafari"===wc(i).browser;let ac=(()=>{class i{constructor(e,n,s){this.localization=e,this.injector=s,this.valueChange=new t.vpe,this.onBlur=new t.vpe,this.onFocus=new t.vpe,this.onClick=new t.vpe,this.onNavigate=new t.vpe,this.searchBarClass=!0,this._userInput="",this._previousValue="",this._placeholder="",this._isSuggestable=!1,this._isFilterable=!1,this.subs=new cn.w0,this.direction=e.rtl?"rtl":"ltr",this.renderer=n}set isSuggestable(e){this._isSuggestable=e,this.setAriaAutocomplete()}get isSuggestable(){return this._isSuggestable}set isFilterable(e){this._isFilterable=e,this.setAriaAutocomplete()}get isFilterable(){return this._isFilterable}get userInput(){return this._userInput}set userInput(e){this._userInput=e||""}get formControl(){return this.injector.get(H.a5,null)?.control||null}get value(){return this.input.nativeElement.value}set placeholder(e){this._placeholder=e||"",this.setInputSize()}get placeholder(){return this._placeholder}get ariaExpanded(){return"combobox"===this.role?this.popupOpen:null}ngOnInit(){this.subs.add(this.localization.changes.subscribe(({rtl:e})=>this.direction=e?"rtl":"ltr"))}ngOnChanges(e){let n;if(this.input&&(e.userInput||e.suggestedText)){n=e.userInput&&e.userInput.previousValue?this._previousValue===e.userInput.previousValue?this._previousValue:e.userInput.currentValue||"":this._previousValue;const s=this.input.nativeElement.selectionStart,a=n.length===s;this.writeInputValue(this.suggestedText?((i,r)=>i.concat(r.substr(r.toLowerCase().indexOf(i.toLowerCase())+i.length)))(this.userInput,this.suggestedText):this.userInput),this.suggestedText?this.setInputSelection(this.userInput.length,this.suggestedText.length):KO(navigator.userAgent)&&!a?this.setInputSelection(s,this.userInput.length):a?this.setInputSelection(this.userInput.length,this.userInput.length):this.setInputSelection(s,s),this._previousValue=this.userInput}}ngOnDestroy(){this.subs.unsubscribe()}writeInputValue(e){nt()&&this.renderer.setProperty(this.input.nativeElement,"value",e)}setInputSelection(e,n){if(nt()&&this.input.nativeElement===document.activeElement)try{this.input.nativeElement.setSelectionRange(e,n)}catch{}}setAriaAutocomplete(){this.isFilterable&&this.renderer.setAttribute(this.input.nativeElement,"aria-autocomplete","list"),this.isSuggestable&&this.renderer.setAttribute(this.input.nativeElement,"aria-autocomplete","inline"),this.isFilterable&&this.isSuggestable&&this.renderer.setAttribute(this.input.nativeElement,"aria-autocomplete","both"),!this.isFilterable&&!this.isSuggestable&&this.renderer.removeAttribute(this.input.nativeElement,"aria-autocomplete")}handleInput(e){const n=e.target,a=KO(navigator.userAgent)&&(i=>/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g.test(i))(n.value)?e.data:n.value;a!==this.userInput&&(this._previousValue=a,this.valueChange.emit(a))}handleFocus(e){this.onFocus.emit(e)}handleBlur(e){this.onBlur.emit(e)}handleKeydown(e){[ke.ArrowUp,ke.ArrowDown,ke.ArrowLeft,ke.ArrowRight,ke.Enter,ke.Escape,ke.Delete,ke.Backspace,ke.Home,ke.End,ke.PageDown,ke.PageUp].indexOf(e.keyCode)>-1&&this.onNavigate.emit(e)}focus(){nt()&&this.input.nativeElement.focus()}blur(){nt()&&this.input.nativeElement.blur()}setInputSize(){const e=f=>f?f.length:0,n=this.input.nativeElement,s=e(this.placeholder),a=e(this.value),d=Math.max(s,a,1);this.renderer.setAttribute(n,"size",d.toString())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge),t.Y36(t.Qsj),t.Y36(t.zs3))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-searchbar"]],viewQuery:function(e,n){if(1&e&&t.Gf(IU,7),2&e){let s;t.iGM(s=t.CRH())&&(n.input=s.first)}},hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("k-searchbar",n.searchBarClass)},inputs:{id:"id",listId:"listId",tagListId:"tagListId",activeDescendant:"activeDescendant",disabled:"disabled",readonly:"readonly",tabIndex:"tabIndex",popupOpen:"popupOpen",role:"role",isLoading:"isLoading",isSuggestable:"isSuggestable",isFilterable:"isFilterable",userInput:"userInput",suggestedText:"suggestedText",placeholder:"placeholder"},outputs:{valueChange:"valueChange",onBlur:"onBlur",onFocus:"onFocus",onClick:"onClick",onNavigate:"onNavigate"},features:[t.TTD],decls:2,vars:20,consts:[["autocomplete","off","aria-haspopup","listbox",3,"id","disabled","readonly","placeholder","kendoEventsOutsideAngular","scope","input","keydown"],["input",""]],template:function(e,n){1&e&&(t.TgZ(0,"input",0,1),t.NdJ("input",function(a){return n.handleInput(a)})("keydown",function(a){return n.handleKeydown(a)}),t.qZA()),2&e&&(t.Tol("k-input-inner"),t.Q6J("id",n.id)("disabled",n.disabled)("readonly",n.readonly)("placeholder",n.placeholder)("kendoEventsOutsideAngular",t.WLB(17,MU,n.handleFocus,n.handleBlur))("scope",n),t.uIk("tabIndex",n.tabIndex)("dir",n.direction)("role",n.role)("aria-expanded",n.ariaExpanded)("aria-controls",n.listId)("aria-describedby",n.tagListId)("aria-activedescendant",n.activeDescendant)("aria-busy",n.isLoading)("aria-invalid",null==n.formControl?null:n.formControl.invalid))},dependencies:[Es],encapsulation:2}),i})(),Ud=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDropDownListItemTemplate",""],["","kendoComboBoxItemTemplate",""],["","kendoAutoCompleteItemTemplate",""],["","kendoMultiSelectItemTemplate",""]]}),i})(),Bd=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDropDownListHeaderTemplate",""],["","kendoComboBoxHeaderTemplate",""],["","kendoDropDownTreeHeaderTemplate",""],["","kendoMultiColumnComboBoxHeaderTemplate",""],["","kendoAutoCompleteHeaderTemplate",""],["","kendoMultiSelectHeaderTemplate",""],["","kendoMultiSelectTreeHeaderTemplate",""]]}),i})(),Gd=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDropDownListFooterTemplate",""],["","kendoComboBoxFooterTemplate",""],["","kendoDropDownTreeFooterTemplate",""],["","kendoMultiColumnComboBoxFooterTemplate",""],["","kendoAutoCompleteFooterTemplate",""],["","kendoMultiSelectFooterTemplate",""],["","kendoMultiSelectTreeFooterTemplate",""]]}),i})(),Km=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDropDownListGroupTemplate",""],["","kendoComboBoxGroupTemplate",""],["","kendoMultiColumnComboBoxGroupTemplate",""],["","kendoAutoCompleteGroupTemplate",""],["","kendoMultiSelectGroupTemplate",""]]}),i})(),$m=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDropDownListFixedGroupTemplate",""],["","kendoComboBoxFixedGroupTemplate",""],["","kendoMultiColumnComboBoxFixedGroupTemplate",""],["","kendoAutoCompleteFixedGroupTemplate",""],["","kendoMultiSelectFixedGroupTemplate",""]]}),i})(),is=(()=>{class i{constructor(){this.grouped=!1,this.groupIndices=[]}set data(e){this._data=e,this.grouped=this.isGrouped(e),this.grouped&&(this.groupIndices=this.getGroupIndices(e),this._flatData=this.flatten(e))}get data(){return this.grouped?this._flatData:this._data}get itemsCount(){return de(this.data)&&0!==this.data.length?(this.grouped?this._flatData.filter(n=>!n.header):this.data).length:0}isGrouped(e){return de(e)&&0!==e.length&&de(e[0])&&((i,r)=>!!de(i)&&r.every(e=>i.hasOwnProperty(e)))(e[0],["aggregates","field","items","value"])}getGroupIndices(e){let n=[];for(let s=0;s<=e.length-1;s++)n[s]=(n[s-1]||0)+e[s].items.length;return n}filter(e){let n=[];if(this.isGrouped(this.data))for(let s=0;s<=this.groupIndices.length-1;s++){const a=this.data[s].items.filter(e);a&&(n=n.concat(a))}else n=this.data.filter(e);return n}indexOf(e,n=0){let s=a=>a===e;return this.grouped&&(s=a=>a.value===e),this.findIndex(s,n)}findIndex(e,n=0){let s=-1;if(this.grouped){const a=this._flatData.filter(d=>!d.header&&d.offsetIndex>=n);s=a.findIndex(e),s=a[s]?a[s].offsetIndex:-1}else{const d=this.data.slice(n).findIndex(e);s=-1!==d?d+n:-1}return s}closestGroup(e){for(let n=e;n>=0;n--)if(this._flatData[n].header)return this._flatData[n]}find(e){const n=this.findIndex(e);return this.itemAt(n)}flatIndex(e){if(0===this.itemsCount)return-1;if(!this.grouped)return e;{const n=this._flatData.find(s=>!s.header&&s.offsetIndex===e);if(n)return n.index}return-1}itemAt(e){let n;if(0===this.itemsCount)return n;if(this.grouped){const s=this._flatData.find(a=>!a.header&&a.offsetIndex===e);s&&(n=s.value)}else n=this.data[e];return n}groupAt(e){if(0!==this.itemsCount&&this.isGrouped)return this._flatData.find(n=>n.header&&n.index===e)}groupItemsIndices(){return this.isGrouped?((i,r,e)=>this.data.reduce((n,s)=>(e=>e.header)(s)?[...n,e(s)]:n,[]))(0,0,e=>e.index):[]}groupField(){return 0!==this.itemsCount&&this.isGrouped?this._data[0].field:null}itemGroup(e){if(!e||0===this.itemsCount||!this.isGrouped)return;const n=this.groupField();return n?at(e,n):void 0}flatten(e,n,s=0,a=0){let d=[];de(n)&&d.push({header:!0,index:a+s,offsetIndex:a,value:n});for(let f=0;f<e.length;f++){let p=[];e[f].items?(p=this.flatten(e[f].items,e[f].value,s,f),s+=e[f].items.length):p.push({header:!1,index:a+s+f+1,offsetIndex:s+f,value:e[f]}),d=d.concat(p)}return d}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Vr=(()=>{class i{constructor(e){this.dataService=e,this.itemDisabled=null}isIndexDisabled(e){if(this.itemDisabled){const n=this.dataService.itemAt(e);if(de(n))return this.itemDisabled({dataItem:n,index:e});if(de(this.defaultItem))return this.itemDisabled({dataItem:this.defaultItem,index:-1})}}isItemDisabled(e){if(this.itemDisabled){const n=this.dataService.indexOf(e);if(-1!==n)return this.itemDisabled({dataItem:e,index:n});if(de(this.defaultItem))return this.itemDisabled({dataItem:this.defaultItem,index:-1})}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(is))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),Jr=(()=>{class i{constructor(e){this.disabledItemsService=e,this.onSelect=new t.vpe,this.onChange=new t.vpe,this.onFocus=new t.vpe,this.total=0,this.selectedIndices=[],this.indicesToBeRemoved=[],this.indicesToBeAdded=[]}getTotal(){return this.total}isSelected(e){return de(this.selectedIndices.find(n=>n===e))}isFocused(e){return e===this.focused}focus(e){this.isFocused(e)||(this.focused=e,this.onFocus.emit(e))}select(e){this.isSelected(e)||(this.selectedIndices=[e],this.focused=e,this.onSelect.emit({indices:[e],newSelection:de(e)}))}add(e,n){this.isSelected(e)||(this.selectedIndices.push(e),this.focused=e,this.onChange.emit({added:e,indices:this.selectedIndices.slice(),preventClosingPopup:n}))}emitMultipleAddedRemoved(){this.onChange.emit({added:this.indicesToBeAdded,removed:this.indicesToBeRemoved,indices:this.selectedIndices.slice(),preventClosingPopup:!0,isMultipleSelection:!0}),this.indicesToBeAdded=[],this.indicesToBeRemoved=[]}addMultiple(e){this.indicesToBeAdded=e.slice(),this.selectedIndices.push(...e)}deselect(e,n){if(!this.isSelected(e))return;const s=this.selectedIndices.indexOf(e);this.selectedIndices.splice(s,1),this.focused=e,0===this.selected.length&&(this.lastClickedIndex=null),this.onChange.emit({indices:this.selectedIndices.slice(),removed:e,preventClosingPopup:n})}unselectMultiple(e){e.forEach(n=>{const s=this.selectedIndices.indexOf(n);this.selectedIndices.splice(s,1)}),this.indicesToBeRemoved=e.slice()}change(e){const n=de(e)&&!this.isSelected(e);this.selectedIndices=[e],this.focused=e,this.onChange.emit({indices:[e],newSelection:n})}resetSelection(e){this.selectedIndices=e instanceof Array?e:[e],this.focused=this.selectedIndices[this.selectedIndices.length-1]}get selected(){return this.selectedIndices.slice()}get focused(){return this.focusedIndex}set focused(e){this.focusedIndex!==e&&(this.focusedIndex=e,this.onFocus.emit(e))}selectFromTo(e,n){let s=[];for(let a=e;a<=n;a++)!this.isSelected(a)&&!this.disabledItemsService.isIndexDisabled(a)&&s.push(a);this.addMultiple(s)}unselectFromTo(e,n){let s=[];for(let a=e;a>=n;a--)this.isSelected(a)&&!this.disabledItemsService.isIndexDisabled(a)&&s.push(a);this.unselectMultiple(s)}unselectNotNeededIndices(e,n,s){let a=[];for(let d=0;d<e;d++)this.isSelected(d)&&a.push(d);for(let d=n+1;d<s;d++)this.isSelected(d)&&a.push(d);this.unselectMultiple(a)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Vr))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();var pt=(()=>(function(i){i[i.Undefined=0]="Undefined",i[i.Open=1]="Open",i[i.Close=2]="Close",i[i.Enter=3]="Enter",i[i.Tab=4]="Tab",i[i.Esc=5]="Esc",i[i.Delete=6]="Delete",i[i.Backspace=7]="Backspace",i[i.Home=8]="Home",i[i.End=9]="End",i[i.Up=10]="Up",i[i.Down=11]="Down",i[i.Left=12]="Left",i[i.Right=13]="Right",i[i.PageDown=14]="PageDown",i[i.PageUp=15]="PageUp",i[i.SelectPrevious=16]="SelectPrevious",i[i.SelectNext=17]="SelectNext",i[i.SelectAll=18]="SelectAll",i[i.SelectAllToBeginning=19]="SelectAllToBeginning",i[i.SelectAllToEnd=20]="SelectAllToEnd"}(pt||(pt={})),pt))();class WO{constructor(r,e){this.index=r,this.originalEvent=e}}let rs=(()=>{class i{constructor(e,n){this.disabledItemsService=e,this.selectionService=n,this.open=new t.vpe,this.close=new t.vpe,this.enter=new t.vpe,this.tab=new t.vpe,this.esc=new t.vpe,this.up=new t.vpe,this.right=new t.vpe,this.down=new t.vpe,this.left=new t.vpe,this.delete=new t.vpe,this.backspace=new t.vpe,this.home=new t.vpe,this.end=new t.vpe,this.pagedown=new t.vpe,this.pageup=new t.vpe,this.selectnext=new t.vpe,this.selectprevious=new t.vpe,this.selectall=new t.vpe,this.selectalltobeginning=new t.vpe,this.selectalltoend=new t.vpe}process(e){const n=e.originalEvent.keyCode,s=e.originalEvent.altKey,a=e.originalEvent.shiftKey,d=e.originalEvent.ctrlKey||e.originalEvent.metaKey;let f,p=pt.Undefined;s&&n===ke.ArrowDown?p=pt.Open:s&&n===ke.ArrowUp?p=pt.Close:a&&n===ke.ArrowUp?p=pt.SelectPrevious:a&&n===ke.ArrowDown?p=pt.SelectNext:d&&n===ke.KeyA?p=pt.SelectAll:d&&a&&n===ke.Home?p=pt.SelectAllToBeginning:d&&a&&n===ke.End?p=pt.SelectAllToEnd:n===ke.Enter?p=pt.Enter:n===ke.Escape?p=pt.Esc:n===ke.Tab?p=pt.Tab:n===ke.ArrowUp?(f=this.next({current:e.current,start:e.min,end:e.max,step:-1}),p=pt.Up):n===ke.ArrowLeft?(f=this.next({current:e.current,start:e.min,end:e.max,step:-1}),p=pt.Left):n===ke.ArrowDown?(f=this.next({current:e.current,start:e.min,end:e.max,step:1}),p=pt.Down):n===ke.ArrowRight?(f=this.next({current:e.current,start:e.min,end:e.max,step:1}),p=pt.Right):n===ke.Home?(f=this.isDisabled(0)?e.current:0,p=pt.Home):n===ke.End?(f=this.isDisabled(e.max)?e.current:e.max,p=pt.End):n===ke.Delete?p=pt.Delete:n===ke.Backspace?p=pt.Backspace:n===ke.PageDown?p=pt.PageDown:n===ke.PageUp&&(p=pt.PageUp);const g=new WO(f,e.originalEvent);return p!==pt.Undefined&&this[pt[p].toLowerCase()].emit(g),p}next(e){const{current:n,start:s,end:a,step:d}=e,f=de(n)?this.clampIndex(n+d,s,a):s,p=this.firstFocusableIndex(f,s,a,d);return de(p)?p:this.selectionService.isSelected(n)&&n>=s?n:this.firstFocusableIndex(f,s,a,-1*d)}clampIndex(e,n,s){return!de(e)||e<n?n:e>s?s:e}firstFocusableIndex(e,n,s,a){for(;n<=e&&e<=s;){if(!this.isDisabled(e))return e;e+=a}}isDisabled(e){if(this.disabledItemsService)return this.disabledItemsService.isIndexDisabled(e)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Vr),t.LFG(Jr))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),zd=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDropDownListNoDataTemplate",""],["","kendoDropDownTreeNoDataTemplate",""],["","kendoComboBoxNoDataTemplate",""],["","kendoMultiColumnComboBoxNoDataTemplate",""],["","kendoAutoCompleteNoDataTemplate",""],["","kendoMultiSelectNoDataTemplate",""],["","kendoMultiSelectTreeNoDataTemplate",""]]}),i})();class Zd{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}class Jh{}const jO={pageSize:50,itemHeight:28},_b=(i,r)=>{const e=Object.assign({},jO,r);return!0===i?e:i?Object.assign({pageSize:jO.pageSize},i):null},nl=new t.OlP("dropdowns-touch-enabled");let ST=(()=>{class i{constructor(e){this.element=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq))},i.\u0275dir=t.lG2({type:i,selectors:[["li","role","option"],["li","role","group"]]}),i})(),oa=(()=>{class i{constructor(e){this.viewContainerRef=e}set templateContext(e){this.insertedViewRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.insertedViewRef)),this.insertedViewRef=void 0),e.templateRef&&(this.insertedViewRef=this.viewContainerRef.createEmbeddedView(e.templateRef,e))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.s_b))},i.\u0275dir=t.lG2({type:i,selectors:[["","templateContext",""]],inputs:{templateContext:"templateContext"}}),i})(),vb=(()=>{class i{constructor(e){this.checkboxes={enabled:!1},this.multipleSelection=!1,this.selectionService=e}get focusedClassName(){return this.selectionService.isFocused(this.index)}get selectedClassName(){return!this.checkboxes.enabled&&this.selectionService.isSelected(this.index)}onClick(e){e.stopPropagation(),this.selectionService.lastClickedIndex=this.index,(!this.checkboxes.enabled||this.checkboxes.checkOnClick)&&(this.multipleSelection?this.selectionService.isSelected(this.index)?this.selectionService.deselect(this.index):this.selectionService.add(this.index):this.selectionService.change(this.index))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Jr))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDropDownsSelectable",""]],hostVars:9,hostBindings:function(e,n){1&e&&t.NdJ("click",function(a){return n.onClick(a)}),2&e&&(t.uIk("index",n.index),t.Udp("height",n.height,"px")("min-height",n.height,"px"),t.ekj("k-focus",n.focusedClassName)("k-selected",n.selectedClassName))},inputs:{index:"index",checkboxes:"checkboxes",height:"height",multipleSelection:"multipleSelection"}}),i})(),qh=(()=>{class i{constructor(e,n,s,a,d,f,p){this.dataService=e,this.wrapper=n,this.selectionService=s,this.disabledItemsService=a,this.cdr=d,this.zone=f,this.renderer=p,this.selected=[],this.focused=-1,this.show=!0,this.multipleSelection=!1,this.type="list",this.checkboxes={enabled:!1},this.rounded="medium",this.onClick=new t.vpe,this.pageChange=new t.vpe,this.listResize=new t.vpe,this.startFrom=0,this.lastLoaded=0,this.lastScrollTop=0,this.scrollToFocused=!1,this._size="medium",this.selectSubscription=(0,En.T)(this.selectionService.onSelect.pipe((0,Kn.U)(g=>g.indices[0])),this.selectionService.onFocus).pipe((0,ym.w)(g=>this.zone.onStable.pipe((0,gn.q)(1),(0,Kn.U)(()=>g)))).subscribe(this.scrollToItem.bind(this)),this.prepareClasses()}set data(e){this._data=e[0]&&e[0].header?e.slice(0):e}get data(){return this._data}set size(e){"list"===this.type&&(this.renderer.removeClass(this.wrapper.nativeElement,vn("list",this.size)),e&&this.renderer.addClass(this.wrapper.nativeElement,vn("list",e)),this._size=e)}get size(){return this._size}get pageSize(){return this.virtual.pageSize?this.virtual.pageSize:Math.round(this.height/this.virtual.itemHeight)}get scrollHeight(){return(this.dataService.grouped?this.virtual.total-1:this.virtual.total)*this.virtual.itemHeight}get overflowY(){if(de(this.virtual))return this.hasVirtualScrollbar()?"scroll":"hidden"}get checkboxClasses(){return`${this.size?vn("checkbox",this.size):""} ${this.rounded?gi(this.rounded):""}`}ngOnChanges(e){fn("data",e,!1)&&(this.lastLoaded<=0&&(this.lastLoaded=this.data.length-1,this.scrollToFocused=!e.data.isFirstChange()),this.setOverflow()),fn("virtual",e,!1)&&this.setOverflow(),fn("type",e,!1)&&this.prepareClasses()}ngAfterViewInit(){this.setComponentClasses(),this.zone.runOutsideAngular(()=>{this.scrollSubscription=(0,vi.R)(this.content.nativeElement,"scroll").pipe((0,ko.e)(100),(0,Yt.b)(this.prefetchData.bind(this)),(0,Yt.b)(this.findCurrentGroup.bind(this))).subscribe(()=>{this.lastScrollTop=this.content.nativeElement.scrollTop})}),this.setOverflow()}ngAfterViewChecked(){this.virtual&&this.positionItems(),this.items&&this.scrollToFocused&&(this.scrollToFocused=!1,this.scrollToItem(this.items.length&&-1===this.selectionService.focused?0:this.selectionService.focused)),this.dataService.grouped&&this.findCurrentGroup()}ngOnDestroy(){this.selectSubscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe()}onCheckedChange(e,n){const s=e.target.checked;s&&!this.selectionService.isSelected(n)&&this.selectionService.add(n),!s&&this.selectionService.isSelected(n)&&this.selectionService.deselect(n)}prepareClasses(){"list"===this.type?(this.listContentClass="k-list-content",this.listClass="k-list-ul",this.listItemClass="k-list-item",this.listVirtualClass="k-virtual-list",this.listGroupStickyHeaderClass="k-list-group-sticky-header",this.listGroupStickyHeaderTextClass="k-list-header-text",this.listGroupItemClass="k-list-group-item",this.listGroupItemTextClass="k-list-item-text"):(this.listContentClass="k-table-body k-table-scroller",this.listClass="k-table k-table-list",this.listItemClass="k-table-row",this.listVirtualClass="k-virtual-table",this.listGroupStickyHeaderClass="k-table-group-sticky-header",this.listGroupStickyHeaderTextClass="k-table-th",this.listGroupItemClass="k-table-group-row",this.listGroupItemTextClass="k-table-th")}isChecked(e){return this.selectionService.isSelected(this.virtual?e+this.virtual.skip:e)}firstVisibleItem(){const e=this.content.nativeElement,n=e.getBoundingClientRect(),s=Array.prototype.slice.call(e.querySelectorAll(".k-disabled"));s.forEach(d=>this.renderer.setStyle(d,"pointer-events","auto"));const a=document.elementFromPoint(n.left+1,n.top+1);return s.forEach(d=>this.renderer.setStyle(d,"pointer-events","none")),((i,r)=>{let e=i;for(;null!==e&&1===e.nodeType;){if(kG(e,"li"))return e;e=e.parentElement||e.parentNode}return null})(a)}findCurrentGroup(){if(!this.dataService.grouped)return void(this.currentGroup=void 0);const e=this.firstVisibleItem();if(e){let n;"group"===e.getAttribute("role")?(n=parseInt(e.getAttribute("group-index"),10),this.currentGroup=this.dataService.groupAt(n).value):(n=parseInt(e.getAttribute("index"),10),this.currentGroup=this.dataService.itemGroup(this.dataService.itemAt(n)))}else this.currentGroup=void 0;this.cdr.detectChanges()}prefetchData(){if(!this.virtual)return;const e=Math.trunc(this.content.nativeElement.clientHeight/this.virtual.itemHeight),n=this.content.nativeElement.scrollTop,s=Math.trunc(n/this.virtual.itemHeight),a=n>this.lastScrollTop,p=this.lastLoaded-this.pageSize+e>=s-(this.pageSize-(this.lastLoaded-this.startFrom));a&&s+e>=this.lastLoaded&&this.lastLoaded<this.virtual.total-1&&this.changePage(s),!a&&p&&this.changePage(s-this.pageSize+e+1)}changePage(e){this.zone.run(()=>{let n=this.pageSize+e;n>this.virtual.total&&(e--,n=this.virtual.total),e<0&&(e=0),this.startFrom=e,this.lastLoaded=n,this.pageChange.emit({skip:e,take:this.pageSize})})}index(e,n){return e>0?this.dataService.groupIndices[e-1]+n:n}getText(e){return at(e,this.textField)}getValue(e){return at(e,this.valueField)}isDisabled(e){return de(this.virtual)&&(e+=this.virtual.skip),this.disabledItemsService.isIndexDisabled(e)}isAltRow(e){return"dropdowngrid"===this.type&&e%2!=0}scrollToItem(e){let n=e;if(this.dataService.grouped&&(n=this.dataService.flatIndex(e),n+=this.firstGroupHeaderInTargetedPage(n)?-1:0),this.virtual&&n>-1)return void this.scrollToIndex(n);const s=this.items.toArray();de(s[n])&&-1!==n&&this.scroll(s[n].element)}scrollWithOnePage(e){let n=this.content.nativeElement;const s=n.clientHeight;e===pt.PageDown?n.scrollTop+=s:e===pt.PageUp&&(n.scrollTop-=s)}scrollToIndex(e){let n=this.content.nativeElement,s=n.scrollTop;const a=e*this.virtual.itemHeight,f=n.clientHeight,p=a+this.virtual.itemHeight;s>a?s=a:p>s+f&&(s=p-f),n.scrollTop=s}scroll(e){if(!e)return;const n=e.nativeElement;let s=this.content.nativeElement,a=n.offsetTop,f=s.scrollTop,p=s.clientHeight,g=a+n.offsetHeight;f>a?f=a:g>f+p&&(f=g-p),s.scrollTop=f}hasScrollbar(){return!!(de(this.items)&&this.items.length&&de(this.list)&&de(this.content))&&(de(this.virtual)&&this.hasVirtualScrollbar()||this.list.nativeElement.scrollHeight>this.content.nativeElement.offsetHeight)}isItemSelected(e){return this.selectionService.isSelected(e)||null}setOverflow(){if(this.virtual){const e=this.hasVirtualScrollbar()?"scroll":"hidden";this.renderer.setStyle(this.content.nativeElement,"overflow-y",e)}}hasVirtualScrollbar(){return this.virtualContainer&&(this.virtualContainer&&this.virtualContainer.nativeElement.offsetHeight)>this.content.nativeElement.offsetHeight}positionItems(){this.items.forEach((e,n)=>{this.renderer.setStyle(e.element.nativeElement,"transform",`translateY(${(n+this.startFrom)*this.virtual.itemHeight}px`)})}firstGroupHeaderInTargetedPage(e){return!de(this.virtual)||0===this.virtual.skip&&this.virtual.pageSize>e}setComponentClasses(){"list"===this.type&&(this.renderer.addClass(this.wrapper.nativeElement,"k-list"),this.size&&this.renderer.addClass(this.wrapper.nativeElement,vn("list",this.size))),de(this.virtual)&&this.renderer.addClass(this.wrapper.nativeElement,this.listVirtualClass)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(is),t.Y36(t.SBq),t.Y36(Jr),t.Y36(Vr),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(t.Qsj))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(RU,7),t.Gf(NU,7),t.Gf(FU,5),t.Gf(ST,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.content=s.first),t.iGM(s=t.CRH())&&(n.list=s.first),t.iGM(s=t.CRH())&&(n.virtualContainer=s.first),t.iGM(s=t.CRH())&&(n.items=s)}},inputs:{selected:"selected",focused:"focused",textField:"textField",valueField:"valueField",height:"height",template:"template",groupTemplate:"groupTemplate",fixedGroupTemplate:"fixedGroupTemplate",show:"show",id:"id",optionPrefix:"optionPrefix",multipleSelection:"multipleSelection",virtual:"virtual",type:"type",checkboxes:"checkboxes",ariaLive:"ariaLive",isMultiselect:"isMultiselect",data:"data",size:"size",rounded:"rounded"},outputs:{onClick:"onClick",pageChange:"pageChange",listResize:"listResize"},features:[t.TTD],decls:9,vars:17,consts:[[3,"class","ngStyle",4,"ngIf"],["unselectable","on"],["content",""],["role","listbox"],["list",""],[4,"ngIf"],[3,"resize",4,"ngIf"],["class","k-height-container","role","presentation",4,"ngIf"],[3,"ngStyle"],[3,"ngIf"],[3,"templateContext"],["ngFor","",3,"ngForOf"],["role","option","kendoDropDownsSelectable","",3,"checkboxes","height","index","multipleSelection","ngClass"],["type","checkbox","class","k-checkbox",3,"ngClass","checked","change",4,"ngIf"],["type","checkbox",1,"k-checkbox",3,"ngClass","checked","change"],[1,"k-list-item-text"],["role","group",3,"class","k-table-alt-row","ngStyle",4,"ngIf"],["role","option","kendoDropDownsSelectable","",3,"height","index","multipleSelection","class","ngClass",4,"ngIf"],["role","group",3,"ngStyle"],["role","option","kendoDropDownsSelectable","",3,"height","index","multipleSelection","ngClass"],[3,"resize"],["role","presentation",1,"k-height-container"],["virtualContainer",""]],template:function(e,n){1&e&&(t.YNc(0,BU,3,9,"div",0),t.TgZ(1,"div",1,2)(3,"ul",3,4),t.YNc(5,JU,1,1,null,5),t.YNc(6,tB,1,1,null,5),t.YNc(7,nB,1,0,"kendo-resize-sensor",6),t.qZA(),t.YNc(8,iB,4,2,"div",7),t.qZA()),2&e&&(t.Q6J("ngIf",n.dataService.grouped),t.xp6(1),t.Tol(n.listContentClass),t.Udp("overscroll-behavior","none")("max-height",n.height,"px"),t.xp6(2),t.Tol(n.listClass),t.uIk("id",n.id)("aria-live",n.ariaLive)("aria-multiselectable",n.isMultiselect)("aria-hidden",!n.show),t.xp6(2),t.Q6J("ngIf",!n.dataService.grouped&&n.show),t.xp6(1),t.Q6J("ngIf",n.dataService.grouped),t.xp6(1),t.Q6J("ngIf",!n.virtual),t.xp6(1),t.Q6J("ngIf",n.virtual))},dependencies:[Fr,X.O5,X.PC,oa,X.sg,ST,vb,X.mk],encapsulation:2}),i})(),bb=(()=>{class i extends ws{}return i.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(i)))(n||i)}}(),i.\u0275dir=t.lG2({type:i,inputs:{noDataText:"noDataText",clearTitle:"clearTitle",checkAllText:"checkAllText",selectButtonText:"selectButtonText"},features:[t.qOj]}),i})(),lc=(()=>{class i extends bb{constructor(e){super(),this.service=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDropDownListLocalizedMessages",""],["","kendoDropDownTreeLocalizedMessages",""],["","kendoComboBoxLocalizedMessages",""],["","kendoMultiColumnComboBoxLocalizedMessages",""],["","kendoAutoCompleteLocalizedMessages",""],["","kendoMultiSelectLocalizedMessages",""],["","kendoMultiSelectTreeLocalizedMessages",""]],features:[t._Bn([{provide:bb,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj]}),i})();const MG={multi:!0,provide:H.JU,useExisting:(0,t.Gpc)(()=>QO)};let QO=(()=>{class i{constructor(e,n,s,a,d,f,p,g,b,S,k){this.localization=e,this.dataService=n,this.popupService=s,this.selectionService=a,this.navigationService=d,this.disabledItemsService=f,this._zone=p,this.cdr=g,this.renderer=b,this.hostElement=S,this.touchEnabled=k,this.highlightFirst=!0,this.focusableId=`k-${Hr()}`,this.placeholder="",this.listHeight=200,this.clearButton=!0,this.disabled=!1,this.readonly=!1,this.tabindex=0,this.filterable=!1,this.valueChange=new t.vpe,this.filterChange=new t.vpe,this.open=new t.vpe,this.opened=new t.vpe,this.close=new t.vpe,this.closed=new t.vpe,this.onFocus=new t.vpe,this.onBlur=new t.vpe,this.widgetClasses=!0,this.listBoxId=Hr(),this.optionPrefix=Hr(),this.onChangeCallback=Pd,this.onTouchedCallback=Pd,this.popupMouseDownHandler=T=>T.preventDefault(),this._popupSettings={animate:!0},this._open=!1,this._value="",this.valueChangeSubject=new Un.x,this._isFocused=!1,this._size="medium",this._rounded="medium",this._fillMode="solid",wt(fb),this.direction=e.rtl?"rtl":"ltr",this.wrapper=this.hostElement.nativeElement,this.data=[],this.subscribeEvents(),this.subscribeTouchEvents(),this.selectionService.resetSelection([-1])}get width(){let e=0;nt()&&(e=this.wrapper.offsetWidth);const n=this.popupSettings.width||e;return{min:isNaN(e)?e:`${e}px`,max:isNaN(n)?n:`${n}px`}}get height(){const e=this.popupSettings.height;return de(e)?`${e}px`:"auto"}get listContainerClasses(){const e=["k-list-container","k-reset"];return this.popupSettings.popupClass&&e.push(this.popupSettings.popupClass),e}get suggestion(){if(!this.text||!this.suggestedText)return void(this.suggestedText=void 0);const e=this.suggestedText.toLowerCase().startsWith(this.text.toLowerCase());return this.suggest&&!this.backspacePressed&&e?this.suggestedText:void 0}get appendTo(){const{appendTo:e}=this.popupSettings;if(e&&"root"!==e)return"component"===e?this.container:e}get clearButtonVisiblity(){if(this.touchEnabled)return"visible"}toggle(e){Promise.resolve(null).then(()=>{const n=de(e)?e:!this._open;this._toggle(n)})}get isOpen(){return this._open}togglePopup(e){this.disabled||this.readonly||this.isOpen===e||this.triggerPopupEvents(e)||this._toggle(e)}get activeDescendant(){if(!this.isOpen||!de(this.selectionService.focused)||-1===this.selectionService.focused)return null;const e=this.dataService.itemAt(this.selectionService.focused);return this.optionPrefix+"-"+at(e,this.valueField)}set data(e){this.dataService.data=e||[],this.virtual&&(this.virtual.skip=0),this.filterable&&(this.selectionService.focused=this.isOpen&&this.data.length&&this.highlightFirst?this.firstFocusableIndex(0):-1),this.suggest&&this.dataService.itemsCount>0&&(this.suggestedText=at(this.dataService.itemAt(0),this.valueField))}get data(){const e=this.virtual;if(e){const n=e.skip||0,s=n+e.pageSize;return e.total=this.dataService.data.length,this.dataService.data.slice(n,s)}return this.dataService.data}set value(e){this.verifySettings(e),this._value=e||"",this.text=this.value,this.cdr.markForCheck()}get value(){return this._value||""}set popupSettings(e){this._popupSettings=Object.assign({animate:!0},e)}get popupSettings(){return this._popupSettings}set itemDisabled(e){if("function"!=typeof e)throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(e)}.`);this.disabledItemsService.itemDisabled=e}set tabIndex(e){this.tabindex=e}get tabIndex(){return this.tabindex}set virtual(e){this._virtualSettings=_b(e)}get virtual(){return this._virtualSettings}set size(e){const n=e||"medium";this.renderer.removeClass(this.wrapper,vn("input",this.size)),"none"!==e&&this.renderer.addClass(this.wrapper,vn("input",n)),this._size=n}get size(){return this._size}set rounded(e){const n=e||"medium";this.renderer.removeClass(this.wrapper,gi(this.rounded)),"none"!==e&&this.renderer.addClass(this.wrapper,gi(n)),this._rounded=n}get rounded(){return this._rounded}set fillMode(e){const n=e||"solid";this.renderer.removeClass(this.wrapper,dr("input",this.fillMode)),"none"!==e&&this.renderer.addClass(this.wrapper,dr("input",n)),this._fillMode=n}get fillMode(){return this._fillMode}get isFocused(){return this._isFocused}set isFocused(e){this.renderer[e?"addClass":"removeClass"](this.wrapper,"k-focus"),this._isFocused=e}get isDisabled(){return this.disabled}get isLoading(){return this.loading}get dir(){return this.direction}ngOnInit(){this.renderer.removeAttribute(this.wrapper,"tabindex"),this.localizationChangeSubscription=this.localization.changes.subscribe(({rtl:e})=>{this.direction=e?"rtl":"ltr",this.cdr.detectChanges()}),this.setComponentClasses()}ngOnDestroy(){this.destroyPopup(),this.unsubscribeEvents(),this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe()}ngOnChanges(e){const n=this.virtual;n&&e.data&&e.data.isFirstChange()&&this.pageChange({skip:0,take:n.pageSize})}reset(){this.value=""}messageFor(e){return this.localization.get(e)}clearValue(e){e.stopImmediatePropagation(),this.focus(),this.change(""),this.filterable&&this.filterChange.emit(""),this.selectionService.resetSelection([])}writeValue(e){this.value=e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}focusItemAt(e){const n=e>=0&&e<this.data.length;de(e)&&n&&!this.disabledItemsService.isIndexDisabled(e)?this.selectionService.focus(e):this.selectionService.focus(-1)}focus(){this.disabled||this.searchbar.focus()}blur(){this.disabled||this.searchbar.blur()}onResize(){if(this._open){const e=this.popupRef.popupElement,{min:n,max:s}=this.width;e.style.minWidth=n,e.style.width=s}}emitChange(e){this.onChangeCallback(e),this.valueChange.emit(e)}verifySettings(e){if((0,t.X6Q)()&&de(e)&&"string"!=typeof e)throw new Error("Expected value of type string. See https://www.telerik.com/kendo-angular-ui/components/dropdowns/autocomplete/value-binding/")}search(e,n=0){let s;s=e.length&&this.dataService.itemsCount?this.dataService.findIndex(this.findIndexPredicate(e),n):-1,this.disabledItemsService.isIndexDisabled(s)?s+1<this.dataService.itemsCount?this.search(e,s+1):this.selectionService.focus(-1):(this.selectionService.focus(s),this.suggest&&(this.suggestedText=at(this.dataService.itemAt(s),this.valueField)))}navigate(e){!this.isOpen||this.selectionService.focus(e)}handleNavigate(e){const n=isNaN(this.selectionService.focused)?this.firstFocusableIndex(0):this.selectionService.focused;if(this.disabled||this.readonly||isNaN(n))return;const s=this.navigationService.process({current:n,max:this.dataService.itemsCount-1,min:0,originalEvent:e});s!==pt.Undefined&&s!==pt.Backspace&&s!==pt.Delete&&s!==pt.Home&&s!==pt.End&&s!==pt.Left&&s!==pt.Right&&s!==pt.PageDown&&s!==pt.PageUp&&(s===pt.Enter&&this.isOpen||s!==pt.Enter)&&e.preventDefault()}handleEnter(e){const n=this.selectionService.focused;let s;if(this.isOpen&&e.originalEvent.preventDefault(),n>=0)s=at(this.dataService.itemAt(n),this.valueField);else{const a=this.suggest&&this.suggestedText&&this.data.length&&at(this.dataService.itemAt(0),this.valueField).toLowerCase()===this.searchbar.value.toLowerCase();s=this.isOpen&&a?this.suggestedText:this.searchbar.value}this.change(s)}handleEscape(){this.isOpen?this.togglePopup(!1):this.value="",this.selectionService.focused=-1,this.suggestedText=null}searchBarChange(e){const n=de(this.text)?this.text.length:0;this.backspacePressed=e.length<n,this.text=e,this.togglePopup(e.length>0),this.highlightFirst||(this.selectionService.focused=-1),this.filterable?this.filterChange.emit(e):this.highlightFirst&&this.search(e)}handleFocus(){this.isFocused=!0,zt(this.onFocus)&&this._zone.run(()=>{this.onFocus.emit()})}handleBlur(){const e=this.filterable?this.selectionService.focused:-1;let n,s;this.searchbar.input.nativeElement.scrollLeft=0,-1!==e?(n=this.dataService.itemAt(e),s=at(n,this.valueField)||""):s=this.searchbar.value;const a=s===this.searchbar.value,d=s.toLowerCase()===this.searchbar.value.toLowerCase();!a&&d&&this.selectionService.resetSelection([]),this.isFocused=!1;const f=this.value!==this.text;zt(this.onBlur)||zt(this.close)||Vh(this.wrapper)||f?this._zone.run(()=>{f&&this.change(this.searchbar.value),this.onBlur.emit(),this.onTouchedCallback(),this.togglePopup(!1)}):this.togglePopup(!1)}pageChange(e){this.virtual.skip=e.skip}change(e){this.togglePopup(!1),this.valueChangeSubject.next(e)}subscribeEvents(){!nt()||(this.valueChangeSubscription=this.valueChangeSubject.subscribe(e=>{const n=this.value!==e;this.value=e,this.text=e,n&&this.emitChange(e)}),this.changeSubscription=this.selectionService.onChange.subscribe(this.handleItemChange.bind(this)),this.focusSubscription=this.selectionService.onFocus.subscribe(this.handleItemFocus.bind(this)),this.navigationSubscription=(0,En.T)(this.navigationService.up,this.navigationService.down).subscribe(e=>this.navigate(e.index)),this.closeSubscription=this.navigationService.close.subscribe(()=>this.togglePopup(!1)),this.openSubscription=this.navigationService.open.subscribe(()=>this.togglePopup(!0)),this.enterSubscription=this.navigationService.enter.subscribe(this.handleEnter.bind(this)),this.escSubscription=this.navigationService.esc.subscribe(this.handleEscape.bind(this)),this.scrollSubscription=(0,En.T)(this.navigationService.pagedown,this.navigationService.pageup).subscribe(e=>{this.isOpen&&(e.originalEvent.preventDefault(),this.optionsList.scrollWithOnePage(pt[e.originalEvent.code]))}))}subscribeTouchEvents(){!nt()||!this.touchEnabled||this._zone.runOutsideAngular(()=>this.touchstartDisposeHandler=this.renderer.listen(document,"touchstart",e=>{this.isFocused&&!Ym(this.hostElement,e.target,this.popupRef)&&this._zone.run(()=>this.blur())}))}unsubscribeEvents(){!nt()||(this.changeSubscription.unsubscribe(),this.navigationSubscription.unsubscribe(),this.closeSubscription.unsubscribe(),this.openSubscription.unsubscribe(),this.enterSubscription.unsubscribe(),this.escSubscription.unsubscribe(),this.scrollSubscription.unsubscribe(),this.valueChangeSubscription.unsubscribe(),this.focusSubscription.unsubscribe(),this.touchstartDisposeHandler&&this.touchstartDisposeHandler())}handleItemChange(e){const n=e.indices.length?e.indices[0]:void 0;if(this.selectionService.resetSelection([-1]),!de(n))return;let s=at(this.dataService.itemAt(n),this.valueField);this.change(s)}handleItemFocus(e){const n=this.selectionService.focused;Boolean(this.suggest&&this.data&&this.data.length&&n>=0)&&(this.suggestedText=at(this.dataService.itemAt(n),this.valueField))}createPopup(){this.virtual&&(this.virtual.skip=0);const e="rtl"===this.direction?"right":"left";this.popupRef=this.popupService.open({anchor:this.wrapper,animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupClass:this.listContainerClasses,positionMode:"absolute",popupAlign:{horizontal:e,vertical:"top"},anchorAlign:{horizontal:e,vertical:"bottom"}});const a=this.popupRef.popupElement,{min:d,max:f}=this.width;a.addEventListener("mousedown",this.popupMouseDownHandler),a.style.minWidth=d,a.style.width=f,a.style.height=this.height,a.setAttribute("dir",this.direction);const p=a.querySelector("ul.k-list-ul"),g=this.searchbar.input.nativeElement.getAttribute("aria-labelledby");g&&p.setAttribute("aria-labelledby",g),this.popupRef.popupOpen.subscribe(()=>{this.cdr.detectChanges(),this.optionsList.scrollToItem(this.selectionService.focused),this.opened.emit()}),this.popupRef.popupClose.subscribe(()=>{this.closed.emit()}),this.popupRef.popupAnchorViewportLeave.subscribe(()=>this.togglePopup(!1))}destroyPopup(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)}_toggle(e){this._open=e,this.destroyPopup(),this._open&&this.createPopup()}triggerPopupEvents(e){const n=new Zd;return e?this.open.emit(n):this.close.emit(n),n.isDefaultPrevented()}firstFocusableIndex(e){const n=this.data.length-1;return this.disabledItemsService.isIndexDisabled(e)?e<n?this.firstFocusableIndex(e+1):void 0:e}findIndexPredicate(e){return this.dataService.grouped?n=>{let s=at(n.value,this.valueField);return s=de(s)?s.toString().toLowerCase():"",s.startsWith(e.toLowerCase())}:n=>{let s=at(n,this.valueField);return s=de(s)?s.toString().toLowerCase():"",s.startsWith(e.toLowerCase())}}setComponentClasses(){"none"!==this.size&&this.renderer.addClass(this.wrapper,vn("input",this.size)),"none"!==this.rounded&&this.renderer.addClass(this.wrapper,gi(this.rounded)),"none"!==this.fillMode&&this.renderer.addClass(this.wrapper,dr("input",this.fillMode))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge),t.Y36(is),t.Y36(tr),t.Y36(Jr),t.Y36(rs),t.Y36(Vr),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(nl,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-autocomplete"]],contentQueries:function(e,n,s){if(1&e&&(t.Suo(s,Ud,5),t.Suo(s,Bd,5),t.Suo(s,Gd,5),t.Suo(s,zd,5),t.Suo(s,Km,5),t.Suo(s,$m,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.template=a.first),t.iGM(a=t.CRH())&&(n.headerTemplate=a.first),t.iGM(a=t.CRH())&&(n.footerTemplate=a.first),t.iGM(a=t.CRH())&&(n.noDataTemplate=a.first),t.iGM(a=t.CRH())&&(n.groupTemplate=a.first),t.iGM(a=t.CRH())&&(n.fixedGroupTemplate=a.first)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Zh,7,t.s_b),t.Gf(Hh,7),t.Gf(ac,7),t.Gf(hb,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first),t.iGM(s=t.CRH())&&(n.popupTemplate=s.first),t.iGM(s=t.CRH())&&(n.searchbar=s.first),t.iGM(s=t.CRH())&&(n.optionsList=s.first)}},hostVars:9,hostBindings:function(e,n){2&e&&(t.uIk("dir",n.dir),t.ekj("k-autocomplete",n.widgetClasses)("k-input",n.widgetClasses)("k-disabled",n.isDisabled)("k-loading",n.isLoading))},inputs:{highlightFirst:"highlightFirst",focusableId:"focusableId",data:"data",value:"value",valueField:"valueField",placeholder:"placeholder",popupSettings:"popupSettings",listHeight:"listHeight",loading:"loading",clearButton:"clearButton",suggest:"suggest",disabled:"disabled",itemDisabled:"itemDisabled",readonly:"readonly",tabindex:"tabindex",tabIndex:"tabIndex",filterable:"filterable",virtual:"virtual",size:"size",rounded:"rounded",fillMode:"fillMode"},outputs:{valueChange:"valueChange",filterChange:"filterChange",open:"open",opened:"opened",close:"close",closed:"closed",onFocus:"focus",onBlur:"blur"},exportAs:["kendoAutoComplete"],features:[t._Bn([MG,is,Jr,rs,Vr,Ge,{provide:Et,useValue:"kendo.autocomplete"},{provide:Jh,useExisting:(0,t.Gpc)(()=>i)},{provide:zi,useExisting:(0,t.Gpc)(()=>i)}]),t.TTD],decls:10,vars:17,consts:function(){let r,e;return r=$localize`:kendo.autocomplete.noDataText|The text displayed in the popup when there are no items:NO DATA FOUND`,e=$localize`:kendo.autocomplete.clearTitle|The title of the clear button:clear`,[["kendoAutoCompleteLocalizedMessages","","noDataText",r,"clearTitle",e],[3,"role","isSuggestable","isFilterable","isLoading","id","listId","activeDescendant","userInput","suggestedText","disabled","readonly","tabIndex","popupOpen","placeholder","onNavigate","valueChange","onBlur","onFocus"],["searchbar",""],["class","k-clear-value","role","button","tabindex","-1",3,"visibility","click","mousedown",4,"ngIf"],["class","k-icon k-i-loading k-input-loading-icon",4,"ngIf"],["popupTemplate",""],[3,"ngIf"],["container",""],["role","button","tabindex","-1",1,"k-clear-value",3,"click","mousedown"],[1,"k-icon","k-i-x"],[1,"k-icon","k-i-loading","k-input-loading-icon"],[4,"ngIf"],[3,"size","rounded","id","optionPrefix","data","textField","valueField","template","groupTemplate","fixedGroupTemplate","height","show","virtual","pageChange"],["optionsList",""],["class","k-no-data",4,"ngIf"],[3,"templateContext"],[1,"k-no-data"],[3,"ngIf","templateContext"],[3,"resize"]]},template:function(e,n){1&e&&(t.GkF(0,0),t.TgZ(1,"kendo-searchbar",1,2),t.NdJ("onNavigate",function(a){return n.handleNavigate(a)})("valueChange",function(a){return n.searchBarChange(a)})("onBlur",function(){return n.handleBlur()})("onFocus",function(){return n.handleFocus()}),t.qZA(),t.YNc(3,rB,2,3,"span",3),t.YNc(4,sB,1,0,"span",4),t.YNc(5,fB,5,16,"ng-template",null,5,t.W1O),t.YNc(7,pB,1,0,"ng-template",6),t.GkF(8,null,7)),2&e&&(t.xp6(1),t.Q6J("role","combobox")("isSuggestable",n.suggest)("isFilterable",n.filterable)("isLoading",n.isLoading)("id",n.focusableId)("listId",n.listBoxId)("activeDescendant",n.activeDescendant)("userInput",n.text)("suggestedText",n.suggestion)("disabled",n.disabled)("readonly",n.readonly)("tabIndex",n.tabIndex)("popupOpen",n.isOpen)("placeholder",n.placeholder),t.xp6(2),t.Q6J("ngIf",!n.loading&&!n.readonly&&n.clearButton&&(null==n.text?null:n.text.length)),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(3),t.Q6J("ngIf",n.isOpen))},dependencies:[ac,qh,Fr,lc,X.O5,oa],encapsulation:2}),i})();const RG={multi:!0,provide:H.JU,useExisting:(0,t.Gpc)(()=>ET)};let ET=(()=>{class i{constructor(e,n,s,a,d,f,p,g,b,S,k){this.wrapper=e,this.localization=n,this.popupService=s,this.selectionService=a,this.navigationService=d,this.disabledItemsService=f,this.dataService=p,this.zone=g,this.cdr=b,this.renderer=S,this.touchEnabled=k,this.selected=[],this.focusableId=`k-${Hr()}`,this.allowCustom=!1,this.valueNormalizer=T=>T.pipe((0,Kn.U)(F=>F)),this.placeholder="",this.listHeight=200,this.suggest=!1,this.clearButton=!0,this.disabled=!1,this.readonly=!1,this.tabindex=0,this.filterable=!1,this.valueChange=new t.vpe,this.selectionChange=new t.vpe,this.filterChange=new t.vpe,this.open=new t.vpe,this.opened=new t.vpe,this.close=new t.vpe,this.closed=new t.vpe,this.onFocus=new t.vpe,this.onBlur=new t.vpe,this.widgetClasses=!0,this._isFocused=!1,this.listBoxId=Hr(),this.optionPrefix=Hr(),this.onChangeCallback=T=>{},this.onTouchedCallback=T=>{},this.defaultVirtualItemHeight=28,this.defaultVirtualPageSize=50,this._filtering=!1,this._text="",this.filterText="",this._open=!1,this._popupSettings={animate:!0},this.popupMouseDownHandler=T=>T.preventDefault(),this.customValueSubject=new Un.x,this.valueSubject=new Un.x,this.clearValueSubject=new Un.x,this.subs=new cn.w0,this._size="medium",this._rounded="medium",this._fillMode="solid",wt(fb),this.direction=n.rtl?"rtl":"ltr",this.data=[]}set text(e){this._text=de(e)?e.toString():""}get text(){return this._text}togglePopup(e){this.disabled||this.readonly||this.isOpen===e||this.triggerPopupEvents(e)||this._toggle(e)}get activeDescendant(){if(!this.isOpen||!de(this.selectionService.focused)||-1===this.selectionService.focused)return null;const e=this.dataService.itemAt(this.selectionService.focused);return this.optionPrefix+"-"+(e?at(e,this.valueField):"")}get appendTo(){const{appendTo:e}=this.popupSettings;if(e&&"root"!==e)return"component"===e?this.container:e}set data(e){if(this.dataService.data=e||[],this.virtual&&(this.virtual.skip=0),this.setState(),this._filtering){const s=this.text.length>0&&this.dataService.itemsCount>0?this.firstFocusableIndex(0):-1;this.selectionService.focused=s}this.suggest&&this.dataService.itemsCount&&this.text&&(this.suggestedText=at(this.dataService.itemAt(0),this.textField))}get data(){const e=this.virtual;if(e){const n=e.skip||0,s=n+e.pageSize;return e.total=this.dataService.data.length,this.dataService.data.slice(n,s)}return this.dataService.data}set value(e){this._value=e,this.setState(),this.cdr.markForCheck()}get value(){return this._value}set valuePrimitive(e){this._valuePrimitive=e}get valuePrimitive(){return de(this._valuePrimitive)?this._valuePrimitive:!de(this.valueField)}set popupSettings(e){this._popupSettings=Object.assign({animate:!0},e)}get popupSettings(){return this._popupSettings}set itemDisabled(e){if("function"!=typeof e)throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(e)}.`);this.disabledItemsService.itemDisabled=e}set tabIndex(e){this.tabindex=e}get tabIndex(){return this.tabindex}set virtual(e){this._virtualSettings=_b(e,{itemHeight:this.defaultVirtualItemHeight,pageSize:this.defaultVirtualPageSize})}get virtual(){return this._virtualSettings}set size(e){const n=e||"medium";this.renderer.removeClass(this.wrapper.nativeElement,vn("input",this.size)),"none"!==e&&this.renderer.addClass(this.wrapper.nativeElement,vn("input",n)),this._size=n}get size(){return this._size}set rounded(e){const n=e||"medium";this.renderer.removeClass(this.wrapper.nativeElement,gi(this.rounded)),"none"!==e&&this.renderer.addClass(this.wrapper.nativeElement,gi(n)),this._rounded=n}get rounded(){return this._rounded}set fillMode(e){const n=e||"solid";this.renderer.removeClass(this.wrapper.nativeElement,dr("input",this.fillMode)),"none"!==e&&this.renderer.addClass(this.wrapper.nativeElement,dr("input",n)),this._fillMode=n}get fillMode(){return this._fillMode}get isDisabled(){return this.disabled}get isLoading(){return this.loading}get dir(){return this.direction}get isFocused(){return this._isFocused}set isFocused(e){this.renderer[e?"addClass":"removeClass"](this.wrapper.nativeElement,"k-focus"),this._isFocused=e}get clearButtonVisiblity(){if(this.touchEnabled)return"visible"}get popupWidth(){let e=0;nt()&&(e=this.wrapper.nativeElement.offsetWidth);const n=this.popupSettings.width||e;return{min:isNaN(e)?e:`${e}px`,max:isNaN(n)?n:`${n}px`}}get popupHeight(){const e=this.popupSettings.height;return de(e)?`${e}px`:"auto"}ngOnInit(){this.renderer.removeAttribute(this.wrapper.nativeElement,"tabindex"),this.attachStreams(),this.createValueStream(),this.subscribeTouchEvents(),this.attachSelectClickHandler(),this.setComponentClasses()}createValueStream(){const e=this.valueSubject.pipe((0,Ot.h)(p=>{const g=at(this.value,this.valueField),b=at(p,this.valueField);let S=at(p,this.textField);return!(!de(this.value)&&!de(b)||(de(S)&&(S=S.toString()),g===b&&this.text===S&&(this.clearFilter(),1)))}),(0,Kn.U)(p=>{const g=at(p,this.valueField);return{dataItem:p,text:at(p,this.textField),value:this.valuePrimitive?g:p}})),n=function cP(i,r){return e=>[(0,Ot.h)(i,r)(e),(0,Ot.h)(lP(i,r))(e)]}(()=>this.allowCustom)(this.customValueSubject.pipe(function T2(i,r=Wd.z,e=k2){const n=(0,ag.H)(i,r);return function kR(i,r=k2){return(0,ak.e)((e,n)=>{const{leading:s,trailing:a}=r;let d=!1,f=null,p=null,g=!1;const b=()=>{p?.unsubscribe(),p=null,a&&(T(),g&&n.complete())},S=()=>{p=null,g&&n.complete()},k=F=>p=(0,wR.Xf)(i(F)).subscribe((0,Sv.x)(n,b,S)),T=()=>{if(d){d=!1;const F=f;f=null,n.next(F),!g&&k(F)}};e.subscribe((0,Sv.x)(n,F=>{d=!0,f=F,(!p||p.closed)&&(s?T():k(F))},()=>{g=!0,(!(a&&d&&p)||p.closed)&&n.complete()}))})}(()=>n,e)}(300))),s=n[0].pipe((0,Yt.b)(()=>{this.loading=!0,this.disabled=!0,this.cdr.detectChanges()}),(0,Ot.h)(()=>{const p=this.text!==at(this.value,this.valueField);return this.loading=p,this.disabled=p,p||this.clearFilter(),p}),this.valueNormalizer,(0,Kn.U)(p=>({custom:!0,dataItem:p,text:this.text,value:p}))),a=n[1].pipe((0,Kn.U)(()=>({custom:!0,dataItem:void 0,text:void 0,value:void 0}))),d=this.clearValueSubject.pipe((0,Kn.U)(()=>({dataItem:void 0,text:void 0,value:void 0})));this.valueSubscription&&this.valueSubscription.unsubscribe();const f=(0,En.T)(e,s,a,d);this.valueSubscription=f.pipe((0,Qk.K)(()=>{const p=void 0!==at(this.dataItem,this.valueField);return this.dataItem=void 0,this.value=void 0,this.text=void 0,this.loading=!1,this.disabled=!1,p&&this.selectionChange.emit(void 0),this.emitValueChange(),this.createValueStream(),(0,go.of)(null)})).subscribe(p=>{const g=at(this.dataItem,this.valueField)!==at(p.dataItem,this.valueField);this.dataItem=p.dataItem,this.value=p.value,this.text=p.text,this.loading=!1,this.disabled=!1,this.clearFilter(),p.custom&&(this.selectionService.focused=-1),g&&this.selectionChange.emit(p.custom?void 0:this.dataItem),this.emitValueChange()})}attachStreams(){!nt()||(this.subs.add(this.localization.changes.subscribe(({rtl:e})=>{this.direction=e?"rtl":"ltr",this.cdr.detectChanges()})),this.subs.add((0,En.T)(this.navigationService.up,this.navigationService.down,this.navigationService.home,this.navigationService.end).pipe((0,Ot.h)(e=>de(e.index))).subscribe(e=>this.navigate(e.index))),this.subs.add(this.navigationService.open.subscribe(this.handleNavigationOpen.bind(this))),this.subs.add(this.navigationService.close.subscribe(()=>this.togglePopup(!1))),this.subs.add((0,En.T)(this.navigationService.pagedown,this.navigationService.pageup).subscribe(e=>{this.isOpen&&(e.originalEvent.preventDefault(),this.optionsList.scrollWithOnePage(pt[e.originalEvent.code]))})),this.subs.add(this.navigationService.esc.subscribe(this.handleEscape.bind(this))),this.subs.add(this.navigationService.enter.pipe((0,Yt.b)(e=>{this.isOpen&&e.originalEvent.preventDefault()})).subscribe(this.handleEnter.bind(this))),this.subs.add((0,En.T)(this.selectionService.onChange,this.selectionService.onSelect.pipe((0,Ot.h)(e=>!this.isOpen))).pipe((0,Yt.b)(e=>{this._filtering=!1,this.togglePopup(!1)}),(0,Kn.U)(e=>this.dataService.itemAt(e.indices[0]))).subscribe(e=>{this.change(e)})),this.subs.add(this.selectionService.onSelect.pipe((0,Ot.h)(e=>this.isOpen),(0,Yt.b)(e=>this._filtering=!1),(0,Kn.U)(e=>this.dataService.itemAt(e.indices[0]))).subscribe(e=>{const n=at(e,this.valueField)!==at(this.dataItem,this.valueField);this.updateState({dataItem:e}),n&&this.selectionChange.emit(e)})))}ngOnDestroy(){this.destroyPopup(),this.subs.unsubscribe(),de(this.valueSubscription)&&this.valueSubscription.unsubscribe(),this.touchstartDisposeHandler&&this.touchstartDisposeHandler(),this.selectClickDisposeHandler&&this.selectClickDisposeHandler()}ngOnChanges(e){const n=this.virtual;n&&e.data&&e.data.isFirstChange()&&this.pageChange({skip:0,take:n.pageSize}),fn("valueNormalizer",e)&&this.createValueStream(),Gi(["textField","valueField","valuePrimitive"],e,!1)&&this.setState()}ngAfterContentChecked(){this.verifySettings()}focusItemAt(e){const n=e>=0&&e<this.data.length;de(e)&&n&&!this.disabledItemsService.isIndexDisabled(e)?this.selectionService.focus(e):this.selectionService.focus(-1)}focus(){this.disabled||this.searchbar.focus()}blur(){this.disabled||this.searchbar.blur()}toggle(e){Promise.resolve(null).then(()=>{const n=de(e)?e:!this._open;this._toggle(n),this.cdr.markForCheck()})}get isOpen(){return this._open}reset(){this.value=void 0,this.clearState(),this.resetSelection()}isEmpty(){const e=!de(this.text)||JO(this.text),n=!de(this.value)||JO(this.value);return e&&n}messageFor(e){return this.localization.get(e)}clearValue(e){e?.stopImmediatePropagation(),e&&this.focus(),this._previousDataItem=void 0,this.selectionService.resetSelection([]),this.clearValueSubject.next(),this._filtering=!1}writeValue(e){this.value=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}get buttonClasses(){return this.loading?"k-i-loading k-input-loading-icon":this.iconClass||"k-i-caret-alt-down"}get selectButtonClasses(){return`${this.size?vn("button",this.size):""} ${this.fillMode?"k-button-"+this.fillMode:""} ${this.fillMode?"k-button-"+this.fillMode+"-base":""}\n        `}onResize(){if(this.isOpen){const e=this.popupRef.popupElement,{min:n,max:s}=this.popupWidth;e.style.minWidth=n,e.style.width=s}}verifySettings(){if((0,t.X6Q)()){if(!0===this.valuePrimitive&&de(this.value)&&"object"==typeof this.value)throw new Error("Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-value-selection");if(!1===this.valuePrimitive&&de(this.value)&&"object"!=typeof this.value)throw new Error("Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-value-selection");if(!de(this.valueField)!=!de(this.textField))throw new Error("Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-bind-to-arrays-of-complex-data");if(this.virtual&&isNaN(this.virtual.itemHeight))throw new Error("Expected virtual.itemHeight of type number.")}}setState(){if(this._filtering)return;const e=this.value,s=this.findDataItem({valueField:this.valueField,value:e});de(s.index)&&-1!==s.index?(this.updateState({dataItem:s.dataItem,confirm:!0}),this.resetSelection(s.index)):de(e)&&this.allowCustom?(this.updateState({dataItem:e}),this.resetSelection(-1)):this._previousDataItem&&this.value?(this.updateState({dataItem:this._previousDataItem}),this.resetSelection()):(this.clearState(),this.resetSelection(-1))}updateState({dataItem:e,confirm:n=!1}){this.dataItem=e,this.text=at(e,this.textField),n&&(this._previousDataItem=e)}clearState(){this.text=void 0,this.dataItem=void 0}resetSelection(e){const n=!de(e)||e<0;this.selectionService.resetSelection(n?[]:[e]),this.selectionService.focused=e}firstFocusableIndex(e){const n=this.data.length-1;return this.disabledItemsService.isIndexDisabled(e)?e<n?this.firstFocusableIndex(e+1):void 0:e}findIndexPredicate(e){return this.dataService.grouped?n=>{let s=at(n.value,this.textField);return s=de(s)?s.toString().toLowerCase():"",s.startsWith(e.toLowerCase())}:n=>{let s=at(n,this.textField);return s=de(s)?s.toString().toLowerCase():"",s.startsWith(e.toLowerCase())}}findDataItem({valueField:e,value:n}){const s={dataItem:null,index:-1},d=this.dataService.findIndex(f=>at(this.dataService.grouped?f.value:f,e)===at(n,e));return s.dataItem=this.dataService.itemAt(d),s.index=d,s}search(e,n=0){let s;s=e.length&&this.dataService.itemsCount?this.dataService.findIndex(this.findIndexPredicate(e),n):-1,this.disabledItemsService.isIndexDisabled(s)?s+1<this.dataService.itemsCount?this.search(e,s+1):this.selectionService.focus(-1):(this.selectionService.focus(s),this.suggest&&(this.suggestedText=at(this.dataService.itemAt(s),this.textField)))}getSuggestion(){if(!this.selectionService.selected.length&&this.suggest&&!this.backspacePressed&&this.suggestedText&&this.text&&this.suggestedText.toLowerCase().startsWith(this.text.toLowerCase()))return this.suggestedText;this.suggestedText=void 0}navigate(e){0!==this.dataService.itemsCount&&(this.text=at(this.dataService.itemAt(e),this.textField),this.selectionService.select(e))}handleNavigate(e){const n=de(this.selectionService.selected[0]),s=isNaN(this.selectionService.focused)?this.firstFocusableIndex(0):this.selectionService.focused;let a=0;if(this.disabled||this.readonly||e.keyCode===ke.Home||e.keyCode===ke.End)return;n||(e.keyCode===ke.ArrowDown?a=-1:e.keyCode===ke.ArrowUp&&(a=1));const d=this.navigationService.process({current:a+s,max:this.dataService.itemsCount-1,min:0,originalEvent:e});d!==pt.Undefined&&d!==pt.Left&&d!==pt.Right&&d!==pt.Backspace&&d!==pt.Delete&&d!==pt.PageDown&&d!==pt.PageUp&&(d===pt.Enter&&this.isOpen||d!==pt.Enter)&&e.preventDefault()}handleEnter(){const e=this.text,n=this.selectionService.focused,s=de(n)&&-1!==n,a=at(this._previousDataItem,this.textField)||"",d=at(this.dataService.itemAt(n),this.textField),f=e!==a;this.togglePopup(!1),this._filtering=!1,this.allowCustom&&f&&(e===d||this.useSuggestion()?this.selectionService.change(n):this.change(e,!0)),this.allowCustom||(s?this.selectionService.change(n):f&&this.change(e,!0))}handleBlur(){this._filtering=!1,this.searchbar.input.nativeElement.scrollLeft=0,this.isFocused=!1;const e=at(this.dataItem,this.valueField)!==at(this.value,this.valueField),n=this.searchbar.value,s=n!==(at(this.dataItem,this.textField)||""),a=e||s;a||zt(this.onBlur)||zt(this.close)||Vh(this.wrapper.nativeElement)?this.zone.run(()=>{a&&(de(this.focusedItemText)&&this.focusedItemText.toLowerCase()===n.toLowerCase()||e?this.selectionService.change(this.selectionService.focused):this.change(n,!0)),this.onBlur.emit(),this.onTouchedCallback(),this.togglePopup(!1)}):this.togglePopup(!1)}handleEscape(){this.isOpen?this.togglePopup(!1):this.clearValue(),this.selectionService.selected.length>0||(this.suggestedText=null,this.selectionService.focused=-1)}handleNavigationOpen(){this.restoreItemFocus(),this.togglePopup(!0)}searchBarChange(e){this.backspacePressed=e.length<(this.text?this.text.length:0),this.text=e,this.selectionService.resetSelection([]),this.togglePopup(!0),this._filtering=!0,this.filterable&&this.filterText!==e?(this.filterText=e,this.filterChange.emit(e)):this.search(e)}handleFocus(){this.isFocused=!0,zt(this.onFocus)&&this.zone.run(()=>this.onFocus.emit())}pageChange(e){this.virtual.skip=e.skip}change(e,n=!1){n?this.customValueSubject.next(e):this.valueSubject.next(e)}emitValueChange(){this.onChangeCallback(this.value),this.valueChange.emit(this.value),this._previousDataItem=this.dataItem}selectClick(){this.touchEnabled||this.searchbar.focus(),this.isOpen||this.restoreItemFocus(),this.togglePopup(!this.isOpen)}get listContainerClasses(){return["k-list-container","k-reset"].concat(this.popupSettings.popupClass||[])}preventEventDefault(e){e.preventDefault()}get focusedItemText(){const e=this.selectionService.focused;if(!de(e)||-1===e)return null;const n=at(this.dataService.itemAt(e),this.textField);return de(n)?n.toString():""}restoreItemFocus(){!(de(this.selectionService.focused)&&this.selectionService.focused>-1)&&this.text&&this.dataService.itemsCount&&(this.filterable?this.selectionService.focused=this.firstFocusableIndex(0):this.search(this.text))}useSuggestion(){if(!this.suggest||!de(this.searchbar.value))return!1;const e=this.dataService.itemAt(this.selectionService.focused),n=at(e,this.textField);return!!de(n)&&this.searchbar.value.toLowerCase()===n.toLowerCase()}destroyPopup(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)}createPopup(){this.virtual&&(this.virtual.skip=0);const e="rtl"===this.direction?"right":"left";this.popupRef=this.popupService.open({anchor:this.wrapper,animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupClass:this.listContainerClasses,positionMode:"absolute",anchorAlign:{horizontal:e,vertical:"bottom"},popupAlign:{horizontal:e,vertical:"top"}});const a=this.popupRef.popupElement,{min:d,max:f}=this.popupWidth;a.addEventListener("mousedown",this.popupMouseDownHandler),a.style.minWidth=d,a.style.width=f,a.style.height=this.popupHeight,a.setAttribute("dir",this.direction);const p=this.popupRef.popupElement.querySelector("ul"),g=this.searchbar.input.nativeElement.getAttribute("aria-labelledby");g&&p.setAttribute("aria-labelledby",g),this.popupRef.popupOpen.subscribe(()=>{this.cdr.detectChanges(),this.optionsList.scrollToItem(this.selectionService.focused),this.opened.emit()}),this.popupRef.popupClose.subscribe(()=>{this.closed.emit()}),this.popupRef.popupAnchorViewportLeave.subscribe(()=>this.togglePopup(!1))}_toggle(e){this._open=e,this.destroyPopup(),this._open&&this.createPopup()}triggerPopupEvents(e){const n=new Zd;return e?this.open.emit(n):this.close.emit(n),n.isDefaultPrevented()}clearFilter(){!this.filterable||!this.filterText||(this.filterText="",this.filterChange.emit(this.filterText))}subscribeTouchEvents(){!nt()||!this.touchEnabled||this.zone.runOutsideAngular(()=>this.touchstartDisposeHandler=this.renderer.listen(document,"touchstart",e=>{const s=Ym(this.wrapper,e.target,this.popupRef);this.isFocused&&!s?this.zone.run(()=>this.blur()):this.isOpen&&!s&&this.zone.run(()=>this.togglePopup(!1))}))}attachSelectClickHandler(){this.selectClickDisposeHandler=this.renderer.listen(this.select.nativeElement,Tc?"pointerdown":"click",this.selectClick.bind(this))}setComponentClasses(){"none"!==this.size&&this.renderer.addClass(this.wrapper.nativeElement,vn("input",this.size)),"none"!==this.rounded&&this.renderer.addClass(this.wrapper.nativeElement,gi(this.rounded)),"none"!==this.fillMode&&this.renderer.addClass(this.wrapper.nativeElement,dr("input",this.fillMode))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(Ge),t.Y36(tr),t.Y36(Jr),t.Y36(rs),t.Y36(Vr),t.Y36(is),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(t.Qsj),t.Y36(nl,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-combobox"]],contentQueries:function(e,n,s){if(1&e&&(t.Suo(s,Ud,5),t.Suo(s,Bd,5),t.Suo(s,Gd,5),t.Suo(s,zd,5),t.Suo(s,Km,5),t.Suo(s,$m,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.template=a.first),t.iGM(a=t.CRH())&&(n.headerTemplate=a.first),t.iGM(a=t.CRH())&&(n.footerTemplate=a.first),t.iGM(a=t.CRH())&&(n.noDataTemplate=a.first),t.iGM(a=t.CRH())&&(n.groupTemplate=a.first),t.iGM(a=t.CRH())&&(n.fixedGroupTemplate=a.first)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Zh,7,t.s_b),t.Gf(Hh,7),t.Gf(ac,7),t.Gf(hb,5),t.Gf(mB,7)),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first),t.iGM(s=t.CRH())&&(n.popupTemplate=s.first),t.iGM(s=t.CRH())&&(n.searchbar=s.first),t.iGM(s=t.CRH())&&(n.optionsList=s.first),t.iGM(s=t.CRH())&&(n.select=s.first)}},hostVars:9,hostBindings:function(e,n){2&e&&(t.uIk("dir",n.dir),t.ekj("k-combobox",n.widgetClasses)("k-input",n.widgetClasses)("k-disabled",n.isDisabled)("k-loading",n.isLoading))},inputs:{focusableId:"focusableId",allowCustom:"allowCustom",data:"data",value:"value",textField:"textField",valueField:"valueField",valuePrimitive:"valuePrimitive",valueNormalizer:"valueNormalizer",placeholder:"placeholder",popupSettings:"popupSettings",listHeight:"listHeight",iconClass:"iconClass",loading:"loading",suggest:"suggest",clearButton:"clearButton",disabled:"disabled",itemDisabled:"itemDisabled",readonly:"readonly",tabindex:"tabindex",tabIndex:"tabIndex",filterable:"filterable",virtual:"virtual",size:"size",rounded:"rounded",fillMode:"fillMode"},outputs:{valueChange:"valueChange",selectionChange:"selectionChange",filterChange:"filterChange",open:"open",opened:"opened",close:"close",closed:"closed",onFocus:"focus",onBlur:"blur"},exportAs:["kendoComboBox"],features:[t._Bn([RG,is,Jr,rs,Vr,Ge,{provide:Et,useValue:"kendo.combobox"},{provide:Jh,useExisting:(0,t.Gpc)(()=>i)},{provide:zi,useExisting:(0,t.Gpc)(()=>i)}]),t.TTD],decls:12,vars:22,consts:function(){let r,e,n;return r=$localize`:kendo.combobox.noDataText|The text displayed in the popup when there are no items:NO DATA FOUND`,e=$localize`:kendo.combobox.clearTitle|The title of the clear button:clear`,n=$localize`:kendo.combobox.selectButtonText|The text set as aria-label on the select button:Select`,[["kendoComboBoxLocalizedMessages","","noDataText",r,"clearTitle",e,"selectButtonText",n],[3,"role","id","listId","isLoading","isSuggestable","isFilterable","activeDescendant","userInput","suggestedText","disabled","readonly","tabIndex","popupOpen","placeholder","onNavigate","valueChange","onBlur","onFocus"],["searchbar",""],["class","k-clear-value","aria-hidden","true",3,"visibility","kendoEventsOutsideAngular","click",4,"ngIf"],["tabindex","-1","unselectable","on","type","button",1,"k-input-button","k-button","k-icon-button",3,"ngClass","kendoEventsOutsideAngular"],["select",""],[1,"k-button-icon","k-icon",3,"ngClass"],["popupTemplate",""],[3,"ngIf"],["container",""],["aria-hidden","true",1,"k-clear-value",3,"kendoEventsOutsideAngular","click"],[1,"k-icon","k-i-x"],[4,"ngIf"],[3,"size","rounded","id","optionPrefix","data","textField","valueField","template","groupTemplate","fixedGroupTemplate","height","show","virtual","pageChange"],["optionsList",""],["class","k-no-data",4,"ngIf"],[3,"templateContext"],[1,"k-no-data"],[3,"ngIf","templateContext"],[3,"resize"]]},template:function(e,n){1&e&&(t.GkF(0,0),t.TgZ(1,"kendo-searchbar",1,2),t.NdJ("onNavigate",function(a){return n.handleNavigate(a)})("valueChange",function(a){return n.searchBarChange(a)})("onBlur",function(){return n.handleBlur()})("onFocus",function(){return n.handleFocus()}),t.qZA(),t.YNc(3,gB,2,6,"span",3),t.TgZ(4,"button",4,5),t._UZ(6,"span",6),t.qZA(),t.YNc(7,wB,5,16,"ng-template",null,7,t.W1O),t.YNc(9,kB,1,0,"ng-template",8),t.GkF(10,null,9)),2&e&&(t.xp6(1),t.Q6J("role","combobox")("id",n.focusableId)("listId",n.listBoxId)("isLoading",n.loading)("isSuggestable",n.suggest)("isFilterable",n.filterable)("activeDescendant",n.activeDescendant)("userInput",n.text)("suggestedText",n.getSuggestion())("disabled",n.disabled)("readonly",n.readonly)("tabIndex",n.tabIndex)("popupOpen",n.isOpen)("placeholder",n.placeholder),t.xp6(2),t.Q6J("ngIf",n.clearButton&&!n.loading&&!n.disabled&&!n.readonly&&(null==n.text?null:n.text.length)),t.xp6(1),t.Q6J("ngClass",n.selectButtonClasses)("kendoEventsOutsideAngular",t.VKq(20,qm,n.preventEventDefault)),t.uIk("aria-label",n.messageFor("selectButtonText")),t.xp6(2),t.Q6J("ngClass",n.buttonClasses),t.xp6(3),t.Q6J("ngIf",n.isOpen))},dependencies:[ac,qh,Fr,lc,X.O5,Es,X.mk,oa],encapsulation:2}),i})(),wT=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoDropDownListValueTemplate",""],["","kendoDropDownTreeValueTemplate",""]]}),i})(),wb=(()=>{class i{constructor(e,n){this.element=e,this.zone=n}ngOnChanges(){this.focused&&this.nextTick(()=>this.element.nativeElement.focus())}nextTick(e){this.zone.runOutsideAngular(()=>setTimeout(e))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["","filterInput",""]],inputs:{focused:["filterInput","focused"]},features:[t.TTD]}),i})();const PG={multi:!0,provide:H.JU,useExisting:(0,t.Gpc)(()=>cc)};let cc=(()=>{class i{constructor(e,n,s,a,d,f,p,g,b,S,k,T){this.wrapper=e,this.localization=n,this.popupService=s,this.selectionService=a,this.navigationService=d,this.disabledItemsService=f,this.dataService=p,this._zone=g,this.renderer=b,this.cdr=S,this.touchEnabled=k,this.injector=T,this.listHeight=200,this.readonly=!1,this.filterable=!1,this.ignoreCase=!0,this.delay=500,this.tabindex=0,this.valueChange=new t.vpe,this.filterChange=new t.vpe,this.selectionChange=new t.vpe,this.open=new t.vpe,this.opened=new t.vpe,this.close=new t.vpe,this.closed=new t.vpe,this.onFocus=new t.vpe,this.onBlur=new t.vpe,this.hostClasses=!0,this.focusableId=`k-${Hr()}`,this.role="combobox",this.haspopup="listbox",this.groupIndices=[],this.listBoxId=Hr(),this.optionPrefix=Hr(),this.filterText="",this.subs=new cn.w0,this._isFocused=!1,this.onTouchedCallback=F=>{},this.onChangeCallback=F=>{},this.word="",this.last="",this.filterFocused=new t.vpe,this.filterBlurred=new t.vpe,this.hostElementFocused=new t.vpe,this.hostElementBlurred=new t.vpe,this._open=!1,this._popupSettings={animate:!0},this._size="medium",this._rounded="medium",this._fillMode="solid",wt(fb),this.direction=n.rtl?"rtl":"ltr",this.data=[],this.subscribeEvents(),this.subscribeTouchEvents(),this.subscribeFocusEvents(),this.popupMouseDownHandler=this.onMouseDown.bind(this)}get width(){const e=nt()?this.wrapper.nativeElement.offsetWidth:0,n=this.popupSettings.width||e;return{min:isNaN(e)?e:`${e}px`,max:isNaN(n)?n:`${n}px`}}get height(){const e=this.popupSettings.height;return de(e)?`${e}px`:"auto"}get widgetTabIndex(){if(this.disabled)return;const e=Number(this.tabIndex);return isNaN(e)?0:e}get ariaExpanded(){return this.isOpen}get ariaControls(){if(this.isOpen)return this.listBoxId}get ariaActivedescendant(){if(de(this.dataItem)&&this.isOpen)return this.optionPrefix+"-"+at(this.dataItem,this.valueField)}get appendTo(){const{appendTo:e}=this.popupSettings;if(e&&"root"!==e)return"component"===e?this.container:e}get ariaLive(){return this.filterable?"polite":"off"}set data(e){this.dataService.data=e||[],this.virtual&&(this.virtual.skip=0),this.setState()}get data(){const e=this.virtual;if(e){const n=e.skip||0,s=n+e.pageSize;return e.total=this.dataService.data.length,this.dataService.data.slice(n,s)}return this.dataService.data}set value(e){de(e)||(this._previousDataItem=void 0),this._value=e,this.setState(),this.cdr.markForCheck()}get value(){return this._value}set popupSettings(e){this._popupSettings=Object.assign({animate:!0},e)}get popupSettings(){return this._popupSettings}set itemDisabled(e){if("function"!=typeof e)throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(e)}.`);this.disabledItemsService.itemDisabled=e}set virtual(e){this._virtualSettings=_b(e)}get virtual(){return this._virtualSettings}set valuePrimitive(e){this._valuePrimitive=e}get valuePrimitive(){return de(this._valuePrimitive)?this._valuePrimitive:!de(this.valueField)}set tabIndex(e){this.tabindex=e}get tabIndex(){return this.tabindex}set size(e){const n=e||"medium";this.renderer.removeClass(this.wrapper.nativeElement,vn("picker",this.size)),"none"!==e&&this.renderer.addClass(this.wrapper.nativeElement,vn("picker",n)),this._size=n}get size(){return this._size}set rounded(e){const n=e||"medium";this.renderer.removeClass(this.wrapper.nativeElement,gi(this.rounded)),"none"!==e&&this.renderer.addClass(this.wrapper.nativeElement,gi(n)),this._rounded=e}get rounded(){return this._rounded}set fillMode(e){const n=e||"solid";this.renderer.removeClass(this.wrapper.nativeElement,dr("picker",this.fillMode)),"none"!==e&&this.renderer.addClass(this.wrapper.nativeElement,dr("picker",n)),this._fillMode=n}get fillMode(){return this._fillMode}blurComponent(e){e.target===this.wrapper.nativeElement&&(e.stopImmediatePropagation(),this.hostElementBlurred.emit())}blurFilterInput(){this.filterBlurred.emit()}focusComponent(e){e.target===this.wrapper.nativeElement&&(e.stopImmediatePropagation(),this.hostElementFocused.emit(),this.isFocused||(this.isFocused=!0,zt(this.onFocus)&&this._zone.run(()=>{this.onFocus.emit()})))}onResize(){if(this._open){const e=this.popupRef.popupElement,{min:n,max:s}=this.width;e.style.minWidth=n,e.style.width=s}}get isDisabledClass(){return this.disabled}get isDisabledAttribute(){return this.disabled?"":null}get isLoading(){return this.loading}get dir(){return this.direction}get hostTabIndex(){return this.widgetTabIndex}get readonlyClass(){return this.readonly}get readonlyAttr(){return this.readonly?"":null}get isBusy(){return this.isLoading}get isAriaExpanded(){return this.ariaExpanded}get hostAriaControls(){return this.ariaControls}get hostAriaInvalid(){var e;return this.formControl?null===(e=this.formControl)||void 0===e?void 0:e.invalid.toString():null}get hostAriaActivedescendant(){return this.ariaActivedescendant}keydown(e){const n=de(this.defaultItem)?-1:0;let s=isNaN(this.selectionService.focused)?this.firstFocusableIndex(n):this.selectionService.focused,a=0;if(this.disabled||this.readonly)return;if(this.filterable&&this.isFocused&&this.isOpen&&(e.keyCode===ke.Home||e.keyCode===ke.End))return;const p=de(this.selectionService.selected[0]),g=de(this.selectionService.focused)&&!this.selectionService.isSelected(this.selectionService.focused);(!p||g)&&(e.keyCode===ke.ArrowDown||e.keyCode===ke.ArrowRight?a=-1:(e.keyCode===ke.ArrowUp||e.keyCode===ke.ArrowLeft)&&(a=1));const b=e,S=this.navigationService.process({current:s+a,max:this.dataService.itemsCount-1,min:this.defaultItem?-1:0,originalEvent:b});S!==pt.Undefined&&S!==pt.Tab&&S!==pt.Backspace&&S!==pt.Delete&&S!==pt.PageDown&&S!==pt.PageUp&&S!==pt.SelectAll&&(S!==pt.Left&&S!==pt.Right||!this.filterable)&&S!==pt.Enter&&b.preventDefault()}keypress(e){this.disabled||this.readonly||this.filterable||this.onKeyPress(e)}click(e){e.preventDefault(),this.focus(),this.togglePopup(!this.isOpen)}set isFocused(e){this.renderer[e?"addClass":"removeClass"](this.wrapper.nativeElement,"k-focus"),this._isFocused=e}get isFocused(){return this._isFocused}ngOnInit(){this.renderer.removeAttribute(this.wrapper.nativeElement,"tabindex"),this.subs.add(this.localization.changes.subscribe(({rtl:e})=>{this.direction=e?"rtl":"ltr",this.cdr.detectChanges()})),this.assignAriaDescribedBy(),this.setComponentClasses()}isEmpty(){const e=this.value;return!(0===e||!1===e||e||this.defaultItem)}onFilterFocus(){this.filterFocused.emit()}ngOnDestroy(){this.destroyPopup(),this.subs.unsubscribe(),this.unSubscribeFocusEvents(),this.touchstartDisposeHandler&&this.touchstartDisposeHandler()}ngOnChanges(e){const n=this.virtual;n&&e.data&&e.data.isFirstChange()&&this.pageChange({skip:0,take:n.pageSize}),fn("defaultItem",e,!1)&&(this.disabledItemsService.defaultItem=this.defaultItem),Gi(["textField","valueField","valuePrimitive","defaultItem","itemDisabled"],e,!1)&&this.setState()}ngAfterContentChecked(){this.verifySettings()}get formControl(){return this.injector.get(H.a5,null)?.control||null}focusItemAt(e){const s=(de(this.defaultItem)?-1:0)<=e&&e<this.data.length;de(e)&&s&&!this.disabledItemsService.isIndexDisabled(e)?this.selectionService.focus(e):this.selectionService.focus(null)}focus(){this.disabled||this.wrapper.nativeElement.focus()}blur(){this.disabled||(this.wrapper.nativeElement.blur(),this.cdr.detectChanges())}toggle(e){Promise.resolve(null).then(()=>{const n=de(e)?e:!this._open;this._toggle(n)})}_toggle(e){this._open=e,this.destroyPopup(),this._open&&this.createPopup()}triggerPopupEvents(e){const n=new Zd;return e?this.open.emit(n):this.close.emit(n),n.isDefaultPrevented()}togglePopup(e){this.disabled||this.readonly||this.isOpen===e||this.triggerPopupEvents(e)||(!e&&this.filterable&&this.isFocused&&this.focus(),this._toggle(e))}get isOpen(){return this._open}reset(){this.value=void 0}messageFor(e){return this.localization.get(e)}writeValue(e){this.value=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}get buttonClasses(){return this.loading?"k-i-loading k-input-loading-icon":this.iconClass||"k-i-caret-alt-down"}get selectButtonClasses(){return`${this.size?vn("button",this.size):""} ${this.fillMode?"k-button-"+this.fillMode:""} ${this.fillMode?"k-button-"+this.fillMode+"-base":""}`}get filterInputClasses(){return`${this.size?vn("input",this.size):""} ${this.fillMode?"k-input-"+this.fillMode:""} ${this.rounded?gi(this.rounded):""}`}get optionLabelSizeClass(){return`${this.size?vn("list",this.size):""}`}get listContainerClasses(){const e=["k-list-container","k-reset"];return this.popupSettings.popupClass&&e.push(this.popupSettings.popupClass),e}get isDisabledDefaultItem(){return this.disabledItemsService.isItemDisabled(this.defaultItem)}getText(){return this.text}getDefaultItemText(){return at(this.defaultItem,this.textField)}createPopup(){this.virtual&&(this.virtual.skip=0);const e="rtl"===this.direction?"right":"left";this.popupRef=this.popupService.open({anchor:this.wrapper,anchorAlign:{horizontal:e,vertical:"bottom"},animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupAlign:{horizontal:e,vertical:"top"},popupClass:this.listContainerClasses,positionMode:"absolute"});const a=this.popupRef.popupElement,{min:d,max:f}=this.width;a.addEventListener("mousedown",this.popupMouseDownHandler),a.style.minWidth=d,a.style.width=f,a.style.height=this.height,a.setAttribute("dir",this.direction);const p=a.querySelector("ul.k-list-ul"),g=this.wrapper.nativeElement.getAttribute("aria-labelledby");g&&p.setAttribute("aria-labelledby",g),this.subs.add(this.popupRef.popupOpen.subscribe(()=>{this.cdr.detectChanges(),this.optionsList.scrollToItem(this.selectionService.focused),this.opened.emit()})),this.subs.add(this.popupRef.popupClose.subscribe(()=>{this.closed.emit()})),this.filterable||this.subs.add(this.popupRef.popupAnchorViewportLeave.subscribe(()=>this.togglePopup(!1)))}destroyPopup(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)}updateState({dataItem:e,confirm:n=!1}){this.dataItem=e,this.text=at(e,this.textField),n&&(this._previousDataItem=e)}clearState(){this.text=void 0,this.dataItem=void 0}resetSelection(e){const n=!de(e);this.selectionService.resetSelection(n?[]:[e]),this.selectionService.focused=n?this.firstFocusableIndex(0):e}onSelectionChange({dataItem:e}){this.updateState({dataItem:e}),this.selectionChange.emit(e),this.assignAriaDescribedBy()}subscribeEvents(){!nt()||(this.subs.add(this.selectionService.onSelect.pipe((0,Ot.h)(e=>this.isOpen),(0,Kn.U)(this.itemFromEvent.bind(this))).subscribe(this.onSelectionChange.bind(this))),this.subs.add((0,En.T)(this.selectionService.onSelect.pipe((0,Ot.h)(e=>!this.isOpen)),this.selectionService.onChange).pipe((0,Kn.U)(this.itemFromEvent.bind(this)),(0,Yt.b)(e=>this.togglePopup(!1))).subscribe(({dataItem:e,value:n,newSelection:s})=>{s&&this.onSelectionChange({dataItem:e});const a=!de(e)&&this._previousDataItem,d=n!==at(this.value,this.valueField);a?(this.updateState({dataItem:this._previousDataItem}),this.resetSelection()):d&&(this.value=this.valuePrimitive?n:e,this._previousDataItem=e,this.emitChange(this.value)),this.clearFilter()})),this.subs.add((0,En.T)(this.navigationService.up,this.navigationService.down,this.navigationService.left.pipe($A(()=>this.filterable)),this.navigationService.right.pipe($A(()=>this.filterable)),this.navigationService.home,this.navigationService.end).pipe((0,Ot.h)(e=>!isNaN(e.index))).subscribe(e=>this.selectionService.select(e.index))),this.subs.add((0,En.T)(this.navigationService.pagedown,this.navigationService.pageup).subscribe(e=>{this.isOpen&&(e.originalEvent.preventDefault(),this.optionsList.scrollWithOnePage(pt[e.originalEvent.code]))})),this.subs.add(this.navigationService.open.subscribe(()=>this.togglePopup(!0))),this.subs.add(this.navigationService.close.subscribe(()=>{this.togglePopup(!1),this.focus()})),this.subs.add(this.navigationService.enter.pipe((0,Yt.b)(e=>e.originalEvent.preventDefault())).subscribe(this.handleEnter.bind(this))),this.subs.add(this.navigationService.esc.subscribe(this.handleEscape.bind(this))),this.subs.add(this.filterBlurred.pipe((0,fc.b)(()=>jd(10).pipe((0,gn.q)(1),(0,Bi.R)(this.hostElementFocused)))).subscribe(()=>{this.hostElementBlurred.emit()})),this._zone.runOutsideAngular(()=>{this.subs.add((0,En.T)(this.hostElementBlurred.pipe((0,fc.b)(()=>jd(10).pipe((0,gn.q)(1),(0,Bi.R)(this.filterFocused)))),this.navigationService.tab).pipe((0,Yt.b)(e=>e instanceof WO&&this.focus()),(0,Ot.h)(()=>this.isFocused)).subscribe(()=>this.componentBlur()))}))}subscribeTouchEvents(){!nt()||!this.touchEnabled||this._zone.runOutsideAngular(()=>this.touchstartDisposeHandler=this.renderer.listen(document,"touchstart",e=>{this.isFocused&&!Ym(this.wrapper,e.target,this.popupRef)&&this._zone.run(()=>{this.filterFocused&&this.togglePopup(!1),this.blur()})}))}subscribeFocusEvents(){nt()&&(this.focusComponent=this.focusComponent.bind(this),this.blurComponent=this.blurComponent.bind(this),this._zone.runOutsideAngular(()=>{document.addEventListener("focus",this.focusComponent,!0),document.addEventListener("blur",this.blurComponent,!0)}))}unSubscribeFocusEvents(){nt()&&(document.removeEventListener("focus",this.focusComponent,!0),document.removeEventListener("blur",this.blurComponent,!0))}itemFromEvent(e){const n=e.indices[0];let s=this.dataService.itemAt(n);s=de(s)?s:this.currentOrDefault(n);const a=at(s,this.valueField);return{dataItem:s,index:n,newSelection:e.newSelection,value:a}}currentOrDefault(e){return de(this.dataItem)&&-1!==e?this.dataItem:this.defaultItem}firstFocusableIndex(e){const n=this.dataService.itemsCount-1;return this.disabledItemsService.isIndexDisabled(e)?e<n?this.firstFocusableIndex(e+1):void 0:e}handleEnter(){this.isOpen?(this.selectionService.change(this.selectionService.focused),this.focus()):this.togglePopup(!0)}handleEscape(){de(this.selectionService.selected[0])?this.selectionService.change(this.selectionService.selected[0]):(this.togglePopup(!1),this.clearFilter()),this.focus()}clearFilter(){!this.filterable||!this.filterText||(this.filterText="",this.cdr.markForCheck(),this.filterChange.emit(this.filterText))}verifySettings(){if((0,t.X6Q)()){if(this.defaultItem&&this.valueField&&"object"!=typeof this.defaultItem)throw new Error("defaultItem and data items must be of same type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/api/DropDownListComponent/#toc-defaultitem");if(!0===this.valuePrimitive&&de(this.value)&&"object"==typeof this.value)throw new Error("Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection");if(!1===this.valuePrimitive&&de(this.value)&&"object"!=typeof this.value)throw new Error("Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection");if(!de(this.valueField)!=!de(this.textField))throw new Error("Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-bind-to-arrays-of-complex-data")}}componentBlur(){this.isFocused=!1;const n=de(this.selectionService.selected[0])&&at(this.value,this.valueField)!==at(this.dataService.itemAt(this.selectionService.selected[0]),this.valueField);n||zt(this.close)||zt(this.onBlur)||zt(this.filterChange)||Vh(this.wrapper.nativeElement)?this._zone.run(()=>{n&&this.selectionService.change(this.selectionService.selected[0]),this.togglePopup(!1),this.clearFilter(),this.onBlur.emit(),this.onTouchedCallback()}):this.togglePopup(!1)}onMouseDown(e){"input"!==e.target.tagName.toLowerCase()&&e.preventDefault()}onKeyPress(e){if(0===e.which||e.keyCode===ke.Enter)return;let n=String.fromCharCode(e.charCode||e.keyCode);this.ignoreCase&&(n=n.toLowerCase())," "===n&&e.preventDefault(),this.word+=n,this.last=n,this.search()}search(){clearTimeout(this.typingTimeout),this.filterable||(this.typingTimeout=setTimeout(()=>{this.word=""},this.delay),this.selectNext())}selectNext(){let e=this.dataService.filter(b=>de(b)&&!b.header&&!this.disabledItemsService.isItemDisabled(b)).map(b=>this.dataService.grouped?{item:b.value,itemIndex:b.offsetIndex}:{item:b,itemIndex:this.dataService.indexOf(b)});const n=((i,r)=>{for(let e=0;e<i.length;e++)if(i.charAt(e)!==r)return!1;return!0})(this.word,this.last);let f,p,g,s=e.length,a=!isNaN(this.selectionService.selected[0]),d=a?this.selectionService.selected[0]:0;for(this.defaultItem&&!this.disabledItemsService.isItemDisabled(this.defaultItem)&&(g={item:this.defaultItem,itemIndex:-1},s+=1,d+=1),d+=n&&a?1:0,e=((i,r,e)=>{let n=i;return e&&(n=[e].concat(n)),n.slice(r).concat(n.slice(0,r))})(e,d,g),p=0;p<s;p++){f=at(e[p].item,this.textField);const b=Boolean(n&&qO(f,this.last,this.ignoreCase)),S=Boolean(qO(f,this.word,this.ignoreCase));if(b||S){p=e[p].itemIndex;break}}p!==s&&this.navigate(p)}emitChange(e){this.onChangeCallback(e),this.valueChange.emit(e)}navigate(e){this.selectionService.select(e)}findDataItem({valueField:e,value:n}){const s={dataItem:null,index:-1},a=p=>at(p,e);let d;d=this.dataService.grouped?p=>a(p.value)===a(n):p=>a(p)===a(n);const f=this.dataService.findIndex(d);return s.dataItem=this.dataService.itemAt(f),s.index=f,s}setState(){const e=this.value,n=this.valueField,s=this.textField,a=this.valuePrimitive;if(this.defaultItem){const p=at(this.defaultItem,n),g=at(e,n);if(!de(e)||g===p)return this.updateState({dataItem:this.defaultItem,confirm:!0}),this.resetSelection(-1),void(this.filterable&&this.filterText&&this.dataService.itemsCount&&(this.selectionService.focused=this.firstFocusableIndex(0)))}const d=this.findDataItem({valueField:n,value:e}),f=!(a&&s);d.dataItem?(this.updateState({dataItem:d.dataItem,confirm:!0}),this.resetSelection(d.index)):de(e)&&f?(this.updateState({dataItem:e}),this.resetSelection()):this._previousDataItem?(this.updateState({dataItem:this._previousDataItem}),this.resetSelection()):(this.clearState(),this.resetSelection())}handleFilter(e){this.filterChange.emit(e.target.value)}pageChange(e){this.virtual.skip=e.skip}assignAriaDescribedBy(){const n=(this.wrapper.nativeElement.getAttribute("aria-describedby")||"").replace(this.valueLabelId,"").trim();this.valueLabelId=Hr();const s=`${this.valueLabelId} ${n}`.trim();this.renderer.setAttribute(this.wrapper.nativeElement,"aria-describedby",s)}setComponentClasses(){"none"!==this.size&&this.renderer.addClass(this.wrapper.nativeElement,vn("picker",this.size)),"none"!==this.rounded&&this.renderer.addClass(this.wrapper.nativeElement,gi(this.rounded)),"none"!==this.fillMode&&this.renderer.addClass(this.wrapper.nativeElement,dr("picker",this.fillMode))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(Ge),t.Y36(tr),t.Y36(Jr),t.Y36(rs),t.Y36(Vr),t.Y36(is),t.Y36(t.R0b),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(nl,8),t.Y36(t.zs3))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-dropdownlist"]],contentQueries:function(e,n,s){if(1&e&&(t.Suo(s,Ud,5),t.Suo(s,Km,5),t.Suo(s,$m,5),t.Suo(s,wT,5),t.Suo(s,Bd,5),t.Suo(s,Gd,5),t.Suo(s,zd,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.itemTemplate=a.first),t.iGM(a=t.CRH())&&(n.groupTemplate=a.first),t.iGM(a=t.CRH())&&(n.fixedGroupTemplate=a.first),t.iGM(a=t.CRH())&&(n.valueTemplate=a.first),t.iGM(a=t.CRH())&&(n.headerTemplate=a.first),t.iGM(a=t.CRH())&&(n.footerTemplate=a.first),t.iGM(a=t.CRH())&&(n.noDataTemplate=a.first)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Zh,7,t.s_b),t.Gf(Hh,7),t.Gf(hb,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first),t.iGM(s=t.CRH())&&(n.popupTemplate=s.first),t.iGM(s=t.CRH())&&(n.optionsList=s.first)}},hostVars:20,hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(a){return n.keydown(a)})("keypress",function(a){return n.keypress(a)})("click",function(a){return n.click(a)}),2&e&&(t.uIk("disabled",n.isDisabledAttribute)("id",n.focusableId)("dir",n.dir)("tabindex",n.hostTabIndex)("readonly",n.readonlyAttr)("aria-busy",n.isBusy)("role",n.role)("aria-haspopup",n.haspopup)("aria-expanded",n.isAriaExpanded)("aria-controls",n.hostAriaControls)("aria-invalid",n.hostAriaInvalid)("aria-activedescendant",n.hostAriaActivedescendant),t.ekj("k-dropdownlist",n.hostClasses)("k-picker",n.hostClasses)("k-disabled",n.isDisabledClass)("k-loading",n.isLoading))},inputs:{iconClass:"iconClass",loading:"loading",data:"data",value:"value",textField:"textField",valueField:"valueField",popupSettings:"popupSettings",listHeight:"listHeight",defaultItem:"defaultItem",disabled:"disabled",itemDisabled:"itemDisabled",readonly:"readonly",filterable:"filterable",virtual:"virtual",ignoreCase:"ignoreCase",delay:"delay",valuePrimitive:"valuePrimitive",tabindex:"tabindex",tabIndex:"tabIndex",size:"size",rounded:"rounded",fillMode:"fillMode",focusableId:["id","focusableId"]},outputs:{valueChange:"valueChange",filterChange:"filterChange",selectionChange:"selectionChange",open:"open",opened:"opened",close:"close",closed:"closed",onFocus:"focus",onBlur:"blur"},exportAs:["kendoDropDownList"],features:[t._Bn([PG,is,Jr,rs,Vr,Ge,{provide:Et,useValue:"kendo.dropdownlist"},{provide:Jh,useExisting:(0,t.Gpc)(()=>i)},{provide:zi,useExisting:(0,t.Gpc)(()=>i)}]),t.TTD],decls:12,vars:10,consts:function(){let r,e;return r=$localize`:kendo.dropdownlist.noDataText|The text displayed in the popup when there are no items:NO DATA FOUND`,e=$localize`:kendo.dropdownlist.selectButtonText|The text set as aria-label on the select button:Select`,[["kendoDropDownListLocalizedMessages","","noDataText",r,"selectButtonText",e],["unselectable","on",1,"k-input-inner",3,"id"],[1,"k-input-value-text"],[4,"ngIf"],[3,"ngIf"],["tabindex","-1","unselectable","on","type","button",1,"k-input-button","k-button","k-icon-button",3,"ngClass","kendoEventsOutsideAngular"],["unselectable","on",1,"k-button-icon","k-icon",3,"ngClass"],["popupTemplate",""],["container",""],[3,"templateContext"],[3,"size","rounded","id","optionPrefix","data","textField","valueField","template","groupTemplate","fixedGroupTemplate","height","show","virtual","ariaLive","pageChange"],["optionsList",""],["class","k-no-data",4,"ngIf"],[1,"k-list-filter",3,"click"],[1,"k-searchbox","k-input",3,"ngClass"],["unselectable","on",1,"k-input-icon","k-icon","k-i-search"],["role","searchbox","aria-autocomplete","list","aria-haspopup","listbox","tabindex","-1",1,"k-input-inner",3,"filterInput","dir","ngModel","ngModelChange","keydown","input","focus","blur"],[1,"k-list",3,"ngClass"],["kendoDropDownsSelectable","",1,"k-list-optionlabel",3,"ngClass","index"],[1,"k-no-data"],[3,"ngIf","templateContext"],[3,"resize"]]},template:function(e,n){1&e&&(t.GkF(0,0),t.TgZ(1,"span",1)(2,"span",2),t.YNc(3,yB,1,4,null,3),t.YNc(4,DB,1,1,"ng-template",4),t.qZA()(),t.TgZ(5,"button",5),t._UZ(6,"span",6),t.qZA(),t.YNc(7,GB,8,20,"ng-template",null,7,t.W1O),t.YNc(9,zB,1,0,"ng-template",4),t.GkF(10,null,8)),2&e&&(t.xp6(1),t.Q6J("id",n.valueLabelId),t.xp6(2),t.Q6J("ngIf",n.valueTemplate),t.xp6(1),t.Q6J("ngIf",!n.valueTemplate),t.xp6(1),t.Q6J("ngClass",n.selectButtonClasses)("kendoEventsOutsideAngular",t.VKq(8,qm,n.onMouseDown)),t.uIk("aria-label",n.messageFor("selectButtonText")),t.xp6(1),t.Q6J("ngClass",n.buttonClasses),t.xp6(3),t.Q6J("ngIf",n.isOpen))},dependencies:[qh,Fr,lc,X.O5,oa,X.mk,Es,H.Fj,wb,H.JJ,H.On,vb],encapsulation:2}),i})(),eI=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoMultiSelectCustomItemTemplate",""]]}),i})(),kT=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoMultiSelectTagTemplate",""],["","kendoMultiSelectTreeTagTemplate",""]]}),i})(),TT=(()=>{class i{constructor(e){this.templateRef=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Rgc))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoMultiSelectGroupTagTemplate",""],["","kendoMultiSelectTreeGroupTagTemplate",""]]}),i})();class tI extends Zd{constructor(r){super(),this.dataItem=r}}let yT=(()=>{class i{constructor(e,n){this.renderer=e,this.hostElement=n,this.rounded="medium",this.fillMode="solid",this.disabledIndices=new Set,this.removeTag=new t.vpe,this.hostClasses=!0,this._size="medium"}set size(e){this.renderer.removeClass(this.hostElement.nativeElement,vn("chip-list",this.size)),e&&this.renderer.addClass(this.hostElement.nativeElement,vn("chip-list",e)),this._size=e}get size(){return this._size}get hostId(){return this.id}tagProp(e,n,s){const a=n&&this.getPropField(e,n,s);return at(e,a)}isTagDisabled(e,n){return this.isGroupTag(e)?e.every((s,a)=>this.disabledIndices.has(a+n)):this.disabledIndices.has(n)}deleteTag(e,n,s){e.preventDefault(),e.stopImmediatePropagation(),!this.disabled&&1===e.which&&this.removeTag.emit({tag:n,index:s})}itemId(e,n){if(e)return this.tagPrefix+"-"+this.tagProp(e,this.valueField,n)}isGroupTag(e){return e instanceof Array}tagAriaHidden(e){return de(this.focused)&&this.focused!==e}getPropField(e,n,s){const a=n.length-1;if("string"==typeof n)return n;if(this.valueDepth){const d=this.valueDepth[s];return a<d?n[a]:n[d]}return n.find(d=>d in e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.Qsj),t.Y36(t.SBq))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-taglist"]],hostVars:7,hostBindings:function(e,n){2&e&&(t.uIk("id",n.hostId),t.ekj("k-input-values",n.hostClasses)("k-chip-list",n.hostClasses)("k-selection-multiple",n.hostClasses))},inputs:{tags:"tags",textField:"textField",valueField:"valueField",valueDepth:"valueDepth",focused:"focused",template:"template",groupTemplate:"groupTemplate",disabled:"disabled",tagPrefix:"tagPrefix",id:"id",size:"size",rounded:"rounded",fillMode:"fillMode",disabledIndices:"disabledIndices"},outputs:{removeTag:"removeTag"},ngContentSelectors:e5,decls:2,vars:1,consts:[["class","k-chip",3,"ngClass",4,"ngFor","ngForOf"],[1,"k-chip",3,"ngClass"],[1,"k-chip-content"],[4,"ngIf","ngIfThen","ngIfElse"],["groupTag",""],["singleTag",""],[1,"k-chip-actions"],["aria-label","delete",1,"k-chip-action","k-chip-remove-action"],[1,"k-icon","k-i-x-circle",3,"mousedown"],[1,"k-chip-label","k-text-ellipsis"],[4,"ngIf"],[3,"ngIf"],[3,"templateContext"]],template:function(e,n){1&e&&(t.F$t(),t.YNc(0,XB,10,20,"div",0),t.Hsn(1)),2&e&&t.Q6J("ngForOf",n.tags)},dependencies:[X.sg,X.mk,X.O5,oa],encapsulation:2}),i})();const ZG={multi:!0,provide:H.JU,useExisting:(0,t.Gpc)(()=>DT)};let DT=(()=>{class i{constructor(e,n,s,a,d,f,p,g,b,S,k,T){this.wrapper=e,this.localization=n,this.popupService=s,this.dataService=a,this.selectionService=d,this.navigationService=f,this.disabledItemsService=p,this.cdr=g,this.differs=b,this.renderer=S,this._zone=k,this.touchEnabled=T,this.listBoxId=Hr(),this.tagListId=Hr(),this.tagPrefix="tag-"+Hr(),this.optionPrefix="option-"+Hr(),this.focusedTagIndex=void 0,this.focusableId=`k-${Hr()}`,this.autoClose=!0,this.tabindex=0,this.disabled=!1,this.readonly=!1,this.filterable=!1,this.listHeight=200,this.clearButton=!0,this.tagMapper=F=>F||[],this.allowCustom=!1,this.valueNormalizer=F=>F.pipe((0,Kn.U)(K=>{const fe=Qe=>"string"==typeof Qe&&K.toLowerCase()===Qe.toLowerCase(),Re=this.value.find(fe);return Re||(this.dataService.find(fe)||K)})),this.filterChange=new t.vpe,this.valueChange=new t.vpe,this.open=new t.vpe,this.opened=new t.vpe,this.close=new t.vpe,this.closed=new t.vpe,this.onFocus=new t.vpe,this.onBlur=new t.vpe,this.removeTag=new t.vpe,this.hostClasses=!0,this.initialized=!1,this._size="medium",this._rounded="medium",this._fillMode="solid",this.onChangeCallback=F=>{},this.onTouchedCallback=F=>{},this._placeholder="",this._open=!1,this._value=[],this._popupSettings={animate:!0},this._checkboxes={enabled:!1},this._isFocused=!1,this.selectedDataItems=[],this.customValueSubject=new Un.x,this.observableSubscriptions=new cn.w0,wt(fb),this.popupMouseDownHandler=this.onMouseDown.bind(this),this.data=[],this.direction=this.localization.rtl?"rtl":"ltr",this.subscribeEvents(),this.subscribeTouchEvents()}focusItemAt(e){const s=(this.allowCustom?-1:0)<=0&&e<this.data.length;de(e)&&s&&!this.disabledItemsService.isIndexDisabled(e)?this.selectionService.focus(e):this.selectionService.focus(null)}focus(){this.disabled||this.searchbar.focus()}onSearchBarFocus(){this.isFocused||(this.isFocused=!0,zt(this.onFocus)&&this._zone.run(()=>{this.onFocus.emit()}))}blur(){this.disabled||this.searchbar.blur()}onSearchBarBlur(){!this.isFocused||(this.isFocused=!1,zt(this.onBlur)||zt(this.filterChange)||zt(this.close)||Vh(this.wrapper.nativeElement)?this._zone.run(()=>{this.closePopup(),this.isOpen&&this.allowCustom||this.clearFilter(),this.onBlur.emit(),this.onTouchedCallback()}):(this.allowCustom||this.clearFilter(),this.closePopup()))}onMouseDown(e){e.preventDefault()}onResize(){if(this._open){const e=this.popupRef.popupElement,{min:n,max:s}=this.width;e.style.minWidth=n,e.style.width=s}}get appendTo(){const{appendTo:e}=this.popupSettings;if(e&&"root"!==e)return"component"===e?this.container:e}set data(e){this.dataService.data=e||[],this.virtual&&(this.virtual.skip=0),this.initialized&&this.setState(this.value)}get data(){const e=this.virtual;if(e){const n=e.skip||0,s=n+e.pageSize;return e.total=this.dataService.data.length,this.dataService.data.slice(n,s)}return this.dataService.data}set value(e){this._value=e||[],!this.differ&&this.value&&(this.differ=this.differs.find(this.value).create()),this.valueChangeDetected=!0,this.initialized&&this.setState(this.value)}get value(){return this._value}set tabIndex(e){this.tabindex=e}get tabIndex(){return this.tabindex}set size(e){const n=e||"medium";this.renderer.removeClass(this.wrapper.nativeElement,vn("input",this.size)),"none"!==e&&this.renderer.addClass(this.wrapper.nativeElement,vn("input",n)),this._size=n}get size(){return this._size}set rounded(e){const n=e||"medium";this.renderer.removeClass(this.wrapper.nativeElement,gi(this.rounded)),"none"!==e&&this.renderer.addClass(this.wrapper.nativeElement,gi(n)),this._rounded=n}get rounded(){return this._rounded}set fillMode(e){const n=e||"solid";this.renderer.removeClass(this.wrapper.nativeElement,dr("input",this.fillMode)),"none"!==e&&this.renderer.addClass(this.wrapper.nativeElement,dr("input",n)),this._fillMode=n}get fillMode(){return this._fillMode}set placeholder(e){this._placeholder=e||""}get placeholder(){return this.selectedDataItems.length?"":this._placeholder}set itemDisabled(e){if("function"!=typeof e)throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(e)}.`);this.disabledItemsService.itemDisabled=e}set checkboxes(e){this._checkboxes=(i=>Ld(i)?Object.assign({},{enabled:!0,checkOnClick:!0},i):{enabled:Boolean(i),checkOnClick:!0})(e)}get checkboxes(){return this._checkboxes}set virtual(e){this._virtualSettings=_b(e)}get virtual(){return this._virtualSettings}set popupSettings(e){this._popupSettings=Object.assign({animate:!0},e)}get popupSettings(){return this._popupSettings}set valuePrimitive(e){this._valuePrimitive=e}get valuePrimitive(){return de(this._valuePrimitive)?this._valuePrimitive:!de(this.valueField)}get dir(){return this.direction}get disabledClass(){return this.disabled}get isLoading(){return this.loading}handleKeyboardEvent(e){this.isFocused&&this.isOpen&&(e.ctrlKey||e.metaKey)&&e.keyCode===ke.KeyA&&(e.preventDefault(),this.handleSelectAll())}hostMousedown(e){if(0===e.button){if(this.isFocused&&this.isOpen&&e.target===this.searchbar.input.nativeElement)return;(!this.touchEnabled||this.touchEnabled&&"SPAN"!==e.target.tagName)&&this.searchbar.focus(),this.togglePopup(!this.isOpen),e.preventDefault()}}get listContainerClasses(){const e=["k-list-container","k-reset"];return this.popupSettings.popupClass&&e.push(this.popupSettings.popupClass),e}get customItemSizeClass(){return`${this.size?vn("list",this.size):""}`}get width(){let e=0;nt()&&(e=this.wrapper.nativeElement.offsetWidth);const n=this.popupSettings.width||e;return{min:isNaN(e)?e:`${e}px`,max:isNaN(n)?n:`${n}px`}}get height(){const e=this.popupSettings.height;return de(e)?`${e}px`:"auto"}get activeDescendant(){const e=this.focusedTagIndex,n=this.selectionService.focused;let s,a;if(de(e)&&!this.isOpen)a=this.tags[e],s=this.tagPrefix;else{if(!de(n)||-1===n||!this.isOpen)return null;a=this.dataService.itemAt(n),s=this.optionPrefix}return s+"-"+at(a,this.valueField)}get clearButtonVisiblity(){if(this.touchEnabled)return"visible"}verifySettings(){if((0,t.X6Q)()&&0!==this.value.length){if(!xr(this.value))throw new Error("Expected values of array type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection");if(!0===this.valuePrimitive&&pb(this.value))throw new Error("Expected values of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection");if(!1===this.valuePrimitive&&!pb(this.value))throw new Error("Expected values of Object type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection");if(!de(this.valueField)!=!de(this.textField))throw new Error("Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#toc-bind-to-arrays-of-complex-data")}}change(e){if(e.isMultipleSelection)de(e.added)&&e.added.length>0&&e.added.forEach(n=>{const s=this.dataService.itemAt(n),a=this.valuePrimitive&&de(s)&&de(s[this.valueField])?s[this.valueField]:s;a&&(this.value=[...this.value,a])}),de(e.removed)&&e.removed.length>0&&(e.removed.forEach(n=>{const s=this.dataService.itemAt(n);this.value=this.value.filter(d=>at(d,this.valueField)!==at(s,this.valueField))}),this.cdr.detectChanges());else{if((de(e.added)||de(e.removed))&&(-1===e.added||-1===e.removed))return void this.addCustomValue(this.text);if(de(e.added)){const s=this.dataService.itemAt(e.added),a=this.valuePrimitive&&de(s)&&de(s[this.valueField])?s[this.valueField]:s;this.value=[...this.value,a]}if(de(e.removed)){const s=this.dataService.itemAt(e.removed);this.value=this.value.filter(d=>at(d,this.valueField)!==at(s,this.valueField)),this.selectionService.focused=e.removed,this.cdr.detectChanges()}}this.emitValueChange()}setState(e){let n=this.dataService.data;this.dataService.grouped&&(n=n.filter(a=>!a.header).map(a=>a.value));const s=xT(this.value,n,this.valueField);this.selectionService.resetSelection(s),this.disabledItemsService.isIndexDisabled(this.selectionService.focused)&&(this.selectionService.focused=this.firstFocusableIndex(0)),this.isOpen&&void 0===this.selectionService.focused&&(this.dataService.itemsCount>0?this.selectionService.focused=this.firstFocusableIndex(0):this.allowCustom&&(this.selectionService.focused=-1)),this.valuePrimitive&&!this.valueField&&(this.selectedDataItems=e.slice()),(pb(e)||this.valuePrimitive&&this.valueField)&&(this.selectedDataItems=((i,r,e)=>{const n=((i,r)=>xr(i)&&i.filter(e=>Ld(e)&&de(at(e,r))))(i,e)||[];return(((i,r=[],e)=>i.map(n=>r.find(s=>at(s,e)===n)).filter(n=>void 0!==n))(i,r,e)||[]).concat(n)})(e,n,this.valueField)),this.selectedDataItems.length<e.length&&(this.selectedDataItems=e.map(a=>{const d=this.selectedDataItems.find(f=>at(f,this.valueField)===at(a,this.valueField));return de(d)?d:this.resolveDataItemFromTags(a)}).filter(a=>de(a))),this.tags=this.tagMapper(this.selectedDataItems.slice(0)),this.disabledIndices=this.disabledItemsMapper(),this.cdr.markForCheck()}handleFilter(e){this.text=e,e&&!this.isOpen&&this.openPopup(),this.filterable?this.filterChange.emit(e):this.searchTextAndFocus(e),this.searchbar.setInputSize()}pageChange(e){this.virtual.skip=e.skip}clearFilter(){this.filterable&&this.text&&this.filterChange.emit(""),this.text="",this.searchbar.input.nativeElement.value="",this.searchbar.setInputSize()}handleNavigate(e){const n=this.text&&e.keyCode!==ke.ArrowDown&&e.keyCode!==ke.ArrowUp,s=this.text&&e.keyCode===ke.Enter||e.keyCode===ke.Escape;if(!this.text&&e.keyCode===ke.Backspace&&this.tags.length>0)return void this.handleBackspace();if(this.disabled||n&&!s)return;const d=e,f=isNaN(this.selectionService.focused)?-1:this.selectionService.focused,p=this.navigationService.process({current:f,max:this.dataService.itemsCount-1,min:this.allowCustom&&this.text?-1:0,open:this.isOpen,originalEvent:d});p!==pt.Undefined&&(p===pt.Enter&&this.isOpen||p!==pt.Enter)&&e.preventDefault()}handleRemoveTag({tag:e}){const n=new tI(e);this.disabled||this.readonly||(this.focus(),this.removeTag.emit(n),!n.isDefaultPrevented()&&(e instanceof Array?this.removeGroupTag(e):this.removeSingleTag(e),this.cdr.detectChanges()))}clearAll(e){e?.stopImmediatePropagation(),e?.preventDefault(),this.focus(),this.clearFilter(),this.selectionService.lastClickedIndex=null;const n=this.selectionService.selected;this.value=this.value.filter((s,a)=>this.disabledItemsService.isIndexDisabled(n[a])),this.emitValueChange()}addCustomValue(e){this.customValueSubject.next(e)}ngAfterContentChecked(){this.verifySettings()}ngDoCheck(){this.differ&&this.differ.diff(this.value)&&!this.valueChangeDetected&&this.setState(this.value),this.valueChangeDetected=!1}ngOnInit(){this.renderer.removeAttribute(this.wrapper.nativeElement,"tabindex"),this.createCustomValueStream(),this.localizationChangeSubscription=this.localization.changes.subscribe(({rtl:e})=>{this.direction=e?"rtl":"ltr",this.cdr.markForCheck()}),this.setState(this.value),this.setComponentClasses(),this.initialized=!0}ngOnChanges(e){const n=this.virtual;n&&e.data&&e.data.isFirstChange()&&this.pageChange({skip:0,take:n.pageSize}),fn("valueNormalizer",e)&&this.createCustomValueStream(),Gi(["textField","valueField","valuePrimitive"],e)&&this.setState(this.value)}ngAfterViewInit(){this.searchbar.setInputSize()}ngOnDestroy(){this._toggle(!1),this.unsubscribeEvents()}toggle(e){Promise.resolve(null).then(()=>{const n=de(e)?e:!this._open;this._toggle(n),this.cdr.markForCheck()})}get isOpen(){return this._open}reset(){this.text="",this.value=[]}messageFor(e){return this.localization.get(e)}writeValue(e){this.value=e||[]}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}setDisabledState(e){this.disabled=e}onTagMapperChange(){this.tags=this.tagMapper(this.selectedDataItems.slice(0)),this.cdr.markForCheck()}set isFocused(e){this.renderer[e?"addClass":"removeClass"](this.wrapper.nativeElement,"k-focus"),this._isFocused=e}get isFocused(){return this._isFocused}subscribeEvents(){if(!nt())return;const e=()=>this.isOpen,n=()=>!this.isOpen,s=()=>!this.isOpen&&void 0!==this.focusedTagIndex;[this.selectionService.onChange.subscribe(this.handleItemChange.bind(this)),this.navigationService.esc.subscribe(this.closePopup.bind(this)),this.navigationService.enter.pipe((0,Ot.h)(e)).subscribe(this.handleEnter.bind(this)),this.navigationService.open.subscribe(this.openPopup.bind(this)),this.navigationService.close.subscribe(this.handleClose.bind(this)),this.navigationService.up.pipe((0,Ot.h)(e)).subscribe(a=>this.handleUp(a.index)),this.navigationService.home.pipe((0,Ot.h)(()=>n)).subscribe(this.handleHome.bind(this)),this.navigationService.end.pipe((0,Ot.h)(()=>n)).subscribe(this.handleEnd.bind(this)),this.navigationService.backspace.pipe((0,Ot.h)(s)).subscribe(this.handleBackspace.bind(this)),this.navigationService.delete.pipe((0,Ot.h)(s)).subscribe(this.handleDelete.bind(this)),this.navigationService.left.subscribe("rtl"===this.direction?this.handleRightKey.bind(this):this.handleLeftKey.bind(this)),this.navigationService.right.subscribe("rtl"===this.direction?this.handleLeftKey.bind(this):this.handleRightKey.bind(this)),this.navigationService.down.subscribe(a=>this.handleDownKey(a.index)),this.navigationService.selectprevious.pipe((0,Ot.h)(e)).subscribe(a=>this.handleSelectUpDown(a)),this.navigationService.selectnext.pipe((0,Ot.h)(e)).subscribe(a=>this.handleSelectUpDown(a)),this.navigationService.selectalltobeginning.pipe((0,Ot.h)(e)).subscribe(()=>this.handleSelectAllToBeginning()),this.navigationService.selectalltoend.pipe((0,Ot.h)(e)).subscribe(()=>this.handleSelectAllToEnd()),(0,En.T)(this.navigationService.pagedown,this.navigationService.pageup).subscribe(a=>{this.isOpen&&(a.originalEvent.preventDefault(),this.optionsList.scrollWithOnePage(pt[a.originalEvent.code]))})].forEach(a=>this.observableSubscriptions.add(a))}subscribeTouchEvents(){!nt()||!this.touchEnabled||this._zone.runOutsideAngular(()=>this.touchstartDisposeHandler=this.renderer.listen(document,"touchstart",e=>{(this.isFocused||this.isOpen)&&!Ym(this.wrapper,e.target,this.popupRef)&&this._zone.run(()=>{this.blur(),this.isOpen&&this.togglePopup(!1)})}))}unsubscribeEvents(){!nt()||(this.observableSubscriptions.unsubscribe(),this.customValueSubscription&&this.customValueSubscription.unsubscribe(),this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe(),this.touchstartDisposeHandler&&this.touchstartDisposeHandler())}removeGroupTag(e){let n=this.dataService.data;this.dataService.grouped&&(n=n.filter(a=>!a.header).map(a=>a.value));const s=new Set(e.map(a=>at(a,this.valueField)));this.value=this.value.filter(a=>{const d=xT([a],n,this.valueField)[0],f=this.disabledItemsService.isIndexDisabled(d);return!s.has(at(a,this.valueField))||f}),this.emitValueChange()}removeSingleTag(e){let n=this.dataService.data;this.dataService.grouped&&(n=n.filter(a=>!a.header).map(a=>a.value));const s=xT([e],n,this.valueField)[0];this.disabledItemsService.isIndexDisabled(s)||((i=>!isNaN(i))(s)?(this.selectionService.deselect(s),this.selectionService.focused=s,this.togglePopup(!1)):(this.value=this.value.filter(d=>at(d,this.valueField)!==at(e,this.valueField)),this.emitValueChange()))}disabledItemsMapper(){const{selected:e}=this.selectionService;return new Set(this.selectedDataItems.reduce((n,s,a)=>(this.disabledItemsService.isIndexDisabled(e[a])&&n.push(a),n),[]))}createCustomValueStream(){this.customValueSubscription&&this.customValueSubscription.unsubscribe(),this.customValueSubscription=this.customValueSubject.pipe((0,Yt.b)(()=>{this.loading=!0,this.disabled=!0,this.cdr.detectChanges()}),this.valueNormalizer,(0,Qk.K)(()=>(this.loading=!1,this.disabled=!1,this.autoClose&&this.togglePopup(!1),(this.autoClose||!this.filterable)&&this.clearFilter(),this.nextTick(()=>{this.searchbar.focus()}),this.createCustomValueStream(),(0,go.of)(null)))).subscribe(e=>{if(this.loading=!1,this.disabled=!1,de(e)){const n=this.valuePrimitive?at(e,this.valueField):e,s=this.dataService.indexOf(n),a=-1===s;-1===this.value.indexOf(n)?(this.tags=this.tagMapper([...this.selectedDataItems,e]),a?this.value=[...this.value,n]:this.selectionService.add(s)):!a&&this.selectionService.isSelected(s)?(this.selectionService.deselect(s),this.selectionService.focused=s):this.value=this.value.filter(d=>at(d,this.valueField)!==n),this.emitValueChange()}this.autoClose&&this.togglePopup(!1),(this.autoClose||!this.filterable)&&this.clearFilter(),this.nextTick(()=>{this.searchbar.focus()})})}handleItemChange(e){this.change(e),this.autoClose&&!e.preventClosingPopup&&this.togglePopup(!1),(this.autoClose||!this.filterable)&&this.clearFilter()}handleEnter(e){const n=this.selectionService,s=this.selectionService.focused;this.selectionService.lastClickedIndex=s,this.isOpen&&e.originalEvent.preventDefault(),-1!==s?(n.isSelected(s)?(n.deselect(s),n.focused=s):n.add(s),this.autoClose&&this.togglePopup(!1),(this.autoClose||!this.filterable)&&this.clearFilter()):this.allowCustom&&this.text&&this.addCustomValue(this.text)}handleClose(){this.closePopup(),this.searchbar.focus()}handleEnd(){this.focusedTagIndex=this.tags.length-1}handleHome(){this.focusedTagIndex=0}sortSelectionAscending(){return this.selectionService.selected.sort((e,n)=>e-n)}handleSelectAll(){const e=this.selectionService.selected.length,n=this.dataService.data.length,s=this.dataService.data.filter(a=>!a.header).length;!this.dataService.grouped&&e===n||this.dataService.grouped&&e===s?this.clearAll():(this.selectionService.selectFromTo(0,n-1),this.selectionService.emitMultipleAddedRemoved())}handleSelectAllToBeginning(){const e=this.selectionService.selected.length,n=this.dataService.data.length,s=this.selectionService.focused,a=this.sortSelectionAscending()[e-1];e!==n&&(this.selectionService.unselectFromTo(a,s+1),this.selectionService.selectFromTo(0,s)),this.nextTick(()=>this.selectionService.focus(0)),this.selectionService.emitMultipleAddedRemoved()}handleSelectAllToEnd(){const n=this.dataService.data.length,s=this.selectionService.focused;if(this.selectionService.selected.length!==n&&(this.selectionService.unselectFromTo(s-1,0),this.selectionService.selectFromTo(s,n-1)),this.dataService.grouped){const a=this.dataService.groupIndices[this.dataService.groupIndices.length-1]-1;this.nextTick(()=>this.selectionService.focus(a))}else this.nextTick(()=>this.selectionService.focus(n-1));this.selectionService.emitMultipleAddedRemoved()}handleSelectUpDown(e){const n=this.selectionService.focused;if(!de(n))return;let s;s="ArrowUp"===e.originalEvent.key?n>0?n-1:n:n<this.dataService.data.length-1?n+1:n,de(this.selectionService.lastClickedIndex)||(this.selectionService.lastClickedIndex=n),this.selectRangeFromTo(s)}selectRangeFromTo(e){const n=this.selectionService.lastClickedIndex;n>e?(this.selectionService.unselectNotNeededIndices(e,n,this.dataService.data.length),this.selectionService.selectFromTo(e,this.selectionService.lastClickedIndex),this.selectionService.emitMultipleAddedRemoved()):(this.selectionService.unselectNotNeededIndices(n,e,this.dataService.data.length),this.selectionService.selectFromTo(n,e),this.selectionService.emitMultipleAddedRemoved()),this.nextTick(()=>this.selectionService.focus(e))}handleUp(e){this.selectionService.focused=e}handleBackspace(){void 0!==this.focusedTagIndex?this.handleDelete():(this.handleRemoveTag({tag:this.tags[this.tags.length-1]}),this.searchbar.focus())}handleDelete(){this.handleRemoveTag({tag:this.tags[this.focusedTagIndex]}),this.focusedTagIndex===this.tags.length&&(this.focusedTagIndex=void 0)}handleLeftKey(){void 0===this.focusedTagIndex||this.focusedTagIndex<0?this.focusedTagIndex=this.tags.length-1:0!==this.focusedTagIndex&&this.focusedTagIndex--}handleDownKey(e){this.isOpen?this.selectionService.focused=e||this.firstFocusableIndex(0):this.openPopup()}handleRightKey(){const e=this.tags.length-1;this.focusedTagIndex===e?this.focusedTagIndex=void 0:this.focusedTagIndex<e&&this.focusedTagIndex++}findIndex(e,n=0){let s;e=e.toLowerCase();let a=this.dataService.findIndex(d=>(s=at(this.dataService.grouped?d.value:d,this.textField),s=de(s)?s.toString().toLowerCase():"",e&&s.startsWith(e)),n);return this.disabledItemsService.isIndexDisabled(a)?a+1>this.dataService.itemsCount?-1:this.findIndex(e,a+1):a}searchTextAndFocus(e){const n=this.findIndex(e);this.selectionService.focused=n}closePopup(){this.togglePopup(!1),this.focusedTagIndex=void 0}openPopup(){this.togglePopup(!0),this.focusedTagIndex=void 0}togglePopup(e){this.disabled||this.readonly||this.isOpen===e||this.triggerPopupEvents(e)||this._toggle(e)}triggerPopupEvents(e){const n=new Zd;return e?this.open.emit(n):this.close.emit(n),n.isDefaultPrevented()}_toggle(e){this._open=e,this.destroyPopup(),this._open&&this.createPopup()}destroyPopup(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)}createPopup(){this.virtual&&(this.virtual.skip=0);const e="rtl"===this.direction?"right":"left";this.popupRef=this.popupService.open({anchor:this.wrapper,anchorAlign:{horizontal:e,vertical:"bottom"},animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupAlign:{horizontal:e,vertical:"top"},popupClass:this.listContainerClasses,positionMode:"absolute"});const a=this.popupRef.popupElement,{min:d,max:f}=this.width;a.addEventListener("mousedown",this.popupMouseDownHandler),a.style.minWidth=d,a.style.width=f,a.style.height=this.height,a.setAttribute("dir",this.direction);const p=a.querySelector("ul.k-list-ul"),g=this.searchbar.input.nativeElement.getAttribute("aria-labelledby");g&&p.setAttribute("aria-labelledby",g),this.popupRef.popupOpen.subscribe(()=>{this.cdr.detectChanges(),this.optionsList.scrollToItem(this.selectionService.focused),this.opened.emit()}),this.popupRef.popupClose.subscribe(()=>{this.closed.emit()}),this.popupRef.popupAnchorViewportLeave.subscribe(()=>{this.togglePopup(!1)})}emitValueChange(){this.onChangeCallback(this.value),this.valueChange.emit(this.value)}resolveDataItemFromTags(e){return this.tags&&this.tags.length&&de(e)?this.tags.reduce((s,a)=>{const d=xr(a)?a:[a];return s.push(...d),s},[]).find(s=>at(s,this.valueField)===at(e,this.valueField)):void 0}firstFocusableIndex(e){const n=this.dataService.itemsCount;if(this.disabledItemsService.isIndexDisabled(e)){const s=e+1;return s<n?this.firstFocusableIndex(s):void 0}return e}nextTick(e){this._zone.runOutsideAngular(()=>{setTimeout(()=>this._zone.run(e))})}setComponentClasses(){"none"!==this.size&&this.renderer.addClass(this.wrapper.nativeElement,vn("input",this.size)),"none"!==this.rounded&&this.renderer.addClass(this.wrapper.nativeElement,gi(this.rounded)),"none"!==this.fillMode&&this.renderer.addClass(this.wrapper.nativeElement,dr("input",this.fillMode))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(Ge),t.Y36(tr),t.Y36(is),t.Y36(Jr),t.Y36(rs),t.Y36(Vr),t.Y36(t.sBO),t.Y36(t.aQg),t.Y36(t.Qsj),t.Y36(t.R0b),t.Y36(nl,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-multiselect"]],contentQueries:function(e,n,s){if(1&e&&(t.Suo(s,Ud,5),t.Suo(s,eI,5),t.Suo(s,Km,5),t.Suo(s,$m,5),t.Suo(s,Bd,5),t.Suo(s,Gd,5),t.Suo(s,kT,5),t.Suo(s,TT,5),t.Suo(s,zd,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.template=a.first),t.iGM(a=t.CRH())&&(n.customItemTemplate=a.first),t.iGM(a=t.CRH())&&(n.groupTemplate=a.first),t.iGM(a=t.CRH())&&(n.fixedGroupTemplate=a.first),t.iGM(a=t.CRH())&&(n.headerTemplate=a.first),t.iGM(a=t.CRH())&&(n.footerTemplate=a.first),t.iGM(a=t.CRH())&&(n.tagTemplate=a.first),t.iGM(a=t.CRH())&&(n.groupTagTemplate=a.first),t.iGM(a=t.CRH())&&(n.noDataTemplate=a.first)}},viewQuery:function(e,n){if(1&e&&(t.Gf(Zh,7,t.s_b),t.Gf(ac,7),t.Gf(Hh,7),t.Gf(hb,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.container=s.first),t.iGM(s=t.CRH())&&(n.searchbar=s.first),t.iGM(s=t.CRH())&&(n.popupTemplate=s.first),t.iGM(s=t.CRH())&&(n.optionsList=s.first)}},hostVars:9,hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(a){return n.handleKeyboardEvent(a)})("mousedown",function(a){return n.hostMousedown(a)}),2&e&&(t.uIk("dir",n.dir),t.ekj("k-multiselect",n.hostClasses)("k-input",n.hostClasses)("k-disabled",n.disabledClass)("k-loading",n.isLoading))},inputs:{focusableId:"focusableId",autoClose:"autoClose",loading:"loading",data:"data",value:"value",valueField:"valueField",textField:"textField",tabindex:"tabindex",tabIndex:"tabIndex",size:"size",rounded:"rounded",fillMode:"fillMode",placeholder:"placeholder",disabled:"disabled",itemDisabled:"itemDisabled",checkboxes:"checkboxes",readonly:"readonly",filterable:"filterable",virtual:"virtual",popupSettings:"popupSettings",listHeight:"listHeight",valuePrimitive:"valuePrimitive",clearButton:"clearButton",tagMapper:"tagMapper",allowCustom:"allowCustom",valueNormalizer:"valueNormalizer"},outputs:{filterChange:"filterChange",valueChange:"valueChange",open:"open",opened:"opened",close:"close",closed:"closed",onFocus:"focus",onBlur:"blur",removeTag:"removeTag"},exportAs:["kendoMultiSelect"],features:[t._Bn([ZG,is,Jr,rs,Vr,Ge,{provide:Et,useValue:"kendo.multiselect"},{provide:Jh,useExisting:(0,t.Gpc)(()=>i)},{provide:zi,useExisting:(0,t.Gpc)(()=>i)}]),t.TTD],decls:11,vars:29,consts:function(){let r,e;return r=$localize`:kendo.multiselect.noDataText|The text displayed in the popup when there are no items:NO DATA FOUND`,e=$localize`:kendo.multiselect.clearTitle|The title of the clear button:clear`,[["kendoMultiSelectLocalizedMessages","","noDataText",r,"clearTitle",e],[3,"size","rounded","fillMode","id","tags","textField","valueField","focused","disabled","template","groupTemplate","tagPrefix","disabledIndices","removeTag"],[3,"id","role","tagListId","listId","isLoading","isFilterable","activeDescendant","userInput","disabled","readonly","tabIndex","popupOpen","placeholder","onNavigate","valueChange","onBlur","onFocus"],["searchbar",""],["class","k-clear-value","role","button","tabindex","-1",3,"visibility","mousedown",4,"ngIf"],["class","k-icon k-i-loading k-input-loading-icon",4,"ngIf"],["popupTemplate",""],[3,"ngIf"],["container",""],["role","button","tabindex","-1",1,"k-clear-value",3,"mousedown"],[1,"k-icon","k-i-x"],[1,"k-icon","k-i-loading","k-input-loading-icon"],[4,"ngIf"],["class","k-list",3,"ngClass",4,"ngIf"],[3,"size","rounded","id","optionPrefix","data","textField","valueField","height","template","groupTemplate","fixedGroupTemplate","show","multipleSelection","virtual","checkboxes","isMultiselect","pageChange"],["optionsList",""],["class","k-no-data",4,"ngIf"],[3,"templateContext"],[1,"k-list",3,"ngClass"],["kendoDropDownsSelectable","",1,"k-list-item","k-custom-item",3,"multipleSelection","index"],[4,"ngIf","ngIfElse"],["default_custom_item_template",""],[1,"k-icon","k-i-plus",2,"float","right"],[1,"k-no-data"],[3,"ngIf","templateContext"],[3,"resize"]]},template:function(e,n){1&e&&(t.GkF(0,0),t.TgZ(1,"kendo-taglist",1),t.NdJ("removeTag",function(a){return n.handleRemoveTag(a)}),t.TgZ(2,"kendo-searchbar",2,3),t.NdJ("onNavigate",function(a){return n.handleNavigate(a)})("valueChange",function(a){return n.handleFilter(a)})("onBlur",function(){return n.onSearchBarBlur()})("onFocus",function(){return n.onSearchBarFocus()}),t.qZA()(),t.YNc(4,t5,2,3,"span",4),t.YNc(5,n5,1,0,"span",5),t.YNc(6,m5,6,20,"ng-template",null,6,t.W1O),t.YNc(8,g5,1,0,"ng-template",7),t.GkF(9,null,8)),2&e&&(t.xp6(1),t.Q6J("size",n.size)("rounded",n.rounded)("fillMode",n.fillMode)("id",n.tagListId)("tags",n.tags)("textField",n.textField)("valueField",n.valueField)("focused",n.focusedTagIndex)("disabled",n.disabled)("template",n.tagTemplate)("groupTemplate",n.groupTagTemplate)("tagPrefix",n.tagPrefix)("disabledIndices",n.disabledIndices),t.xp6(1),t.Q6J("id",n.focusableId)("role","combobox")("tagListId",n.tagListId)("listId",n.listBoxId)("isLoading",n.loading)("isFilterable",n.filterable)("activeDescendant",n.activeDescendant)("userInput",n.text)("disabled",n.disabled)("readonly",n.readonly)("tabIndex",n.tabIndex)("popupOpen",n.isOpen)("placeholder",n.placeholder),t.xp6(2),t.Q6J("ngIf",!n.loading&&!n.readonly&&n.clearButton&&((null==n.tags?null:n.tags.length)||(null==n.text?null:n.text.length))),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(3),t.Q6J("ngIf",n.isOpen))},dependencies:[yT,ac,qh,Fr,lc,X.O5,oa,X.mk,vb],encapsulation:2}),i})(),Hd=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),i})(),jm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,H.u5,H.UX,xa,Ci,Hd,pn],X.ez,H.u5,H.UX,xa,Ci,Hd,pn]}),i})(),Sz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[jm,OU],Hd]}),i})(),wz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[jm],Hd]}),i})(),kz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:nl,useValue:Sf}],imports:[[jm],Hd]}),i})(),Tz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[jm],Hd]}),i})(),yz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:nl,useValue:Sf}],imports:[[jm],Hd]}),i})(),Dz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[wz,kz,Tz,yz,Sz]}),i})();const Az=["textarea"],Oz=["srcInput"],Iz=["hrefInput"];function Mz(i,r){if(1&i&&(t.ynx(0),t._UZ(1,"div",5),t.TgZ(2,"div",7),t._UZ(3,"input",17),t.TgZ(4,"label",18),t._uU(5),t.qZA()(),t.BQk()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.textForWithPrefix("OpenInNewWindow"))}}const bo=["element"];function Rz(i,r){if(1&i&&(t.TgZ(0,"span",12),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function Nz(i,r){if(1&i&&(t.TgZ(0,"span",13),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function Fz(i,r){if(1&i&&(t.TgZ(0,"span",14),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function Lz(i,r){if(1&i&&(t.TgZ(0,"span",15),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function Pz(i,r){if(1&i&&(t.TgZ(0,"span",16),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function Uz(i,r){if(1&i&&(t.TgZ(0,"span",17),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function Bz(i,r){if(1&i&&(t.TgZ(0,"span",18),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.text," ")}}function Gz(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.text)}}function zz(i,r){1&i&&(t.ynx(0,3),t.YNc(1,Rz,2,1,"span",4),t.YNc(2,Nz,2,1,"span",5),t.YNc(3,Fz,2,1,"span",6),t.YNc(4,Lz,2,1,"span",7),t.YNc(5,Pz,2,1,"span",8),t.YNc(6,Uz,2,1,"span",9),t.YNc(7,Bz,2,1,"span",10),t.YNc(8,Gz,2,1,"span",11),t.BQk()),2&i&&(t.Q6J("ngSwitch",r.$implicit.tag),t.xp6(1),t.Q6J("ngSwitchCase","h1"),t.xp6(1),t.Q6J("ngSwitchCase","h2"),t.xp6(1),t.Q6J("ngSwitchCase","h3"),t.xp6(1),t.Q6J("ngSwitchCase","h4"),t.xp6(1),t.Q6J("ngSwitchCase","h5"),t.xp6(1),t.Q6J("ngSwitchCase","h6"),t.xp6(1),t.Q6J("ngSwitchCase","p"))}const pI=["formatDropDownList"],Qm=["toolbarTemplate"],Xm=["popupTemplate"],Zz=["formatButton"],Hz=["kendoEditorFormat",""];function Vz(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"kendo-editor-format-dropdownlist",2,3),t.NdJ("valueChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.value=s)})("valueChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onValueChange(s))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("defaultItem",e.defaultItem)("data",e.data)("value",e.value)("itemDisabled",e.itemDisabled)("title",e.title)("disabled",e.disabled)("tabindex",e.tabindex)}}function Jz(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",4,5),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.openDialog())}),t._uU(2),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("tabindex",e.tabindex)("icon","apply-format")("disabled",e.disabled)("tabindex",e.tabindex),t.uIk("title",e.title),t.xp6(2),t.hij(" ",e.title," ")}}const qz=["dialogsContainer"],Yz=["content"],mI=["defaultToolbar"];function Kz(i,r){if(1&i&&(t.TgZ(0,"kendo-toolbar",4,5)(2,"kendo-toolbar-buttongroup"),t._UZ(3,"kendo-toolbar-button",6)(4,"kendo-toolbar-button",7)(5,"kendo-toolbar-button",8),t.qZA(),t._UZ(6,"kendo-toolbar-dropdownlist",9),t.TgZ(7,"kendo-toolbar-buttongroup"),t._UZ(8,"kendo-toolbar-button",10)(9,"kendo-toolbar-button",11)(10,"kendo-toolbar-button",12)(11,"kendo-toolbar-button",13),t.qZA(),t.TgZ(12,"kendo-toolbar-buttongroup"),t._UZ(13,"kendo-toolbar-button",14)(14,"kendo-toolbar-button",15)(15,"kendo-toolbar-button",16)(16,"kendo-toolbar-button",17),t.qZA(),t.TgZ(17,"kendo-toolbar-buttongroup"),t._UZ(18,"kendo-toolbar-button",18)(19,"kendo-toolbar-button",19),t.qZA(),t._UZ(20,"kendo-toolbar-button",20),t.qZA()),2&i){const e=t.oxw();t.Q6J("overflow",!0)("tabindex",e.readonly?-1:0)}}function $z(i,r){if(1&i&&t._UZ(0,"div",21,22),2&i){const e=t.oxw();t.uIk("dir",e.direction)}}function Wz(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",21)(1,"iframe",23,22),t.NdJ("load",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.iframeOnLoad())}),t.qZA()()}}const jz=[[["kendo-toolbar"]]],Qz=["kendo-toolbar"],Xz=function(i){return{"font-family":i}};function e7(i,r){if(1&i&&(t.TgZ(0,"span",3),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("ngStyle",t.VKq(2,Xz,e.fontName)),t.xp6(1),t.hij(" ",e.text," ")}}const t7=["fontFamilyDropDownList"],l7=["fontFamilyButton"],c7=["kendoEditorFontFamily",""];function d7(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"kendo-editor-fontfamily-dropdownlist",2,3),t.NdJ("valueChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.value=s)})("valueChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onValueChange(s))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("defaultItem",e.defaultItem)("data",e.data)("value",e.value)("itemDisabled",e.itemDisabled)("title",e.title)("disabled",e.disabled)("tabindex",e.tabindex)}}function u7(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",4,5),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.openDialog())}),t._uU(2),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("icon","font-family")("disabled",e.disabled)("tabindex",e.tabindex),t.uIk("title",e.title),t.xp6(2),t.hij(" ",e.title," ")}}const x7={name:"@progress/kendo-angular-editor",productName:"Kendo UI for Angular",productCodes:["KENDOUIANGULAR","KENDOUICOMPLETE"],publishDate:1669715417,version:"",licensingDocsUrl:"https://www.telerik.com/kendo-angular-ui/my-license/?utm_medium=product&utm_source=kendoangular&utm_campaign=kendo-ui-angular-purchase-license-keys-warning"},S7=(i,r)=>{const e={};for(let n in i)n&&null!==i[n]&&n!==r&&(e[n]=i[n]);return e},E7=i=>{const r={};let n,e=i.attributes;for(let s=0;s<e.length;s++)n=e[s],r[n.name]=n.value;return r},k7=(i=[])=>Object.assign({},i.reduce((r,e)=>Object.assign(Object.assign({},r),{[e]:{default:null}}),{})),Vd=i=>r=>r.type.name===i,T7=(Vd("table"),Vd("table_body"),Vd("table_head"),Vd("table_foot"),Vd("table_row"),Vd("table_cell"),Vd("table_header"),i=>({content:"block*",group:"block",attrs:Object.assign({},Object.assign({},k7(["class","id","style"]))),parseDOM:[{tag:i,getAttrs:E7}],toDOM:r=>((i,r)=>{for(let e in i)if(e&&null!==i[e]&&undefined!==e)return!0;return!1})(r.attrs)?[i,S7(r.attrs),0]:[i,0]})),y7=["article","main","nav","header","footer","aside","section"].reduce((i,r)=>Object.assign(i,{[r]:T7(r)}),{}),D7=Qr,A7=Object.assign(_d,y7),O7=new np({marks:D7,nodes:A7}),kb=(i,r)=>Xc(vE)(i,r),M7=Object.assign({},{bold:i=>pr(hs,Object.assign(Object.assign({},rt),{applyToWord:i})),cleanFormatting:i=>D0(i),createLink:i=>pr(k0,{mark:"link",attrs:i.value,applyToWord:i.applyToWord}),fontFamily:i=>pr($u,{style:"font-family",value:i.value,applyToWord:i.applyToWord}),fontSize:i=>pr($u,{style:"font-size",value:i.value,applyToWord:i.applyToWord}),insertFile:i=>pr(k0,{mark:"link",attrs:i,applyToWord:i.applyToWord}),insertText:i=>(i=>(r,e)=>{e(r.tr.insertText(i.text,i.from,i.to))})(i),italic:i=>pr(hs,Object.assign(Object.assign({},Pt),{applyToWord:i})),strikethrough:i=>pr(hs,Object.assign(Object.assign({},_r),{applyToWord:i})),subscript:i=>pr(hs,Object.assign(Object.assign({},si),{applyToWord:i})),superscript:i=>pr(hs,Object.assign(Object.assign({},Or),{applyToWord:i})),underline:i=>pr(hs,Object.assign(Object.assign({},Mn),{applyToWord:i})),unlink:()=>w0(Wl),foreColor:i=>pr($u,{style:"color",value:i.value,applyToWord:i.applyToWord}),backColor:i=>pr($u,{style:"background-color",value:i.value,applyToWord:i.applyToWord}),selectAll:()=>(i,r)=>ju(i,r)},{alignCenter:()=>(i,r)=>Zo(i,Rp)?kb(i,r):Xc(Rp)(i,r),alignJustify:()=>(i,r)=>Zo(i,Np)?kb(i,r):Xc(Np)(i,r),alignLeft:()=>(i,r)=>Zo(i,Ip)?kb(i,r):Xc(Ip)(i,r),alignRight:()=>(i,r)=>Zo(i,Mp)?kb(i,r):Xc(Mp)(i,r),format:i=>((i,r)=>(e,n)=>{const s=fs(e),a=e.schema.nodes,d=e.tr;d.setMeta("commandName",undefined),d.setMeta("args",{value:i}),s.forEach(p=>{if(p.type.isTextblock)if("p"===i){const S=(0,Cp._T)(p.attrs,["level"]);Dl(d,p,a.paragraph,S)}else if(/^h[1-6]$/i.test(i)){const g=parseInt(i.substr(1),10);Dl(d,p,a.heading,Object.assign(Object.assign({},p.attrs),{level:g}))}else if("blockquote"===i){const S=(0,Cp._T)(p.attrs,["level"]);Dl(d,p,a.blockquote,S)}});const f=d.docChanged;return f&&n(d.scrollIntoView()),f})(i.tag),getHTML:()=>bp,indent:()=>iE,insertImage:i=>(i=>(r,e)=>{const{image:n}=r.schema.nodes,a=n.createAndFill(i);_0(a)(r,d=>e(d.setMeta("commandName","insertImage").setMeta("args",i)))})(i),insertOrderedList:()=>Y0,insertUnorderedList:()=>gE,outdent:()=>rE,redo:()=>vd,setHTML:({content:i,parseOptions:r})=>((i,r="setHTML",e={preserveWhitespace:"full"})=>(n,s)=>s(n.tr.setSelection(new Vi(n.doc)).replaceSelectionWith(vp(i,n.schema,e)).setMeta("commandName",r)))(i,"setHTML",r),undo:()=>$l,blockquote:()=>Ap},{insertTable:i=>(i=>(r,e)=>{const n=((i,r,e)=>{const{table:n,table_row:s,table_cell:a}=i,d=[];let f;for(let p=0;p<r+1;p++){f=[];for(let g=0;g<e+1;g++)f.push(a.createAndFill());d.push(s.createAndFill(void 0,f))}return n.createAndFill(void 0,d)})(r.schema.nodes,i.rows,i.cols);n&&_0(n,!0)(r,e)})(i),addColumnBefore:()=>r2,addColumnAfter:()=>s2,addRowBefore:()=>Xy,addRowAfter:()=>e2,deleteRow:()=>x,deleteColumn:()=>o2,mergeCells:()=>D,splitCell:()=>A,deleteTable:()=>j}),RT={alignCenter:{selected:!1,disabled:!1},alignJustify:{selected:!1,disabled:!1},alignLeft:{selected:!1,disabled:!1},alignRight:{selected:!1,disabled:!1},bold:{selected:!1,disabled:!1},italic:{selected:!1,disabled:!1},underline:{selected:!1,disabled:!1},strikethrough:{selected:!1,disabled:!1},subscript:{selected:!1,disabled:!1},superscript:{selected:!1,disabled:!1},format:{selected:{text:"Format",tag:null},disabled:!1},style:{selected:{marks:[],hasNodesWithoutMarks:!1},disabled:!1},cleanFormatting:{selected:!1,disabled:!0},blockquote:{selected:!1,disabled:!1},indent:{selected:!1,disabled:!1},outdent:{selected:!1,disabled:!1},insertOrderedList:{selected:!1,disabled:!1},insertUnorderedList:{selected:!1,disabled:!1},unlink:{selected:!1,disabled:!0},redo:{selected:!1,disabled:!0},undo:{selected:!1,disabled:!0},print:{selected:!1,disabled:!1},createLink:{selected:!1,disabled:!0},insertFile:{selected:!1,disabled:!0},insertImage:{selected:!1,disabled:!1},viewSource:{selected:!1,disabled:!1},insertTable:{selected:!1,disabled:!1},addColumnBefore:{selected:!1,disabled:!0},addColumnAfter:{selected:!1,disabled:!0},addRowBefore:{selected:!1,disabled:!0},addRowAfter:{selected:!1,disabled:!0},deleteRow:{selected:!1,disabled:!0},deleteColumn:{selected:!1,disabled:!0},mergeCells:{selected:!1,disabled:!0},splitCell:{selected:!1,disabled:!0},deleteTable:{selected:!1,disabled:!0},selectAll:{selected:!1,disabled:!1}},NT={alignCenter:{selected:!1,disabled:!0},alignJustify:{selected:!1,disabled:!0},alignLeft:{selected:!1,disabled:!0},alignRight:{selected:!1,disabled:!0},bold:{selected:!1,disabled:!0},italic:{selected:!1,disabled:!0},underline:{selected:!1,disabled:!0},strikethrough:{selected:!1,disabled:!0},subscript:{selected:!1,disabled:!0},superscript:{selected:!1,disabled:!0},format:{selected:{text:"Format",tag:null},disabled:!0},style:{selected:{marks:[],hasNodesWithoutMarks:!1},disabled:!0},cleanFormatting:{selected:!1,disabled:!0},blockquote:{selected:!1,disabled:!0},indent:{selected:!1,disabled:!0},outdent:{selected:!1,disabled:!0},insertOrderedList:{selected:!1,disabled:!0},insertUnorderedList:{selected:!1,disabled:!0},unlink:{selected:!1,disabled:!0},redo:{selected:!1,disabled:!0},undo:{selected:!1,disabled:!0},print:{selected:!1,disabled:!0},createLink:{selected:!1,disabled:!0},insertFile:{selected:!1,disabled:!0},insertImage:{selected:!1,disabled:!0},viewSource:{selected:!1,disabled:!0},insertTable:{selected:!1,disabled:!0},addColumnBefore:{selected:!1,disabled:!0},addColumnAfter:{selected:!1,disabled:!0},addRowBefore:{selected:!1,disabled:!0},addRowAfter:{selected:!1,disabled:!0},deleteRow:{selected:!1,disabled:!0},deleteColumn:{selected:!1,disabled:!0},mergeCells:{selected:!1,disabled:!0},splitCell:{selected:!1,disabled:!0},deleteTable:{selected:!1,disabled:!0},selectAll:{selected:!1,disabled:!0}};function eg(i){let r=i.offsetWidth;const e=getComputedStyle(i);return r+=parseFloat(e.marginLeft)||0+parseFloat(e.marginRight)||0,r}const vI=i=>null==i,Yh=i=>!vI(i),bI=i=>vI(i)?"":i.toString(),P7=i=>i[0],U7=i=>i[i.length-1],xI=i=>r=>r.split(i),B7=i=>i.trim(),SI=i=>r=>e=>r?i(e):e;let Ft=(()=>{class i extends Ge{constructor(e,n,s){super(e,n,s)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Et),t.LFG(pa,8),t.LFG(yo,8))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),EI=(()=>{class i extends qa{constructor(e,n){super(e),this.dialog=e,this.localization=n,this.data=""}ngAfterViewInit(){Promise.resolve(null).then(()=>{this.textarea.nativeElement.focus()})}onCancelAction(){this.dialog.close()}onConfirmAction(){this.editor.exec("setHTML",this.getData()),this.dialog.close(),this.editor.view.focus()}getData(){return this.textarea.nativeElement.value}setData(){this.data=this.indent(this.editor.getSource())}textFor(e){return this.localization.get(e)}indent(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ta),t.Y36(Ft))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&t.Gf(Az,7),2&e){let s;t.iGM(s=t.CRH())&&(n.textarea=s.first)}},inputs:{editor:"editor"},features:[t.qOj],decls:9,vars:5,consts:[[3,"close"],[1,"k-textarea","k-editor-textarea",3,"value"],["textarea",""],["kendoButton","",3,"click"],["kendoButton","",3,"primary","click"]],template:function(e,n){1&e&&(t.TgZ(0,"kendo-dialog-titlebar",0),t.NdJ("close",function(){return n.onCancelAction()}),t._uU(1),t.qZA(),t._UZ(2,"textarea",1,2),t.TgZ(4,"kendo-dialog-actions")(5,"button",3),t.NdJ("click",function(){return n.onCancelAction()}),t._uU(6),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return n.onConfirmAction()}),t._uU(8),t.qZA()()),2&e&&(t.xp6(1),t.hij(" ",n.textFor("viewSource")," "),t.xp6(1),t.Q6J("value",n.data),t.xp6(4),t.Oqu(n.textFor("dialogCancel")),t.xp6(1),t.Q6J("primary",!0),t.xp6(1),t.Oqu(n.textFor("dialogUpdate")))},dependencies:[_s,Gs,Nn],styles:[".k-editor-textarea {\n                height: 100%;\n            }"]}),i})(),wI=(()=>{class i extends qa{constructor(e,n){super(e),this.dialog=e,this.localization=n,this.src=new H.NI("",H.kI.required),this.alt=new H.NI(""),this.width=new H.NI("",H.kI.min(1)),this.height=new H.NI("",H.kI.min(1)),this.data={alt:"",height:"",src:"",width:""},this.imageData=new H.cw({alt:this.alt,height:this.height,src:this.src,width:this.width})}ngOnInit(){this.srcInputId=`k-${On()}`,this.altTextInputId=`k-${On()}`,this.widthInputId=`k-${On()}`,this.heightInputId=`k-${On()}`}ngAfterViewInit(){Promise.resolve(null).then(()=>{this.srcInput.nativeElement.focus()})}onCancelAction(){this.dialog.close()}onConfirmAction(){this.src.value&&(this.editor.exec("insertImage",this.getData()),this.dialog.close(),this.editor.view.focus())}setData(e){const n=(i=>{if(i.selection instanceof vt)return i.selection.node})(e);n&&(this.src.patchValue(n.attrs.src),this.alt.patchValue(n.attrs.alt),this.width.patchValue(n.attrs.width),this.height.patchValue(n.attrs.height))}textFor(e){return this.localization.get(e)}getData(){return{alt:this.alt.value,height:this.normalizeDimension(this.height.value),src:this.src.value,width:this.normalizeDimension(this.width.value)}}normalizeDimension(e){return Number.isNaN(parseInt(e,10))||parseInt(e,10)<=0?"":bI(parseInt(e,10))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ta),t.Y36(Ft))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&t.Gf(Oz,7,t.SBq),2&e){let s;t.iGM(s=t.CRH())&&(n.srcInput=s.first)}},inputs:{editor:"editor"},features:[t.qOj],decls:31,vars:21,consts:[[3,"close"],[1,"k-editor-dialog"],[1,"k-editor-dialog","k-popup-edit-form","k-window-content","k-content"],[1,"k-edit-form-container","k-window-content"],[1,"k-edit-label"],[3,"for"],[1,"k-edit-field"],["type","text",1,"k-textbox","k-input","k-rounded-md",3,"id","formControl"],["srcInput",""],["kendoButton","",3,"click"],["kendoButton","",3,"disabled","primary","click"]],template:function(e,n){1&e&&(t.TgZ(0,"kendo-dialog-titlebar",0),t.NdJ("close",function(){return n.onCancelAction()}),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"label",5),t._uU(7),t.qZA()(),t.TgZ(8,"div",6),t._UZ(9,"input",7,8),t.qZA(),t.TgZ(11,"div",4)(12,"label",5),t._uU(13),t.qZA()(),t.TgZ(14,"div",6),t._UZ(15,"input",7),t.qZA(),t.TgZ(16,"div",4)(17,"label",5),t._uU(18),t.qZA()(),t.TgZ(19,"div",6),t._UZ(20,"input",7),t.qZA(),t.TgZ(21,"div",4)(22,"label",5),t._uU(23),t.qZA()(),t.TgZ(24,"div",6),t._UZ(25,"input",7),t.qZA()()()(),t.TgZ(26,"kendo-dialog-actions")(27,"button",9),t.NdJ("click",function(){return n.onCancelAction()}),t._uU(28),t.qZA(),t.TgZ(29,"button",10),t.NdJ("click",function(){return n.onConfirmAction()}),t._uU(30),t.qZA()()),2&e&&(t.xp6(1),t.hij(" ",n.textFor("insertImage")," "),t.xp6(5),t.Q6J("for",n.srcInputId),t.xp6(1),t.Oqu(n.textFor("imageWebAddress")),t.xp6(2),t.Q6J("id",n.srcInputId)("formControl",n.src),t.xp6(3),t.Q6J("for",n.altTextInputId),t.xp6(1),t.Oqu(n.textFor("imageAltText")),t.xp6(2),t.Q6J("id",n.altTextInputId)("formControl",n.alt),t.xp6(2),t.Q6J("for",n.widthInputId),t.xp6(1),t.Oqu(n.textFor("imageWidth")),t.xp6(2),t.Q6J("id",n.widthInputId)("formControl",n.width),t.xp6(2),t.Q6J("for",n.heightInputId),t.xp6(1),t.Oqu(n.textFor("imageHeight")),t.xp6(2),t.Q6J("id",n.heightInputId)("formControl",n.height),t.xp6(3),t.Oqu(n.textFor("dialogCancel")),t.xp6(1),t.Q6J("disabled",n.imageData.invalid)("primary",!0),t.xp6(1),t.Oqu(n.textFor("dialogInsert")))},dependencies:[_s,Gs,H.Fj,H.JJ,H.oH,Nn],encapsulation:2}),i})(),FT=(()=>{class i extends qa{constructor(e,n){super(e),this.dialog=e,this.localization=n,this.linkForm=new H.cw({href:new H.NI("",H.kI.required),text:new H.NI({value:"",disabled:!0},H.kI.required),title:new H.NI("")})}ngAfterViewInit(){Promise.resolve(null).then(()=>{this.hrefInput.nativeElement.focus()})}onCancelAction(){this.dialog.close()}onConfirmAction(){const e=this.getData();this.editor.exec(this.command,e),this.dialog.close(),this.editor.view.focus()}get titleText(){return this.localization.get(this.command)}setData(e,n){"createLink"===this.command&&this.linkForm.addControl("target",new H.NI);const s=((i,r)=>{const e=Ku(i,r),n=e.filter(s=>Boolean(s));return e.length===n.length?e[0]:void 0})(e,e.schema.marks.link);if(s)this.linkForm.reset({href:s.attrs.href,title:s.attrs.title,target:Yh(s.attrs.target),text:this.setLinkText(e)});else if(e.selection.empty){const a=n.applyToWord?Yu(e,()=>{},n).state:e;a.selection.empty||this.linkForm.patchValue({text:yl(a)})}else this.linkForm.patchValue({text:yl(e)})}textForWithPrefix(e){return this.textFor(("createLink"===this.command?"link":"file")+e)}textFor(e){return this.localization.get(e)}setLinkText(e){const n=e.selection;if(n.empty&&n.$cursor){const s=n.$cursor,a=s.index();return s.parent.child(a).text}return yl(e)}getData(){let e=this.linkForm.value;return Yh(this.linkForm.controls.target)&&(e.target=e.target?"_blank":null),e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ta),t.Y36(Ft))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&t.Gf(Iz,7,t.SBq),2&e){let s;t.iGM(s=t.CRH())&&(n.hrefInput=s.first)}},inputs:{editor:"editor",command:"command"},features:[t.qOj],decls:30,vars:10,consts:[[3,"close"],[1,"k-editor-dialog"],[1,"k-editor-dialog","k-popup-edit-form","k-window-content","k-content"],[1,"k-edit-form-container","k-window-content"],["novalidate","",3,"formGroup"],[1,"k-edit-label"],[3,"click"],[1,"k-edit-field"],["formControlName","href","type","text",1,"k-textbox","k-input","k-rounded-md"],["hrefInput",""],["formControlName","text","type","text",1,"k-textbox","k-input","k-rounded-md"],["textInput",""],["formControlName","title","type","text",1,"k-textbox","k-input","k-rounded-md"],["titleInput",""],[4,"ngIf"],["kendoButton","",3,"click"],["kendoButton","",3,"disabled","primary","click"],["type","checkbox","id","k-target-blank","kendoCheckBox","","formControlName","target"],["for","k-target-blank",1,"k-checkbox-label"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"kendo-dialog-titlebar",0),t.NdJ("close",function(){return n.onCancelAction()}),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"form",4)(6,"div",5)(7,"label",6),t.NdJ("click",function(){t.CHM(s);const d=t.MAs(11);return t.KtG(d.focus())}),t._uU(8),t.qZA()(),t.TgZ(9,"div",7),t._UZ(10,"input",8,9),t.qZA(),t.TgZ(12,"div",5)(13,"label",6),t.NdJ("click",function(){t.CHM(s);const d=t.MAs(17);return t.KtG(d.focus())}),t._uU(14),t.qZA()(),t.TgZ(15,"div",7),t._UZ(16,"input",10,11),t.qZA(),t.TgZ(18,"div",5)(19,"label",6),t.NdJ("click",function(){t.CHM(s);const d=t.MAs(23);return t.KtG(d.focus())}),t._uU(20),t.qZA()(),t.TgZ(21,"div",7),t._UZ(22,"input",12,13),t.qZA(),t.YNc(24,Mz,6,1,"ng-container",14),t.qZA()()()(),t.TgZ(25,"kendo-dialog-actions")(26,"button",15),t.NdJ("click",function(){return n.onCancelAction()}),t._uU(27),t.qZA(),t.TgZ(28,"button",16),t.NdJ("click",function(){return n.onConfirmAction()}),t._uU(29),t.qZA()()}2&e&&(t.xp6(1),t.hij(" ",n.titleText," "),t.xp6(4),t.Q6J("formGroup",n.linkForm),t.xp6(3),t.Oqu(n.textForWithPrefix("WebAddress")),t.xp6(6),t.Oqu(n.textForWithPrefix("Text")),t.xp6(6),t.Oqu(n.textForWithPrefix("Title")),t.xp6(4),t.Q6J("ngIf","createLink"===n.command),t.xp6(3),t.Oqu(n.textFor("dialogCancel")),t.xp6(1),t.Q6J("disabled",n.linkForm.invalid)("primary",!0),t.xp6(1),t.hij(" ",n.textFor("dialogInsert")," "))},dependencies:[_s,Gs,H._Y,H.JL,H.sg,H.Fj,H.JJ,H.u,X.O5,H.Wl,rP,Nn],encapsulation:2}),i})();let Xt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),sn=(()=>{class i{constructor(){this.needsCheck=new Un.x}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})();class q7 extends class J7{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}{constructor(r,e,n){super(),this.cleanedHtml=r,this.originalHtml=e,this.originalEvent=n}}let Tb=(()=>{class i{constructor(e,n){this.hostEl=e,this.zone=n,this.preventDefault=s=>{s.preventDefault()}}get hostElement(){return this.hostEl.nativeElement}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.hostElement.addEventListener("pointerdown",this.preventDefault)})}ngOnDestroy(){this.hostElement.removeEventListener("pointerdown",this.preventDefault)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.R0b))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoEditorDropDownTool",""]]}),i})(),yb=(()=>{class i{constructor(){this.valueChange=new t.vpe}onValueChange(e){this.valueChange.emit(e)}focus(){this.dropDownList.focus()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-editor-format-dropdownlist"]],viewQuery:function(e,n){if(1&e&&(t.Gf(bo,7),t.Gf(bo,7,cc)),2&e){let s;t.iGM(s=t.CRH())&&(n.element=s.first),t.iGM(s=t.CRH())&&(n.dropDownList=s.first)}},inputs:{data:"data",value:"value",defaultItem:"defaultItem",itemDisabled:"itemDisabled",title:"title",disabled:"disabled",tabindex:"tabindex"},outputs:{valueChange:"valueChange"},decls:3,vars:10,consts:[["kendoEditorDropDownTool","",3,"defaultItem","textField","valueField","data","value","valuePrimitive","itemDisabled","disabled","tabindex","valueChange"],["element",""],["kendoDropDownListItemTemplate",""],[3,"ngSwitch"],["style","display: block; font-size: 2em; margin-left: 0; font-weight: bold;",4,"ngSwitchCase"],["style","display: block; font-size: 1.5em; margin-left: 0; font-weight: bold;",4,"ngSwitchCase"],["style","display: block; font-size: 1.17em; margin-left: 0; font-weight: bold;",4,"ngSwitchCase"],["style","display: block; font-size: 1em; margin-left: 0; font-weight: bold;",4,"ngSwitchCase"],["style","display: block; font-size: .83em; margin-left: 0; font-weight: bold;",4,"ngSwitchCase"],["style","display: block; font-size: .67em; margin-left: 0; font-weight: bold;",4,"ngSwitchCase"],["style","display: block; margin-left: 0;",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[2,"display","block","font-size","2em","margin-left","0","font-weight","bold"],[2,"display","block","font-size","1.5em","margin-left","0","font-weight","bold"],[2,"display","block","font-size","1.17em","margin-left","0","font-weight","bold"],[2,"display","block","font-size","1em","margin-left","0","font-weight","bold"],[2,"display","block","font-size",".83em","margin-left","0","font-weight","bold"],[2,"display","block","font-size",".67em","margin-left","0","font-weight","bold"],[2,"display","block","margin-left","0"]],template:function(e,n){1&e&&(t.TgZ(0,"kendo-dropdownlist",0,1),t.NdJ("valueChange",function(a){return n.value=a})("valueChange",function(a){return n.onValueChange(a)}),t.YNc(2,zz,9,8,"ng-template",2),t.qZA()),2&e&&(t.Q6J("defaultItem",n.defaultItem)("textField","text")("valueField","tag")("data",n.data)("value",n.value)("valuePrimitive",!0)("itemDisabled",n.itemDisabled)("disabled",n.disabled)("tabindex",n.tabindex),t.uIk("title",n.title))},dependencies:[cc,Tb,Ud,X.RF,X.n9,X.ED],styles:[".k-dropdownlist[_ngcontent-%COMP%] {\n            width: 13em;\n        }"]}),i})(),kI=(()=>{class i extends qa{constructor(e,n){super(e),this.dialog=e,this.localization=n,this.data=[]}ngAfterViewInit(){Promise.resolve(null).then(()=>{this.formatDropDownList.dropDownList.focus()})}onCancelAction(){this.dialog.close()}onConfirmAction(){this.value&&this.editor.exec("format",{tag:this.value}),this.dialog.close()}setData(e){this.editor=e.editor,this.data=e.data,this.defaultItem=e.defaultItem,this.value=e.value,this.itemDisabled=e.itemDisabled}textFor(e){return this.localization.get(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ta),t.Y36(Ft))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&t.Gf(pI,7,yb),2&e){let s;t.iGM(s=t.CRH())&&(n.formatDropDownList=s.first)}},inputs:{editor:"editor"},features:[t.qOj],decls:12,vars:8,consts:[[3,"close"],[1,"k-editor-dialog"],[1,"k-editor-dialog","k-popup-edit-form","k-window-content","k-content"],[1,"k-edit-form-container","k-window-content",2,"text-align","center"],[3,"defaultItem","data","value","itemDisabled","valueChange"],["formatDropDownList",""],["kendoButton","",3,"click"],["kendoButton","",3,"primary","click"]],template:function(e,n){1&e&&(t.TgZ(0,"kendo-dialog-titlebar",0),t.NdJ("close",function(){return n.onCancelAction()}),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"kendo-editor-format-dropdownlist",4,5),t.NdJ("valueChange",function(a){return n.value=a}),t.qZA()()()(),t.TgZ(7,"kendo-dialog-actions")(8,"button",6),t.NdJ("click",function(){return n.onCancelAction()}),t._uU(9),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return n.onConfirmAction()}),t._uU(11),t.qZA()()),2&e&&(t.xp6(1),t.hij(" ",n.textFor("format")," "),t.xp6(4),t.Q6J("defaultItem",n.defaultItem)("data",n.data)("value",n.value)("itemDisabled",n.itemDisabled),t.xp6(4),t.Oqu(n.textFor("dialogCancel")),t.xp6(1),t.Q6J("primary",!0),t.xp6(1),t.Oqu(n.textFor("dialogApply")))},dependencies:[_s,yb,Gs,Nn],encapsulation:2}),i})(),Db=(()=>{class i extends Zn{constructor(e,n,s,a){super(),this.dialogService=e,this.localization=n,this.toolsService=a,this.disabled=!1,this.tabindex=-1,this.valueChange=new t.vpe,this._data=[{text:"Paragraph",tag:"p"},{text:"Heading 1",tag:"h1"},{text:"Heading 2",tag:"h2"},{text:"Heading 3",tag:"h3"},{text:"Heading 4",tag:"h4"},{text:"Heading 5",tag:"h5"},{text:"Heading 6",tag:"h6"}],this.editor=s.editor}set data(e){this._data=e||this._data}get data(){return this._data}ngOnInit(){this.itemDisabled=e=>!(this.overflows||!this.formatDropDownList||this.formatDropDownList.dropDownList.isOpen)||null===e.dataItem.tag,setTimeout(()=>{this.defaultItem={text:this.title,tag:null},this.toolsService.needsCheck.next()}),this.subs=this.editor.stateChange.subscribe(({format:e})=>{const n=this.data.findIndex(s=>s.tag===e.selected.tag);this.value=-1!==n?e.selected.tag:null,this.disabled=e.disabled})}onValueChange(e){Yh(e)&&(this.editor.exec("format",{tag:e}),this.editor.view.focus(),this.valueChange.emit(this.data.find(n=>n.tag===e)))}ngOnDestroy(){this.subs&&this.subs.unsubscribe()}get outerWidth(){const e=this.formatDropDownList.element;if(e)return eg(e.nativeElement)}get title(){return this.localization.get("format")}openDialog(){const e={appendTo:this.editor.dialogContainer,content:kI};this.editor.toolbar.toggle(!1),this.dialogService.open(e).content.instance.setData({editor:this.editor,data:this.data,defaultItem:this.defaultItem,value:this.value,itemDisabled:this.itemDisabled})}canFocus(){return!this.disabled}focus(){this.tabindex=0,this.overflows?this.formatButton.nativeElement.focus():this.formatDropDownList.focus()}handleKey(){return this.tabindex=-1,!1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(xd),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-toolbar-dropdownlist","kendoEditorFormat",""]],viewQuery:function(e,n){if(1&e&&(t.Gf(Qm,7),t.Gf(Xm,7),t.Gf(pI,5),t.Gf(Zz,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.toolbarTemplate=s.first),t.iGM(s=t.CRH())&&(n.popupTemplate=s.first),t.iGM(s=t.CRH())&&(n.formatDropDownList=s.first),t.iGM(s=t.CRH())&&(n.formatButton=s.first)}},inputs:{data:"data"},outputs:{valueChange:"valueChange"},features:[t._Bn([{provide:Zn,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj],attrs:Hz,decls:4,vars:0,consts:[["toolbarTemplate",""],["popupTemplate",""],[3,"defaultItem","data","value","itemDisabled","title","disabled","tabindex","valueChange"],["formatDropDownList",""],["type","button","kendoButton","",1,"k-overflow-button",3,"tabindex","icon","disabled","click"],["formatButton",""]],template:function(e,n){1&e&&(t.YNc(0,Vz,2,7,"ng-template",null,0,t.W1O),t.YNc(2,Jz,3,6,"ng-template",null,1,t.W1O))},dependencies:[yb,Nn],encapsulation:2}),i})(),Ab=(()=>{class i extends ws{}return i.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(i)))(n||i)}}(),i.\u0275dir=t.lG2({type:i,selectors:[["","kendoEditorMessages",""]],inputs:{alignCenter:"alignCenter",alignJustify:"alignJustify",alignLeft:"alignLeft",alignRight:"alignRight",backColor:"backColor",blockquote:"blockquote",bold:"bold",cleanFormatting:"cleanFormatting",createLink:"createLink",fontFamily:"fontFamily",fontSize:"fontSize",foreColor:"foreColor",format:"format",indent:"indent",insertFile:"insertFile",insertImage:"insertImage",insertOrderedList:"insertOrderedList",insertUnorderedList:"insertUnorderedList",italic:"italic",outdent:"outdent",print:"print",redo:"redo",selectAll:"selectAll",strikethrough:"strikethrough",subscript:"subscript",superscript:"superscript",underline:"underline",undo:"undo",unlink:"unlink",viewSource:"viewSource",insertTable:"insertTable",addColumnBefore:"addColumnBefore",addColumnAfter:"addColumnAfter",addRowBefore:"addRowBefore",addRowAfter:"addRowAfter",deleteColumn:"deleteColumn",deleteRow:"deleteRow",deleteTable:"deleteTable",mergeCells:"mergeCells",splitCell:"splitCell",dialogApply:"dialogApply",dialogCancel:"dialogCancel",dialogInsert:"dialogInsert",dialogUpdate:"dialogUpdate",fileText:"fileText",fileTitle:"fileTitle",fileWebAddress:"fileWebAddress",imageAltText:"imageAltText",imageHeight:"imageHeight",imageWebAddress:"imageWebAddress",imageWidth:"imageWidth",linkOpenInNewWindow:"linkOpenInNewWindow",linkText:"linkText",linkTitle:"linkTitle",linkWebAddress:"linkWebAddress"},features:[t.qOj]}),i})(),TI=(()=>{class i extends Ab{constructor(e){super(),this.service=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Ge))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoEditorLocalizedMessages",""]],features:[t._Bn([{provide:Ab,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj]}),i})();const LT={alignCenter:"align-center",alignJustify:"align-justify",alignLeft:"align-left",alignRight:"align-right",backColor:"droplet",blockquote:"blockquote",bold:"bold",cleanFormatting:"clear-css",createLink:"link",foreColor:"foreground-color",indent:"indent",insertFile:"file-add",insertImage:"image",insertOrderedList:"list-ordered",insertUnorderedList:"list-unordered",italic:"italic",outdent:"outdent",print:"print",redo:"redo",selectAll:"select-all",strikethrough:"strikethrough",subscript:"subscript",superscript:"supscript",underline:"underline",undo:"undo",unlink:"unlink",viewSource:"code",insertTable:"table-add",addColumnBefore:"table-column-insert-left",addColumnAfter:"table-column-insert-right",addRowBefore:"table-row-insert-above",addRowAfter:"table-row-insert-below",deleteRow:"table-row-delete",deleteColumn:"table-column-delete",mergeCells:"cells-merge",splitCell:"cell-split-horizontally",deleteTable:"table-delete"},Y7=new t.OlP("COMMAND_TOKEN");let yI=(()=>{class i{constructor(e,n,s,a,d){this.command=e,this.button=n,this.localization=s,this.toolsService=d,this.editor=a.editor,setTimeout(()=>{const f=this.localization.get(this.command);f&&(this.button.showText="overflow",this.button.showIcon="both",this.button.text=f),this.button.toolbarOptions.icon||(this.button.icon=LT[this.command]),this.button.title=f,this.toolsService.needsCheck.next()})}ngOnInit(){this.subs=this.editor.stateChange.subscribe(this.onStateChange.bind(this)),this.subs.add(this.button.click.subscribe(this.clickHandler.bind(this))),this.subs.add(this.button.pointerdown.subscribe(this.pointerdownHandler.bind(this)))}ngOnDestroy(){this.subs&&this.subs.unsubscribe()}clickHandler(){}pointerdownHandler(e){}onStateChange(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y7),t.Y36($t),t.Y36(Ge),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["","kendoEditorCommandBase",""]]}),i})();class yn extends yI{constructor(r,e,n,s,a){super(r,e,n,s,a),this.command=r,this.button=e,this.localization=n,this.providerService=s,this.toolsService=a}clickHandler(){this.editor.exec(this.command,this.editor.applyToWord),this.editor.focus()}pointerdownHandler(r){r.preventDefault()}onStateChange(r){this.button.selected=r[this.command].selected,this.button.disabled=r[this.command].disabled}}let Ob=(()=>{class i extends yn{constructor(e,n,s,a){super("bold",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorBoldButton",""]],features:[t.qOj]}),i})(),Ib=(()=>{class i extends yn{constructor(e,n,s,a){super("italic",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorItalicButton",""]],features:[t.qOj]}),i})(),Mb=(()=>{class i extends yn{constructor(e,n,s,a){super("underline",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorUnderlineButton",""]],features:[t.qOj]}),i})(),Rb=(()=>{class i extends yn{constructor(e,n,s,a){super("alignLeft",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorAlignLeftButton",""]],features:[t.qOj]}),i})(),Nb=(()=>{class i extends yn{constructor(e,n,s,a){super("alignCenter",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorAlignCenterButton",""]],features:[t.qOj]}),i})(),Fb=(()=>{class i extends yn{constructor(e,n,s,a){super("alignRight",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorAlignRightButton",""]],features:[t.qOj]}),i})(),Lb=(()=>{class i extends yn{constructor(e,n,s,a){super("alignJustify",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorAlignJustifyButton",""]],features:[t.qOj]}),i})(),Pb=(()=>{class i extends yn{constructor(e,n,s,a){super("insertUnorderedList",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorInsertUnorderedListButton",""]],features:[t.qOj]}),i})(),Ub=(()=>{class i extends yn{constructor(e,n,s,a){super("insertOrderedList",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorInsertOrderedListButton",""]],features:[t.qOj]}),i})(),Bb=(()=>{class i extends yn{constructor(e,n,s,a){super("indent",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorIndentButton",""]],features:[t.qOj]}),i})(),Gb=(()=>{class i extends yn{constructor(e,n,s,a){super("outdent",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorOutdentButton",""]],features:[t.qOj]}),i})();class zb extends yI{constructor(r,e,n,s,a){super(r,e,n,s,a),this.dialog=r,this.button=e,this.localization=n,this.toolsService=a}clickHandler(){this.editor.openDialog(this.dialog)}onStateChange(r){this.button.selected=r[this.command].selected,this.button.disabled=r[this.command].disabled}}let Zb=(()=>{class i extends zb{constructor(e,n,s,a){super("createLink",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorCreateLinkButton",""]],features:[t.qOj]}),i})(),Hb=(()=>{class i extends yn{constructor(e,n,s,a){super("unlink",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorUnlinkButton",""]],features:[t.qOj]}),i})(),DI=(()=>{class i extends zb{constructor(e,n,s,a){super("insertImage",e,n,s,a)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36($t),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275dir=t.lG2({type:i,selectors:[["kendo-toolbar-button","kendoEditorInsertImageButton",""]],features:[t.qOj]}),i})();const $7={convertMsLists:!1,removeAttributes:[],removeHtmlComments:!1,removeInvalidHTML:!0,removeMsClasses:!1,removeMsStyles:!1,stripTags:[]},W7=SI(i=>i.replace(/<!--[\s\S]+?-->/g,"")),j7=SI(i=>(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")),Q7=i=>{if("all"===i.removeAttributes)return{"*":hv};const r=(i=>((i,r)=>Object.keys(i).filter(e=>r(e)).reduce((e,n)=>Object.assign(e,{[n]:i[n]}),{}))(i,e=>null!=i[e]&&""!==i[e]))({style:i.removeMsStyles?x3:void 0,class:i.removeMsClasses?_3:void 0});return i.removeAttributes.reduce((e,n)=>Object.assign(Object.assign({},e),{[n]:hv}),r)};let AI=(()=>{class i{constructor(e,n,s,a,d,f,p){this.dialogService=e,this.localization=n,this.cdr=s,this.ngZone=a,this.element=d,this.providerService=f,this.toolsService=p,this.iframe=!0,this.applyToWord=!1,this.preserveWhitespace=!1,this.resizable=!1,this.valueChange=new t.vpe,this.onFocus=new t.vpe,this.paste=new t.vpe,this.onBlur=new t.vpe,this.hostClass=!0,this.stateChange=new rl.X(RT),this.valueModified=new Un.x,this._readonly=!1,this._placeholder="",this.inForm=!1,this._iframeCss={keepBuiltInCss:!0},this.afterViewInit=new Un.x,this.contentAreaLoaded=new Un.x,this.dispatchTransaction=g=>{const b=g.docChanged;if(!(this.disabled||this.readonly&&b)){if(b){const k=bp({doc:g.doc});this.trOnChange=g,this.htmlOnChange=k,this.ngZone.run(()=>{this.valueModified.next(k)})}(!b||this.inForm)&&this.view.updateState(this.view.state.apply(g))}},this.transformPastedHTML=(g,b)=>{if(b)return this.dispatchPasteEvent(g,g);const S=Object.assign(Object.assign({},$7),this.pasteCleanupSettings),k=((...i)=>r=>i.reduce((e,n)=>n(e),r))(j7(S.removeInvalidHTML),W7(S.removeHtmlComments))(g),T=E3(k,{convertMsLists:S.convertMsLists,stripTags:S.stripTags.join("|"),attributes:Q7(S)});return this.dispatchPasteEvent(g,T)},this.changeValue=g=>{const b=this._value;if(this._value=g,this._view){if(this.htmlOnChange===g&&this.trOnChange)this.view.updateState(this.view.state.apply(this.trOnChange));else if((b||"")!==(g||"")){if(this.iframe&&!this.container.element.nativeElement.contentWindow)return;const k=this.view.state,T=vp(g||"",k.schema,{preserveWhitespace:this.preserveWhitespace}),F=k.tr.setSelection(new Vi(k.doc)).replaceSelectionWith(T);this.view.updateState(k.apply(F))}this.trOnChange=null,this.htmlOnChange=null}},this.onChangeCallback=g=>{this.changeValue(g)},this.onTouchedCallback=g=>{},this.onPaste=(g,b)=>(this._pasteEvent=b,!1),wt(x7),this.providerService.editor=this,this.direction=n.rtl?"rtl":"ltr",this.subs=(0,ur.$)(this.afterViewInit.asObservable(),this.contentAreaLoaded.asObservable()).subscribe(()=>this.initialize())}set value(e){this.changeValue(e)}get value(){if(this.trOnChange)return this.htmlOnChange;let e=this._view?this.getSource():this._value;return"<p></p>"===e?this._value?"":this._value:e}set disabled(e){this._disabled=e||!1,this._view&&this._view.updateState(this._view.state),this._disabled&&(this.readonly=!1),this.stateChange.next(this._disabled||this._readonly?NT:RT)}get disabled(){return this._disabled}set readonly(e){if(this._readonly=e||!1,this._view){let n;n=this.iframe?this.container.element.nativeElement.contentWindow:window;const s=n.getSelection().focusNode;this._view.dom.contains(s)&&n.getSelection().removeAllRanges();const d=this._view.state.tr.setSelection(en.create(this._view.state.doc,1));this._view.dispatch(d)}this._readonly?(this.toolbar&&(this.toolbar.tabindex=-1),this.stateChange.next(NT)):(this.toolbar&&(this.toolbar.tabindex=0),this.stateChange.next(RT))}get readonly(){return this._readonly}set iframeCss(e){this._iframeCss=Object.assign(this._iframeCss,e)}get iframeCss(){return this._iframeCss}set schema(e){if(t.X6Q){if(!(e instanceof np))throw new Error("Expected value of type Schema. See http://www.telerik.com/kendo-angular-ui/components/editor/schema/");if(this._view)throw new Error("The Schema cannot be changed dynamically. See http://www.telerik.com/kendo-angular-ui/components/editor/schema/")}this._schema=e}get schema(){return this._schema}set plugins(e){if(t.X6Q){if("function"!=typeof e)throw new Error((i=>`plugins must be a function, but received ${JSON.stringify(i)}.`)(e));if(this._view)throw new Error("The plugins cannot be changed dynamically. See http://www.telerik.com/kendo-angular-ui/components/editor/plugins/")}this._plugins=e}get plugins(){return this._plugins}set placeholder(e){if(t.X6Q&&this._view)throw new Error("The placeholder cannot be changed dynamically. See https://www.telerik.com/kendo-angular-ui/components/editor/plugins/#toc-custom-plugins/");this._placeholder=e}get placeholder(){return this._placeholder}get resizableClass(){return!!this.resizable}get isDisabled(){return this.disabled}get isReadonly(){return this.readonly}get isIE(){return this.iframe&&(()=>{if(!nt())return!1;const i=window.navigator.userAgent,r=i.indexOf("MSIE "),e=i.indexOf("Trident/");return r>0||e>0})()}get dir(){return this.direction}get ariaDisabled(){return this.disabled}get minWidth(){const e=this.resizable;return e.minWidth?e.minWidth+"px":void 0}get maxWidth(){const e=this.resizable;return e.maxWidth?e.maxWidth+"px":void 0}get minHeight(){const e=this.resizable;return e.minHeight?e.minHeight+"px":void 0}get maxHeight(){const e=this.resizable;return e.maxHeight?e.maxHeight+"px":void 0}get toolbar(){return this.defaultToolbarComponent||this.userToolBarComponent}get toolbarElement(){return this.defaultToolbar||this.userToolBarElement}get view(){return this._view}get selectionText(){return this._view&&this._view.state?yl(this._view.state):""}ngOnInit(){this.subs.add(this.localization.changes.subscribe(({rtl:e})=>{this.direction=e?"rtl":"ltr"})),this.subs.add(this.toolsService.needsCheck.subscribe(()=>this.cdr.markForCheck()))}ngAfterViewInit(){this.afterViewInit.next(),this.iframe||this.contentAreaLoaded.next(),this.resizable&&this.normalizeSize()}ngOnChanges(e){e.value&&this.view&&this.changeValue(e.value.currentValue),e.iframe&&!e.iframe.isFirstChange()&&this.ngZone.onStable.pipe((0,gn.q)(1)).subscribe(()=>this.initialize()),e.resizable&&!e.resizable.isFirstChange()&&this.normalizeSize()}setDisabledState(e){this.disabled=e}iframeOnLoad(){this.contentAreaLoaded.next()}exec(e,n){"setHTML"===e&&"string"==typeof n?n={content:n,parseOptions:{preserveWhitespace:this.preserveWhitespace}}:["fontFamily","fontSize","foreColor","backColor","createLink"].some(a=>a===e)&&(n={value:n,applyToWord:this.applyToWord}),M7[e](n)(this._view.state,this._view.dispatch,this._view)}openDialog(e){const s=Object.assign({appendTo:this.dialogContainer},{createLink:{content:FT},insertFile:{content:FT},insertImage:{content:wI},viewSource:{content:EI,height:400,width:500}}[e]);this.toolbar.toggle(!1);const a=this.dialogService.open(s).content.instance;("createLink"===e||"insertFile"===e)&&(a.command=e),a.editor=this,a.setData(this._view.state,{applyToWord:this.applyToWord})}focus(){this.focusChangedProgrammatically=!0,this._view.focus(),this.focusChangedProgrammatically=!1}blur(){this.focusChangedProgrammatically=!0,this._view.dom.blur(),this.focusChangedProgrammatically=!1}getSource(){return bp(this._view.state)}ngOnDestroy(){this.subs&&this.subs.unsubscribe(),this._styleObserver&&this._styleObserver.disconnect()}writeValue(e){this.inForm=!0,this.value=null===e?void 0:e}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}isEmpty(){return!1}initialize(){if(!nt())return;const e=this.schema||O7,n=this.container.element.nativeElement,s=vp((this.value||"").trim(),e,{preserveWhitespace:this.preserveWhitespace});if(this.iframe){const f=n.contentDocument,p=f.createElement("meta");p.setAttribute("charset","utf-8"),f.head.appendChild(p);const g=Boolean(this.iframeCss.path),b=Boolean(this.iframeCss.content),S=`\n                \n    .ProseMirror .tableWrapper {\n        overflow-x: auto;\n        margin: 1em 0;\n    }\n\n    .ProseMirror table {\n        margin: 0;\n        border-collapse: collapse;\n        table-layout: fixed;\n        width: 100%;\n        overflow: hidden;\n    }\n\n    .ProseMirror td, .ProseMirror th {\n        min-width: 1em;\n        border: 1px solid #ddd;\n        padding: 3px 5px;\n        vertical-align: top;\n        box-sizing: border-box;\n        position: relative;\n    }\n\n    .ProseMirror th {\n        font-weight: bold;\n        text-align: left;\n    }\n\n    .ProseMirror .column-resize-handle {\n        position: absolute;\n        right: -2px; top: 0; bottom: 0;\n        width: 4px;\n        z-index: 20;\n        background-color: #adf;\n        pointer-events: none;\n    }\n\n    .ProseMirror.resize-cursor {\n        cursor: ew-resize;\n        cursor: col-resize;\n    }\n\n    /* Give selected cells a blue overlay */\n    .ProseMirror .selectedCell:after {\n        z-index: 2;\n        position: absolute;\n        content: "";\n        left: 0; right: 0; top: 0; bottom: 0;\n        background: rgba(200, 200, 255, 0.4);\n        pointer-events: none;\n    }\n\n    /* Resizing */\n    .k-editor-resize-wrap-element {\n        display: inline-block;\n        position: relative;\n    }\n\n    .ProseMirror .row-resize-handle {\n        position: absolute;\n        right: 0; left: 0; bottom: 0;\n        transform: translate(0, 50%);\n        height: 4px;\n        z-index: 20;\n        background-color: #adf;\n        pointer-events: none;\n    }\n    \n    .ProseMirror.resize-cursor-vertical {\n        cursor: sn-resize;\n        cursor: row-resize;\n    }\n\n    .k-editor-resize-wrap-element table td p,\n    .k-editor-resize-wrap-element table th p {\n        margin: 0 auto;\n    }\n\n    .ProseMirror[contenteditable="false"] .k-editor-resize-handle,\n    .ProseMirror[contenteditable="false"] .k-editor-resize-handles-wrapper,\n    .ProseMirror[contenteditable="false"] .row-resize-handle,\n    .ProseMirror[contenteditable="false"] .column-resize-handle {\n        display: none;\n    }\n    \n    .ProseMirror[contenteditable="false"] table {\n        pointer-events: none;\n    }\n    \n    .ProseMirror[contenteditable="false"] .ProseMirror-selectednode {\n        outline: none;\n    }\n    \n    .ProseMirror[contenteditable="false"] {\n        cursor: unset !important;\n    }\n\n                ${this.iframeCss.keepBuiltInCss?'\n    html, body {\n        margin: 0;\n        height: 100%;\n        padding: 0;\n    }\n\n    html {\n        min-height: 100%;\n    }\n\n    body {\n        box-sizing: border-box;\n        position: relative;\n        word-wrap: break-word;\n        padding: 8px;\n    }\n\n    body > .k-content {\n        outline: 0;\n        height: 100%;\n        white-space: pre-wrap;\n    }\n\n    div.ProseMirror {\n        position: relative;\n        word-wrap: break-word;\n        white-space: pre-wrap;\n        white-space: break-spaces;\n        -webkit-font-variant-ligatures: none;\n        font-variant-ligatures: none;\n        font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n    }\n\n    .ProseMirror pre {\n        white-space: pre-wrap;\n    }\n\n    .k-content > p {\n        margin: 0 0 1em;\n    }\n\n    .k-content table {\n        white-space: pre-wrap;\n    }\n\n    .k-content .k-text-selected, .k-content::selection {\n        color: HighlightText;\n        background-color: Highlight;\n    }\n\n    .k-content .k-text-highlighted {\n        background-color: #bbdefb;\n    }\n\n    .k-content .ProseMirror-selectednode {\n        outline: 2px solid #8cf;\n    }\n\n    .ProseMirror-hideselection *::selection { background: transparent; }\n    .ProseMirror-hideselection *::-moz-selection { background: transparent; }\n    .ProseMirror-hideselection { caret-color: transparent; }\n\n    .ProseMirror-gapcursor {\n        display: none;\n        pointer-events: none;\n        position: absolute;\n    }\n\n    .ProseMirror-gapcursor:after {\n        content: "";\n        display: block;\n        position: absolute;\n        top: -2px;\n        width: 20px;\n        border-top: 1px solid black;\n        animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n    }\n\n    @keyframes ProseMirror-cursor-blink {\n        to {\n            visibility: hidden;\n        }\n    }\n\n    .ProseMirror-focused .ProseMirror-gapcursor {\n        display: block;\n    }\n\n    .k-editor-resize-handles-wrapper {\n        position: absolute;\n        visibility: hidden;\n    }\n\n    .k-editor-resize-handle {\n        position: absolute;\n        visibility: visible;\n        background-color: #fff;\n        border: 1px solid #000;\n        z-index: 100;\n        width: 5px;\n        height: 5px;\n    }\n\n    .k-editor-resize-handle.northwest {\n        top: 0;\n        left: 0;\n        transform: translate(-50%, -50%);\n        cursor: nw-resize;\n    }\n\n    .k-editor-resize-handle.north {\n        top: 0;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        cursor: n-resize;\n    }\n\n    .k-editor-resize-handle.northeast {\n        top: 0;\n        right: 0;\n        transform: translate(50%, -50%);\n        cursor: ne-resize;\n    }\n\n    .k-editor-resize-handle.southwest {\n        left: 0;\n        bottom: 0;\n        transform: translate(-50%, 50%);\n        cursor: sw-resize;\n    }\n\n    .k-editor-resize-handle.south {\n        bottom: 0;\n        left: 50%;\n        transform: translate(-50%, 50%);\n        cursor: s-resize;\n    }\n\n    .k-editor-resize-handle.southeast {\n        right: 0;\n        bottom: 0;\n        transform: translate(50%, 50%);\n        cursor: se-resize;\n    }\n\n    .k-editor-resize-handle.west {\n        top: 50%;\n        left: 0;\n        transform: translate(-50%, -50%);\n        cursor: w-resize;\n    }\n\n    .k-editor-resize-handle.east {\n        top: 50%;\n        right: 0;\n        transform: translate(50%, -50%);\n        cursor: e-resize;\n    }\n\n    .ProseMirror .k-placeholder::before {\n        content: attr(data-placeholder);\n        height: 0;\n        color: #8a8a8a;\n        float: left;\n        opacity: 1;\n        cursor: text;\n        -webkit-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n    }\n\n    .ProseMirror li {\n        position: relative;\n    }\n\n    li.ProseMirror-selectednode {\n        outline: none;\n    }\n\n    li.ProseMirror-selectednode:after {\n        content: "";\n        position: absolute;\n        left: -32px;\n        right: -2px;\n        top: -2px;\n        bottom: -2px;\n        border: 2px solid #8cf;\n        pointer-events: none;\n    }\n\n    .ProseMirror[contenteditable="false"] img {\n        pointer-events: none;\n    }\n':""}\n                ${"rtl"===this.dir?"body { direction: rtl }":""}\n                ${b?this.iframeCss.content:""}\n            `,k=f.createElement("style");if(k.appendChild(f.createTextNode(S)),f.head.appendChild(k),g){const F=f.createElement("link");F.rel="stylesheet",F.href=this.iframeCss.path,f.head.appendChild(F)}const T=f.createElement("div");T.classList.add("k-content"),f.body.appendChild(T)}else{const f=document.createElement("div");n.appendChild(f)}const a=[new Yr({key:new yr("editor-tabindex"),props:{attributes:()=>({tabIndex:this.readonly?"0":""})}}),new Yr({key:new yr("toolbar-tools-update"),view:()=>({update:f=>{this.disabled||this.stateChange.next(this.readonly?NT:((i,r)=>({alignCenter:{selected:Zo(i,Rp),disabled:!1},alignJustify:{selected:Zo(i,Np),disabled:!1},alignLeft:{selected:Zo(i,Ip),disabled:!1},alignRight:{selected:Zo(i,Mp),disabled:!1},bold:{selected:ro(i,rt),disabled:!1},cleanFormatting:{selected:!1,disabled:!D0()(i)},format:{selected:GS(i),disabled:!1},blockquote:{selected:!1,disabled:!Ap(i)},indent:{selected:!1,disabled:!(V0(i,i.schema.nodes.list_item)||Op(i,Ia))},insertOrderedList:{selected:Al(i,i.schema.nodes.ordered_list),disabled:!1},insertUnorderedList:{selected:Al(i,i.schema.nodes.bullet_list),disabled:!1},italic:{selected:ro(i,Pt),disabled:!1},unlink:{selected:!1,disabled:!ro(i,Wl)},outdent:{selected:!1,get disabled(){return!(Al(i,i.schema.nodes.blockquote)||Xu(i,Ma)||H0(i,Ma.nodes))}},redo:{selected:!1,disabled:!vd(i)},selectAll:{selected:!1,disabled:!1},strikethrough:{selected:ro(i,_r),disabled:!1},style:{selected:IS(i,i.schema.marks.style),disabled:!1},subscript:{selected:ro(i,si),disabled:!1},superscript:{selected:ro(i,Or),disabled:!1},underline:{selected:ro(i,Mn),disabled:!1},undo:{selected:!1,disabled:!$l(i)},createLink:{selected:!1,get disabled(){const e=i.selection.empty;return r&&r.applyToWord&&e?Yu(i,()=>{},r).state.selection.empty:e}},insertFile:{selected:!1,disabled:i.selection.empty},insertImage:{selected:!1,disabled:!1},viewSource:{selected:!1,disabled:!1},print:{selected:!1,disabled:!1},insertTable:{selected:!1,disabled:!1},addColumnBefore:{selected:!1,disabled:!r2(i)},addColumnAfter:{selected:!1,disabled:!s2(i)},addRowBefore:{selected:!1,disabled:!Xy(i)},addRowAfter:{selected:!1,disabled:!e2(i)},deleteRow:{selected:!1,disabled:!x(i)},deleteColumn:{selected:!1,disabled:!o2(i)},mergeCells:{selected:!1,disabled:!D(i)},splitCell:{selected:!1,disabled:!A(i)},deleteTable:{selected:!1,disabled:!j(i)}}))(f.state,{applyToWord:this.applyToWord}))}})}),Jw(),Pp(po(e)),Pp(Em(e,{applyToWord:this.applyToWord})),Pp(tE),new Yr({props:{decorations:vM,createSelectionBetween:(i,r,e)=>r.pos==e.pos&&hi.valid(e)?new hi(e):null,handleClick:gM,handleKeyDown:mM,handleDOMEvents:{beforeinput:_M}}}),F3(),eM(),z3(),new Yr({key:Ti,state:{init(e,n){return this.spec.props.nodeViews[Li(n.schema).row.name]=(s,a)=>new tM,new km(-1,null)},apply:(e,n)=>n.apply(e)},props:{attributes:e=>zy(Ti,e)?null:Ti.getState(e).activeHandle>-1?{class:"resize-cursor-vertical"}:null,handleDOMEvents:{mousemove:(e,n)=>(pv(Ti,e.state)||function rM(i,r,e){let n=Ti.getState(i.state);if(!n.dragging){let s=Zy(r.target),a=-1;if(s){const d=Hy(s);let{top:f,bottom:p}=s.getBoundingClientRect();Math.abs(r.clientY-f)<=e&&d.rowIndex>0?(d.rowIndex-=s.rowSpan,a=gv(i,r,d)):p-r.clientY>0&&p-r.clientY<=e&&(a=gv(i,r,d))}a!==n.activeHandle&&jy(i,a)}}(e,n,5),!1),mouseleave:e=>(function sM(i){let r=Ti.getState(i.state);r.activeHandle>-1&&!r.dragging&&jy(i,-1)}(e),!1),mousedown:(e,n)=>function oM(i,r){let e=Ti.getState(i.state);if(-1===e.activeHandle||e.dragging)return!1;let s=i.state.doc.resolve(e.activeHandle),a=s.parent,d=s.node(-1),f=bd(a.attrs.style).height,p=bd(d.attrs.style).height,g=f?parseFloat(f):0;function b(k){k.view.removeEventListener("mouseup",b),k.view.removeEventListener("mousemove",S);let T=Ti.getState(i.state);if(T.dragging){const F=i.state.tr.setMeta(Ti,{setDragging:null});(function lM(i,r,e){const n=i.state.doc,s=n.resolve(e),a=s.parent,d=s.posAtIndex(0)-1,f=i.nodeDOM(d),p=f.ownerDocument&&f.ownerDocument.defaultView||window;f.style.height=p.getComputedStyle(f).height,r.setNodeMarkup(d,null,ea(a.attrs,"height",f.style.height));const g=f&&f.closest("table"),b=g&&g.style.height;if(b){let S=n.resolve(d),k=S.start(S.depth)-1;r.setNodeMarkup(k,null,ea(S.parent.attrs,"height",b))}})(i,F,T.activeHandle),i.dispatch(F)}}function S(k){if(!k.which)return b(k);let T=Ti.getState(i.state),F=function aM(i,r){return i.startHeight.rowHeight+(r.clientY-i.startY)}(T.dragging,k);!function cM(i,r,e,n,s){const a=i.nodeDOM(r),d=a&&a.parentNode;if(d){d.style.height=e+"px";const f=d.ownerDocument&&d.ownerDocument.defaultView||window;d.style.height=f.getComputedStyle(d).height;const p=d.closest("table"),g=parseFloat(s)+n+"px",b=p&&p.style.height;b&&b!==g&&(p.style.height=parseFloat(s)+n+"px",p.style.height=f.getComputedStyle(p).height)}}(i,T.activeHandle,F,k.clientY-T.dragging.startY,p)}return f||(g=i.nodeDOM(e.activeHandle).offsetHeight),i.dispatch(i.state.tr.setMeta(Ti,{setDragging:{startY:r.clientY,startHeight:{rowHeight:g,tableHeight:p}}})),r.view.addEventListener("mouseup",b),r.view.addEventListener("mousemove",S),r.preventDefault(),!0}(e,n)},decorations(e){if(pv(Ti,e))return an.empty;let n=Ti.getState(e);return n.activeHandle>-1?function dM(i,r){const e=[];if("number"!=typeof r)return an.empty;const n=i.doc.resolve(r),s=n.node(-1),a=Wt.get(s),d=n.start(-1),f=[],p=r-d;let g=-1;for(let S=0;S<a.height;S++)f.push(a.map.slice(S*a.width,S*a.width+a.width)),-1!==f[S].indexOf(p)&&(g=S);const b=[];return f[g].forEach((S,k)=>{(!f[g+1]||S!==f[g+1][k])&&b.push(S)}),b.forEach(S=>{const k=s.nodeAt(S);let T=d+S+(k?k.nodeSize:0)-1,F=document.createElement("div");F.className="row-resize-handle",e.push(Ni.widget(T,F))}),an.create(i.doc,e)}(e,n.activeHandle):void 0},nodeViews:{}}}),ne(),new Yr({key:L3,props:{decorations:i=>{const{doc:r,selection:e,storedMarks:n}=i;if(!e.empty||!n)return an.empty;const s=C0((n||[]).find(f=>"style"===f.type.name),{name:"color",value:/^.+$/});if(!s)return an.empty;const a=e.$anchor.parent,d=[];return r.descendants((f,p)=>{f.eq(a)&&d.push(Ni.node(p,p+f.nodeSize,{style:"caret-color: "+s}))}),an.create(r,d)}}})];this.placeholder&&a.push(function A3(i){const r={class:"k-placeholder","data-placeholder":i};return new Yr({key:new yr("placeholder"),props:{decorations:e=>{const{doc:n}=e,s=n.content.firstChild;if(!(0===n.childCount||1===n.childCount&&s.inlineContent&&0===s.childCount))return an.empty;const d=[];return n.descendants((f,p)=>{d.push(Ni.node(p,p+f.nodeSize,r))}),an.create(n,d)}}})}(this.placeholder));const d=Oa.create({schema:e,doc:s,plugins:Yh(this.plugins)?this.plugins(a):a});if(this.viewMountElement=this.iframe?n.contentDocument.querySelector("div"):n.querySelector("div"),this.ngZone.runOutsideAngular(()=>{this._view=new Dw({mount:this.viewMountElement},{state:d,editable:()=>!this.readonly,dispatchTransaction:this.dispatchTransaction,transformPastedHTML:this.transformPastedHTML,transformPastedText:this.transformPastedHTML,handleDOMEvents:{paste:this.onPaste}})}),this._view){let f;const p=this.element.nativeElement.querySelector(".k-editor-content").classList;f=this.iframe?this.container.element.nativeElement.contentDocument:this.container.element.nativeElement,this.subs.add((0,vi.R)(f,"focusin").subscribe(g=>{if(this.readonly&&p.add("k-focus"),!this.focusChangedProgrammatically||this.shouldEmitFocus){const b=g.relatedTarget;(!(b&&b.classList.contains("k-colorpicker"))||this.shouldEmitFocus)&&this.ngZone.run(()=>this.onFocus.emit()),this.shouldEmitFocus=!1}})),this.subs.add((0,vi.R)(f,"focusout").subscribe(g=>{if(this.readonly&&p.remove("k-focus"),!this.focusChangedProgrammatically){const b=g.relatedTarget;b&&b.classList.contains("k-colorpicker")||this.ngZone.run(()=>this.onBlur.emit())}}))}this.subs.add(this.stateChange.subscribe(()=>{this.userToolBarComponent?this.userToolBarComponent.cdr.detectChanges():this.cdr.detectChanges()})),this.subs.add(this.valueModified.subscribe(f=>{this.onChangeCallback(f),this.valueChange.emit(f),this.cdr.markForCheck()})),this.subs.add((0,vi.R)(this.viewMountElement,"keyup").pipe((0,Kn.U)(f=>f.keyCode),(0,Ot.h)(f=>121===f),(0,Kn.U)(()=>this.toolbarElement)).subscribe(f=>f.nativeElement.focus())),this.subs.add((0,vi.R)(this.viewMountElement,"blur").pipe((0,Ot.h)(f=>!this.viewMountElement.contains(f.relatedTarget))).subscribe(()=>this.onTouchedCallback()))}normalizeSize(){if("object"==typeof this.resizable&&!this._styleObserver){const e=this.element.nativeElement;this._styleObserver=new MutationObserver(()=>{this.ngZone.runOutsideAngular(()=>this.normalizeProperties(e))}),this._styleObserver.observe(e,{attributeFilter:["style"]})}}normalizeProperties(e){const n=Object.keys(this.resizable),s=parseInt(e.style.width,10),a=parseInt(e.style.height,10),d=this.resizable;n.forEach(f=>{const p=f.startsWith("min"),g=!p,b=f.endsWith("Width");p&&b?s<d.minWidth&&(e.style.width=d.minWidth+"px"):p&&!b?a<d.minHeight&&(e.style.height=d.minHeight+"px"):g&&b?s>d.maxWidth&&(e.style.width=d.maxWidth+"px"):a>d.maxHeight&&(e.style.height=d.maxHeight+"px")})}dispatchPasteEvent(e,n){if(zt(this.paste)){const s=new q7(n,e,this._pasteEvent);return this.ngZone.run(()=>this.paste.emit(s)),s.isDefaultPrevented()?"":s.cleanedHtml}return n}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(xd),t.Y36(Ge),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(Xt),t.Y36(sn))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-editor"]],contentQueries:function(e,n,s){if(1&e&&(t.Suo(s,_l,5),t.Suo(s,_l,5,t.SBq)),2&e){let a;t.iGM(a=t.CRH())&&(n.userToolBarComponent=a.first),t.iGM(a=t.CRH())&&(n.userToolBarElement=a.first)}},viewQuery:function(e,n){if(1&e&&(t.Gf(qz,5,t.s_b),t.Gf(Yz,5,t.s_b),t.Gf(mI,5,t.SBq),t.Gf(mI,5,_l)),2&e){let s;t.iGM(s=t.CRH())&&(n.dialogContainer=s.first),t.iGM(s=t.CRH())&&(n.container=s.first),t.iGM(s=t.CRH())&&(n.defaultToolbar=s.first),t.iGM(s=t.CRH())&&(n.defaultToolbarComponent=s.first)}},hostVars:20,hostBindings:function(e,n){2&e&&(t.uIk("dir",n.dir)("ariaDisabled",n.ariaDisabled),t.Udp("min-width",n.minWidth)("max-width",n.maxWidth)("min-height",n.minHeight)("max-height",n.maxHeight),t.ekj("k-editor",n.hostClass)("k-editor-resizable",n.resizableClass)("k-disabled",n.isDisabled)("k-readonly",n.isReadonly)("k-ie",n.isIE))},inputs:{value:"value",disabled:"disabled",readonly:"readonly",iframe:"iframe",iframeCss:"iframeCss",applyToWord:"applyToWord",schema:"schema",plugins:"plugins",placeholder:"placeholder",preserveWhitespace:"preserveWhitespace",pasteCleanupSettings:"pasteCleanupSettings",resizable:"resizable"},outputs:{valueChange:"valueChange",onFocus:"focus",paste:"paste",onBlur:"blur"},features:[t._Bn([Ft,Xt,sn,{provide:Ge,useExisting:Ft},{provide:Et,useValue:"kendo.editor"},{provide:H.JU,useExisting:(0,t.Gpc)(()=>i),multi:!0},{provide:zi,useExisting:(0,t.Gpc)(()=>i)}]),t.TTD],ngContentSelectors:Qz,decls:7,vars:3,consts:function(){let r,e,n,s,a,d,f,p,g,b,S,k,T,F,K,fe,Re,Ae,Qe,Ut,yt,kn,bn,tt,hn,ss,la,Jd,qd,ig,Vb,dc,Yd,Jb,UI,BI,GI,zI,ZI,HI,VI,JI,qI,YI,KI,$I,WI,jI,QI,XI,e3,t3,n3,r3,s3;return r=$localize`:kendo.editor.alignCenter|The title of the tool that aligns text in the center.:Center text`,e=$localize`:kendo.editor.alignJustify|The title of the tool that justifies text both left and right.:Justify`,n=$localize`:kendo.editor.alignLeft|The title of the tool that aligns text on the left.:Align text left`,s=$localize`:kendo.editor.alignRight|The title of the tool that aligns text on the right.:Align text right`,a=$localize`:kendo.editor.backColor|The title of the tool that changes the text background color.:Background color`,d=$localize`:kendo.editor.blockquote|The title of the tool that wraps an element in a blockquote:Quotation`,f=$localize`:kendo.editor.bold|The title of the tool that makes text bold.:Bold`,p=$localize`:kendo.editor.cleanFormatting|The title of the Clean Formatting tool.:Clean formatting`,g=$localize`:kendo.editor.createLink|The title of the tool that creates hyperlinks.:Insert link`,b=$localize`:kendo.editor.dialogApply|The label of the **Apply** button in all editor dialogs.:Apply`,S=$localize`:kendo.editor.dialogCancel|The label of the **Cancel** button in all editor dialogs.:Cancel`,k=$localize`:kendo.editor.dialogInsert|The label of the **Insert** button in all editor dialogs.:Insert`,T=$localize`:kendo.editor.dialogUpdate|The label of the **Update** button in all editor dialogs.:Update`,F=$localize`:kendo.editor.fileText|The caption for the file text in the insertFile dialog.:Text`,K=$localize`:kendo.editor.fileTitle|The caption for the file Title in the insertFile dialog.:Title`,fe=$localize`:kendo.editor.fileWebAddress|The caption for the file URL in the insertFile dialog.:Web address`,Re=$localize`:kendo.editor.fontFamily|The title of the tool that changes the text font.:Select font family`,Ae=$localize`:kendo.editor.fontSize|The title of the tool that changes the text size.:Select font size`,Qe=$localize`:kendo.editor.foreColor|The title of the tool that changes the text color.:Color`,Ut=$localize`:kendo.editor.format|The title of the tool that lets users choose block formats.:Format`,yt=$localize`:kendo.editor.imageAltText|The caption for the image alternate text in the insertImage dialog.:Alternate text`,kn=$localize`:kendo.editor.imageHeight|The caption for the image height in the insertImage dialog.:Height (px)`,bn=$localize`:kendo.editor.imageWebAddress|The caption for the image URL in the insertImage dialog.:Web address`,tt=$localize`:kendo.editor.imageWidth|The caption for the image width in the insertImage dialog.:Width (px)`,hn=$localize`:kendo.editor.indent|The title of the tool that indents the content.:Indent`,ss=$localize`:kendo.editor.insertFile|The title of the tool that inserts links to files.:Insert file`,la=$localize`:kendo.editor.insertImage|The title of the tool that inserts images.:Insert image`,Jd=$localize`:kendo.editor.insertOrderedList|The title of the tool that inserts an ordered list.:Insert ordered list`,qd=$localize`:kendo.editor.insertUnorderedList|The title of the tool that inserts an unordered list.:Insert unordered list`,ig=$localize`:kendo.editor.italic|The title of the tool that makes text italicized.:Italic`,Vb=$localize`:kendo.editor.linkOpenInNewWindow|The caption for the checkbox for opening the link in a new window in the createLink dialog.:Open link in new window`,dc=$localize`:kendo.editor.linkText|The caption for the link text in the createLink dialog.:Text`,Yd=$localize`:kendo.editor.linkTitle|The caption for the link title in the createLink dialog.:Title`,Jb=$localize`:kendo.editor.linkWebAddress|The caption for the URL in the createLink dialog.:Web address`,UI=$localize`:kendo.editor.outdent|The title of the tool that outdents the content.:Outdent`,BI=$localize`:kendo.editor.print|The title of the print tool.:Print`,GI=$localize`:kendo.editor.redo|The title of the tool that undos the last action.:Redo`,zI=$localize`:kendo.editor.selectAll|The title of the tool that selects all content.:Select All`,ZI=$localize`:kendo.editor.strikethrough|The title of the tool that strikes through text.:Strikethrough`,HI=$localize`:kendo.editor.subscript|The title of the tool that makes text subscript.:Subscript`,VI=$localize`:kendo.editor.superscript|The title of the tool that makes text superscript.:Superscript`,JI=$localize`:kendo.editor.underline|The title of the tool that underlines text.:Underline`,qI=$localize`:kendo.editor.unlink|The title of the tool that removes hyperlinks.:Remove Link`,YI=$localize`:kendo.editor.undo|The title of the tool that undos the last action.:Undo`,KI=$localize`:kendo.editor.viewSource|The title of the tool that shows the editor value as HTML.:View source`,$I=$localize`:kendo.editor.insertTable|The title of the tool that inserts table.:Insert Table`,WI=$localize`:kendo.editor.addColumnBefore|The title of the tool that adds new column before currently selected column.:Add column before`,jI=$localize`:kendo.editor.addColumnAfter|The title of the tool that adds new column after currently selected column.:Add column after`,QI=$localize`:kendo.editor.addRowBefore|The title of the tool that adds new row before currently selected row.:Add row before`,XI=$localize`:kendo.editor.addRowAfter|The title of the tool that adds new row after currently selected row.:Add row after`,e3=$localize`:kendo.editor.mergeCells|The title of the tool that merges the currently selected cells.:Merge cells`,t3=$localize`:kendo.editor.splitCell|The title of the tool that splits the currently selected cell.:Split cell`,n3=$localize`:kendo.editor.deleteColumn|The title of the tool that deletes a table column.:Delete column`,r3=$localize`:kendo.editor.deleteRow|The title of the tool that deletes a table row.:Delete row`,s3=$localize`:kendo.editor.deleteTable|The title of the tool that deletes a table.:Delete table`,[["kendoEditorLocalizedMessages","","alignCenter",r,"alignJustify",e,"alignLeft",n,"alignRight",s,"backColor",a,"blockquote",d,"bold",f,"cleanFormatting",p,"createLink",g,"dialogApply",b,"dialogCancel",S,"dialogInsert",k,"dialogUpdate",T,"fileText",F,"fileTitle",K,"fileWebAddress",fe,"fontFamily",Re,"fontSize",Ae,"foreColor",Qe,"format",Ut,"imageAltText",yt,"imageHeight",kn,"imageWebAddress",bn,"imageWidth",tt,"indent",hn,"insertFile",ss,"insertImage",la,"insertOrderedList",Jd,"insertUnorderedList",qd,"italic",ig,"linkOpenInNewWindow",Vb,"linkText",dc,"linkTitle",Yd,"linkWebAddress",Jb,"outdent",UI,"print",BI,"redo",GI,"selectAll",zI,"strikethrough",ZI,"subscript",HI,"superscript",VI,"underline",JI,"unlink",qI,"undo",YI,"viewSource",KI,"insertTable",$I,"addColumnBefore",WI,"addColumnAfter",jI,"addRowBefore",QI,"addRowAfter",XI,"mergeCells",e3,"splitCell",t3,"deleteColumn",n3,"deleteRow",r3,"deleteTable",s3],[3,"overflow","tabindex",4,"ngIf"],["class","k-editor-content",4,"ngIf"],["dialogsContainer",""],[3,"overflow","tabindex"],["defaultToolbar",""],["kendoEditorBoldButton",""],["kendoEditorItalicButton",""],["kendoEditorUnderlineButton",""],["kendoEditorFormat",""],["kendoEditorAlignLeftButton",""],["kendoEditorAlignCenterButton",""],["kendoEditorAlignRightButton",""],["kendoEditorAlignJustifyButton",""],["kendoEditorInsertUnorderedListButton",""],["kendoEditorInsertOrderedListButton",""],["kendoEditorIndentButton",""],["kendoEditorOutdentButton",""],["kendoEditorCreateLinkButton",""],["kendoEditorUnlinkButton",""],["kendoEditorInsertImageButton",""],[1,"k-editor-content"],["content",""],["srcdoc",t.$cX`<!DOCTYPE html>`,"frameborder","0",1,"k-iframe",3,"load"]]},template:function(e,n){1&e&&(t.F$t(jz),t.GkF(0,0),t.Hsn(1),t.YNc(2,Kz,21,2,"kendo-toolbar",1),t.YNc(3,$z,2,1,"div",2),t.YNc(4,Wz,3,0,"div",2),t.GkF(5,null,3)),2&e&&(t.xp6(2),t.Q6J("ngIf",!n.userToolBarElement),t.xp6(1),t.Q6J("ngIf",!n.iframe),t.xp6(1),t.Q6J("ngIf",n.iframe))},dependencies:[_l,Ru,$t,Db,TI,X.O5,Ob,Ib,Mb,Rb,Nb,Fb,Lb,Pb,Ub,Bb,Gb,Zb,Hb,DI],styles:[".k-editor-content[_ngcontent-%COMP%]    > .ProseMirror[_ngcontent-%COMP%] {\n            height: 100%;\n            width: 100%;\n            box-sizing: border-box;\n            outline: none;\n            overflow: auto;\n        }\n\n        .k-iframe[_ngcontent-%COMP%] {\n            width: 100%;\n            height: 100%;\n            display: block;\n        }"]}),i})(),tg=(()=>{class i{constructor(){this.valueChange=new t.vpe}onValueChange(e){this.valueChange.emit(e)}focus(){this.dropDownList.focus()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-editor-fontfamily-dropdownlist"]],viewQuery:function(e,n){if(1&e&&(t.Gf(bo,7),t.Gf(bo,7,cc)),2&e){let s;t.iGM(s=t.CRH())&&(n.element=s.first),t.iGM(s=t.CRH())&&(n.dropDownList=s.first)}},inputs:{data:"data",value:"value",defaultItem:"defaultItem",itemDisabled:"itemDisabled",title:"title",disabled:"disabled",tabindex:"tabindex"},outputs:{valueChange:"valueChange"},decls:3,vars:10,consts:[["kendoEditorDropDownTool","",3,"defaultItem","textField","valueField","data","value","valuePrimitive","itemDisabled","disabled","tabindex","valueChange"],["element",""],["kendoDropDownListItemTemplate",""],[3,"ngStyle"]],template:function(e,n){1&e&&(t.TgZ(0,"kendo-dropdownlist",0,1),t.NdJ("valueChange",function(a){return n.value=a})("valueChange",function(a){return n.onValueChange(a)}),t.YNc(2,e7,2,4,"ng-template",2),t.qZA()),2&e&&(t.Q6J("defaultItem",n.defaultItem)("textField","text")("valueField","fontName")("data",n.data)("value",n.value)("valuePrimitive",!0)("itemDisabled",n.itemDisabled)("disabled",n.disabled)("tabindex",n.tabindex),t.uIk("title",n.title))},dependencies:[cc,Tb,Ud,X.PC],styles:[".k-dropdownlist[_ngcontent-%COMP%] {\n            width: 13em;\n        }"]}),i})(),II=(()=>{class i extends qa{constructor(e,n){super(e),this.dialog=e,this.localization=n,this.data=[]}ngAfterViewInit(){Promise.resolve(null).then(()=>{this.fontFamilyDropDownList.dropDownList.focus()})}onCancelAction(){this.dialog.close()}onConfirmAction(){this.value&&this.editor.exec("fontFamily",this.value),this.dialog.close()}setData(e){this.editor=e.editor,this.data=e.data,this.defaultItem=e.defaultItem,this.value=e.value,this.itemDisabled=e.itemDisabled}textFor(e){return this.localization.get(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ta),t.Y36(Ft))},i.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&t.Gf(t7,7,tg),2&e){let s;t.iGM(s=t.CRH())&&(n.fontFamilyDropDownList=s.first)}},inputs:{editor:"editor"},features:[t.qOj],decls:12,vars:8,consts:[[3,"close"],[1,"k-editor-dialog"],[1,"k-editor-dialog","k-popup-edit-form","k-window-content","k-content"],[1,"k-edit-form-container","k-window-content",2,"text-align","center"],[3,"defaultItem","data","value","itemDisabled","valueChange"],["fontFamilyDropDownList",""],["kendoButton","",3,"click"],["kendoButton","",3,"primary","click"]],template:function(e,n){1&e&&(t.TgZ(0,"kendo-dialog-titlebar",0),t.NdJ("close",function(){return n.onCancelAction()}),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"kendo-editor-fontfamily-dropdownlist",4,5),t.NdJ("valueChange",function(a){return n.value=a}),t.qZA()()()(),t.TgZ(7,"kendo-dialog-actions")(8,"button",6),t.NdJ("click",function(){return n.onCancelAction()}),t._uU(9),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return n.onConfirmAction()}),t._uU(11),t.qZA()()),2&e&&(t.xp6(1),t.hij(" ",n.textFor("fontFamily")," "),t.xp6(4),t.Q6J("defaultItem",n.defaultItem)("data",n.data)("value",n.value)("itemDisabled",n.itemDisabled),t.xp6(4),t.Oqu(n.textFor("dialogCancel")),t.xp6(1),t.Q6J("primary",!0),t.xp6(1),t.Oqu(n.textFor("dialogApply")))},dependencies:[_s,tg,Gs,Nn],encapsulation:2}),i})(),UT=(()=>{class i extends Zn{constructor(e,n,s,a){super(),this.dialogService=e,this.localization=n,this.toolsService=a,this.disabled=!1,this.tabindex=-1,this.valueChange=new t.vpe,this._data=[{text:"Arial",fontName:'Arial,"Helvetica Neue",Helvetica,sans-serif'},{text:"Courier New",fontName:'"Courier New",Courier,"Lucida Sans Typewriter","Lucida Typewriter",monospace'},{text:"Georgia",fontName:'Georgia,Times,"Times New Roman",serif'},{fontName:'Impact,Haettenschweiler,"Franklin Gothic Bold",Charcoal,"Helvetica Inserat","Bitstream Vera Sans Bold","Arial Black","sans serif"',text:"Impact"},{text:"Lucida Console",fontName:'"Lucida Console","Lucida Sans Typewriter",monaco,"Bitstream Vera Sans Mono",monospace'},{text:"Tahoma",fontName:"Tahoma,Verdana,Segoe,sans-serif"},{text:"Times New Roman",fontName:'TimesNewRoman,"Times New Roman",Times,Baskerville,Georgia,serif'},{text:"Trebuchet MS",fontName:'"Trebuchet MS","Lucida Grande","Lucida Sans Unicode","Lucida Sans",Tahoma,sans-serif'},{text:"Verdana",fontName:"Verdana,Geneva,sans-serif"}],this.editor=s.editor}set data(e){this._data=e||this._data}get data(){return this._data}ngOnInit(){this.itemDisabled=e=>!(this.overflows||!this.fontFamilyDropDownList||this.fontFamilyDropDownList.dropDownList.isOpen)||null===e.dataItem.fontName,setTimeout(()=>{this.defaultItem={text:this.title,fontName:null},this.toolsService.needsCheck.next()}),this.subs=this.editor.stateChange.subscribe(({style:e})=>{this.value=((i,r)=>{if(i.hasNodesWithoutMarks)return"";const e=i.marks.filter(n=>"style"===n.type.name).map(n=>n.attrs.style).map(bI).map(xI(";")).map((i=>r=>r.filter(i))(n=>n.includes(r))).map(n=>0!==n.length?n:[`${r}: INVALID`]).map(P7).map(xI(":")).map(U7).map(B7).reduce((n,s)=>n.indexOf(s)>-1?n:[...n,s],[]);return e.indexOf("INVALID")>-1||1!==e.length?"":e[0]})(e.selected,"font-family")||null,this.disabled=e.disabled})}onValueChange(e){Yh(e)&&(this.editor.exec("fontFamily",e),this.editor.view.focus(),this.valueChange.emit(this.data.find(n=>n.fontName===e)))}ngOnDestroy(){this.subs&&this.subs.unsubscribe()}get outerWidth(){if(this.element)return eg(this.element.nativeElement)}get title(){return this.localization.get("fontFamily")}openDialog(){const e={appendTo:this.editor.dialogContainer,content:II};this.editor.toolbar.toggle(!1),this.dialogService.open(e).content.instance.setData({editor:this.editor,data:this.data,defaultItem:this.defaultItem,value:this.value,itemDisabled:this.itemDisabled})}canFocus(){return!this.disabled}focus(){this.tabindex=0,this.overflows?this.fontFamilyButton.nativeElement.focus():this.fontFamilyDropDownList.focus()}handleKey(){return this.tabindex=-1,!1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(xd),t.Y36(Ft),t.Y36(Xt),t.Y36(sn))},i.\u0275cmp=t.Xpm({type:i,selectors:[["kendo-toolbar-dropdownlist","kendoEditorFontFamily",""]],viewQuery:function(e,n){if(1&e&&(t.Gf(Qm,7),t.Gf(Xm,7),t.Gf(bo,5),t.Gf(bo,5,tg),t.Gf(l7,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.toolbarTemplate=s.first),t.iGM(s=t.CRH())&&(n.popupTemplate=s.first),t.iGM(s=t.CRH())&&(n.element=s.first),t.iGM(s=t.CRH())&&(n.fontFamilyDropDownList=s.first),t.iGM(s=t.CRH())&&(n.fontFamilyButton=s.first)}},inputs:{data:"data"},outputs:{valueChange:"valueChange"},features:[t._Bn([{provide:Zn,useExisting:(0,t.Gpc)(()=>i)}]),t.qOj],attrs:c7,decls:4,vars:0,consts:[["toolbarTemplate",""],["popupTemplate",""],[3,"defaultItem","data","value","itemDisabled","title","disabled","tabindex","valueChange"],["element",""],["tabindex","-1","type","button","kendoButton","",1,"k-overflow-button",3,"icon","disabled","tabindex","click"],["fontFamilyButton",""]],template:function(e,n){1&e&&(t.YNc(0,d7,2,7,"ng-template",null,0,t.W1O),t.YNc(2,u7,3,5,"ng-template",null,1,t.W1O))},dependencies:[tg,Nn],encapsulation:2}),i})(),iZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[X.ez,H.u5,H.UX,No,qA,w2,Dz,Wk,YA,M_,bA],M_,No,H.u5,H.UX]}),i})();function rZ(i,r){1&i&&(t.TgZ(0,"small",54),t._uU(1," Es requerido "),t.qZA())}function sZ(i,r){1&i&&(t.TgZ(0,"small",54),t._uU(1," M\xe1x 100 caracteres "),t.qZA())}function oZ(i,r){if(1&i&&(t.ynx(0),t.YNc(1,rZ,2,0,"small",53),t.YNc(2,sZ,2,0,"small",53),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.name.errors?null:e.form.controls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.name.errors?null:e.form.controls.name.errors.maxlength)}}function aZ(i,r){1&i&&(t.TgZ(0,"small",54),t._uU(1," M\xe1ximo 2500 caracteres "),t.qZA())}function lZ(i,r){if(1&i&&(t.ynx(0),t.YNc(1,aZ,2,0,"small",53),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.description.errors?null:e.form.controls.description.errors.maxlength)}}function cZ(i,r){1&i&&(t.TgZ(0,"small",54),t._uU(1," M\xe1ximo 2500 caracteres "),t.qZA())}function dZ(i,r){if(1&i&&(t.ynx(0),t.YNc(1,cZ,2,0,"small",53),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.shortDescription.errors?null:e.form.controls.shortDescription.errors.maxlength)}}function uZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,a=t.oxw(2);return t.KtG(a.deleteChecklist(s))}),t.TgZ(1,"span",43),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"rect",62)(4,"rect",63),t.qZA()()()}}function hZ(i,r){if(1&i&&(t.TgZ(0,"div",55,56),t.ynx(2,1),t.TgZ(3,"div",57),t._UZ(4,"textarea",58),t.qZA(),t.TgZ(5,"div",51),t.YNc(6,uZ,5,0,"button",59),t.qZA(),t.BQk(),t._UZ(7,"hr",60),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("formGroup",e),t.xp6(4),t.Q6J("ngIf",n.editProduct)}}function fZ(i,r){1&i&&(t.TgZ(0,"small",54),t._uU(1," Max 100 caracteres "),t.qZA())}function pZ(i,r){if(1&i&&(t.ynx(0),t.YNc(1,fZ,2,0,"small",53),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.author.errors?null:e.form.controls.author.errors.maxlength)}}function mZ(i,r){1&i&&(t.TgZ(0,"small",54),t._uU(1," M\xe1ximo 1000 caracteres "),t.qZA())}function gZ(i,r){if(1&i&&(t.ynx(0),t.YNc(1,mZ,2,0,"small",53),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.testimony.errors?null:e.form.controls.testimony.errors.maxlength)}}const _Z=function(i){return{drag:i}};function vZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",80),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(6);return t.KtG(s.click())}),t._UZ(1,"i",81),t.TgZ(2,"div",82)(3,"h3",83),t._uU(4,"Arrastra las im\xe1genes aqu\xed o clickea para subir"),t.qZA(),t.TgZ(5,"span",84),t._uU(6,"Subir hasta 10 im\xe1genes"),t.qZA()()()}if(2&i){const e=t.oxw(4);t.Q6J("ngClass",t.VKq(1,_Z,e.activeDragImage))}}function bZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",85),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(4);return t.KtG(d.deleteProgress(a))}),t.TgZ(1,"p"),t._uU(2),t._UZ(3,"ngb-progressbar",86),t.qZA()()}if(2&i){const e=r.$implicit;t.xp6(2),t.hij(" ",e.image," "),t.xp6(1),t.Q6J("showValue",!0)("type",e.done?"success":"info")("value",e.progress)("striped",!0)}}const xZ=function(i){return{dropzonehover:i}};function CZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",74)(2,"div",75),t.NdJ("dragover",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.dragOver(s))})("drop",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.drop(s))})("dragleave",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.leave())}),t.YNc(3,vZ,7,3,"div",76),t.YNc(4,bZ,4,5,"div",77),t.qZA(),t.TgZ(5,"input",78,79),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.onChangeFile(s))}),t.qZA()(),t.TgZ(7,"div",10),t._uU(8,"Sube las im\xe1genes del producto"),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(2),t.Q6J("ngClass",t.VKq(3,xZ,e.activeDragImage)),t.xp6(1),t.Q6J("ngIf",0==e.uploadImages.length),t.xp6(1),t.Q6J("ngForOf",e.uploadImages)}}function SZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",92),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4);return t.KtG(a.deleteImage(s))}),t._UZ(1,"i",93),t.qZA()}}const EZ=function(i){return{"text-info":i}};function wZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",94),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4);return t.KtG(a.favImage(s))}),t._UZ(1,"i",95),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngClass",t.VKq(1,EZ,e.bit_fotoportada))}}function kZ(i,r){if(1&i&&(t.TgZ(0,"div",88),t.YNc(1,SZ,2,0,"div",89),t.YNc(2,wZ,2,3,"div",90),t._UZ(3,"img",91),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(4);t.xp6(1),t.Q6J("ngIf",n.editProduct),t.xp6(1),t.Q6J("ngIf",n.editProduct),t.xp6(1),t.Q6J("src",e.vch_url,t.LSH)}}function TZ(i,r){if(1&i&&(t.TgZ(0,"div",5)(1,"div",55),t.YNc(2,kZ,4,3,"div",87),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(2),t.Q6J("ngForOf",e.imagenes)}}function yZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,a=t.oxw(3);return t.KtG(a.deleteURL(s))}),t.TgZ(1,"span",43),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"rect",62)(4,"rect",63),t.qZA()()()}}function DZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",55,96),t.ynx(2,1),t.TgZ(3,"div",69)(4,"input",97,98),t.NdJ("change",function(){const s=t.CHM(e),a=s.$implicit,d=s.index,f=t.MAs(8),p=t.MAs(5),g=t.oxw(3);return t.KtG(g.changeUrl(a.value.name,f,p,d))}),t.qZA()(),t.TgZ(6,"div",99),t._UZ(7,"img",100,101),t.qZA(),t.TgZ(9,"div",51),t.YNc(10,yZ,5,0,"button",59),t.qZA(),t.BQk(),t._UZ(11,"hr",60),t.qZA()}if(2&i){const e=r.$implicit,n=r.index,s=t.oxw(3);t.xp6(2),t.Q6J("formGroup",e),t.xp6(2),t.ekj("is-invalid",s.urlInvalid(n)),t.xp6(3),t.Q6J("src","http://img.youtube.com/vi/"+e.value.name.split("/")[e.value.name.split("/").length-1]+"/mqdefault.jpg",t.LSH),t.xp6(3),t.Q6J("ngIf",s.editProduct)}}function AZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2"),t._uU(4,"Media"),t.qZA()()(),t.YNc(5,CZ,9,5,"div",64),t.YNc(6,TZ,3,1,"div",64),t.TgZ(7,"div",5)(8,"label",11),t._uU(9,"Ficha T\xe9cnica"),t.qZA(),t.TgZ(10,"div",55)(11,"div",65)(12,"button",66),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(15);return t.KtG(s.click())}),t._uU(13,"Subir"),t.qZA(),t.TgZ(14,"input",67,68),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.addFilePDF(s,1))}),t.qZA()(),t.TgZ(16,"div",69),t._UZ(17,"input",70),t.qZA(),t.TgZ(18,"div",51)(19,"button",71),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.verPDF(1))}),t._uU(20),t.qZA()()(),t.TgZ(21,"label",11),t._uU(22,"Ficha Producto"),t.qZA(),t.TgZ(23,"div",55)(24,"div",65)(25,"button",66),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(28);return t.KtG(s.click())}),t._uU(26,"Subir"),t.qZA(),t.TgZ(27,"input",72,73),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.addFilePDF(s,2))}),t.qZA()(),t.TgZ(29,"div",69),t._UZ(30,"input",70),t.qZA(),t.TgZ(31,"div",51)(32,"button",71),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.verPDF(2))}),t._uU(33),t.qZA()()()(),t.TgZ(34,"div",5)(35,"label",11),t._uU(36,"Link Youtube "),t.TgZ(37,"small"),t._uU(38,"(Solo liks EMBED)"),t.qZA()(),t.TgZ(39,"div",38)(40,"div",39),t.YNc(41,DZ,12,5,"div",40),t.TgZ(42,"div",41)(43,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.addURL())}),t.TgZ(44,"span",43),t.O4$(),t.TgZ(45,"svg",44),t._UZ(46,"rect",45)(47,"rect",46),t.qZA()(),t._uU(48,"Url"),t.qZA()()()()()()}if(2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.editProduct),t.xp6(1),t.Q6J("ngIf",e.imagenes.length>0),t.xp6(6),t.Q6J("disabled",!e.editProduct),t.xp6(5),t.Q6J("value",e.textFichaTec),t.xp6(3),t.Oqu(e.progressFichaTecnica),t.xp6(5),t.Q6J("disabled",!e.editProduct),t.xp6(5),t.Q6J("value",e.textFichaProd),t.xp6(3),t.Oqu(e.progressFichaProducto),t.xp6(8),t.Q6J("ngForOf",e.urlArray.controls),t.xp6(2),t.Q6J("disabled",!e.editProduct)}}function OZ(i,r){1&i&&(t.TgZ(0,"small",54),t._uU(1," Es requerido "),t.qZA())}function IZ(i,r){1&i&&(t.TgZ(0,"small",54),t._uU(1," Lo m\xednimo es 0 "),t.qZA())}function MZ(i,r){if(1&i&&(t.ynx(0),t.YNc(1,OZ,2,0,"small",53),t.YNc(2,IZ,2,0,"small",53),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.price.errors?null:e.form.controls.price.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.price.errors?null:e.form.controls.price.errors.min)}}function RZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"form",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2"),t._uU(5,"General"),t.qZA()()(),t.TgZ(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"Nombre del producto"),t.qZA(),t._UZ(10,"input",8),t.YNc(11,oZ,3,2,"ng-container",9),t.TgZ(12,"div",10),t._uU(13,"Recomendamos que el nombre del producto sea \xfanico."),t.qZA()(),t.TgZ(14,"div")(15,"label",11),t._uU(16,"Descripci\xf3n t\xe9cnica"),t.qZA(),t.TgZ(17,"div",12)(18,"kendo-editor",13)(19,"kendo-toolbar",14,15)(21,"kendo-toolbar-buttongroup"),t._UZ(22,"kendo-toolbar-button",16)(23,"kendo-toolbar-button",17)(24,"kendo-toolbar-button",18),t.qZA(),t.TgZ(25,"kendo-toolbar-buttongroup"),t._UZ(26,"kendo-toolbar-button",19)(27,"kendo-toolbar-button",20)(28,"kendo-toolbar-button",21)(29,"kendo-toolbar-button",22),t.qZA(),t._UZ(30,"kendo-toolbar-dropdownlist",23)(31,"kendo-toolbar-dropdownlist",24),t.TgZ(32,"kendo-toolbar-buttongroup"),t._UZ(33,"kendo-toolbar-button",25)(34,"kendo-toolbar-button",26)(35,"kendo-toolbar-button",27)(36,"kendo-toolbar-button",28)(37,"kendo-toolbar-button",29)(38,"kendo-toolbar-button",30),t.qZA()()(),t.YNc(39,lZ,2,1,"ng-container",9),t.qZA(),t.TgZ(40,"div",10),t._uU(41,"Ingresa una descripci\xf3n t\xe9cnica al producto con el cual ser\xe1 visible (m\xe1ximo 2500 caracteres)."),t.qZA(),t._UZ(42,"br"),t.TgZ(43,"label",11),t._uU(44,"Descripci\xf3n emocional"),t.qZA(),t.TgZ(45,"div",31)(46,"kendo-editor",32)(47,"kendo-toolbar",14,15)(49,"kendo-toolbar-buttongroup"),t._UZ(50,"kendo-toolbar-button",16)(51,"kendo-toolbar-button",17)(52,"kendo-toolbar-button",18),t.qZA(),t.TgZ(53,"kendo-toolbar-buttongroup"),t._UZ(54,"kendo-toolbar-button",19)(55,"kendo-toolbar-button",20)(56,"kendo-toolbar-button",21)(57,"kendo-toolbar-button",22),t.qZA(),t._UZ(58,"kendo-toolbar-dropdownlist",23)(59,"kendo-toolbar-dropdownlist",24),t.TgZ(60,"kendo-toolbar-buttongroup"),t._UZ(61,"kendo-toolbar-button",25)(62,"kendo-toolbar-button",26)(63,"kendo-toolbar-button",27)(64,"kendo-toolbar-button",28)(65,"kendo-toolbar-button",29)(66,"kendo-toolbar-button",30),t.qZA()()(),t.YNc(67,dZ,2,1,"ng-container",9),t.qZA(),t.TgZ(68,"div",10),t._uU(69,"Ingresa una descripci\xf3n emocional al producto con el cual ser\xe1 visible (m\xe1ximo 2500 caracteres)."),t.qZA(),t._UZ(70,"br"),t.TgZ(71,"div",33)(72,"label",11),t._uU(73,"Checklist de previsita"),t.qZA(),t.TgZ(74,"div",34),t._UZ(75,"input",35),t.TgZ(76,"label",36),t._uU(77,"S\xed"),t.qZA()(),t.TgZ(78,"div",10),t._uU(79,"Si el producto tiene requisitos para ser instalado."),t.qZA()(),t._UZ(80,"br"),t.TgZ(81,"div",37)(82,"div",38)(83,"div",39),t.YNc(84,hZ,8,2,"div",40),t.qZA()(),t.TgZ(85,"div",41)(86,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addChecklist())}),t.TgZ(87,"span",43),t.O4$(),t.TgZ(88,"svg",44),t._UZ(89,"rect",45)(90,"rect",46),t.qZA()(),t._uU(91," prerequisito"),t.qZA()()(),t.kcU(),t._UZ(92,"br"),t.TgZ(93,"label",11),t._uU(94,"Testimonio experto"),t.qZA(),t._UZ(95,"input",47),t.YNc(96,pZ,2,1,"ng-container",9),t.TgZ(97,"div",31),t._UZ(98,"textarea",48),t.YNc(99,gZ,2,1,"ng-container",9),t.qZA(),t.TgZ(100,"div",10),t._uU(101,"Ingresa el testimonio experto del producto con el cual ser\xe1 visible (m\xe1ximo 1000 caracteres)."),t.qZA()()()(),t.YNc(102,AZ,49,10,"div",49),t.TgZ(103,"div",2)(104,"div",3)(105,"div",4)(106,"h2"),t._uU(107,"Precio"),t.qZA()()(),t.TgZ(108,"div",5)(109,"div",50)(110,"div",51)(111,"label",7),t._uU(112,"Precio base"),t.qZA(),t.TgZ(113,"input",52),t.NdJ("change",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.changePrices())}),t.qZA(),t.YNc(114,MZ,3,2,"ng-container",9),t.TgZ(115,"div",10),t._uU(116,"Ingresa el precio del producto."),t.qZA()(),t._UZ(117,"div",51),t.qZA()()()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(10),t.ekj("is-invalid",e.productInvalid),t.xp6(1),t.Q6J("ngIf",e.productInvalid),t.xp6(7),t.ekj("is-invalid",e.descInvalid),t.xp6(1),t.Q6J("overflow",!0),t.xp6(20),t.Q6J("ngIf",e.descInvalid),t.xp6(7),t.ekj("is-invalid",e.descCortaInvalid),t.xp6(1),t.Q6J("overflow",!0),t.xp6(20),t.Q6J("ngIf",e.descCortaInvalid),t.xp6(14),t.Q6J("hidden",!e.complex),t.xp6(3),t.Q6J("ngForOf",e.checklistArray.controls),t.xp6(2),t.Q6J("disabled",!e.editProduct),t.xp6(9),t.ekj("is-invalid",e.authorInvalid),t.xp6(1),t.Q6J("ngIf",e.authorInvalid),t.xp6(2),t.ekj("is-invalid",e.testimonyInvalid),t.xp6(1),t.Q6J("ngIf",e.testimonyInvalid),t.xp6(3),t.Q6J("ngIf",!e.isCreate),t.xp6(11),t.ekj("is-invalid",e.precioInvalid),t.xp6(1),t.Q6J("ngIf",e.precioInvalid)}}let NZ=(()=>{class i{constructor(e,n,s,a){this.productoProvider=e,this.formBuilder=n,this.userProvider=s,this.sanitizer=a,this.formChange=new t.vpe,this.fotoPortada=new t.vpe,this.checkDiscount=xo.porcent,this.viewPercentDiv=!0,this.viewFixedDiv=!1,this.rangeDiscount="10",this.activeNoDiscount=!1,this.activePercent=!0,this.activeFixed=!1,this.activeDragImage=!1,this.progressBarImage=0,this.uploadImages=[],this.editProduct=!1,this.editProduct=s.hasPermission(Ss.Q.UPDATE_PRODUCTO)}ngOnChanges(e){this.loadDocumentos(),this.loadDiscount()}ngOnInit(){this.loadDocumentos(),this.loadDiscount()}get isCreate(){return this.pagCreate==qs.I.new}get productInvalid(){return this.form.get("name")?.invalid&&this.form.get("name")?.touched}get descInvalid(){return this.form.get("description")?.invalid&&this.form.get("description")?.touched}get descCortaInvalid(){return this.form.get("shortDescription")?.invalid&&this.form.get("shortDescription")?.touched}get precioInvalid(){return this.form.get("price")?.invalid&&this.form.get("price")?.touched}get precioFixedInvalid(){return this.form.get("priceFixed")?.invalid&&this.form.get("priceFixed")?.touched}get authorInvalid(){return this.form.get("author")?.invalid&&this.form.get("author")?.touched}get testimonyInvalid(){return this.form.get("testimony")?.invalid&&this.form.get("testimony")?.touched}get textFichaTec(){return this.pdfFichaTecnica?this.pdfFichaTecnica.vch_nombre:"Sin Archivo"}get textFichaProd(){return this.pdfFichaProducto?this.pdfFichaProducto.vch_nombre:"Sin Archivo"}get textLinkProd(){return this.LinkProducto?this.LinkProducto.vch_url:"Sin Link"}get progressFichaTecnica(){return this.uploadPDFFT&&!this.uploadPDFFT?.done?`${this.uploadPDFFT?.progress}%`:"Ver"}get progressFichaProducto(){return this.uploadPDFFP&&!this.uploadPDFFP?.done?`${this.uploadPDFFP?.progress}%`:"Ver"}urlInvalid(e){return this.urlArray.at(e).get("name")?.invalid&&this.urlArray.at(e).get("name")?.touched}loadDiscount(){this.onChangeRBDiscount(this.form.get("hasDiscount")?.value),this.rangeDiscount=this.form.get("percentDiscount")?.value}loadDocumentos(){if(console.log(this.producto.data?.tbl_documentos),this.imagenes=this.producto.data?.tbl_documentos?this.producto.data.tbl_documentos.filter(e=>1==e.int_tipo&&e.estado):[],this.producto.data?.tbl_documentos){const e=this.producto.data.tbl_documentos.filter(s=>2==s.int_tipo&&s.estado);this.pdfFichaTecnica=e.length>0?e[0]:void 0,this.pdfFichaTecnica&&(this.uploadPDFFT={progress:0,done:!0,pdf:this.pdfFichaTecnica});const n=this.producto.data.tbl_documentos.filter(s=>3==s.int_tipo&&s.estado);this.pdfFichaProducto=n.length>0?n[0]:void 0,this.pdfFichaProducto&&(this.uploadPDFFP={progress:0,done:!0,pdf:this.pdfFichaProducto})}}deleteImage(e){var s,n=this;this.imagenes=this.imagenes.filter(s=>s.id!=e.id),this.productoProvider.deleteFile(e.id).subscribe({next:(s=(0,ze.Z)(function*(a){console.log("Documento eliminado correctamente",a);const d={id_user:n.userProvider.usuario.id,id_product:n.producto.data?.id,logType:7,setLog:!0,url:e.vch_url,type:"img",action:"remove"};yield(0,Je.z)(n.productoProvider.postBitacora(d))}),function(d){return s.apply(this,arguments)}),error:s=>console.error("Error al tratar de eliminar el documento")})}favImage(e){this.productoProvider.upFotoPortada({idProducto:this.producto.data?.id,idDocumento:e.id}).subscribe({next:s=>{console.log("seteado correctamente");const a=this.imagenes.find(p=>p.id==e.id),d=this.imagenes.indexOf(a),f=this.imagenes.find(p=>p.bit_fotoportada);if(f){const p=this.imagenes.indexOf(f);this.imagenes[p].bit_fotoportada=!1}this.imagenes[d].bit_fotoportada=!0,e.bit_fotoportada=!0,this.fotoPortada.emit(e)},error:s=>console.error("Error al tratar de setear la foto portada",s)})}onChangeRBDiscount(e){switch(e){case"1":this.optnoDiscount();break;case"2":this.optPorcent();break;case"3":this.optFixed();break;default:this.checkDiscount=xo.noDiscount}}optnoDiscount(){this.checkDiscount=xo.noDiscount,this.viewFixedDiv=!1,this.viewPercentDiv=!1,this.activeNoDiscount=!0,this.activePercent=!1,this.activeFixed=!1,this.form.get("priceFixed")?.clearValidators(),this.form.get("priceFixed").updateValueAndValidity(),this.changePrices()}optPorcent(){this.checkDiscount=xo.porcent,this.viewFixedDiv=!1,this.viewPercentDiv=!0,this.activeNoDiscount=!1,this.activePercent=!0,this.activeFixed=!1,this.form.get("priceFixed")?.clearValidators(),this.form.get("priceFixed").updateValueAndValidity(),this.changePrices()}optFixed(){this.checkDiscount=xo.fixed,this.viewFixedDiv=!0,this.viewPercentDiv=!1,this.activeNoDiscount=!1,this.activePercent=!1,this.activeFixed=!0,this.form.get("priceFixed").addValidators([H.kI.required,H.kI.min(1)]),this.form.get("priceFixed").updateValueAndValidity(),this.changePrices()}setSalePrice(e){console.log(e),this.form.controls.salePrice.setValue(e)}changePrices(){switch(this.checkDiscount){case xo.noDiscount:this.setSalePrice(this.form.get("price")?.value);break;case xo.porcent:if(""!=this.form.get("price")?.value&&""!=this.form.get("percentDiscount")?.value){const e=this.form.get("price")?.value*Number(this.rangeDiscount)/100;this.setSalePrice(this.form.get("price")?.value-e)}break;case xo.fixed:if(""!=this.form.get("price")?.value&&""!=this.form.get("priceFixed")?.value){const e=this.form.get("priceFixed")?.value;this.setSalePrice(this.form.get("price")?.value-e)}}}dragOver(e){this.activeDragImage=!0,e.preventDefault()}drop(e){console.log("DROP",e),this.activeDragImage=!1,e.preventDefault()}leave(){this.activeDragImage=!1}onChangeFile(e){if(console.log(e.target.files),!e.target.files)return;const n=e.target.files;for(let s=0;s<n.length;s++)this.uploadImages.push({progress:0,image:n[s].name,done:!1}),this.addFileBD(n[s],s,1)}addFileBD(e,n,s){var f,a=this;this.productoProvider.addFile({doc:e,id_producto:this.producto.data?.id,int_tipo:s}).subscribe({next:(f=(0,ze.Z)(function*(p){if(p.type===jh.dt.UploadProgress){const g=Math.round(100*p.loaded/p.total);1==s?a.uploadImages[n].progress=g:2==s?a.uploadPDFFT.progress=g:a.uploadPDFFP.progress=g}else if(p instanceof jh.Zn){const g=p.body,b={id_user:a.userProvider.usuario.id,id_product:a.producto.data?.id,logType:7,setLog:!0};1==s?(a.imagenes.push(g.data),a.uploadImages[n].done=!0,b.url=g.data?.vch_url,b.type="img",b.action="add",yield(0,Je.z)(a.productoProvider.postBitacora(b))):2==s?(a.uploadPDFFT.done=!0,a.uploadPDFFT.pdf=g.data,a.pdfFichaTecnica=g.data,b.url=g.data?.vch_url,b.type="pdf",b.action="add",yield(0,Je.z)(a.productoProvider.postBitacora(b))):(a.uploadPDFFP.done=!0,a.uploadPDFFP.pdf=g.data,a.pdfFichaProducto=g.data,b.url=g.data?.vch_url,b.type="pdf",b.action="add",yield(0,Je.z)(a.productoProvider.postBitacora(b)))}}),function(g){return f.apply(this,arguments)}),error:f=>console.error("error al tratar de subir la imagen",f)})}deleteProgress(e){this.uploadImages=this.uploadImages.filter(n=>n!=e)}addFilePDF(e,n){if(!e.target.files)return;const s=e.target.files[0];1==n?(this.deletePDF(!0),this.uploadPDFFT={progress:0,done:!1},this.addFileBD(s,0,2)):(this.deletePDF(!1),this.uploadPDFFP={progress:0,done:!1},this.addFileBD(s,1,3))}deletePDF(e){e?this.uploadPDFFT?.pdf&&this.deleteImage(this.uploadPDFFT.pdf):this.uploadPDFFP?.pdf&&this.deleteImage(this.uploadPDFFP.pdf)}verPDF(e){if(1==e){if(!this.pdfFichaTecnica)return;window.open(this.pdfFichaTecnica?.vch_url)}else{if(!this.pdfFichaProducto)return;window.open(this.pdfFichaProducto?.vch_url)}}get complex(){return this.form.get("complex")?.value}get checklistArray(){return this.form.get("checklist")}get urlArray(){return this.form.get("youtube")}nameCheckInvalid(e){return this.checklistArray.at(e).get("name")?.invalid&&this.checklistArray.at(e).get("name")?.touched}deleteChecklist(e){this.checklistArray.removeAt(e)}addChecklist(){this.checklistArray.push(this.formBuilder.group({name:["",[H.kI.required,H.kI.maxLength(200)]]}))}getMiniatura(e){const n=e.split("/")[e.split("/").length-1];return null===n?"https://www.agroworldspain.com/img/noimage.png":`http://img.youtube.com/vi/${n}/mqdefault.jpg`}changeUrl(e,n,s,a){for(let d of this.urlArray.controls)if(d.get("name")?.value==e&&d!=this.urlArray.controls[a])return this.urlArray.removeAt(a),void alert("ya existe esa url");n.src=this.getMiniatura(e)}addURL(){3!=this.urlArray.length&&(this.urlArray.push(this.formBuilder.group({name:["",[H.kI.required]],id:["*"]})),this.urlArray.updateValueAndValidity())}deleteURL(e){this.urlArray.removeAt(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M),t.Y36(H.qu),t.Y36(ft.i),t.Y36(Qh.H7))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-general-view"]],inputs:{producto:"producto",form:"form",pagCreate:"pagCreate"},outputs:{formChange:"formChange",fotoPortada:"fotoPortada"},features:[t.TTD],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"card","card-flush","py-4"],[1,"card-header"],[1,"card-title"],[1,"card-body","pt-0"],[1,"mb-10","fv-row"],[1,"required","form-label"],["type","text","name","productName","placeholder","Nombre producto","formControlName","name",1,"form-control","mb-2"],[4,"ngIf"],[1,"text-muted","fs-7"],[1,"form-label"],["id","kt_ecommerce_add_product_description",1,"mb-10"],["name","txtDescripcion","id","","rows","10","formControlName","description",1,"form-control"],[3,"overflow"],["toolbar",""],["kendoEditorBoldButton",""],["kendoEditorItalicButton",""],["kendoEditorUnderlineButton",""],["kendoEditorInsertUnorderedListButton",""],["kendoEditorInsertOrderedListButton",""],["kendoEditorIndentButton",""],["kendoEditorOutdentButton",""],["kendoEditorFontFamily",""],["kendoEditorFormat",""],["kendoEditorAlignLeftButton",""],["kendoEditorAlignCenterButton",""],["kendoEditorAlignRightButton",""],["kendoEditorAlignJustifyButton",""],["kendoEditorCreateLinkButton",""],["kendoEditorUnlinkButton",""],[1,"mb-10"],["name","txtDescripcionCorta","id","","rows","7","formControlName","shortDescription",1,"form-control"],[1,"fv-row"],[1,"form-check","form-check-custom","form-check-solid","mb-2"],["type","checkbox","formControlName","complex",1,"form-check-input"],[1,"form-check-label"],[1,"fv-row",3,"hidden"],[1,"form-group"],["data-repeater-list","kt_ecommerce_add_product_options",1,"d-flex","flex-column","gap-3"],["class","row",4,"ngFor","ngForOf"],[1,"form-group","mt-5"],["type","button","data-repeater-create","",1,"btn","btn-sm","btn-light-primary",3,"disabled","click"],[1,"svg-icon","svg-icon-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","11","y","18","width","12","height","2","rx","1","transform","rotate(-90 11 18)","fill","currentColor"],["x","6","y","11","width","12","height","2","rx","1","fill","currentColor"],["type","text","name","author","placeholder","Autor","formControlName","author",1,"form-control","mb-2"],["name","txtTestimony","id","","rows","7","formControlName","testimony",1,"form-control"],["class","card card-flush py-4",4,"ngIf"],[1,"mb-10","fv-row","row"],[1,"col"],["type","number","name","price","placeholder","Precio del producto","formControlName","price",1,"form-control","mb-2",3,"change"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"row"],["divChecklist",""],[1,"col-10"],["rows","2","formControlName","name",1,"form-control"],["type","button","data-repeater-delete","","class","btn btn-sm btn-icon btn-light-danger",3,"click",4,"ngIf"],[1,"m-5","w-75"],["type","button","data-repeater-delete","",1,"btn","btn-sm","btn-icon","btn-light-danger",3,"click"],["opacity","0.5","x","7.05025","y","15.5356","width","12","height","2","rx","1","transform","rotate(-45 7.05025 15.5356)","fill","currentColor"],["x","8.46447","y","7.05029","width","12","height","2","rx","1","transform","rotate(45 8.46447 7.05029)","fill","currentColor"],["class","card-body pt-0",4,"ngIf"],[1,"col-3"],[1,"btn","btn-primary",3,"disabled","click"],["type","file","name","fichaTecnica","accept",".pdf",1,"form-control","mb-2",2,"display","none",3,"change"],["pdfFT",""],[1,"col-6"],["type","text","readonly","",1,"form-control","mb-2",3,"value"],[1,"btn","btn-light",3,"click"],["type","file","name","fichaProducto","accept",".pdf",1,"form-control","mb-2",2,"display","none",3,"change"],["pdfFP",""],[1,"fv-row","mb-2"],[1,"dropzone",3,"ngClass","dragover","drop","dragleave"],["class","dz-message needsclick",3,"ngClass","click",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["type","file","accept","image/*","multiple","true",2,"display","none",3,"change"],["imgUp",""],[1,"dz-message","needsclick",3,"ngClass","click"],[1,"bi","bi-file-earmark-arrow-up","text-primary","fs-3x"],[1,"ms-4"],[1,"fs-5","fw-bolder","text-gray-900","mb-1"],[1,"fs-7","fw-bold","text-gray-400"],[3,"click"],[3,"showValue","type","value","striped"],["class","col-sm-6 col-md-3 m-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-3","m-4"],["class","imgCarousel",3,"click",4,"ngIf"],["class","favorite",3,"click",4,"ngIf"],["alt","...",1,"img-thumbnail",3,"src"],[1,"imgCarousel",3,"click"],[1,"fa-sharp","fa-solid","fa-circle-xmark","text-danger","fa-2xl","hov"],[1,"favorite",3,"click"],[1,"fa-regular","fa-image","fa-2xl","hov",3,"ngClass"],["divLink",""],["type","text","placeholder","Url","formControlName","name",1,"form-control","mw-100",3,"change"],["urlYou",""],[1,"col-5"],["height","180","width","320",3,"src","alt"],["imgUrl",""]],template:function(e,n){1&e&&t.YNc(0,RZ,118,25,"form",0),2&e&&t.Q6J("ngIf",n.form)},dependencies:[X.mk,X.sg,X.O5,H._Y,H.Fj,H.wV,H.Wl,H.JJ,H.JL,H.sg,H.u,Tt.Ly,AI,Rb,Nb,Fb,Lb,Bb,Gb,Zb,Hb,Ub,Pb,Ob,Ib,Mb,UT,Db,_l,$t,Ru],styles:['.imgCarousel[_ngcontent-%COMP%]{position:relative;float:right;top:10%}.favorite[_ngcontent-%COMP%]{position:relative;float:left;top:10%}.hov[_ngcontent-%COMP%]{transition:all .5s ease;width:15%}.hov[_ngcontent-%COMP%]:hover{transform:scale(1.5);cursor:pointer}.dropzone[_ngcontent-%COMP%]:hover{cursor:pointer}.dropzone[_ngcontent-%COMP%]{min-height:auto!important;padding:1.5rem 1.75rem;text-align:center;cursor:pointer;border:1px dashed #009ef7;background-color:#f1faff!important;border-radius:.475rem!important;min-height:150px;background:#fff;box-sizing:border-box}.dropzone[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{margin:0;display:flex;text-align:left}.drag[_ngcontent-%COMP%]{opacity:.5}.dropzonehover[_ngcontent-%COMP%]{border-style:solid!important}.lds-hourglass[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-hourglass[_ngcontent-%COMP%]:after{content:" ";display:block;border-radius:50%;width:0;height:0;margin:8px;box-sizing:border-box;border:32px solid #fff;border-color:rgb(10,10,233) transparent rgb(18,18,229) transparent;animation:lds-hourglass 1.2s infinite}@keyframes lds-hourglass{0%{transform:rotate(0);animation-timing-function:cubic-bezier(.55,.055,.675,.19)}50%{transform:rotate(900deg);animation-timing-function:cubic-bezier(.215,.61,.355,1)}to{transform:rotate(1800deg)}}']}),i})();var xo=(()=>(function(i){i[i.noDiscount=0]="noDiscount",i[i.porcent=1]="porcent",i[i.fixed=2]="fixed"}(xo||(xo={})),xo))(),GT=Oe(4619);function FZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",37),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.addTecnico(a))}),t.TgZ(1,"div",38)(2,"div",39)(3,"label",40),t._UZ(4,"i",41),t.qZA(),t.TgZ(5,"div",42)(6,"span",43),t._uU(7),t.qZA(),t.TgZ(8,"div",44),t._uU(9),t.qZA()()()(),t._UZ(10,"div",45),t.qZA()}if(2&i){const e=r.$implicit;t.xp6(7),t.Oqu(e.vch_nombre),t.xp6(2),t.Oqu(e.vch_tecepecialidad)}}function LZ(i,r){if(1&i&&(t.TgZ(0,"div",34)(1,"div",35),t.YNc(2,FZ,11,2,"div",36),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tecnicos)}}const NI=function(i){return{"d-none":i}};let PZ=(()=>{class i{constructor(e,n,s){this.productService=e,this.toastService=n,this.formBuilder=s,this.tecnicoSelect=new t.vpe,this.loading=!1,this.tieneValue=!1,this.noResultados=!0,this.firstLoad=!0,this.formSearch=s.group({nombre:""})}ngOnChanges(e){console.log("up desde tecnicos",e),e.idEmpresa&&this.load()}ngOnInit(){}load(){this.getTecnicos(null)}get getShowNoResult(){return this.noResultados&&!this.firstLoad}submit(){let e=null;return this.firstLoad=!1,(this.formSearch.get("nombre")||""==this.formSearch.get("nombre").value)&&(e=this.formSearch.get("nombre").value),this.getTecnicos(e),!1}getTecnicos(e){const n={id_empresa:this.idEmpresa};e&&(n.vch_nombre=e),console.log(n),this.loading=!0,this.productService.getTecnicos(n).subscribe({next:s=>{s.data&&s.data.length>0?(this.tecnicos=s.data,this.noResultados=!(this.tecnicos.length>0)):this.noResultados=!0},error:s=>{console.error("error al tratar de buscar los datos",s),this.noResultados=!0,this.loading=!1},complete:()=>this.loading=!1})}addTecnico(e){this.tecnicoSelect.emit(e),this.modal.dismiss()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M),t.Y36(lt.k),t.Y36(H.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-search-tecnico"]],inputs:{modal:"modal",idEmpresa:"idEmpresa"},outputs:{tecnicoSelect:"tecnicoSelect"},features:[t.TTD],decls:40,vars:8,consts:[["id","kt_modal_users_search","tabindex","-1","aria-hidden","true"],[1,"modal-dialog","modal-dialog-centered","mw-800px"],[1,"modal-content"],[1,"modal-header","pb-0","border-0","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-18","pt-0","pb-15"],[1,"text-center","mb-13"],[1,"mb-3"],[1,"text-muted","fw-bold","fs-5"],["id","kt_modal_users_search_handler","data-kt-search-keypress","true","data-kt-search-min-length","2","data-kt-search-enter","enter","data-kt-search-layout","inline"],["data-kt-search-element","form","autocomplete","off",1,"w-100","position-relative","mb-5",3,"formGroup","submit"],["type","hidden"],[1,"row","mb-5"],[1,"col-md-5","fv-row"],[1,"fs-5","fw-bold","mb-2"],["type","text","placeholder","","name","name","formControlName","nombre",1,"form-control","form-control-solid"],["nombre",""],[1,"col-md-2","fv-row","text-center"],["type","submit"],[1,"fa-solid","fa-magnifying-glass"],["data-kt-search-element","spinner",1,"m-0","row","justify-content-center",3,"ngClass"],[1,"spinner-border","h-15px","w-15px","align-middle","text-muted"],[1,"py-5"],["data-kt-search-element","results","class","",4,"ngIf"],["data-kt-search-element","empty",1,"text-center",3,"ngClass"],[1,"fw-bold","py-10"],[1,"text-gray-600","fs-3","mb-2"],[1,"text-muted","fs-6"],[1,"text-center","px-5"],["src","assets/media/illustrations/sketchy-1/1.png","alt","",1,"w-100","h-200px","h-sm-325px"],["data-kt-search-element","results",1,""],[1,"mh-375px","scroll-y","me-n7","pe-7"],["class","text-hover-primary","style","cursor:pointer;",3,"click",4,"ngFor","ngForOf"],[1,"text-hover-primary",2,"cursor","pointer",3,"click"],["data-user-id","0",1,"rounded","d-flex","flex-stack","bg-active-lighten","p-4"],[1,"d-flex","align-items-center"],[1,"form-check","form-check-custom","form-check-solid","me-5"],[1,"fa-solid","fa-plus","text"],[1,"ms-5"],[1,"fs-5","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"fw-bold","text-muted"],[1,"border-bottom","border-gray-300","border-bottom-dashed"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.NdJ("click",function(){return n.modal.dismiss()}),t.TgZ(5,"span",5),t.O4$(),t.TgZ(6,"svg",6),t._UZ(7,"rect",7)(8,"rect",8),t.qZA()()()(),t.kcU(),t.TgZ(9,"div",9)(10,"div",10)(11,"h1",11),t._uU(12,"Buscar T\xe9cnico"),t.qZA(),t.TgZ(13,"div",12),t._uU(14,"Agrega t\xe9cnico"),t.qZA()(),t.TgZ(15,"div",13)(16,"form",14),t.NdJ("submit",function(){return n.submit()}),t._UZ(17,"input",15),t.TgZ(18,"div",16)(19,"div",17)(20,"label",18),t._uU(21,"Nombre"),t.qZA(),t._UZ(22,"input",19,20),t.qZA(),t.TgZ(24,"div",21),t._UZ(25,"label",18),t.TgZ(26,"button",22),t._UZ(27,"i",23),t.qZA()()()(),t.TgZ(28,"span",24),t._UZ(29,"span",25),t.qZA(),t.TgZ(30,"div",26),t.YNc(31,LZ,3,1,"div",27),t.TgZ(32,"div",28)(33,"div",29)(34,"div",30),t._uU(35,"T\xe9cnico no encontrado"),t.qZA(),t.TgZ(36,"div",31),t._uU(37,"Trata de buscar por nombre del t\xe9cnico"),t.qZA()(),t.TgZ(38,"div",32),t._UZ(39,"img",33),t.qZA()()()()()()()()),2&e&&(t.xp6(16),t.Q6J("formGroup",n.formSearch),t.xp6(12),t.Q6J("ngClass",t.VKq(4,NI,!n.loading)),t.xp6(3),t.Q6J("ngIf",!n.noResultados),t.xp6(1),t.Q6J("ngClass",t.VKq(6,NI,!n.getShowNoResult)))},dependencies:[X.mk,X.sg,X.O5,H._Y,H.Fj,H.JJ,H.JL,H.sg,H.u]}),i})();var zT=Oe(4383);function UZ(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Es requerido "),t.qZA())}function BZ(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Lo m\xednimo es 3 caracteres "),t.qZA())}function GZ(i,r){if(1&i&&(t.ynx(0),t.YNc(1,UZ,2,0,"small",75),t.YNc(2,BZ,2,0,"small",75),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.sku.errors?null:e.form.controls.sku.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.sku.errors?null:e.form.controls.sku.errors.minlength)}}function zZ(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Es requerido "),t.qZA())}function ZZ(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Lo m\xednimo es 0 "),t.qZA())}function HZ(i,r){if(1&i&&(t.ynx(0),t.YNc(1,zZ,2,0,"small",75),t.YNc(2,ZZ,2,0,"small",75),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.stock.errors?null:e.form.controls.stock.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.stock.errors?null:e.form.controls.stock.errors.min)}}function VZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",82),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().index,a=t.oxw(2);return t.KtG(a.deletePropiedad(s))}),t.TgZ(1,"span",29),t.O4$(),t.TgZ(2,"svg",30),t._UZ(3,"rect",83)(4,"rect",84),t.qZA()()()}}function JZ(i,r){if(1&i&&(t.TgZ(0,"div",77,78),t.ynx(2,2),t._UZ(3,"input",79)(4,"input",80),t.YNc(5,VZ,5,0,"button",81),t.BQk(),t.qZA()),2&i){const e=r.$implicit,n=r.index,s=t.oxw(2);t.xp6(2),t.Q6J("formGroup",e),t.xp6(1),t.ekj("is-invalid",s.namePropInvalid(n)),t.xp6(1),t.ekj("is-invalid",s.valuePropInvalid(n)),t.xp6(1),t.Q6J("ngIf",s.editProduct)}}function qZ(i,r){1&i&&(t.TgZ(0,"label",85),t._uU(1,"Porcentaje del costo de instalaci\xf3n"),t.qZA())}function YZ(i,r){1&i&&t._UZ(0,"input",86)}function KZ(i,r){1&i&&(t.TgZ(0,"label",87),t._uU(1,"Costo de instalaci\xf3n"),t.qZA())}function $Z(i,r){if(1&i&&(t.TgZ(0,"h4",88),t._uU(1),t.ALo(2,"numberFormat"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Oqu(t.xi3(2,1,e.getInstallationValue(),"$"))}}function WZ(i,r){1&i&&(t.TgZ(0,"label",89),t._uU(1,"Stock preventa"),t.qZA())}function jZ(i,r){1&i&&t._UZ(0,"input",90)}function QZ(i,r){1&i&&(t.TgZ(0,"label",91),t._uU(1,"Fecha final de preventa"),t.qZA())}function XZ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",92),t._UZ(1,"input",93,94),t.TgZ(3,"button",95),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(2);return t.KtG(s.toggle())}),t._uU(4," . "),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.ekj("is-invalid",e.presaleDate)}}function e9(i,r){1&i&&(t.TgZ(0,"label",96),t._uU(1,"Tiempo estimado de despacho"),t.qZA())}function t9(i,r){if(1&i&&t._UZ(0,"input",97),2&i){const e=t.oxw(2);t.ekj("is-invalid",e.onDemandDays)}}function n9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"label",98)(2,"span",99)(3,"input",100),t.NdJ("change",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.onChangeTipoProd(a))}),t.qZA()(),t.TgZ(4,"span",101)(5,"span",102),t._uU(6),t.qZA()()()()}if(2&i){const e=r.$implicit;t.xp6(3),t.Q6J("value",e.id),t.xp6(3),t.Oqu(e.vch_nombre)}}function i9(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Es requerido "),t.qZA())}function r9(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Lo m\xednimo es 0 "),t.qZA())}function s9(i,r){if(1&i&&(t.ynx(0),t.YNc(1,i9,2,0,"small",75),t.YNc(2,r9,2,0,"small",75),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.weight.errors?null:e.form.controls.weight.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.weight.errors?null:e.form.controls.weight.errors.min)}}function o9(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Es requerido "),t.qZA())}function a9(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Lo m\xednimo es 0 "),t.qZA())}function l9(i,r){if(1&i&&(t.ynx(0),t.YNc(1,o9,2,0,"small",75),t.YNc(2,a9,2,0,"small",75),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.width.errors?null:e.form.controls.width.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.width.errors?null:e.form.controls.width.errors.min)}}function c9(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Es requerido "),t.qZA())}function d9(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Lo m\xednimo es 0 "),t.qZA())}function u9(i,r){if(1&i&&(t.ynx(0),t.YNc(1,c9,2,0,"small",75),t.YNc(2,d9,2,0,"small",75),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.length.errors?null:e.form.controls.length.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.length.errors?null:e.form.controls.length.errors.min)}}function h9(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Es requerido "),t.qZA())}function f9(i,r){1&i&&(t.TgZ(0,"small",76),t._uU(1," Lo m\xednimo es 0 "),t.qZA())}function p9(i,r){if(1&i&&(t.ynx(0),t.YNc(1,h9,2,0,"small",75),t.YNc(2,f9,2,0,"small",75),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.height.errors?null:e.form.controls.height.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.height.errors?null:e.form.controls.height.errors.min)}}function m9(i,r){1&i&&(t.TgZ(0,"div",103)(1,"div",104)(2,"strong"),t._uU(3,"Debe guardar el producto antes de ingresar t\xe9cnicos"),t.qZA()()())}function g9(i,r){1&i&&(t.TgZ(0,"p")(1,"ngb-alert",105)(2,"strong"),t._uU(3,"Sin t\xe9cnicos"),t.qZA(),t._uU(4,' Presiona "agregar t\xe9cnico". '),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("dismissible",!1))}function _9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",114)(3,"div",115)(4,"span",116),t._uU(5),t.qZA()()()(),t.TgZ(6,"td")(7,"span",117),t._uU(8),t.qZA()(),t.TgZ(9,"td",118)(10,"button",119),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(3);return t.KtG(d.deleteTecnicoBD(a))}),t._UZ(11,"span",73),t.qZA()()()}if(2&i){const e=r.$implicit;t.xp6(5),t.hij(" ",e.vch_nombre," "),t.xp6(3),t.hij(" ",e.vch_tecepecialidad," "),t.xp6(3),t.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}function v9(i,r){if(1&i&&(t.TgZ(0,"div",106)(1,"div",107)(2,"table",108)(3,"thead")(4,"tr",109)(5,"th",110),t._uU(6,"T\xe9cnico"),t.qZA(),t.TgZ(7,"th",111),t._uU(8,"Especialidad"),t.qZA(),t._UZ(9,"th",112),t.qZA()(),t.TgZ(10,"tbody"),t.YNc(11,_9,12,3,"tr",113),t.qZA()()()()),2&i){const e=t.oxw(2);t.xp6(11),t.Q6J("ngForOf",e.tecnicos)}}const ZT=function(i){return{"d-none":i}};function b9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"form",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h2"),t._uU(5,"Inventario"),t.qZA()()(),t.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"label",9),t._uU(10,"SKU"),t.qZA(),t._UZ(11,"input",10),t.YNc(12,GZ,3,2,"ng-container",11),t.TgZ(13,"div",12),t._uU(14,"Ingresa el SKU del producto."),t.qZA()(),t.TgZ(15,"div",8)(16,"label",9),t._uU(17,"SKU en aibomarket.com"),t.qZA(),t._UZ(18,"input",13),t.qZA()(),t.TgZ(19,"div",14)(20,"label",15),t._uU(21,"Cantidad"),t.qZA(),t.TgZ(22,"div",16),t._UZ(23,"input",17),t.YNc(24,HZ,3,2,"ng-container",11),t.qZA(),t.TgZ(25,"div",12),t._uU(26,"Ingresa el stock del producto."),t.qZA()(),t.TgZ(27,"div",18)(28,"label",9),t._uU(29,"Permitir reservas"),t.qZA(),t.TgZ(30,"div",19),t._UZ(31,"input",20),t.TgZ(32,"label",21),t._uU(33,"S\xed"),t.qZA()(),t.TgZ(34,"div",12),t._uU(35,"Permitir a los usuarios hacer reservas de este producto."),t.qZA()()()(),t.TgZ(36,"div",3)(37,"div",4)(38,"div",5)(39,"h2"),t._uU(40,"Propiedades variables del producto"),t.qZA()()(),t.TgZ(41,"div",6)(42,"div",22)(43,"label",9),t._uU(44,"Agrega propiedades variables"),t.qZA(),t.TgZ(45,"div",23)(46,"div",24)(47,"div",25),t.YNc(48,JZ,6,6,"div",26),t.qZA()(),t.TgZ(49,"div",27)(50,"button",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addPropiedad())}),t.TgZ(51,"span",29),t.O4$(),t.TgZ(52,"svg",30),t._UZ(53,"rect",31)(54,"rect",32),t.qZA()(),t._uU(55,"propiedad"),t.qZA()()()()()(),t.kcU(),t.TgZ(56,"div",3)(57,"div",4)(58,"div",5)(59,"h2"),t._uU(60,"Instalaci\xf3n"),t.qZA()()(),t.TgZ(61,"div",33)(62,"div",34)(63,"div",35)(64,"label",36),t._uU(65,"Requiere instalaci\xf3n"),t.qZA(),t._UZ(66,"input",37),t.qZA(),t.TgZ(67,"div",38),t.YNc(68,qZ,2,0,"label",39),t.YNc(69,YZ,1,0,"input",40),t.qZA(),t.TgZ(70,"div",41),t.YNc(71,KZ,2,0,"label",42),t.YNc(72,$Z,3,4,"h4",43),t.qZA()()()(),t.TgZ(73,"div",3)(74,"div",4)(75,"div",5)(76,"h2"),t._uU(77,"Preventa"),t.qZA()()(),t.TgZ(78,"div",33)(79,"div",34)(80,"div",35)(81,"label",36),t._uU(82,"Activar preventa"),t.qZA(),t._UZ(83,"input",44),t.qZA(),t.TgZ(84,"div",38),t.YNc(85,WZ,2,0,"label",45),t.YNc(86,jZ,1,0,"input",46),t.qZA(),t.TgZ(87,"div",38),t.YNc(88,QZ,2,0,"label",47),t.YNc(89,XZ,5,2,"div",48),t.qZA()()()(),t.TgZ(90,"div",3)(91,"div",4)(92,"div",5)(93,"h2"),t._uU(94,"A pedido"),t.qZA()()(),t.TgZ(95,"div",33)(96,"div",34)(97,"div",35)(98,"label",36),t._uU(99,"Activar a pedido"),t.qZA(),t._UZ(100,"input",49),t.qZA(),t.TgZ(101,"div",38),t.YNc(102,e9,2,0,"label",50),t.YNc(103,t9,1,2,"input",51),t.qZA(),t._UZ(104,"div",38),t.qZA()()(),t.TgZ(105,"div",3)(106,"div",4)(107,"div",5)(108,"h2"),t._uU(109,"Env\xedo"),t.qZA()()(),t.TgZ(110,"div",6)(111,"div",52)(112,"label",53),t._uU(113,"Tipo de producto "),t._UZ(114,"i",54),t.qZA(),t.TgZ(115,"div",55),t.YNc(116,n9,7,2,"div",56),t.qZA()(),t.TgZ(117,"div",57)(118,"div",58)(119,"label",59),t._uU(120,"Peso"),t.qZA(),t._UZ(121,"input",60),t.YNc(122,s9,3,2,"ng-container",11),t.TgZ(123,"div",12),t._uU(124,"Ingresa el peso del producto en kilogramos (kg)."),t.qZA()(),t.TgZ(125,"div",18)(126,"label",59),t._uU(127,"Dimensi\xf3n"),t.qZA(),t.TgZ(128,"div",61),t._UZ(129,"input",62),t.YNc(130,l9,3,2,"ng-container",11),t._UZ(131,"input",63),t.YNc(132,u9,3,2,"ng-container",11),t._UZ(133,"input",64),t.YNc(134,p9,3,2,"ng-container",11),t.qZA(),t.TgZ(135,"div",12),t._uU(136,"Ingresa las dimensiones en milimetros del producto (mm)."),t.qZA()()()()(),t.YNc(137,m9,4,0,"div",65),t.TgZ(138,"div",66)(139,"div",67)(140,"h3",68)(141,"span",69),t._uU(142,"T\xe9cnicos"),t.qZA(),t.TgZ(143,"span",70),t._uU(144,"T\xe9cnicos que har\xe1n la mantenci\xf3n"),t.qZA()(),t.TgZ(145,"div",71)(146,"button",72),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(),a=t.MAs(2);return t.KtG(s.open(a))}),t._UZ(147,"span",73),t._uU(148," Agregar T\xe9cnico "),t.qZA()()(),t.YNc(149,g9,5,1,"p",11),t.YNc(150,v9,12,1,"div",74),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(11),t.ekj("is-invalid",e.skuInvalid),t.xp6(1),t.Q6J("ngIf",e.skuInvalid),t.xp6(6),t.Q6J("disabled",!0)("readOnly",!0),t.xp6(1),t.Q6J("ngClass",t.VKq(41,ZT,e.viewTecnicos)),t.xp6(4),t.ekj("is-invalid",e.stocknvalid),t.xp6(1),t.Q6J("ngIf",e.stocknvalid),t.xp6(24),t.Q6J("ngForOf",e.propertysArray.controls),t.xp6(2),t.Q6J("disabled",!e.editProduct),t.xp6(18),t.Q6J("ngIf",e.showInstallationDiscount),t.xp6(1),t.Q6J("ngIf",e.showInstallationDiscount),t.xp6(2),t.Q6J("ngIf",e.showInstallationDiscount),t.xp6(1),t.Q6J("ngIf",e.showInstallationDiscount),t.xp6(13),t.Q6J("ngIf",e.showPresaleData),t.xp6(1),t.Q6J("ngIf",e.showPresaleData),t.xp6(2),t.Q6J("ngIf",e.showPresaleData),t.xp6(1),t.Q6J("ngIf",e.showPresaleData),t.xp6(13),t.Q6J("ngIf",e.showOnDemandData),t.xp6(1),t.Q6J("ngIf",e.showOnDemandData),t.xp6(13),t.Q6J("ngForOf",e.tipoProductos),t.xp6(1),t.Q6J("ngClass",t.VKq(43,ZT,!e.viewEnvio)),t.xp6(4),t.ekj("is-invalid",e.weightInvalid),t.xp6(1),t.Q6J("ngIf",e.weightInvalid),t.xp6(7),t.ekj("is-invalid",e.widthInvalid),t.xp6(1),t.Q6J("ngIf",e.widthInvalid),t.xp6(1),t.ekj("is-invalid",e.lengthInvalid),t.xp6(1),t.Q6J("ngIf",e.lengthInvalid),t.xp6(1),t.ekj("is-invalid",e.heightInvalid),t.xp6(1),t.Q6J("ngIf",e.heightInvalid),t.xp6(3),t.Q6J("ngIf",e.isCreate&&e.viewTecnicos),t.xp6(1),t.Q6J("ngClass",t.VKq(45,ZT,!e.viewTecnicos||e.isCreate)),t.xp6(9),t.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr075.svg"),t.xp6(2),t.Q6J("ngIf",0==e.tecnicos.length),t.xp6(1),t.Q6J("ngIf",e.tecnicos.length>0)}}function x9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-tecnico",120),t.NdJ("tecnicoSelect",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.addTecnico(s))}),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw();t.Q6J("idEmpresa",n.idEmpresa)("modal",e)}}let C9=(()=>{class i{constructor(e,n,s,a){this.procProvider=e,this.formBuilder=n,this.userService=s,this.modalService=a,this.formChange=new t.vpe,this.action=qs.I.new,this.idEmpresa="",this.tipoProductos=[],this.viewEnvio=!1,this.viewTecnicos=!1,this.tecnicos=[],this.editProduct=!1,this.editProduct=s.hasPermission(Ss.Q.UPDATE_PRODUCTO),this.loadTipoProducto()}ngOnInit(){this.loadPropiedades(),this.loadViewDiscount(),this.loadTecnicos()}loadViewDiscount(){let e=this.producto.data?.tbl_tipo;void 0!==e&&this.onChangeTipoProd(e)}loadTecnicos(){this.tecnicos=this.producto.data?.tecnicos?this.producto.data?.tecnicos:[]}ngOnChanges(e){this.loadPropiedades(),this.loadViewDiscount()}loadTipoProducto(){this.procProvider.getTiposProducto().subscribe({next:e=>this.tipoProductos=e?.data?e.data:[]})}loadPropiedades(){this.propiedades=this.producto.data?.tbl_propiedads?this.producto.data.tbl_propiedads:[]}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{},n=>{})}onChangeTipoProd(e){this.viewEnvio=e.bit_fisico,this.viewTecnicos=!e.bit_fisico&&!e.bit_stock,e.bit_fisico?(this.form.get("weight")?.addValidators([H.kI.required,H.kI.min(0)]),this.form.get("width")?.addValidators([H.kI.required,H.kI.min(0)]),this.form.get("height")?.addValidators([H.kI.required,H.kI.min(0)]),this.form.get("length")?.addValidators([H.kI.required,H.kI.min(0)])):(this.form.get("weight")?.clearValidators(),this.form.get("width")?.clearValidators(),this.form.get("height")?.clearValidators(),this.form.get("length")?.clearValidators()),e.bit_stock?this.form.get("stock")?.addValidators([H.kI.required,H.kI.min(0)]):this.form.get("stock")?.clearValidators(),this.form.get("weight")?.updateValueAndValidity(),this.form.get("width")?.updateValueAndValidity(),this.form.get("height")?.updateValueAndValidity(),this.form.get("length")?.updateValueAndValidity(),this.form.get("stock")?.updateValueAndValidity()}get isCreate(){return this.action==qs.I.new}get showInstallationDiscount(){return this.form.get("installation")?.value}get weightInvalid(){return this.form.get("weight")?.invalid&&this.form.get("weight")?.touched}get widthInvalid(){return this.form.get("width")?.invalid&&this.form.get("width")?.touched}get heightInvalid(){return this.form.get("height")?.invalid&&this.form.get("height")?.touched}get lengthInvalid(){return this.form.get("length")?.invalid&&this.form.get("length")?.touched}get skuInvalid(){return this.form.get("sku")?.invalid&&this.form.get("sku")?.touched}get stocknvalid(){return this.form.get("stock")?.invalid&&this.form.get("stock")?.touched}get showPresaleData(){return this.form.get("presale")?.value}get showOnDemandData(){return this.form.get("onDemand")?.value}get onDemandDays(){return this.form.get("onDemandDays")?.invalid&&this.form.get("onDemandDays")?.touched}get presaleDate(){return this.form.get("presaleDate")?.invalid&&this.form.get("presaleDate")?.touched}get propertysArray(){return this.form.get("propertys")}namePropInvalid(e){return this.propertysArray.at(e).get("name")?.invalid&&this.propertysArray.at(e).get("name")?.touched}valuePropInvalid(e){return this.propertysArray.at(e).get("value")?.invalid&&this.propertysArray.at(e).get("value")?.touched}requidedPropInvalid(e,n){return this.propertysArray.at(n).get(e)?.errors?.required}minPropInvalid(e,n){return this.propertysArray.at(n).get(e)?.errors?.minlength}deletePropiedad(e){this.propertysArray.removeAt(e)}addPropiedad(){this.propertysArray.push(this.formBuilder.group({name:["",[H.kI.required,H.kI.minLength(3)]],value:["",[H.kI.required]]}))}getInstallationValue(){return Math.round(this.producto.data?.db_precio/100*this.form.get("installationDiscount")?.value)}addTecnico(e){null==this.tecnicos.find(s=>s.id==e.id)?this.addTecnicoBD(e):console.warn("Producto ya existe")}addTecnicoBD(e){this.procProvider.addTecnico({id_producto:this.producto.data.id,id_usuario:e.id}).subscribe({next:s=>{console.log("Ingresado con exito"),this.tecnicos.push(e)},error:s=>{6==s?.error?.code&&console.log("ya existe el tecnico vieja")}})}deleteTecnicoBD(e){this.procProvider.deleteTecnico({id_producto:this.producto.data.id,id_usuario:e.id}).subscribe({next:s=>{console.log("Eliminado con \xe9xito"),this.tecnicos=this.tecnicos.filter(a=>a!=e)},error:s=>{console.error("error",s)}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M),t.Y36(H.qu),t.Y36(ft.i),t.Y36(Tt.FF))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-advance-view"]],inputs:{producto:"producto",form:"form",action:"action",idEmpresa:"idEmpresa"},outputs:{formChange:"formChange"},features:[t.TTD],decls:3,vars:1,consts:[[3,"formGroup",4,"ngIf"],["modalTec",""],[3,"formGroup"],[1,"card","card-flush","py-4"],[1,"card-header"],[1,"card-title"],[1,"card-body","pt-0"],[1,"mb-10","row"],[1,"col"],[1,"form-label"],["type","text","name","sku","placeholder","SKU","formControlName","sku",1,"form-control","mb-2"],[4,"ngIf"],[1,"text-muted","fs-7"],["type","text","name","skuwp","placeholder","SKU en tienda","formControlName","skuwp",1,"form-control","mb-2","text-muted",3,"disabled","readOnly"],[1,"mb-10","fv-row",3,"ngClass"],[1,"required","form-label"],[1,"d-flex","gap-3"],["type","number","name","shelf","placeholder","stock","formControlName","stock",1,"form-control","mb-2"],[1,"fv-row"],[1,"form-check","form-check-custom","form-check-solid","mb-2"],["type","checkbox","formControlName","booking",1,"form-check-input"],[1,"form-check-label"],["data-kt-ecommerce-catalog-add-product","auto-options",1,""],["id","kt_ecommerce_add_product_options"],[1,"form-group"],["data-repeater-list","kt_ecommerce_add_product_options",1,"d-flex","flex-column","gap-3"],["data-repeater-item","","class","form-group d-flex flex-wrap gap-5",4,"ngFor","ngForOf"],[1,"form-group","mt-5"],["type","button","data-repeater-create","",1,"btn","btn-sm","btn-light-primary",3,"disabled","click"],[1,"svg-icon","svg-icon-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","11","y","18","width","12","height","2","rx","1","transform","rotate(-90 11 18)","fill","currentColor"],["x","6","y","11","width","12","height","2","rx","1","fill","currentColor"],[1,"card-body","pt-2"],[1,"d-flex","flex-wrap","justify-content-between",2,"min-height","70px"],[1,"col-sm-6","col-md-4","form-check","form-switch","mb-0","d-flex","align-items-center","flex-column","p-0","me-3",2,"width","150px"],[1,"form-check-label","text-start","fw-bolder","mb-5"],["id","installation","formControlName","installation","type","checkbox",1,"form-check-input","m-0"],[1,"col-sm-6","col-md-4","d-flex","align-items-center","flex-column"],["for","installationDiscount","class","form-check-label text-center fw-bolder mb-2",4,"ngIf"],["type","number","step","0.1","name","installationDiscount","class","form-control w-50","placeholder","%","formControlName","installationDiscount",4,"ngIf"],[1,"col-sm-6","col-md-4","d-flex","align-items-center","flex-column",2,"margin-right","3rem"],["class","form-check-label text-center fw-bolder mb-2",4,"ngIf"],["class","form-check-label text-start fw-bolder mb-1 mt-4",4,"ngIf"],["id","presale","formControlName","presale","type","checkbox",1,"form-check-input","m-0"],["for","temporaryStock","class","form-check-label text-start fw-bolder mb-2",4,"ngIf"],["type","number","min","0","name","temporaryStock","class","form-control w-50","formControlName","temporaryStock",4,"ngIf"],["class","form-check-label text-start fw-bolder mb-2",4,"ngIf"],["class","input-group w-auto",4,"ngIf"],["id","onDemand","formControlName","onDemand","type","checkbox",1,"form-check-input","m-0"],["for","onDemandDays","class","form-check-label text-start fw-bolder mb-2",4,"ngIf"],["type","number","min","1","max","365","name","onDemandDays","class","form-control w-50","formControlName","onDemandDays",3,"is-invalid",4,"ngIf"],[1,"fv-row","mb-10"],[1,"fs-6","fw-bold","mb-2"],["data-bs-toggle","tooltip","title","Select a discount type that will be applied to this product",1,"fas","fa-exclamation-circle","ms-2","fs-7"],["data-kt-buttons","true","data-kt-buttons-target","[data-kt-button='true']",1,"row","row-cols-1","row-cols-md-3","row-cols-lg-1","row-cols-xl-3","g-9"],["class","col",4,"ngFor","ngForOf"],["id","kt_ecommerce_add_product_shipping",1,"mt-10",3,"ngClass"],[1,"mb-10","fv-row"],[1,"form-label","required"],["type","text","name","weight","placeholder","Product weight","formControlName","weight",1,"form-control","mb-2"],[1,"d-flex","flex-wrap","flex-sm-nowrap","gap-3"],["type","number","name","width","placeholder","Ancho (w)","formControlName","width",1,"form-control","mb-2"],["type","number","name","length","placeholder","Profundidad (l)","formControlName","length",1,"form-control","mb-2"],["type","number","name","height","placeholder","Altura (h)","formControlName","height",1,"form-control","mb-2"],["class","card mb-5 mb-xl-8",4,"ngIf"],[1,"card","mb-5","mb-xl-8",3,"ngClass"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-toolbar"],["type","button",1,"btn","btn-sm","btn-light-primary",3,"click"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"],["class","card-body py-3",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["data-repeater-item","",1,"form-group","d-flex","flex-wrap","gap-5"],["divPropiedades",""],["type","text","placeholder","Nombre","formControlName","name",1,"form-control","mw-100","w-200px"],["type","text","placeholder","Valor","formControlName","value",1,"form-control","mw-100","w-200px"],["type","button","data-repeater-delete","","class","btn btn-sm btn-icon btn-light-danger",3,"click",4,"ngIf"],["type","button","data-repeater-delete","",1,"btn","btn-sm","btn-icon","btn-light-danger",3,"click"],["opacity","0.5","x","7.05025","y","15.5356","width","12","height","2","rx","1","transform","rotate(-45 7.05025 15.5356)","fill","currentColor"],["x","8.46447","y","7.05029","width","12","height","2","rx","1","transform","rotate(45 8.46447 7.05029)","fill","currentColor"],["for","installationDiscount",1,"form-check-label","text-center","fw-bolder","mb-2"],["type","number","step","0.1","name","installationDiscount","placeholder","%","formControlName","installationDiscount",1,"form-control","w-50"],[1,"form-check-label","text-center","fw-bolder","mb-2"],[1,"form-check-label","text-start","fw-bolder","mb-1","mt-4"],["for","temporaryStock",1,"form-check-label","text-start","fw-bolder","mb-2"],["type","number","min","0","name","temporaryStock","formControlName","temporaryStock",1,"form-control","w-50"],[1,"form-check-label","text-start","fw-bolder","mb-2"],[1,"input-group","w-auto"],["placeholder","yyyy-mm-dd","name","presaleDate","formControlName","presaleDate","ngbDatepicker","",1,"form-control",2,"max-width","135px"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["for","onDemandDays",1,"form-check-label","text-start","fw-bolder","mb-2"],["type","number","min","1","max","365","name","onDemandDays","formControlName","onDemandDays",1,"form-control","w-50"],["data-kt-button","true",1,"btn","btn-outline","btn-outline-dashed","btn-outline-default","d-flex","text-start","p-6"],[1,"form-check","form-check-custom","form-check-solid","form-check-sm","align-items-start","mt-1"],["type","radio","formControlName","productType",1,"form-check-input",3,"value","change"],[1,"ms-5"],[1,"fs-4","fw-bolder","text-gray-800","d-block"],[1,"card","mb-5","mb-xl-8"],["role","alert",1,"alert","alert-warning","m-10"],["type","info",1,"m-5",3,"dismissible"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"ps-4","min-w-325px","rounded-start"],[1,"min-w-125px"],[1,"min-w-200px","text-end","rounded-end"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"d-flex","justify-content-start","flex-column"],[1,"text-dark","fw-bolder","text-hover-primary","mb-1","fs-6"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","mb-1","fs-6"],[1,"text-end"],["type","button",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[3,"idEmpresa","modal","tecnicoSelect"]],template:function(e,n){1&e&&(t.YNc(0,b9,151,47,"form",0),t.YNc(1,x9,1,2,"ng-template",null,1,t.W1O)),2&e&&t.Q6J("ngIf",n.form)},dependencies:[X.mk,X.sg,X.O5,GT.d$,H._Y,H.Fj,H.wV,H.Wl,H._,H.JJ,H.JL,H.qQ,H.Fd,H.sg,H.u,Tt.xm,Tt.J4,PZ,zT.p]}),i})();function S9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",17),t._uU(1),t.TgZ(2,"button",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.deleteTag(a.id))}),t._UZ(3,"i",19),t.qZA()()}if(2&i){const e=r.$implicit;t.Q6J("id",e.id),t.xp6(1),t.hij(" ",e.vch_nombre," ")}}function E9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.addCategoria(a))}),t.TgZ(1,"div",24)(2,"div",25)(3,"label",26),t._UZ(4,"i",27),t.qZA(),t.TgZ(5,"div",28)(6,"span",29),t._uU(7),t.qZA()()()(),t._UZ(8,"div",30),t.qZA()}if(2&i){const e=r.$implicit;t.xp6(7),t.Oqu(e.vch_nombre)}}function w9(i,r){if(1&i&&(t.TgZ(0,"div",20)(1,"div",21),t.YNc(2,E9,9,1,"div",22),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.tiponegocios.data)}}let k9=(()=>{class i{constructor(e){this.prodProvider=e,this.tiponegocios={code:1,status:"",message:"",data:[]},this.tipoNegSelectOut=new t.vpe,this.loading=!0,this.getTipoNegBD()}ngOnInit(){}getTipoNegBD(){this.loading=!0,this.prodProvider.getTiposNegocios().subscribe({next:e=>{this.tiponegocios=e},error:e=>console.error(e),complete:()=>this.loading=!1})}deleteTag(e){this.tipoNegSelectIn=this.tipoNegSelectIn?.filter(n=>n.id!==e),this.tipoNegSelectOut.emit(this.tipoNegSelectIn)}addCategoria(e){this.tipoNegSelectIn?.find(s=>s.id==e.id)||(this.tipoNegSelectIn?.push(e),this.tipoNegSelectOut.emit(this.tipoNegSelectIn))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-tipo-negocio"]],inputs:{tipoNegSelectIn:"tipoNegSelectIn",modal2:"modal2"},outputs:{tipoNegSelectOut:"tipoNegSelectOut"},decls:19,vars:2,consts:[["id","kt_modal_users_search","tabindex","-1","aria-hidden","true"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],[1,"modal-header","pb-0","border-0","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-18","pt-0","pb-15"],[1,"text-center","mb-13"],[1,"mb-3"],[1,"text-muted","fw-bold","fs-5"],["id","kt_modal_users_search_handler","data-kt-search-keypress","true","data-kt-search-min-length","2","data-kt-search-enter","enter","data-kt-search-layout","inline"],[1,"py-5"],["class","tag tag-cloud-functions tag-lg",3,"id",4,"ngFor","ngForOf"],["data-kt-search-element","results","class","",4,"ngIf"],[1,"tag","tag-cloud-functions","tag-lg",3,"id"],[1,"btn","btn-flush",3,"click"],[1,"fa-solid","fa-xmark","text-gray-600"],["data-kt-search-element","results",1,""],[1,"mh-375px","scroll-y","me-n7","pe-7"],["class","text-hover-primary","style","cursor:pointer;",3,"click",4,"ngFor","ngForOf"],[1,"text-hover-primary",2,"cursor","pointer",3,"click"],["data-user-id","0",1,"rounded","d-flex","flex-stack","bg-active-lighten","p-4"],[1,"d-flex","align-items-center"],[1,"form-check","form-check-custom","form-check-solid","me-5"],[1,"fa-solid","fa-plus","text"],[1,"ms-5"],[1,"fs-5","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"border-bottom","border-gray-300","border-bottom-dashed"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.NdJ("click",function(){return n.modal2.dismiss("remiau")}),t.TgZ(5,"span",5),t.O4$(),t.TgZ(6,"svg",6),t._UZ(7,"rect",7)(8,"rect",8),t.qZA()()()(),t.kcU(),t.TgZ(9,"div",9)(10,"div",10)(11,"h1",11),t._uU(12,"Tipos de Negocios"),t.qZA(),t.TgZ(13,"div",12),t._uU(14,"Agrega tipo de negocio al producto"),t.qZA()(),t.TgZ(15,"div",13)(16,"div",14),t.YNc(17,S9,4,2,"span",15),t.YNc(18,w9,3,1,"div",16),t.qZA()()()()()()),2&e&&(t.xp6(17),t.Q6J("ngForOf",n.tipoNegSelectIn),t.xp6(1),t.Q6J("ngIf",(null==n.tiponegocios?null:n.tiponegocios.data).length>0))},dependencies:[X.sg,X.O5],styles:[".tag-cloud-functions[_ngcontent-%COMP%]{background:#498afb;color:#fff}.tag-flutter[_ngcontent-%COMP%]{background:#54c5f8;color:#003b6c}.tag[_ngcontent-%COMP%]{display:inline-block;padding:.2em .5em .3em;border-radius:2px;background:#454e56;color:#b2becd;font-weight:600;margin:.25em .1em}.tag-lg[_ngcontent-%COMP%]{font-size:1.2em;border-radius:4px}"]}),i})();var FI=Oe(6099);const T9=["dangerTpl"];function y9(i,r){1&i&&(t.TgZ(0,"p")(1,"ngb-alert",12)(2,"strong"),t._uU(3,"Sin productos"),t.qZA(),t._uU(4,' Presiona "agregar producto". '),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("dismissible",!1))}function D9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",38)(1,"button",39),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.deleteCrossSelling(s))}),t._UZ(2,"span",7),t.qZA()()}2&i&&(t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg"))}function A9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",24)(3,"div",25),t._UZ(4,"img",26),t.ALo(5,"noImagen"),t.qZA(),t.TgZ(6,"div",27)(7,"span",28),t._uU(8),t.qZA(),t.TgZ(9,"span",29),t._uU(10),t.qZA()()()(),t.TgZ(11,"td")(12,"span",30),t._uU(13),t.ALo(14,"numberFormat"),t.qZA()(),t.TgZ(15,"td")(16,"div",31)(17,"button",32),t.NdJ("click",function(){const a=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.changeQuantity(a,"reduce"))}),t._uU(18,"-"),t.qZA(),t.TgZ(19,"span",33),t._uU(20),t.qZA(),t.TgZ(21,"button",34),t.NdJ("click",function(){const a=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.changeQuantity(a,"add"))}),t._uU(22,"+"),t.qZA()()(),t.TgZ(23,"td")(24,"div",35)(25,"input",36),t.NdJ("change",function(){const a=t.CHM(e).index,d=t.oxw(2);return t.KtG(d.changeObligatorio(a))}),t.qZA()()(),t.YNc(26,D9,3,1,"td",37),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(4),t.Q6J("src",t.lcZ(5,9,e),t.LSH),t.xp6(4),t.hij(" ",e.vch_nombre," "),t.xp6(2),t.hij(" ",e.vch_sku," "),t.xp6(3),t.hij(" ",t.lcZ(14,11,e.db_precio)," "),t.xp6(4),t.Q6J("disabled",e.int_cantidad<=1||!e.bit_obligatorio),t.xp6(3),t.hij(" ",e.int_cantidad," "),t.xp6(1),t.Q6J("disabled",e.int_cantidad>=10||!e.bit_obligatorio),t.xp6(4),t.Q6J("checked",e.bit_obligatorio),t.xp6(1),t.Q6J("ngIf",n.editProduct)}}function O9(i,r){if(1&i&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div")(3,"strong"),t._uU(4,"Notas: "),t.qZA(),t.TgZ(5,"ul")(6,"li")(7,"small"),t._uU(8,"Solo puedes modificar la cantidad de productos obligatorios."),t.qZA()()()()(),t.TgZ(9,"div",15)(10,"table",16)(11,"thead")(12,"tr",17)(13,"th",18),t._uU(14,"Producto"),t.qZA(),t.TgZ(15,"th",19),t._uU(16,"Precio base"),t.qZA(),t.TgZ(17,"th",20),t._uU(18,"Cantidad"),t.qZA(),t.TgZ(19,"th",21),t._uU(20,"Obligatorio"),t.qZA(),t._UZ(21,"th",22),t.qZA()(),t.TgZ(22,"tbody"),t.YNc(23,A9,27,13,"tr",23),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(23),t.Q6J("ngForOf",e.productCross)}}function I9(i,r){1&i&&(t.TgZ(0,"p")(1,"ngb-alert",12)(2,"strong"),t._uU(3,"Sin productos"),t.qZA(),t._uU(4,' Presiona "agregar producto". '),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("dismissible",!1))}function M9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",38)(1,"button",39),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.deleteUpSelling(s))}),t._UZ(2,"span",7),t.qZA()()}2&i&&(t.xp6(2),t.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg"))}function R9(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div",24)(3,"div",25),t._UZ(4,"img",26),t.ALo(5,"noImagen"),t.qZA(),t.TgZ(6,"div",27)(7,"span",28),t._uU(8),t.qZA(),t.TgZ(9,"span",29),t._uU(10),t.qZA()()()(),t.TgZ(11,"td")(12,"span",30),t._uU(13),t.ALo(14,"numberFormat"),t.qZA()(),t.YNc(15,M9,3,1,"td",37),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(2);t.xp6(4),t.Q6J("src",t.lcZ(5,5,e),t.LSH),t.xp6(4),t.hij(" ",e.vch_nombre," "),t.xp6(2),t.hij(" ",e.vch_sku," "),t.xp6(3),t.hij(" ",t.lcZ(14,7,e.db_precio)," "),t.xp6(2),t.Q6J("ngIf",n.editProduct)}}function N9(i,r){if(1&i&&(t.TgZ(0,"div",13)(1,"div",15)(2,"table",16)(3,"thead")(4,"tr",17)(5,"th",18),t._uU(6,"Producto"),t.qZA(),t.TgZ(7,"th",40),t._uU(8,"Precio base"),t.qZA(),t._UZ(9,"th",41),t.qZA()(),t.TgZ(10,"tbody"),t.YNc(11,R9,16,9,"tr",23),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(11),t.Q6J("ngForOf",e.productUp)}}function F9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-product-modal",42),t.NdJ("productSelect",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.addCrossSelling(s))}),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw();t.Q6J("modal3",e)("idEmpresa",n.idEmpresa)("skuNow",n.producto.data.vch_sku)("allCompanies",!0)}}function L9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-product-modal",43),t.NdJ("productSelect",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.addUpSelling(s))}),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw();t.Q6J("modal3",e)("idEmpresa",n.idEmpresa)("skuNow",n.producto.data.vch_sku)}}let P9=(()=>{class i{constructor(e,n,s,a,d){this.modalService=e,this.formBuilder=n,this.toastService=s,this.userService=a,this.prodService=d,this.formChange=new t.vpe,this.bodega={code:-1,message:"",status:"",data:{}},this.idEmpresa="",this.productCross=[],this.productUp=[],this.bod=[],this.editProduct=!1,this.editProduct=a.hasPermission(Ss.Q.UPDATE_PRODUCTO)}ngOnChanges(e){this.load(),this.loadBodegas(),console.log(e)}ngOnInit(){this.load(),this.loadBodegas(),this.addStocks()}get idProducto(){return this.producto.data?.id}loadBodegas(){this.bodegas=this.producto.data?.bodegas?this.producto.data.bodegas:[]}load(){var e=this;return(0,ze.Z)(function*(){if(null!=e.idProducto){try{const n=yield(0,Je.z)(e.prodService.getPacks(e.idProducto,1));e.productCross=n.data}catch(n){3==n?.error?.code?console.warn("Sin Cross Selling"):console.error("error de servidor",n)}try{const n=yield(0,Je.z)(e.prodService.getPacks(e.idProducto,2));e.productUp=n.data}catch(n){3==n?.error?.code?console.warn("Sin up selling"):console.error("error de servidor",n)}}})()}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{},n=>{})}addCrossSelling(e){null==this.productCross.find(s=>s.vch_sku==e.vch_sku)?this.addPack(e,1):console.warn("Producto ya existe")}addUpSelling(e){null==this.productUp.find(s=>s.vch_sku==e.vch_sku)?this.addPack(e,2):console.warn("Producto ya existe")}addPack(e,n){this.prodService.addPack({id_producto1:this.producto.data.id,id_producto2:e.id,int_tiporelacion:n,int_cantidad:1,id_user:this.userService.usuario.id}).subscribe({next:a=>{console.log("Ingresado con exito"),1==n?this.productCross.push({...e,int_cantidad:1}):this.productUp.push({...e,int_cantidad:1})},error:a=>{6==a?.error?.code&&console.log("ya existe el prod vieja")}})}deleteCrossSelling(e){this.deletePack(e,1)}deleteUpSelling(e){this.deletePack(e,2)}deletePack(e,n){this.prodService.deletePack({id_producto1:this.producto.data.id,id_producto2:e.id,int_tiporelacion:n,id_user:this.userService.usuario.id}).subscribe({next:a=>{console.log("Eliminado con \xe9xito"),1==n?this.productCross=this.productCross.filter(d=>d!=e):this.productUp=this.productUp.filter(d=>d!=e)},error:a=>{console.error("error",a)}})}changeObligatorio(e){this.productCross[e].bit_obligatorio=!this.productCross[e].bit_obligatorio,this.productCross[e].int_cantidad=1,this.prodService.updatePack({id_producto1:this.producto.data.id,id_producto2:this.productCross[e].id,int_tiporelacion:1,bit_obligatorio:this.productCross[e].bit_obligatorio,int_cantidad:1,id_user:this.userService.usuario.id}).subscribe({next:s=>{console.log("update con \xe9xito")},error:s=>{console.error("error",s)}})}changeQuantity(e,n){"add"==n&&this.productCross[e].int_cantidad++,"reduce"==n&&this.productCross[e].int_cantidad>1&&this.productCross[e].int_cantidad--,this.prodService.updatePack({id_producto1:this.producto.data.id,id_producto2:this.productCross[e].id,int_tiporelacion:1,int_cantidad:this.productCross[e].int_cantidad,id_user:this.userService.usuario.id}).subscribe({next:()=>{},error:a=>{"add"==n&&this.productCross[e].int_cantidad--,"reduce"==n&&this.productCross[e].int_cantidad>1&&this.productCross[e].int_cantidad++,this.toastService.show("Error al actualizar la cantidad del crossSelling",{classname:"bg-danger text-light",delay:4e3})}})}get stockstArray(){return this.form.get("stocks")}stockNoValido(e){return this.stockstArray.at(e).get("stock")?.invalid&&this.stockstArray.at(e).get("stock")?.touched}nameNoValido(e){return this.stockstArray.at(e).get("name")?.invalid&&this.stockstArray.at(e).get("name")?.touched}direccionNoValido(e){return this.stockstArray.at(e).get("direccion")?.invalid&&this.stockstArray.at(e).get("direccion")?.touched}deleteBodegas(e){this.stockstArray.removeAt(e)}addStocks(){this.stockstArray.push(this.formBuilder.group({name:[""],direccion:[""],stock:["",[H.kI.required]]}))}addBodega(e){try{const n={id_producto:this.producto.data.id,id_bodega:e.id};console.log(n),this.prodService.addBodega(n).subscribe({next:s=>{console.log(s,"Ingresado con exito"),this.prodxBodegas.push(n),this.toastService.show("Agregado con \xe9xito",{classname:"bg-success text-light",delay:1e4}),console.log(s)},error:s=>{console.log(s)}})}catch(n){console.error("error del servidor",n),this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3})}}deleteBodega(e){this.deleteProdxBodega(e)}deleteProdxBodega(e){this.prodService.deleteBodega({id_producto:e.id_producto,id_bodega:e.id_bodega}).subscribe(s=>{this.toastService.show("Eliminado con \xe9xito",{classname:"bg-success text-light",delay:1e4}),console.log(s)})}catch(e){console.error("error del servidor",e),this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Tt.FF),t.Y36(H.qu),t.Y36(lt.k),t.Y36(ft.i),t.Y36(ue.M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-relation-view"]],viewQuery:function(e,n){if(1&e&&t.Gf(T9,5),2&e){let s;t.iGM(s=t.CRH())&&(n.errorToast=s.first)}},inputs:{producto:"producto",form:"form",idEmpresa:"idEmpresa"},outputs:{formChange:"formChange"},features:[t.TTD],decls:30,vars:8,consts:[[1,"card","mb-5","mb-xl-8"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-toolbar"],["type","button",1,"btn","btn-sm","btn-light-primary",3,"disabled","click"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"],[4,"ngIf"],["class","card-body py-3",4,"ngIf"],["modalCross",""],["modalUp",""],["type","info",1,"m-5",3,"dismissible"],[1,"card-body","py-3"],["role","alert",1,"alert","alert-dismissible","alert-info","mt-5"],[1,"table-responsive"],[1,"table","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"ps-4","min-w-325px","rounded-start"],[1,"min-w-100px"],[1,"min-w-125px","text-center"],[1,"min-w-50px","text-center"],[1,"min-w-50px","text-end","rounded-end"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"symbol","symbol-50px","me-5"],["alt","",1,"",3,"src"],[1,"d-flex","justify-content-start","flex-column"],[1,"text-dark","fw-bolder","text-hover-primary","mb-1","fs-6"],[1,"text-muted","fw-bold","text-muted","d-block","fs-7"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","mb-1","fs-6"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-icon","btn-bg-light","btn-sm","me-1",3,"disabled","click"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","mb-1","fs-6",2,"margin-top","7px"],["type","button",1,"btn","btn-icon","btn-bg-light","btn-sm","ms-1",3,"disabled","click"],[1,"form-check","form-switch","ps-0","d-flex","justify-content-center"],["type","checkbox","role","switch",1,"form-check-input","ms-0",3,"checked","change"],["class","text-end",4,"ngIf"],[1,"text-end"],["type","button",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"min-w-125px"],[1,"min-w-200px","text-end","rounded-end"],[3,"modal3","idEmpresa","skuNow","allCompanies","productSelect"],[3,"modal3","idEmpresa","skuNow","productSelect"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2)(3,"span",3),t._uU(4,"Cross Selling"),t.qZA(),t.TgZ(5,"span",4),t._uU(6,"Productos que son necesarios para la venta"),t.qZA()(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){t.CHM(s);const d=t.MAs(27);return t.KtG(n.open(d))}),t._UZ(9,"span",7),t._uU(10," Agregar producto "),t.qZA()()(),t.YNc(11,y9,5,1,"p",8),t.YNc(12,O9,24,1,"div",9),t.qZA(),t.TgZ(13,"div",0)(14,"div",1)(15,"h3",2)(16,"span",3),t._uU(17,"Up Selling"),t.qZA(),t.TgZ(18,"span",4),t._uU(19,"Productos que ser\xe1n recomendados al usuario al tratar de comprar el producto actual"),t.qZA()(),t.TgZ(20,"div",5)(21,"button",6),t.NdJ("click",function(){t.CHM(s);const d=t.MAs(29);return t.KtG(n.open(d))}),t._UZ(22,"span",7),t._uU(23," Agregar producto "),t.qZA()()(),t.YNc(24,I9,5,1,"p",8),t.YNc(25,N9,12,1,"div",9),t.qZA(),t.YNc(26,F9,1,4,"ng-template",null,10,t.W1O),t.YNc(28,L9,1,3,"ng-template",null,11,t.W1O)}2&e&&(t.xp6(8),t.Q6J("disabled",!n.editProduct),t.xp6(1),t.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr075.svg"),t.xp6(2),t.Q6J("ngIf",0==n.productCross.length),t.xp6(1),t.Q6J("ngIf",n.productCross.length>0),t.xp6(9),t.Q6J("disabled",!n.editProduct),t.xp6(1),t.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr075.svg"),t.xp6(2),t.Q6J("ngIf",0==n.productUp.length),t.xp6(1),t.Q6J("ngIf",n.productUp.length>0))},dependencies:[X.sg,X.O5,GT.d$,Tt.xm,FI.u,re.h,zT.p]}),i})();function U9(i,r){1&i&&(t.TgZ(0,"p")(1,"ngb-alert",7)(2,"strong"),t._uU(3,"Sin logs"),t.qZA()()()),2&i&&(t.xp6(1),t.Q6J("dismissible",!1))}function B9(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td",16)(2,"span",17),t._uU(3),t.qZA()(),t.TgZ(4,"td",16)(5,"span",18),t._uU(6),t.qZA()(),t.TgZ(7,"td",16)(8,"span",18),t._uU(9),t.ALo(10,"date"),t.qZA()()()),2&i){const e=r.$implicit;t.xp6(3),t.hij(" ",e.vch_cambio," "),t.xp6(3),t.hij(" ",e.tbl_usuario.vch_nombre," "),t.xp6(3),t.hij(" ",t.Dn7(10,3,e.createdAt,"dd/MM/yyyy HH:mm:ss","+000")," ")}}function G9(i,r){if(1&i&&(t.TgZ(0,"div",8)(1,"div",9)(2,"table",10)(3,"thead")(4,"tr",11)(5,"th",12),t._uU(6,"Acci\xf3n"),t.qZA(),t.TgZ(7,"th",13),t._uU(8,"Usuario"),t.qZA(),t.TgZ(9,"th",14),t._uU(10,"Fecha"),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,B9,11,7,"tr",15),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(12),t.Q6J("ngForOf",e.logs)}}let z9=(()=>{class i{constructor(e){this.prodService=e,this.logs=[]}ngOnInit(){this.loadLogs()}loadLogs(){null!=this.producto.data?.id&&this.prodService.getBitacora(this.producto.data?.id).subscribe({next:e=>{this.logs=e.data.length>0?e.data:[]},error:e=>{console.error("error en la busqueda de logs",e)}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-log-view"]],inputs:{producto:"producto"},decls:9,vars:2,consts:[[1,"card","mb-5","mb-xl-8"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[4,"ngIf"],["class","card-body py-3",4,"ngIf"],["type","info",1,"m-5",3,"dismissible"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-striped","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"ps-4","min-w-325px","rounded-start"],[1,"ps-4","min-w-125px"],[1,"min-w-125px","rounded-end"],[4,"ngFor","ngForOf"],[1,"ps-4"],[1,"text-dark","text-hover-primary","mb-1","fs-6"],[1,"text-dark","text-hover-primary","d-block","mb-1","fs-6"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2)(3,"span",3),t._uU(4,"Bitacora del producto"),t.qZA(),t.TgZ(5,"span",4),t._uU(6,"\xfaltimos movimientos"),t.qZA()()(),t.YNc(7,U9,4,1,"p",5),t.YNc(8,G9,13,1,"div",6),t.qZA()),2&e&&(t.xp6(7),t.Q6J("ngIf",0==n.logs.length),t.xp6(1),t.Q6J("ngIf",n.logs.length>0))},dependencies:[X.sg,X.O5,Tt.xm,X.uU]}),i})();var Z9=Oe(4767);let H9=(()=>{class i{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Qh.H7,16))},i.\u0275pipe=t.Yjl({name:"safe",type:i,pure:!0}),i})();const V9=["dangerTpl"];function J9(i,r){if(1&i&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.vch_name)}}function q9(i,r){if(1&i&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.vch_name)}}function Y9(i,r){1&i&&(t.TgZ(0,"div",30)(1,"label",31)(2,"span",10),t._uU(3,"Texto del contenido"),t.qZA()(),t.TgZ(4,"kendo-editor",32)(5,"kendo-toolbar",33,34)(7,"kendo-toolbar-buttongroup"),t._UZ(8,"kendo-toolbar-button",35)(9,"kendo-toolbar-button",36)(10,"kendo-toolbar-button",37),t.qZA(),t.TgZ(11,"kendo-toolbar-buttongroup"),t._UZ(12,"kendo-toolbar-button",38)(13,"kendo-toolbar-button",39)(14,"kendo-toolbar-button",40)(15,"kendo-toolbar-button",41),t.qZA(),t._UZ(16,"kendo-toolbar-dropdownlist",42)(17,"kendo-toolbar-dropdownlist",43),t.TgZ(18,"kendo-toolbar-buttongroup"),t._UZ(19,"kendo-toolbar-button",44)(20,"kendo-toolbar-button",45)(21,"kendo-toolbar-button",46)(22,"kendo-toolbar-button",47)(23,"kendo-toolbar-button",48)(24,"kendo-toolbar-button",49),t.qZA()()()()),2&i&&(t.xp6(5),t.Q6J("overflow",!0))}function K9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.submitMedia())}),t._uU(1,"Cargar"),t.qZA()}}function $9(i,r){1&i&&(t.TgZ(0,"button",65),t._UZ(1,"span",66),t._uU(2," Cargando... "),t.qZA())}function W9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",67),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.removeImage())}),t._uU(1,"Remover"),t.qZA()}}function j9(i,r){if(1&i&&t._UZ(0,"img",68),2&i){const e=t.oxw(3);t.Q6J("src",e.imageUrl,t.LSH)}}function Q9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",55)(1,"div",56)(2,"div",57)(3,"input",58),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onFileSelected(s))}),t.qZA()(),t.TgZ(4,"div",59),t.YNc(5,K9,2,0,"button",60),t.YNc(6,$9,3,0,"button",61),t.YNc(7,W9,2,0,"button",62),t.qZA()(),t.YNc(8,j9,1,1,"img",63),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf",e.imageUrl&&!e.uploadDocumentLoader),t.xp6(1),t.Q6J("ngIf",e.uploadDocumentLoader),t.xp6(1),t.Q6J("ngIf",e.imageUrl&&!e.uploadDocumentLoader),t.xp6(1),t.Q6J("ngIf",e.imageUrl)}}function X9(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.submitURL())}),t._uU(1,"Cargar"),t.qZA()}}function eH(i,r){1&i&&(t.TgZ(0,"button",65),t._UZ(1,"span",66),t._uU(2," Cargando... "),t.qZA())}function tH(i,r){if(1&i&&(t.TgZ(0,"div",69)(1,"div",70)(2,"label",71),t._uU(3,"Link Youtube "),t.TgZ(4,"small"),t._uU(5,"(Solo links EMBED)"),t.qZA()(),t._UZ(6,"input",72),t.qZA(),t.TgZ(7,"div",73),t.YNc(8,X9,2,0,"button",60),t.YNc(9,eH,3,0,"button",74),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(8),t.Q6J("ngIf",!e.uploadDocumentLoader),t.xp6(1),t.Q6J("ngIf",e.uploadDocumentLoader)}}function nH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",50)(2,"h2"),t._uU(3,"Multimedia"),t.qZA()(),t.TgZ(4,"div",51)(5,"button",52),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.selectImageTab())}),t._uU(6,"Agregar imagen"),t.qZA(),t.TgZ(7,"button",52),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.selectYoutubeTab())}),t._uU(8,"Link de youTube"),t.qZA()(),t.YNc(9,Q9,9,4,"div",53),t.YNc(10,tH,10,2,"div",54),t.qZA()}if(2&i){const e=t.oxw();t.xp6(9),t.Q6J("ngIf",e.imgSelected),t.xp6(1),t.Q6J("ngIf",e.youtubeSelected)}}function iH(i,r){1&i&&(t.TgZ(0,"button",75),t._UZ(1,"span",66),t._uU(2," Guardando... "),t.qZA())}function rH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",76),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.submitContent())}),t._uU(1,"Guardar"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("disabled",!e.showSubmitContentButton)}}function sH(i,r){1&i&&(t.TgZ(0,"button",82),t._UZ(1,"span",66),t._uU(2," Guardando... "),t.qZA())}function oH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",83),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.submitContentCategory())}),t._uU(1,"Crear categor\xeda"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",!e.showSubmitContentCategoryButton)}}function aH(i,r){if(1&i&&(t.TgZ(0,"form",77)(1,"label",78),t._uU(2,"Nombre de la nueva categor\xeda de contenido"),t.qZA(),t._UZ(3,"input",79),t.TgZ(4,"div",7),t.YNc(5,sH,3,0,"button",80),t.YNc(6,oH,2,1,"button",81),t.qZA()()),2&i){const e=t.oxw();t.Q6J("formGroup",e.formContentCategory),t.xp6(5),t.Q6J("ngIf",e.buttonContentCategoryLoading),t.xp6(1),t.Q6J("ngIf",!e.buttonContentCategoryLoading)}}function lH(i,r){if(1&i&&(t.ynx(0),t._UZ(1,"img",94),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.vch_url,t.LSH)}}function cH(i,r){if(1&i&&(t.ynx(0,95),t._UZ(1,"iframe",96),t.ALo(2,"safe"),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",t.lcZ(2,1,e.vch_url),t.uOi)}}function dH(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,lH,2,1,"ng-container",18),t.YNc(2,cH,3,3,"ng-container",93),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(5);t.xp6(1),t.Q6J("ngIf",n.showDocumentImage(e.vch_mimetype)),t.xp6(1),t.Q6J("ngIf",n.showYoutubeVideo(e.vch_url))}}function uH(i,r){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,dH,3,2,"div",92),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.documents)}}function hH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",88)(1,"div",89)(2,"h5",90),t._uU(3),t.qZA(),t.TgZ(4,"button",67),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(3),f=t.MAs(48);return t.KtG(d.open(f,a.id))}),t._uU(5," Eliminar "),t.qZA()(),t._UZ(6,"div",91),t.YNc(7,uH,2,1,"div",18),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(3);t.xp6(3),t.hij("Template: ",n.templateType(e.id_template),""),t.xp6(3),t.Q6J("innerHTML",n.markdownToHtml(e.vch_text),t.oJD),t.xp6(1),t.Q6J("ngIf",e.documents.length>0)}}function fH(i,r){if(1&i&&(t.TgZ(0,"div",5)(1,"div",86)(2,"h4"),t._uU(3),t.qZA(),t.YNc(4,hH,8,3,"div",87),t.qZA(),t._UZ(5,"hr")(6,"br"),t.qZA()),2&i){const e=r.$implicit;t.xp6(3),t.Oqu(e.category),t.xp6(1),t.Q6J("ngForOf",e.content)}}function pH(i,r){if(1&i&&(t.TgZ(0,"div",84)(1,"h3"),t._uU(2,"Contenido actual"),t.qZA(),t.YNc(3,fH,7,2,"div",85),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.contents)}}function mH(i,r){1&i&&(t.O4$(),t.TgZ(0,"svg",97),t._UZ(1,"path",98),t.qZA(),t._uU(2," Error del servidor, favor intente nuevamente "))}function gH(i,r){1&i&&(t.TgZ(0,"button",110),t._UZ(1,"span",111),t._uU(2," Eliminando... "),t.qZA())}function _H(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",112),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deleteSelectedContent())}),t._uU(1," Eliminar "),t.qZA()}}function vH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",113),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.dismiss())}),t._uU(1," Cancelar "),t.qZA()}}function bH(i,r){if(1&i&&(t.TgZ(0,"div")(1,"div",99)(2,"div",100)(3,"div",101)(4,"div",102)(5,"div",103)(6,"div",104)(7,"h2"),t._uU(8,"\xbfEstas seguro?"),t.qZA()()(),t.TgZ(9,"div",105)(10,"div",106),t.YNc(11,gH,3,0,"button",107),t.YNc(12,_H,2,0,"button",108),t.YNc(13,vH,2,0,"button",109),t.qZA()()()()()()()),2&i){const e=t.oxw();t.xp6(11),t.Q6J("ngIf",e.deleteButtonLoader),t.xp6(1),t.Q6J("ngIf",!e.deleteButtonLoader),t.xp6(1),t.Q6J("ngIf",!e.deleteButtonLoader)}}let xH=(()=>{class i{constructor(e,n,s,a){this.formBuilder=e,this.productProvider=n,this.toastService=s,this.modalService=a,this.productContent=new t.vpe,this.contentCategories=[],this.contentCategoriesUsed=[],this.addNewContentCategory=!1,this.contentTemplates=[],this.isLoading=!0,this.buttonContentLoading=!1,this.buttonContentCategoryLoading=!1,this.deleteButtonLoader=!1,this.uploadDocumentLoader=!1,this.imgSelected=!1,this.youtubeSelected=!1,this.loadData()}get showSubmitContentButton(){return"1"==this.selectedTemplate||"2"==this.selectedTemplate?this.selectedCategory&&this.selectedTemplate&&this.formContent.valid&&this.newDocumentId:"3"==this.selectedTemplate?this.selectedCategory&&this.selectedTemplate&&this.formContent.valid:"4"==this.selectedTemplate?this.selectedCategory&&this.selectedTemplate&&this.newDocumentId:void 0}get showSubmitContentCategoryButton(){return this.formContentCategory.valid}showAddMedia(e){return 1==e||2==e||4==e}showTextEditor(e){return 1==e||2==e||3==e}showDocumentImage(e){return"jpg"==e||"png"==e||"jpeg"==e||!1}showYoutubeVideo(e){return e.includes("youtube")}selectImageTab(){this.newDocumentId="",this.imgSelected=!0,this.youtubeSelected=!1}selectYoutubeTab(){this.newDocumentId="",this.removeImage(),this.imgSelected=!1,this.youtubeSelected=!0}templateType(e){return this.contentTemplates.find(n=>n.id==e)?.vch_name||""}loadData(){var e=this;return(0,ze.Z)(function*(){yield e.loadContentCategories(),yield e.loadContents(),yield e.loadTemplates(),e.isLoading=!1})()}ngOnInit(){this.formContentCategory=this.formBuilder.group({vch_name:["",[H.kI.required,H.kI.minLength(3)]]}),this.formContent=this.formBuilder.group({vch_text:[,[H.kI.required,H.kI.minLength(3)]],image:[""],vch_url:[""]})}loadContentCategories(){var e=this;return(0,ze.Z)(function*(){try{e.contentCategories=(yield(0,Je.z)(e.productProvider.getAllProductContentCategories())).data||[]}catch{}})()}changeAddNewContentCategory(){this.addNewContentCategory=!this.addNewContentCategory}selectNewContentCategory(e){this.addNewContentCategory=!1,this.selectedCategory=e}submitContentCategory(){var e=this;return(0,ze.Z)(function*(){e.buttonContentCategoryLoading=!0;try{if(1!=(yield(0,Je.z)(e.productProvider.postSingleProductContentCategory(e.formContentCategory.value))).code)return void e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3});e.loadContentCategories(),e.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-light",delay:3e3}),e.buttonContentCategoryLoading=!1}catch{e.buttonContentCategoryLoading=!1,e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3})}})()}loadContents(){var e=this;return(0,ze.Z)(function*(){try{e.contents=(yield(0,Je.z)(e.productProvider.getAllProductContents(e.product.data?.id))).data||[]}catch{}})()}submitContent(){var e=this;return(0,ze.Z)(function*(){e.buttonContentLoading=!0;try{const n={id_product:e.product.data?.id,id_contentcategory:e.selectedCategory,id_template:e.selectedTemplate,vch_text:"4"!=e.selectedTemplate?e.formContent.value.vch_text:""},s=yield(0,Je.z)(e.productProvider.postSingleProductContent(n));if(1!=s.code)return void e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3});e.newContentId=s.data.id,e.newDocumentId&&"3"!=e.selectedTemplate&&(yield e.submitContentPerDcomunet()),e.loadContents(),e.removeImage(),e.formContent.get("vch_text")?.setValue(""),e.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-light",delay:3e3}),e.buttonContentLoading=!1}catch{e.buttonContentLoading=!1,e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3})}})()}submitContentPerDcomunet(){var e=this;return(0,ze.Z)(function*(){const n={id_content:e.newContentId,id_document:e.newDocumentId};try{if(1!=(yield(0,Je.z)(e.productProvider.postSingleProductContentPerDocument(n))).code)return void e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3})}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3})}})()}deleteSelectedContent(){var e=this;return(0,ze.Z)(function*(){e.deleteButtonLoader=!0;try{if(1!=(yield(0,Je.z)(e.productProvider.deleteSingleProductContent(e.contentIdSelected))).code)return void e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3});e.loadContents(),e.modalService.dismissAll(),e.toastService.show("Eliminado con \xe9xito",{classname:"bg-success text-light",delay:3e3}),e.deleteButtonLoader=!1}catch{e.deleteButtonLoader=!1,e.modalService.dismissAll()}})()}loadTemplates(){var e=this;return(0,ze.Z)(function*(){try{e.contentTemplates=(yield(0,Je.z)(e.productProvider.getAllTemplates())).data||[]}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3})}})()}selectNewContentTemplate(e){this.selectedTemplate=e}onFileSelected(e){var n=this;return(0,ze.Z)(function*(){const s=e.target.files[0];return s.size>1e6?(alert("El tama\xf1o maximo permitido por archivo es 1Mb"),void n.removeImage()):"image/jpeg"!=s.type&&"image/png"!=s.type&&"image/jpg"!=s.type&&"image/bmp"!=s.type&&"image/webp"!=s.type?(n.removeImage(),void alert("Solo se admiten im\xe1genes con formato jpeg, png, jpg, bmp, webp")):(n.formContent.get("image")?.setValue(s),void n.previewImage(s))})()}previewImage(e){const n=new FileReader;n.readAsDataURL(e),n.onload=()=>{this.imageUrl=n.result}}removeImage(){this.formContent.get("image")?.setValue(null),this.imageUrl="",this.newDocumentId=""}submitMedia(){var e=this;return(0,ze.Z)(function*(){e.uploadDocumentLoader=!0,(new FormData).append("image",e.formContent.get("image")?.value);const s={id_producto:e.product.data?.id,int_tipo:5,doc:e.formContent.get("image")?.value};try{e.productProvider.addFile(s).subscribe({next:a=>{e.newDocumentId=a.body.data.id,e.newDocumentId&&(e.uploadDocumentLoader=!1,e.toastService.show("Cargado con \xe9xito",{classname:"bg-success text-light",delay:3e3}))}})}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3}),e.uploadDocumentLoader=!1}})()}submitURL(){var e=this;return(0,ze.Z)(function*(){e.uploadDocumentLoader=!0;const n={id_producto:e.product.data?.id,vch_url:e.formContent.get("vch_url")?.value,isContent:!0};try{e.productProvider.addlink(n).subscribe({next:s=>{e.newDocumentId=s.data.id,e.newDocumentId&&(e.uploadDocumentLoader=!1,e.toastService.show("Cargado con \xe9xito",{classname:"bg-success text-light",delay:3e3}))}})}catch{e.uploadDocumentLoader=!1,e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3})}})()}markdownToHtml(e){return(new Z9.Converter).makeHtml(e)}open(e,n){this.contentIdSelected=n,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(s=>{},s=>{})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(H.qu),t.Y36(ue.M),t.Y36(lt.k),t.Y36(Tt.FF))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-view"]],viewQuery:function(e,n){if(1&e&&t.Gf(V9,5),2&e){let s;t.iGM(s=t.CRH())&&(n.errorToast=s.first)}},inputs:{product:"product"},outputs:{productContent:"productContent"},decls:49,vars:9,consts:[[1,"card","card-flush","py-4"],[1,"card-header"],[1,"card-title"],[1,"card-body","pt-0"],[1,"d-flex","flex-column"],[1,"d-flex","flex-column","mt-5"],[1,"d-flex","flex-column",3,"formGroup"],[1,"row"],[1,"d-flex","flex-column","justify-content-between","col-6"],["for","category",1,"form-label"],[1,"required"],["title","category","name","category",1,"form-select",3,"change"],["selectCategory",""],["value","","disabled","","default","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["title","template","name","template",1,"form-select",3,"change"],["selectTemplate",""],["class","mt-5 mb-0",4,"ngIf"],[4,"ngIf"],[1,"row","mb-3"],["class","btn btn-primary ms-3 mt-4 col-4","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary ms-3 mt-4 col-4 ms-3",3,"disabled","click",4,"ngIf"],[1,"row","d-flex","flex-column","mt-5"],["type","button",1,"btn","btn-sm","btn-light-primary","mb-4","ms-3",2,"width","fit-content",3,"click"],[3,"formGroup",4,"ngIf"],["class","d-flex flex-column w-100",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["deleteContent",""],[3,"value"],[1,"mt-5","mb-0"],["for","vch_text",1,"form-label","mt-3"],["name","vch_text","id","","rows","7","formControlName","vch_text",1,"form-control"],[3,"overflow"],["toolbar",""],["kendoEditorBoldButton",""],["kendoEditorItalicButton",""],["kendoEditorUnderlineButton",""],["kendoEditorInsertUnorderedListButton",""],["kendoEditorInsertOrderedListButton",""],["kendoEditorIndentButton",""],["kendoEditorOutdentButton",""],["kendoEditorFontFamily",""],["kendoEditorFormat",""],["kendoEditorAlignLeftButton",""],["kendoEditorAlignCenterButton",""],["kendoEditorAlignRightButton",""],["kendoEditorAlignJustifyButton",""],["kendoEditorCreateLinkButton",""],["kendoEditorUnlinkButton",""],[1,"card-header","mt-5","mb-3","ps-0",2,"min-height","auto","border","0"],[1,"row","d-flex","justify-content-evenly","m-5"],[1,"btn","btn-sm","btn-light-primary","col-3",3,"click"],["class","row d-flex justify-content-between mt-2 mb-3",4,"ngIf"],["class","row d-flex",4,"ngIf"],[1,"row","d-flex","justify-content-between","mt-2","mb-3"],[1,"d-flex","justify-content-evenly","mt-3","mb-1"],[1,"w-50"],["type","file","accept","image/*",1,"form-control","ms-2",3,"change"],[1,"w-50","d-flex","justify-content-evenly"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["class","btn btn-success btn-sm ","type","button","disabled","",4,"ngIf"],["class","btn btn-danger btn-sm ",3,"click",4,"ngIf"],["class","img-fluid mt-3 mb-3","alt","Previsualizaci\xf3n de la imagen",3,"src",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"click"],["type","button","disabled","",1,"btn","btn-success","btn-sm"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],[1,"btn","btn-danger","btn-sm",3,"click"],["alt","Previsualizaci\xf3n de la imagen",1,"img-fluid","mt-3","mb-3",3,"src"],[1,"row","d-flex"],[1,"col-6"],["for","vch_url",1,"form-label"],["type","text","name","vch_url","id","vch_url","formControlName","vch_url",1,"form-control","ms-2"],[1,"d-flex","col-6","align-items-center","justify-content-center"],["class","btn btn-success btn-sm","type","button","disabled","",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary","ms-3","mt-4","col-4"],["type","button",1,"btn","btn-primary","ms-3","mt-4","col-4","ms-3",3,"disabled","click"],[3,"formGroup"],["for","vch_name",1,"form-label"],["type","text","name","vch_name","formControlName","vch_name",1,"form-control","w-50"],["class","btn btn-primary mt-4 col-3 mt-3 ms-3","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-primary col-3 mt-3 ms-3","type","button",3,"disabled","click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary","mt-4","col-3","mt-3","ms-3"],["type","button",1,"btn","btn-sm","btn-primary","col-3","mt-3","ms-3",3,"disabled","click"],[1,"d-flex","flex-column","w-100"],["class","d-flex flex-column mt-5",4,"ngFor","ngForOf"],[1,"category","d-flex","flex-column"],["class","d-flex flex-column border m-3 p-2",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","border","m-3","p-2"],[1,"d-flex","justify-content-between"],[1,"mb-4"],[3,"innerHTML"],[4,"ngFor","ngForOf"],["class","img-fluid",4,"ngIf"],["alt","document.vch_url",1,"img-fluid",3,"src"],[1,"img-fluid"],["width","560","height","315","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","justify-content-center","gap-2","gap-md-5"],[1,"card-title","col-12","mb-5","justify-content-center"],[1,"card-body","pt-8"],[1,"row","justify-content-between"],["class","btn btn-sm btn-danger col-12 disabled","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-danger col-5",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary col-5",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-sm","btn-danger","col-12","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-sm","btn-danger","col-5",3,"click"],[1,"btn","btn-sm","btn-primary","col-5",3,"click"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"form")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h2"),t._uU(5,"Contenido enriquecido"),t.qZA()()(),t.TgZ(6,"div",3)(7,"div",4)(8,"h3"),t._uU(9,"Agregar nueva secci\xf3n de contenido"),t.qZA(),t.TgZ(10,"div",5)(11,"form",6)(12,"div",7)(13,"div",8)(14,"label",9)(15,"span",10),t._uU(16,"Selecciona la categor\xeda del contenido"),t.qZA()(),t.TgZ(17,"select",11,12),t.NdJ("change",function(){t.CHM(s);const d=t.MAs(18);return t.KtG(n.selectNewContentCategory(d.value))}),t.TgZ(19,"option",13),t._uU(20," Categor\xeda... "),t.qZA(),t.YNc(21,J9,2,2,"option",14),t.qZA()(),t.TgZ(22,"div",8)(23,"label",9)(24,"span",10),t._uU(25,"Selecciona el template del contenido"),t.qZA()(),t.TgZ(26,"select",15,16),t.NdJ("change",function(){t.CHM(s);const d=t.MAs(27);return t.KtG(n.selectNewContentTemplate(d.value))}),t.TgZ(28,"option",13),t._uU(29," Template... "),t.qZA(),t.YNc(30,q9,2,2,"option",14),t.qZA()()(),t.YNc(31,Y9,25,1,"div",17),t.YNc(32,nH,11,2,"div",18),t.TgZ(33,"div",19),t.YNc(34,iH,3,0,"button",20),t.YNc(35,rH,2,1,"button",21),t.qZA()(),t._UZ(36,"hr"),t.TgZ(37,"div",22)(38,"button",23),t.NdJ("click",function(){return n.changeAddNewContentCategory()}),t._uU(39,"Crear nueva categor\xeda"),t.qZA(),t.YNc(40,aH,7,3,"form",24),t.qZA()()(),t._UZ(41,"hr")(42,"div",4),t.YNc(43,pH,4,1,"div",25),t.qZA()()(),t._UZ(44,"app-toast",26),t.YNc(45,mH,3,0,"ng-template",null,27,t.W1O),t.YNc(47,bH,14,3,"ng-template",null,28,t.W1O)}2&e&&(t.xp6(11),t.Q6J("formGroup",n.formContent),t.xp6(10),t.Q6J("ngForOf",n.contentCategories),t.xp6(9),t.Q6J("ngForOf",n.contentTemplates),t.xp6(1),t.Q6J("ngIf",n.showTextEditor(n.selectedTemplate)),t.xp6(1),t.Q6J("ngIf",n.showAddMedia(n.selectedTemplate)),t.xp6(2),t.Q6J("ngIf",n.buttonContentLoading),t.xp6(1),t.Q6J("ngIf",!n.buttonContentLoading),t.xp6(5),t.Q6J("ngIf",n.addNewContentCategory),t.xp6(3),t.Q6J("ngIf",n.contents))},dependencies:[X.sg,X.O5,H._Y,H.YN,H.Kr,H.Fj,H.JJ,H.JL,H.sg,H.u,Lt.q,AI,Rb,Nb,Fb,Lb,Bb,Gb,Zb,Hb,Ub,Pb,Ob,Ib,Mb,UT,Db,_l,$t,Ru,H.F,H9]}),i})();function CH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"span",17),t._uU(1),t.TgZ(2,"button",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.deleteTag(a.id))}),t._UZ(3,"i",19),t.qZA()()}if(2&i){const e=r.$implicit;t.Q6J("id",e.id),t.xp6(1),t.hij(" ",e.vch_nombre," ")}}function SH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",23),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.addTag(a))}),t.TgZ(1,"div",24)(2,"div",25)(3,"label",26),t._UZ(4,"i",27),t.qZA(),t.TgZ(5,"div",28)(6,"span",29),t._uU(7),t.qZA()()()(),t._UZ(8,"div",30),t.qZA()}if(2&i){const e=r.$implicit;t.xp6(7),t.Oqu(e.vch_nombre)}}function EH(i,r){if(1&i&&(t.TgZ(0,"div",20)(1,"div",21),t.YNc(2,SH,9,1,"div",22),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.listTags)}}let wH=(()=>{class i{constructor(){this.listTagsSelected=[],this.tagSelected=new t.vpe}ngOnInit(){}deleteTag(e){this.listTagsSelected=this.listTagsSelected.filter(n=>n.id!=e),this.tagSelected.emit(this.listTagsSelected)}addTag(e){this.listTagsSelected.includes(e)||this.listTagsSelected.push(e),this.tagSelected.emit(this.listTagsSelected)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-tag"]],inputs:{modalTag:"modalTag",listTags:"listTags",listTagsSelected:"listTagsSelected"},outputs:{tagSelected:"tagSelected"},decls:19,vars:2,consts:[["id","kt_modal_users_search","tabindex","-1","aria-hidden","true"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],[1,"modal-header","pb-0","border-0","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","mx-xl-18","pt-0","pb-15"],[1,"text-center","mb-13"],[1,"mb-3"],[1,"text-muted","fw-bold","fs-5"],["id","kt_modal_users_search_handler","data-kt-search-keypress","true","data-kt-search-min-length","2","data-kt-search-enter","enter","data-kt-search-layout","inline"],[1,"py-5"],["class","tag tag-cloud-functions tag-lg",3,"id",4,"ngFor","ngForOf"],["data-kt-search-element","results","class","",4,"ngIf"],[1,"tag","tag-cloud-functions","tag-lg",3,"id"],[1,"btn","btn-flush",3,"click"],[1,"fa-solid","fa-xmark","text-gray-600"],["data-kt-search-element","results",1,""],[1,"mh-375px","scroll-y","me-n7","pe-7"],["class","text-hover-primary","style","cursor:pointer;",3,"click",4,"ngFor","ngForOf"],[1,"text-hover-primary",2,"cursor","pointer",3,"click"],["data-user-id","0",1,"rounded","d-flex","flex-stack","bg-active-lighten","p-4"],[1,"d-flex","align-items-center"],[1,"form-check","form-check-custom","form-check-solid","me-5"],[1,"fa-solid","fa-plus","text"],[1,"ms-5"],[1,"fs-5","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"border-bottom","border-gray-300","border-bottom-dashed"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.NdJ("click",function(){return n.modalTag.dismiss("remiau")}),t.TgZ(5,"span",5),t.O4$(),t.TgZ(6,"svg",6),t._UZ(7,"rect",7)(8,"rect",8),t.qZA()()()(),t.kcU(),t.TgZ(9,"div",9)(10,"div",10)(11,"h1",11),t._uU(12,"Etiquetas Disponibles"),t.qZA(),t.TgZ(13,"div",12),t._uU(14,"Agrega Etiquetas al producto"),t.qZA()(),t.TgZ(15,"div",13)(16,"div",14),t.YNc(17,CH,4,2,"span",15),t.YNc(18,EH,3,1,"div",16),t.qZA()()()()()()),2&e&&(t.xp6(17),t.Q6J("ngForOf",n.listTagsSelected),t.xp6(1),t.Q6J("ngIf",n.listTags.length>0))},dependencies:[X.sg,X.O5]}),i})();function kH(i,r){1&i&&(t.TgZ(0,"tr")(1,"td",15),t._uU(2,"No hay campa\xf1as asignadas a este producto"),t.qZA()())}const TH=function(i,r){return{"badge-light-success":i,"badge-light-warning":r}};function yH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"div",16)(9,"input",17),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeDiscount(s))}),t.qZA()()(),t.TgZ(10,"td")(11,"span",18),t._uU(12),t.qZA()()()}if(2&i){const e=r.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.ini," "),t.xp6(2),t.hij(" ",e.end," "),t.xp6(3),t.Q6J("id",e.id)("value",e.discount),t.xp6(2),t.Q6J("ngClass",t.WLB(8,TH,1==e.status,2==e.status)),t.xp6(1),t.AsE(" ",1==e.status?"activa":""," ",2==e.status?"Pr\xf3ximamente":""," ")}}function DH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.saveChanges())}),t._uU(1,"Guardar descuento de campa\xf1as"),t.qZA()}}let AH=(()=>{class i{constructor(e,n){this.productoProvider=e,this.toastService=n}ngOnInit(){this.getDataCampaings()}onChangeDiscount(e){const n=e.target.id,s=parseInt(e.target.value);this.campaingsEdit.map(a=>(a.discount=n==a.id?s:a.discount,a))}getDataCampaings(){var e=this;return(0,ze.Z)(function*(){e.productoProvider.getCampaingsAndDiscounts(e.product.data?.id).subscribe({next:n=>{"OK"==n.status&&(e.campaings=n.data,e.campaingsEdit=n.data?.map(s=>({id:s.id,discount:s.discount})))},error:n=>{e.toastService.show("No se pudo obtener los datos de campa\xf1as",{classname:"bg-danger text-light",delay:15e3})}})})()}saveChanges(){this.productoProvider.postCampaingsAndDiscounts({id_product:this.product.data?.id,campaings:this.campaingsEdit,id_user:this.id_user}).subscribe({next:n=>{this.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-light",delay:1e4})},error:n=>{this.toastService.show("No se pudo guardar correctamente",{classname:"bg-danger text-light",delay:15e3})}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M),t.Y36(lt.k))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-campaing-view"]],inputs:{product:"product",id_user:"id_user"},decls:26,vars:3,consts:[[1,"card","mb-5","mb-xl-8"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"ps-4","min-w-100px","rounded-start"],[1,"min-w-100px"],[1,"min-w-125px"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","btn btn-primary",3,"click",4,"ngIf"],["colspan","5"],[1,"d-flex","justify-content-between"],["type","number","name","",1,"form-control",2,"width","70px",3,"id","value","change"],[1,"fw-bolder","rounded","p-1",3,"ngClass"],[1,"btn","btn-primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2)(3,"span",3),t._uU(4,"Campa\xf1as asignadas al producto"),t.qZA(),t.TgZ(5,"span",4),t._uU(6,"Producto"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"table",7)(10,"thead")(11,"tr",8)(12,"th",9),t._uU(13,"Campa\xf1a"),t.qZA(),t.TgZ(14,"th",10),t._uU(15,"Inicio"),t.qZA(),t.TgZ(16,"th",10),t._uU(17,"T\xe9rmino"),t.qZA(),t.TgZ(18,"th",10),t._uU(19,"dcto. (%)"),t.qZA(),t.TgZ(20,"th",11),t._uU(21,"Estado"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,kH,3,0,"tr",12),t.YNc(24,yH,13,11,"tr",13),t.qZA()()(),t.YNc(25,DH,2,0,"button",14),t.qZA()()),2&e&&(t.xp6(23),t.Q6J("ngIf",!n.campaings||0==n.campaings.length),t.xp6(1),t.Q6J("ngForOf",n.campaings),t.xp6(1),t.Q6J("ngIf",n.campaings.length>0))},dependencies:[X.mk,X.sg,X.O5]}),i})();const OH=["cbStatus"],IH=["dangerTpl"];function MH(i,r){1&i&&(t.TgZ(0,"div",4),t._UZ(1,"img",5),t.qZA())}function RH(i,r){if(1&i&&(t.TgZ(0,"option",66),t._uU(1),t.qZA()),2&i){const e=r.$implicit,n=t.oxw(4);t.Q6J("value",e.id)("selected",n.isSelectedStatus(e.id)),t.xp6(1),t.Oqu(e.vch_nombre)}}function NH(i,r){if(1&i&&(t.TgZ(0,"div")(1,"button",67),t._uU(2),t.qZA()()),2&i){const e=t.oxw(4);t.xp6(1),t.s9C("ngbPopover",e.errorSync),t.s9C("popoverTitle",e.errorSyncTitle),t.xp6(1),t.hij(" Ver ",e.errorSyncTitle," ")}}function FH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"h2"),t._uU(4,"Status"),t.qZA()(),t.TgZ(5,"div",61),t._UZ(6,"div",62),t.qZA()(),t.TgZ(7,"div",19)(8,"select",63,64),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(9),a=t.oxw(3);return t.KtG(a.cssStatus(s.value))}),t.YNc(10,RH,2,3,"option",23),t.qZA(),t.TgZ(11,"div",24),t._uU(12,"Ingrese el estado del producto."),t.qZA(),t.YNc(13,NH,3,3,"div",65),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(6),t.Q6J("ngClass",e.classEstado),t.xp6(2),t.Q6J("disabled",!e.editProduct),t.xp6(2),t.Q6J("ngForOf",e.estadosProducto),t.xp6(3),t.Q6J("ngIf",e.showErrorSync)}}function LH(i,r){if(1&i&&(t.TgZ(0,"option",66),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id)("selected",e.selected),t.xp6(1),t.Oqu(e.vch_nombre)}}function PH(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"i",68),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&i){const e=r.$implicit;t.xp6(4),t.Oqu(e.vch_nombre)}}function UH(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"i",68),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&i){const e=r.$implicit;t.xp6(4),t.Oqu(e.vch_nombre)}}function BH(i,r){if(1&i&&(t.TgZ(0,"table",25)(1,"tbody")(2,"caption"),t._uU(3,"Aibo"),t.qZA(),t.YNc(4,UH,5,1,"tr",26),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(4),t.Q6J("ngForOf",e.categoriasAibo)}}function GH(i,r){1&i&&(t.TgZ(0,"div",69),t._uU(1," -- Seleccione categorias -- "),t.qZA())}function zH(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"i",70),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&i){const e=r.$implicit;t.xp6(4),t.Oqu(e.vch_nombre)}}function ZH(i,r){1&i&&(t.TgZ(0,"div",69),t._uU(1," -- Seleccione tipos de negocio -- "),t.qZA())}function HH(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"i",70),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&i){const e=r.$implicit;t.xp6(4),t.Oqu(e.vch_nombre)}}function VH(i,r){1&i&&(t.TgZ(0,"div",69),t._uU(1," -- Seleccione etiquetas -- "),t.qZA())}function JH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"li",37)(1,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.clickTab(s.opt.relation))}),t._uU(2," Relaciones "),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngClass",e.getActiveTab(e.opt.relation))}}function qH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"li",37)(1,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.clickTab(s.opt.logs))}),t._uU(2," Bitacora "),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngClass",e.getActiveTab(e.opt.logs))}}const $h=function(i){return{display:i}};function YH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-relation-view",71),t.NdJ("formChange",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.formRelation=s)}),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("producto",e.producto)("ngStyle",t.VKq(4,$h,e.displayRelation))("form",e.formRelation)("idEmpresa",e.idEmpresa)}}function KH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-content-view",72),t.NdJ("productContent",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.getProductData(s))}),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("ngStyle",t.VKq(2,$h,e.displayContent))("product",e.producto)}}function $H(i,r){if(1&i&&t._UZ(0,"app-log-view",73),2&i){const e=t.oxw(3);t.Q6J("producto",e.producto)("ngStyle",t.VKq(2,$h,e.displayLogs))}}function WH(i,r){if(1&i&&t._UZ(0,"app-campaing-view",74),2&i){const e=t.oxw(3);t.Q6J("product",e.producto)("id_user",e.id_user)("ngStyle",t.VKq(3,$h,e.displayCampaing))}}function jH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",75)(1,"button",76),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.syncProd())}),t._UZ(2,"span",53),t.TgZ(3,"span",54),t._uU(4,"Sincronizando..."),t.qZA(),t.TgZ(5,"span",55),t._uU(6,"Sincronizar"),t.qZA()(),t.TgZ(7,"button",77),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(115),a=t.oxw(2);return t.KtG(a.open(s))}),t._UZ(8,"span",53),t.TgZ(9,"span",54),t._uU(10,"Duplicando..."),t.qZA(),t.TgZ(11,"span",55),t._uU(12,"Duplicar"),t.qZA()()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("disabled",e.loading||e.loadingSync||e.loadingDuplicate||!e.editProduct),t.xp6(1),t.Q6J("hidden",!e.loadingSync),t.xp6(1),t.Q6J("hidden",!e.loadingSync),t.xp6(2),t.Q6J("hidden",e.loadingSync),t.xp6(2),t.Q6J("disabled",e.loading||e.loadingSync||e.loadingDuplicate||!e.editProduct),t.xp6(1),t.Q6J("hidden",!e.loadingDuplicate),t.xp6(1),t.Q6J("hidden",!e.loadingDuplicate),t.xp6(2),t.Q6J("hidden",e.loadingDuplicate)}}const QH=function(i,r){return{"alert-success":i,"alert-error":r}};function XH(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",78)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"button",79),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.showAlert=!1)}),t.qZA()()}if(2&i){const e=t.oxw(3);t.Q6J("ngClass",t.WLB(2,QH,!e.errorAlert,e.errorAlert)),t.xp6(2),t.Oqu(e.mensajeAlert)}}function eV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-add-category-modal",80),t.NdJ("categoriasSelectOut",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.setCategories(s))}),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(3);t.Q6J("isAdmin",n.admin)("idCompany",n.idEmpresa)("selectedCategories",n.categorias)("modal",e)}}function tV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-add-tipo-negocio",81),t.NdJ("tipoNegSelectOut",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.setTiponegofchild(s))}),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(3);t.Q6J("tipoNegSelectIn",n.tiponegocios)("modal2",e)}}function nV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-add-tag",82),t.NdJ("tagSelected",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.setTagOfChild(s))}),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw(3);t.Q6J("listTags",n.tags)("listTagsSelected",n.tagsSelected)("modalTag",e)}}function iV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-alert",83),t.NdJ("resp",function(s){t.CHM(e);const a=t.oxw(3);return t.KtG(a.respAlert(s))}),t.qZA()}2&i&&t.Q6J("modalAlert",r.$implicit)("messagge","Se duplicar\xe1 el producto. \xbfEst\xe1 seguro?")("title","Duplicar producto")}function rV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"form",10)(3,"div",11)(4,"div",12)(5,"div",13)(6,"div",14)(7,"h2"),t._uU(8),t.qZA()()(),t.TgZ(9,"div",15)(10,"div",16),t._UZ(11,"div",17),t.qZA()()(),t.YNc(12,FH,14,4,"div",18),t.TgZ(13,"div",12)(14,"div",13)(15,"div",14)(16,"h2"),t._uU(17,"Marca"),t.qZA()()(),t.TgZ(18,"div",19)(19,"select",20,21),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(20),a=t.oxw(2);return t.KtG(a.setMarca(s.value))}),t.TgZ(21,"option",22),t._uU(22,"Seleccione"),t.qZA(),t.YNc(23,LH,2,3,"option",23),t.qZA(),t.TgZ(24,"div",24),t._uU(25,"Ingrese la marca del producto."),t.qZA()()(),t.TgZ(26,"div",12)(27,"div",13)(28,"div",14)(29,"h2"),t._uU(30,"Categor\xedas"),t.qZA()()(),t.TgZ(31,"div",19)(32,"table",25)(33,"tbody"),t.YNc(34,PH,5,1,"tr",26),t.qZA()(),t.YNc(35,BH,5,1,"table",27),t.YNc(36,GH,2,0,"ng-template",28),t.TgZ(37,"button",29),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(109),a=t.oxw(2);return t.KtG(a.open(s))}),t.TgZ(38,"span",30),t.O4$(),t.TgZ(39,"svg",31),t._UZ(40,"rect",32)(41,"rect",33),t.qZA()(),t._uU(42,"categor\xeda"),t.qZA(),t.kcU(),t.TgZ(43,"label",34),t._uU(44,"Tipos Negocios"),t.qZA(),t.TgZ(45,"table",25)(46,"tbody"),t.YNc(47,zH,5,1,"tr",26),t.qZA()(),t.YNc(48,ZH,2,0,"ng-template",28),t.TgZ(49,"button",29),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(111),a=t.oxw(2);return t.KtG(a.open(s))}),t.TgZ(50,"span",30),t.O4$(),t.TgZ(51,"svg",31),t._UZ(52,"rect",32)(53,"rect",33),t.qZA()(),t._uU(54,"tipo negocio"),t.qZA()()(),t.kcU(),t.TgZ(55,"div",12)(56,"div",13)(57,"div",14)(58,"h2"),t._uU(59,"Etiquetas"),t.qZA()()(),t.TgZ(60,"div",19)(61,"table",25)(62,"tbody"),t.YNc(63,HH,5,1,"tr",26),t.qZA()(),t.YNc(64,VH,2,0,"ng-template",28),t.TgZ(65,"button",29),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(113),a=t.oxw(2);return t.KtG(a.open(s))}),t.TgZ(66,"span",30),t.O4$(),t.TgZ(67,"svg",31),t._UZ(68,"rect",32)(69,"rect",33),t.qZA()(),t._uU(70,"agregar Etiqueta"),t.qZA()()()(),t.kcU(),t.TgZ(71,"div",35)(72,"ul",36)(73,"li",37)(74,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.clickTab(s.opt.general))}),t._uU(75," General "),t.qZA()(),t.TgZ(76,"li",37)(77,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.clickTab(s.opt.advance))}),t._uU(78," Avanzado "),t.qZA()(),t.YNc(79,JH,3,1,"li",39),t.TgZ(80,"li",37)(81,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.clickTab(s.opt.content))}),t._uU(82," Contenido "),t.qZA()(),t.TgZ(83,"li",37)(84,"button",38),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.clickTab(s.opt.campaing))}),t._uU(85," Campa\xf1as "),t.qZA()(),t.YNc(86,qH,3,1,"li",39),t.qZA(),t.TgZ(87,"div",40)(88,"div",41)(89,"div",42)(90,"app-general-view",43),t.NdJ("formChange",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.formGeneral=s)})("fotoPortada",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.setFotoPortada(s))}),t.qZA(),t.TgZ(91,"app-advance-view",44),t.NdJ("formChange",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a.formAdvance=s)}),t.qZA(),t.YNc(92,YH,1,6,"app-relation-view",45),t.YNc(93,KH,1,4,"app-content-view",46),t.YNc(94,$H,1,4,"app-log-view",47),t.YNc(95,WH,1,5,"app-campaing-view",48),t.qZA()()(),t.TgZ(96,"div"),t.YNc(97,jH,13,8,"div",49),t.TgZ(98,"div",50)(99,"a",51),t._uU(100,"Cancelar"),t.qZA(),t.TgZ(101,"button",52),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.submit())}),t._UZ(102,"span",53),t.TgZ(103,"span",54),t._uU(104,"Cargando..."),t.qZA(),t.TgZ(105,"span",55),t._uU(106,"Guardar"),t.qZA()()(),t.YNc(107,XH,4,5,"div",56),t.qZA()()()(),t.YNc(108,eV,1,4,"ng-template",null,57,t.W1O),t.YNc(110,tV,1,2,"ng-template",null,58,t.W1O),t.YNc(112,nV,1,3,"ng-template",null,59,t.W1O),t.YNc(114,iV,1,3,"ng-template",null,60,t.W1O),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(8),t.Oqu(null==e.producto.data?null:e.producto.data.vch_nombre),t.xp6(3),t.Akn("background-image: url("+e.imagen+")"),t.xp6(1),t.Q6J("ngIf",!e.isCreate),t.xp6(7),t.Q6J("disabled",!e.editProduct),t.xp6(4),t.Q6J("ngForOf",e.marcas),t.xp6(11),t.Q6J("ngForOf",e.categoriasEmpresa),t.xp6(1),t.Q6J("ngIf",e.admin),t.xp6(1),t.Q6J("ngIf",0==e.categorias.length),t.xp6(1),t.Q6J("disabled",!e.editProduct),t.xp6(10),t.Q6J("ngForOf",e.tiponegocios),t.xp6(1),t.Q6J("ngIf",0==e.tiponegocios.length),t.xp6(1),t.Q6J("disabled",!e.editProduct),t.xp6(14),t.Q6J("ngForOf",e.tagsSelected),t.xp6(1),t.Q6J("ngIf",0==e.tagsSelected.length),t.xp6(1),t.Q6J("disabled",!e.editProduct),t.xp6(9),t.Q6J("ngClass",e.getActiveTab(e.opt.general)),t.xp6(3),t.Q6J("ngClass",e.getActiveTab(e.opt.advance)),t.xp6(2),t.Q6J("ngIf",!e.isCreate),t.xp6(2),t.Q6J("ngClass",e.getActiveTab(e.opt.content)),t.xp6(3),t.Q6J("ngClass",e.getActiveTab(e.opt.campaing)),t.xp6(2),t.Q6J("ngIf",!e.isCreate&&e.admin),t.xp6(4),t.Q6J("producto",e.producto)("ngStyle",t.VKq(41,$h,e.displayGeneral))("form",e.formGeneral)("pagCreate",e.action),t.xp6(1),t.Q6J("producto",e.producto)("ngStyle",t.VKq(43,$h,e.displayAdvance))("form",e.formAdvance)("action",e.action)("idEmpresa",e.idEmpresa),t.xp6(1),t.Q6J("ngIf",!e.isCreate),t.xp6(1),t.Q6J("ngIf",!e.isCreate),t.xp6(1),t.Q6J("ngIf",e.admin),t.xp6(1),t.Q6J("ngIf",!e.isCreate),t.xp6(2),t.Q6J("ngIf",!e.isCreate),t.xp6(4),t.Q6J("disabled",e.loading||e.loadingSync||e.loadingDuplicate||!e.editProduct),t.xp6(1),t.Q6J("hidden",!e.loading),t.xp6(1),t.Q6J("hidden",!e.loading),t.xp6(2),t.Q6J("hidden",e.loading),t.xp6(2),t.Q6J("ngIf",e.showAlert)}}const sV=function(i){return{disabledDiv:i}};function oV(i,r){if(1&i&&(t.TgZ(0,"div",6),t.YNc(1,rV,116,45,"div",7),t.qZA()),2&i){const e=t.oxw();t.Q6J("ngClass",t.VKq(2,sV,e.loading)),t.xp6(1),t.Q6J("ngIf",-1!=e.producto.code)}}function aV(i,r){1&i&&(t.O4$(),t.TgZ(0,"svg",84),t._UZ(1,"path",85),t.qZA(),t._uU(2," Error del servidor, favor intente nuevamente "))}let lV=(()=>{class i{constructor(e,n,s,a,d,f,p){this.prodProvider=e,this.modalService=n,this.rutaActiva=s,this.formBuilder=a,this.router=d,this.userProvider=f,this.toastService=p,this.producto={code:-1,message:"",status:"",data:{db_precio:0,int_stock:0,vch_nombre:"",vch_sku:"",categorias:[],tiponegocios:[],db_descuento:0,int_porcdescuento:0,bit_reserva:!1,id_empresa:"",bit_complejo:!1,bodegas:[]}},this.categorias=[],this.tiponegocios=[],this.estadosProducto=[],this.tagsSelected=[],this.marcaSelect="",this.imagen="https://thumbs.dreamstime.com/z/no-image-available-icon-flat-vector-no-image-available-icon-flat-vector-illustration-132482953.jpg",this.option=Co.general,this.opt=Co,this.displayGeneral="",this.displayAdvance="none",this.displayRelation="none",this.displayContent="none",this.displayLogs="none",this.displayCampaing="none",this.closeResult="",this.loading=!1,this.loadingPage=!0,this.loadingSync=!1,this.loadingDuplicate=!1,this.admin=!1,this.mensajeAlert="prueba mensaje",this.showAlert=!1,this.errorAlert=!1,this.editProduct=!1,this.prodMod=[],this.classEstado="",this.companyPrefix="",this.id_user="",this.id_user=this.userProvider.usuario.id,this.editProduct=f.hasPermission(Ss.Q.UPDATE_PRODUCTO),this.load()}getProductData(e){this.productContentData=e}ngOnInit(){var e=this;return(0,ze.Z)(function*(){e.idEmpresa=(yield(0,Je.z)(e.rutaActiva.queryParams)).empresa||e.userProvider.usuario.id_empresa})()}load(){var e=this;return(0,ze.Z)(function*(){try{e.userProvider.adminAibo&&(e.admin=!0),e.loadForm();const n=String(e.rutaActiva.snapshot.params.id);e.action=36!=n.length?qs.I.new:qs.I.edit,yield e.loadMarcas(),yield e.loadTags(),yield e.loadTagsSelected(),yield e.loadCompany(),e.action==qs.I.edit?e.loadEdit(n):e.loadCreate()}catch{e.loadingPage=!1,console.error("Error en el load")}})()}loadCompany(){var e=this;return(0,ze.Z)(function*(){try{const n=yield(0,Je.z)(e.prodProvider.getCompany(e.idEmpresa));if(1!=n.code)return void console.error("Error al cargar la empresa");e.company=n.data,e.companyPrefix=e.company.vch_prefijo||""}catch{console.error("Error al cargar la empresa")}})()}loadCreate(){this.producto.data.vch_nombre="Creaci\xf3n de producto",this.producto.code=0,this.loadingPage=!1}loadEdit(e){this.loadProducto(e)}get productoArray(){return this.producto.data}get isCreate(){return this.action==qs.I.new}isSelectedStatus(e){return this.producto.data?.id_estado==e}cssStatus(e){const n=this.estadosProducto.find(s=>s.id==e);this.classEstado=n?.vch_color||""}loadForm(){this.formGeneral=this.formBuilder.group({name:[{value:"",disabled:!this.editProduct},[H.kI.required,H.kI.maxLength(100)]],description:[{value:"",disabled:!this.editProduct},H.kI.maxLength(2500)],shortDescription:[{value:"",disabled:!this.editProduct},H.kI.maxLength(2500)],author:[{value:"",disabled:!this.editProduct},H.kI.maxLength(100)],testimony:[{value:"",disabled:!this.editProduct},H.kI.maxLength(1e3)],price:[{value:"",disabled:!this.editProduct},[H.kI.required,H.kI.min(0)]],salePrice:[{value:"",disabled:!this.editProduct}],hasDiscount:[{value:"2",disabled:!this.editProduct},H.kI.required],priceFixed:[{value:"",disabled:!this.editProduct}],percentDiscount:[{value:"5",disabled:!this.editProduct}],complex:[{value:"",disabled:!this.editProduct}],checklist:this.formBuilder.array([]),youtube:this.formBuilder.array([])}),this.formAdvance=this.formBuilder.group({sku:[{value:"",disabled:!this.editProduct},[H.kI.required,H.kI.minLength(3)]],skuwp:[{value:"",disabled:!this.editProduct}],stock:[{value:"",disabled:!this.editProduct},[H.kI.required,H.kI.min(0)]],booking:[{value:"",disabled:!this.editProduct}],productType:[{value:"3",disabled:!this.editProduct}],weight:[{value:"",disabled:!this.editProduct}],width:[{value:"",disabled:!this.editProduct}],height:[{value:"",disabled:!this.editProduct}],length:[{value:"",disabled:!this.editProduct}],propertys:this.formBuilder.array([]),installation:[{value:"",disabled:!this.editProduct}],installationDiscount:[{value:2.9,disabled:!this.editProduct}],presale:[{value:"",disabled:!this.editProduct}],presaleDate:[{value:"",disabled:!this.editProduct}],temporaryStock:[{value:"",disabled:!this.editProduct}],onDemand:[{value:"",disabled:!this.editProduct}],onDemandDays:[{value:"",disabled:!this.editProduct},[H.kI.min(1),H.kI.max(365)]]}),this.formRelation=this.formBuilder.group({stocks:this.formBuilder.array([])}),this.formAdvance.get("onDemand")?.valueChanges.subscribe(e=>{this.updateValidators("onDemandDays",e)}),this.formAdvance.get("presale")?.valueChanges.subscribe(e=>{this.updateValidators("presaleDate",e)})}updateValidators(e,n){n?this.formAdvance.get(e)?.setValidators([H.kI.required]):this.formAdvance.get(e)?.clearValidators(),this.formAdvance.get(e)?.updateValueAndValidity()}setDefaultValueForm(){let e,n="",s=this.producto.data?.db_precio;0==this.producto.data?.int_porcdescuento&&0==this.producto.data?.db_descuento?e="1":this.producto.data.int_porcdescuento>0?(e="2",s=Math.round(this.producto.data?.db_precio-this.producto.data?.db_precio*this.producto.data.int_porcdescuento/100)):(e="3",n=this.producto.data.db_descuento.toString(),s=Math.round(this.producto.data?.db_precio-this.producto.data.db_descuento)),this.formGeneral.reset({name:this.producto.data?.vch_nombre,description:this.producto.data?.vch_descripcion,shortDescription:this.producto.data?.vch_descorta,author:this.producto.data?.vch_autortestimonio,testimony:this.producto.data?.vch_testimonio,price:this.producto.data?.db_precio,percentDiscount:this.producto.data?.int_porcdescuento.toString()||"5",hasDiscount:e,priceFixed:n,salePrice:s,complex:this.producto.data?.bit_complejo}),this.formAdvance.reset({sku:this.producto.data?.vch_sku,skuwp:this.producto.data?.vch_skuwp,stock:this.producto.data?.int_stock,booking:this.producto.data?.bit_reserva,productType:this.producto.data?.tbl_tipo?.id,weight:this.producto.data?.vch_peso,width:this.producto.data?.vch_ancho,height:this.producto.data?.vch_alto,length:this.producto.data?.vch_largo,installation:this.producto.data?.bit_instalacion,installationDiscount:this.producto.data?.db_porcinstalacion||2.9,presale:this.producto.data?.bit_preventa,presaleDate:this.formatDateToDatePicker(this.producto.data?.dt_fechapreventa),temporaryStock:this.producto.data?.int_stocktemporal,onDemand:this.producto.data?.bit_apedido,onDemandDays:this.producto.data?.int_diasapedido}),this.propertysArray.clear(),this.checklistArray.clear(),this.stockstArray.clear(),this.urlArray.clear(),this.producto.data?.tbl_propiedads?.forEach(a=>this.propertysArray.push(this.formBuilder.group({name:[{value:a.vch_nombre,disabled:!this.editProduct},[H.kI.required,H.kI.minLength(3)]],value:[{value:a.vch_valor,disabled:!this.editProduct},[H.kI.required]]}))),this.producto.data?.tbl_checklists?.forEach(a=>this.checklistArray.push(this.formBuilder.group({name:[{value:a.vch_nombre,disabled:!this.editProduct},[H.kI.required,H.kI.maxLength(200)]]}))),this.producto.data?.tbl_documentos?.forEach(a=>{4==a.int_tipo&&this.urlArray.push(this.formBuilder.group({name:[{value:a.vch_url,disabled:!this.editProduct},[H.kI.required]],id:[a.id]}))})}get propertysArray(){return this.formAdvance.get("propertys")}get checklistArray(){return this.formGeneral.get("checklist")}get stockstArray(){return this.formRelation.get("stocks")}get urlArray(){return this.formGeneral.get("youtube")}get categoriasEmpresa(){return this.categorias.filter(e=>e.id_empresa==this.idEmpresa)}get categoriasAibo(){return this.categorias.filter(e=>e.id_empresa==this.userProvider.usuario.id_empresa)}loadProducto(e){this.prodProvider.getProduct(e).subscribe({next:n=>{if(this.producto=n,n.data?.categorias&&(this.categorias=[...n.data.categorias]),n.data?.tbl_documentos){const s=n.data.tbl_documentos.filter(a=>1==a.int_tipo&&a.bit_fotoportada);this.imagen=s.length>0?s[0].vch_url:"https://thumbs.dreamstime.com/z/no-image-available-icon-flat-vector-no-image-available-icon-flat-vector-illustration-132482953.jpg"}n.data?.tiponegocios&&(this.tiponegocios=[...n.data.tiponegocios]),n.data?.id_marca&&(this.marcaSelect=n.data?.id_marca,this.marcas=this.marcas.map(s=>(s.selected=s.id==this.marcaSelect,s))),this.classEstado=n.data?.tbl_estado?.vch_color||""},error:n=>{console.error("Error en LOAD PRODUCTO"),this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3})},complete:()=>{this.setDefaultValueForm(),this.stateManagment(),this.loadingPage=!1}})}loadEstadosProd(){var e=this;return(0,ze.Z)(function*(){try{e.estadosProducto=(yield(0,Je.z)(e.prodProvider.getEstadoProducto())).data||[]}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3})}})()}loadMarcas(){var e=this;return(0,ze.Z)(function*(){try{e.marcas=(yield(0,Je.z)(e.prodProvider.getMarcas())).data||[]}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3})}})()}setMarca(e){this.marcaSelect=e}setFormGeneral(e){this.formGeneral=e}getActiveTab(e){return e==this.option?"active":""}clickTab(e){switch(this.option=e,e){case Co.advance:this.displayAdvance="",this.displayGeneral="none",this.displayRelation="none",this.displayLogs="none",this.displayContent="none",this.displayCampaing="none";break;case Co.general:this.displayAdvance="none",this.displayGeneral="",this.displayRelation="none",this.displayLogs="none",this.displayContent="none",this.displayCampaing="none";break;case Co.relation:this.displayAdvance="none",this.displayGeneral="none",this.displayLogs="none",this.displayRelation="",this.displayContent="none",this.displayCampaing="none";break;case Co.logs:this.displayAdvance="none",this.displayGeneral="none",this.displayLogs="",this.displayRelation="none",this.displayContent="none",this.displayCampaing="none";break;case Co.content:this.displayAdvance="none",this.displayGeneral="none",this.displayLogs="none",this.displayRelation="none",this.displayContent="",this.displayCampaing="none";break;case Co.campaing:this.displayAdvance="none",this.displayGeneral="none",this.displayLogs="none",this.displayRelation="none",this.displayContent="none",this.displayCampaing=""}}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"}).result.then(n=>{},n=>{})}setCategories(e){this.categorias=[...e]}setTiponegofchild(e){this.tiponegocios=e}setFotoPortada(e){this.imagen=e.vch_url}submit(){var e=this;return(0,ze.Z)(function*(){try{if(e.prodMod=[],e.touchControlsError(),e.formGeneral.valid&&e.formAdvance.valid){let n="3"==e.formGeneral.get("hasDiscount")?.value?e.formGeneral.get("priceFixed")?.value:e.formGeneral.get("price")?.value*e.formGeneral.get("percentDiscount")?.value/100;const s="2"==e.formGeneral.get("hasDiscount")?.value?e.formGeneral.get("percentDiscount")?.value:0;"1"==e.formGeneral.get("hasDiscount")?.value&&(n=0);const a={db_precio:e.formGeneral.get("price")?.value,vch_nombre:e.formGeneral.get("name")?.value,vch_descripcion:e.formGeneral.get("description")?.value,vch_descorta:e.formGeneral.get("shortDescription")?.value,vch_autortestimonio:e.formGeneral.get("author")?.value,vch_testimonio:e.formGeneral.get("testimony")?.value,int_porcdescuento:s,vch_sku:e.formAdvance.get("sku")?.value,vch_skuwp:`${e.companyPrefix}_${e.formAdvance.get("sku")?.value}`,int_stock:e.formAdvance.get("stock")?.value,bit_reserva:e.formAdvance.get("booking")?.value,vch_peso:e.formAdvance.get("weight")?.value,vch_ancho:e.formAdvance.get("width")?.value,vch_alto:e.formAdvance.get("height")?.value,vch_largo:e.formAdvance.get("length")?.value,id_tipo:e.formAdvance.get("productType")?.value,id_empresa:e.idEmpresa,bit_complejo:e.formGeneral.get("complex")?.value,bit_instalacion:e.formAdvance.get("installation")?.value,db_porcinstalacion:e.formAdvance.get("installationDiscount")?.value,bit_preventa:e.formAdvance.get("presale")?.value,dt_fechapreventa:e.formatCorrectDate(e.formAdvance.get("presaleDate")?.value),int_stocktemporal:e.formAdvance.get("temporaryStock")?.value,bit_apedido:e.formAdvance.get("onDemand")?.value,int_diasapedido:e.formAdvance.get("onDemandDays")?.value,tag:e.tagsSelected,id_user:e.id_user};""!=e.marcaSelect&&"-1"!=e.marcaSelect&&(a.id_marca=e.marcaSelect),console.log("objAntes de mandarlo a la BD",JSON.stringify(a)),e.loading=!0;let d="";if(e.action==qs.I.new){const f=yield(0,Je.z)(e.prodProvider.addProducto(a));if(1!=f.code)return e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3}),void console.error("Error desde la api New",f.message);d=f.data.id}else{d=e.producto.data.id,a.id_estado=e.cbStatus.nativeElement.value,e.producto.data.id_estado=e.cbStatus.nativeElement.value;const f=yield(0,Je.z)(e.prodProvider.editProduct(d,a));if(1!=f.code)return e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3}),void console.error("Error desde la api EDIT",f.message)}yield e.saveUrl(d),yield e.saveCategorias(d),yield e.saveTipoNegocio(d),yield e.savePropiedades(d),yield e.saveChecklist(d),e.action==qs.I.new?e.router.navigate(["/"]).then(()=>{e.router.navigate([`/product/unique/${d}`])}):(e.getModificados(),e.loadEdit(d)),e.loading=!1,e.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-light",delay:1e4}),e.stateManagment()}else e.toastService.show("Faltan datos obligatorios")}catch(n){e.loading=!1,console.error("Hubo un error al tratar de grabar el producto",n),e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3})}})()}touchControlsError(){if(this.formGeneral.invalid)for(let e of Object.values(this.formGeneral.controls))e.dirty&&this.prodMod.push(this.getNameCtr(this.formGeneral,e)),e.markAsTouched();if(this.formAdvance.invalid)for(let e of Object.values(this.formAdvance.controls))e.dirty&&this.prodMod.push(this.getNameCtr(this.formAdvance,e)),e.markAsTouched();if(this.formRelation.invalid)for(let e of Object.values(this.formRelation.controls))e.dirty&&this.prodMod.push(this.getNameCtr(this.formRelation,e)),e.markAsTouched()}getModificados(){try{for(let e of Object.values(this.formGeneral.controls))e.dirty&&this.prodMod.push(`${this.getNameCtr(this.formGeneral,e)} ha sido modificado`);for(let e of Object.values(this.formAdvance.controls))e.dirty&&this.prodMod.push(`${this.getNameCtr(this.formAdvance,e)} ha sido modificado`);for(let e of Object.values(this.formRelation.controls))e.dirty&&this.prodMod.push(`${this.getNameCtr(this.formRelation,e)} ha sido modificado`);this.producto.data?.id_estado!=this.cbStatus.nativeElement.value&&this.prodMod.push("estado ha sido modificado"),this.producto.data?.id_marca!=this.marcaSelect&&this.prodMod.push("marca ha sido modificado")}catch{}}getNameCtr(e,n){for(let s of Object.keys(e.controls))if(e.get(s)==n)return s;return"Sin nombre"}savePropiedades(e){var n=this;return(0,ze.Z)(function*(){try{if(1!=(yield(0,Je.z)(n.prodProvider.deletePropXProd(e))).code)return void console.error("error al tratar de eliminar las propiedades del producto");let a,d;for(let f=0;f<n.propertysArray.controls.length;f++)a=n.propertysArray.controls[f],d={id_producto:e,vch_nombre:a.get("name")?.value,vch_valor:a.get("value")?.value},1!=(yield(0,Je.z)(n.prodProvider.addPropiedad(d))).code&&console.error("error al agregar la propiedad "+d.vch_nombre)}catch(s){throw console.error("Error desde savePropiedades",s),s}})()}saveChecklist(e){var n=this;return(0,ze.Z)(function*(){try{if(1!=(yield(0,Je.z)(n.prodProvider.deleteCheckXProd(e))).code)return void console.error("error al tratar de eliminar los checklist del producto");let d;for(let f of n.checklistArray.controls)d={id_producto:e,vch_nombre:f.get("name")?.value},1!=(yield(0,Je.z)(n.prodProvider.addChecklist(d))).code&&console.error("error al agregar el checklist "+d.vch_nombre)}catch(s){throw console.error("Error desde saveChecklist",s),s}})()}saveCategorias(e){var n=this;return(0,ze.Z)(function*(){try{let d,s=[],a=[];if(n.arrayIguales(n.categorias,n.producto.data.categorias))return;for(let f=0;f<n.categorias.length;f++){const p=n.categorias[f];n.producto.data.categorias.find(b=>p.id==b.id)||s.push(p)}for(let f=0;f<n.producto.data.categorias.length;f++){const p=n.producto.data.categorias[f];n.categorias.find(b=>p.id==b.id)||a.push(p)}for(let f=0;f<s.length;f++){const p=s[f];d={id_categoria:p.id,id_producto:e,id_user:n.id_user},yield(0,Je.z)(n.prodProvider.addCategoriaxProducto(d)),n.prodMod.push(`categoria agregada -> ${p.vch_nombre}`)}for(let f=0;f<a.length;f++){const p=a[f];d={id_categoria:p.id,id_producto:e,id_user:n.id_user},yield(0,Je.z)(n.prodProvider.deleteCategoriaxProducto(d)),n.prodMod.push(`categoria eliminada -> ${p.vch_nombre}`)}n.categorias=[]}catch(s){throw console.error("se cay\xf3 en save categorias",s),s}})()}saveTipoNegocio(e){var n=this;return(0,ze.Z)(function*(){try{let d,s=[],a=[];if(n.arrayIguales(n.tiponegocios,n.producto.data.tiponegocios))return;for(let f=0;f<n.tiponegocios.length;f++){const p=n.tiponegocios[f];n.producto.data.tiponegocios.find(b=>p.id==b.id)||s.push(p)}for(let f=0;f<n.producto.data.tiponegocios.length;f++){const p=n.producto.data.tiponegocios[f];n.tiponegocios.find(b=>p.id==b.id)||a.push(p)}for(let f=0;f<s.length;f++){const p=s[f];d={id_tiponegocio:p.id,id_producto:e,id_user:n.id_user},yield(0,Je.z)(n.prodProvider.addTipoNegxProducto(d)),n.prodMod.push(`tipo de negocio agregado  -> ${p.vch_nombre}`)}for(let f=0;f<a.length;f++){const p=a[f];d={id_tiponegocio:p.id,id_producto:e,id_user:n.id_user},yield(0,Je.z)(n.prodProvider.deleteTipoNegxProducto(d)),n.prodMod.push(`tipo de negocio eliminado -> ${p.vch_nombre}`)}n.tiponegocios=[]}catch(s){throw console.error("Se cae en guarda tipo negocio"),s}})()}saveUrl(e){var n=this;return(0,ze.Z)(function*(){try{let s=[];const a=n.producto.data?.tbl_documentos?.filter(p=>4==p.int_tipo)||[],d=n.urlArray.controls.filter(p=>"*"!=p.get("id").value).map(p=>({url:p.get("name")?.value})),f=n.urlArray.controls.filter(p=>"*"==p.get("id").value).map(p=>({url:p.get("name")?.value}));if(a&&n.arrayIgualesUrl(a))return;for(let p of a)d.find(b=>b.url==p.vch_url)||s.push(p);for(let p of f){const g={id_producto:e,vch_url:p.url};if(1==(yield(0,Je.z)(n.prodProvider.addlink(g))).code){const S={id_user:n.id_user,id_product:e,logType:7,setLog:!0,url:p.url,type:"youtube",action:"add"};yield(0,Je.z)(n.prodProvider.postBitacora(S))}}for(let p of s)if(1==(yield(0,Je.z)(n.prodProvider.deleteDocumentoAny(p.id))).code){const b={id_user:n.id_user,id_product:e,logType:7,setLog:!0,url:p.vch_url,type:"youtube",action:"remove"};yield(0,Je.z)(n.prodProvider.postBitacora(b))}}catch(s){throw console.error("Error desde agregar urls",s),s}})()}saveStockBodega(e){var n=this;return(0,ze.Z)(function*(){try{let d,s=[];for(let f of n.stockstArray.controls)d={id_producto:e,id_bodega:f.get("id")?.value,int_stock:f.get("stock")?.value},1!=(yield(0,Je.z)(n.prodProvider.actualizarStock(d))).code&&console.error("error al agregar la bodegas "+d.id_producto);for(let f=0;f<s.length;f++)d={id_bodega:s[f].id_bodega,id_producto:e},yield(0,Je.z)(n.prodProvider.deleteBodega(d))}catch(s){throw console.error("Error desde saveStockBodega",s),s}})()}arrayIguales(e,n){if(e.length!=n.length)return!1;for(let s=0;s<e.length;s++)if(!n.find(d=>d.id==e[s].id))return!1;return!0}arrayIgualesUrl(e){if(e.length!=this.urlArray.controls.length)return!1;for(let n of e)if(!this.urlArray.controls.find(a=>a.get("name")?.value==n.url))return!1;return!0}saveModificados(e){var n=this;return(0,ze.Z)(function*(){try{for(let s of n.prodMod){const a={id_producto:e,id_usuario:n.id_user,vch_cambio:s};1!=(yield(0,Je.z)(n.prodProvider.postBitacora(a))).code&&console.error("error al agregar la modificaci\xf3n "+s)}}catch(s){throw console.error("Error desde save modificado",s),s}})()}syncProd(){this.loadingSync=!0,this.prodProvider.syncProducto(this.producto.data?.id).subscribe({next:e=>{this.loadingSync=!1,this.toastService.show("Sincronizado",{classname:"bg-success text-light",delay:1e4}),this.mensajeAlert=e.data.countOK>0?"Sincronizaci\xf3n realizada con \xe9xito":"Error al tratar de syncronizar, favor intente de nuevo, si el problema persiste llamar al administrador",this.showAlert=e.data.countOK>0,this.errorAlert=0==e.data.countOK},error:e=>{this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3}),console.error("Error desde la api Sync",e),this.loadingSync=!1}})}get showErrorSync(){return $i.N.errorSync==this.producto.data?.id_estado||$i.N.errorSap==this.producto.data?.id_estado}stateManagment(){var e=this;return(0,ze.Z)(function*(){try{const n=(yield(0,Je.z)(e.prodProvider.getEstadoProducto())).data||[],s=$i.N.errorSync,a=$i.N.errorSap,d=$i.N.borrador,f={};f[s]=()=>{e.estadosProducto=n.filter(g=>g.id!=$i.N.errorSap&&g.id!=$i.N.borrador),console.log("hice errorsync",e.estadosProducto)},f[a]=()=>{e.estadosProducto=n.filter(g=>g.id!=$i.N.errorSync&&g.id!=$i.N.borrador),console.log("hice error sap",e.estadosProducto)},f[d]=()=>{e.estadosProducto=n.filter(g=>g.id==$i.N.publicado||g.id==$i.N.nopublicado||g.id==$i.N.borrador),console.log("hice borrador",e.estadosProducto)},f.default=()=>{e.estadosProducto=n.filter(g=>g.id!=$i.N.errorSap&&g.id!=$i.N.errorSync&&g.id!=$i.N.borrador),console.log("hice default",e.estadosProducto)},console.log("estado ejecutandose",e.producto.data?.id_estado),f[e.producto.data?.id_estado==s||e.producto.data?.id_estado==a||e.producto.data?.id_estado==d?e.producto.data?.id_estado:"default"]()}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3})}})()}get errorSync(){return this.producto.data?.vch_errorsync?this.producto.data.vch_errorsync:this.producto.data?.vch_errorsyncsap}get errorSyncTitle(){return this.producto.data?.vch_errorsync?"Error sync ecommerce":"Error SAP"}formatCorrectDate(e){return e?`${e.year}-${e.month}-${e.day}`:null}formatDateToDatePicker(e){if(!e)return null;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate()}}loadTags(){var e=this;return(0,ze.Z)(function*(){let n=e.userProvider.usuario.id_empresa;try{e.tags=(yield(0,Je.z)(e.prodProvider.getAllTagsBySeller(n))).data||[]}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3})}})()}loadTagsSelected(){var e=this;return(0,ze.Z)(function*(){const n=String(e.rutaActiva.snapshot.params.id);try{e.tagsSelected=(yield(0,Je.z)(e.prodProvider.getAllTagsByProduct(n))).data||[]}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3})}})()}setTagOfChild(e){this.tagsSelected=e}duplicateProduct(){var e=this;return(0,ze.Z)(function*(){e.loadingDuplicate=!0;const n=String(e.rutaActiva.snapshot.params.id);e.prodProvider.postDuplicateProduct(n).subscribe({next:s=>{"OK"!=s.status?e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3}):e.router.navigate(["/"]).then(()=>{e.router.navigate([`/product/unique/${s.data.id}`])})},error:s=>{console.error("Error en duplicar el producto"),e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:15e3})},complete:()=>{e.loadingDuplicate=!1}})})()}respAlert(e){e&&this.duplicateProduct()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M),t.Y36(Tt.FF),t.Y36(P.gz),t.Y36(H.qu),t.Y36(P.F0),t.Y36(ft.i),t.Y36(lt.k))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-unique"]],viewQuery:function(e,n){if(1&e&&(t.Gf(OH,5),t.Gf(IH,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.cbStatus=s.first),t.iGM(s=t.CRH())&&(n.errorToast=s.first)}},decls:5,vars:2,consts:[["class","text-center mt-5","style","height: 500px;",4,"ngIf"],["class","content d-flex flex-column flex-column-fluid",3,"ngClass",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],[1,"text-center","mt-5",2,"height","500px"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],[1,"content","d-flex","flex-column","flex-column-fluid",3,"ngClass"],["class","post d-flex flex-column-fluid","id","kt_post",4,"ngIf"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],["id","kt_ecommerce_add_product_form",1,"form","d-flex","flex-column","flex-lg-row"],[1,"d-flex","flex-column","gap-7","gap-lg-10","w-100","w-lg-300px","mb-7","me-lg-10"],[1,"card","card-flush","py-4"],[1,"card-header"],[1,"card-title"],[1,"card-body","text-center","pt-0"],["data-kt-image-input","true",1,"image-input","image-input-empty","image-input-outline","mb-3"],[1,"image-input-wrapper","w-150px","h-150px"],["class","card card-flush py-4",4,"ngIf"],[1,"card-body","pt-0"],["data-placeholder","--  Seleccione  --",1,"form-select","form-select-lg","mb-2",3,"disabled","change"],["cbMarca",""],["value","-1"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"text-muted","fs-7"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3"],[4,"ngFor","ngForOf"],["class","table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3",4,"ngIf"],[3,"ngIf"],["type","button",1,"btn","btn-light-primary","btn-sm","mb-10",3,"disabled","click"],[1,"svg-icon","svg-icon-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","11","y","18","width","12","height","2","rx","1","transform","rotate(-90 11 18)","fill","currentColor"],["x","6","y","11","width","12","height","2","rx","1","fill","currentColor"],[1,"form-label","d-block"],[1,"d-flex","flex-column","flex-row-fluid","gap-7","gap-lg-10"],[1,"nav","nav-custom","nav-tabs","nav-line-tabs","nav-line-tabs-2x","border-0","fs-4","fw-bold","mb-n2"],[1,"nav-item"],["type","button","data-bs-toggle","tab",1,"nav-link","text-active-primary","pb-4",3,"ngClass","click"],["class","nav-item",4,"ngIf"],[1,"tab-content"],["id","kt_ecommerce_add_product_general","role","tab-panel",1,"tab-pane","fade","show","active"],[1,"d-flex","flex-column","gap-7","gap-lg-10"],[3,"producto","ngStyle","form","pagCreate","formChange","fotoPortada"],[3,"producto","ngStyle","form","action","idEmpresa","formChange"],[3,"producto","ngStyle","form","idEmpresa","formChange",4,"ngIf"],[3,"ngStyle","product","productContent",4,"ngIf"],[3,"producto","ngStyle",4,"ngIf"],[3,"product","id_user","ngStyle",4,"ngIf"],["class","d-flex position-absolute justify-content-start",4,"ngIf"],[1,"d-flex","justify-content-end"],["routerLink","/product",1,"btn","btn-danger","me-5"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm",3,"hidden"],[1,"visually-hidden",3,"hidden"],[1,"indicator-label",3,"hidden"],["class","alert alert-dismissible mt-5","role","alert",3,"ngClass",4,"ngIf"],["modal",""],["modaltn",""],["modaltag",""],["modalAlert",""],[1,"card-toolbar"],[1,"rounded-circle","w-15px","h-15px",3,"ngClass"],["data-control","select2","data-hide-search","true","data-placeholder","Select an option","id","kt_ecommerce_add_product_status_select",1,"form-select","mb-2",3,"disabled","change"],["cbStatus",""],[4,"ngIf"],[3,"value","selected"],["type","button","placement","end",1,"btn","btn-danger","me-2","mt-2",3,"ngbPopover","popoverTitle"],[1,"fa-solid","fa-circle-chevron-right",2,"color","#009EF7"],[1,"bg-light","mb-5","text-center"],[1,"fa-solid","fa-circle-chevron-right",2,"color","gray"],[3,"producto","ngStyle","form","idEmpresa","formChange"],[3,"ngStyle","product","productContent"],[3,"producto","ngStyle"],[3,"product","id_user","ngStyle"],[1,"d-flex","position-absolute","justify-content-start"],["type","button",1,"btn","btn-success","me-5",3,"disabled","click"],["type","button",1,"btn","btn-info",3,"disabled","click"],["role","alert",1,"alert","alert-dismissible","mt-5",3,"ngClass"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"],[3,"isAdmin","idCompany","selectedCategories","modal","categoriasSelectOut"],[3,"tipoNegSelectIn","modal2","tipoNegSelectOut"],[3,"listTags","listTagsSelected","modalTag","tagSelected"],[3,"modalAlert","messagge","title","resp"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(e,n){1&e&&(t.YNc(0,MH,2,0,"div",0),t.YNc(1,oV,2,4,"div",1),t._UZ(2,"app-toast",2),t.YNc(3,aV,3,0,"ng-template",null,3,t.W1O)),2&e&&(t.Q6J("ngIf",n.loadingPage),t.xp6(1),t.Q6J("ngIf",!n.loadingPage))},dependencies:[X.mk,X.sg,X.O5,X.PC,P.yS,H._Y,H.YN,H.Kr,H.JL,Lt.q,Xb.w,H.F,Tt.o8,NZ,C9,q,k9,P9,z9,xH,wH,AH],styles:[".disabledDiv[_ngcontent-%COMP%]{pointer-events:none}"]}),i})();var Co=(()=>(function(i){i[i.general=0]="general",i[i.advance=1]="advance",i[i.relation=2]="relation",i[i.logs=3]="logs",i[i.content=4]="content",i[i.campaing=5]="campaing"}(Co||(Co={})),Co))();let cV=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-product"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[P.lC]}),i})();function dV(i,r){if(1&i&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("selected","all"==e.id)("value",e.id),t.xp6(1),t.Oqu(e.vch_nombre)}}function uV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",38)(1,"label",39),t._uU(2,"Seleccionar empresa"),t.qZA(),t.TgZ(3,"select",40,41),t.NdJ("change",function(){t.CHM(e);const s=t.MAs(4),a=t.oxw();return t.KtG(a.changeCompany(s.value))}),t.YNc(5,dV,2,3,"option",42),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.companies)}}function hV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.removeFilters())}),t._uU(1," Quitar filtros "),t.qZA()}}function fV(i,r){1&i&&(t.TgZ(0,"div",45),t._UZ(1,"img",46),t.qZA())}function pV(i,r){1&i&&(t.TgZ(0,"div",47)(1,"strong"),t._uU(2,"Sin productos"),t.qZA()())}function mV(i,r){1&i&&(t.TgZ(0,"th",51),t._uU(1,"Empresa"),t.qZA())}function gV(i,r){if(1&i&&(t.TgZ(0,"td")(1,"p",57),t._uU(2),t.qZA()()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",null==e.tbl_empresa?null:e.tbl_empresa.vch_nombre," ")}}const _V=function(i){return[i]},vV=function(i){return{empresa:i}},bV=function(i,r,e){return{"badge-light-success":i,"badge-light-warning":r,"badge-light-danger":e}};function xV(i,r){if(1&i&&(t.TgZ(0,"tr",56)(1,"td")(2,"p",57),t._uU(3),t.qZA()(),t.YNc(4,gV,3,1,"td",58),t.TgZ(5,"td",59)(6,"span",60)(7,"span",61),t._uU(8,"|"),t.qZA(),t._uU(9),t.ALo(10,"date"),t.TgZ(11,"span",61),t._uU(12,"|"),t.qZA()()(),t.TgZ(13,"td",62)(14,"span",63)(15,"span",61),t._uU(16,"|"),t.qZA(),t._uU(17),t.ALo(18,"date"),t.TgZ(19,"span",61),t._uU(20,"|"),t.qZA()()(),t.TgZ(21,"td",62)(22,"span",64),t._uU(23),t.qZA()()()),2&i){const e=r.$implicit,n=t.oxw(2);t.Q6J("routerLink",t.VKq(14,_V,"./detail/"+e.id))("queryParams",t.VKq(16,vV,null==e.tbl_empresa?null:e.tbl_empresa.id)),t.xp6(3),t.hij(" ",e.vch_nombre," "),t.xp6(1),t.Q6J("ngIf",n.isAdmin),t.xp6(5),t.Oqu(t.xi3(10,8,e.dt_fechainicam,"dd/MM/yyyy")),t.xp6(8),t.Oqu(t.xi3(18,11,e.dt_fechafincam,"dd/MM/yyyy")),t.xp6(5),t.Q6J("ngClass",t.kEZ(18,bV,"Activa"==e.campaignStatus,"En espera"==e.campaignStatus,"Expirada"==e.campaignStatus)),t.xp6(1),t.Oqu(e.campaignStatus)}}function CV(i,r){if(1&i&&(t.TgZ(0,"div",48)(1,"table",49)(2,"thead")(3,"tr",50)(4,"th",51),t._uU(5,"Nombre"),t.qZA(),t.YNc(6,mV,2,0,"th",52),t.TgZ(7,"th",53),t._uU(8,"Inicio"),t.qZA(),t.TgZ(9,"th",53),t._uU(10,"Fin"),t.qZA(),t.TgZ(11,"th",53),t._uU(12,"Estado"),t.qZA()()(),t.TgZ(13,"tbody",54),t.YNc(14,xV,24,22,"tr",55),t.qZA()()()),2&i){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.isAdmin),t.xp6(8),t.Q6J("ngForOf",e.filteredCampaigns)}}function SV(i,r){1&i&&(t.O4$(),t.TgZ(0,"svg",65),t._UZ(1,"path",66),t.qZA(),t._uU(2," Error del servidor, favor intente nuevamente\n"))}const EV=function(){return["./detail"]},wV=function(i){return{"pointer-events":i}};let kV=(()=>{class i{constructor(e,n,s){this.productService=e,this.usuarioService=n,this.formBuilder=s,this.loading=!1,this.isAdmin=!1,this.filterActive=!1,this.canAddCampaign=!1,this.canAddCampaign=n.hasPermission(Ss.Q.ADD_CAMPANIA),this.isAdmin=n.adminAibo,this.userCompanyId=this.isAdmin?"all":this.usuarioService.usuario.id_empresa}ngOnInit(){this.isAdmin?(this.loadCompanies(),this.loadData()):this.loadData(),this.filterFormGroup=this.formBuilder.group({vch_nombre:"",campaignStatus:"",initDate:"",endDate:""})}loadData(){this.loading=!0,this.productService.getCategorias().pipe((0,Kn.U)(e=>e.data.filter(s=>this.isAdmin&&"all"==this.userCompanyId?1==s.bit_campana:1==s.bit_campana&&s.id_empresa==this.userCompanyId))).subscribe({next:e=>{this.campaigns=e.sort((n,s)=>new Date(s.dt_fechainicam).getTime()-new Date(n.dt_fechainicam).getTime()),this.campaigns.forEach(n=>{n.dt_fechafincam&&(n.campaignStatus=this.campaignStatus(n.dt_fechainicam,n.dt_fechafincam))}),this.filteredCampaigns=[...this.campaigns],this.loading=!1},error:e=>{this.loading=!1,console.log("error al cargar campanas: ",e)}})}loadCompanies(){var e=this;return(0,ze.Z)(function*(){try{e.companies=(yield(0,Je.z)(e.productService.getEmpresas())).data,e.companies.sort((n,s)=>n.vch_nombre.localeCompare(s.vch_nombre)),e.companies.unshift({id:"all",vch_nombre:"Todas"})}catch(n){console.log(n)}})()}changeCompany(e){this.userCompanyId=e,this.loadData()}campaignStatus(e,n){const s="string"==typeof e?new Date(e):e,a="string"==typeof n?new Date(n):n,d=s.getTime(),f=a.getTime(),p=Date.now();return p<d?"En espera":p>=d&&p<=f?"Activa":"Expirada"}filterSubmit(){this.filterActive=!0,console.log(this.filterFormGroup.value),this.filteredCampaigns=this.campaigns.filter(e=>{if(this.filterValidations(e))return e}),console.log("campaigns : ",this.filteredCampaigns)}removeFilters(){this.filteredCampaigns=[...this.campaigns],this.filterActive=!1,this.filterFormGroup.reset({campaignStatus:""})}filterValidations(e){const n=this.filterFormGroup.value;return!(n.vch_nombre&&!e.vch_nombre?.toLocaleLowerCase().includes(n.vch_nombre.toLocaleLowerCase())||n.campaignStatus&&n.campaignStatus!=e.campaignStatus||(n.initDate||n.endDate)&&!this.filterValidateDate(e))}filterValidateDate(e){const n=this.filterFormGroup.value,s=new Date(e.dt_fechafincam).getTime(),a=new Date(e.dt_fechafincam).getTime(),d=n.initDate?new Date(n.initDate.year,n.initDate.month-1,n.initDate.day).getTime():0,f=n.endDate?new Date(n.endDate.year,n.endDate.month-1,n.endDate.day).getTime():1/0;return s>=d&&s<=f||a>=d&&a<=f}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M),t.Y36(ft.i),t.Y36(H.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list-campaign"]],decls:60,vars:11,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],["table","campaign-table","name","ListadoCampa\xf1as.xlsx"],[3,"routerLink","ngStyle"],[1,"btn","btn-primary"],[1,"row","col-12"],[3,"formGroup","ngSubmit"],[1,"row"],["class","col-3",4,"ngIf"],[1,"col-4"],["for","initDate",1,"form-label"],["type","text","placeholder","Nombre","name","vch_nombre","formControlName","vch_nombre",1,"form-control"],["data-control","selectcampaignStatus","data-hide-search","true","data-placeholder","Select an option","formControlName","campaignStatus","name","campaignStatus","title","campaignStatus",1,"form-select","mb-2"],["value","","disabled","","default","","selected","","hidden",""],["value","Activa"],["value","En espera"],["value","Expirada"],[1,"row","mt-5"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","initDate","formControlName","initDate","ngbDatepicker","",1,"form-control"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["for","endDate",1,"form-label"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control"],["dFin","ngbDatepicker"],[1,"col"],["type","submit","value","Filtrar",1,"btn","btn-sm","btn-primary","mt-4","mb-3","me-4"],["title","borrar filtros","type","button","class","btn btn-sm btn-danger",3,"click",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],[1,"col-3"],["for","companySelect",1,"form-label"],[1,"form-select","mb-2","w-auto",3,"change"],["companySelect",""],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],["title","borrar filtros","type","button",1,"btn","btn-sm","btn-danger",3,"click"],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],["role","alert",1,"alert","alert-danger","m-10"],[1,"card-body","pt-0"],["id","campaign-table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"min-w-200px"],["class","min-w-200px",4,"ngIf"],[1,"text-end","min-w-100px"],[1,"fw-bold","text-gray-600"],["style","cursor: pointer",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"routerLink","queryParams"],[1,"text-dark","fw-bolder","mb-0"],[4,"ngIf"],["data-order","25",1,"text-end","pe-0"],[1,"fw-bolder","ms-3"],[2,"visibility","hidden"],[1,"text-end","pe-0"],[1,"fw-bolder"],[1,"fw-bolder","rounded","p-1",3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Campa\xf1as"),t.qZA()(),t.TgZ(8,"div",6),t._UZ(9,"app-export-excel",7),t.TgZ(10,"a",8)(11,"button",9),t._uU(12,"Crear Campa\xf1a"),t.qZA()()(),t.TgZ(13,"div",10)(14,"form",11),t.NdJ("ngSubmit",function(){return n.filterSubmit()}),t.TgZ(15,"div",12),t.YNc(16,uV,6,1,"div",13),t.TgZ(17,"div",14)(18,"label",15),t._uU(19,"Nombre"),t.qZA(),t._UZ(20,"input",16),t.qZA(),t.TgZ(21,"div",14)(22,"label",15),t._uU(23,"Seleccionar estado"),t.qZA(),t.TgZ(24,"select",17)(25,"option",18),t._uU(26," Estado "),t.qZA(),t.TgZ(27,"option",19),t._uU(28,"Activa"),t.qZA(),t.TgZ(29,"option",20),t._uU(30,"En espera"),t.qZA(),t.TgZ(31,"option",21),t._uU(32,"Expirada"),t.qZA()()()(),t.TgZ(33,"div",22)(34,"div",14)(35,"label",15),t._uU(36,"Fecha inicio"),t.qZA(),t.TgZ(37,"div",23),t._UZ(38,"input",24,25),t.TgZ(40,"button",26),t.NdJ("click",function(){t.CHM(s);const d=t.MAs(39);return t.KtG(d.toggle())}),t._uU(41,"."),t.qZA()()(),t.TgZ(42,"div",14)(43,"label",27),t._uU(44,"Fecha Fin"),t.qZA(),t.TgZ(45,"div",23),t._UZ(46,"input",28,29),t.TgZ(48,"button",26),t.NdJ("click",function(){t.CHM(s);const d=t.MAs(47);return t.KtG(d.toggle())}),t._uU(49,"."),t.qZA()()()(),t.TgZ(50,"div",22)(51,"div",30),t._UZ(52,"input",31),t.YNc(53,hV,2,0,"button",32),t.qZA()()()()(),t.YNc(54,fV,2,0,"div",33),t.YNc(55,pV,3,0,"div",34),t.YNc(56,CV,15,2,"div",35),t.qZA()()()(),t._UZ(57,"app-toast",36),t.YNc(58,SV,3,0,"ng-template",null,37,t.W1O)}2&e&&(t.xp6(10),t.Q6J("routerLink",t.DdM(8,EV))("ngStyle",t.VKq(9,wV,n.canAddCampaign?"inherit":"none")),t.xp6(4),t.Q6J("formGroup",n.filterFormGroup),t.xp6(2),t.Q6J("ngIf",n.isAdmin),t.xp6(37),t.Q6J("ngIf",n.filterActive),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.filteredCampaigns&&0==n.filteredCampaigns.length),t.xp6(1),t.Q6J("ngIf",!n.loading&&n.campaigns&&n.campaigns.length>0))},dependencies:[X.mk,X.sg,X.O5,X.PC,P.rH,P.yS,H._Y,H.YN,H.Kr,H.Fj,H.EJ,H.JJ,H.JL,H.sg,H.u,Lt.q,An.$,Tt.J4,X.uU]}),i})();var TV=Oe(4128);function yV(i,r){1&i&&(t.TgZ(0,"ul",10)(1,"li",11)(2,"div",12)(3,"span",13),t._UZ(4,"span",14),t.qZA()()()())}function DV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"li",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.addProducto(a))}),t.TgZ(1,"div",17)(2,"div",18)(3,"span",19),t._uU(4),t.qZA(),t.TgZ(5,"div",20),t._uU(6),t.qZA()()()()}if(2&i){const e=r.$implicit;t.xp6(4),t.Oqu(e.vch_nombre),t.xp6(2),t.Oqu(e.vch_sku)}}function AV(i,r){if(1&i&&(t.TgZ(0,"ul",10),t.YNc(1,DV,7,2,"li",15),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.products)}}function OV(i,r){1&i&&(t.TgZ(0,"ul",10)(1,"li",11)(2,"div",17)(3,"div",18)(4,"span",21),t._uU(5,"No se encontraron productos"),t.qZA()()()()())}let IV=(()=>{class i{constructor(e,n,s){this.prodProvider=e,this.toastService=n,this.formBuilder=s,this.allCompanies=!1,this.productsInCampaign=[],this.productSelect=new t.vpe,this.loading=!1,this.nothingFind=!1,this.sku="",this.name="",this.formSearch=s.group({sku:"",nombre:""})}ngOnInit(){this.formSearch.get("sku").valueChanges.subscribe(e=>{this.sku=e,this.nothingFind=!1,0==this.sku.length&&(this.products=[])}),this.formSearch.get("nombre").valueChanges.subscribe(e=>{this.name=e,this.nothingFind=!1,0==this.name.length&&(this.products=[])})}get showResult(){return this.name.length>0||this.sku.length>0}getProducts(){const e={};this.allCompanies||(e.idEmpresa=this.idEmpresa),this.sku&&(e.sku=this.sku),this.name&&(e.nombre=this.name),this.loading=!0,this.nothingFind=!1,this.prodProvider.getProductSearch(e).subscribe({next:n=>{n.data&&n.data.length>0?(this.products=n.data.filter(s=>!this.productsInCampaign.find(a=>a.id==s.id)),this.nothingFind=!(this.products.length>0)):(this.nothingFind=!0,this.products=[])},error:n=>{console.error("error al tratar de buscar los datos"),this.nothingFind=!0,this.products=[]},complete:()=>this.loading=!1})}addProducto(e){this.productSelect.emit(e),this.products?.splice(this.products.indexOf(e),1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ue.M),t.Y36(lt.k),t.Y36(H.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-search-product-inline"]],inputs:{idEmpresa:"idEmpresa",allCompanies:"allCompanies",productsInCampaign:"productsInCampaign"},outputs:{productSelect:"productSelect"},decls:13,vars:4,consts:[[1,"d-flex","justify-content-center","align-items-center","position-relative"],["autocomplete","off",1,"w-100","position-relative",3,"formGroup","submit"],[1,"row","mb-3"],[1,"col-md-6","fv-row"],["type","search","placeholder","SKU","name","sku","formControlName","sku",1,"form-control","form-control-solid"],["type","search","placeholder","Nombre","name","name","formControlName","nombre",1,"form-control","form-control-solid"],[1,"col-md-2","fv-row","text-center","ocult"],["type","submit"],[1,"fa-solid","fa-magnifying-glass"],["class","list-group position-absolute w-100 resultSearch",4,"ngIf"],[1,"list-group","position-absolute","w-100","resultSearch"],[1,"list-group-item"],[1,"d-flex","align-items-center","w-100","justify-content-center"],[1,"m-3","row","justify-content-center"],[1,"spinner-border","h-15px","w-15px","align-middle","text-muted"],["class","list-group-item","style","cursor:pointer;",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",2,"cursor","pointer",3,"click"],[1,"d-flex","align-items-center"],[1,"ms-3"],[1,"fs-5","fw-bolder","text-gray-900","text-hover-primary","mb-2"],[1,"fw-bold","text-muted"],[1,"fs-5","fw-bolder","text-gray-900","mb-2"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("submit",function(){return n.getProducts()}),t.TgZ(2,"div",2)(3,"div",3),t._UZ(4,"input",4),t.qZA(),t.TgZ(5,"div",3),t._UZ(6,"input",5),t.qZA()(),t.TgZ(7,"div",6)(8,"button",7),t._UZ(9,"i",8),t.qZA()()(),t.YNc(10,yV,5,0,"ul",9),t.YNc(11,AV,2,1,"ul",9),t.YNc(12,OV,6,0,"ul",9),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.formSearch),t.xp6(9),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading&&n.showResult&&n.products&&n.products.length>0),t.xp6(1),t.Q6J("ngIf",n.nothingFind&&n.showResult))},dependencies:[X.sg,X.O5,H._Y,H.Fj,H.JJ,H.JL,H.sg,H.u],styles:[".ocult[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:-1;pointer-events:none}.resultSearch[_ngcontent-%COMP%]{top:100%;left:0;z-index:4}"]}),i})(),MV=(()=>{class i{transform(e,n,s){let a=0;return console.log("me ejecuto pipe"),a=n?e.int_porcdescuento>0?e.db_precio-e.db_precio*(e.int_porcdescuento/100):0!=e.tbl_productoxcategoria[0].int_porcdescuento?e.db_precio-e.db_precio*(e.tbl_productoxcategoria[0].int_porcdescuento/100):e.db_precio-e.db_descuento:e.int_porcdescuento>0?e.db_precio-e.db_precio*(e.int_porcdescuento/100):e.db_precio-e.db_descuento,a}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"getDescount",type:i,pure:!0}),i})();const RV=["dangerTpl"];function NV(i,r){1&i&&(t.TgZ(0,"div",13),t._UZ(1,"img",14),t.qZA())}function FV(i,r){1&i&&(t.TgZ(0,"div",18)(1,"h2"),t._uU(2,"Crear campa\xf1a"),t.qZA()())}function LV(i,r){if(1&i&&t._UZ(0,"app-export-excel",32),2&i){const e=t.oxw(3);t.Q6J("name","reporte"+e.campaignName+".xls")}}function PV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"h2",21),t._uU(3),t.qZA(),t.TgZ(4,"div",22)(5,"button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2),a=t.MAs(17);return t.KtG(s.open(a))}),t._uU(6," Eliminar "),t.qZA(),t.YNc(7,LV,1,1,"app-export-excel",24),t.qZA()(),t.TgZ(8,"div",25)(9,"div",26)(10,"h4"),t._uU(11),t.ALo(12,"date"),t.qZA()()(),t.TgZ(13,"div",25)(14,"div",26)(15,"h4"),t._uU(16),t.ALo(17,"date"),t.qZA()()(),t.TgZ(18,"div",27)(19,"div",26)(20,"h4"),t._uU(21),t.qZA()()(),t.TgZ(22,"div",25)(23,"div",26)(24,"h4"),t._uU(25," Estado: "),t.TgZ(26,"span",28),t._uU(27),t.qZA()()()(),t.TgZ(28,"div",29)(29,"div",30)(30,"button",31),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.changeEditCampaign())}),t._uU(31," Editar "),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.campaignName),t.xp6(2),t.Q6J("disabled",!e.canDeleteCampaign),t.xp6(2),t.Q6J("ngIf",e.infoReportCampaigns&&e.infoReportCampaigns.length>0),t.xp6(4),t.hij(" Fecha inicio: ",t.xi3(12,9,e.campaignFechaIni,"dd/MM/yyyy")," "),t.xp6(5),t.hij("Fecha fin: ",t.xi3(17,12,e.campaignFechaFin,"dd/MM/yyyy"),""),t.xp6(5),t.hij("Descripci\xf3n: ",e.campaingnDesc,""),t.xp6(5),t.Q6J("className",e.campaignStatusColor),t.xp6(1),t.Oqu(e.campaignStatusValue),t.xp6(3),t.Q6J("disabled",!e.canEditCampaign)}}function UV(i,r){if(1&i&&(t.TgZ(0,"div",15),t.YNc(1,FV,3,0,"div",16),t.YNc(2,PV,32,15,"div",17),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.campaignId),t.xp6(1),t.Q6J("ngIf",e.campaignId)}}function BV(i,r){1&i&&(t.TgZ(0,"small",58),t._uU(1," M\xe1ximo 300 caracteres "),t.qZA())}function GV(i,r){if(1&i&&(t.ynx(0),t.YNc(1,BV,2,0,"small",57),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.campaignFormGroup.controls.description.errors?null:e.campaignFormGroup.controls.description.errors.maxlength)}}function zV(i,r){1&i&&(t.TgZ(0,"span",59),t._uU(1," La fecha de inicio no puede ser menor a la fecha actual "),t.qZA())}function ZV(i,r){1&i&&(t.TgZ(0,"span",59),t._uU(1," La fecha de fin no puede ser menor a la fecha de inicio "),t.qZA())}function HV(i,r){1&i&&(t.TgZ(0,"span",59),t._uU(1,"El nombre debe tener al menos 3 caracteres "),t.qZA())}function VV(i,r){1&i&&(t.TgZ(0,"button",60),t._UZ(1,"span",61),t._uU(2," Cargando... "),t.qZA())}function JV(i,r){if(1&i&&(t.TgZ(0,"button",62),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.Q6J("disabled",!e.campaignFormGroup.valid),t.xp6(1),t.hij(" ",e.campaignId?"Actualizar":"Guardar"," campa\xf1a ")}}function qV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",33)(1,"form",34),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.submitCampaign())}),t.TgZ(2,"div",35)(3,"div",36)(4,"label",37),t._uU(5,"Nombre de campa\xf1a"),t.qZA(),t._UZ(6,"input",38),t.qZA(),t.TgZ(7,"div",39)(8,"label",40),t._uU(9,"Fecha inicio"),t.qZA(),t.TgZ(10,"div",41),t._UZ(11,"input",42,43),t.TgZ(13,"button",44),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(12);return t.KtG(s.toggle())}),t._uU(14," . "),t.qZA()()(),t.TgZ(15,"div",45)(16,"label",46),t._uU(17,"Fecha Fin"),t.qZA(),t.TgZ(18,"div",41),t._UZ(19,"input",47,48),t.TgZ(21,"button",44),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(20);return t.KtG(s.toggle())}),t._uU(22," . "),t.qZA()()()(),t.TgZ(23,"div",49)(24,"label",46),t._uU(25,"Descripci\xf3n"),t.qZA(),t.TgZ(26,"div",30),t._UZ(27,"textarea",50),t.YNc(28,GV,2,1,"ng-container",51),t.qZA()(),t._UZ(29,"div",35),t.TgZ(30,"div",52),t.YNc(31,zV,2,0,"span",53),t.qZA(),t.TgZ(32,"div",52),t.YNc(33,ZV,2,0,"span",53),t.qZA(),t.TgZ(34,"div",52),t.YNc(35,HV,2,0,"span",53),t.qZA(),t.TgZ(36,"div",29)(37,"div",54),t.YNc(38,VV,3,0,"button",55),t.YNc(39,JV,2,2,"button",56),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.campaignFormGroup),t.xp6(6),t.Q6J("ngClass","Activa"==e.campaignStatusValue?"d-none":""),t.xp6(20),t.ekj("is-invalid",e.descInvalid),t.xp6(1),t.Q6J("ngIf",e.descInvalid),t.xp6(3),t.Q6J("ngIf",e.campoEsValido("initDate")),t.xp6(2),t.Q6J("ngIf",e.endDateError),t.xp6(2),t.Q6J("ngIf",e.campoEsValido("campaignName")),t.xp6(3),t.Q6J("ngIf",e.campaignButtonLoader),t.xp6(1),t.Q6J("ngIf",!e.campaignButtonLoader)}}function YV(i,r){1&i&&(t.TgZ(0,"h4",92),t._uU(1,"La campa\xf1a es multiseller"),t.qZA())}function KV(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1,"Descargar template"),t.qZA())}function $V(i,r){1&i&&(t.TgZ(0,"span"),t._UZ(1,"span",93),t._uU(2," Cargando... "),t.qZA())}function WV(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1,"Cargar excel"),t.qZA())}function jV(i,r){1&i&&(t.TgZ(0,"span"),t._UZ(1,"span",93),t._uU(2," Cargando... "),t.qZA())}function QV(i,r){1&i&&(t.TgZ(0,"button",94),t._UZ(1,"span",61),t._uU(2," Cargando... "),t.qZA())}function XV(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",95),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deleteProducts())}),t._uU(1," Remover "),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",e.disableRemoveButton||!e.canRemoveProd||e.loadingExcel)}}function eJ(i,r){1&i&&(t.TgZ(0,"div",96)(1,"div"),t._uU(2,"No hay datos para mostrar"),t.qZA()())}function tJ(i,r){1&i&&(t.TgZ(0,"th",104),t._uU(1,"Seller"),t.qZA())}function nJ(i,r){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().index,n=t.oxw(3);t.xp6(1),t.hij(" ",n.getCompany(n.productsInCampaign[e].id_empresa)," ")}}function iJ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",100),t._UZ(3,"input",108),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.YNc(6,nJ,2,1,"td",51),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"div",109)(11,"input",110),t.NdJ("change",function(s){const d=t.CHM(e).index,f=t.oxw(3);return t.KtG(f.onDiscountChange(d,s))}),t.qZA()()(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"numberFormat"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.ALo(17,"numberFormat"),t.ALo(18,"getDescount"),t.qZA()()}if(2&i){const e=r.index,n=t.oxw(3);t.xp6(3),t.Q6J("formControlName",e),t.xp6(2),t.hij(" ",n.productsInCampaign[e].vch_nombre," "),t.xp6(1),t.Q6J("ngIf",n.isAdmin),t.xp6(2),t.hij(" ",n.productsInCampaign[e].vch_sku," "),t.xp6(3),t.Q6J("value",n.productsInCampaign[e].tbl_productoxcategoria[0].int_porcdescuento),t.xp6(2),t.hij(" ",t.lcZ(14,7,n.productsInCampaign[e].db_precio)," "),t.xp6(3),t.Oqu(t.lcZ(17,9,t.Dn7(18,11,n.productsInCampaign[e],"Activa"==n.campaignStatusValue,n.reloadPipeDescount)))}}function rJ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"table",97)(1,"thead")(2,"tr",98)(3,"th",99)(4,"div",100)(5,"input",101),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectAllButton())}),t.qZA()()(),t.TgZ(6,"th",102),t._uU(7,"Nombre"),t.qZA(),t.YNc(8,tJ,2,0,"th",103),t.TgZ(9,"th",104),t._uU(10,"SKU"),t.qZA(),t.TgZ(11,"th",104),t._uU(12,"Descuento campa\xf1a"),t.qZA(),t.TgZ(13,"th",105),t._uU(14,"Precio original"),t.qZA(),t.TgZ(15,"th",105),t._uU(16,"precio oferta"),t.qZA()()(),t.TgZ(17,"tbody",106),t.YNc(18,iJ,19,15,"tr",107),t.qZA()()}if(2&i){const e=t.oxw(2);t.Q6J("formGroup",e.productsFormGroup),t.xp6(8),t.Q6J("ngIf",e.isAdmin),t.xp6(10),t.Q6J("ngForOf",e.selectedArr.controls)}}function sJ(i,r){1&i&&(t.TgZ(0,"button",60),t._UZ(1,"span",61),t._uU(2," Cargando... "),t.qZA())}function oJ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",111),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.applyInputsDiscount())}),t._uU(1," Aplicar descuentos "),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",e.disableDiscountIndividualButton||!e.canAddProducts)}}function aJ(i,r){1&i&&(t.TgZ(0,"button",60),t._UZ(1,"span",61),t._uU(2," Cargando... "),t.qZA())}function lJ(i,r){if(1&i&&(t.TgZ(0,"button",62),t._uU(1," Aplicar descuentos "),t.qZA()),2&i){const e=t.oxw(3);t.Q6J("disabled",e.disableRemoveButton||!e.canAddProducts)}}function cJ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",112)(1,"h4"),t._uU(2,"Aplicar descuentos a productos seleccionados"),t.qZA(),t.TgZ(3,"form",34),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.applyDiscounts())}),t.TgZ(4,"div",113)(5,"span",114),t._uU(6),t.qZA(),t.TgZ(7,"span",115),t._uU(8,"%"),t.qZA()(),t._UZ(9,"div",116),t.TgZ(10,"input",117),t.NdJ("input",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.loadDiscount())}),t.qZA(),t.TgZ(11,"div",118)(12,"div",30),t.YNc(13,aJ,3,0,"button",55),t.YNc(14,lJ,2,1,"button",119),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("formGroup",e.discountFormGroup),t.xp6(3),t.Oqu(e.rangeDiscount),t.xp6(7),t.Q6J("ngIf",e.discountButtonLoader),t.xp6(1),t.Q6J("ngIf",!e.discountButtonLoader)}}function dJ(i,r){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&i){const e=r.$implicit,n=t.oxw(3);t.xp6(2),t.Oqu(e.id_venta),t.xp6(2),t.hij(" ",e.tbl_producto.vch_sku," "),t.xp6(2),t.hij(" ",e.vch_campana," "),t.xp6(2),t.hij(" ",n.calcularMonto(e.db_monto,e.int_cantidad)," "),t.xp6(2),t.hij(" ",e.db_monto*e.int_cantidad," "),t.xp6(2),t.hij(" ",n.calcularMonto(e.db_monto,e.int_cantidad,e.tbl_producto.tbl_productoxcategoria[0].int_porcdescuento)," ")}}function uJ(i,r){if(1&i&&(t.TgZ(0,"table",120)(1,"thead")(2,"tr",121)(3,"th",104),t._uU(4,"N\xb0 Pedido"),t.qZA(),t.TgZ(5,"th",104),t._uU(6,"SKU"),t.qZA(),t.TgZ(7,"th",104),t._uU(8,"Campa\xf1a"),t.qZA(),t.TgZ(9,"th",104),t._uU(10,"Monto neto"),t.qZA(),t.TgZ(11,"th",104),t._uU(12,"Monto con IVA"),t.qZA(),t.TgZ(13,"th",104),t._uU(14,"Monto con descuento"),t.qZA()()(),t.TgZ(15,"tbody",122),t.YNc(16,dJ,13,6,"tr",107),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",e.infoReportCampaigns)}}function hJ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",4)(4,"div",15)(5,"div",63)(6,"h3"),t._uU(7,"Agregar productos y descuentos"),t.qZA()(),t._UZ(8,"br"),t.YNc(9,YV,2,0,"h4",64),t.qZA(),t.TgZ(10,"div",33)(11,"div",65)(12,"div",27)(13,"h4",66)(14,"span",67),t._uU(15,"Productos en campa\xf1a"),t.qZA()()(),t.TgZ(16,"div",68)(17,"div",69)(18,"app-search-product-inline",70),t.NdJ("productSelect",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.modalProducts(s))}),t.qZA()(),t.TgZ(19,"div",71)(20,"div",72)(21,"a",73),t.YNc(22,KV,2,0,"span",51),t.YNc(23,$V,3,0,"span",51),t.qZA()(),t.TgZ(24,"form",74)(25,"button",75),t.NdJ("click",function(){t.CHM(e);const s=t.MAs(29);return t.KtG(s.click())}),t.YNc(26,WV,2,0,"span",51),t.YNc(27,jV,3,0,"span",51),t.qZA(),t.TgZ(28,"input",76,77),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.uploadExcel(s))}),t.qZA()(),t.TgZ(30,"div",78),t.YNc(31,QV,3,0,"button",79),t.YNc(32,XV,2,1,"button",80),t.qZA()()()(),t.TgZ(33,"div",81)(34,"div",82),t.YNc(35,eJ,3,0,"div",83),t.YNc(36,rJ,19,3,"table",84),t.qZA()(),t.TgZ(37,"div",85),t.YNc(38,sJ,3,0,"button",55),t.YNc(39,oJ,2,1,"button",86),t.qZA(),t.TgZ(40,"div",87)(41,"div")(42,"strong"),t._uU(43,"Notas: "),t.qZA(),t.TgZ(44,"ul")(45,"li")(46,"small"),t._uU(47,"Si la campa\xf1a no est\xe1 activa, los descuentos se aplicar\xe1n cuando empiece a regir la m\xedsma (el d\xeda inicio campa\xf1a)."),t.qZA()(),t.TgZ(48,"li")(49,"small"),t._uU(50,"Teniendo en cuenta el punto anterior, SOLO se ver\xe1 el descuento de un producto (descuento de campa\xf1a o de producto) si el producto est\xe1 en una campa\xf1a activa"),t.qZA()(),t.TgZ(51,"li")(52,"small"),t._uU(53,"El simbolo "),t.TgZ(54,"div",88),t._uU(55,"!"),t.qZA(),t._uU(56," indica que se aplica el descuento del producto y no el de la campa\xf1a. Si est\xe1 activa la campa\xf1a debe aplicar de nuevo el descuento en estos casos."),t.qZA()()()()(),t._UZ(57,"br")(58,"hr")(59,"br"),t.YNc(60,cJ,15,4,"div",89),t.qZA(),t.TgZ(61,"div",90),t.YNc(62,uJ,17,1,"table",91),t.qZA()()()()()}if(2&i){const e=t.oxw();t.xp6(9),t.Q6J("ngIf",e.isMultiSellerCampaign()),t.xp6(9),t.Q6J("idEmpresa",e.idEmpresaUsuario)("allCompanies",e.isAdmin)("productsInCampaign",e.productsInCampaign),t.xp6(4),t.Q6J("ngIf",!e.loadingDownloadExcel),t.xp6(1),t.Q6J("ngIf",e.loadingDownloadExcel),t.xp6(1),t.Q6J("formGroup",e.excelFormGroup),t.xp6(2),t.Q6J("ngIf",!e.loadingExcel),t.xp6(1),t.Q6J("ngIf",e.loadingExcel),t.xp6(4),t.Q6J("ngIf",e.removeButtonLoader),t.xp6(1),t.Q6J("ngIf",!e.removeButtonLoader),t.xp6(3),t.Q6J("ngIf",!e.productsInCampaign||0==e.productsInCampaign.length),t.xp6(1),t.Q6J("ngIf",e.productsInCampaign&&e.productsInCampaign.length>0),t.xp6(2),t.Q6J("ngIf",e.discountIndividualButtonLoader),t.xp6(1),t.Q6J("ngIf",!e.discountIndividualButtonLoader),t.xp6(21),t.Q6J("ngIf",e.productsInCampaign&&e.productsInCampaign.length>0),t.xp6(2),t.Q6J("ngIf",e.infoReportCampaigns&&e.infoReportCampaigns.length>0)}}function fJ(i,r){1&i&&(t.O4$(),t.TgZ(0,"svg",123),t._UZ(1,"path",124),t.qZA(),t._uU(2," Error del servidor, favor intente nuevamente\n"))}function pJ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-search-product-modal",125),t.NdJ("productSelect",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.modalProducts(s))}),t.qZA()}if(2&i){const e=r.$implicit,n=t.oxw();t.Q6J("modal3",e)("idEmpresa",n.idEmpresaUsuario)("skuNow","")("allCompanies",n.isAdmin)}}function mJ(i,r){1&i&&(t.TgZ(0,"button",133),t._UZ(1,"span",61),t._uU(2," Eliminando... "),t.qZA())}function gJ(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",134),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.deleteFullCampaign())}),t._uU(1," Eliminar "),t.qZA()}}function _J(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",135),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.KtG(s.dismiss())}),t._uU(1," Cancelar "),t.qZA()}}function vJ(i,r){if(1&i&&(t.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",4)(5,"div",126)(6,"div",127)(7,"h2"),t._uU(8,"\xbfEstas seguro?"),t.qZA()()(),t.TgZ(9,"div",128)(10,"div",129),t.YNc(11,mJ,3,0,"button",130),t.YNc(12,gJ,2,0,"button",131),t.YNc(13,_J,2,0,"button",132),t.qZA()()()()()()()),2&i){const e=t.oxw();t.xp6(11),t.Q6J("ngIf",e.campaignDeleteButtonLoader),t.xp6(1),t.Q6J("ngIf",!e.campaignDeleteButtonLoader),t.xp6(1),t.Q6J("ngIf",!e.campaignDeleteButtonLoader)}}function bJ(i,r){1&i&&(t._UZ(0,"img",136),t._uU(1," Error del servidor, favor intente nuevamente\n"))}const xJ=function(){return["/product/campaign"]};let LI=(()=>{class i{constructor(e,n,s,a,d,f,p,g){this.usuarioService=e,this.productService=n,this.fb=s,this.router=a,this.modalService=d,this.rutaActiva=f,this.toastService=p,this.campaignFormGroup=this.fb.group({campaignName:["",[H.kI.required,H.kI.minLength(3)]],initDate:["",[H.kI.required,this.initDateValidator()]],endDate:["",[H.kI.required]],description:["",[H.kI.maxLength(300)]]},{validators:[this.endDateValidator()]}),this.excelFormGroup=this.fb.group({excelCampaign:[""]}),this.campaignEdit=!1,this.campaignButtonLoader=!1,this.campaignDeleteButtonLoader=!1,this.endDateError=!1,this.campaignId="",this.productsInCampaign=[],this.productsFormGroup=this.fb.group({selected:this.fb.array([],H.kI.required),discount:this.fb.array([])}),this.removeButtonLoader=!1,this.disableRemoveButton=!0,this.companies=[],this.companiesInCampaign=[],this.discountFormGroup=this.fb.group({percentDiscount:[0,[H.kI.required]]}),this.discountButtonLoader=!1,this.disableDiscountButton=!0,this.discountIndividualButtonLoader=!1,this.disableDiscountIndividualButton=!0,this.loading=!0,this.loadingExcel=!1,this.loadingDownloadExcel=!1,this.selectedAll=!1,this.canDeleteCampaign=!1,this.canEditCampaign=!1,this.canRemoveProd=!1,this.reloadPipeDescount=!1,this.isAdmin=!1,this.campaignId=f.snapshot.params.id,this.permisos(),this.isAdmin=this.usuarioService.adminAibo,g.minDate={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,day:(new Date).getDate()}}loadCompanies(){var e=this;return(0,ze.Z)(function*(){try{e.companies=(yield(0,Je.z)(e.productService.getEmpresas())).data||[]}catch{e.toastService.show(e.errorToast,{classname:"bg-danger text-light",delay:3e3})}})()}getCompany(e){return this.companies.find(n=>n.id==e)?.vch_nombre||"No encontrado"}isMultiSellerCampaign(){return new Set(this.companiesInCampaign).size>1}permisos(){this.canDeleteCampaign=this.usuarioService.hasPermission(Ss.Q.DELETE_CAMPANIA),this.canEditCampaign=this.usuarioService.hasPermission(Ss.Q.UPDATE_CAMPANIA),this.canRemoveProd=this.usuarioService.hasPermission(Ss.Q.DELETE_PRODCAMPANIA)}get selectedArr(){return this.productsFormGroup.get("selected")}get discountArr(){return this.productsFormGroup.get("discount")}ngOnChanges(e){this.loadDiscount()}ngOnInit(){var e=this;return(0,ze.Z)(function*(){e.idEmpresaUsuario=(yield(0,Je.z)(e.rutaActiva.queryParams)).empresa||e.usuarioService.usuario.id_empresa,e.loadCompanies(),e.loadDiscount(),e.productsFormGroup.get("selected").valueChanges.subscribe(n=>{n.some(s=>1==s)?(e.disableRemoveButton=!1,e.disableDiscountButton=!1):(e.disableRemoveButton=!0,e.disableDiscountButton=!0)}),e.campaignId&&e.loadPage()})()}loadPage(){var e=this;return(0,ze.Z)(function*(){yield e.loadProducts(),e.getCampaignReport()})()}get descInvalid(){return this.campaignFormGroup.get("description")?.invalid&&this.campaignFormGroup.get("description")?.touched}changeEditCampaign(){if(this.campaignEdit=!this.campaignEdit,"Activa"==this.campaignStatusValue){this.campaignFormGroup.get("initDate")?.clearValidators(),this.campaignFormGroup.get("initDate")?.addValidators([H.kI.required]),this.campaignFormGroup.get("initDate")?.updateValueAndValidity();let e=this.campaignFechaIni.toString().split("-");this.campaignFormGroup.get("initDate")?.setValue({year:Number(e[0]),month:Number(e[1]),day:Number(e[2])})}}submitCampaign(){this.campaignButtonLoader=!0;const e={vch_nombre:this.campaignFormGroup.get("campaignName")?.value,id_empresa:this.idEmpresaUsuario,dt_fechainicam:this.formatCorrectDate(this.campaignFormGroup.get("initDate")?.value),dt_fechafincam:this.formatCorrectDate(this.campaignFormGroup.get("endDate")?.value),bit_campana:!0,vch_descripcion:this.campaignFormGroup.get("description")?.value};this.campaignId?this.productService.putCategoria(this.campaignId,e).subscribe({next:n=>{this.campaignFormGroup.reset({campaignName:n.data?.vch_nombre,initDate:"",endDate:""}),this.campaignName=n.data?.vch_nombre,this.campaignFechaIni=n.data?.dt_fechainicam.toString().slice(0,10),this.campaignFechaFin=n.data?.dt_fechafincam.toString().slice(0,10),this.campaingnDesc=n.data?.vch_descripcion||"-",this.campaignButtonLoader=!1,this.toastService.show("Actualizado con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:n=>{this.campaignButtonLoader=!1,this.toastService.show("Error al actualizar",{classname:"bg-danger text-center  text-light",delay:3500}),console.log("error: ",n)}}):this.productService.postCategoria(e).subscribe({next:n=>{const s=n.data?.id;this.toastService.show("Creado con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3}),setTimeout(()=>{this.router.navigateByUrl(`/product/campaign/detail/${s}`),this.campaignButtonLoader=!1},2e3)},error:n=>{this.campaignButtonLoader=!1,console.log("error: ",n),this.toastService.show("Error al crear",{classname:"bg-danger text-center  text-light",delay:3500})}})}deleteFullCampaign(){this.campaignDeleteButtonLoader=!0;const e=this.productsInCampaign.map(s=>s.id);(0,TV.D)([this.productService.deleteMultipleCategoriaxProducto({id_categoria:this.campaignId,id_productoArray:e}),this.productService.deleteCategoria(this.campaignId)]).pipe((0,Kn.U)(([s,a])=>{console.log(s),console.log(a)})).subscribe({next:s=>{console.log(s),this.modalService.dismissAll(),setTimeout(()=>{this.campaignDeleteButtonLoader=!1,this.router.navigateByUrl("/product/campaign")},200)},error:s=>{console.log(s),this.modalService.dismissAll(),this.toastService.show("Error al eliminar",{classname:"bg-danger text-center  text-light",delay:3500})}})}formatCorrectDate(e){return`${e.year}-${e.month}-${e.day}`}uploadExcel(e){var d,n=this;e.target.files&&(this.loadingExcel=!0,this.productService.postExcelCampaign({excel:e.target.files[0],id_campaign:this.campaignId,id_company:this.isAdmin?"":this.idEmpresaUsuario,id_user:this.usuarioService.usuario.id}).subscribe({next:(d=(0,ze.Z)(function*(f){if(f instanceof jh.Zn){const p=f.body;n.productsInCampaign=[],n.selectedArr.clear(),n.discountArr.clear(),n.companiesInCampaign=[],n.loadProducts(),n.resetFileInput(),n.loadingExcel=!1,n.toastService.show(p.data,{classname:"bg-success text-center  text-light",delay:3e3})}}),function(p){return d.apply(this,arguments)}),error:d=>{console.error("error al tratar de subir el excel",d),this.resetFileInput(),this.loadingExcel=!1}}))}loadProducts(){var e=this;return(0,ze.Z)(function*(){try{const n=yield(0,Je.z)(e.productService.getCategoria(e.campaignId));e.campaignFormGroup.reset({campaignName:n.data?.vch_nombre,initDate:"",endDate:"",description:""}),e.campaignName=n.data?.vch_nombre,e.campaignFechaIni=n.data?.dt_fechainicam.toString().slice(0,10),e.campaignFechaFin=n.data?.dt_fechafincam.toString().slice(0,10),e.campaingnDesc=n.data?.vch_descripcion||"-",e.campaignStatus(e.campaignFechaIni,e.campaignFechaFin)}catch(n){console.log(n)}e.productService.getProductoXCategoria(e.campaignId).subscribe({next:n=>{e.productsInCampaign=n.data,e.productsInCampaign.forEach((s,a)=>{e.selectedArr.push(new H.NI(!1,H.kI.required)),e.discountArr.push(new H.NI(s.tbl_productoxcategoria[0].int_porcdescuento||0)),e.companiesInCampaign.push(s.id_empresa),e.isMultiSellerCampaign()}),e.loading=!1},error:n=>{e.loading=!1,console.log(n)}})})()}modalProducts(e){this.productService.addCategoriaxProducto({id_categoria:this.campaignId,id_producto:e.id,estado:!0,id_user:this.usuarioService.usuario.id,camp:!0}).subscribe({next:s=>{e.tbl_productoxcategoria=[{int_porcdescuento:0}],this.productsInCampaign.push(e),this.selectedArr.push(new H.NI(!1,H.kI.required)),this.discountArr.push(new H.NI(e.int_porcdescuento||0)),this.companiesInCampaign.push(e.id_empresa),this.isMultiSellerCampaign()},error:s=>{this.toastService.show("Ya esta agregado ese producto",{classname:"bg-danger text-center  text-light",delay:3e3}),console.log(s)}})}deleteProducts(){this.removeButtonLoader=!0;const e=[],n=[];this.productsFormGroup.get("selected").value.forEach((a,d)=>{1==a&&(e.push(this.productsInCampaign[d].id),n.push(d))}),n.sort((a,d)=>d-a),this.productService.deleteMultipleCategoriaxProducto({id_categoria:this.campaignId,id_productoArray:e,id_user:this.usuarioService.usuario.id,camp:!0}).subscribe({next:a=>{n.forEach(d=>{this.selectedArr.removeAt(d),this.discountArr.removeAt(d),this.productsInCampaign.splice(d,1),this.companiesInCampaign.splice(d,1),this.isMultiSellerCampaign()}),this.removeButtonLoader=!1,this.toastService.show("Removidos con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:a=>{this.toastService.show("Error al remover productos",{classname:"bg-danger text-center  text-light",delay:3e3}),this.removeButtonLoader=!1,console.log(a)}})}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(n=>{},n=>{})}loadDiscount(){this.rangeDiscount=this.discountFormGroup.get("percentDiscount")?.value}applyDiscounts(){this.discountButtonLoader=!0,this.disableDiscountIndividualButton=!0;const e=this.rangeDiscount,n=[],s=[];this.productsFormGroup.get("selected").value.forEach((d,f)=>{1==d&&(n.push(this.productsInCampaign[f].id),s.push(f))}),s.sort((d,f)=>f-d),this.productService.updateMultipleProducts({int_porcdescuento:e,id_productoArray:n,id_categoria:this.campaignId,id_user:this.usuarioService.usuario.id}).subscribe({next:d=>{s.forEach(f=>{this.productsInCampaign[f].tbl_productoxcategoria[0].int_porcdescuento=e,this.discountArr.at(f).setValue(e),"Activa"==this.campaignStatusValue&&(this.productsInCampaign[f].int_porcdescuento=e),this.toastService.show("Descuentos aplicados con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})}),this.reloadPipeDescount=!this.reloadPipeDescount,this.discountButtonLoader=!1},error:d=>{this.discountButtonLoader=!1,this.toastService.show("Error al aplicar descuentos",{classname:"bg-danger text-center  text-light",delay:3e3}),console.log(d)}})}onDiscountChange(e,n=1){const s=parseInt(n.target.value);this.discountArr.at(e).setValue(s),this.disableDiscountIndividualButton=!1}applyInputsDiscount(){this.discountIndividualButtonLoader=!0,this.disableDiscountButton=!0;const e=this.discountArr.value,n=[],s=[];for(let d=0;d<this.productsInCampaign.length;d++){const f=this.productsInCampaign[d],p=e[d];p!==f.tbl_productoxcategoria[0]?.int_porcdescuento&&(n.push({id:f.id,discount:p}),s.push(d))}if(0===n.length)return this.discountIndividualButtonLoader=!1,void(this.disableDiscountButton=!1);this.productService.updateMultipleProductsDiscounts({id_campaign:this.campaignId,products:n,id_user:this.usuarioService.usuario.id}).subscribe({next:d=>{s.forEach(f=>{this.productsInCampaign[f].tbl_productoxcategoria[0].int_porcdescuento=e[f],this.discountArr.at(f).setValue(e[f]),"Activa"==this.campaignStatusValue&&(this.productsInCampaign[f].int_porcdescuento=e[f])}),this.toastService.show("Descuentos aplicados con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3}),this.reloadPipeDescount=!this.reloadPipeDescount,this.discountIndividualButtonLoader=!1,this.disableDiscountButton=!1},error:d=>{this.discountIndividualButtonLoader=!1,this.disableDiscountButton=!1,this.toastService.show("Error al aplicar descuentos",{classname:"bg-danger text-center  text-light",delay:3e3}),console.log(d)}})}selectAllButton(){this.selectedAll=!this.selectedAll;const e=this.selectedArr.value.length;for(let n=0;n<e;n++)this.selectedArr.at(n).patchValue(this.selectedAll)}campaignStatus(e,n){const s="string"==typeof e?new Date(e):e,a="string"==typeof n?new Date(n):n,d=s.getTime(),f=a.getTime(),p=Date.now();return p<d?(this.campaignStatusValue="En espera",this.campaignStatusColor="badge-light-warning","En espera"):p>=d&&p<=f?(this.campaignStatusValue="Activa",this.campaignStatusColor="badge-light-success","Activa"):(this.campaignStatusValue="Expirada",this.campaignStatusColor="badge-light-danger","Expirada")}initDateValidator(){return e=>{const n=e.value,s=new Date(n.year,n.month-1,n.day),a=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate());return s.getTime()<a.getTime()?{isValid:!1}:(this.endDateError=!1,null)}}endDateValidator(){return e=>{const n=e.get("initDate").value,s=e.get("endDate").value,a=new Date(n.year,n.month-1,n.day).getTime();return new Date(s.year,s.month-1,s.day).getTime()<a?(this.endDateError=!0,{isEndDateValid:!1}):(this.endDateError=!1,null)}}campoEsValido(e){return this.campaignFormGroup.controls[e].errors&&this.campaignFormGroup.controls[e].touched&&this.campaignFormGroup}get canAddProducts(){return this.usuarioService.hasPermission(Ss.Q.ADD_PRODCAMPANIA)}resetFileInput(){const e=document.getElementById("fileInput");e&&(e.value="")}getCampaignReport(){this.productService.getInfoCampaignReport(this.campaignName,this.campaignId).subscribe({next:e=>{this.infoReportCampaigns=e.data},error:e=>{console.log(e)}})}calcularMonto(e,n,s){return s?(e*n/1.19/Number("1."+s)).toFixed(2):(e*n/1.19).toFixed(2)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ft.i),t.Y36(ue.M),t.Y36(H.qu),t.Y36(P.F0),t.Y36(Tt.FF),t.Y36(P.gz),t.Y36(lt.k),t.Y36(Tt.M4))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-detail-campaign"]],viewQuery:function(e,n){if(1&e&&t.Gf(RV,5),2&e){let s;t.iGM(s=t.CRH())&&(n.errorToast=s.first)}},features:[t.TTD],decls:21,vars:6,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"mb-4",3,"routerLink"],[1,"card","card-flush"],["class","text-center mb-6 mt-4",4,"ngIf"],["class","card-header align-items-center py-5 gap-2 gap-md-5",4,"ngIf"],["class","card-body pt-0",4,"ngIf"],["class","content d-flex flex-column flex-column-fluid","id","kt_content",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["modalUp",""],["deleteCampaign",""],[1,"text-center","mb-6","mt-4"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],["class","card-title col-10",4,"ngIf"],["class","card-title d-flex flex-column col-12",4,"ngIf"],[1,"card-title","col-10"],[1,"card-title","d-flex","flex-column","col-12"],[1,"row","col-12","mb-4"],[1,"col-9"],[1,"d-flex","gap-3","col-3","justify-contend-end","flex-row-reverse"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],["table","campaign-report","buttonName","Generar reporte",3,"name",4,"ngIf"],[1,"row","mb-4","w-100"],[1,"col-12"],[1,"row","mb-4"],[1,"rounded","p-1",3,"className"],[1,"row"],[1,"col"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],["table","campaign-report","buttonName","Generar reporte",3,"name"],[1,"card-body","pt-0"],[3,"formGroup","ngSubmit"],[1,"row","mt-5"],[1,"col-6"],[1,"form-label"],["type","text","placeholder","Nombre de Campa\xf1a","formControlName","campaignName",1,"form-control"],[1,"col-3",3,"ngClass"],["for","initDate",1,"form-label"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","initDate","formControlName","initDate","ngbDatepicker","",1,"form-control"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],[1,"col-3"],["for","endDate",1,"form-label"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control"],["dFin","ngbDatepicker"],[1,"row","mt-2"],["name","txtDescripcion","id","","rows","2","formControlName","description",1,"form-control"],[4,"ngIf"],[1,"row","mb-2","mt-0","col-5","text-center"],["class","form-text p-1 badge-light-danger",4,"ngIf"],[1,"col-4"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"form-text","p-1","badge-light-danger"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"card-title"],["class","badge-light-success p-2 rounded",4,"ngIf"],[1,"card-header","border-0","pt-5","flex-column"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-4","mb-1"],[1,"d-flex","justify-content-between","flex-wrap","mt-3","mb-3"],[2,"width","60%"],[3,"idEmpresa","allCompanies","productsInCampaign","productSelect"],[1,"d-flex","justify-content-end","gap-4"],[1,"d-flex"],["href","https://aibo-desa-bucket.s3.amazonaws.com/skus.xlsx","download","skus.xlsx",1,"btn","btn-secondary","btn-sm","buttonSize"],[1,"d-flex",3,"formGroup"],[1,"btn","btn-success","btn-sm","buttonSize",3,"click"],["id","fileInput","type","file","name","excelCampaign","accept",".xlsx",1,"form-control","mb-2",2,"display","none",3,"change"],["excel",""],[1,"d-flex","justify-content-end"],["class","btn btn-sm btn-light-danger me-2 buttonSize","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-light-danger me-2 buttonSize",3,"disabled","click",4,"ngIf"],[1,"card-body","py-3"],[1,"table-responsive"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf"],["class","table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3",3,"formGroup",4,"ngIf"],[1,"col","d-flex","justify-content-center"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["role","alert",1,"alert","alert-dismissible","alert-info","mt-5"],[1,"badge","rounded-pill","bg-warning"],["class","d-flex flex-column text-center mb-3 mt-4",4,"ngIf"],[1,"card-body","pt-20","table-responsive"],["class","table align-middle table-row-dashed fs-6 gy-5","id","campaign-report","hidden","true",4,"ngIf"],[1,"badge-light-success","p-2","rounded"],[1,"spinner-border","spinner-border-sm"],["type","button","disabled","",1,"btn","btn-sm","btn-light-danger","me-2","buttonSize"],[1,"btn","btn-sm","btn-light-danger","me-2","buttonSize",3,"disabled","click"],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3",3,"formGroup"],[1,"fw-bolder","text-muted"],[1,"w-25px"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox","value","selectedAll","data-kt-check","true","data-kt-check-target",".widget-13-check",1,"form-check-input",3,"click"],[1,"min-w-150px"],["class","min-w-100px",4,"ngIf"],[1,"min-w-100px"],[1,"min-w-120px"],["formArrayName","selected"],[4,"ngFor","ngForOf"],["type","checkbox",1,"form-check-input","widget-13-check",3,"formControlName"],[1,"position-relative"],["type","number","min","0","max","100",1,"form-control","min-w-75px","w-50",3,"value","change"],[1,"btn","btn-primary",3,"disabled","click"],[1,"d-flex","flex-column","text-center","mb-3","mt-4"],[1,"d-flex","align-items-start","justify-content-center","mb-7"],["id","kt_ecommerce_add_product_discount_label",1,"fw-bolder","fs-3x"],[1,"fw-bolder","fs-4","mt-1","ms-2"],["id","kt_ecommerce_add_product_discount_slider",1,"noUi-sm"],["formControlName","percentDiscount","type","range","min","0","max","100",1,"form-range",3,"input"],[1,"row","mt-3"],["class","btn btn-primary","type","submit",3,"disabled",4,"ngIf"],["id","campaign-report","hidden","true",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"fw-bold","text-gray-600"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"],[3,"modal3","idEmpresa","skuNow","allCompanies","productSelect"],[1,"card-header","align-items-center","justify-content-center","gap-2","gap-md-5"],[1,"card-title","col-12","mb-5","justify-content-center"],[1,"card-body","pt-8"],[1,"row","justify-content-between"],["class","btn btn-sm btn-danger col-12 disabled","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-danger col-5",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary col-5",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-sm","btn-danger","col-12","disabled"],[1,"btn","btn-sm","btn-danger","col-5",3,"click"],[1,"btn","btn-sm","btn-primary","col-5",3,"click"],["src","/assets/dangerTpl.svg","alt",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2")(4,"a",3),t._uU(5,"Volver"),t.qZA()(),t.TgZ(6,"div",4),t.YNc(7,NV,2,0,"div",5),t.YNc(8,UV,3,2,"div",6),t.YNc(9,qV,40,10,"div",7),t.qZA()()()(),t.YNc(10,hJ,63,17,"div",8),t._UZ(11,"app-toast",9),t.YNc(12,fJ,3,0,"ng-template",null,10,t.W1O),t.YNc(14,pJ,1,4,"ng-template",null,11,t.W1O),t.YNc(16,vJ,14,3,"ng-template",null,12,t.W1O),t._UZ(18,"app-toast",9),t.YNc(19,bJ,2,0,"ng-template",null,10,t.W1O)),2&e&&(t.xp6(4),t.Q6J("routerLink",t.DdM(5,xJ)),t.xp6(3),t.Q6J("ngIf",n.loading&&n.campaignId),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf",!n.campaignId||n.campaignEdit),t.xp6(1),t.Q6J("ngIf",n.campaignId&&!n.loading))},dependencies:[X.mk,X.sg,X.O5,P.yS,H._Y,H.Fj,H.eT,H.Wl,H.JJ,H.JL,H.sg,H.u,H.CE,Lt.q,An.$,Tt.J4,FI.u,IV,X.uU,zT.p,MV],styles:[".tooltipCS[_ngcontent-%COMP%]   .tooltip-inner[_ngcontent-%COMP%]{background-color:#006400;font-size:125%}.tooltipCS.bs-tooltip-end[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]:before{border-right-color:#006400}.tooltipCS.bs-tooltip-start[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]:before{border-left-color:#006400}.tooltipCS.bs-tooltip-top[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]:before{border-top-color:#006400}.tooltipCS.bs-tooltip-bottom[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]:before{border-bottom-color:#006400}.buttonSize[_ngcontent-%COMP%]{padding:1rem!important;height:-moz-fit-content;height:fit-content}"]}),i})();const CJ=[{path:"",component:cV,children:[{path:"list",component:ha},{path:"campaign",component:kV},{path:"campaign/detail",component:LI},{path:"campaign/detail/:id",component:LI},{path:"unique/:id",component:lV},{path:"list/comodato/:id_tipo",component:ha},{path:"list/curso/:id_tipo",component:ha},{path:"list/servicio/:id_tipo",component:ha},{path:"list/equipamiento/:id_tipo",component:ha},{path:"list/repuestos/:id_tipo",component:ha},{path:"list/insumos/:id_tipo",component:ha},{path:"",redirectTo:"list",pathMatch:"full"},{path:"**",redirectTo:"list",pathMatch:"full"}]}];let SJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[P.Bz.forChild(CJ),P.Bz]}),i})();var PI=Oe(5889),EJ=Oe(3126),wJ=Oe(2724),kJ=Oe(3189);let TJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[X.ez,SJ,PI.HB,GT.vi,PI.QX,Tt.mH,H.UX,Tt.ZQ,EJ.E,Tt._A,wJ.d,iZ,KA,__,kJ.h,Tt.IJ,Tt.dT,Tt.HK]}),i})()},4916:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{M:()=>P});var oe=Oe(529),ht=Oe(2340),X=Oe(4650);let P=(()=>{class ze{constructor(t){this.http=t,this.apiURL=ht.N.apiUrl}getProduct(t){return console.log(`${this.apiURL}productos/${t}`),this.http.get(`${this.apiURL}productos/${t}`)}editProduct(t,ue){return this.http.put(`${this.apiURL}productos/${t}`,ue)}getProductsxEmpresa(t){return this.http.post(`${this.apiURL}productos/search`,t)}getProductxTipo(t){return console.log(`${this.apiURL}productos/tipo/${t.id_tipo}`),this.http.post(`${this.apiURL}productos/tipo/${t.id_tipo}`,t)}getCategoriaXEmpresa(t,ue,ft=!1){return this.http.get(`${this.apiURL}categoria/empresa/${t}/${ue}${ft?"?isAdmin=true":""}`)}addCategoriaxProducto(t){return this.http.post(`${this.apiURL}productoxcategoria`,t)}deleteCategoriaxProducto(t){return this.http.delete(`${this.apiURL}productoxcategoria/${t.id_producto}/${t.id_categoria}${t.id_user?`/${t.id_user}`:""}`)}addTipoNegxProducto(t){return this.http.post(`${this.apiURL}productoxtiponeg`,t)}deleteTipoNegxProducto(t){return this.http.delete(`${this.apiURL}productoxtiponeg/${t.id_producto}/${t.id_tiponegocio}${t.id_user?`/${t.id_user}`:""}`)}getTiposNegocios(){return this.http.get(`${this.apiURL}tiponegocio`)}getTiposProducto(){return this.http.get(`${this.apiURL}tipo`)}getEstadoProducto(){return this.http.get(`${this.apiURL}estado`)}deletePropXProd(t){return this.http.delete(`${this.apiURL}propiedad/${t}`)}addPropiedad(t){return this.http.post(`${this.apiURL}propiedad`,t)}addProducto(t){return this.http.post(`${this.apiURL}productos`,t)}addFile(t){let ue=new FormData;ue.append("id_producto",t.id_producto),ue.append("int_tipo",t.int_tipo.toString()),ue.append("doc",t.doc);const lt=new oe.aW("POST",`${this.apiURL}documento`,ue,{reportProgress:!0,responseType:"json"});return this.http.request(lt)}deleteFile(t){return this.http.delete(`${this.apiURL}documento/${t}`)}upFile(t,ue){return this.http.put(`${this.apiURL}documento/${t}`,ue)}upFotoPortada(t){return this.http.post(`${this.apiURL}documento/fotoportada`,t)}getProductSearch(t){return this.http.post(`${this.apiURL}productos/empresa`,t)}addPack(t){return this.http.post(`${this.apiURL}pack`,t)}deletePack(t){return this.http.post(`${this.apiURL}pack/delete`,t)}getPacks(t,ue){return this.http.get(`${this.apiURL}pack/${t}/${ue}`)}updatePack(t){return this.http.put(`${this.apiURL}pack`,t)}getTecnicos(t){return this.http.post(`${this.apiURL}tecnico/list`,t)}addlink(t){return this.http.post(`${this.apiURL}documento/link`,t)}deleteDocumentoAny(t){return this.http.delete(`${this.apiURL}documento/any/${t}`)}addTecnico(t){return this.http.post(`${this.apiURL}tecnico`,t)}deleteTecnico(t){return this.http.post(`${this.apiURL}tecnico/delete`,t)}getMarcas(){return this.http.get(`${this.apiURL}marca`)}getEmpresas(){return this.http.get(`${this.apiURL}empresa`)}getCompany(t){return this.http.get(`${this.apiURL}empresa/${t}`)}deleteCheckXProd(t){return this.http.delete(`${this.apiURL}checklist/${t}`)}addChecklist(t){return this.http.post(`${this.apiURL}checklist`,t)}syncProducto(t){return this.http.post(`${this.apiURL}sync`,{idProducto:t})}getBodegas(t,ue){return this.http.get(`${this.apiURL}bodega/empresa/${t}`)}getBodega(t){return this.http.get(`${this.apiURL}productoxbodega/${t}`)}addBodega(t){return this.http.post(`${this.apiURL}productoxbodega`,t)}deleteBodega(t){return this.http.delete(`${this.apiURL}productoxbodega/${t.id_producto}/${t.id_bodega}`)}actualizarStock(t){const ue=`${this.apiURL}productoxbodega/${t.id_producto}/${t.id_bodega}`;return console.log(ue),this.http.put(ue,t)}getCategorias(){return this.http.get(`${this.apiURL}categoria`)}getCategoria(t){return this.http.get(`${this.apiURL}categoria/${t}`)}postCategoria(t){return this.http.post(`${this.apiURL}categoria`,t)}putCategoria(t,ue){return this.http.put(`${this.apiURL}categoria/${t}`,ue)}deleteCategoria(t){return this.http.delete(`${this.apiURL}categoria/${t}`)}getProductoXCategoria(t){return this.http.get(`${this.apiURL}productos/categoria/${t}`)}deleteMultipleCategoriaxProducto(t){return this.http.post(`${this.apiURL}productoxcategoria/multipledelete`,t)}updateMultipleProducts(t){return this.http.post(`${this.apiURL}productos/multipleupdate`,t)}updateMultipleProductsDiscounts(t){return this.http.post(`${this.apiURL}productos/multipleupdatediscount`,t)}postExcelCampaign(t){let ue=new FormData;ue.append("excel",t.excel),ue.append("id_campaign",t.id_campaign),ue.append("id_company",t.id_company),ue.append("id_user",t.id_user);const lt=new oe.aW("POST",`${this.apiURL}productos/campaings/excel`,ue,{reportProgress:!0,responseType:"json"});return this.http.request(lt)}getServicio(){return this.http.get(`${this.apiURL}tipo/`)}postBitacora(t){return this.http.post(`${this.apiURL}bitacoraProd`,t)}getBitacora(t){return this.http.get(`${this.apiURL}bitacoraProd/${t}`)}postUpdateMultipleProducts(t){return this.http.post(`${this.apiURL}productos/multipleupdateproducts`,t)}postUpdateMultipleProductsXcategory(t){return this.http.post(`${this.apiURL}productoxcategoria/multipleproductsxcategory`,t)}getAllProductContentCategories(){return this.http.get(`${this.apiURL}contentcategory`)}getAllProductContents(t){return this.http.get(`${this.apiURL}content/product/${t}`)}getAllTemplates(){return this.http.get(`${this.apiURL}template`)}postSingleProductContent(t){return this.http.post(`${this.apiURL}content`,t)}postSingleProductContentCategory(t){return this.http.post(`${this.apiURL}contentcategory`,t)}postSingleProductContentPerDocument(t){return this.http.post(`${this.apiURL}contentxdocument`,t)}deleteSingleProductContent(t){return this.http.delete(`${this.apiURL}content/${t}`)}postDuplicateProduct(t){return this.http.post(`${this.apiURL}productos/duplicado`,{id_product:t})}getAllTagsBySeller(t){return this.http.get(`${this.apiURL}tag/byseller/${t}`)}getAllTagsByProduct(t){return this.http.get(`${this.apiURL}tag/byproduct/${t}`)}getCampaingsAndDiscounts(t){return this.http.get(`${this.apiURL}productos/campaings/${t}`)}postCampaingsAndDiscounts(t){return this.http.post(`${this.apiURL}productos/campaings`,t)}getInfoCampaignReport(t,ue){return this.http.get(`${this.apiURL}categoria/campaignreport/${t}/${ue}`)}}return ze.\u0275fac=function(t){return new(t||ze)(X.LFG(oe.eN))},ze.\u0275prov=X.Yz7({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze})()},3189:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{Z:()=>ht,h:()=>X});var oe=Oe(4650);let ht=(()=>{class P{transform(Je,t){return t&&Je?P.filter(Je,t):Je}static filter(Je,t){const ue=t.toLowerCase();function ft(lt,Tt){for(let H in lt)if(null!==lt[H]&&null!=lt[H]&&("object"==typeof lt[H]&&ft(lt[H],Tt)||lt[H].toString().toLowerCase().includes(ue)))return!0;return!1}return Je.filter(function(lt){return ft(lt,t)})}}return P.\u0275fac=function(Je){return new(Je||P)},P.\u0275pipe=oe.Yjl({name:"filter",type:P,pure:!1}),P.\u0275prov=oe.Yz7({token:P,factory:P.\u0275fac}),P})(),X=(()=>{class P{}return P.\u0275fac=function(Je){return new(Je||P)},P.\u0275mod=oe.oAB({type:P}),P.\u0275inj=oe.cJS({}),P})()},3601:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{e:()=>t});var oe=Oe(4986),ht=Oe(4482),X=Oe(8421),P=Oe(5403),Je=Oe(5963);function t(ue,ft=oe.z){return function ze(ue){return(0,ht.e)((ft,lt)=>{let Tt=!1,H=null,Lt=null,An=!1;const Ui=()=>{if(Lt?.unsubscribe(),Lt=null,Tt){Tt=!1;const ca=H;H=null,lt.next(ca)}An&&lt.complete()},Bt=()=>{Lt=null,An&&lt.complete()};ft.subscribe((0,P.x)(lt,ca=>{Tt=!0,H=ca,Lt||(0,X.Xf)(ue(ca)).subscribe(Lt=(0,P.x)(lt,Ui,Bt))},()=>{An=!0,(!Tt||!Lt||Lt.closed)&&lt.complete()}))})}(()=>(0,Je.H)(ue,ft))}},4767:function(Ir,Dn,Oe){var oe;(function(){function ht(w){"use strict";var M={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xab\xab\xab` and `\xbb\xbb\xbb` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===w)return JSON.parse(JSON.stringify(M));var O={};for(var q in M)M.hasOwnProperty(q)&&(O[q]=M[q].defaultValue);return O}var P={},ze={},Je={},t=ht(!0),ue="vanilla",ft={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:ht(!0),allOn:function X(){"use strict";var w=ht(!0),M={};for(var O in w)w.hasOwnProperty(O)&&(M[O]=!0);return M}()};function lt(w,M){"use strict";var O=M?"Error in "+M+" extension->":"Error in unnamed extension",q={valid:!0,error:""};P.helper.isArray(w)||(w=[w]);for(var re=0;re<w.length;++re){var ae=O+" sub-extension "+re+": ",ee=w[re];if("object"!=typeof ee)return q.valid=!1,q.error=ae+"must be an object, but "+typeof ee+" given",q;if(!P.helper.isString(ee.type))return q.valid=!1,q.error=ae+'property "type" must be a string, but '+typeof ee.type+" given",q;var me=ee.type=ee.type.toLowerCase();if("language"===me&&(me=ee.type="lang"),"html"===me&&(me=ee.type="output"),"lang"!==me&&"output"!==me&&"listener"!==me)return q.valid=!1,q.error=ae+"type "+me+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',q;if("listener"===me){if(P.helper.isUndefined(ee.listeners))return q.valid=!1,q.error=ae+'. Extensions of type "listener" must have a property called "listeners"',q}else if(P.helper.isUndefined(ee.filter)&&P.helper.isUndefined(ee.regex))return q.valid=!1,q.error=ae+me+' extensions must define either a "regex" property or a "filter" method',q;if(ee.listeners){if("object"!=typeof ee.listeners)return q.valid=!1,q.error=ae+'"listeners" property must be an object but '+typeof ee.listeners+" given",q;for(var Ye in ee.listeners)if(ee.listeners.hasOwnProperty(Ye)&&"function"!=typeof ee.listeners[Ye])return q.valid=!1,q.error=ae+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+Ye+" must be a function but "+typeof ee.listeners[Ye]+" given",q}if(ee.filter){if("function"!=typeof ee.filter)return q.valid=!1,q.error=ae+'"filter" must be a function, but '+typeof ee.filter+" given",q}else if(ee.regex){if(P.helper.isString(ee.regex)&&(ee.regex=new RegExp(ee.regex,"g")),!(ee.regex instanceof RegExp))return q.valid=!1,q.error=ae+'"regex" property must either be a string or a RegExp object, but '+typeof ee.regex+" given",q;if(P.helper.isUndefined(ee.replace))return q.valid=!1,q.error=ae+'"regex" extensions must implement a replace string or function',q}}return q}function Tt(w,M){"use strict";return"\xa8E"+M.charCodeAt(0)+"E"}P.helper={},P.extensions={},P.setOption=function(w,M){"use strict";return t[w]=M,this},P.getOption=function(w){"use strict";return t[w]},P.getOptions=function(){"use strict";return t},P.resetOptions=function(){"use strict";t=ht(!0)},P.setFlavor=function(w){"use strict";if(!ft.hasOwnProperty(w))throw Error(w+" flavor was not found");P.resetOptions();var M=ft[w];for(var O in ue=w,M)M.hasOwnProperty(O)&&(t[O]=M[O])},P.getFlavor=function(){"use strict";return ue},P.getFlavorOptions=function(w){"use strict";if(ft.hasOwnProperty(w))return ft[w]},P.getDefaultOptions=function(w){"use strict";return ht(w)},P.subParser=function(w,M){"use strict";if(P.helper.isString(w)){if(!(typeof M<"u")){if(ze.hasOwnProperty(w))return ze[w];throw Error("SubParser named "+w+" not registered!")}ze[w]=M}},P.extension=function(w,M){"use strict";if(!P.helper.isString(w))throw Error("Extension 'name' must be a string");if(w=P.helper.stdExtName(w),P.helper.isUndefined(M)){if(!Je.hasOwnProperty(w))throw Error("Extension named "+w+" is not registered!");return Je[w]}"function"==typeof M&&(M=M()),P.helper.isArray(M)||(M=[M]);var O=lt(M,w);if(!O.valid)throw Error(O.error);Je[w]=M},P.getAllExtensions=function(){"use strict";return Je},P.removeExtension=function(w){"use strict";delete Je[w]},P.resetExtensions=function(){"use strict";Je={}},P.validateExtension=function(w){"use strict";var M=lt(w,null);return!!M.valid||(console.warn(M.error),!1)},P.hasOwnProperty("helper")||(P.helper={}),P.helper.isString=function(w){"use strict";return"string"==typeof w||w instanceof String},P.helper.isFunction=function(w){"use strict";return w&&"[object Function]"==={}.toString.call(w)},P.helper.isArray=function(w){"use strict";return Array.isArray(w)},P.helper.isUndefined=function(w){"use strict";return typeof w>"u"},P.helper.forEach=function(w,M){"use strict";if(P.helper.isUndefined(w))throw new Error("obj param is required");if(P.helper.isUndefined(M))throw new Error("callback param is required");if(!P.helper.isFunction(M))throw new Error("callback param must be a function/closure");if("function"==typeof w.forEach)w.forEach(M);else if(P.helper.isArray(w))for(var O=0;O<w.length;O++)M(w[O],O,w);else{if("object"!=typeof w)throw new Error("obj does not seem to be an array or an iterable object");for(var q in w)w.hasOwnProperty(q)&&M(w[q],q,w)}},P.helper.stdExtName=function(w){"use strict";return w.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},P.helper.escapeCharactersCallback=Tt,P.helper.escapeCharacters=function(w,M,O){"use strict";var q="(["+M.replace(/([\[\]\\])/g,"\\$1")+"])";O&&(q="\\\\"+q);var re=new RegExp(q,"g");return w.replace(re,Tt)},P.helper.unescapeHTMLEntities=function(w){"use strict";return w.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var H=function(w,M,O,q){"use strict";var He,Be,Ne,te,Ie,re=q||"",ae=re.indexOf("g")>-1,ee=new RegExp(M+"|"+O,"g"+re.replace(/g/g,"")),me=new RegExp(M,re.replace(/g/g,"")),Ye=[];do{for(He=0;Ne=ee.exec(w);)if(me.test(Ne[0]))He++||(te=(Be=ee.lastIndex)-Ne[0].length);else if(He&&!--He&&(Ye.push({left:{start:te,end:Be},match:{start:Be,end:Ne.index},right:{start:Ne.index,end:Ie=Ne.index+Ne[0].length},wholeMatch:{start:te,end:Ie}}),!ae))return Ye}while(He&&(ee.lastIndex=Be));return Ye};P.helper.matchRecursiveRegExp=function(w,M,O,q){"use strict";for(var re=H(w,M,O,q),ae=[],ee=0;ee<re.length;++ee)ae.push([w.slice(re[ee].wholeMatch.start,re[ee].wholeMatch.end),w.slice(re[ee].match.start,re[ee].match.end),w.slice(re[ee].left.start,re[ee].left.end),w.slice(re[ee].right.start,re[ee].right.end)]);return ae},P.helper.replaceRecursiveRegExp=function(w,M,O,q,re){"use strict";if(!P.helper.isFunction(M)){var ae=M;M=function(){return ae}}var ee=H(w,O,q,re),me=w,Ye=ee.length;if(Ye>0){var He=[];0!==ee[0].wholeMatch.start&&He.push(w.slice(0,ee[0].wholeMatch.start));for(var Be=0;Be<Ye;++Be)He.push(M(w.slice(ee[Be].wholeMatch.start,ee[Be].wholeMatch.end),w.slice(ee[Be].match.start,ee[Be].match.end),w.slice(ee[Be].left.start,ee[Be].left.end),w.slice(ee[Be].right.start,ee[Be].right.end))),Be<Ye-1&&He.push(w.slice(ee[Be].wholeMatch.end,ee[Be+1].wholeMatch.start));ee[Ye-1].wholeMatch.end<w.length&&He.push(w.slice(ee[Ye-1].wholeMatch.end)),me=He.join("")}return me},P.helper.regexIndexOf=function(w,M,O){"use strict";if(!P.helper.isString(w))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(M instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var q=w.substring(O||0).search(M);return q>=0?q+(O||0):q},P.helper.splitAtIndex=function(w,M){"use strict";if(!P.helper.isString(w))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[w.substring(0,M),w.substring(M)]},P.helper.encodeEmailAddress=function(w){"use strict";var M=[function(O){return"&#"+O.charCodeAt(0)+";"},function(O){return"&#x"+O.charCodeAt(0).toString(16)+";"},function(O){return O}];return w.replace(/./g,function(O){if("@"===O)O=M[Math.floor(2*Math.random())](O);else{var q=Math.random();O=q>.9?M[2](O):q>.45?M[1](O):M[0](O)}return O})},P.helper.padEnd=function(M,O,q){"use strict";return O>>=0,q=String(q||" "),M.length>O?String(M):((O-=M.length)>q.length&&(q+=q.repeat(O/q.length)),String(M)+q.slice(0,O))},typeof console>"u"&&(console={warn:function(w){"use strict";alert(w)},log:function(w){"use strict";alert(w)},error:function(w){"use strict";throw w}}),P.helper.regexes={asteriskDashAndColon:/([*_:~])/g},P.helper.emojis={"+1":"\u{1f44d}","-1":"\u{1f44e}",100:"\u{1f4af}",1234:"\u{1f522}","1st_place_medal":"\u{1f947}","2nd_place_medal":"\u{1f948}","3rd_place_medal":"\u{1f949}","8ball":"\u{1f3b1}",a:"\u{1f170}\ufe0f",ab:"\u{1f18e}",abc:"\u{1f524}",abcd:"\u{1f521}",accept:"\u{1f251}",aerial_tramway:"\u{1f6a1}",airplane:"\u2708\ufe0f",alarm_clock:"\u23f0",alembic:"\u2697\ufe0f",alien:"\u{1f47d}",ambulance:"\u{1f691}",amphora:"\u{1f3fa}",anchor:"\u2693\ufe0f",angel:"\u{1f47c}",anger:"\u{1f4a2}",angry:"\u{1f620}",anguished:"\u{1f627}",ant:"\u{1f41c}",apple:"\u{1f34e}",aquarius:"\u2652\ufe0f",aries:"\u2648\ufe0f",arrow_backward:"\u25c0\ufe0f",arrow_double_down:"\u23ec",arrow_double_up:"\u23eb",arrow_down:"\u2b07\ufe0f",arrow_down_small:"\u{1f53d}",arrow_forward:"\u25b6\ufe0f",arrow_heading_down:"\u2935\ufe0f",arrow_heading_up:"\u2934\ufe0f",arrow_left:"\u2b05\ufe0f",arrow_lower_left:"\u2199\ufe0f",arrow_lower_right:"\u2198\ufe0f",arrow_right:"\u27a1\ufe0f",arrow_right_hook:"\u21aa\ufe0f",arrow_up:"\u2b06\ufe0f",arrow_up_down:"\u2195\ufe0f",arrow_up_small:"\u{1f53c}",arrow_upper_left:"\u2196\ufe0f",arrow_upper_right:"\u2197\ufe0f",arrows_clockwise:"\u{1f503}",arrows_counterclockwise:"\u{1f504}",art:"\u{1f3a8}",articulated_lorry:"\u{1f69b}",artificial_satellite:"\u{1f6f0}",astonished:"\u{1f632}",athletic_shoe:"\u{1f45f}",atm:"\u{1f3e7}",atom_symbol:"\u269b\ufe0f",avocado:"\u{1f951}",b:"\u{1f171}\ufe0f",baby:"\u{1f476}",baby_bottle:"\u{1f37c}",baby_chick:"\u{1f424}",baby_symbol:"\u{1f6bc}",back:"\u{1f519}",bacon:"\u{1f953}",badminton:"\u{1f3f8}",baggage_claim:"\u{1f6c4}",baguette_bread:"\u{1f956}",balance_scale:"\u2696\ufe0f",balloon:"\u{1f388}",ballot_box:"\u{1f5f3}",ballot_box_with_check:"\u2611\ufe0f",bamboo:"\u{1f38d}",banana:"\u{1f34c}",bangbang:"\u203c\ufe0f",bank:"\u{1f3e6}",bar_chart:"\u{1f4ca}",barber:"\u{1f488}",baseball:"\u26be\ufe0f",basketball:"\u{1f3c0}",basketball_man:"\u26f9\ufe0f",basketball_woman:"\u26f9\ufe0f&zwj;\u2640\ufe0f",bat:"\u{1f987}",bath:"\u{1f6c0}",bathtub:"\u{1f6c1}",battery:"\u{1f50b}",beach_umbrella:"\u{1f3d6}",bear:"\u{1f43b}",bed:"\u{1f6cf}",bee:"\u{1f41d}",beer:"\u{1f37a}",beers:"\u{1f37b}",beetle:"\u{1f41e}",beginner:"\u{1f530}",bell:"\u{1f514}",bellhop_bell:"\u{1f6ce}",bento:"\u{1f371}",biking_man:"\u{1f6b4}",bike:"\u{1f6b2}",biking_woman:"\u{1f6b4}&zwj;\u2640\ufe0f",bikini:"\u{1f459}",biohazard:"\u2623\ufe0f",bird:"\u{1f426}",birthday:"\u{1f382}",black_circle:"\u26ab\ufe0f",black_flag:"\u{1f3f4}",black_heart:"\u{1f5a4}",black_joker:"\u{1f0cf}",black_large_square:"\u2b1b\ufe0f",black_medium_small_square:"\u25fe\ufe0f",black_medium_square:"\u25fc\ufe0f",black_nib:"\u2712\ufe0f",black_small_square:"\u25aa\ufe0f",black_square_button:"\u{1f532}",blonde_man:"\u{1f471}",blonde_woman:"\u{1f471}&zwj;\u2640\ufe0f",blossom:"\u{1f33c}",blowfish:"\u{1f421}",blue_book:"\u{1f4d8}",blue_car:"\u{1f699}",blue_heart:"\u{1f499}",blush:"\u{1f60a}",boar:"\u{1f417}",boat:"\u26f5\ufe0f",bomb:"\u{1f4a3}",book:"\u{1f4d6}",bookmark:"\u{1f516}",bookmark_tabs:"\u{1f4d1}",books:"\u{1f4da}",boom:"\u{1f4a5}",boot:"\u{1f462}",bouquet:"\u{1f490}",bowing_man:"\u{1f647}",bow_and_arrow:"\u{1f3f9}",bowing_woman:"\u{1f647}&zwj;\u2640\ufe0f",bowling:"\u{1f3b3}",boxing_glove:"\u{1f94a}",boy:"\u{1f466}",bread:"\u{1f35e}",bride_with_veil:"\u{1f470}",bridge_at_night:"\u{1f309}",briefcase:"\u{1f4bc}",broken_heart:"\u{1f494}",bug:"\u{1f41b}",building_construction:"\u{1f3d7}",bulb:"\u{1f4a1}",bullettrain_front:"\u{1f685}",bullettrain_side:"\u{1f684}",burrito:"\u{1f32f}",bus:"\u{1f68c}",business_suit_levitating:"\u{1f574}",busstop:"\u{1f68f}",bust_in_silhouette:"\u{1f464}",busts_in_silhouette:"\u{1f465}",butterfly:"\u{1f98b}",cactus:"\u{1f335}",cake:"\u{1f370}",calendar:"\u{1f4c6}",call_me_hand:"\u{1f919}",calling:"\u{1f4f2}",camel:"\u{1f42b}",camera:"\u{1f4f7}",camera_flash:"\u{1f4f8}",camping:"\u{1f3d5}",cancer:"\u264b\ufe0f",candle:"\u{1f56f}",candy:"\u{1f36c}",canoe:"\u{1f6f6}",capital_abcd:"\u{1f520}",capricorn:"\u2651\ufe0f",car:"\u{1f697}",card_file_box:"\u{1f5c3}",card_index:"\u{1f4c7}",card_index_dividers:"\u{1f5c2}",carousel_horse:"\u{1f3a0}",carrot:"\u{1f955}",cat:"\u{1f431}",cat2:"\u{1f408}",cd:"\u{1f4bf}",chains:"\u26d3",champagne:"\u{1f37e}",chart:"\u{1f4b9}",chart_with_downwards_trend:"\u{1f4c9}",chart_with_upwards_trend:"\u{1f4c8}",checkered_flag:"\u{1f3c1}",cheese:"\u{1f9c0}",cherries:"\u{1f352}",cherry_blossom:"\u{1f338}",chestnut:"\u{1f330}",chicken:"\u{1f414}",children_crossing:"\u{1f6b8}",chipmunk:"\u{1f43f}",chocolate_bar:"\u{1f36b}",christmas_tree:"\u{1f384}",church:"\u26ea\ufe0f",cinema:"\u{1f3a6}",circus_tent:"\u{1f3aa}",city_sunrise:"\u{1f307}",city_sunset:"\u{1f306}",cityscape:"\u{1f3d9}",cl:"\u{1f191}",clamp:"\u{1f5dc}",clap:"\u{1f44f}",clapper:"\u{1f3ac}",classical_building:"\u{1f3db}",clinking_glasses:"\u{1f942}",clipboard:"\u{1f4cb}",clock1:"\u{1f550}",clock10:"\u{1f559}",clock1030:"\u{1f565}",clock11:"\u{1f55a}",clock1130:"\u{1f566}",clock12:"\u{1f55b}",clock1230:"\u{1f567}",clock130:"\u{1f55c}",clock2:"\u{1f551}",clock230:"\u{1f55d}",clock3:"\u{1f552}",clock330:"\u{1f55e}",clock4:"\u{1f553}",clock430:"\u{1f55f}",clock5:"\u{1f554}",clock530:"\u{1f560}",clock6:"\u{1f555}",clock630:"\u{1f561}",clock7:"\u{1f556}",clock730:"\u{1f562}",clock8:"\u{1f557}",clock830:"\u{1f563}",clock9:"\u{1f558}",clock930:"\u{1f564}",closed_book:"\u{1f4d5}",closed_lock_with_key:"\u{1f510}",closed_umbrella:"\u{1f302}",cloud:"\u2601\ufe0f",cloud_with_lightning:"\u{1f329}",cloud_with_lightning_and_rain:"\u26c8",cloud_with_rain:"\u{1f327}",cloud_with_snow:"\u{1f328}",clown_face:"\u{1f921}",clubs:"\u2663\ufe0f",cocktail:"\u{1f378}",coffee:"\u2615\ufe0f",coffin:"\u26b0\ufe0f",cold_sweat:"\u{1f630}",comet:"\u2604\ufe0f",computer:"\u{1f4bb}",computer_mouse:"\u{1f5b1}",confetti_ball:"\u{1f38a}",confounded:"\u{1f616}",confused:"\u{1f615}",congratulations:"\u3297\ufe0f",construction:"\u{1f6a7}",construction_worker_man:"\u{1f477}",construction_worker_woman:"\u{1f477}&zwj;\u2640\ufe0f",control_knobs:"\u{1f39b}",convenience_store:"\u{1f3ea}",cookie:"\u{1f36a}",cool:"\u{1f192}",policeman:"\u{1f46e}",copyright:"\xa9\ufe0f",corn:"\u{1f33d}",couch_and_lamp:"\u{1f6cb}",couple:"\u{1f46b}",couple_with_heart_woman_man:"\u{1f491}",couple_with_heart_man_man:"\u{1f468}&zwj;\u2764\ufe0f&zwj;\u{1f468}",couple_with_heart_woman_woman:"\u{1f469}&zwj;\u2764\ufe0f&zwj;\u{1f469}",couplekiss_man_man:"\u{1f468}&zwj;\u2764\ufe0f&zwj;\u{1f48b}&zwj;\u{1f468}",couplekiss_man_woman:"\u{1f48f}",couplekiss_woman_woman:"\u{1f469}&zwj;\u2764\ufe0f&zwj;\u{1f48b}&zwj;\u{1f469}",cow:"\u{1f42e}",cow2:"\u{1f404}",cowboy_hat_face:"\u{1f920}",crab:"\u{1f980}",crayon:"\u{1f58d}",credit_card:"\u{1f4b3}",crescent_moon:"\u{1f319}",cricket:"\u{1f3cf}",crocodile:"\u{1f40a}",croissant:"\u{1f950}",crossed_fingers:"\u{1f91e}",crossed_flags:"\u{1f38c}",crossed_swords:"\u2694\ufe0f",crown:"\u{1f451}",cry:"\u{1f622}",crying_cat_face:"\u{1f63f}",crystal_ball:"\u{1f52e}",cucumber:"\u{1f952}",cupid:"\u{1f498}",curly_loop:"\u27b0",currency_exchange:"\u{1f4b1}",curry:"\u{1f35b}",custard:"\u{1f36e}",customs:"\u{1f6c3}",cyclone:"\u{1f300}",dagger:"\u{1f5e1}",dancer:"\u{1f483}",dancing_women:"\u{1f46f}",dancing_men:"\u{1f46f}&zwj;\u2642\ufe0f",dango:"\u{1f361}",dark_sunglasses:"\u{1f576}",dart:"\u{1f3af}",dash:"\u{1f4a8}",date:"\u{1f4c5}",deciduous_tree:"\u{1f333}",deer:"\u{1f98c}",department_store:"\u{1f3ec}",derelict_house:"\u{1f3da}",desert:"\u{1f3dc}",desert_island:"\u{1f3dd}",desktop_computer:"\u{1f5a5}",male_detective:"\u{1f575}\ufe0f",diamond_shape_with_a_dot_inside:"\u{1f4a0}",diamonds:"\u2666\ufe0f",disappointed:"\u{1f61e}",disappointed_relieved:"\u{1f625}",dizzy:"\u{1f4ab}",dizzy_face:"\u{1f635}",do_not_litter:"\u{1f6af}",dog:"\u{1f436}",dog2:"\u{1f415}",dollar:"\u{1f4b5}",dolls:"\u{1f38e}",dolphin:"\u{1f42c}",door:"\u{1f6aa}",doughnut:"\u{1f369}",dove:"\u{1f54a}",dragon:"\u{1f409}",dragon_face:"\u{1f432}",dress:"\u{1f457}",dromedary_camel:"\u{1f42a}",drooling_face:"\u{1f924}",droplet:"\u{1f4a7}",drum:"\u{1f941}",duck:"\u{1f986}",dvd:"\u{1f4c0}","e-mail":"\u{1f4e7}",eagle:"\u{1f985}",ear:"\u{1f442}",ear_of_rice:"\u{1f33e}",earth_africa:"\u{1f30d}",earth_americas:"\u{1f30e}",earth_asia:"\u{1f30f}",egg:"\u{1f95a}",eggplant:"\u{1f346}",eight_pointed_black_star:"\u2734\ufe0f",eight_spoked_asterisk:"\u2733\ufe0f",electric_plug:"\u{1f50c}",elephant:"\u{1f418}",email:"\u2709\ufe0f",end:"\u{1f51a}",envelope_with_arrow:"\u{1f4e9}",euro:"\u{1f4b6}",european_castle:"\u{1f3f0}",european_post_office:"\u{1f3e4}",evergreen_tree:"\u{1f332}",exclamation:"\u2757\ufe0f",expressionless:"\u{1f611}",eye:"\u{1f441}",eye_speech_bubble:"\u{1f441}&zwj;\u{1f5e8}",eyeglasses:"\u{1f453}",eyes:"\u{1f440}",face_with_head_bandage:"\u{1f915}",face_with_thermometer:"\u{1f912}",fist_oncoming:"\u{1f44a}",factory:"\u{1f3ed}",fallen_leaf:"\u{1f342}",family_man_woman_boy:"\u{1f46a}",family_man_boy:"\u{1f468}&zwj;\u{1f466}",family_man_boy_boy:"\u{1f468}&zwj;\u{1f466}&zwj;\u{1f466}",family_man_girl:"\u{1f468}&zwj;\u{1f467}",family_man_girl_boy:"\u{1f468}&zwj;\u{1f467}&zwj;\u{1f466}",family_man_girl_girl:"\u{1f468}&zwj;\u{1f467}&zwj;\u{1f467}",family_man_man_boy:"\u{1f468}&zwj;\u{1f468}&zwj;\u{1f466}",family_man_man_boy_boy:"\u{1f468}&zwj;\u{1f468}&zwj;\u{1f466}&zwj;\u{1f466}",family_man_man_girl:"\u{1f468}&zwj;\u{1f468}&zwj;\u{1f467}",family_man_man_girl_boy:"\u{1f468}&zwj;\u{1f468}&zwj;\u{1f467}&zwj;\u{1f466}",family_man_man_girl_girl:"\u{1f468}&zwj;\u{1f468}&zwj;\u{1f467}&zwj;\u{1f467}",family_man_woman_boy_boy:"\u{1f468}&zwj;\u{1f469}&zwj;\u{1f466}&zwj;\u{1f466}",family_man_woman_girl:"\u{1f468}&zwj;\u{1f469}&zwj;\u{1f467}",family_man_woman_girl_boy:"\u{1f468}&zwj;\u{1f469}&zwj;\u{1f467}&zwj;\u{1f466}",family_man_woman_girl_girl:"\u{1f468}&zwj;\u{1f469}&zwj;\u{1f467}&zwj;\u{1f467}",family_woman_boy:"\u{1f469}&zwj;\u{1f466}",family_woman_boy_boy:"\u{1f469}&zwj;\u{1f466}&zwj;\u{1f466}",family_woman_girl:"\u{1f469}&zwj;\u{1f467}",family_woman_girl_boy:"\u{1f469}&zwj;\u{1f467}&zwj;\u{1f466}",family_woman_girl_girl:"\u{1f469}&zwj;\u{1f467}&zwj;\u{1f467}",family_woman_woman_boy:"\u{1f469}&zwj;\u{1f469}&zwj;\u{1f466}",family_woman_woman_boy_boy:"\u{1f469}&zwj;\u{1f469}&zwj;\u{1f466}&zwj;\u{1f466}",family_woman_woman_girl:"\u{1f469}&zwj;\u{1f469}&zwj;\u{1f467}",family_woman_woman_girl_boy:"\u{1f469}&zwj;\u{1f469}&zwj;\u{1f467}&zwj;\u{1f466}",family_woman_woman_girl_girl:"\u{1f469}&zwj;\u{1f469}&zwj;\u{1f467}&zwj;\u{1f467}",fast_forward:"\u23e9",fax:"\u{1f4e0}",fearful:"\u{1f628}",feet:"\u{1f43e}",female_detective:"\u{1f575}\ufe0f&zwj;\u2640\ufe0f",ferris_wheel:"\u{1f3a1}",ferry:"\u26f4",field_hockey:"\u{1f3d1}",file_cabinet:"\u{1f5c4}",file_folder:"\u{1f4c1}",film_projector:"\u{1f4fd}",film_strip:"\u{1f39e}",fire:"\u{1f525}",fire_engine:"\u{1f692}",fireworks:"\u{1f386}",first_quarter_moon:"\u{1f313}",first_quarter_moon_with_face:"\u{1f31b}",fish:"\u{1f41f}",fish_cake:"\u{1f365}",fishing_pole_and_fish:"\u{1f3a3}",fist_raised:"\u270a",fist_left:"\u{1f91b}",fist_right:"\u{1f91c}",flags:"\u{1f38f}",flashlight:"\u{1f526}",fleur_de_lis:"\u269c\ufe0f",flight_arrival:"\u{1f6ec}",flight_departure:"\u{1f6eb}",floppy_disk:"\u{1f4be}",flower_playing_cards:"\u{1f3b4}",flushed:"\u{1f633}",fog:"\u{1f32b}",foggy:"\u{1f301}",football:"\u{1f3c8}",footprints:"\u{1f463}",fork_and_knife:"\u{1f374}",fountain:"\u26f2\ufe0f",fountain_pen:"\u{1f58b}",four_leaf_clover:"\u{1f340}",fox_face:"\u{1f98a}",framed_picture:"\u{1f5bc}",free:"\u{1f193}",fried_egg:"\u{1f373}",fried_shrimp:"\u{1f364}",fries:"\u{1f35f}",frog:"\u{1f438}",frowning:"\u{1f626}",frowning_face:"\u2639\ufe0f",frowning_man:"\u{1f64d}&zwj;\u2642\ufe0f",frowning_woman:"\u{1f64d}",middle_finger:"\u{1f595}",fuelpump:"\u26fd\ufe0f",full_moon:"\u{1f315}",full_moon_with_face:"\u{1f31d}",funeral_urn:"\u26b1\ufe0f",game_die:"\u{1f3b2}",gear:"\u2699\ufe0f",gem:"\u{1f48e}",gemini:"\u264a\ufe0f",ghost:"\u{1f47b}",gift:"\u{1f381}",gift_heart:"\u{1f49d}",girl:"\u{1f467}",globe_with_meridians:"\u{1f310}",goal_net:"\u{1f945}",goat:"\u{1f410}",golf:"\u26f3\ufe0f",golfing_man:"\u{1f3cc}\ufe0f",golfing_woman:"\u{1f3cc}\ufe0f&zwj;\u2640\ufe0f",gorilla:"\u{1f98d}",grapes:"\u{1f347}",green_apple:"\u{1f34f}",green_book:"\u{1f4d7}",green_heart:"\u{1f49a}",green_salad:"\u{1f957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1f62c}",grin:"\u{1f601}",grinning:"\u{1f600}",guardsman:"\u{1f482}",guardswoman:"\u{1f482}&zwj;\u2640\ufe0f",guitar:"\u{1f3b8}",gun:"\u{1f52b}",haircut_woman:"\u{1f487}",haircut_man:"\u{1f487}&zwj;\u2642\ufe0f",hamburger:"\u{1f354}",hammer:"\u{1f528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1f6e0}",hamster:"\u{1f439}",hand:"\u270b",handbag:"\u{1f45c}",handshake:"\u{1f91d}",hankey:"\u{1f4a9}",hatched_chick:"\u{1f425}",hatching_chick:"\u{1f423}",headphones:"\u{1f3a7}",hear_no_evil:"\u{1f649}",heart:"\u2764\ufe0f",heart_decoration:"\u{1f49f}",heart_eyes:"\u{1f60d}",heart_eyes_cat:"\u{1f63b}",heartbeat:"\u{1f493}",heartpulse:"\u{1f497}",hearts:"\u2665\ufe0f",heavy_check_mark:"\u2714\ufe0f",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1f4b2}",heavy_heart_exclamation:"\u2763\ufe0f",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\ufe0f",heavy_plus_sign:"\u2795",helicopter:"\u{1f681}",herb:"\u{1f33f}",hibiscus:"\u{1f33a}",high_brightness:"\u{1f506}",high_heel:"\u{1f460}",hocho:"\u{1f52a}",hole:"\u{1f573}",honey_pot:"\u{1f36f}",horse:"\u{1f434}",horse_racing:"\u{1f3c7}",hospital:"\u{1f3e5}",hot_pepper:"\u{1f336}",hotdog:"\u{1f32d}",hotel:"\u{1f3e8}",hotsprings:"\u2668\ufe0f",hourglass:"\u231b\ufe0f",hourglass_flowing_sand:"\u23f3",house:"\u{1f3e0}",house_with_garden:"\u{1f3e1}",houses:"\u{1f3d8}",hugs:"\u{1f917}",hushed:"\u{1f62f}",ice_cream:"\u{1f368}",ice_hockey:"\u{1f3d2}",ice_skate:"\u26f8",icecream:"\u{1f366}",id:"\u{1f194}",ideograph_advantage:"\u{1f250}",imp:"\u{1f47f}",inbox_tray:"\u{1f4e5}",incoming_envelope:"\u{1f4e8}",tipping_hand_woman:"\u{1f481}",information_source:"\u2139\ufe0f",innocent:"\u{1f607}",interrobang:"\u2049\ufe0f",iphone:"\u{1f4f1}",izakaya_lantern:"\u{1f3ee}",jack_o_lantern:"\u{1f383}",japan:"\u{1f5fe}",japanese_castle:"\u{1f3ef}",japanese_goblin:"\u{1f47a}",japanese_ogre:"\u{1f479}",jeans:"\u{1f456}",joy:"\u{1f602}",joy_cat:"\u{1f639}",joystick:"\u{1f579}",kaaba:"\u{1f54b}",key:"\u{1f511}",keyboard:"\u2328\ufe0f",keycap_ten:"\u{1f51f}",kick_scooter:"\u{1f6f4}",kimono:"\u{1f458}",kiss:"\u{1f48b}",kissing:"\u{1f617}",kissing_cat:"\u{1f63d}",kissing_closed_eyes:"\u{1f61a}",kissing_heart:"\u{1f618}",kissing_smiling_eyes:"\u{1f619}",kiwi_fruit:"\u{1f95d}",koala:"\u{1f428}",koko:"\u{1f201}",label:"\u{1f3f7}",large_blue_circle:"\u{1f535}",large_blue_diamond:"\u{1f537}",large_orange_diamond:"\u{1f536}",last_quarter_moon:"\u{1f317}",last_quarter_moon_with_face:"\u{1f31c}",latin_cross:"\u271d\ufe0f",laughing:"\u{1f606}",leaves:"\u{1f343}",ledger:"\u{1f4d2}",left_luggage:"\u{1f6c5}",left_right_arrow:"\u2194\ufe0f",leftwards_arrow_with_hook:"\u21a9\ufe0f",lemon:"\u{1f34b}",leo:"\u264c\ufe0f",leopard:"\u{1f406}",level_slider:"\u{1f39a}",libra:"\u264e\ufe0f",light_rail:"\u{1f688}",link:"\u{1f517}",lion:"\u{1f981}",lips:"\u{1f444}",lipstick:"\u{1f484}",lizard:"\u{1f98e}",lock:"\u{1f512}",lock_with_ink_pen:"\u{1f50f}",lollipop:"\u{1f36d}",loop:"\u27bf",loud_sound:"\u{1f50a}",loudspeaker:"\u{1f4e2}",love_hotel:"\u{1f3e9}",love_letter:"\u{1f48c}",low_brightness:"\u{1f505}",lying_face:"\u{1f925}",m:"\u24c2\ufe0f",mag:"\u{1f50d}",mag_right:"\u{1f50e}",mahjong:"\u{1f004}\ufe0f",mailbox:"\u{1f4eb}",mailbox_closed:"\u{1f4ea}",mailbox_with_mail:"\u{1f4ec}",mailbox_with_no_mail:"\u{1f4ed}",man:"\u{1f468}",man_artist:"\u{1f468}&zwj;\u{1f3a8}",man_astronaut:"\u{1f468}&zwj;\u{1f680}",man_cartwheeling:"\u{1f938}&zwj;\u2642\ufe0f",man_cook:"\u{1f468}&zwj;\u{1f373}",man_dancing:"\u{1f57a}",man_facepalming:"\u{1f926}&zwj;\u2642\ufe0f",man_factory_worker:"\u{1f468}&zwj;\u{1f3ed}",man_farmer:"\u{1f468}&zwj;\u{1f33e}",man_firefighter:"\u{1f468}&zwj;\u{1f692}",man_health_worker:"\u{1f468}&zwj;\u2695\ufe0f",man_in_tuxedo:"\u{1f935}",man_judge:"\u{1f468}&zwj;\u2696\ufe0f",man_juggling:"\u{1f939}&zwj;\u2642\ufe0f",man_mechanic:"\u{1f468}&zwj;\u{1f527}",man_office_worker:"\u{1f468}&zwj;\u{1f4bc}",man_pilot:"\u{1f468}&zwj;\u2708\ufe0f",man_playing_handball:"\u{1f93e}&zwj;\u2642\ufe0f",man_playing_water_polo:"\u{1f93d}&zwj;\u2642\ufe0f",man_scientist:"\u{1f468}&zwj;\u{1f52c}",man_shrugging:"\u{1f937}&zwj;\u2642\ufe0f",man_singer:"\u{1f468}&zwj;\u{1f3a4}",man_student:"\u{1f468}&zwj;\u{1f393}",man_teacher:"\u{1f468}&zwj;\u{1f3eb}",man_technologist:"\u{1f468}&zwj;\u{1f4bb}",man_with_gua_pi_mao:"\u{1f472}",man_with_turban:"\u{1f473}",tangerine:"\u{1f34a}",mans_shoe:"\u{1f45e}",mantelpiece_clock:"\u{1f570}",maple_leaf:"\u{1f341}",martial_arts_uniform:"\u{1f94b}",mask:"\u{1f637}",massage_woman:"\u{1f486}",massage_man:"\u{1f486}&zwj;\u2642\ufe0f",meat_on_bone:"\u{1f356}",medal_military:"\u{1f396}",medal_sports:"\u{1f3c5}",mega:"\u{1f4e3}",melon:"\u{1f348}",memo:"\u{1f4dd}",men_wrestling:"\u{1f93c}&zwj;\u2642\ufe0f",menorah:"\u{1f54e}",mens:"\u{1f6b9}",metal:"\u{1f918}",metro:"\u{1f687}",microphone:"\u{1f3a4}",microscope:"\u{1f52c}",milk_glass:"\u{1f95b}",milky_way:"\u{1f30c}",minibus:"\u{1f690}",minidisc:"\u{1f4bd}",mobile_phone_off:"\u{1f4f4}",money_mouth_face:"\u{1f911}",money_with_wings:"\u{1f4b8}",moneybag:"\u{1f4b0}",monkey:"\u{1f412}",monkey_face:"\u{1f435}",monorail:"\u{1f69d}",moon:"\u{1f314}",mortar_board:"\u{1f393}",mosque:"\u{1f54c}",motor_boat:"\u{1f6e5}",motor_scooter:"\u{1f6f5}",motorcycle:"\u{1f3cd}",motorway:"\u{1f6e3}",mount_fuji:"\u{1f5fb}",mountain:"\u26f0",mountain_biking_man:"\u{1f6b5}",mountain_biking_woman:"\u{1f6b5}&zwj;\u2640\ufe0f",mountain_cableway:"\u{1f6a0}",mountain_railway:"\u{1f69e}",mountain_snow:"\u{1f3d4}",mouse:"\u{1f42d}",mouse2:"\u{1f401}",movie_camera:"\u{1f3a5}",moyai:"\u{1f5ff}",mrs_claus:"\u{1f936}",muscle:"\u{1f4aa}",mushroom:"\u{1f344}",musical_keyboard:"\u{1f3b9}",musical_note:"\u{1f3b5}",musical_score:"\u{1f3bc}",mute:"\u{1f507}",nail_care:"\u{1f485}",name_badge:"\u{1f4db}",national_park:"\u{1f3de}",nauseated_face:"\u{1f922}",necktie:"\u{1f454}",negative_squared_cross_mark:"\u274e",nerd_face:"\u{1f913}",neutral_face:"\u{1f610}",new:"\u{1f195}",new_moon:"\u{1f311}",new_moon_with_face:"\u{1f31a}",newspaper:"\u{1f4f0}",newspaper_roll:"\u{1f5de}",next_track_button:"\u23ed",ng:"\u{1f196}",no_good_man:"\u{1f645}&zwj;\u2642\ufe0f",no_good_woman:"\u{1f645}",night_with_stars:"\u{1f303}",no_bell:"\u{1f515}",no_bicycles:"\u{1f6b3}",no_entry:"\u26d4\ufe0f",no_entry_sign:"\u{1f6ab}",no_mobile_phones:"\u{1f4f5}",no_mouth:"\u{1f636}",no_pedestrians:"\u{1f6b7}",no_smoking:"\u{1f6ad}","non-potable_water":"\u{1f6b1}",nose:"\u{1f443}",notebook:"\u{1f4d3}",notebook_with_decorative_cover:"\u{1f4d4}",notes:"\u{1f3b6}",nut_and_bolt:"\u{1f529}",o:"\u2b55\ufe0f",o2:"\u{1f17e}\ufe0f",ocean:"\u{1f30a}",octopus:"\u{1f419}",oden:"\u{1f362}",office:"\u{1f3e2}",oil_drum:"\u{1f6e2}",ok:"\u{1f197}",ok_hand:"\u{1f44c}",ok_man:"\u{1f646}&zwj;\u2642\ufe0f",ok_woman:"\u{1f646}",old_key:"\u{1f5dd}",older_man:"\u{1f474}",older_woman:"\u{1f475}",om:"\u{1f549}",on:"\u{1f51b}",oncoming_automobile:"\u{1f698}",oncoming_bus:"\u{1f68d}",oncoming_police_car:"\u{1f694}",oncoming_taxi:"\u{1f696}",open_file_folder:"\u{1f4c2}",open_hands:"\u{1f450}",open_mouth:"\u{1f62e}",open_umbrella:"\u2602\ufe0f",ophiuchus:"\u26ce",orange_book:"\u{1f4d9}",orthodox_cross:"\u2626\ufe0f",outbox_tray:"\u{1f4e4}",owl:"\u{1f989}",ox:"\u{1f402}",package:"\u{1f4e6}",page_facing_up:"\u{1f4c4}",page_with_curl:"\u{1f4c3}",pager:"\u{1f4df}",paintbrush:"\u{1f58c}",palm_tree:"\u{1f334}",pancakes:"\u{1f95e}",panda_face:"\u{1f43c}",paperclip:"\u{1f4ce}",paperclips:"\u{1f587}",parasol_on_ground:"\u26f1",parking:"\u{1f17f}\ufe0f",part_alternation_mark:"\u303d\ufe0f",partly_sunny:"\u26c5\ufe0f",passenger_ship:"\u{1f6f3}",passport_control:"\u{1f6c2}",pause_button:"\u23f8",peace_symbol:"\u262e\ufe0f",peach:"\u{1f351}",peanuts:"\u{1f95c}",pear:"\u{1f350}",pen:"\u{1f58a}",pencil2:"\u270f\ufe0f",penguin:"\u{1f427}",pensive:"\u{1f614}",performing_arts:"\u{1f3ad}",persevere:"\u{1f623}",person_fencing:"\u{1f93a}",pouting_woman:"\u{1f64e}",phone:"\u260e\ufe0f",pick:"\u26cf",pig:"\u{1f437}",pig2:"\u{1f416}",pig_nose:"\u{1f43d}",pill:"\u{1f48a}",pineapple:"\u{1f34d}",ping_pong:"\u{1f3d3}",pisces:"\u2653\ufe0f",pizza:"\u{1f355}",place_of_worship:"\u{1f6d0}",plate_with_cutlery:"\u{1f37d}",play_or_pause_button:"\u23ef",point_down:"\u{1f447}",point_left:"\u{1f448}",point_right:"\u{1f449}",point_up:"\u261d\ufe0f",point_up_2:"\u{1f446}",police_car:"\u{1f693}",policewoman:"\u{1f46e}&zwj;\u2640\ufe0f",poodle:"\u{1f429}",popcorn:"\u{1f37f}",post_office:"\u{1f3e3}",postal_horn:"\u{1f4ef}",postbox:"\u{1f4ee}",potable_water:"\u{1f6b0}",potato:"\u{1f954}",pouch:"\u{1f45d}",poultry_leg:"\u{1f357}",pound:"\u{1f4b7}",rage:"\u{1f621}",pouting_cat:"\u{1f63e}",pouting_man:"\u{1f64e}&zwj;\u2642\ufe0f",pray:"\u{1f64f}",prayer_beads:"\u{1f4ff}",pregnant_woman:"\u{1f930}",previous_track_button:"\u23ee",prince:"\u{1f934}",princess:"\u{1f478}",printer:"\u{1f5a8}",purple_heart:"\u{1f49c}",purse:"\u{1f45b}",pushpin:"\u{1f4cc}",put_litter_in_its_place:"\u{1f6ae}",question:"\u2753",rabbit:"\u{1f430}",rabbit2:"\u{1f407}",racehorse:"\u{1f40e}",racing_car:"\u{1f3ce}",radio:"\u{1f4fb}",radio_button:"\u{1f518}",radioactive:"\u2622\ufe0f",railway_car:"\u{1f683}",railway_track:"\u{1f6e4}",rainbow:"\u{1f308}",rainbow_flag:"\u{1f3f3}\ufe0f&zwj;\u{1f308}",raised_back_of_hand:"\u{1f91a}",raised_hand_with_fingers_splayed:"\u{1f590}",raised_hands:"\u{1f64c}",raising_hand_woman:"\u{1f64b}",raising_hand_man:"\u{1f64b}&zwj;\u2642\ufe0f",ram:"\u{1f40f}",ramen:"\u{1f35c}",rat:"\u{1f400}",record_button:"\u23fa",recycle:"\u267b\ufe0f",red_circle:"\u{1f534}",registered:"\xae\ufe0f",relaxed:"\u263a\ufe0f",relieved:"\u{1f60c}",reminder_ribbon:"\u{1f397}",repeat:"\u{1f501}",repeat_one:"\u{1f502}",rescue_worker_helmet:"\u26d1",restroom:"\u{1f6bb}",revolving_hearts:"\u{1f49e}",rewind:"\u23ea",rhinoceros:"\u{1f98f}",ribbon:"\u{1f380}",rice:"\u{1f35a}",rice_ball:"\u{1f359}",rice_cracker:"\u{1f358}",rice_scene:"\u{1f391}",right_anger_bubble:"\u{1f5ef}",ring:"\u{1f48d}",robot:"\u{1f916}",rocket:"\u{1f680}",rofl:"\u{1f923}",roll_eyes:"\u{1f644}",roller_coaster:"\u{1f3a2}",rooster:"\u{1f413}",rose:"\u{1f339}",rosette:"\u{1f3f5}",rotating_light:"\u{1f6a8}",round_pushpin:"\u{1f4cd}",rowing_man:"\u{1f6a3}",rowing_woman:"\u{1f6a3}&zwj;\u2640\ufe0f",rugby_football:"\u{1f3c9}",running_man:"\u{1f3c3}",running_shirt_with_sash:"\u{1f3bd}",running_woman:"\u{1f3c3}&zwj;\u2640\ufe0f",sa:"\u{1f202}\ufe0f",sagittarius:"\u2650\ufe0f",sake:"\u{1f376}",sandal:"\u{1f461}",santa:"\u{1f385}",satellite:"\u{1f4e1}",saxophone:"\u{1f3b7}",school:"\u{1f3eb}",school_satchel:"\u{1f392}",scissors:"\u2702\ufe0f",scorpion:"\u{1f982}",scorpius:"\u264f\ufe0f",scream:"\u{1f631}",scream_cat:"\u{1f640}",scroll:"\u{1f4dc}",seat:"\u{1f4ba}",secret:"\u3299\ufe0f",see_no_evil:"\u{1f648}",seedling:"\u{1f331}",selfie:"\u{1f933}",shallow_pan_of_food:"\u{1f958}",shamrock:"\u2618\ufe0f",shark:"\u{1f988}",shaved_ice:"\u{1f367}",sheep:"\u{1f411}",shell:"\u{1f41a}",shield:"\u{1f6e1}",shinto_shrine:"\u26e9",ship:"\u{1f6a2}",shirt:"\u{1f455}",shopping:"\u{1f6cd}",shopping_cart:"\u{1f6d2}",shower:"\u{1f6bf}",shrimp:"\u{1f990}",signal_strength:"\u{1f4f6}",six_pointed_star:"\u{1f52f}",ski:"\u{1f3bf}",skier:"\u26f7",skull:"\u{1f480}",skull_and_crossbones:"\u2620\ufe0f",sleeping:"\u{1f634}",sleeping_bed:"\u{1f6cc}",sleepy:"\u{1f62a}",slightly_frowning_face:"\u{1f641}",slightly_smiling_face:"\u{1f642}",slot_machine:"\u{1f3b0}",small_airplane:"\u{1f6e9}",small_blue_diamond:"\u{1f539}",small_orange_diamond:"\u{1f538}",small_red_triangle:"\u{1f53a}",small_red_triangle_down:"\u{1f53b}",smile:"\u{1f604}",smile_cat:"\u{1f638}",smiley:"\u{1f603}",smiley_cat:"\u{1f63a}",smiling_imp:"\u{1f608}",smirk:"\u{1f60f}",smirk_cat:"\u{1f63c}",smoking:"\u{1f6ac}",snail:"\u{1f40c}",snake:"\u{1f40d}",sneezing_face:"\u{1f927}",snowboarder:"\u{1f3c2}",snowflake:"\u2744\ufe0f",snowman:"\u26c4\ufe0f",snowman_with_snow:"\u2603\ufe0f",sob:"\u{1f62d}",soccer:"\u26bd\ufe0f",soon:"\u{1f51c}",sos:"\u{1f198}",sound:"\u{1f509}",space_invader:"\u{1f47e}",spades:"\u2660\ufe0f",spaghetti:"\u{1f35d}",sparkle:"\u2747\ufe0f",sparkler:"\u{1f387}",sparkles:"\u2728",sparkling_heart:"\u{1f496}",speak_no_evil:"\u{1f64a}",speaker:"\u{1f508}",speaking_head:"\u{1f5e3}",speech_balloon:"\u{1f4ac}",speedboat:"\u{1f6a4}",spider:"\u{1f577}",spider_web:"\u{1f578}",spiral_calendar:"\u{1f5d3}",spiral_notepad:"\u{1f5d2}",spoon:"\u{1f944}",squid:"\u{1f991}",stadium:"\u{1f3df}",star:"\u2b50\ufe0f",star2:"\u{1f31f}",star_and_crescent:"\u262a\ufe0f",star_of_david:"\u2721\ufe0f",stars:"\u{1f320}",station:"\u{1f689}",statue_of_liberty:"\u{1f5fd}",steam_locomotive:"\u{1f682}",stew:"\u{1f372}",stop_button:"\u23f9",stop_sign:"\u{1f6d1}",stopwatch:"\u23f1",straight_ruler:"\u{1f4cf}",strawberry:"\u{1f353}",stuck_out_tongue:"\u{1f61b}",stuck_out_tongue_closed_eyes:"\u{1f61d}",stuck_out_tongue_winking_eye:"\u{1f61c}",studio_microphone:"\u{1f399}",stuffed_flatbread:"\u{1f959}",sun_behind_large_cloud:"\u{1f325}",sun_behind_rain_cloud:"\u{1f326}",sun_behind_small_cloud:"\u{1f324}",sun_with_face:"\u{1f31e}",sunflower:"\u{1f33b}",sunglasses:"\u{1f60e}",sunny:"\u2600\ufe0f",sunrise:"\u{1f305}",sunrise_over_mountains:"\u{1f304}",surfing_man:"\u{1f3c4}",surfing_woman:"\u{1f3c4}&zwj;\u2640\ufe0f",sushi:"\u{1f363}",suspension_railway:"\u{1f69f}",sweat:"\u{1f613}",sweat_drops:"\u{1f4a6}",sweat_smile:"\u{1f605}",sweet_potato:"\u{1f360}",swimming_man:"\u{1f3ca}",swimming_woman:"\u{1f3ca}&zwj;\u2640\ufe0f",symbols:"\u{1f523}",synagogue:"\u{1f54d}",syringe:"\u{1f489}",taco:"\u{1f32e}",tada:"\u{1f389}",tanabata_tree:"\u{1f38b}",taurus:"\u2649\ufe0f",taxi:"\u{1f695}",tea:"\u{1f375}",telephone_receiver:"\u{1f4de}",telescope:"\u{1f52d}",tennis:"\u{1f3be}",tent:"\u26fa\ufe0f",thermometer:"\u{1f321}",thinking:"\u{1f914}",thought_balloon:"\u{1f4ad}",ticket:"\u{1f3ab}",tickets:"\u{1f39f}",tiger:"\u{1f42f}",tiger2:"\u{1f405}",timer_clock:"\u23f2",tipping_hand_man:"\u{1f481}&zwj;\u2642\ufe0f",tired_face:"\u{1f62b}",tm:"\u2122\ufe0f",toilet:"\u{1f6bd}",tokyo_tower:"\u{1f5fc}",tomato:"\u{1f345}",tongue:"\u{1f445}",top:"\u{1f51d}",tophat:"\u{1f3a9}",tornado:"\u{1f32a}",trackball:"\u{1f5b2}",tractor:"\u{1f69c}",traffic_light:"\u{1f6a5}",train:"\u{1f68b}",train2:"\u{1f686}",tram:"\u{1f68a}",triangular_flag_on_post:"\u{1f6a9}",triangular_ruler:"\u{1f4d0}",trident:"\u{1f531}",triumph:"\u{1f624}",trolleybus:"\u{1f68e}",trophy:"\u{1f3c6}",tropical_drink:"\u{1f379}",tropical_fish:"\u{1f420}",truck:"\u{1f69a}",trumpet:"\u{1f3ba}",tulip:"\u{1f337}",tumbler_glass:"\u{1f943}",turkey:"\u{1f983}",turtle:"\u{1f422}",tv:"\u{1f4fa}",twisted_rightwards_arrows:"\u{1f500}",two_hearts:"\u{1f495}",two_men_holding_hands:"\u{1f46c}",two_women_holding_hands:"\u{1f46d}",u5272:"\u{1f239}",u5408:"\u{1f234}",u55b6:"\u{1f23a}",u6307:"\u{1f22f}\ufe0f",u6708:"\u{1f237}\ufe0f",u6709:"\u{1f236}",u6e80:"\u{1f235}",u7121:"\u{1f21a}\ufe0f",u7533:"\u{1f238}",u7981:"\u{1f232}",u7a7a:"\u{1f233}",umbrella:"\u2614\ufe0f",unamused:"\u{1f612}",underage:"\u{1f51e}",unicorn:"\u{1f984}",unlock:"\u{1f513}",up:"\u{1f199}",upside_down_face:"\u{1f643}",v:"\u270c\ufe0f",vertical_traffic_light:"\u{1f6a6}",vhs:"\u{1f4fc}",vibration_mode:"\u{1f4f3}",video_camera:"\u{1f4f9}",video_game:"\u{1f3ae}",violin:"\u{1f3bb}",virgo:"\u264d\ufe0f",volcano:"\u{1f30b}",volleyball:"\u{1f3d0}",vs:"\u{1f19a}",vulcan_salute:"\u{1f596}",walking_man:"\u{1f6b6}",walking_woman:"\u{1f6b6}&zwj;\u2640\ufe0f",waning_crescent_moon:"\u{1f318}",waning_gibbous_moon:"\u{1f316}",warning:"\u26a0\ufe0f",wastebasket:"\u{1f5d1}",watch:"\u231a\ufe0f",water_buffalo:"\u{1f403}",watermelon:"\u{1f349}",wave:"\u{1f44b}",wavy_dash:"\u3030\ufe0f",waxing_crescent_moon:"\u{1f312}",wc:"\u{1f6be}",weary:"\u{1f629}",wedding:"\u{1f492}",weight_lifting_man:"\u{1f3cb}\ufe0f",weight_lifting_woman:"\u{1f3cb}\ufe0f&zwj;\u2640\ufe0f",whale:"\u{1f433}",whale2:"\u{1f40b}",wheel_of_dharma:"\u2638\ufe0f",wheelchair:"\u267f\ufe0f",white_check_mark:"\u2705",white_circle:"\u26aa\ufe0f",white_flag:"\u{1f3f3}\ufe0f",white_flower:"\u{1f4ae}",white_large_square:"\u2b1c\ufe0f",white_medium_small_square:"\u25fd\ufe0f",white_medium_square:"\u25fb\ufe0f",white_small_square:"\u25ab\ufe0f",white_square_button:"\u{1f533}",wilted_flower:"\u{1f940}",wind_chime:"\u{1f390}",wind_face:"\u{1f32c}",wine_glass:"\u{1f377}",wink:"\u{1f609}",wolf:"\u{1f43a}",woman:"\u{1f469}",woman_artist:"\u{1f469}&zwj;\u{1f3a8}",woman_astronaut:"\u{1f469}&zwj;\u{1f680}",woman_cartwheeling:"\u{1f938}&zwj;\u2640\ufe0f",woman_cook:"\u{1f469}&zwj;\u{1f373}",woman_facepalming:"\u{1f926}&zwj;\u2640\ufe0f",woman_factory_worker:"\u{1f469}&zwj;\u{1f3ed}",woman_farmer:"\u{1f469}&zwj;\u{1f33e}",woman_firefighter:"\u{1f469}&zwj;\u{1f692}",woman_health_worker:"\u{1f469}&zwj;\u2695\ufe0f",woman_judge:"\u{1f469}&zwj;\u2696\ufe0f",woman_juggling:"\u{1f939}&zwj;\u2640\ufe0f",woman_mechanic:"\u{1f469}&zwj;\u{1f527}",woman_office_worker:"\u{1f469}&zwj;\u{1f4bc}",woman_pilot:"\u{1f469}&zwj;\u2708\ufe0f",woman_playing_handball:"\u{1f93e}&zwj;\u2640\ufe0f",woman_playing_water_polo:"\u{1f93d}&zwj;\u2640\ufe0f",woman_scientist:"\u{1f469}&zwj;\u{1f52c}",woman_shrugging:"\u{1f937}&zwj;\u2640\ufe0f",woman_singer:"\u{1f469}&zwj;\u{1f3a4}",woman_student:"\u{1f469}&zwj;\u{1f393}",woman_teacher:"\u{1f469}&zwj;\u{1f3eb}",woman_technologist:"\u{1f469}&zwj;\u{1f4bb}",woman_with_turban:"\u{1f473}&zwj;\u2640\ufe0f",womans_clothes:"\u{1f45a}",womans_hat:"\u{1f452}",women_wrestling:"\u{1f93c}&zwj;\u2640\ufe0f",womens:"\u{1f6ba}",world_map:"\u{1f5fa}",worried:"\u{1f61f}",wrench:"\u{1f527}",writing_hand:"\u270d\ufe0f",x:"\u274c",yellow_heart:"\u{1f49b}",yen:"\u{1f4b4}",yin_yang:"\u262f\ufe0f",yum:"\u{1f60b}",zap:"\u26a1\ufe0f",zipper_mouth_face:"\u{1f910}",zzz:"\u{1f4a4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},P.Converter=function(w){"use strict";var M={},O=[],q=[],re={},ae=ue,ee={parsed:{},raw:"",format:""};function Ye(te,Ie){if(Ie=Ie||null,P.helper.isString(te)){if(Ie=te=P.helper.stdExtName(te),P.extensions[te])return console.warn("DEPRECATION WARNING: "+te+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function He(te,Ie){"function"==typeof te&&(te=te(new P.Converter)),P.helper.isArray(te)||(te=[te]);var dt=lt(te,Ie);if(!dt.valid)throw Error(dt.error);for(var mt=0;mt<te.length;++mt)switch(te[mt].type){case"lang":O.push(te[mt]);break;case"output":q.push(te[mt]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(P.extensions[te],te);if(P.helper.isUndefined(Je[te]))throw Error('Extension "'+te+'" could not be loaded. It was either not found or is not a valid extension.');te=Je[te]}"function"==typeof te&&(te=te()),P.helper.isArray(te)||(te=[te]);var dt=lt(te,Ie);if(!dt.valid)throw Error(dt.error);for(var mt=0;mt<te.length;++mt){switch(te[mt].type){case"lang":O.push(te[mt]);break;case"output":q.push(te[mt])}if(te[mt].hasOwnProperty("listeners"))for(var Gt in te[mt].listeners)te[mt].listeners.hasOwnProperty(Gt)&&Be(Gt,te[mt].listeners[Gt])}}function Be(te,Ie){if(!P.helper.isString(te))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof te+" given");if("function"!=typeof Ie)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof Ie+" given");re.hasOwnProperty(te)||(re[te]=[]),re[te].push(Ie)}!function me(){for(var te in w=w||{},t)t.hasOwnProperty(te)&&(M[te]=t[te]);if("object"!=typeof w)throw Error("Converter expects the passed parameter to be an object, but "+typeof w+" was passed instead.");for(var Ie in w)w.hasOwnProperty(Ie)&&(M[Ie]=w[Ie]);M.extensions&&P.helper.forEach(M.extensions,Ye)}(),this._dispatch=function(Ie,dt,mt,Gt){if(re.hasOwnProperty(Ie))for(var bt=0;bt<re[Ie].length;++bt){var ti=re[Ie][bt](Ie,dt,this,mt,Gt);ti&&typeof ti<"u"&&(dt=ti)}return dt},this.listen=function(te,Ie){return Be(te,Ie),this},this.makeHtml=function(te){if(!te)return te;var Ie={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:O,outputModifiers:q,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return te=(te=(te=(te=(te=te.replace(/\xa8/g,"\xa8T")).replace(/\$/g,"\xa8D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),M.smartIndentationFix&&(te=function Ne(te){var Ie=te.match(/^\s*/)[0].length,dt=new RegExp("^\\s{0,"+Ie+"}","gm");return te.replace(dt,"")}(te)),te="\n\n"+te+"\n\n",te=(te=P.subParser("detab")(te,M,Ie)).replace(/^[ \t]+$/gm,""),P.helper.forEach(O,function(dt){te=P.subParser("runExtension")(dt,te,M,Ie)}),te=P.subParser("metadata")(te,M,Ie),te=P.subParser("hashPreCodeTags")(te,M,Ie),te=P.subParser("githubCodeBlocks")(te,M,Ie),te=P.subParser("hashHTMLBlocks")(te,M,Ie),te=P.subParser("hashCodeTags")(te,M,Ie),te=P.subParser("stripLinkDefinitions")(te,M,Ie),te=P.subParser("blockGamut")(te,M,Ie),te=P.subParser("unhashHTMLSpans")(te,M,Ie),te=(te=(te=P.subParser("unescapeSpecialChars")(te,M,Ie)).replace(/\xa8D/g,"$$")).replace(/\xa8T/g,"\xa8"),te=P.subParser("completeHTMLDocument")(te,M,Ie),P.helper.forEach(q,function(dt){te=P.subParser("runExtension")(dt,te,M,Ie)}),ee=Ie.metadata,te},this.makeMarkdown=this.makeMd=function(te,Ie){if(te=(te=(te=te.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">\xa8NBSP;<"),!Ie){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");Ie=window.document}var dt=Ie.createElement("div");dt.innerHTML=te;var mt={preList:function Mr(li){for(var Yn=li.querySelectorAll("pre"),_i=[],Ki=0;Ki<Yn.length;++Ki)if(1===Yn[Ki].childElementCount&&"code"===Yn[Ki].firstChild.tagName.toLowerCase()){var da=Yn[Ki].firstChild.innerHTML.trim(),uc=Yn[Ki].firstChild.getAttribute("data-language")||"";if(""===uc)for(var xt=Yn[Ki].firstChild.className.split(" "),il=0;il<xt.length;++il){var Kd=xt[il].match(/^language-(.+)$/);if(null!==Kd){uc=Kd[1];break}}da=P.helper.unescapeHTMLEntities(da),_i.push(da),Yn[Ki].outerHTML='<precode language="'+uc+'" precodenum="'+Ki.toString()+'"></precode>'}else _i.push(Yn[Ki].innerHTML),Yn[Ki].innerHTML="",Yn[Ki].setAttribute("prenum",Ki.toString());return _i}(dt)};!function Yi(li){for(var Yn=0;Yn<li.childNodes.length;++Yn){var _i=li.childNodes[Yn];3===_i.nodeType?/\S/.test(_i.nodeValue)||/^[ ]+$/.test(_i.nodeValue)?(_i.nodeValue=_i.nodeValue.split("\n").join(" "),_i.nodeValue=_i.nodeValue.replace(/(\s)+/g,"$1")):(li.removeChild(_i),--Yn):1===_i.nodeType&&Yi(_i)}}(dt);for(var Gt=dt.childNodes,bt="",ti=0;ti<Gt.length;ti++)bt+=P.subParser("makeMarkdown.node")(Gt[ti],mt);return bt},this.setOption=function(te,Ie){M[te]=Ie},this.getOption=function(te){return M[te]},this.getOptions=function(){return M},this.addExtension=function(te,Ie){Ye(te,Ie=Ie||null)},this.useExtension=function(te){Ye(te)},this.setFlavor=function(te){if(!ft.hasOwnProperty(te))throw Error(te+" flavor was not found");var Ie=ft[te];for(var dt in ae=te,Ie)Ie.hasOwnProperty(dt)&&(M[dt]=Ie[dt])},this.getFlavor=function(){return ae},this.removeExtension=function(te){P.helper.isArray(te)||(te=[te]);for(var Ie=0;Ie<te.length;++Ie){for(var dt=te[Ie],mt=0;mt<O.length;++mt)O[mt]===dt&&O.splice(mt,1);for(var Gt=0;Gt<q.length;++Gt)q[Gt]===dt&&q.splice(Gt,1)}},this.getAllExtensions=function(){return{language:O,output:q}},this.getMetadata=function(te){return te?ee.raw:ee.parsed},this.getMetadataFormat=function(){return ee.format},this._setMetadataPair=function(te,Ie){ee.parsed[te]=Ie},this._setMetadataFormat=function(te){ee.format=te},this._setMetadataRaw=function(te){ee.raw=te}},P.subParser("anchors",function(w,M,O){"use strict";var q=function(re,ae,ee,me,Ye,He,Be){if(P.helper.isUndefined(Be)&&(Be=""),ee=ee.toLowerCase(),re.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)me="";else if(!me){if(ee||(ee=ae.toLowerCase().replace(/ ?\n/g," ")),me="#"+ee,P.helper.isUndefined(O.gUrls[ee]))return re;me=O.gUrls[ee],P.helper.isUndefined(O.gTitles[ee])||(Be=O.gTitles[ee])}var Ne='<a href="'+(me=me.replace(P.helper.regexes.asteriskDashAndColon,P.helper.escapeCharactersCallback))+'"';return""!==Be&&null!==Be&&(Ne+=' title="'+(Be=(Be=Be.replace(/"/g,"&quot;")).replace(P.helper.regexes.asteriskDashAndColon,P.helper.escapeCharactersCallback))+'"'),M.openLinksInNewWindow&&!/^#/.test(me)&&(Ne+=' rel="noopener noreferrer" target="\xa8E95Eblank"'),Ne+">"+ae+"</a>"};return w=(w=(w=(w=(w=O.converter._dispatch("anchors.before",w,M,O)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,q)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,q)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,q)).replace(/\[([^\[\]]+)]()()()()()/g,q),M.ghMentions&&(w=w.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,function(re,ae,ee,me,Ye){if("\\"===ee)return ae+me;if(!P.helper.isString(M.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var He=M.ghMentionsLink.replace(/\{u}/g,Ye),Be="";return M.openLinksInNewWindow&&(Be=' rel="noopener noreferrer" target="\xa8E95Eblank"'),ae+'<a href="'+He+'"'+Be+">"+me+"</a>"})),O.converter._dispatch("anchors.after",w,M,O)});var Lt=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,An=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,Ui=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,Bt=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,ca=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,Rn=function(w){"use strict";return function(M,O,q,re,ae,ee,me){var Ye=q=q.replace(P.helper.regexes.asteriskDashAndColon,P.helper.escapeCharactersCallback),He="",Be="",Ne=O||"",te=me||"";return/^www\./i.test(q)&&(q=q.replace(/^www\./i,"http://www.")),w.excludeTrailingPunctuationFromURLs&&ee&&(He=ee),w.openLinksInNewWindow&&(Be=' rel="noopener noreferrer" target="\xa8E95Eblank"'),Ne+'<a href="'+q+'"'+Be+">"+Ye+"</a>"+He+te}},So=function(w,M){"use strict";return function(O,q,re){var ae="mailto:";return q=q||"",re=P.subParser("unescapeSpecialChars")(re,w,M),w.encodeEmails?(ae=P.helper.encodeEmailAddress(ae+re),re=P.helper.encodeEmailAddress(re)):ae+=re,q+'<a href="'+ae+'">'+re+"</a>"}};P.subParser("autoLinks",function(w,M,O){"use strict";return w=(w=(w=O.converter._dispatch("autoLinks.before",w,M,O)).replace(Ui,Rn(M))).replace(ca,So(M,O)),O.converter._dispatch("autoLinks.after",w,M,O)}),P.subParser("simplifiedAutoLinks",function(w,M,O){"use strict";return M.simplifiedAutoLink&&(w=(w=(w=O.converter._dispatch("simplifiedAutoLinks.before",w,M,O)).replace(M.excludeTrailingPunctuationFromURLs?An:Lt,Rn(M))).replace(Bt,So(M,O)),w=O.converter._dispatch("simplifiedAutoLinks.after",w,M,O)),w}),P.subParser("blockGamut",function(w,M,O){"use strict";return w=O.converter._dispatch("blockGamut.before",w,M,O),w=P.subParser("blockQuotes")(w,M,O),w=P.subParser("headers")(w,M,O),w=P.subParser("horizontalRule")(w,M,O),w=P.subParser("lists")(w,M,O),w=P.subParser("codeBlocks")(w,M,O),w=P.subParser("tables")(w,M,O),w=P.subParser("hashHTMLBlocks")(w,M,O),w=P.subParser("paragraphs")(w,M,O),O.converter._dispatch("blockGamut.after",w,M,O)}),P.subParser("blockQuotes",function(w,M,O){"use strict";w=O.converter._dispatch("blockQuotes.before",w,M,O);var q=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return M.splitAdjacentBlockquotes&&(q=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),w=(w+="\n\n").replace(q,function(re){return re=(re=(re=re.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/\xa80/g,"")).replace(/^[ \t]+$/gm,""),re=P.subParser("githubCodeBlocks")(re,M,O),re=(re=(re=P.subParser("blockGamut")(re,M,O)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(ae,ee){var me=ee;return(me=me.replace(/^  /gm,"\xa80")).replace(/\xa80/g,"")}),P.subParser("hashBlock")("<blockquote>\n"+re+"\n</blockquote>",M,O)}),O.converter._dispatch("blockQuotes.after",w,M,O)}),P.subParser("codeBlocks",function(w,M,O){"use strict";return w=O.converter._dispatch("codeBlocks.before",w,M,O),w=(w=(w+="\xa80").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=\xa80))/g,function(re,ae,ee){var me=ae,Ye=ee,He="\n";return me=P.subParser("outdent")(me,M,O),me=P.subParser("encodeCode")(me,M,O),me=(me=(me=P.subParser("detab")(me,M,O)).replace(/^\n+/g,"")).replace(/\n+$/g,""),M.omitExtraWLInCodeBlocks&&(He=""),me="<pre><code>"+me+He+"</code></pre>",P.subParser("hashBlock")(me,M,O)+Ye})).replace(/\xa80/,""),O.converter._dispatch("codeBlocks.after",w,M,O)}),P.subParser("codeSpans",function(w,M,O){"use strict";return typeof(w=O.converter._dispatch("codeSpans.before",w,M,O))>"u"&&(w=""),w=w.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(q,re,ae,ee){var me=ee;return me=(me=me.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),me=re+"<code>"+(me=P.subParser("encodeCode")(me,M,O))+"</code>",P.subParser("hashHTMLSpans")(me,M,O)}),O.converter._dispatch("codeSpans.after",w,M,O)}),P.subParser("completeHTMLDocument",function(w,M,O){"use strict";if(!M.completeHTMLDocument)return w;w=O.converter._dispatch("completeHTMLDocument.before",w,M,O);var q="html",re="<!DOCTYPE HTML>\n",ae="",ee='<meta charset="utf-8">\n',me="",Ye="";for(var He in typeof O.metadata.parsed.doctype<"u"&&(re="<!DOCTYPE "+O.metadata.parsed.doctype+">\n",("html"===(q=O.metadata.parsed.doctype.toString().toLowerCase())||"html5"===q)&&(ee='<meta charset="utf-8">')),O.metadata.parsed)if(O.metadata.parsed.hasOwnProperty(He))switch(He.toLowerCase()){case"doctype":break;case"title":ae="<title>"+O.metadata.parsed.title+"</title>\n";break;case"charset":ee="html"===q||"html5"===q?'<meta charset="'+O.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+O.metadata.parsed.charset+'">\n';break;case"language":case"lang":me=' lang="'+O.metadata.parsed[He]+'"',Ye+='<meta name="'+He+'" content="'+O.metadata.parsed[He]+'">\n';break;default:Ye+='<meta name="'+He+'" content="'+O.metadata.parsed[He]+'">\n'}return w=re+"<html"+me+">\n<head>\n"+ae+ee+Ye+"</head>\n<body>\n"+w.trim()+"\n</body>\n</html>",O.converter._dispatch("completeHTMLDocument.after",w,M,O)}),P.subParser("detab",function(w,M,O){"use strict";return w=(w=(w=(w=(w=(w=O.converter._dispatch("detab.before",w,M,O)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"\xa8A\xa8B")).replace(/\xa8B(.+?)\xa8A/g,function(q,re){for(var ae=re,ee=4-ae.length%4,me=0;me<ee;me++)ae+=" ";return ae})).replace(/\xa8A/g,"    ")).replace(/\xa8B/g,""),O.converter._dispatch("detab.after",w,M,O)}),P.subParser("ellipsis",function(w,M,O){"use strict";return M.ellipsis&&(w=(w=O.converter._dispatch("ellipsis.before",w,M,O)).replace(/\.\.\./g,"\u2026"),w=O.converter._dispatch("ellipsis.after",w,M,O)),w}),P.subParser("emoji",function(w,M,O){"use strict";return M.emoji?(w=(w=O.converter._dispatch("emoji.before",w,M,O)).replace(/:([\S]+?):/g,function(re,ae){return P.helper.emojis.hasOwnProperty(ae)?P.helper.emojis[ae]:re}),O.converter._dispatch("emoji.after",w,M,O)):w}),P.subParser("encodeAmpsAndAngles",function(w,M,O){"use strict";return w=(w=(w=(w=(w=O.converter._dispatch("encodeAmpsAndAngles.before",w,M,O)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),O.converter._dispatch("encodeAmpsAndAngles.after",w,M,O)}),P.subParser("encodeBackslashEscapes",function(w,M,O){"use strict";return w=(w=(w=O.converter._dispatch("encodeBackslashEscapes.before",w,M,O)).replace(/\\(\\)/g,P.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,P.helper.escapeCharactersCallback),O.converter._dispatch("encodeBackslashEscapes.after",w,M,O)}),P.subParser("encodeCode",function(w,M,O){"use strict";return w=(w=O.converter._dispatch("encodeCode.before",w,M,O)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,P.helper.escapeCharactersCallback),O.converter._dispatch("encodeCode.after",w,M,O)}),P.subParser("escapeSpecialCharsWithinTagAttributes",function(w,M,O){"use strict";return w=(w=(w=O.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",w,M,O)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,function(ae){return ae.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,P.helper.escapeCharactersCallback)})).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,function(ae){return ae.replace(/([\\`*_~=|])/g,P.helper.escapeCharactersCallback)}),O.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",w,M,O)}),P.subParser("githubCodeBlocks",function(w,M,O){"use strict";return M.ghCodeBlocks?(w=O.converter._dispatch("githubCodeBlocks.before",w,M,O),w=(w=(w+="\xa80").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(q,re,ae,ee){var me=M.omitExtraWLInCodeBlocks?"":"\n";return ee=P.subParser("encodeCode")(ee,M,O),ee="<pre><code"+(ae?' class="'+ae+" language-"+ae+'"':"")+">"+(ee=(ee=(ee=P.subParser("detab")(ee,M,O)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+me+"</code></pre>",ee=P.subParser("hashBlock")(ee,M,O),"\n\n\xa8G"+(O.ghCodeBlocks.push({text:q,codeblock:ee})-1)+"G\n\n"})).replace(/\xa80/,""),O.converter._dispatch("githubCodeBlocks.after",w,M,O)):w}),P.subParser("hashBlock",function(w,M,O){"use strict";return w=(w=O.converter._dispatch("hashBlock.before",w,M,O)).replace(/(^\n+|\n+$)/g,""),w="\n\n\xa8K"+(O.gHtmlBlocks.push(w)-1)+"K\n\n",O.converter._dispatch("hashBlock.after",w,M,O)}),P.subParser("hashCodeTags",function(w,M,O){"use strict";return w=O.converter._dispatch("hashCodeTags.before",w,M,O),w=P.helper.replaceRecursiveRegExp(w,function(re,ae,ee,me){var Ye=ee+P.subParser("encodeCode")(ae,M,O)+me;return"\xa8C"+(O.gHtmlSpans.push(Ye)-1)+"C"},"<code\\b[^>]*>","</code>","gim"),O.converter._dispatch("hashCodeTags.after",w,M,O)}),P.subParser("hashElement",function(w,M,O){"use strict";return function(q,re){var ae=re;return ae=(ae=(ae=ae.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),"\n\n\xa8K"+(O.gHtmlBlocks.push(ae)-1)+"K\n\n"}}),P.subParser("hashHTMLBlocks",function(w,M,O){"use strict";w=O.converter._dispatch("hashHTMLBlocks.before",w,M,O);var q=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],re=function(te,Ie,dt,mt){var Gt=te;return-1!==dt.search(/\bmarkdown\b/)&&(Gt=dt+O.converter.makeHtml(Ie)+mt),"\n\n\xa8K"+(O.gHtmlBlocks.push(Gt)-1)+"K\n\n"};M.backslashEscapesHTMLTags&&(w=w.replace(/\\<(\/?[^>]+?)>/g,function(te,Ie){return"&lt;"+Ie+"&gt;"}));for(var ae=0;ae<q.length;++ae)for(var ee,me=new RegExp("^ {0,3}(<"+q[ae]+"\\b[^>]*>)","im"),Ye="<"+q[ae]+"\\b[^>]*>",He="</"+q[ae]+">";-1!==(ee=P.helper.regexIndexOf(w,me));){var Be=P.helper.splitAtIndex(w,ee),Ne=P.helper.replaceRecursiveRegExp(Be[1],re,Ye,He,"im");if(Ne===Be[1])break;w=Be[0].concat(Ne)}return w=w.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,P.subParser("hashElement")(w,M,O)),w=(w=P.helper.replaceRecursiveRegExp(w,function(te){return"\n\n\xa8K"+(O.gHtmlBlocks.push(te)-1)+"K\n\n"},"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,P.subParser("hashElement")(w,M,O)),O.converter._dispatch("hashHTMLBlocks.after",w,M,O)}),P.subParser("hashHTMLSpans",function(w,M,O){"use strict";function q(re){return"\xa8C"+(O.gHtmlSpans.push(re)-1)+"C"}return w=(w=(w=(w=(w=O.converter._dispatch("hashHTMLSpans.before",w,M,O)).replace(/<[^>]+?\/>/gi,function(re){return q(re)})).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(re){return q(re)})).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(re){return q(re)})).replace(/<[^>]+?>/gi,function(re){return q(re)}),O.converter._dispatch("hashHTMLSpans.after",w,M,O)}),P.subParser("unhashHTMLSpans",function(w,M,O){"use strict";w=O.converter._dispatch("unhashHTMLSpans.before",w,M,O);for(var q=0;q<O.gHtmlSpans.length;++q){for(var re=O.gHtmlSpans[q],ae=0;/\xa8C(\d+)C/.test(re);){var ee=RegExp.$1;if(re=re.replace("\xa8C"+ee+"C",O.gHtmlSpans[ee]),10===ae){console.error("maximum nesting of 10 spans reached!!!");break}++ae}w=w.replace("\xa8C"+q+"C",re)}return O.converter._dispatch("unhashHTMLSpans.after",w,M,O)}),P.subParser("hashPreCodeTags",function(w,M,O){"use strict";return w=O.converter._dispatch("hashPreCodeTags.before",w,M,O),w=P.helper.replaceRecursiveRegExp(w,function(re,ae,ee,me){var Ye=ee+P.subParser("encodeCode")(ae,M,O)+me;return"\n\n\xa8G"+(O.ghCodeBlocks.push({text:re,codeblock:Ye})-1)+"G\n\n"},"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),O.converter._dispatch("hashPreCodeTags.after",w,M,O)}),P.subParser("headers",function(w,M,O){"use strict";w=O.converter._dispatch("headers.before",w,M,O);var q=isNaN(parseInt(M.headerLevelStart))?1:parseInt(M.headerLevelStart),ae=M.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;function me(Ye){var He,Be;if(M.customizedHeaderId){var Ne=Ye.match(/\{([^{]+?)}\s*$/);Ne&&Ne[1]&&(Ye=Ne[1])}return He=Ye,Be=P.helper.isString(M.prefixHeaderId)?M.prefixHeaderId:!0===M.prefixHeaderId?"section-":"",M.rawPrefixHeaderId||(He=Be+He),He=M.ghCompatibleHeaderId?He.replace(/ /g,"-").replace(/&amp;/g,"").replace(/\xa8T/g,"").replace(/\xa8D/g,"").replace(/[&+$,\/:;=?@"#{}|^\xa8~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():M.rawHeaderId?He.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/\xa8T/g,"\xa8").replace(/\xa8D/g,"$").replace(/["']/g,"-").toLowerCase():He.replace(/[^\w]/g,"").toLowerCase(),M.rawPrefixHeaderId&&(He=Be+He),O.hashLinkCounts[He]?He=He+"-"+O.hashLinkCounts[He]++:O.hashLinkCounts[He]=1,He}return w=(w=(w=w.replace(M.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(Ye,He){var Be=P.subParser("spanGamut")(He,M,O),Ne=M.noHeaderId?"":' id="'+me(He)+'"',Ie="<h"+q+Ne+">"+Be+"</h"+q+">";return P.subParser("hashBlock")(Ie,M,O)})).replace(ae,function(Ye,He){var Be=P.subParser("spanGamut")(He,M,O),Ne=M.noHeaderId?"":' id="'+me(He)+'"',te=q+1,Ie="<h"+te+Ne+">"+Be+"</h"+te+">";return P.subParser("hashBlock")(Ie,M,O)})).replace(M.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,function(Ye,He,Be){var Ne=Be;M.customizedHeaderId&&(Ne=Be.replace(/\s?\{([^{]+?)}\s*$/,""));var te=P.subParser("spanGamut")(Ne,M,O),Ie=M.noHeaderId?"":' id="'+me(Be)+'"',dt=q-1+He.length,mt="<h"+dt+Ie+">"+te+"</h"+dt+">";return P.subParser("hashBlock")(mt,M,O)}),O.converter._dispatch("headers.after",w,M,O)}),P.subParser("horizontalRule",function(w,M,O){"use strict";w=O.converter._dispatch("horizontalRule.before",w,M,O);var q=P.subParser("hashBlock")("<hr />",M,O);return w=(w=(w=w.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,q)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,q)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,q),O.converter._dispatch("horizontalRule.after",w,M,O)}),P.subParser("images",function(w,M,O){"use strict";function He(Be,Ne,te,Ie,dt,mt,Gt,bt){var ti=O.gUrls,Yi=O.gTitles,Mr=O.gDimensions;if(te=te.toLowerCase(),bt||(bt=""),Be.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)Ie="";else if(""===Ie||null===Ie){if((""===te||null===te)&&(te=Ne.toLowerCase().replace(/ ?\n/g," ")),Ie="#"+te,P.helper.isUndefined(ti[te]))return Be;Ie=ti[te],P.helper.isUndefined(Yi[te])||(bt=Yi[te]),P.helper.isUndefined(Mr[te])||(dt=Mr[te].width,mt=Mr[te].height)}Ne=Ne.replace(/"/g,"&quot;").replace(P.helper.regexes.asteriskDashAndColon,P.helper.escapeCharactersCallback);var li='<img src="'+(Ie=Ie.replace(P.helper.regexes.asteriskDashAndColon,P.helper.escapeCharactersCallback))+'" alt="'+Ne+'"';return bt&&P.helper.isString(bt)&&(li+=' title="'+(bt=bt.replace(/"/g,"&quot;").replace(P.helper.regexes.asteriskDashAndColon,P.helper.escapeCharactersCallback))+'"'),dt&&mt&&(li+=' width="'+(dt="*"===dt?"auto":dt)+'"',li+=' height="'+(mt="*"===mt?"auto":mt)+'"'),li+" />"}return w=(w=(w=(w=(w=(w=O.converter._dispatch("images.before",w,M,O)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,He)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,function Ye(Be,Ne,te,Ie,dt,mt,Gt,bt){return He(Be,Ne,te,Ie=Ie.replace(/\s/g,""),dt,mt,0,bt)})).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,He)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,He)).replace(/!\[([^\[\]]+)]()()()()()/g,He),O.converter._dispatch("images.after",w,M,O)}),P.subParser("italicsAndBold",function(w,M,O){"use strict";function q(re,ae,ee){return ae+re+ee}return w=O.converter._dispatch("italicsAndBold.before",w,M,O),w=M.literalMidWordUnderscores?(w=(w=w.replace(/\b___(\S[\s\S]*?)___\b/g,function(re,ae){return q(ae,"<strong><em>","</em></strong>")})).replace(/\b__(\S[\s\S]*?)__\b/g,function(re,ae){return q(ae,"<strong>","</strong>")})).replace(/\b_(\S[\s\S]*?)_\b/g,function(re,ae){return q(ae,"<em>","</em>")}):(w=(w=w.replace(/___(\S[\s\S]*?)___/g,function(re,ae){return/\S$/.test(ae)?q(ae,"<strong><em>","</em></strong>"):re})).replace(/__(\S[\s\S]*?)__/g,function(re,ae){return/\S$/.test(ae)?q(ae,"<strong>","</strong>"):re})).replace(/_([^\s_][\s\S]*?)_/g,function(re,ae){return/\S$/.test(ae)?q(ae,"<em>","</em>"):re}),w=M.literalMidWordAsterisks?(w=(w=w.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(re,ae,ee){return q(ee,ae+"<strong><em>","</em></strong>")})).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(re,ae,ee){return q(ee,ae+"<strong>","</strong>")})).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(re,ae,ee){return q(ee,ae+"<em>","</em>")}):(w=(w=w.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(re,ae){return/\S$/.test(ae)?q(ae,"<strong><em>","</em></strong>"):re})).replace(/\*\*(\S[\s\S]*?)\*\*/g,function(re,ae){return/\S$/.test(ae)?q(ae,"<strong>","</strong>"):re})).replace(/\*([^\s*][\s\S]*?)\*/g,function(re,ae){return/\S$/.test(ae)?q(ae,"<em>","</em>"):re}),O.converter._dispatch("italicsAndBold.after",w,M,O)}),P.subParser("lists",function(w,M,O){"use strict";function q(ee,me){O.gListLevel++,ee=ee.replace(/\n{2,}$/,"\n");var Ye=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(\xa80| {0,3}([*+-]|\d+[.])[ \t]+))/gm,He=/\n[ \t]*\n(?!\xa80)/.test(ee+="\xa80");return M.disableForced4SpacesIndentedSublists&&(Ye=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(\xa80|\2([*+-]|\d+[.])[ \t]+))/gm),ee=(ee=ee.replace(Ye,function(Be,Ne,te,Ie,dt,mt,Gt){Gt=Gt&&""!==Gt.trim();var bt=P.subParser("outdent")(dt,M,O),ti="";return mt&&M.tasklists&&(ti=' class="task-list-item" style="list-style-type: none;"',bt=bt.replace(/^[ \t]*\[(x|X| )?]/m,function(){var Yi='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return Gt&&(Yi+=" checked"),Yi+">"})),bt=bt.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(Yi){return"\xa8A"+Yi}),Ne||bt.search(/\n{2,}/)>-1?(bt=P.subParser("githubCodeBlocks")(bt,M,O),bt=P.subParser("blockGamut")(bt,M,O)):(bt=(bt=P.subParser("lists")(bt,M,O)).replace(/\n$/,""),bt=(bt=P.subParser("hashHTMLBlocks")(bt,M,O)).replace(/\n\n+/g,"\n\n"),bt=He?P.subParser("paragraphs")(bt,M,O):P.subParser("spanGamut")(bt,M,O)),"<li"+ti+">"+(bt=bt.replace("\xa8A",""))+"</li>\n"})).replace(/\xa80/g,""),O.gListLevel--,me&&(ee=ee.replace(/\s+$/,"")),ee}function re(ee,me){if("ol"===me){var Ye=ee.match(/^ *(\d+)\./);if(Ye&&"1"!==Ye[1])return' start="'+Ye[1]+'"'}return""}function ae(ee,me,Ye){var He=M.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,Be=M.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,Ne="ul"===me?He:Be,te="";if(-1!==ee.search(Ne))!function dt(mt){var Gt=mt.search(Ne),bt=re(ee,me);-1!==Gt?(te+="\n\n<"+me+bt+">\n"+q(mt.slice(0,Gt),!!Ye)+"</"+me+">\n",Ne="ul"==(me="ul"===me?"ol":"ul")?He:Be,dt(mt.slice(Gt))):te+="\n\n<"+me+bt+">\n"+q(mt,!!Ye)+"</"+me+">\n"}(ee);else{var Ie=re(ee,me);te="\n\n<"+me+Ie+">\n"+q(ee,!!Ye)+"</"+me+">\n"}return te}return w=O.converter._dispatch("lists.before",w,M,O),w+="\xa80",w=(w=O.gListLevel?w.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(\xa80|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(ee,me,Ye){return ae(me,Ye.search(/[*+-]/g)>-1?"ul":"ol",!0)}):w.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(\xa80|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(ee,me,Ye,He){return ae(Ye,He.search(/[*+-]/g)>-1?"ul":"ol",!1)})).replace(/\xa80/,""),O.converter._dispatch("lists.after",w,M,O)}),P.subParser("metadata",function(w,M,O){"use strict";if(!M.metadata)return w;function q(re){O.metadata.raw=re,(re=(re=re.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,function(ae,ee,me){return O.metadata.parsed[ee]=me,""})}return w=(w=(w=(w=O.converter._dispatch("metadata.before",w,M,O)).replace(/^\s*\xab\xab\xab+(\S*?)\n([\s\S]+?)\n\xbb\xbb\xbb+\n/,function(re,ae,ee){return q(ee),"\xa8M"})).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(re,ae,ee){return ae&&(O.metadata.format=ae),q(ee),"\xa8M"})).replace(/\xa8M/g,""),O.converter._dispatch("metadata.after",w,M,O)}),P.subParser("outdent",function(w,M,O){"use strict";return w=(w=(w=O.converter._dispatch("outdent.before",w,M,O)).replace(/^(\t|[ ]{1,4})/gm,"\xa80")).replace(/\xa80/g,""),O.converter._dispatch("outdent.after",w,M,O)}),P.subParser("paragraphs",function(w,M,O){"use strict";for(var q=(w=(w=(w=O.converter._dispatch("paragraphs.before",w,M,O)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),re=[],ae=q.length,ee=0;ee<ae;ee++){var me=q[ee];me.search(/\xa8(K|G)(\d+)\1/g)>=0?re.push(me):me.search(/\S/)>=0&&(me=(me=P.subParser("spanGamut")(me,M,O)).replace(/^([ \t]*)/g,"<p>"),re.push(me+="</p>"))}for(ae=re.length,ee=0;ee<ae;ee++){for(var Ye="",He=re[ee],Be=!1;/\xa8(K|G)(\d+)\1/.test(He);){var Ne=RegExp.$1,te=RegExp.$2;Ye=(Ye="K"===Ne?O.gHtmlBlocks[te]:Be?P.subParser("encodeCode")(O.ghCodeBlocks[te].text,M,O):O.ghCodeBlocks[te].codeblock).replace(/\$/g,"$$$$"),He=He.replace(/(\n\n)?\xa8(K|G)\d+\2(\n\n)?/,Ye),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(He)&&(Be=!0)}re[ee]=He}return w=(w=(w=re.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),O.converter._dispatch("paragraphs.after",w,M,O)}),P.subParser("runExtension",function(w,M,O,q){"use strict";if(w.filter)M=w.filter(M,q.converter,O);else if(w.regex){var re=w.regex;re instanceof RegExp||(re=new RegExp(re,"g")),M=M.replace(re,w.replace)}return M}),P.subParser("spanGamut",function(w,M,O){"use strict";return w=O.converter._dispatch("spanGamut.before",w,M,O),w=P.subParser("codeSpans")(w,M,O),w=P.subParser("escapeSpecialCharsWithinTagAttributes")(w,M,O),w=P.subParser("encodeBackslashEscapes")(w,M,O),w=P.subParser("images")(w,M,O),w=P.subParser("anchors")(w,M,O),w=P.subParser("autoLinks")(w,M,O),w=P.subParser("simplifiedAutoLinks")(w,M,O),w=P.subParser("emoji")(w,M,O),w=P.subParser("underline")(w,M,O),w=P.subParser("italicsAndBold")(w,M,O),w=P.subParser("strikethrough")(w,M,O),w=P.subParser("ellipsis")(w,M,O),w=P.subParser("hashHTMLSpans")(w,M,O),w=P.subParser("encodeAmpsAndAngles")(w,M,O),M.simpleLineBreaks?/\n\n\xa8K/.test(w)||(w=w.replace(/\n+/g,"<br />\n")):w=w.replace(/  +\n/g,"<br />\n"),O.converter._dispatch("spanGamut.after",w,M,O)}),P.subParser("strikethrough",function(w,M,O){"use strict";return M.strikethrough&&(w=(w=O.converter._dispatch("strikethrough.before",w,M,O)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(re,ae){return function q(re){return M.simplifiedAutoLink&&(re=P.subParser("simplifiedAutoLinks")(re,M,O)),"<del>"+re+"</del>"}(ae)}),w=O.converter._dispatch("strikethrough.after",w,M,O)),w}),P.subParser("stripLinkDefinitions",function(w,M,O){"use strict";var ae=function(ee,me,Ye,He,Be,Ne,te){return me=me.toLowerCase(),w.toLowerCase().split(me).length-1<2?ee:(O.gUrls[me]=Ye.match(/^data:.+?\/.+?;base64,/)?Ye.replace(/\s/g,""):P.subParser("encodeAmpsAndAngles")(Ye,M,O),Ne?Ne+te:(te&&(O.gTitles[me]=te.replace(/"|'/g,"&quot;")),M.parseImgDimensions&&He&&Be&&(O.gDimensions[me]={width:He,height:Be}),""))};return w=(w=(w=(w+="\xa80").replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=\xa80)|(?=\n\[))/gm,ae)).replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=\xa80))/gm,ae)).replace(/\xa80/,"")}),P.subParser("tables",function(w,M,O){"use strict";if(!M.tables)return w;function ae(Be){return/^:[ \t]*--*$/.test(Be)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(Be)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(Be)?' style="text-align:center;"':""}function ee(Be,Ne){var te="";return Be=Be.trim(),(M.tablesHeaderId||M.tableHeaderId)&&(te=' id="'+Be.replace(/ /g,"_").toLowerCase()+'"'),"<th"+te+Ne+">"+(Be=P.subParser("spanGamut")(Be,M,O))+"</th>\n"}function me(Be,Ne){return"<td"+Ne+">"+P.subParser("spanGamut")(Be,M,O)+"</td>\n"}function He(Be){var Ne,te=Be.split("\n");for(Ne=0;Ne<te.length;++Ne)/^ {0,3}\|/.test(te[Ne])&&(te[Ne]=te[Ne].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(te[Ne])&&(te[Ne]=te[Ne].replace(/\|[ \t]*$/,"")),te[Ne]=P.subParser("codeSpans")(te[Ne],M,O);var Ie=te[0].split("|").map(function(li){return li.trim()}),dt=te[1].split("|").map(function(li){return li.trim()}),mt=[],Gt=[],bt=[],ti=[];for(te.shift(),te.shift(),Ne=0;Ne<te.length;++Ne)""!==te[Ne].trim()&&mt.push(te[Ne].split("|").map(function(li){return li.trim()}));if(Ie.length<dt.length)return Be;for(Ne=0;Ne<dt.length;++Ne)bt.push(ae(dt[Ne]));for(Ne=0;Ne<Ie.length;++Ne)P.helper.isUndefined(bt[Ne])&&(bt[Ne]=""),Gt.push(ee(Ie[Ne],bt[Ne]));for(Ne=0;Ne<mt.length;++Ne){for(var Yi=[],Mr=0;Mr<Gt.length;++Mr)P.helper.isUndefined(mt[Ne][Mr]),Yi.push(me(mt[Ne][Mr],bt[Mr]));ti.push(Yi)}return function Ye(Be,Ne){for(var te="<table>\n<thead>\n<tr>\n",Ie=Be.length,dt=0;dt<Ie;++dt)te+=Be[dt];for(te+="</tr>\n</thead>\n<tbody>\n",dt=0;dt<Ne.length;++dt){te+="<tr>\n";for(var mt=0;mt<Ie;++mt)te+=Ne[dt][mt];te+="</tr>\n"}return te+"</tbody>\n</table>\n"}(Gt,ti)}return w=(w=(w=(w=O.converter._dispatch("tables.before",w,M,O)).replace(/\\(\|)/g,P.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|\xa80)/gm,He)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|\xa80)/gm,He),O.converter._dispatch("tables.after",w,M,O)}),P.subParser("underline",function(w,M,O){"use strict";return M.underline&&(w=O.converter._dispatch("underline.before",w,M,O),w=(w=M.literalMidWordUnderscores?(w=w.replace(/\b___(\S[\s\S]*?)___\b/g,function(q,re){return"<u>"+re+"</u>"})).replace(/\b__(\S[\s\S]*?)__\b/g,function(q,re){return"<u>"+re+"</u>"}):(w=w.replace(/___(\S[\s\S]*?)___/g,function(q,re){return/\S$/.test(re)?"<u>"+re+"</u>":q})).replace(/__(\S[\s\S]*?)__/g,function(q,re){return/\S$/.test(re)?"<u>"+re+"</u>":q})).replace(/(_)/g,P.helper.escapeCharactersCallback),w=O.converter._dispatch("underline.after",w,M,O)),w}),P.subParser("unescapeSpecialChars",function(w,M,O){"use strict";return w=(w=O.converter._dispatch("unescapeSpecialChars.before",w,M,O)).replace(/\xa8E(\d+)E/g,function(q,re){var ae=parseInt(re);return String.fromCharCode(ae)}),O.converter._dispatch("unescapeSpecialChars.after",w,M,O)}),P.subParser("makeMarkdown.blockquote",function(w,M){"use strict";var O="";if(w.hasChildNodes())for(var q=w.childNodes,re=q.length,ae=0;ae<re;++ae){var ee=P.subParser("makeMarkdown.node")(q[ae],M);""!==ee&&(O+=ee)}return"> "+(O=O.trim()).split("\n").join("\n> ")}),P.subParser("makeMarkdown.codeBlock",function(w,M){"use strict";var O=w.getAttribute("language"),q=w.getAttribute("precodenum");return"```"+O+"\n"+M.preList[q]+"\n```"}),P.subParser("makeMarkdown.codeSpan",function(w){"use strict";return"`"+w.innerHTML+"`"}),P.subParser("makeMarkdown.emphasis",function(w,M){"use strict";var O="";if(w.hasChildNodes()){O+="*";for(var q=w.childNodes,re=q.length,ae=0;ae<re;++ae)O+=P.subParser("makeMarkdown.node")(q[ae],M);O+="*"}return O}),P.subParser("makeMarkdown.header",function(w,M,O){"use strict";var q=new Array(O+1).join("#"),re="";if(w.hasChildNodes()){re=q+" ";for(var ae=w.childNodes,ee=ae.length,me=0;me<ee;++me)re+=P.subParser("makeMarkdown.node")(ae[me],M)}return re}),P.subParser("makeMarkdown.hr",function(){"use strict";return"---"}),P.subParser("makeMarkdown.image",function(w){"use strict";var M="";return w.hasAttribute("src")&&(M+="!["+w.getAttribute("alt")+"](",M+="<"+w.getAttribute("src")+">",w.hasAttribute("width")&&w.hasAttribute("height")&&(M+=" ="+w.getAttribute("width")+"x"+w.getAttribute("height")),w.hasAttribute("title")&&(M+=' "'+w.getAttribute("title")+'"'),M+=")"),M}),P.subParser("makeMarkdown.links",function(w,M){"use strict";var O="";if(w.hasChildNodes()&&w.hasAttribute("href")){var q=w.childNodes,re=q.length;O="[";for(var ae=0;ae<re;++ae)O+=P.subParser("makeMarkdown.node")(q[ae],M);O+="](",O+="<"+w.getAttribute("href")+">",w.hasAttribute("title")&&(O+=' "'+w.getAttribute("title")+'"'),O+=")"}return O}),P.subParser("makeMarkdown.list",function(w,M,O){"use strict";var q="";if(!w.hasChildNodes())return"";for(var re=w.childNodes,ae=re.length,ee=w.getAttribute("start")||1,me=0;me<ae;++me)typeof re[me].tagName>"u"||"li"!==re[me].tagName.toLowerCase()||(q+=("ol"===O?ee.toString()+". ":"- ")+P.subParser("makeMarkdown.listItem")(re[me],M),++ee);return(q+="\n\x3c!-- --\x3e\n").trim()}),P.subParser("makeMarkdown.listItem",function(w,M){"use strict";for(var O="",q=w.childNodes,re=q.length,ae=0;ae<re;++ae)O+=P.subParser("makeMarkdown.node")(q[ae],M);return/\n$/.test(O)?O=O.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):O+="\n",O}),P.subParser("makeMarkdown.node",function(w,M,O){"use strict";O=O||!1;var q="";if(3===w.nodeType)return P.subParser("makeMarkdown.txt")(w,M);if(8===w.nodeType)return"\x3c!--"+w.data+"--\x3e\n\n";if(1!==w.nodeType)return"";switch(w.tagName.toLowerCase()){case"h1":O||(q=P.subParser("makeMarkdown.header")(w,M,1)+"\n\n");break;case"h2":O||(q=P.subParser("makeMarkdown.header")(w,M,2)+"\n\n");break;case"h3":O||(q=P.subParser("makeMarkdown.header")(w,M,3)+"\n\n");break;case"h4":O||(q=P.subParser("makeMarkdown.header")(w,M,4)+"\n\n");break;case"h5":O||(q=P.subParser("makeMarkdown.header")(w,M,5)+"\n\n");break;case"h6":O||(q=P.subParser("makeMarkdown.header")(w,M,6)+"\n\n");break;case"p":O||(q=P.subParser("makeMarkdown.paragraph")(w,M)+"\n\n");break;case"blockquote":O||(q=P.subParser("makeMarkdown.blockquote")(w,M)+"\n\n");break;case"hr":O||(q=P.subParser("makeMarkdown.hr")(w,M)+"\n\n");break;case"ol":O||(q=P.subParser("makeMarkdown.list")(w,M,"ol")+"\n\n");break;case"ul":O||(q=P.subParser("makeMarkdown.list")(w,M,"ul")+"\n\n");break;case"precode":O||(q=P.subParser("makeMarkdown.codeBlock")(w,M)+"\n\n");break;case"pre":O||(q=P.subParser("makeMarkdown.pre")(w,M)+"\n\n");break;case"table":O||(q=P.subParser("makeMarkdown.table")(w,M)+"\n\n");break;case"code":q=P.subParser("makeMarkdown.codeSpan")(w,M);break;case"em":case"i":q=P.subParser("makeMarkdown.emphasis")(w,M);break;case"strong":case"b":q=P.subParser("makeMarkdown.strong")(w,M);break;case"del":q=P.subParser("makeMarkdown.strikethrough")(w,M);break;case"a":q=P.subParser("makeMarkdown.links")(w,M);break;case"img":q=P.subParser("makeMarkdown.image")(w,M);break;default:q=w.outerHTML+"\n\n"}return q}),P.subParser("makeMarkdown.paragraph",function(w,M){"use strict";var O="";if(w.hasChildNodes())for(var q=w.childNodes,re=q.length,ae=0;ae<re;++ae)O+=P.subParser("makeMarkdown.node")(q[ae],M);return O.trim()}),P.subParser("makeMarkdown.pre",function(w,M){"use strict";var O=w.getAttribute("prenum");return"<pre>"+M.preList[O]+"</pre>"}),P.subParser("makeMarkdown.strikethrough",function(w,M){"use strict";var O="";if(w.hasChildNodes()){O+="~~";for(var q=w.childNodes,re=q.length,ae=0;ae<re;++ae)O+=P.subParser("makeMarkdown.node")(q[ae],M);O+="~~"}return O}),P.subParser("makeMarkdown.strong",function(w,M){"use strict";var O="";if(w.hasChildNodes()){O+="**";for(var q=w.childNodes,re=q.length,ae=0;ae<re;++ae)O+=P.subParser("makeMarkdown.node")(q[ae],M);O+="**"}return O}),P.subParser("makeMarkdown.table",function(w,M){"use strict";var ee,me,O="",q=[[],[]],re=w.querySelectorAll("thead>tr>th"),ae=w.querySelectorAll("tbody>tr");for(ee=0;ee<re.length;++ee){var Ye=P.subParser("makeMarkdown.tableCell")(re[ee],M),He="---";if(re[ee].hasAttribute("style"))switch(re[ee].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":He=":---";break;case"text-align:right;":He="---:";break;case"text-align:center;":He=":---:"}q[0][ee]=Ye.trim(),q[1][ee]=He}for(ee=0;ee<ae.length;++ee){var Ne=q.push([])-1,te=ae[ee].getElementsByTagName("td");for(me=0;me<re.length;++me){var Ie=" ";typeof te[me]<"u"&&(Ie=P.subParser("makeMarkdown.tableCell")(te[me],M)),q[Ne].push(Ie)}}var dt=3;for(ee=0;ee<q.length;++ee)for(me=0;me<q[ee].length;++me){var mt=q[ee][me].length;mt>dt&&(dt=mt)}for(ee=0;ee<q.length;++ee){for(me=0;me<q[ee].length;++me)q[ee][me]=1===ee?":"===q[ee][me].slice(-1)?P.helper.padEnd(q[ee][me].slice(-1),dt-1,"-")+":":P.helper.padEnd(q[ee][me],dt,"-"):P.helper.padEnd(q[ee][me],dt);O+="| "+q[ee].join(" | ")+" |\n"}return O.trim()}),P.subParser("makeMarkdown.tableCell",function(w,M){"use strict";var O="";if(!w.hasChildNodes())return"";for(var q=w.childNodes,re=q.length,ae=0;ae<re;++ae)O+=P.subParser("makeMarkdown.node")(q[ae],M,!0);return O.trim()}),P.subParser("makeMarkdown.txt",function(w){"use strict";var M=w.nodeValue;return M=(M=M.replace(/ +/g," ")).replace(/\xa8NBSP;/g," "),(M=(M=(M=(M=(M=(M=(M=(M=P.helper.unescapeHTMLEntities(M)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")}),void 0!==(oe=function(){"use strict";return P}.call(Dn,Oe,Dn,Ir))&&(Ir.exports=oe)}).call(this)},574:(Ir,Dn,Oe)=>{"use strict";Oe.d(Dn,{NC:()=>Pw,P6:()=>Cm});var oe_version="0.18.5",ht=1200,X=1252,P=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ze={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Je=function(o){-1!=P.indexOf(o)&&(X=ze[0]=o)},ue=function(o){ht=o,Je(o)};var Bt,An=function(c){return String.fromCharCode(c)},Ui=function(c){return String.fromCharCode(c)},Js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function w(o){for(var c="",l=0,u=0,h=0,m=0,_=0,v=0,x=0,C=0;C<o.length;)m=(l=o.charCodeAt(C++))>>2,_=(3&l)<<4|(u=o.charCodeAt(C++))>>4,v=(15&u)<<2|(h=o.charCodeAt(C++))>>6,x=63&h,isNaN(u)?v=x=64:isNaN(h)&&(x=64),c+=Js.charAt(m)+Js.charAt(_)+Js.charAt(v)+Js.charAt(x);return c}function M(o){var c="",m=0,_=0,v=0,x=0;o=o.replace(/[^\w\+\/\=]/g,"");for(var C=0;C<o.length;)m=Js.indexOf(o.charAt(C++)),_=Js.indexOf(o.charAt(C++)),c+=String.fromCharCode(m<<2|_>>4),64!==(v=Js.indexOf(o.charAt(C++)))&&(c+=String.fromCharCode((15&_)<<4|v>>2)),64!==(x=Js.indexOf(o.charAt(C++)))&&(c+=String.fromCharCode((3&v)<<6|x));return c}var O=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),q=function(){if(typeof Buffer<"u"){var o=!Buffer.from;if(!o)try{Buffer.from("foo","utf8")}catch{o=!0}return o?function(c,l){return l?new Buffer(c,l):new Buffer(c)}:Buffer.from.bind(Buffer)}return function(){}}();function re(o){return O?Buffer.alloc?Buffer.alloc(o):new Buffer(o):typeof Uint8Array<"u"?new Uint8Array(o):new Array(o)}function ae(o){return O?Buffer.allocUnsafe?Buffer.allocUnsafe(o):new Buffer(o):typeof Uint8Array<"u"?new Uint8Array(o):new Array(o)}var ee=function(c){return O?q(c,"binary"):c.split("").map(function(l){return 255&l.charCodeAt(0)})};function me(o){if(typeof ArrayBuffer>"u")return ee(o);for(var c=new ArrayBuffer(o.length),l=new Uint8Array(c),u=0;u!=o.length;++u)l[u]=255&o.charCodeAt(u);return c}function Ye(o){if(Array.isArray(o))return o.map(function(u){return String.fromCharCode(u)}).join("");for(var c=[],l=0;l<o.length;++l)c[l]=String.fromCharCode(o[l]);return c.join("")}var Ne=O?function(o){return Buffer.concat(o.map(function(c){return Buffer.isBuffer(c)?c:q(c)}))}:function(o){if(typeof Uint8Array<"u"){var c=0,l=0;for(c=0;c<o.length;++c)l+=o[c].length;var u=new Uint8Array(l),h=0;for(c=0,l=0;c<o.length;l+=h,++c)if(h=o[c].length,o[c]instanceof Uint8Array)u.set(o[c],l);else{if("string"==typeof o[c])throw"wtf";u.set(new Uint8Array(o[c]),l)}return u}return[].concat.apply([],o.map(function(m){return Array.isArray(m)?m:[].slice.call(m)}))},Ie=/\u0000/g,dt=/[\u0001-\u0006]/g;function mt(o){for(var c="",l=o.length-1;l>=0;)c+=o.charAt(l--);return c}function Gt(o,c){var l=""+o;return l.length>=c?l:$n("0",c-l.length)+l}function bt(o,c){var l=""+o;return l.length>=c?l:$n(" ",c-l.length)+l}function ti(o,c){var l=""+o;return l.length>=c?l:l+$n(" ",c-l.length)}var li=Math.pow(2,32);function Yn(o,c){return o>li||o<-li?function Yi(o,c){var l=""+Math.round(o);return l.length>=c?l:$n("0",c-l.length)+l}(o,c):function Mr(o,c){var l=""+o;return l.length>=c?l:$n("0",c-l.length)+l}(Math.round(o),c)}function _i(o,c){return o.length>=7+(c=c||0)&&103==(32|o.charCodeAt(c))&&101==(32|o.charCodeAt(c+1))&&110==(32|o.charCodeAt(c+2))&&101==(32|o.charCodeAt(c+3))&&114==(32|o.charCodeAt(c+4))&&97==(32|o.charCodeAt(c+5))&&108==(32|o.charCodeAt(c+6))}var Ki=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],da=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]],xt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},il={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Kd={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function $d(o,c,l){for(var u=o<0?-1:1,h=o*u,m=0,_=1,v=0,x=1,C=0,E=0,D=Math.floor(h);C<c&&(v=(D=Math.floor(h))*_+m,E=D*C+x,!(h-D<5e-8));)h=1/(h-D),m=_,_=v,x=C,C=E;if(E>c&&(C>c?(E=x,v=m):(E=C,v=_)),!l)return[0,u*v,E];var A=Math.floor(u*v/E);return[A,u*v-A*E,E]}function Eo(o,c,l){if(o>2958465||o<0)return null;var u=0|o,h=Math.floor(86400*(o-u)),m=0,_=[],v={D:u,T:h,u:86400*(o-u)-h,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(v.u)<1e-6&&(v.u=0),c&&c.date1904&&(u+=1462),v.u>.9999&&(v.u=0,86400==++h&&(v.T=h=0,++u,++v.D)),60===u)_=l?[1317,10,29]:[1900,2,29],m=3;else if(0===u)_=l?[1317,8,29]:[1900,1,0],m=6;else{u>60&&--u;var x=new Date(1900,0,1);x.setDate(x.getDate()+u-1),_=[x.getFullYear(),x.getMonth()+1,x.getDate()],m=x.getDay(),u<60&&(m=(m+6)%7),l&&(m=function jb(o,c){c[0]-=581;var l=o.getDay();return o<60&&(l=(l+6)%7),l}(x,_))}return v.y=_[0],v.m=_[1],v.d=_[2],v.S=h%60,h=Math.floor(h/60),v.M=h%60,h=Math.floor(h/60),v.H=h,v.q=m,v}var rg=new Date(1899,11,31,0,0,0),qb=rg.getTime(),Yb=new Date(1900,2,1,0,0,0);function sg(o,c){var l=o.getTime();return c?l-=1262304e5:o>=Yb&&(l+=864e5),(l-(qb+6e4*(o.getTimezoneOffset()-rg.getTimezoneOffset())))/864e5}function Wh(o){return-1==o.indexOf(".")?o:o.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ua(o,c){switch(typeof o){case"string":return o;case"boolean":return o?"TRUE":"FALSE";case"number":return(0|o)===o?o.toString(10):function hc(o){var l,c=Math.floor(Math.log(Math.abs(o))*Math.LOG10E);return l=c>=-4&&c<=-1?o.toPrecision(10+c):Math.abs(c)<=9?function $b(o){var c=o<0?12:11,l=Wh(o.toFixed(12));return l.length<=c||(l=o.toPrecision(10)).length<=c?l:o.toExponential(5)}(o):10===c?o.toFixed(10).substr(0,12):function Wb(o){var c=Wh(o.toFixed(11));return c.length>(o<0?12:11)||"0"===c||"-0"===c?o.toPrecision(6):c}(o),Wh(function Kb(o){return-1==o.indexOf("E")?o:o.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(l.toUpperCase()))}(o);case"undefined":return"";case"object":if(null==o)return"";if(o instanceof Date)return Sr(14,sg(o,c&&c.date1904),c)}throw new Error("unsupported value in General format: "+o)}function Qb(o,c,l,u){var x,h="",m=0,_=0,v=l.y,C=0;switch(o){case 98:v=l.y+543;case 121:switch(c.length){case 1:case 2:x=v%100,C=2;break;default:x=v%1e4,C=4}break;case 109:switch(c.length){case 1:case 2:x=l.m,C=c.length;break;case 3:return da[l.m-1][1];case 5:return da[l.m-1][0];default:return da[l.m-1][2]}break;case 100:switch(c.length){case 1:case 2:x=l.d,C=c.length;break;case 3:return Ki[l.q][0];default:return Ki[l.q][1]}break;case 104:switch(c.length){case 1:case 2:x=1+(l.H+11)%12,C=c.length;break;default:throw"bad hour format: "+c}break;case 72:switch(c.length){case 1:case 2:x=l.H,C=c.length;break;default:throw"bad hour format: "+c}break;case 77:switch(c.length){case 1:case 2:x=l.M,C=c.length;break;default:throw"bad minute format: "+c}break;case 115:if("s"!=c&&"ss"!=c&&".0"!=c&&".00"!=c&&".000"!=c)throw"bad second format: "+c;return 0!==l.u||"s"!=c&&"ss"!=c?(_=u>=2?3===u?1e3:100:1===u?10:1,(m=Math.round(_*(l.S+l.u)))>=60*_&&(m=0),"s"===c?0===m?"0":""+m/_:(h=Gt(m,2+u),"ss"===c?h.substr(0,2):"."+h.substr(2,c.length-1))):Gt(l.S,c.length);case 90:switch(c){case"[h]":case"[hh]":x=24*l.D+l.H;break;case"[m]":case"[mm]":x=60*(24*l.D+l.H)+l.M;break;case"[s]":case"[ss]":x=60*(60*(24*l.D+l.H)+l.M)+Math.round(l.S+l.u);break;default:throw"bad abstime format: "+c}C=3===c.length?1:2;break;case 101:x=v,C=1}return C>0?Gt(x,C):""}function wo(o){if(o.length<=3)return o;for(var l=o.length%3,u=o.substr(0,l);l!=o.length;l+=3)u+=(u.length>0?",":"")+o.substr(l,3);return u}var og=/%/g;function $i(o,c){var l,u=o.indexOf("E")-o.indexOf(".")-1;if(o.match(/^#+0.0E\+0$/)){if(0==c)return"0.0E+0";if(c<0)return"-"+$i(o,-c);var h=o.indexOf(".");-1===h&&(h=o.indexOf("E"));var m=Math.floor(Math.log(c)*Math.LOG10E)%h;if(m<0&&(m+=h),-1===(l=(c/Math.pow(10,m)).toPrecision(u+1+(h+m)%h)).indexOf("e")){var _=Math.floor(Math.log(c)*Math.LOG10E);for(-1===l.indexOf(".")?l=l.charAt(0)+"."+l.substr(1)+"E+"+(_-l.length+m):l+="E+"+(_-m);"0."===l.substr(0,2);)l=(l=l.charAt(0)+l.substr(2,h)+"."+l.substr(2+h)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");l=l.replace(/\+-/,"-")}l=l.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(v,x,C,E){return x+C+E.substr(0,(h+m)%h)+"."+E.substr(m)+"E"})}else l=c.toExponential(u);return o.match(/E\+00$/)&&l.match(/e[+-]\d$/)&&(l=l.substr(0,l.length-1)+"0"+l.charAt(l.length-1)),o.match(/E\-/)&&l.match(/e\+/)&&(l=l.replace(/e\+/,"e")),l.replace("e","E")}var Ss=/# (\?+)( ?)\/( ?)(\d+)/,Qh=/^#*0*\.([0#]+)/,Un=/\).*[0#]/,rl=/\(###\) ###\\?-####/;function ur(o){for(var l,c="",u=0;u!=o.length;++u)switch(l=o.charCodeAt(u)){case 35:break;case 63:c+=" ";break;case 48:c+="0";break;default:c+=String.fromCharCode(l)}return c}function vi(o,c){var l=Math.pow(10,c);return""+Math.round(o*l)/l}function Wd(o,c){var l=o-Math.floor(o),u=Math.pow(10,c);return c<(""+Math.round(l*u)).length?0:Math.round(l*u)}function gn(o,c,l){if(40===o.charCodeAt(0)&&!c.match(Un)){var u=c.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return l>=0?gn("n",u,l):"("+gn("n",u,-l)+")"}if(44===c.charCodeAt(c.length-1))return function qs(o,c,l){for(var u=c.length-1;44===c.charCodeAt(u-1);)--u;return Cr(o,c.substr(0,u),l/Math.pow(10,3*(c.length-u)))}(o,c,l);if(-1!==c.indexOf("%"))return function ha(o,c,l){var u=c.replace(og,""),h=c.length-u.length;return Cr(o,u,l*Math.pow(10,2*h))+$n("%",h)}(o,c,l);if(-1!==c.indexOf("E"))return $i(c,l);if(36===c.charCodeAt(0))return"$"+gn(o,c.substr(" "==c.charAt(1)?2:1),l);var h,m,_,v,x=Math.abs(l),C=l<0?"-":"";if(c.match(/^00+$/))return C+Yn(x,c.length);if(c.match(/^[#?]+$/))return"0"===(h=Yn(l,0))&&(h=""),h.length>c.length?h:ur(c.substr(0,c.length-h.length))+h;if(m=c.match(Ss))return function Xb(o,c,l){var u=parseInt(o[4],10),h=Math.round(c*u),m=Math.floor(h/u),_=h-m*u,v=u;return l+(0===m?"":""+m)+" "+(0===_?$n(" ",o[1].length+1+o[4].length):bt(_,o[1].length)+o[2]+"/"+o[3]+Gt(v,o[4].length))}(m,x,C);if(c.match(/^#+0+$/))return C+Yn(x,c.length-c.indexOf("0"));if(m=c.match(Qh))return h=vi(l,m[1].length).replace(/^([^\.]+)$/,"$1."+ur(m[1])).replace(/\.$/,"."+ur(m[1])).replace(/\.(\d*)$/,function(R,y){return"."+y+$n("0",ur(m[1]).length-y.length)}),-1!==c.indexOf("0.")?h:h.replace(/^0\./,".");if(c=c.replace(/^#+([0.])/,"$1"),m=c.match(/^(0*)\.(#*)$/))return C+vi(x,m[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,m[1].length?"0.":".");if(m=c.match(/^#{1,3},##0(\.?)$/))return C+wo(Yn(x,0));if(m=c.match(/^#,##0\.([#0]*0)$/))return l<0?"-"+gn(o,c,-l):wo(""+(Math.floor(l)+function ag(o,c){return c<(""+Math.round((o-Math.floor(o))*Math.pow(10,c))).length?1:0}(l,m[1].length)))+"."+Gt(Wd(l,m[1].length),m[1].length);if(m=c.match(/^#,#*,#0/))return gn(o,c.replace(/^#,#*,/,""),l);if(m=c.match(/^([0#]+)(\\?-([0#]+))+$/))return h=mt(gn(o,c.replace(/[\\-]/g,""),l)),_=0,mt(mt(c.replace(/\\/g,"")).replace(/[0#]/g,function(R){return _<h.length?h.charAt(_++):"0"===R?"0":""}));if(c.match(rl))return"("+(h=gn(o,"##########",l)).substr(0,3)+") "+h.substr(3,3)+"-"+h.substr(6);var E="";if(m=c.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return _=Math.min(m[4].length,7),v=$d(x,Math.pow(10,_)-1,!1),h=""+C," "==(E=Cr("n",m[1],v[1])).charAt(E.length-1)&&(E=E.substr(0,E.length-1)+"0"),h+=E+m[2]+"/"+m[3],(E=ti(v[2],_)).length<m[4].length&&(E=ur(m[4].substr(m[4].length-E.length))+E),h+=E;if(m=c.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return _=Math.min(Math.max(m[1].length,m[4].length),7),C+((v=$d(x,Math.pow(10,_)-1,!0))[0]||(v[1]?"":"0"))+" "+(v[1]?bt(v[1],_)+m[2]+"/"+m[3]+ti(v[2],_):$n(" ",2*_+1+m[2].length+m[3].length));if(m=c.match(/^[#0?]+$/))return h=Yn(l,0),c.length<=h.length?h:ur(c.substr(0,c.length-h.length))+h;if(m=c.match(/^([#0?]+)\.([#0]+)$/)){h=""+l.toFixed(Math.min(m[2].length,10)).replace(/([^0])0+$/,"$1"),_=h.indexOf(".");var D=c.indexOf(".")-_,A=c.length-h.length-D;return ur(c.substr(0,D)+h+c.substr(c.length-A))}if(m=c.match(/^00,000\.([#0]*0)$/))return _=Wd(l,m[1].length),l<0?"-"+gn(o,c,-l):wo(function jd(o){return o<2147483647&&o>-2147483648?""+(o>=0?0|o:o-1|0):""+Math.floor(o)}(l)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?Gt(0,3-R.length):"")+R})+"."+Gt(_,m[1].length);switch(c){case"###,##0.00":return gn(o,"#,##0.00",l);case"###,###":case"##,###":case"#,###":var I=wo(Yn(x,0));return"0"!==I?C+I:"";case"###,###.00":return gn(o,"###,##0.00",l).replace(/^0\./,".");case"#,###.00":return gn(o,"#,##0.00",l).replace(/^0\./,".")}throw new Error("unsupported format |"+c+"|")}function fc(o,c){var l,u=o.indexOf("E")-o.indexOf(".")-1;if(o.match(/^#+0.0E\+0$/)){if(0==c)return"0.0E+0";if(c<0)return"-"+fc(o,-c);var h=o.indexOf(".");-1===h&&(h=o.indexOf("E"));var m=Math.floor(Math.log(c)*Math.LOG10E)%h;if(m<0&&(m+=h),!(l=(c/Math.pow(10,m)).toPrecision(u+1+(h+m)%h)).match(/[Ee]/)){var _=Math.floor(Math.log(c)*Math.LOG10E);-1===l.indexOf(".")?l=l.charAt(0)+"."+l.substr(1)+"E+"+(_-l.length+m):l+="E+"+(_-m),l=l.replace(/\+-/,"-")}l=l.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(v,x,C,E){return x+C+E.substr(0,(h+m)%h)+"."+E.substr(m)+"E"})}else l=c.toExponential(u);return o.match(/E\+00$/)&&l.match(/e[+-]\d$/)&&(l=l.substr(0,l.length-1)+"0"+l.charAt(l.length-1)),o.match(/E\-/)&&l.match(/e\+/)&&(l=l.replace(/e\+/,"e")),l.replace("e","E")}function Bi(o,c,l){if(40===o.charCodeAt(0)&&!c.match(Un)){var u=c.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return l>=0?Bi("n",u,l):"("+Bi("n",u,-l)+")"}if(44===c.charCodeAt(c.length-1))return function Kn(o,c,l){for(var u=c.length-1;44===c.charCodeAt(u-1);)--u;return Cr(o,c.substr(0,u),l/Math.pow(10,3*(c.length-u)))}(o,c,l);if(-1!==c.indexOf("%"))return function Ot(o,c,l){var u=c.replace(og,""),h=c.length-u.length;return Cr(o,u,l*Math.pow(10,2*h))+$n("%",h)}(o,c,l);if(-1!==c.indexOf("E"))return fc(c,l);if(36===c.charCodeAt(0))return"$"+Bi(o,c.substr(" "==c.charAt(1)?2:1),l);var h,m,_,v,x=Math.abs(l),C=l<0?"-":"";if(c.match(/^00+$/))return C+Gt(x,c.length);if(c.match(/^[#?]+$/))return h=""+l,0===l&&(h=""),h.length>c.length?h:ur(c.substr(0,c.length-h.length))+h;if(m=c.match(Ss))return function jh(o,c,l){return l+(0===c?"":""+c)+$n(" ",o[1].length+2+o[4].length)}(m,x,C);if(c.match(/^#+0+$/))return C+Gt(x,c.length-c.indexOf("0"));if(m=c.match(Qh))return h=(h=(""+l).replace(/^([^\.]+)$/,"$1."+ur(m[1])).replace(/\.$/,"."+ur(m[1]))).replace(/\.(\d*)$/,function(R,y){return"."+y+$n("0",ur(m[1]).length-y.length)}),-1!==c.indexOf("0.")?h:h.replace(/^0\./,".");if(c=c.replace(/^#+([0.])/,"$1"),m=c.match(/^(0*)\.(#*)$/))return C+(""+x).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,m[1].length?"0.":".");if(m=c.match(/^#{1,3},##0(\.?)$/))return C+wo(""+x);if(m=c.match(/^#,##0\.([#0]*0)$/))return l<0?"-"+Bi(o,c,-l):wo(""+l)+"."+$n("0",m[1].length);if(m=c.match(/^#,#*,#0/))return Bi(o,c.replace(/^#,#*,/,""),l);if(m=c.match(/^([0#]+)(\\?-([0#]+))+$/))return h=mt(Bi(o,c.replace(/[\\-]/g,""),l)),_=0,mt(mt(c.replace(/\\/g,"")).replace(/[0#]/g,function(R){return _<h.length?h.charAt(_++):"0"===R?"0":""}));if(c.match(rl))return"("+(h=Bi(o,"##########",l)).substr(0,3)+") "+h.substr(3,3)+"-"+h.substr(6);var E="";if(m=c.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return _=Math.min(m[4].length,7),v=$d(x,Math.pow(10,_)-1,!1),h=""+C," "==(E=Cr("n",m[1],v[1])).charAt(E.length-1)&&(E=E.substr(0,E.length-1)+"0"),h+=E+m[2]+"/"+m[3],(E=ti(v[2],_)).length<m[4].length&&(E=ur(m[4].substr(m[4].length-E.length))+E),h+=E;if(m=c.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return _=Math.min(Math.max(m[1].length,m[4].length),7),C+((v=$d(x,Math.pow(10,_)-1,!0))[0]||(v[1]?"":"0"))+" "+(v[1]?bt(v[1],_)+m[2]+"/"+m[3]+ti(v[2],_):$n(" ",2*_+1+m[2].length+m[3].length));if(m=c.match(/^[#0?]+$/))return c.length<=(h=""+l).length?h:ur(c.substr(0,c.length-h.length))+h;if(m=c.match(/^([#0]+)\.([#0]+)$/)){h=""+l.toFixed(Math.min(m[2].length,10)).replace(/([^0])0+$/,"$1"),_=h.indexOf(".");var D=c.indexOf(".")-_,A=c.length-h.length-D;return ur(c.substr(0,D)+h+c.substr(c.length-A))}if(m=c.match(/^00,000\.([#0]*0)$/))return l<0?"-"+Bi(o,c,-l):wo(""+l).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?Gt(0,3-R.length):"")+R})+"."+Gt(0,m[1].length);switch(c){case"###,###":case"##,###":case"#,###":var I=wo(""+x);return"0"!==I?C+I:"";default:if(c.match(/\.[0#?]*$/))return Bi(o,c.slice(0,c.lastIndexOf(".")),l)+ur(c.slice(c.lastIndexOf(".")))}throw new Error("unsupported format |"+c+"|")}function Cr(o,c,l){return(0|l)===l?Bi(o,c,l):gn(o,c,l)}var Wi=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ls(o){for(var c=0,l="",u="";c<o.length;)switch(l=o.charAt(c)){case"G":_i(o,c)&&(c+=6),c++;break;case'"':for(;34!==o.charCodeAt(++c)&&c<o.length;);++c;break;case"\\":case"_":c+=2;break;case"@":++c;break;case"B":case"b":if("1"===o.charAt(c+1)||"2"===o.charAt(c+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===o.substr(c,3).toUpperCase()||"AM/PM"===o.substr(c,5).toUpperCase()||"\u4e0a\u5348/\u4e0b\u5348"===o.substr(c,5).toUpperCase())return!0;++c;break;case"[":for(u=l;"]"!==o.charAt(c++)&&c<o.length;)u+=o.charAt(c);if(u.match(Wi))return!0;break;case".":case"0":case"#":for(;c<o.length&&("0#?.,E+-%".indexOf(l=o.charAt(++c))>-1||"\\"==l&&"-"==o.charAt(c+1)&&"0#".indexOf(o.charAt(c+2))>-1););break;case"?":for(;o.charAt(++c)===l;);break;case"*":++c,(" "==o.charAt(c)||"*"==o.charAt(c))&&++c;break;case"(":case")":++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;c<o.length&&"0123456789".indexOf(o.charAt(++c))>-1;);break;default:++c}return!1}var lg=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function cg(o,c){if(null==c)return!1;var l=parseFloat(c[2]);switch(c[1]){case"=":if(o==l)return!0;break;case">":if(o>l)return!0;break;case"<":if(o<l)return!0;break;case"<>":if(o!=l)return!0;break;case">=":if(o>=l)return!0;break;case"<=":if(o<=l)return!0}return!1}function Sr(o,c,l){null==l&&(l={});var u="";switch(typeof o){case"string":u="m/d/yy"==o&&l.dateNF?l.dateNF:o;break;case"number":null==(u=14==o&&l.dateNF?l.dateNF:(null!=l.table?l.table:xt)[o])&&(u=l.table&&l.table[il[o]]||xt[il[o]]),null==u&&(u=Kd[o]||"General")}if(_i(u,0))return ua(c,l);c instanceof Date&&(c=sg(c,l.date1904));var h=function sl(o,c){var l=function as(o){for(var c=[],l=!1,u=0,h=0;u<o.length;++u)switch(o.charCodeAt(u)){case 34:l=!l;break;case 95:case 42:case 92:++u;break;case 59:c[c.length]=o.substr(h,u-h),h=u+1}if(c[c.length]=o.substr(h),!0===l)throw new Error("Format |"+o+"| unterminated string ");return c}(o),u=l.length,h=l[u-1].indexOf("@");if(u<4&&h>-1&&--u,l.length>4)throw new Error("cannot find right format for |"+l.join("|")+"|");if("number"!=typeof c)return[4,4===l.length||h>-1?l[l.length-1]:"@"];switch(l.length){case 1:l=h>-1?["General","General","General",l[0]]:[l[0],l[0],l[0],"@"];break;case 2:l=h>-1?[l[0],l[0],l[0],l[1]]:[l[0],l[1],l[0],"@"];break;case 3:l=h>-1?[l[0],l[1],l[0],l[2]]:[l[0],l[1],l[2],"@"]}var m=c>0?l[0]:c<0?l[1]:l[2];if(-1===l[0].indexOf("[")&&-1===l[1].indexOf("["))return[u,m];if(null!=l[0].match(/\[[=<>]/)||null!=l[1].match(/\[[=<>]/)){var _=l[0].match(lg),v=l[1].match(lg);return cg(c,_)?[u,l[0]]:cg(c,v)?[u,l[1]]:[u,l[null!=_&&null!=v?2:1]]}return[u,m]}(u,c);if(_i(h[1]))return ua(c,l);if(!0===c)c="TRUE";else if(!1===c)c="FALSE";else if(""===c||null==c)return"";return function Xh(o,c,l,u){for(var C,E,D,h=[],m="",_=0,v="",x="t",A="H";_<o.length;)switch(v=o.charAt(_)){case"G":if(!_i(o,_))throw new Error("unrecognized character "+v+" in "+o);h[h.length]={t:"G",v:"General"},_+=7;break;case'"':for(m="";34!==(D=o.charCodeAt(++_))&&_<o.length;)m+=String.fromCharCode(D);h[h.length]={t:"t",v:m},++_;break;case"\\":var I=o.charAt(++_);h[h.length]={t:"("===I||")"===I?I:"t",v:I},++_;break;case"_":h[h.length]={t:"t",v:" "},_+=2;break;case"@":h[h.length]={t:"T",v:c},++_;break;case"B":case"b":if("1"===o.charAt(_+1)||"2"===o.charAt(_+1)){if(null==C&&null==(C=Eo(c,l,"2"===o.charAt(_+1))))return"";h[h.length]={t:"X",v:o.substr(_,2)},x=v,_+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":v=v.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(c<0||null==C&&null==(C=Eo(c,l)))return"";for(m=v;++_<o.length&&o.charAt(_).toLowerCase()===v;)m+=v;"m"===v&&"h"===x.toLowerCase()&&(v="M"),"h"===v&&(v=A),h[h.length]={t:v,v:m},x=v;break;case"A":case"a":case"\u4e0a":var y={t:v,v};if(null==C&&(C=Eo(c,l)),"A/P"===o.substr(_,3).toUpperCase()?(null!=C&&(y.v=C.H>=12?"P":"A"),y.t="T",A="h",_+=3):"AM/PM"===o.substr(_,5).toUpperCase()?(null!=C&&(y.v=C.H>=12?"PM":"AM"),y.t="T",_+=5,A="h"):"\u4e0a\u5348/\u4e0b\u5348"===o.substr(_,5).toUpperCase()?(null!=C&&(y.v=C.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),y.t="T",_+=5,A="h"):(y.t="t",++_),null==C&&"T"===y.t)return"";h[h.length]=y,x=v;break;case"[":for(m=v;"]"!==o.charAt(_++)&&_<o.length;)m+=o.charAt(_);if("]"!==m.slice(-1))throw'unterminated "[" block: |'+m+"|";if(m.match(Wi)){if(null==C&&null==(C=Eo(c,l)))return"";h[h.length]={t:"Z",v:m.toLowerCase()},x=m.charAt(1)}else m.indexOf("$")>-1&&(m=(m.match(/\$([^-\[\]]*)/)||[])[1]||"$",ls(o)||(h[h.length]={t:"t",v:m}));break;case".":if(null!=C){for(m=v;++_<o.length&&"0"===(v=o.charAt(_));)m+=v;h[h.length]={t:"s",v:m};break}case"0":case"#":for(m=v;++_<o.length&&"0#?.,E+-%".indexOf(v=o.charAt(_))>-1;)m+=v;h[h.length]={t:"n",v:m};break;case"?":for(m=v;o.charAt(++_)===v;)m+=v;h[h.length]={t:v,v:m},x=v;break;case"*":++_,(" "==o.charAt(_)||"*"==o.charAt(_))&&++_;break;case"(":case")":h[h.length]={t:1===u?"t":v,v},++_;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(m=v;_<o.length&&"0123456789".indexOf(o.charAt(++_))>-1;)m+=o.charAt(_);h[h.length]={t:"D",v:m};break;case" ":h[h.length]={t:v,v},++_;break;case"$":h[h.length]={t:"t",v:"$"},++_;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(v))throw new Error("unrecognized character "+v+" in "+o);h[h.length]={t:"t",v},++_}var z,N=0,Z=0;for(_=h.length-1,x="t";_>=0;--_)switch(h[_].t){case"h":case"H":h[_].t=A,x="h",N<1&&(N=1);break;case"s":(z=h[_].v.match(/\.0+$/))&&(Z=Math.max(Z,z[0].length-1)),N<3&&(N=3);case"d":case"y":case"M":case"e":x=h[_].t;break;case"m":"s"===x&&(h[_].t="M",N<2&&(N=2));break;case"X":break;case"Z":N<1&&h[_].v.match(/[Hh]/)&&(N=1),N<2&&h[_].v.match(/[Mm]/)&&(N=2),N<3&&h[_].v.match(/[Ss]/)&&(N=3)}switch(N){case 0:break;case 1:C.u>=.5&&(C.u=0,++C.S),C.S>=60&&(C.S=0,++C.M),C.M>=60&&(C.M=0,++C.H);break;case 2:C.u>=.5&&(C.u=0,++C.S),C.S>=60&&(C.S=0,++C.M)}var le,B="";for(_=0;_<h.length;++_)switch(h[_].t){case"t":case"T":case" ":case"D":break;case"X":h[_].v="",h[_].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":h[_].v=Qb(h[_].t.charCodeAt(0),h[_].v,C,Z),h[_].t="t";break;case"n":case"?":for(le=_+1;null!=h[le]&&("?"===(v=h[le].t)||"D"===v||(" "===v||"t"===v)&&null!=h[le+1]&&("?"===h[le+1].t||"t"===h[le+1].t&&"/"===h[le+1].v)||"("===h[_].t&&(" "===v||"n"===v||")"===v)||"t"===v&&("/"===h[le].v||" "===h[le].v&&null!=h[le+1]&&"?"==h[le+1].t));)h[_].v+=h[le].v,h[le]={v:"",t:";"},++le;B+=h[_].v,_=le-1;break;case"G":h[_].t="t",h[_].v=ua(c,l)}var we,j,ge="";if(B.length>0){40==B.charCodeAt(0)?(we=c<0&&45===B.charCodeAt(0)?-c:c,j=Cr("n",B,we)):(j=Cr("n",B,we=c<0&&u>1?-c:c),we<0&&h[0]&&"t"==h[0].t&&(j=j.substr(1),h[0].v="-"+h[0].v)),le=j.length-1;var pe=h.length;for(_=0;_<h.length;++_)if(null!=h[_]&&"t"!=h[_].t&&h[_].v.indexOf(".")>-1){pe=_;break}var ce=h.length;if(pe===h.length&&-1===j.indexOf("E")){for(_=h.length-1;_>=0;--_)null==h[_]||-1==="n?".indexOf(h[_].t)||(le>=h[_].v.length-1?h[_].v=j.substr(1+(le-=h[_].v.length),h[_].v.length):le<0?h[_].v="":(h[_].v=j.substr(0,le+1),le=-1),h[_].t="t",ce=_);le>=0&&ce<h.length&&(h[ce].v=j.substr(0,le+1)+h[ce].v)}else if(pe!==h.length&&-1===j.indexOf("E")){for(le=j.indexOf(".")-1,_=pe;_>=0;--_)if(null!=h[_]&&-1!=="n?".indexOf(h[_].t)){for(E=h[_].v.indexOf(".")>-1&&_===pe?h[_].v.indexOf(".")-1:h[_].v.length-1,ge=h[_].v.substr(E+1);E>=0;--E)le>=0&&("0"===h[_].v.charAt(E)||"#"===h[_].v.charAt(E))&&(ge=j.charAt(le--)+ge);h[_].v=ge,h[_].t="t",ce=_}for(le>=0&&ce<h.length&&(h[ce].v=j.substr(0,le+1)+h[ce].v),le=j.indexOf(".")+1,_=pe;_<h.length;++_)if(null!=h[_]&&(-1!=="n?(".indexOf(h[_].t)||_===pe)){for(E=h[_].v.indexOf(".")>-1&&_===pe?h[_].v.indexOf(".")+1:0,ge=h[_].v.substr(0,E);E<h[_].v.length;++E)le<j.length&&(ge+=j.charAt(le++));h[_].v=ge,h[_].t="t",ce=_}}}for(_=0;_<h.length;++_)null!=h[_]&&"n?".indexOf(h[_].t)>-1&&(h[_].v=Cr(h[_].t,h[_].v,we=u>1&&c<0&&_>0&&"-"===h[_-1].v?-c:c),h[_].t="t");var Ce="";for(_=0;_!==h.length;++_)null!=h[_]&&(Ce+=h[_].v);return Ce}(h[1],c,l,h[0])}function Ys(o,c){if("number"!=typeof c){c=+c||-1;for(var l=0;l<392;++l)if(null!=xt[l]){if(xt[l]==o){c=l;break}}else c<0&&(c=l);c<0&&(c=391)}return xt[c]=o,c}function ko(o){for(var c=0;392!=c;++c)void 0!==o[c]&&Ys(o[c],c)}function En(){xt=function uc(o){return o||(o={}),o[0]="General",o[1]="0",o[2]="0.00",o[3]="#,##0",o[4]="#,##0.00",o[9]="0%",o[10]="0.00%",o[11]="0.00E+00",o[12]="# ?/?",o[13]="# ??/??",o[14]="m/d/yy",o[15]="d-mmm-yy",o[16]="d-mmm",o[17]="mmm-yy",o[18]="h:mm AM/PM",o[19]="h:mm:ss AM/PM",o[20]="h:mm",o[21]="h:mm:ss",o[22]="m/d/yy h:mm",o[37]="#,##0 ;(#,##0)",o[38]="#,##0 ;[Red](#,##0)",o[39]="#,##0.00;(#,##0.00)",o[40]="#,##0.00;[Red](#,##0.00)",o[45]="mm:ss",o[46]="[h]:mm:ss",o[47]="mmss.0",o[48]="##0.0E+0",o[49]="@",o[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',o}()}var fn=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g,On=function(){var o={version:"1.2.0"},l=function c(){for(var j=0,pe=new Array(256),ce=0;256!=ce;++ce)pe[ce]=j=1&(j=1&(j=1&(j=1&(j=1&(j=1&(j=1&(j=1&(j=ce)?-306674912^j>>>1:j>>>1)?-306674912^j>>>1:j>>>1)?-306674912^j>>>1:j>>>1)?-306674912^j>>>1:j>>>1)?-306674912^j>>>1:j>>>1)?-306674912^j>>>1:j>>>1)?-306674912^j>>>1:j>>>1)?-306674912^j>>>1:j>>>1;return typeof Int32Array<"u"?new Int32Array(pe):pe}(),h=function u(j){var pe=0,ce=0,Ce=0,ye=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Ce=0;256!=Ce;++Ce)ye[Ce]=j[Ce];for(Ce=0;256!=Ce;++Ce)for(ce=j[Ce],pe=256+Ce;pe<4096;pe+=256)ce=ye[pe]=ce>>>8^j[255&ce];var he=[];for(Ce=1;16!=Ce;++Ce)he[Ce-1]=typeof Int32Array<"u"?ye.subarray(256*Ce,256*Ce+256):ye.slice(256*Ce,256*Ce+256);return he}(l),m=h[0],_=h[1],v=h[2],x=h[3],C=h[4],E=h[5],D=h[6],A=h[7],I=h[8],R=h[9],y=h[10],N=h[11],Z=h[12],z=h[13],B=h[14];return o.table=l,o.bstr=function le(j,pe){for(var ce=-1^pe,Ce=0,ye=j.length;Ce<ye;)ce=ce>>>8^l[255&(ce^j.charCodeAt(Ce++))];return~ce},o.buf=function ge(j,pe){for(var ce=-1^pe,Ce=j.length-15,ye=0;ye<Ce;)ce=B[j[ye++]^255&ce]^z[j[ye++]^ce>>8&255]^Z[j[ye++]^ce>>16&255]^N[j[ye++]^ce>>>24]^y[j[ye++]]^R[j[ye++]]^I[j[ye++]]^A[j[ye++]]^D[j[ye++]]^E[j[ye++]]^C[j[ye++]]^x[j[ye++]]^v[j[ye++]]^_[j[ye++]]^m[j[ye++]]^l[j[ye++]];for(Ce+=15;ye<Ce;)ce=ce>>>8^l[255&(ce^j[ye++])];return~ce},o.str=function we(j,pe){for(var ce=-1^pe,Ce=0,ye=j.length,he=0,je=0;Ce<ye;)(he=j.charCodeAt(Ce++))<128?ce=ce>>>8^l[255&(ce^he)]:he<2048?ce=(ce=ce>>>8^l[255&(ce^(192|he>>6&31))])>>>8^l[255&(ce^(128|63&he))]:he>=55296&&he<57344?(he=64+(1023&he),je=1023&j.charCodeAt(Ce++),ce=(ce=(ce=(ce=ce>>>8^l[255&(ce^(240|he>>8&7))])>>>8^l[255&(ce^(128|he>>2&63))])>>>8^l[255&(ce^(128|je>>6&15|(3&he)<<4))])>>>8^l[255&(ce^(128|63&je))]):ce=(ce=(ce=ce>>>8^l[255&(ce^(224|he>>12&15))])>>>8^l[255&(ce^(128|he>>6&63))])>>>8^l[255&(ce^(128|63&he))];return~ce},o}(),Ct=function(){var x,c={};function u(L){if("/"==L.charAt(L.length-1))return-1===L.slice(0,-1).indexOf("/")?L:u(L.slice(0,-1));var V=L.lastIndexOf("/");return-1===V?L:L.slice(0,V+1)}function h(L){if("/"==L.charAt(L.length-1))return h(L.slice(0,-1));var V=L.lastIndexOf("/");return-1===V?L:L.slice(V+1)}function m(L,V){"string"==typeof V&&(V=new Date(V));var U=V.getHours();U=(U=U<<6|V.getMinutes())<<5|V.getSeconds()>>>1,L.write_shift(2,U);var G=V.getFullYear()-1980;G=(G=G<<4|V.getMonth()+1)<<5|V.getDate(),L.write_shift(2,G)}function v(L){Qi(L,0);for(var V={},U=0;L.l<=L.length-4;){var G=L.read_shift(2),J=L.read_shift(2),Y=L.l+J,_e={};21589===G&&(1&(U=L.read_shift(1))&&(_e.mtime=L.read_shift(4)),J>5&&(2&U&&(_e.atime=L.read_shift(4)),4&U&&(_e.ctime=L.read_shift(4))),_e.mtime&&(_e.mt=new Date(1e3*_e.mtime))),L.l=Y,V[G]=_e}return V}function C(){return x||(x={})}function E(L,V){if(80==L[0]&&75==L[1])return av(L,V);if(109==(32|L[0])&&105==(32|L[1]))return function Bs(L,V){if("mime-version:"!=ct(L.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var U=V&&V.root||"",G=(O&&Buffer.isBuffer(L)?L.toString("binary"):ct(L)).split("\r\n"),J=0,Y="";for(J=0;J<G.length;++J)if(/^Content-Location:/i.test(Y=G[J])&&(Y=Y.slice(Y.indexOf("file")),U||(U=Y.slice(0,Y.lastIndexOf("/")+1)),Y.slice(0,U.length)!=U))for(;U.length>0&&(U=(U=U.slice(0,U.length-1)).slice(0,U.lastIndexOf("/")+1),Y.slice(0,U.length)!=U););var _e=(G[1]||"").match(/boundary="(.*?)"/);if(!_e)throw new Error("MAD cannot find boundary");var De="--"+(_e[1]||""),Se={FileIndex:[],FullPaths:[]};j(Se);var Ze,Xe=0;for(J=0;J<G.length;++J){var gt=G[J];gt!==De&&gt!==De+"--"||(Xe++&&Iy(Se,G.slice(Ze,J),U),Ze=J)}return Se}(L,V);if(L.length<512)throw new Error("CFB file size "+L.length+" < 512");var U,J,Y,_e,De,be,G=512,ve=[],Se=L.slice(0,512);Qi(Se,0);var Ze=function D(L){if(80==L[L.l]&&75==L[L.l+1])return[0,0];L.chk(ut,"Header Signature: "),L.l+=16;var V=L.read_shift(2,"u");return[L.read_shift(2,"u"),V]}(Se);switch(U=Ze[0]){case 3:G=512;break;case 4:G=4096;break;case 0:if(0==Ze[1])return av(L,V);default:throw new Error("Major Version: Expected 3 or 4 saw "+U)}512!==G&&Qi(Se=L.slice(0,G),28);var Xe=L.slice(0,G);!function A(L,V){var U;switch(L.l+=2,U=L.read_shift(2)){case 9:if(3!=V)throw new Error("Sector Shift: Expected 9 saw "+U);break;case 12:if(4!=V)throw new Error("Sector Shift: Expected 12 saw "+U);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+U)}L.chk("0600","Mini Sector Shift: "),L.chk("000000000000","Reserved: ")}(Se,U);var gt=Se.read_shift(4,"i");if(3===U&&0!==gt)throw new Error("# Directory Sectors: Expected 0 saw "+gt);Se.l+=4,_e=Se.read_shift(4,"i"),Se.l+=4,Se.chk("00100000","Mini Stream Cutoff Size: "),De=Se.read_shift(4,"i"),J=Se.read_shift(4,"i"),be=Se.read_shift(4,"i"),Y=Se.read_shift(4,"i");for(var et=-1,rt=0;rt<109&&!((et=Se.read_shift(4,"i"))<0);++rt)ve[rt]=et;var Pt=function I(L,V){for(var U=Math.ceil(L.length/V)-1,G=[],J=1;J<U;++J)G[J-1]=L.slice(J*V,(J+1)*V);return G[U-1]=L.slice(U*V),G}(L,G);N(be,Y,Pt,G,ve);var Mn=function z(L,V,U,G){var J=L.length,Y=[],_e=[],De=[],be=[],ve=G-1,Se=0,Ze=0,Xe=0,gt=0;for(Se=0;Se<J;++Se)if(De=[],(Xe=Se+V)>=J&&(Xe-=J),!_e[Xe]){be=[];var et=[];for(Ze=Xe;Ze>=0;){et[Ze]=!0,_e[Ze]=!0,De[De.length]=Ze,be.push(L[Ze]);var rt=U[Math.floor(4*Ze/G)];if(G<4+(gt=4*Ze&ve))throw new Error("FAT boundary crossed: "+Ze+" 4 "+G);if(!L[rt]||et[Ze=ga(L[rt],gt)])break}Y[Xe]={nodes:De,data:cf([be])}}return Y}(Pt,_e,ve,G);Mn[_e].name="!Directory",J>0&&De!==je&&(Mn[De].name="!MiniFAT"),Mn[ve[0]].name="!FAT",Mn.fat_addrs=ve,Mn.ssz=G;var si=[],Or=[],Wl=[];(function B(L,V,U,G,J,Y,_e,De){for(var gt,be=0,ve=G.length?2:0,Se=V[L].data,Ze=0,Xe=0;Ze<Se.length;Ze+=128){var et=Se.slice(Ze,Ze+128);Qi(et,64),Xe=et.read_shift(2),gt=xc(et,0,Xe-ve),G.push(gt);var rt={name:gt,type:et.read_shift(1),color:et.read_shift(1),L:et.read_shift(4,"i"),R:et.read_shift(4,"i"),C:et.read_shift(4,"i"),clsid:et.read_shift(16),state:et.read_shift(4,"i"),start:0,size:0};0!==et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2)&&(rt.ct=le(et,et.l-8)),0!==et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2)&&(rt.mt=le(et,et.l-8)),rt.start=et.read_shift(4,"i"),rt.size=et.read_shift(4,"i"),rt.size<0&&rt.start<0&&(rt.size=rt.type=0,rt.start=je,rt.name=""),5===rt.type?(be=rt.start,J>0&&be!==je&&(V[be].name="!StreamData")):rt.size>=4096?(rt.storage="fat",void 0===V[rt.start]&&(V[rt.start]=Z(U,rt.start,V.fat_addrs,V.ssz)),V[rt.start].name=rt.name,rt.content=V[rt.start].data.slice(0,rt.size)):(rt.storage="minifat",rt.size<0?rt.size=0:be!==je&&rt.start!==je&&V[be]&&(rt.content=y(rt,V[be].data,(V[De]||{}).data))),rt.content&&Qi(rt.content,0),Y[gt]=rt,_e.push(rt)}})(_e,Mn,Pt,si,J,{},Or,De),function R(L,V,U){for(var G=0,J=0,Y=0,_e=0,De=0,be=U.length,ve=[],Se=[];G<be;++G)ve[G]=Se[G]=G,V[G]=U[G];for(;De<Se.length;++De)J=L[G=Se[De]].L,Y=L[G].R,_e=L[G].C,ve[G]===G&&(-1!==J&&ve[J]!==J&&(ve[G]=ve[J]),-1!==Y&&ve[Y]!==Y&&(ve[G]=ve[Y])),-1!==_e&&(ve[_e]=G),-1!==J&&G!=ve[G]&&(ve[J]=ve[G],Se.lastIndexOf(J)<De&&Se.push(J)),-1!==Y&&G!=ve[G]&&(ve[Y]=ve[G],Se.lastIndexOf(Y)<De&&Se.push(Y));for(G=1;G<be;++G)ve[G]===G&&(-1!==Y&&ve[Y]!==Y?ve[G]=ve[Y]:-1!==J&&ve[J]!==J&&(ve[G]=ve[J]));for(G=1;G<be;++G)if(0!==L[G].type){if((De=G)!=ve[De])do{V[G]=V[De=ve[De]]+"/"+V[G]}while(0!==De&&-1!==ve[De]&&De!=ve[De]);ve[G]=-1}for(V[0]+="/",G=1;G<be;++G)2!==L[G].type&&(V[G]+="/")}(Or,Wl,si),si.shift();var Eh={FileIndex:Or,FullPaths:Wl};return V&&V.raw&&(Eh.raw={header:Xe,sectors:Pt}),Eh}function y(L,V,U){for(var J=L.size,Y=[],_e=L.start;U&&J>0&&_e>=0;)Y.push(V.slice(_e*he,_e*he+he)),J-=he,_e=ga(U,4*_e);return 0===Y.length?Te(0):Ne(Y).slice(0,L.size)}function N(L,V,U,G,J){var Y=je;if(L===je){if(0!==V)throw new Error("DIFAT chain shorter than expected")}else if(-1!==L){var _e=U[L],De=(G>>>2)-1;if(!_e)return;for(var be=0;be<De&&(Y=ga(_e,4*be))!==je;++be)J.push(Y);N(ga(_e,G-4),V-1,U,G,J)}}function Z(L,V,U,G,J){var Y=[],_e=[];J||(J=[]);var De=G-1,be=0,ve=0;for(be=V;be>=0;){J[be]=!0,Y[Y.length]=be,_e.push(L[be]);var Se=U[Math.floor(4*be/G)];if(G<4+(ve=4*be&De))throw new Error("FAT boundary crossed: "+be+" 4 "+G);if(!L[Se])break;be=ga(L[Se],ve)}return{nodes:Y,data:cf([_e])}}function le(L,V){return new Date(1e3*(jn(L,V+4)/1e7*Math.pow(2,32)+jn(L,V)/1e7-11644473600))}function j(L,V){var U=V||{},G=U.root||"Root Entry";if(L.FullPaths||(L.FullPaths=[]),L.FileIndex||(L.FileIndex=[]),L.FullPaths.length!==L.FileIndex.length)throw new Error("inconsistent CFB structure");0===L.FullPaths.length&&(L.FullPaths[0]=G+"/",L.FileIndex[0]={name:G,type:5}),U.CLSID&&(L.FileIndex[0].clsid=U.CLSID),function pe(L){var V="\x01Sh33tJ5";if(!Ct.find(L,"/"+V)){var U=Te(4);U[0]=55,U[1]=U[3]=50,U[2]=54,L.FileIndex.push({name:V,type:2,content:U,size:4,L:69,R:69,C:69}),L.FullPaths.push(L.FullPaths[0]+V),ce(L)}}(L)}function ce(L,V){j(L);for(var U=!1,G=!1,J=L.FullPaths.length-1;J>=0;--J){var Y=L.FileIndex[J];switch(Y.type){case 0:G?U=!0:(L.FileIndex.pop(),L.FullPaths.pop());break;case 1:case 2:case 5:G=!0,isNaN(Y.R*Y.L*Y.C)&&(U=!0),Y.R>-1&&Y.L>-1&&Y.R==Y.L&&(U=!0);break;default:U=!0}}if(U||V){var _e=new Date(1987,1,19),De=0,be=Object.create?Object.create(null):{},ve=[];for(J=0;J<L.FullPaths.length;++J)be[L.FullPaths[J]]=!0,0!==L.FileIndex[J].type&&ve.push([L.FullPaths[J],L.FileIndex[J]]);for(J=0;J<ve.length;++J){var Se=u(ve[J][0]);(G=be[Se])||(ve.push([Se,{name:h(Se).replace("/",""),type:1,clsid:Dt,ct:_e,mt:_e,content:null}]),be[Se]=!0)}for(ve.sort(function(gt,et){return function l(L,V){for(var U=L.split("/"),G=V.split("/"),J=0,Y=0,_e=Math.min(U.length,G.length);J<_e;++J){if(Y=U[J].length-G[J].length)return Y;if(U[J]!=G[J])return U[J]<G[J]?-1:1}return U.length-G.length}(gt[0],et[0])}),L.FullPaths=[],L.FileIndex=[],J=0;J<ve.length;++J)L.FullPaths[J]=ve[J][0],L.FileIndex[J]=ve[J][1];for(J=0;J<ve.length;++J){var Ze=L.FileIndex[J],Xe=L.FullPaths[J];if(Ze.name=h(Xe).replace("/",""),Ze.L=Ze.R=Ze.C=-(Ze.color=1),Ze.size=Ze.content?Ze.content.length:0,Ze.start=0,Ze.clsid=Ze.clsid||Dt,0===J)Ze.C=ve.length>1?1:-1,Ze.size=0,Ze.type=5;else if("/"==Xe.slice(-1)){for(De=J+1;De<ve.length&&u(L.FullPaths[De])!=Xe;++De);for(Ze.C=De>=ve.length?-1:De,De=J+1;De<ve.length&&u(L.FullPaths[De])!=u(Xe);++De);Ze.R=De>=ve.length?-1:De,Ze.type=1}else u(L.FullPaths[J+1]||"")==u(Xe)&&(Ze.R=J+1),Ze.type=2}}}function Ce(L,V){var U=V||{};if("mad"==U.fileType)return function uv(L,V){for(var U=V||{},G=U.boundary||"SheetJS",J=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(G="------="+G).slice(2)+'"',"","",""],Y=L.FullPaths[0],_e=Y,De=L.FileIndex[0],be=1;be<L.FullPaths.length;++be)if(_e=L.FullPaths[be].slice(Y.length),(De=L.FileIndex[be]).size&&De.content&&"\x01Sh33tJ5"!=_e){_e=_e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Pt){return"_x"+Pt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Pt){return"_u"+Pt.charCodeAt(0).toString(16)+"_"});for(var ve=De.content,Se=O&&Buffer.isBuffer(ve)?ve.toString("binary"):ct(ve),Ze=0,Xe=Math.min(1024,Se.length),gt=0,et=0;et<=Xe;++et)(gt=Se.charCodeAt(et))>=32&&gt<128&&++Ze;var rt=Ze>=4*Xe/5;J.push(G),J.push("Content-Location: "+(U.root||"file:///C:/SheetJS/")+_e),J.push("Content-Transfer-Encoding: "+(rt?"quoted-printable":"base64")),J.push("Content-Type: "+cv(De,_e)),J.push(""),J.push(rt?dv(Se):Sm(Se))}return J.push(G+"--\r\n"),J.join("\r\n")}(L,U);if("zip"===(ce(L),U.fileType))return function lv(L,V){var U=V||{},G=[],J=[],Y=Te(1),_e=U.compression?8:0,ve=0,Se=0,Ze=0,Xe=0,gt=L.FullPaths[0],et=gt,rt=L.FileIndex[0],Pt=[],Mn=0;for(ve=1;ve<L.FullPaths.length;++ve)if(et=L.FullPaths[ve].slice(gt.length),(rt=L.FileIndex[ve]).size&&rt.content&&"\x01Sh33tJ5"!=et){var _r=Ze,si=Te(et.length);for(Se=0;Se<et.length;++Se)si.write_shift(1,127&et.charCodeAt(Se));si=si.slice(0,si.l),Pt[Xe]=On.buf(rt.content,0);var Or=rt.content;8==_e&&(Or=ie(Or)),(Y=Te(30)).write_shift(4,67324752),Y.write_shift(2,20),Y.write_shift(2,0),Y.write_shift(2,_e),rt.mt?m(Y,rt.mt):Y.write_shift(4,0),Y.write_shift(-4,Pt[Xe]),Y.write_shift(4,Or.length),Y.write_shift(4,rt.content.length),Y.write_shift(2,si.length),Y.write_shift(2,0),Ze+=Y.length,G.push(Y),Ze+=si.length,G.push(si),Ze+=Or.length,G.push(Or),(Y=Te(46)).write_shift(4,33639248),Y.write_shift(2,0),Y.write_shift(2,20),Y.write_shift(2,0),Y.write_shift(2,_e),Y.write_shift(4,0),Y.write_shift(-4,Pt[Xe]),Y.write_shift(4,Or.length),Y.write_shift(4,rt.content.length),Y.write_shift(2,si.length),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(4,0),Y.write_shift(4,_r),Mn+=Y.l,J.push(Y),Mn+=si.length,J.push(si),++Xe}return(Y=Te(22)).write_shift(4,101010256),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,Xe),Y.write_shift(2,Xe),Y.write_shift(4,Mn),Y.write_shift(4,Ze),Y.write_shift(2,0),Ne([Ne(G),Ne(J),Y])}(L,U);var G=function(gt){for(var et=0,rt=0,Pt=0;Pt<gt.FileIndex.length;++Pt){var Mn=gt.FileIndex[Pt];if(Mn.content){var _r=Mn.content.length;_r>0&&(_r<4096?et+=_r+63>>6:rt+=_r+511>>9)}}for(var si=gt.FullPaths.length+3>>2,Wl=et+127>>7,Eh=(et+7>>3)+rt+si+Wl,Ja=Eh+127>>7,Em=Ja<=109?0:Math.ceil((Ja-109)/127);Eh+Ja+Em+127>>7>Ja;)Em=++Ja<=109?0:Math.ceil((Ja-109)/127);var po=[1,Em,Ja,Wl,si,rt,et,0];return gt.FileIndex[0].size=et<<6,po[7]=(gt.FileIndex[0].start=po[0]+po[1]+po[2]+po[3]+po[4]+po[5])+(po[6]+7>>3),po}(L),J=Te(G[7]<<9),Y=0,_e=0;for(Y=0;Y<8;++Y)J.write_shift(1,it[Y]);for(Y=0;Y<8;++Y)J.write_shift(2,0);for(J.write_shift(2,62),J.write_shift(2,3),J.write_shift(2,65534),J.write_shift(2,9),J.write_shift(2,6),Y=0;Y<3;++Y)J.write_shift(2,0);for(J.write_shift(4,0),J.write_shift(4,G[2]),J.write_shift(4,G[0]+G[1]+G[2]+G[3]-1),J.write_shift(4,0),J.write_shift(4,4096),J.write_shift(4,G[3]?G[0]+G[1]+G[2]-1:je),J.write_shift(4,G[3]),J.write_shift(-4,G[1]?G[0]-1:je),J.write_shift(4,G[1]),Y=0;Y<109;++Y)J.write_shift(-4,Y<G[2]?G[1]+Y:-1);if(G[1])for(_e=0;_e<G[1];++_e){for(;Y<236+127*_e;++Y)J.write_shift(-4,Y<G[2]?G[1]+Y:-1);J.write_shift(-4,_e===G[1]-1?je:_e+1)}var De=function(gt){for(_e+=gt;Y<_e-1;++Y)J.write_shift(-4,Y+1);gt&&(++Y,J.write_shift(-4,je))};for(_e=Y=0,_e+=G[1];Y<_e;++Y)J.write_shift(-4,_t.DIFSECT);for(_e+=G[2];Y<_e;++Y)J.write_shift(-4,_t.FATSECT);De(G[3]),De(G[4]);for(var be=0,ve=0,Se=L.FileIndex[0];be<L.FileIndex.length;++be)(Se=L.FileIndex[be]).content&&!((ve=Se.content.length)<4096)&&(Se.start=_e,De(ve+511>>9));for(De(G[6]+7>>3);511&J.l;)J.write_shift(-4,_t.ENDOFCHAIN);for(_e=Y=0,be=0;be<L.FileIndex.length;++be)(Se=L.FileIndex[be]).content&&(ve=Se.content.length)&&!(ve>=4096)&&(Se.start=_e,De(ve+63>>6));for(;511&J.l;)J.write_shift(-4,_t.ENDOFCHAIN);for(Y=0;Y<G[4]<<2;++Y){var Ze=L.FullPaths[Y];if(Ze&&0!==Ze.length){Se=L.FileIndex[Y],0===Y&&(Se.start=Se.size?Se.start-1:je);var Xe=0===Y&&U.root||Se.name;if(ve=2*(Xe.length+1),J.write_shift(64,Xe,"utf16le"),J.write_shift(2,ve),J.write_shift(1,Se.type),J.write_shift(1,Se.color),J.write_shift(-4,Se.L),J.write_shift(-4,Se.R),J.write_shift(-4,Se.C),Se.clsid)J.write_shift(16,Se.clsid,"hex");else for(be=0;be<4;++be)J.write_shift(4,0);J.write_shift(4,Se.state||0),J.write_shift(4,0),J.write_shift(4,0),J.write_shift(4,0),J.write_shift(4,0),J.write_shift(4,Se.start),J.write_shift(4,Se.size),J.write_shift(4,0)}else{for(be=0;be<17;++be)J.write_shift(4,0);for(be=0;be<3;++be)J.write_shift(4,-1);for(be=0;be<12;++be)J.write_shift(4,0)}}for(Y=1;Y<L.FileIndex.length;++Y)if((Se=L.FileIndex[Y]).size>=4096)if(J.l=Se.start+1<<9,O&&Buffer.isBuffer(Se.content))Se.content.copy(J,J.l,0,Se.size),J.l+=Se.size+511&-512;else{for(be=0;be<Se.size;++be)J.write_shift(1,Se.content[be]);for(;511&be;++be)J.write_shift(1,0)}for(Y=1;Y<L.FileIndex.length;++Y)if((Se=L.FileIndex[Y]).size>0&&Se.size<4096)if(O&&Buffer.isBuffer(Se.content))Se.content.copy(J,J.l,0,Se.size),J.l+=Se.size+63&-64;else{for(be=0;be<Se.size;++be)J.write_shift(1,Se.content[be]);for(;63&be;++be)J.write_shift(1,0)}if(O)J.l=J.length;else for(;J.l<J.length;)J.write_shift(1,0);return J}c.version="1.2.1";var Pe,he=64,je=-2,ut="d0cf11e0a1b11ae1",it=[208,207,17,224,161,177,26,225],Dt="00000000000000000000000000000000",_t={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:je,FREESECT:-1,HEADER_SIGNATURE:ut,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Dt,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ct(L){for(var V=new Array(L.length),U=0;U<L.length;++U)V[U]=String.fromCharCode(L[U]);return V.join("")}function ie(L){return Pe?Pe.deflateRawSync(L):nn(L)}for(var L,V,ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ot=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],We=typeof Uint8Array<"u",Le=We?new Uint8Array(256):[],jt=0;jt<256;++jt)Le[jt]=(void 0,255&((V=139536&((L=jt)<<1|L<<11)|558144&(L<<5|L<<15))>>16|V>>8|V));function W(L,V){var U=Le[255&L];return V<=8?U>>>8-V:(U=U<<8|Le[L>>8&255],V<=16?U>>>16-V:(U=U<<8|Le[L>>16&255])>>>24-V)}function At(L,V){var U=7&V,G=V>>>3;return(L[G]|(U<=6?0:L[G+1]<<8))>>>U&3}function Kt(L,V){var U=7&V,G=V>>>3;return(L[G]|(U<=5?0:L[G+1]<<8))>>>U&7}function Nt(L,V){var U=7&V,G=V>>>3;return(L[G]|(U<=3?0:L[G+1]<<8))>>>U&31}function Ke(L,V){var U=7&V,G=V>>>3;return(L[G]|(U<=1?0:L[G+1]<<8))>>>U&127}function wn(L,V,U){var G=7&V,J=V>>>3,_e=L[J]>>>G;return U<8-G||(_e|=L[J+1]<<8-G,U<16-G)||(_e|=L[J+2]<<16-G,U<24-G)||(_e|=L[J+3]<<24-G),_e&(1<<U)-1}function Qr(L,V,U){var G=7&V,J=V>>>3;return G<=5?L[J]|=(7&U)<<G:(L[J]|=U<<G&255,L[J+1]=(7&U)>>8-G),V+3}function Br(L,V,U){return L[V>>>3]|=U=(1&U)<<(7&V),V+1}function ho(L,V,U){var J=V>>>3;return L[J]|=255&(U<<=7&V),L[J+1]=U>>>=8,V+8}function gd(L,V,U){var J=V>>>3;return L[J]|=255&(U<<=7&V),L[J+1]=255&(U>>>=8),L[J+2]=U>>>8,V+16}function Xo(L,V){var U=L.length,G=2*U>V?2*U:V+5,J=0;if(U>=V)return L;if(O){var Y=ae(G);if(L.copy)L.copy(Y);else for(;J<L.length;++J)Y[J]=L[J];return Y}if(We){var _e=new Uint8Array(G);if(_e.set)_e.set(L);else for(;J<U;++J)_e[J]=L[J];return _e}return L.length=G,L}function Gr(L){for(var V=new Array(L),U=0;U<L;++U)V[U]=0;return V}function Xr(L,V,U){var G=1,J=0,Y=0,_e=0,De=0,be=L.length,ve=We?new Uint16Array(32):Gr(32);for(Y=0;Y<32;++Y)ve[Y]=0;for(Y=be;Y<U;++Y)L[Y]=0;be=L.length;var Se=We?new Uint16Array(be):Gr(be);for(Y=0;Y<be;++Y)ve[J=L[Y]]++,G<J&&(G=J),Se[Y]=0;for(ve[0]=0,Y=1;Y<=G;++Y)ve[Y+16]=De=De+ve[Y-1]<<1;for(Y=0;Y<be;++Y)0!=(De=L[Y])&&(Se[Y]=ve[De+16]++);var Ze=0;for(Y=0;Y<be;++Y)if(0!=(Ze=L[Y]))for(De=W(Se[Y],G)>>G-Ze,_e=(1<<G+4-Ze)-1;_e>=0;--_e)V[De|_e<<Ze]=15&Ze|Y<<4;return G}var lr=We?new Uint16Array(512):Gr(512),_d=We?new Uint16Array(32):Gr(32);if(!We){for(var Pi=0;Pi<512;++Pi)lr[Pi]=0;for(Pi=0;Pi<32;++Pi)_d[Pi]=0}!function(){for(var L=[],V=0;V<32;V++)L.push(5);Xr(L,_d,32);var U=[];for(V=0;V<=143;V++)U.push(8);for(;V<=255;V++)U.push(9);for(;V<=279;V++)U.push(7);for(;V<=287;V++)U.push(8);Xr(U,lr,288)}();var Pn=function(){for(var V=We?new Uint8Array(32768):[],U=0,G=0;U<ot.length-1;++U)for(;G<ot[U+1];++G)V[G]=U;for(;G<32768;++G)V[G]=29;var J=We?new Uint8Array(259):[];for(U=0,G=0;U<Ee.length-1;++U)for(;G<Ee[U+1];++G)J[G]=U;return function(be,ve){return be.length<8?function Y(De,be){for(var ve=0;ve<De.length;){var Se=Math.min(65535,De.length-ve);for(be.write_shift(1,+(ve+Se==De.length)),be.write_shift(2,Se),be.write_shift(2,65535&~Se);Se-- >0;)be[be.l++]=De[ve++]}return be.l}(be,ve):function _e(De,be){for(var ve=0,Se=0,Ze=We?new Uint16Array(32768):[];Se<De.length;){var Xe=Math.min(65535,De.length-Se);if(Xe<10){for(7&(ve=Qr(be,ve,+(Se+Xe==De.length)))&&(ve+=8-(7&ve)),be.l=ve/8|0,be.write_shift(2,Xe),be.write_shift(2,65535&~Xe);Xe-- >0;)be[be.l++]=De[Se++];ve=8*be.l}else{ve=Qr(be,ve,+(Se+Xe==De.length)+2);for(var gt=0;Xe-- >0;){var et=De[Se],rt=-1,Pt=0;if((rt=Ze[gt=32767&(gt<<5^et)])&&((rt|=-32768&Se)>Se&&(rt-=32768),rt<Se))for(;De[rt+Pt]==De[Se+Pt]&&Pt<250;)++Pt;if(Pt>2){(et=J[Pt])<=22?ve=ho(be,ve,Le[et+1]>>1)-1:(ho(be,ve,3),ho(be,ve+=5,Le[et-23]>>5),ve+=3);var Mn=et<8?0:et-4>>2;Mn>0&&(gd(be,ve,Pt-Ee[et]),ve+=Mn),ve=ho(be,ve,Le[et=V[Se-rt]]>>3),ve-=3;var _r=et<4?0:et-2>>1;_r>0&&(gd(be,ve,Se-rt-ot[et]),ve+=_r);for(var si=0;si<Pt;++si)Ze[gt]=32767&Se,gt=32767&(gt<<5^De[Se]),++Se;Xe-=Pt-1}else et<=143?et+=48:ve=Br(be,ve,1),ve=ho(be,ve,Le[et]),Ze[gt]=32767&Se,++Se}ve=ho(be,ve,0)-1}}return be.l=(ve+7)/8|0,be.l}(be,ve)}}();function nn(L){var V=Te(50+Math.floor(1.1*L.length)),U=Pn(L,V);return V.slice(0,U)}var ri=We?new Uint16Array(32768):Gr(32768),es=We?new Uint16Array(32768):Gr(32768),ui=We?new Uint16Array(128):Gr(128),Va=1,ts=1;function Hw(L,V){var U=Nt(L,V)+257,G=Nt(L,V+=5)+1,J=function tn(L,V){var U=7&V,G=V>>>3;return(L[G]|(U<=4?0:L[G+1]<<8))>>>U&15}(L,V+=5)+4;V+=4;for(var Y=0,_e=We?new Uint8Array(19):Gr(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],be=1,ve=We?new Uint8Array(8):Gr(8),Se=We?new Uint8Array(8):Gr(8),Ze=_e.length,Xe=0;Xe<J;++Xe)_e[ne[Xe]]=Y=Kt(L,V),be<Y&&(be=Y),ve[Y]++,V+=3;var gt=0;for(ve[0]=0,Xe=1;Xe<=be;++Xe)Se[Xe]=gt=gt+ve[Xe-1]<<1;for(Xe=0;Xe<Ze;++Xe)0!=(gt=_e[Xe])&&(De[Xe]=Se[gt]++);var et=0;for(Xe=0;Xe<Ze;++Xe)if(0!=(et=_e[Xe])){gt=Le[De[Xe]]>>8-et;for(var rt=(1<<7-et)-1;rt>=0;--rt)ui[gt|rt<<et]=7&et|Xe<<3}var Pt=[];for(be=1;Pt.length<U+G;)switch(gt=ui[Ke(L,V)],V+=7&gt,gt>>>=3){case 16:for(Y=3+At(L,V),V+=2,gt=Pt[Pt.length-1];Y-- >0;)Pt.push(gt);break;case 17:for(Y=3+Kt(L,V),V+=3;Y-- >0;)Pt.push(0);break;case 18:for(Y=11+Ke(L,V),V+=7;Y-- >0;)Pt.push(0);break;default:Pt.push(gt),be<gt&&(be=gt)}var Mn=Pt.slice(0,U),_r=Pt.slice(U);for(Xe=U;Xe<286;++Xe)Mn[Xe]=0;for(Xe=G;Xe<30;++Xe)_r[Xe]=0;return Va=Xr(Mn,ri,286),ts=Xr(_r,es,30),V}function fo(L,V){var G=function Us(L,V){if(3==L[0]&&!(3&L[1]))return[re(V),2];for(var U=0,G=0,J=ae(V||1<<18),Y=0,_e=J.length>>>0,De=0,be=0;0==(1&G);)if(G=Kt(L,U),U+=3,G>>>1!=0)for(G>>1==1?(De=9,be=5):(U=Hw(L,U),De=Va,be=ts);;){!V&&_e<Y+32767&&(_e=(J=Xo(J,Y+32767)).length);var Se=wn(L,U,De),Ze=G>>>1==1?lr[Se]:ri[Se];if(U+=15&Ze,0==((Ze>>>=4)>>>8&255))J[Y++]=Ze;else{if(256==Ze)break;var Xe=(Ze-=257)<8?0:Ze-4>>2;Xe>5&&(Xe=0);var gt=Y+Ee[Ze];Xe>0&&(gt+=wn(L,U,Xe),U+=Xe),Se=wn(L,U,be),U+=15&(Ze=G>>>1==1?_d[Se]:es[Se]);var et=(Ze>>>=4)<4?0:Ze-2>>1,rt=ot[Ze];for(et>0&&(rt+=wn(L,U,et),U+=et),!V&&_e<gt&&(_e=(J=Xo(J,gt+100)).length);Y<gt;)J[Y]=J[Y-rt],++Y}}else{7&U&&(U+=8-(7&U));var ve=L[U>>>3]|L[1+(U>>>3)]<<8;if(U+=32,ve>0)for(!V&&_e<Y+ve&&(_e=(J=Xo(J,Y+ve)).length);ve-- >0;)J[Y++]=L[U>>>3],U+=8}return V?[J,U+7>>>3]:[J.slice(0,Y),U+7>>>3]}(L.slice(L.l||0),V);return L.l+=G[1],G[0]}function ov(L,V){if(!L)throw new Error(V);typeof console<"u"&&console.error(V)}function av(L,V){var U=L;Qi(U,0);var Y={FileIndex:[],FullPaths:[]};j(Y,{root:V.root});for(var _e=U.length-4;(80!=U[_e]||75!=U[_e+1]||5!=U[_e+2]||6!=U[_e+3])&&_e>=0;)--_e;U.l=_e+4,U.l+=4;var De=U.read_shift(2);U.l+=6;var be=U.read_shift(4);for(U.l=be,_e=0;_e<De;++_e){U.l+=20;var ve=U.read_shift(4),Se=U.read_shift(4),Ze=U.read_shift(2),Xe=U.read_shift(2),gt=U.read_shift(2);U.l+=8;var et=U.read_shift(4),rt=v(U.slice(U.l+Ze,U.l+Ze+Xe));U.l+=Ze+Xe+gt;var Pt=U.l;U.l=et+4,Vw(U,ve,Se,Y,rt),U.l=Pt}return Y}function Vw(L,V,U,G,J){L.l+=2;var Y=L.read_shift(2),_e=L.read_shift(2),De=function _(L){var V=65535&L.read_shift(2),U=65535&L.read_shift(2),G=new Date,J=31&U,Y=15&(U>>>=5);U>>>=4,G.setMilliseconds(0),G.setFullYear(U+1980),G.setMonth(Y-1),G.setDate(J);var _e=31&V,De=63&(V>>>=5);return G.setHours(V>>>=6),G.setMinutes(De),G.setSeconds(_e<<1),G}(L);if(8257&Y)throw new Error("Unsupported ZIP encryption");L.read_shift(4);for(var ve=L.read_shift(4),Se=L.read_shift(4),Ze=L.read_shift(2),Xe=L.read_shift(2),gt="",et=0;et<Ze;++et)gt+=String.fromCharCode(L[L.l++]);if(Xe){var rt=v(L.slice(L.l,L.l+Xe));(rt[21589]||{}).mt&&(De=rt[21589].mt),((J||{})[21589]||{}).mt&&(De=J[21589].mt)}L.l+=Xe;var Pt=L.slice(L.l,L.l+ve);switch(_e){case 8:Pt=function xe(L,V){if(!Pe)return fo(L,V);var G=new(0,Pe.InflateRaw),J=G._processChunk(L.slice(L.l),G._finishFlushFlag);return L.l+=G.bytesRead,J}(L,Se);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+_e)}var Mn=!1;8&Y&&(134695760==L.read_shift(4)&&(L.read_shift(4),Mn=!0),ve=L.read_shift(4),Se=L.read_shift(4)),ve!=V&&ov(Mn,"Bad compressed size: "+V+" != "+ve),Se!=U&&ov(Mn,"Bad uncompressed size: "+U+" != "+Se),$l(G,gt,Pt,{unsafe:!0,mt:De})}var Kl={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function cv(L,V){if(L.ctype)return L.ctype;var U=L.name||"",G=U.match(/\.([^\.]+)$/);return G&&Kl[G[1]]||V&&(G=(U=V).match(/[\.\\]([^\.\\])+$/))&&Kl[G[1]]?Kl[G[1]]:"application/octet-stream"}function Sm(L){for(var V=w(L),U=[],G=0;G<V.length;G+=76)U.push(V.slice(G,G+76));return U.join("\r\n")+"\r\n"}function dv(L){var V=L.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ve){var Se=ve.charCodeAt(0).toString(16).toUpperCase();return"="+(1==Se.length?"0"+Se:Se)});"\n"==(V=V.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(V="=0D"+V.slice(1));for(var U=[],G=(V=V.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),J=0;J<G.length;++J){var Y=G[J];if(0!=Y.length)for(var _e=0;_e<Y.length;){var De=76,be=Y.slice(_e,_e+De);"="==be.charAt(De-1)?De--:"="==be.charAt(De-2)?De-=2:"="==be.charAt(De-3)&&(De-=3),be=Y.slice(_e,_e+De),(_e+=De)<Y.length&&(be+="="),U.push(be)}else U.push("")}return U.join("\r\n")}function Iy(L,V,U){for(var _e,G="",J="",Y="",De=0;De<10;++De){var be=V[De];if(!be||be.match(/^\s*$/))break;var ve=be.match(/^(.*?):\s*([^\s].*)$/);if(ve)switch(ve[1].toLowerCase()){case"content-location":G=ve[2].trim();break;case"content-type":Y=ve[2].trim();break;case"content-transfer-encoding":J=ve[2].trim()}}switch(++De,J.toLowerCase()){case"base64":_e=ee(M(V.slice(De).join("")));break;case"quoted-printable":_e=function Sh(L){for(var V=[],U=0;U<L.length;++U){for(var G=L[U];U<=L.length&&"="==G.charAt(G.length-1);)G=G.slice(0,G.length-1)+L[++U];V.push(G)}for(var J=0;J<V.length;++J)V[J]=V[J].replace(/[=][0-9A-Fa-f]{2}/g,function(Y){return String.fromCharCode(parseInt(Y.slice(1),16))});return ee(V.join("\r\n"))}(V.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+J)}var Se=$l(L,G.slice(U.length),_e,{unsafe:!0});Y&&(Se.ctype=Y)}function $l(L,V,U,G){var J=G&&G.unsafe;J||j(L);var Y=!J&&Ct.find(L,V);if(!Y){var _e=L.FullPaths[0];V.slice(0,_e.length)==_e?_e=V:("/"!=_e.slice(-1)&&(_e+="/"),_e=(_e+V).replace("//","/")),Y={name:h(V),type:2},L.FileIndex.push(Y),L.FullPaths.push(_e),J||Ct.utils.cfb_gc(L)}return Y.content=U,Y.size=U?U.length:0,G&&(G.CLSID&&(Y.clsid=G.CLSID),G.mt&&(Y.mt=G.mt),G.ct&&(Y.ct=G.ct)),Y}return c.find=function ye(L,V){var U=L.FullPaths.map(function(be){return be.toUpperCase()}),G=U.map(function(be){var ve=be.split("/");return ve[ve.length-("/"==be.slice(-1)?2:1)]}),J=!1;47===V.charCodeAt(0)?(J=!0,V=U[0].slice(0,-1)+V):J=-1!==V.indexOf("/");var Y=V.toUpperCase(),_e=!0===J?U.indexOf(Y):G.indexOf(Y);if(-1!==_e)return L.FileIndex[_e];var De=!Y.match(dt);for(Y=Y.replace(Ie,""),De&&(Y=Y.replace(dt,"!")),_e=0;_e<U.length;++_e)if((De?U[_e].replace(dt,"!"):U[_e]).replace(Ie,"")==Y||(De?G[_e].replace(dt,"!"):G[_e]).replace(Ie,"")==Y)return L.FileIndex[_e];return null},c.read=function we(L,V){var U=V&&V.type;switch(U||O&&Buffer.isBuffer(L)&&(U="buffer"),U||"base64"){case"file":return function ge(L,V){return C(),E(x.readFileSync(L),V)}(L,V);case"base64":return E(ee(M(L)),V);case"binary":return E(ee(L),V)}return E(L,V)},c.parse=E,c.write=function It(L,V){var U=Ce(L,V);switch(V&&V.type||"buffer"){case"file":return C(),x.writeFileSync(V.filename,U),U;case"binary":return"string"==typeof U?U:ct(U);case"base64":return w("string"==typeof U?U:ct(U));case"buffer":if(O)return Buffer.isBuffer(U)?U:q(U);case"array":return"string"==typeof U?ee(U):U}return U},c.writeFile=function rn(L,V,U){C();var G=Ce(L,U);x.writeFileSync(V,G)},c.utils={cfb_new:function Jw(L){var V={};return j(V,L),V},cfb_add:$l,cfb_del:function vd(L,V){j(L);var U=Ct.find(L,V);if(U)for(var G=0;G<L.FileIndex.length;++G)if(L.FileIndex[G]==U)return L.FileIndex.splice(G,1),L.FullPaths.splice(G,1),!0;return!1},cfb_mov:function My(L,V,U){j(L);var G=Ct.find(L,V);if(G)for(var J=0;J<L.FileIndex.length;++J)if(L.FileIndex[J]==G)return L.FileIndex[J].name=h(U),L.FullPaths[J]=U,!0;return!1},cfb_gc:function Ry(L){ce(L,!0)},ReadShift:Cc,CheckField:gx,prep_blob:Qi,bconcat:Ne,use_zlib:function Q(L){try{var U=new(0,L.InflateRaw);if(U._processChunk(new Uint8Array([3,0]),U._finishFlushFlag),!U.bytesRead)throw new Error("zlib does not expose bytesRead");Pe=L}catch(G){console.error("cannot use native zlib: "+(G.message||G))}},_deflateRaw:nn,_inflateRaw:fo,consts:_t},c}();function Xd(o){return"string"==typeof o?me(o):Array.isArray(o)?function He(o){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(o)}(o):o}function eu(o,c,l){if(typeof Deno<"u"){if(l&&"string"==typeof c)switch(l){case"utf8":c=new TextEncoder(l).encode(c);break;case"binary":c=me(c);break;default:throw new Error("Unsupported encoding "+l)}return Deno.writeFileSync(o,c)}var u="utf8"==l?Lr(c):c;if(typeof IE_SaveFile<"u")return IE_SaveFile(u,o);if(typeof Blob<"u"){var h=new Blob([Xd(u)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(h,o);if(typeof saveAs<"u")return saveAs(h,o);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var m=URL.createObjectURL(h);if("object"==typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(m)},6e4),chrome.downloads.download({url:m,filename:o,saveAs:!0});var _=document.createElement("a");if(null!=_.download)return _.download=o,_.href=m,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(m)},6e4),m}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var v=File(o);return v.open("w"),v.encoding="binary",Array.isArray(c)&&(c=Ye(c)),v.write(c),v.close(),c}catch(x){if(!x.message||!x.message.match(/onstruct/))throw x}throw new Error("cannot save file "+o)}function ni(o){for(var c=Object.keys(o),l=[],u=0;u<c.length;++u)Object.prototype.hasOwnProperty.call(o,c[u])&&l.push(c[u]);return l}function tu(o,c){for(var l=[],u=ni(o),h=0;h!==u.length;++h)null==l[o[u[h]][c]]&&(l[o[u[h]][c]]=u[h]);return l}function nu(o){for(var c=[],l=ni(o),u=0;u!==l.length;++u)c[o[l[u]]]=l[u];return c}function iu(o){for(var c=[],l=ni(o),u=0;u!==l.length;++u)c[o[l[u]]]=parseInt(l[u],10);return c}var pc=new Date(1899,11,30,0,0,0);function bi(o,c){var l=o.getTime();return c&&(l-=1263168e5),(l-(pc.getTime()+6e4*(o.getTimezoneOffset()-pc.getTimezoneOffset())))/864e5}var tx=new Date,ug=pc.getTime()+6e4*(tx.getTimezoneOffset()-pc.getTimezoneOffset()),hg=tx.getTimezoneOffset();function fg(o){var c=new Date;return c.setTime(24*o*60*60*1e3+ug),c.getTimezoneOffset()!==hg&&c.setTime(c.getTime()+6e4*(c.getTimezoneOffset()-hg)),c}var nx=new Date("2017-02-19T19:06:09.000Z"),ix=isNaN(nx.getFullYear())?new Date("2/19/17"):nx,Es=2017==ix.getFullYear();function pn(o,c){var l=new Date(o);if(Es)return c>0?l.setTime(l.getTime()+60*l.getTimezoneOffset()*1e3):c<0&&l.setTime(l.getTime()-60*l.getTimezoneOffset()*1e3),l;if(o instanceof Date)return o;if(1917==ix.getFullYear()&&!isNaN(l.getFullYear())){var u=l.getFullYear();return o.indexOf(""+u)>-1||l.setFullYear(l.getFullYear()+100),l}var h=o.match(/\d+/g)||["2017","2","19","0","0","0"],m=new Date(+h[0],+h[1]-1,+h[2],+h[3]||0,+h[4]||0,+h[5]||0);return o.indexOf("Z")>-1&&(m=new Date(m.getTime()-60*m.getTimezoneOffset()*1e3)),m}function To(o,c){if(O&&Buffer.isBuffer(o)){if(c){if(255==o[0]&&254==o[1])return Lr(o.slice(2).toString("utf16le"));if(254==o[1]&&255==o[2])return Lr(function H(o){for(var c=[],l=0;l<o.length>>1;++l)c[l]=String.fromCharCode(o.charCodeAt(2*l+1)+(o.charCodeAt(2*l)<<8));return c.join("")}(o.slice(2).toString("binary")))}return o.toString("binary")}if(typeof TextDecoder<"u")try{if(c){if(255==o[0]&&254==o[1])return Lr(new TextDecoder("utf-16le").decode(o.slice(2)));if(254==o[0]&&255==o[1])return Lr(new TextDecoder("utf-16be").decode(o.slice(2)))}var l={"\u20ac":"\x80","\u201a":"\x82",\u0192:"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87",\u02c6:"\x88","\u2030":"\x89",\u0160:"\x8a","\u2039":"\x8b",\u0152:"\x8c",\u017d:"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99",\u0161:"\x9a","\u203a":"\x9b",\u0153:"\x9c",\u017e:"\x9e",\u0178:"\x9f"};return Array.isArray(o)&&(o=new Uint8Array(o)),new TextDecoder("latin1").decode(o).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(m){return l[m]||m})}catch{}for(var u=[],h=0;h!=o.length;++h)u.push(String.fromCharCode(o[h]));return u.join("")}function xn(o){if(typeof JSON<"u"&&!Array.isArray(o))return JSON.parse(JSON.stringify(o));if("object"!=typeof o||null==o)return o;if(o instanceof Date)return new Date(o.getTime());var c={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(c[l]=xn(o[l]));return c}function $n(o,c){for(var l="";l.length<c;)l+=o;return l}function Rr(o){var c=Number(o);if(!isNaN(c))return isFinite(c)?c:NaN;if(!/\d/.test(o))return c;var l=1,u=o.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return l*=100,""});return isNaN(c=Number(u))&&(u=u.replace(/[(](.*)[)]/,function(h,m){return l=-l,m}),isNaN(c=Number(u)))?c:c/l}var pg=["january","february","march","april","may","june","july","august","september","october","november","december"];function al(o){var c=new Date(o),l=new Date(NaN),u=c.getYear(),h=c.getMonth(),m=c.getDate();if(isNaN(m))return l;var _=o.toLowerCase();if(_.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((_=_.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==pg.indexOf(_))return l}else if(_.match(/[a-z]/))return l;return u<0||u>8099?l:(h>0||m>1)&&101!=u?c:o.match(/[^-0-9:,\/\\]/)?l:c}function Vt(o,c,l){if(o.FullPaths){var u;if("string"==typeof l)return u=O?q(l):function te(o){for(var c=[],l=0,u=o.length+250,h=re(o.length+255),m=0;m<o.length;++m){var _=o.charCodeAt(m);if(_<128)h[l++]=_;else if(_<2048)h[l++]=192|_>>6&31,h[l++]=128|63&_;else if(_>=55296&&_<57344){_=64+(1023&_);var v=1023&o.charCodeAt(++m);h[l++]=240|_>>8&7,h[l++]=128|_>>2&63,h[l++]=128|v>>6&15|(3&_)<<4,h[l++]=128|63&v}else h[l++]=224|_>>12&15,h[l++]=128|_>>6&63,h[l++]=128|63&_;l>u&&(c.push(h.slice(0,l)),l=0,h=re(65535),u=65530)}return c.push(h.slice(0,l)),Ne(c)}(l),Ct.utils.cfb_add(o,c,u);Ct.utils.cfb_add(o,c,l)}else o.file(c,l)}function _g(){return Ct.utils.cfb_new()}var Yt='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',bg=nu({"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"}),rf=/[&<>'"]/g,ox=/[\u0000-\u0008\u000b-\u001f]/g;function Cn(o){return(o+"").replace(rf,function(l){return bg[l]}).replace(ox,function(l){return"_x"+("000"+l.charCodeAt(0).toString(16)).slice(-4)+"_"})}function cn(o){return Cn(o).replace(/ /g,"_x0020_")}var Si=/[\u0000-\u001f]/g;function ax(o){return(o+"").replace(rf,function(l){return bg[l]}).replace(/\n/g,"<br/>").replace(Si,function(l){return"&#x"+("000"+l.charCodeAt(0).toString(16)).slice(-4)+";"})}function gc(o){for(var c="",l=0,u=0,h=0,m=0,_=0,v=0;l<o.length;)(u=o.charCodeAt(l++))<128?c+=String.fromCharCode(u):(h=o.charCodeAt(l++),u>191&&u<224?(_=(31&u)<<6,_|=63&h,c+=String.fromCharCode(_)):(m=o.charCodeAt(l++),u<240?c+=String.fromCharCode((15&u)<<12|(63&h)<<6|63&m):(v=((7&u)<<18|(63&h)<<12|(63&m)<<6|63&(_=o.charCodeAt(l++)))-65536,c+=String.fromCharCode(55296+(v>>>10&1023)),c+=String.fromCharCode(56320+(1023&v)))));return c}function lx(o){var l,u,v,c=re(2*o.length),h=1,m=0,_=0;for(u=0;u<o.length;u+=h)h=1,(v=o.charCodeAt(u))<128?l=v:v<224?(l=64*(31&v)+(63&o.charCodeAt(u+1)),h=2):v<240?(l=4096*(15&v)+64*(63&o.charCodeAt(u+1))+(63&o.charCodeAt(u+2)),h=3):(h=4,l=262144*(7&v)+4096*(63&o.charCodeAt(u+1))+64*(63&o.charCodeAt(u+2))+(63&o.charCodeAt(u+3)),_=55296+((l-=65536)>>>10&1023),l=56320+(1023&l)),0!==_&&(c[m++]=255&_,c[m++]=_>>>8,_=0),c[m++]=l%256,c[m++]=l>>>8;return c.slice(0,m).toString("ucs2")}function _c(o){return q(o,"binary").toString("utf8")}var ll="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Bn=O&&(_c(ll)==gc(ll)&&_c||lx(ll)==gc(ll)&&lx)||gc,Lr=O?function(o){return q(o,"utf8").toString("binary")}:function(o){for(var c=[],l=0,u=0,h=0;l<o.length;)switch(u=o.charCodeAt(l++),!0){case u<128:c.push(String.fromCharCode(u));break;case u<2048:c.push(String.fromCharCode(192+(u>>6))),c.push(String.fromCharCode(128+(63&u)));break;case u>=55296&&u<57344:u-=55296,h=o.charCodeAt(l++)-56320+(u<<10),c.push(String.fromCharCode(240+(h>>18&7))),c.push(String.fromCharCode(144+(h>>12&63))),c.push(String.fromCharCode(128+(h>>6&63))),c.push(String.fromCharCode(128+(63&h)));break;default:c.push(String.fromCharCode(224+(u>>12))),c.push(String.fromCharCode(128+(u>>6&63))),c.push(String.fromCharCode(128+(63&u)))}return c.join("")},af=function(){var o=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(c){return[new RegExp("&"+c[0]+";","ig"),c[1]]});return function(l){for(var u=l.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),h=0;h<o.length;++h)u=u.replace(o[h][0],o[h][1]);return u}}(),vc=/(^\s|\s$|\n)/;function yi(o,c){return"<"+o+(c.match(vc)?' xml:space="preserve"':"")+">"+c+"</"+o+">"}function su(o){return ni(o).map(function(c){return" "+c+'="'+o[c]+'"'}).join("")}function qe(o,c,l){return"<"+o+(null!=l?su(l):"")+(null!=c?(c.match(vc)?' xml:space="preserve"':"")+">"+c+"</"+o:"/")+">"}function lf(o,c){try{return o.toISOString().replace(/\.\d*/,"")}catch(l){if(c)throw l}return""}var Wn_TCMNT="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",Wn_r="http://schemas.openxmlformats.org/officeDocument/2006/relationships",Wn_vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",Wn_xsi="http://www.w3.org/2001/XMLSchema-instance",Ks=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ji_o="urn:schemas-microsoft-com:office:office",ji_x="urn:schemas-microsoft-com:office:excel",ji_ss="urn:schemas-microsoft-com:office:spreadsheet",ux=function(o){for(var c=[],u=0;u<o[0].length;++u)if(o[0][u])for(var h=0,m=o[0][u].length;h<m;h+=10240)c.push.apply(c,o[0][u].slice(h,h+10240));return c},cf=O?function(o){return o[0].length>0&&Buffer.isBuffer(o[0][0])?Buffer.concat(o[0].map(function(c){return Buffer.isBuffer(c)?c:q(c)})):ux(o)}:ux,kg=function(o,c,l){for(var u=[],h=c;h<l;h+=2)u.push(String.fromCharCode($s(o,h)));return u.join("").replace(Ie,"")},xc=O?function(o,c,l){return Buffer.isBuffer(o)?o.toString("utf16le",c,l).replace(Ie,""):kg(o,c,l)}:kg,Tg=function(o,c,l){for(var u=[],h=c;h<c+l;++h)u.push(("0"+o[h].toString(16)).slice(-2));return u.join("")},yg=O?function(o,c,l){return Buffer.isBuffer(o)?o.toString("hex",c,c+l):Tg(o,c,l)}:Tg,Dg=function(o,c,l){for(var u=[],h=c;h<l;h++)u.push(String.fromCharCode(dl(o,h)));return u.join("")},cl=O?function(c,l,u){return Buffer.isBuffer(c)?c.toString("utf8",l,u):Dg(c,l,u)}:Dg,Ag=function(o,c){var l=jn(o,c);return l>0?cl(o,c+4,c+4+l-1):""},ou=Ag,hx=function(o,c){var l=jn(o,c);return l>0?cl(o,c+4,c+4+l-1):""},ma=hx,Og=function(o,c){var l=2*jn(o,c);return l>0?cl(o,c+4,c+4+l-1):""},df=Og,uf=function(c,l){var u=jn(c,l);return u>0?xc(c,l+4,l+4+u):""},hf=uf,Ig=function(o,c){var l=jn(o,c);return l>0?cl(o,c+4,c+4+l):""},ff=Ig,Mg=function(o,c){return function Eg(o,c){for(var l=1-2*(o[c+7]>>>7),u=((127&o[c+7])<<4)+(o[c+6]>>>4&15),h=15&o[c+6],m=5;m>=0;--m)h=256*h+o[c+m];return 2047==u?0==h?l*(1/0):NaN:(0==u?u=-1022:(u-=1023,h+=Math.pow(2,52)),l*Math.pow(2,u-52)*h)}(o,c)},au=Mg,pf=function(c){return Array.isArray(c)||typeof Uint8Array<"u"&&c instanceof Uint8Array};O&&(ou=function(c,l){if(!Buffer.isBuffer(c))return Ag(c,l);var u=c.readUInt32LE(l);return u>0?c.toString("utf8",l+4,l+4+u-1):""},ma=function(c,l){if(!Buffer.isBuffer(c))return hx(c,l);var u=c.readUInt32LE(l);return u>0?c.toString("utf8",l+4,l+4+u-1):""},df=function(c,l){if(!Buffer.isBuffer(c))return Og(c,l);var u=2*c.readUInt32LE(l);return c.toString("utf16le",l+4,l+4+u-1)},hf=function(c,l){if(!Buffer.isBuffer(c))return uf(c,l);var u=c.readUInt32LE(l);return c.toString("utf16le",l+4,l+4+u)},ff=function(c,l){if(!Buffer.isBuffer(c))return Ig(c,l);var u=c.readUInt32LE(l);return c.toString("utf8",l+4,l+4+u)},au=function(c,l){return Buffer.isBuffer(c)?c.readDoubleLE(l):Mg(c,l)},pf=function(c){return Buffer.isBuffer(c)||Array.isArray(c)||typeof Uint8Array<"u"&&c instanceof Uint8Array});var dl=function(o,c){return o[c]},$s=function(o,c){return 256*o[c+1]+o[c]},fx=function(o,c){var l=256*o[c+1]+o[c];return l<32768?l:-1*(65535-l+1)},jn=function(o,c){return o[c+3]*(1<<24)+(o[c+2]<<16)+(o[c+1]<<8)+o[c]},ga=function(o,c){return o[c+3]<<24|o[c+2]<<16|o[c+1]<<8|o[c]},px=function(o,c){return o[c]<<24|o[c+1]<<16|o[c+2]<<8|o[c+3]};function Cc(o,c){var u,h,_,v,x,C,l="",m=[];switch(c){case"dbcs":if(C=this.l,O&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*o).toString("utf16le");else for(x=0;x<o;++x)l+=String.fromCharCode($s(this,C)),C+=2;o*=2;break;case"utf8":l=cl(this,this.l,this.l+o);break;case"utf16le":l=xc(this,this.l,this.l+(o*=2));break;case"wstr":return Cc.call(this,o,"dbcs");case"lpstr-ansi":l=ou(this,this.l),o=4+jn(this,this.l);break;case"lpstr-cp":l=ma(this,this.l),o=4+jn(this,this.l);break;case"lpwstr":l=df(this,this.l),o=4+2*jn(this,this.l);break;case"lpp4":o=4+jn(this,this.l),l=hf(this,this.l),2&o&&(o+=2);break;case"8lpp4":o=4+jn(this,this.l),l=ff(this,this.l),3&o&&(o+=4-(3&o));break;case"cstr":for(o=0,l="";0!==(_=dl(this,this.l+o++));)m.push(An(_));l=m.join("");break;case"_wstr":for(o=0,l="";0!==(_=$s(this,this.l+o));)m.push(An(_)),o+=2;o+=2,l=m.join("");break;case"dbcs-cont":for(l="",C=this.l,x=0;x<o;++x){if(this.lens&&-1!==this.lens.indexOf(C))return _=dl(this,C),this.l=C+1,v=Cc.call(this,o-x,_?"dbcs-cont":"sbcs-cont"),m.join("")+v;m.push(An($s(this,C))),C+=2}l=m.join(""),o*=2;break;case"cpstr":0;case"sbcs-cont":for(l="",C=this.l,x=0;x!=o;++x){if(this.lens&&-1!==this.lens.indexOf(C))return _=dl(this,C),this.l=C+1,v=Cc.call(this,o-x,_?"dbcs-cont":"sbcs-cont"),m.join("")+v;m.push(An(dl(this,C))),C+=1}l=m.join("");break;default:switch(o){case 1:return u=dl(this,this.l),this.l++,u;case 2:return u=("i"===c?fx:$s)(this,this.l),this.l+=2,u;case 4:case-4:return"i"===c||0==(128&this[this.l+3])?(u=(o>0?ga:px)(this,this.l),this.l+=4,u):(h=jn(this,this.l),this.l+=4,h);case 8:case-8:if("f"===c)return h=8==o?au(this,this.l):au([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,h;o=8;case 16:l=yg(this,this.l,o)}}return this.l+=o,l}var JT=function(o,c,l){o[l]=255&c,o[l+1]=c>>>8&255};function qT(o,c,l){var u=0,h=0;if("dbcs"===l){for(h=0;h!=c.length;++h)JT(this,c.charCodeAt(h),this.l+2*h);u=2*c.length}else if("sbcs"===l){for(c=c.replace(/[^\x00-\x7F]/g,"_"),h=0;h!=c.length;++h)this[this.l+h]=255&c.charCodeAt(h);u=c.length}else{if("hex"===l){for(;h<o;++h)this[this.l++]=parseInt(c.slice(2*h,2*h+2),16)||0;return this}if("utf16le"===l){var _=Math.min(this.l+o,this.length);for(h=0;h<Math.min(c.length,o);++h){var v=c.charCodeAt(h);this[this.l++]=255&v,this[this.l++]=v>>8}for(;this.l<_;)this[this.l++]=0;return this}switch(o){case 1:u=1,this[this.l]=255&c;break;case 2:u=2,this[this.l]=255&c,this[this.l+1]=255&(c>>>=8);break;case 3:u=3,this[this.l]=255&c,this[this.l+1]=255&(c>>>=8),this[this.l+2]=255&(c>>>=8);break;case 4:u=4,function(o,c,l){o[l]=255&c,o[l+1]=c>>>8&255,o[l+2]=c>>>16&255,o[l+3]=c>>>24&255}(this,c,this.l);break;case 8:if(u=8,"f"===l){!function wg(o,c,l){var u=(c<0||1/c==-1/0?1:0)<<7,h=0,m=0,_=u?-c:c;isFinite(_)?0==_?h=m=0:(h=Math.floor(Math.log(_)/Math.LN2),m=_*Math.pow(2,52-h),h<=-1023&&(!isFinite(m)||m<Math.pow(2,52))?h=-1022:(m-=Math.pow(2,52),h+=1023)):(h=2047,m=isNaN(c)?26985:0);for(var v=0;v<=5;++v,m/=256)o[l+v]=255&m;o[l+6]=(15&h)<<4|15&m,o[l+7]=h>>4|u}(this,c,this.l);break}case 16:break;case-4:u=4,function(o,c,l){o[l]=255&c,o[l+1]=c>>8&255,o[l+2]=c>>16&255,o[l+3]=c>>24&255}(this,c,this.l)}}return this.l+=u,this}function gx(o,c){var l=yg(this,this.l,o.length>>1);if(l!==o)throw new Error(c+"Expected "+o+" saw "+l);this.l+=o.length>>1}function Qi(o,c){o.l=c,o.read_shift=Cc,o.chk=gx,o.write_shift=qT}function Xi(o,c){o.l+=c}function Te(o){var c=re(o);return Qi(c,0),c}function Er(){var o=[],c=O?256:2048,l=function(C){var E=Te(C);return Qi(E,0),E},u=l(c),h=function(){!u||(u.length>u.l&&((u=u.slice(0,u.l)).l=u.length),u.length>0&&o.push(u),u=null)},m=function(C){return u&&C<u.length-u.l?u:(h(),u=l(Math.max(C+1,c)))};return{next:m,push:function(C){h(),null==(u=C).l&&(u.l=u.length),m(c)},end:function(){return h(),Ne(o)},_bufs:o}}function Fe(o,c,l,u){var m,h=+c;if(!isNaN(h)){u||(u=ud[h].p||(l||[]).length||0),m=1+(h>=128?1:0)+1,u>=128&&++m,u>=16384&&++m,u>=2097152&&++m;var _=o.next(m);h<=127?_.write_shift(1,h):(_.write_shift(1,128+(127&h)),_.write_shift(1,h>>7));for(var v=0;4!=v;++v){if(!(u>=128)){_.write_shift(1,u);break}_.write_shift(1,128+(127&u)),u>>=7}u>0&&pf(l)&&o.push(l)}}function lu(o,c,l){var u=xn(o);if(c.s?(u.cRel&&(u.c+=c.s.c),u.rRel&&(u.r+=c.s.r)):(u.cRel&&(u.c+=c.c),u.rRel&&(u.r+=c.r)),!l||l.biff<12){for(;u.c>=256;)u.c-=256;for(;u.r>=65536;)u.r-=65536}return u}function _x(o,c,l){var u=xn(o);return u.s=lu(u.s,c.s,l),u.e=lu(u.e,c.s,l),u}function St(o,c){if(o.cRel&&o.c<0)for(o=xn(o);o.c<0;)o.c+=c>8?16384:256;if(o.rRel&&o.r<0)for(o=xn(o);o.r<0;)o.r+=c>8?1048576:c>5?65536:16384;var l=Mt(o);return!o.cRel&&null!=o.cRel&&(l=function cu(o){return o.replace(/^([A-Z])/,"$$$1")}(l)),!o.rRel&&null!=o.rRel&&(l=function _f(o){return o.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(l)),l}function mf(o,c){return 0!=o.s.r||o.s.rRel||o.e.r!=(c.biff>=12?1048575:c.biff>=8?65536:16384)||o.e.rRel?0!=o.s.c||o.s.cRel||o.e.c!=(c.biff>=12?16383:255)||o.e.cRel?St(o.s,c.biff)+":"+St(o.e,c.biff):(o.s.rRel?"":"$")+Qn(o.s.r)+":"+(o.e.rRel?"":"$")+Qn(o.e.r):(o.s.cRel?"":"$")+Gn(o.s.c)+":"+(o.e.cRel?"":"$")+Gn(o.e.c)}function gf(o){return parseInt(function YT(o){return o.replace(/\$(\d+)$/,"$1")}(o),10)-1}function Qn(o){return""+(o+1)}function vf(o){for(var c=function KT(o){return o.replace(/^\$([A-Z])/,"$1")}(o),l=0,u=0;u!==c.length;++u)l=26*l+c.charCodeAt(u)-64;return l-1}function Gn(o){if(o<0)throw new Error("invalid column "+o);var c="";for(++o;o;o=Math.floor((o-1)/26))c=String.fromCharCode((o-1)%26+65)+c;return c}function ii(o){for(var c=0,l=0,u=0;u<o.length;++u){var h=o.charCodeAt(u);h>=48&&h<=57?c=10*c+(h-48):h>=65&&h<=90&&(l=26*l+(h-64))}return{c:l-1,r:c-1}}function Mt(o){for(var c=o.c+1,l="";c;c=(c-1)/26|0)l=String.fromCharCode((c-1)%26+65)+l;return l+(o.r+1)}function hr(o){var c=o.indexOf(":");return-1==c?{s:ii(o),e:ii(o)}:{s:ii(o.slice(0,c)),e:ii(o.slice(c+1))}}function Jt(o,c){return typeof c>"u"||"number"==typeof c?Jt(o.s,o.e):("string"!=typeof o&&(o=Mt(o)),"string"!=typeof c&&(c=Mt(c)),o==c?o:o+":"+c)}function on(o){var c={s:{c:0,r:0},e:{c:0,r:0}},l=0,u=0,h=0,m=o.length;for(l=0;u<m&&!((h=o.charCodeAt(u)-64)<1||h>26);++u)l=26*l+h;for(c.s.c=--l,l=0;u<m&&!((h=o.charCodeAt(u)-48)<0||h>9);++u)l=10*l+h;if(c.s.r=--l,u===m||10!=h)return c.e.c=c.s.c,c.e.r=c.s.r,c;for(++u,l=0;u!=m&&!((h=o.charCodeAt(u)-64)<1||h>26);++u)l=26*l+h;for(c.e.c=--l,l=0;u!=m&&!((h=o.charCodeAt(u)-48)<0||h>9);++u)l=10*l+h;return c.e.r=--l,c}function Ts(o,c,l){return null==o||null==o.t||"z"==o.t?"":void 0!==o.w?o.w:("d"==o.t&&!o.z&&l&&l.dateNF&&(o.z=l.dateNF),"e"==o.t?Xs[o.v]||o.v:function Fg(o,c){var l="d"==o.t&&c instanceof Date;if(null!=o.z)try{return o.w=Sr(o.z,l?bi(c):c)}catch{}try{return o.w=Sr((o.XF||{}).numFmtId||(l?14:0),l?bi(c):c)}catch{return""+c}}(o,c??o.v))}function Do(o,c){var l=c&&c.sheet?c.sheet:"Sheet1",u={};return u[l]=o,{SheetNames:[l],Sheets:u}}function ul(o,c,l){var u=l||{},h=o?Array.isArray(o):u.dense,m=o||(h?[]:{}),_=0,v=0;if(m&&null!=u.origin){if("number"==typeof u.origin)_=u.origin;else{var x="string"==typeof u.origin?ii(u.origin):u.origin;_=x.r,v=x.c}m["!ref"]||(m["!ref"]="A1:A1")}var C={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(m["!ref"]){var E=on(m["!ref"]);C.s.c=E.s.c,C.s.r=E.s.r,C.e.c=Math.max(C.e.c,E.e.c),C.e.r=Math.max(C.e.r,E.e.r),-1==_&&(C.e.r=_=E.e.r+1)}for(var D=0;D!=c.length;++D)if(c[D]){if(!Array.isArray(c[D]))throw new Error("aoa_to_sheet expects an array of arrays");for(var A=0;A!=c[D].length;++A)if(!(typeof c[D][A]>"u")){var I={v:c[D][A]},R=_+D,y=v+A;if(C.s.r>R&&(C.s.r=R),C.s.c>y&&(C.s.c=y),C.e.r<R&&(C.e.r=R),C.e.c<y&&(C.e.c=y),!c[D][A]||"object"!=typeof c[D][A]||Array.isArray(c[D][A])||c[D][A]instanceof Date)if(Array.isArray(I.v)&&(I.f=c[D][A][1],I.v=I.v[0]),null===I.v)if(I.f)I.t="n";else if(u.nullError)I.t="e",I.v=0;else{if(!u.sheetStubs)continue;I.t="z"}else"number"==typeof I.v?I.t="n":"boolean"==typeof I.v?I.t="b":I.v instanceof Date?(I.z=u.dateNF||xt[14],u.cellDates?(I.t="d",I.w=Sr(I.z,bi(I.v))):(I.t="n",I.v=bi(I.v),I.w=Sr(I.z,I.v))):I.t="s";else I=c[D][A];if(h)m[R]||(m[R]=[]),m[R][y]&&m[R][y].z&&(I.z=m[R][y].z),m[R][y]=I;else{var N=Mt({c:y,r:R});m[N]&&m[N].z&&(I.z=m[N].z),m[N]=I}}}return C.s.c<1e7&&(m["!ref"]=Jt(C)),m}function _a(o,c){return ul(null,o,c)}function er(o,c){return c||(c=Te(4)),c.write_shift(4,o),c}function Zi(o){var c=o.read_shift(4);return 0===c?"":o.read_shift(c,"dbcs")}function Ei(o,c){var l=!1;return null==c&&(l=!0,c=Te(4+2*o.length)),c.write_shift(4,o.length),o.length>0&&c.write_shift(0,o,"dbcs"),l?c.slice(0,c.l):c}function Lg(o){return{ich:o.read_shift(2),ifnt:o.read_shift(2)}}function uu(o,c){var l=o.l,u=o.read_shift(1),h=Zi(o),m=[],_={t:h,h};if(0!=(1&u)){for(var v=o.read_shift(4),x=0;x!=v;++x)m.push(Lg(o));_.r=m}else _.r=[{ich:0,ifnt:0}];return o.l=l+c,_}var hl=uu;function wr(o){var c=o.read_shift(4),l=o.read_shift(2);return l+=o.read_shift(1)<<16,o.l++,{c,iStyleRef:l}}function va(o,c){return null==c&&(c=Te(8)),c.write_shift(-4,o.c),c.write_shift(3,o.iStyleRef||o.s),c.write_shift(1,0),c}function ba(o){var c=o.read_shift(2);return c+=o.read_shift(1)<<16,o.l++,{c:-1,iStyleRef:c}}function ds(o,c){return null==c&&(c=Te(4)),c.write_shift(3,o.iStyleRef||o.s),c.write_shift(1,0),c}var Pg=Zi,Ug=Ei;function hu(o){var c=o.read_shift(4);return 0===c||4294967295===c?"":o.read_shift(c,"dbcs")}function fu(o,c){var l=!1;return null==c&&(l=!0,c=Te(127)),c.write_shift(4,o.length>0?o.length:4294967295),o.length>0&&c.write_shift(0,o,"dbcs"),l?c.slice(0,c.l):c}var xx=Zi,pu=hu,bf=fu;function xf(o){var c=o.slice(o.l,o.l+4),l=1&c[0],u=2&c[0];o.l+=4;var h=0===u?au([0,0,0,0,252&c[0],c[1],c[2],c[3]],0):ga(c,0)>>2;return l?h/100:h}function tr(o,c){null==c&&(c=Te(4));var l=0,u=0,h=100*o;if(o==(0|o)&&o>=-(1<<29)&&o<1<<29?u=1:h==(0|h)&&h>=-(1<<29)&&h<1<<29&&(u=1,l=1),!u)throw new Error("unsupported RkNumber "+o);c.write_shift(-4,((l?h:o)<<2)+(l+2))}function Cx(o){var c={s:{},e:{}};return c.s.r=o.read_shift(4),c.e.r=o.read_shift(4),c.s.c=o.read_shift(4),c.e.c=o.read_shift(4),c}var Ao=Cx,Oo=function xa(o,c){return c||(c=Te(16)),c.write_shift(4,o.s.r),c.write_shift(4,o.e.r),c.write_shift(4,o.s.c),c.write_shift(4,o.e.c),c};function nr(o){if(o.length-o.l<8)throw"XLS Xnum Buffer underflow";return o.read_shift(8,"f")}function js(o,c){return(c||Te(8)).write_shift(8,o,"f")}function Ec(o,c){if(c||(c=Te(8)),!o||o.auto)return c.write_shift(4,0),c.write_shift(4,0),c;null!=o.index?(c.write_shift(1,2),c.write_shift(1,o.index)):null!=o.theme?(c.write_shift(1,6),c.write_shift(1,o.theme)):(c.write_shift(1,5),c.write_shift(1,0));var l=o.tint||0;if(l>0?l*=32767:l<0&&(l*=32768),c.write_shift(2,l),o.rgb&&null==o.theme){var u=o.rgb||"FFFFFF";"number"==typeof u&&(u=("000000"+u.toString(16)).slice(-6)),c.write_shift(1,parseInt(u.slice(0,2),16)),c.write_shift(1,parseInt(u.slice(2,4),16)),c.write_shift(1,parseInt(u.slice(4,6),16)),c.write_shift(1,255)}else c.write_shift(2,0),c.write_shift(1,0),c.write_shift(1,0);return c}var wf={1:{n:"CodePage",t:2},2:{n:"Category",t:80},3:{n:"PresentationFormat",t:80},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:80},15:{n:"Company",t:80},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:80},27:{n:"ContentStatus",t:80},28:{n:"Language",t:80},29:{n:"Version",t:80},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},kf={1:{n:"CodePage",t:2},2:{n:"Title",t:80},3:{n:"Subject",t:80},4:{n:"Author",t:80},5:{n:"Keywords",t:80},6:{n:"Comments",t:80},7:{n:"Template",t:80},8:{n:"LastAuthor",t:80},9:{n:"RevNumber",t:80},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:80},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function yx(o){return o.map(function(c){return[c>>16&255,c>>8&255,255&c]})}var Qs=xn(yx([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Xs={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},vu={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},bu={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Zg(o,c){var h,l=function ex(o){for(var c=[],l=ni(o),u=0;u!==l.length;++u)null==c[o[l[u]]]&&(c[o[l[u]]]=[]),c[o[l[u]]].push(l[u]);return c}(vu),u=[];u[u.length]=Yt,u[u.length]=qe("Types",null,{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":Wn_xsi}),u=u.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(x){return qe("Default",null,{Extension:x[0],ContentType:x[1]})}));var m=function(x){o[x]&&o[x].length>0&&(u[u.length]=qe("Override",null,{PartName:("/"==(h=o[x][0])[0]?"":"/")+h,ContentType:bu[x][c.bookType]||bu[x].xlsx}))},_=function(x){(o[x]||[]).forEach(function(C){u[u.length]=qe("Override",null,{PartName:("/"==C[0]?"":"/")+C,ContentType:bu[x][c.bookType]||bu[x].xlsx})})},v=function(x){(o[x]||[]).forEach(function(C){u[u.length]=qe("Override",null,{PartName:("/"==C[0]?"":"/")+C,ContentType:l[x][0]})})};return m("workbooks"),_("sheets"),_("charts"),v("themes"),["strs","styles"].forEach(m),["coreprops","extprops","custprops"].forEach(v),v("vba"),v("comments"),v("threadedcomments"),v("drawings"),_("metadata"),v("people"),u.length>2&&(u[u.length]="</Types>",u[1]=u[1].replace("/>",">")),u.join("")}var qt={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Dc(o){var c=o.lastIndexOf("/");return o.slice(0,c+1)+"_rels/"+o.slice(c+1)+".rels"}function pl(o){var c=[Yt,qe("Relationships",null,{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"})];return ni(o["!id"]).forEach(function(l){c[c.length]=qe("Relationship",null,o["!id"][l])}),c.length>2&&(c[c.length]="</Relationships>",c[1]=c[1].replace("/>",">")),c.join("")}function Sn(o,c,l,u,h,m){if(h||(h={}),o["!id"]||(o["!id"]={}),o["!idx"]||(o["!idx"]=1),c<0)for(c=o["!idx"];o["!id"]["rId"+c];++c);if(o["!idx"]=c+1,h.Id="rId"+c,h.Type=u,h.Target=l,m?h.TargetMode=m:[qt.HLINK,qt.XPATH,qt.XMISS].indexOf(h.Type)>-1&&(h.TargetMode="External"),o["!id"][h.Id])throw new Error("Cannot rewrite rId "+c);return o["!id"][h.Id]=h,o[("/"+h.Target).replace("//","/")]=h,c}function Hg(o,c,l){return['  <rdf:Description rdf:about="'+o+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(l||"odf")+"#"+c+'"/>\n',"  </rdf:Description>\n"].join("")}function Mx(o,c){return['  <rdf:Description rdf:about="'+o+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+c+'"/>\n',"  </rdf:Description>\n"].join("")}function Vg(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+oe_version+"</meta:generator></office:meta></office:document-meta>"}var eo=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Df(o,c,l,u,h){null!=h[o]||null==c||""===c||(h[o]=c,c=Cn(c),u[u.length]=l?qe(o,c,l):yi(o,c))}function qg(o,c){var l=c||{},u=[Yt,qe("cp:coreProperties",null,{"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":Wn_xsi})],h={};if(!o&&!l.Props)return u.join("");o&&(null!=o.CreatedDate&&Df("dcterms:created","string"==typeof o.CreatedDate?o.CreatedDate:lf(o.CreatedDate,l.WTF),{"xsi:type":"dcterms:W3CDTF"},u,h),null!=o.ModifiedDate&&Df("dcterms:modified","string"==typeof o.ModifiedDate?o.ModifiedDate:lf(o.ModifiedDate,l.WTF),{"xsi:type":"dcterms:W3CDTF"},u,h));for(var m=0;m!=eo.length;++m){var _=eo[m],v=l.Props&&null!=l.Props[_[1]]?l.Props[_[1]]:o?o[_[1]]:null;!0===v?v="1":!1===v?v="0":"number"==typeof v&&(v=String(v)),null!=v&&Df(_[0],v,null,u,h)}return u.length>2&&(u[u.length]="</cp:coreProperties>",u[1]=u[1].replace("/>",">")),u.join("")}var Ca=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Yg=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function $g(o){var c=[],l=qe;return o||(o={}),o.Application="SheetJS",c[c.length]=Yt,c[c.length]=qe("Properties",null,{xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":Wn_vt}),Ca.forEach(function(u){if(void 0!==o[u[1]]){var h;switch(u[2]){case"string":h=Cn(String(o[u[1]]));break;case"bool":h=o[u[1]]?"true":"false"}void 0!==h&&(c[c.length]=l(u[0],h))}}),c[c.length]=l("HeadingPairs",l("vt:vector",l("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+l("vt:variant",l("vt:i4",String(o.Worksheets))),{size:2,baseType:"variant"})),c[c.length]=l("TitlesOfParts",l("vt:vector",o.SheetNames.map(function(u){return"<vt:lpstr>"+Cn(u)+"</vt:lpstr>"}).join(""),{size:o.Worksheets,baseType:"lpstr"})),c.length>2&&(c[c.length]="</Properties>",c[1]=c[1].replace("/>",">")),c.join("")}function Wg(o){var c=[Yt,qe("Properties",null,{xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties","xmlns:vt":Wn_vt})];if(!o)return c.join("");var l=1;return ni(o).forEach(function(h){++l,c[c.length]=qe("property",function dx(o,c){switch(typeof o){case"string":var l=qe("vt:lpwstr",Cn(o));return c&&(l=l.replace(/&quot;/g,"_x0022_")),l;case"number":return qe((0|o)==o?"vt:i4":"vt:r8",Cn(String(o)));case"boolean":return qe("vt:bool",o?"true":"false")}if(o instanceof Date)return qe("vt:filetime",lf(o));throw new Error("Unable to serialize "+o)}(o[h],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:l,name:Cn(h)})}),c.length>2&&(c[c.length]="</Properties>",c[1]=c[1].replace("/>",">")),c.join("")}var Xn={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function No(o,c){var l=Te(4),u=Te(4);switch(l.write_shift(4,80==o?31:o),o){case 3:u.write_shift(-4,c);break;case 5:(u=Te(8)).write_shift(8,c,"f");break;case 11:u.write_shift(4,c?1:0);break;case 64:u=function Qg(o){var l=("string"==typeof o?new Date(Date.parse(o)):o).getTime()/1e3+11644473600,u=l%Math.pow(2,32),h=(l-u)/Math.pow(2,32);h*=1e7;var m=(u*=1e7)/Math.pow(2,32)|0;m>0&&(u%=Math.pow(2,32),h+=m);var _=Te(8);return _.write_shift(4,u),_.write_shift(4,h),_}(c);break;case 31:case 80:for((u=Te(4+2*(c.length+1)+(c.length%2?0:2))).write_shift(4,c.length+1),u.write_shift(0,c,"dbcs");u.l!=u.length;)u.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+o+" "+c)}return Ne([l,u])}var ys=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Of(o){switch(typeof o){case"boolean":return 11;case"number":return(0|o)==o?3:5;case"string":return 31;case"object":if(o instanceof Date)return 64}return-1}function If(o,c,l){var u=Te(8),h=[],m=[],_=8,v=0,x=Te(8),C=Te(8);if(x.write_shift(4,2),x.write_shift(4,1200),C.write_shift(4,1),m.push(x),h.push(C),_+=8+x.length,!c){(C=Te(8)).write_shift(4,0),h.unshift(C);var E=[Te(4)];for(E[0].write_shift(4,o.length),v=0;v<o.length;++v){var D=o[v][0];for((x=Te(8+2*(D.length+1)+(D.length%2?0:2))).write_shift(4,v+2),x.write_shift(4,D.length+1),x.write_shift(0,D,"dbcs");x.l!=x.length;)x.write_shift(1,0);E.push(x)}x=Ne(E),m.unshift(x),_+=8+x.length}for(v=0;v<o.length;++v)if((!c||c[o[v][0]])&&!(ys.indexOf(o[v][0])>-1||Yg.indexOf(o[v][0])>-1)&&null!=o[v][1]){var A=o[v][1],I=0;if(c){var R=l[I=+c[o[v][0]]];if("version"==R.p&&"string"==typeof A){var y=A.split(".");A=(+y[0]<<16)+(+y[1]||0)}x=No(R.t,A)}else{var N=Of(A);-1==N&&(N=31,A=String(A)),x=No(N,A)}m.push(x),(C=Te(8)).write_shift(4,c?I:2+v),h.push(C),_+=8+x.length}var Z=8*(m.length+1);for(v=0;v<m.length;++v)h[v].write_shift(4,Z),Z+=m[v].length;return u.write_shift(4,_),u.write_shift(4,m.length),Ne([u].concat(h).concat(m))}function wu(o,c,l,u,h,m){var _=Te(h?68:48),v=[_];_.write_shift(2,65534),_.write_shift(2,0),_.write_shift(4,842412599),_.write_shift(16,Ct.utils.consts.HEADER_CLSID,"hex"),_.write_shift(4,h?2:1),_.write_shift(16,c,"hex"),_.write_shift(4,h?68:48);var x=If(o,l,u);if(v.push(x),h){var C=If(h,null,null);_.write_shift(16,m,"hex"),_.write_shift(4,68+x.length),v.push(C)}return Ne(v)}function Oi(o,c){return c||(c=Te(2)),c.write_shift(2,+!!o),c}function Fn(o){return o.read_shift(2,"u")}function ir(o,c){return c||(c=Te(2)),c.write_shift(2,o),c}function o_(o,c,l){return l||(l=Te(2)),l.write_shift(1,"e"==c?+o:+!!o),l.write_shift(1,"e"==c?1:0),l}function ku(o,c,l){var u=o.read_shift(l&&l.biff>=12?2:1),h="sbcs-cont",m=ht;l&&l.biff>=8&&(ht=1200),l&&8!=l.biff?12==l.biff&&(h="wstr"):o.read_shift(1)&&(h="dbcs-cont"),l.biff>=2&&l.biff<=5&&(h="cpstr");var v=u?o.read_shift(u,h):"";return ht=m,v}function a_(o){var c=o.t||"",u=Te(3);u.write_shift(2,c.length),u.write_shift(1,1);var h=Te(2*c.length);return h.write_shift(2*c.length,c,"utf16le"),Ne([u,h])}function l_(o,c,l){return l||(l=Te(3+2*o.length)),l.write_shift(2,o.length),l.write_shift(1,1),l.write_shift(31,o,"utf16le"),l}function Rf(o,c){c||(c=Te(6+2*o.length)),c.write_shift(4,1+o.length);for(var l=0;l<o.length;++l)c.write_shift(2,o.charCodeAt(l));return c.write_shift(2,0),c}function QT(o){var c=Te(512),l=0,u=o.Target;"file://"==u.slice(0,7)&&(u=u.slice(7));var h=u.indexOf("#"),m=h>-1?31:23;switch(u.charAt(0)){case"#":m=28;break;case".":m&=-3}c.write_shift(4,2),c.write_shift(4,m);var _=[8,6815827,6619237,4849780,83];for(l=0;l<_.length;++l)c.write_shift(4,_[l]);if(28==m)Rf(u=u.slice(1),c);else if(2&m){for(_="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),l=0;l<_.length;++l)c.write_shift(1,parseInt(_[l],16));var v=h>-1?u.slice(0,h):u;for(c.write_shift(4,2*(v.length+1)),l=0;l<v.length;++l)c.write_shift(2,v.charCodeAt(l));c.write_shift(2,0),8&m&&Rf(h>-1?u.slice(h+1):"",c)}else{for(_="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),l=0;l<_.length;++l)c.write_shift(1,parseInt(_[l],16));for(var x=0;"../"==u.slice(3*x,3*x+3)||"..\\"==u.slice(3*x,3*x+3);)++x;for(c.write_shift(2,x),c.write_shift(4,u.length-3*x+1),l=0;l<u.length-3*x;++l)c.write_shift(1,255&u.charCodeAt(l+3*x));for(c.write_shift(1,0),c.write_shift(2,65535),c.write_shift(2,57005),l=0;l<6;++l)c.write_shift(4,0)}return c.slice(0,c.l)}function wa(o,c,l,u){return u||(u=Te(6)),u.write_shift(2,o),u.write_shift(2,c),u.write_shift(2,l||0),u}function u_(o,c,l){var u=l.biff>8?4:2;return[o.read_shift(u),o.read_shift(u,"i"),o.read_shift(u,"i")]}function Lc(o){var c=o.read_shift(2),l=o.read_shift(2);return{s:{c:o.read_shift(2),r:c},e:{c:o.read_shift(2),r:l}}}function qx(o,c){return c||(c=Te(8)),c.write_shift(2,o.s.r),c.write_shift(2,o.e.r),c.write_shift(2,o.s.c),c.write_shift(2,o.e.c),c}function Du(o,c,l){var u=1536,h=16;switch(l.bookType){case"biff8":case"xla":break;case"biff5":u=1280,h=8;break;case"biff4":u=4,h=6;break;case"biff3":u=3,h=6;break;case"biff2":u=2,h=4;break;default:throw new Error("unsupported BIFF version")}var m=Te(h);return m.write_shift(2,u),m.write_shift(2,c),h>4&&m.write_shift(2,29282),h>6&&m.write_shift(2,1997),h>8&&(m.write_shift(2,49161),m.write_shift(2,1),m.write_shift(2,1798),m.write_shift(2,0)),m}function $x(o,c){var l=!c||c.biff>=8?2:1,u=Te(8+l*o.name.length);u.write_shift(4,o.pos),u.write_shift(1,o.hs||0),u.write_shift(1,o.dt),u.write_shift(1,o.name.length),c.biff>=8&&u.write_shift(1,1),u.write_shift(l*o.name.length,o.name,c.biff<8?"sbcs":"utf16le");var h=u.slice(0,u.l);return h.l=u.l,h}function uC(o,c,l,u){var h=l&&5==l.biff;u||(u=Te(h?3+c.length:5+2*c.length)),u.write_shift(2,o),u.write_shift(h?1:2,c.length),h||u.write_shift(1,1),u.write_shift((h?1:2)*c.length,c,h?"sbcs":"utf16le");var m=u.length>u.l?u.slice(0,u.l):u;return null==m.l&&(m.l=m.length),m}function C_(o,c,l,u){var h=l&&5==l.biff;u||(u=Te(h?16:20)),u.write_shift(2,0),o.style?(u.write_shift(2,o.numFmtId||0),u.write_shift(2,65524)):(u.write_shift(2,o.numFmtId||0),u.write_shift(2,c<<4));var m=0;return o.numFmtId>0&&h&&(m|=1024),u.write_shift(4,m),u.write_shift(4,0),h||u.write_shift(4,0),u.write_shift(2,0),u}function Gf(o){var c=Te(24),l=ii(o[0]);c.write_shift(2,l.r),c.write_shift(2,l.r),c.write_shift(2,l.c),c.write_shift(2,l.c);for(var u="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),h=0;h<16;++h)c.write_shift(1,parseInt(u[h],16));return Ne([c,QT(o[1])])}function Zf(o){var c=o[1].Tooltip,l=Te(10+2*(c.length+1));l.write_shift(2,2048);var u=ii(o[0]);l.write_shift(2,u.r),l.write_shift(2,u.r),l.write_shift(2,u.c),l.write_shift(2,u.c);for(var h=0;h<c.length;++h)l.write_shift(2,c.charCodeAt(h));return l.write_shift(2,0),l}var Mi=function(){var o={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},c=nu({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function u(v,x){var C=x||{};C.dateNF||(C.dateNF="yyyymmdd");var E=_a(function l(v,x){var C=[],E=re(1);switch(x.type){case"base64":E=ee(M(v));break;case"binary":E=ee(v);break;case"buffer":case"array":E=v}Qi(E,0);var D=E.read_shift(1),A=!!(136&D),I=!1,R=!1;switch(D){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:I=!0,A=!0;break;case 140:R=!0;break;default:throw new Error("DBF Unsupported Version: "+D.toString(16))}var y=0,N=521;2==D&&(y=E.read_shift(2)),E.l+=3,2!=D&&(y=E.read_shift(4)),y>1048576&&(y=1e6),2!=D&&(N=E.read_shift(2));var Z=E.read_shift(2),z=x.codepage||1252;2!=D&&(E.l+=16,E.read_shift(1),0!==E[E.l]&&(z=o[E[E.l]]),E.l+=1,E.l+=2),R&&(E.l+=36);for(var B=[],le={},ge=Math.min(E.length,2==D?521:N-10-(I?264:0)),we=R?32:11;E.l<ge&&13!=E[E.l];)switch(le={},le.name=Bt.utils.decode(z,E.slice(E.l,E.l+we)).replace(/[\u0000\r\n].*$/g,""),E.l+=we,le.type=String.fromCharCode(E.read_shift(1)),2!=D&&!R&&(le.offset=E.read_shift(4)),le.len=E.read_shift(1),2==D&&(le.offset=E.read_shift(2)),le.dec=E.read_shift(1),le.name.length&&B.push(le),2!=D&&(E.l+=R?13:14),le.type){case"B":(!I||8!=le.len)&&x.WTF&&console.log("Skipping "+le.name+":"+le.type);break;case"G":case"P":x.WTF&&console.log("Skipping "+le.name+":"+le.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+le.type)}if(13!==E[E.l]&&(E.l=N-1),13!==E.read_shift(1))throw new Error("DBF Terminator not found "+E.l+" "+E[E.l]);E.l=N;var j=0,pe=0;for(C[0]=[],pe=0;pe!=B.length;++pe)C[0][pe]=B[pe].name;for(;y-- >0;)if(42!==E[E.l])for(++E.l,C[++j]=[],pe=0,pe=0;pe!=B.length;++pe){var ce=E.slice(E.l,E.l+B[pe].len);E.l+=B[pe].len,Qi(ce,0);var Ce=Bt.utils.decode(z,ce);switch(B[pe].type){case"C":Ce.trim().length&&(C[j][pe]=Ce.replace(/\s+$/,""));break;case"D":C[j][pe]=8===Ce.length?new Date(+Ce.slice(0,4),+Ce.slice(4,6)-1,+Ce.slice(6,8)):Ce;break;case"F":C[j][pe]=parseFloat(Ce.trim());break;case"+":case"I":C[j][pe]=R?2147483648^ce.read_shift(-4,"i"):ce.read_shift(4,"i");break;case"L":switch(Ce.trim().toUpperCase()){case"Y":case"T":C[j][pe]=!0;break;case"N":case"F":C[j][pe]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Ce+"|")}break;case"M":if(!A)throw new Error("DBF Unexpected MEMO for type "+D.toString(16));C[j][pe]="##MEMO##"+(R?parseInt(Ce.trim(),10):ce.read_shift(4));break;case"N":(Ce=Ce.replace(/\u0000/g,"").trim())&&"."!=Ce&&(C[j][pe]=+Ce||0);break;case"@":C[j][pe]=new Date(ce.read_shift(-8,"f")-621356832e5);break;case"T":C[j][pe]=new Date(864e5*(ce.read_shift(4)-2440588)+ce.read_shift(4));break;case"Y":C[j][pe]=ce.read_shift(4,"i")/1e4+ce.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":C[j][pe]=-ce.read_shift(-8,"f");break;case"B":if(I&&8==B[pe].len){C[j][pe]=ce.read_shift(8,"f");break}case"G":case"P":ce.l+=B[pe].len;break;case"0":if("_NullFlags"===B[pe].name)break;default:throw new Error("DBF Unsupported data type "+B[pe].type)}}else E.l+=Z;if(2!=D&&E.l<E.length&&26!=E[E.l++])throw new Error("DBF EOF Marker missing "+(E.l-1)+" of "+E.length+" "+E[E.l-1].toString(16));return x&&x.sheetRows&&(C=C.slice(0,x.sheetRows)),x.DBF=B,C}(v,C),C);return E["!cols"]=C.DBF.map(function(D){return{wch:D.len,DBF:D}}),delete C.DBF,E}var m={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function h(v,x){try{return Do(u(v,x),x)}catch(C){if(x&&x.WTF)throw C}return{SheetNames:[],Sheets:{}}},to_sheet:u,from_sheet:function _(v,x){var C=x||{};if(+C.codepage>=0&&ue(+C.codepage),"string"==C.type)throw new Error("Cannot write DBF to JS string");var E=Er(),D=_h(v,{header:1,raw:!0,cellDates:!0}),A=D[0],I=D.slice(1),R=v["!cols"]||[],y=0,N=0,Z=0,z=1;for(y=0;y<A.length;++y)if(((R[y]||{}).DBF||{}).name)A[y]=R[y].DBF.name,++Z;else if(null!=A[y]){if(++Z,"number"==typeof A[y]&&(A[y]=A[y].toString(10)),"string"!=typeof A[y])throw new Error("DBF Invalid column name "+A[y]+" |"+typeof A[y]+"|");if(A.indexOf(A[y])!==y)for(N=0;N<1024;++N)if(-1==A.indexOf(A[y]+"_"+N)){A[y]+="_"+N;break}}var B=on(v["!ref"]),le=[],ge=[],we=[];for(y=0;y<=B.e.c-B.s.c;++y){var j="",pe="",ce=0,Ce=[];for(N=0;N<I.length;++N)null!=I[N][y]&&Ce.push(I[N][y]);if(0!=Ce.length&&null!=A[y]){for(N=0;N<Ce.length;++N){switch(typeof Ce[N]){case"number":pe="B";break;case"string":default:pe="C";break;case"boolean":pe="L";break;case"object":pe=Ce[N]instanceof Date?"D":"C"}ce=Math.max(ce,String(Ce[N]).length),j=j&&j!=pe?"C":pe}ce>250&&(ce=250),"C"==(pe=((R[y]||{}).DBF||{}).type)&&R[y].DBF.len>ce&&(ce=R[y].DBF.len),"B"==j&&"N"==pe&&(j="N",we[y]=R[y].DBF.dec,ce=R[y].DBF.len),ge[y]="C"==j||"N"==pe?ce:m[j]||0,z+=ge[y],le[y]=j}else le[y]="?"}var ye=E.next(32);for(ye.write_shift(4,318902576),ye.write_shift(4,I.length),ye.write_shift(2,296+32*Z),ye.write_shift(2,z),y=0;y<4;++y)ye.write_shift(4,0);for(ye.write_shift(4,0|(+c[X]||3)<<8),y=0,N=0;y<A.length;++y)if(null!=A[y]){var he=E.next(32),je=(A[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);he.write_shift(1,je,"sbcs"),he.write_shift(1,"?"==le[y]?"C":le[y],"sbcs"),he.write_shift(4,N),he.write_shift(1,ge[y]||m[le[y]]||0),he.write_shift(1,we[y]||0),he.write_shift(1,2),he.write_shift(4,0),he.write_shift(1,0),he.write_shift(4,0),he.write_shift(4,0),N+=ge[y]||m[le[y]]||0}var ut=E.next(264);for(ut.write_shift(4,13),y=0;y<65;++y)ut.write_shift(4,0);for(y=0;y<I.length;++y){var it=E.next(z);for(it.write_shift(1,0),N=0;N<A.length;++N)if(null!=A[N])switch(le[N]){case"L":it.write_shift(1,null==I[y][N]?63:I[y][N]?84:70);break;case"B":it.write_shift(8,I[y][N]||0,"f");break;case"N":var Dt="0";for("number"==typeof I[y][N]&&(Dt=I[y][N].toFixed(we[N]||0)),Z=0;Z<ge[N]-Dt.length;++Z)it.write_shift(1,32);it.write_shift(1,Dt,"sbcs");break;case"D":I[y][N]?(it.write_shift(4,("0000"+I[y][N].getFullYear()).slice(-4),"sbcs"),it.write_shift(2,("00"+(I[y][N].getMonth()+1)).slice(-2),"sbcs"),it.write_shift(2,("00"+I[y][N].getDate()).slice(-2),"sbcs")):it.write_shift(8,"00000000","sbcs");break;case"C":var _t=String(null!=I[y][N]?I[y][N]:"").slice(0,ge[N]);for(it.write_shift(1,_t,"sbcs"),Z=0;Z<ge[N]-_t.length;++Z)it.write_shift(1,32)}}return E.next(1).write_shift(1,26),E.end()}}}(),Jf=function(){var o={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},c=new RegExp("\x1bN("+ni(o).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),l=function(A,I){var R=o[I];return"number"==typeof R?Ui(R):R},u=function(A,I,R){var y=I.charCodeAt(0)-32<<4|R.charCodeAt(0)-48;return 59==y?A:Ui(y)};function m(A,I){var ye,R=A.split(/[\n\r]+/),y=-1,N=-1,Z=0,z=0,B=[],le=[],ge=null,we={},j=[],pe=[],ce=[],Ce=0;for(+I.codepage>=0&&ue(+I.codepage);Z!==R.length;++Z){Ce=0;var it,he=R[Z].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,u).replace(c,l),je=he.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")});if(he.length>0)switch(je[0]){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==je[1].charAt(0)&&le.push(he.slice(3).replace(/;;/g,";"));break;case"C":var Dt=!1,_t=!1,rn=!1,ct=!1,It=-1,Pe=-1;for(z=1;z<je.length;++z)switch(je[z].charAt(0)){case"A":case"G":break;case"X":N=parseInt(je[z].slice(1))-1,_t=!0;break;case"Y":for(y=parseInt(je[z].slice(1))-1,_t||(N=0),ye=B.length;ye<=y;++ye)B[ye]=[];break;case"K":'"'===(it=je[z].slice(1)).charAt(0)?it=it.slice(1,it.length-1):"TRUE"===it?it=!0:"FALSE"===it?it=!1:isNaN(Rr(it))?isNaN(al(it).getDate())||(it=pn(it)):(it=Rr(it),null!==ge&&ls(ge)&&(it=fg(it))),Dt=!0;break;case"E":ct=!0;var Q=kl(je[z].slice(1),{r:y,c:N});B[y][N]=[B[y][N],Q];break;case"S":rn=!0,B[y][N]=[B[y][N],"S5S"];break;case"R":It=parseInt(je[z].slice(1))-1;break;case"C":Pe=parseInt(je[z].slice(1))-1;break;default:if(I&&I.WTF)throw new Error("SYLK bad record "+he)}if(Dt&&(B[y][N]&&2==B[y][N].length?B[y][N][0]=it:B[y][N]=it,ge=null),rn){if(ct)throw new Error("SYLK shared formula cannot have own formula");var xe=It>-1&&B[It][Pe];if(!xe||!xe[1])throw new Error("SYLK shared formula cannot find base");B[y][N][1]=pp(xe[1],{r:y-It,c:N-Pe})}break;case"F":var ie=0;for(z=1;z<je.length;++z)switch(je[z].charAt(0)){case"X":N=parseInt(je[z].slice(1))-1,++ie;break;case"Y":for(y=parseInt(je[z].slice(1))-1,ye=B.length;ye<=y;++ye)B[ye]=[];break;case"M":Ce=parseInt(je[z].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":ge=le[parseInt(je[z].slice(1))];break;case"W":for(ce=je[z].slice(1).split(" "),ye=parseInt(ce[0],10);ye<=parseInt(ce[1],10);++ye)Ce=parseInt(ce[2],10),pe[ye-1]=0===Ce?{hidden:!0}:{wch:Ce},no(pe[ye-1]);break;case"C":pe[N=parseInt(je[z].slice(1))-1]||(pe[N]={});break;case"R":j[y=parseInt(je[z].slice(1))-1]||(j[y]={}),Ce>0?(j[y].hpt=Ce,j[y].hpx=qc(Ce)):0===Ce&&(j[y].hidden=!0);break;default:if(I&&I.WTF)throw new Error("SYLK bad record "+he)}ie<1&&(ge=null);break;default:if(I&&I.WTF)throw new Error("SYLK bad record "+he)}}return j.length>0&&(we["!rows"]=j),pe.length>0&&(we["!cols"]=pe),I&&I.sheetRows&&(B=B.slice(0,I.sheetRows)),[B,we]}function _(A,I){var R=function h(A,I){switch(I.type){case"base64":return m(M(A),I);case"binary":return m(A,I);case"buffer":return m(O&&Buffer.isBuffer(A)?A.toString("binary"):Ye(A),I);case"array":return m(To(A),I)}throw new Error("Unrecognized type "+I.type)}(A,I),N=R[1],Z=_a(R[0],I);return ni(N).forEach(function(z){Z[z]=N[z]}),Z}function x(A,I,R,y){var N="C;Y"+(R+1)+";X"+(y+1)+";K";switch(A.t){case"n":N+=A.v||0,A.f&&!A.F&&(N+=";E"+qu(A.f,{r:R,c:y}));break;case"b":N+=A.v?"TRUE":"FALSE";break;case"e":N+=A.w||A.v;break;case"d":N+='"'+(A.w||A.v)+'"';break;case"s":N+='"'+A.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return N}return o["|"]=254,{to_workbook:function v(A,I){return Do(_(A,I),I)},to_sheet:_,from_sheet:function D(A,I){var Z,R=["ID;PWXL;N;E"],y=[],N=on(A["!ref"]),z=Array.isArray(A),B="\r\n";R.push("P;PGeneral"),R.push("F;P0;DG0G8;M255"),A["!cols"]&&function C(A,I){I.forEach(function(R,y){var N="F;W"+(y+1)+" "+(y+1)+" ";R.hidden?N+="0":("number"==typeof R.width&&!R.wpx&&(R.wpx=Po(R.width)),"number"==typeof R.wpx&&!R.wch&&(R.wch=Uo(R.wpx)),"number"==typeof R.wch&&(N+=Math.round(R.wch)))," "!=N.charAt(N.length-1)&&A.push(N)})}(R,A["!cols"]),A["!rows"]&&function E(A,I){I.forEach(function(R,y){var N="F;";R.hidden?N+="M0;":R.hpt?N+="M"+20*R.hpt+";":R.hpx&&(N+="M"+20*Jc(R.hpx)+";"),N.length>2&&A.push(N+"R"+(y+1))})}(R,A["!rows"]),R.push("B;Y"+(N.e.r-N.s.r+1)+";X"+(N.e.c-N.s.c+1)+";D"+[N.s.c,N.s.r,N.e.c,N.e.r].join(" "));for(var le=N.s.r;le<=N.e.r;++le)for(var ge=N.s.c;ge<=N.e.c;++ge){var we=Mt({r:le,c:ge});(Z=z?(A[le]||[])[ge]:A[we])&&(null!=Z.v||Z.f&&!Z.F)&&y.push(x(Z,0,le,ge))}return R.join(B)+B+y.join(B)+B+"E"+B}}}(),qf=function(){function c(m,_){for(var v=m.split("\n"),x=-1,C=-1,E=0,D=[];E!==v.length;++E)if("BOT"!==v[E].trim()){if(!(x<0)){for(var A=v[E].trim().split(","),I=A[0],R=A[1],y=v[++E]||"";1&(y.match(/["]/g)||[]).length&&E<v.length-1;)y+="\n"+v[++E];switch(y=y.trim(),+I){case-1:if("BOT"===y){D[++x]=[],C=0;continue}if("EOD"!==y)throw new Error("Unrecognized DIF special command "+y);break;case 0:D[x][C]="TRUE"===y||"FALSE"!==y&&(isNaN(Rr(R))?isNaN(al(R).getDate())?R:pn(R):Rr(R)),++C;break;case 1:(y=(y=y.slice(1,y.length-1)).replace(/""/g,'"'))&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),D[x][C++]=""!==y?y:null}if("EOD"===y)break}}else D[++x]=[],C=0;return _&&_.sheetRows&&(D=D.slice(0,_.sheetRows)),D}function l(m,_){return _a(function o(m,_){switch(_.type){case"base64":return c(M(m),_);case"binary":return c(m,_);case"buffer":return c(O&&Buffer.isBuffer(m)?m.toString("binary"):Ye(m),_);case"array":return c(To(m),_)}throw new Error("Unrecognized type "+_.type)}(m,_),_)}return{to_workbook:function u(m,_){return Do(l(m,_),_)},to_sheet:l,from_sheet:function(){var m=function(x,C,E,D,A){x.push(C),x.push(E+","+D),x.push('"'+A.replace(/"/g,'""')+'"')},_=function(x,C,E,D){x.push(C+","+E),x.push(1==C?'"'+D.replace(/"/g,'""')+'"':D)};return function(x){var D,C=[],E=on(x["!ref"]),A=Array.isArray(x);m(C,"TABLE",0,1,"sheetjs"),m(C,"VECTORS",0,E.e.r-E.s.r+1,""),m(C,"TUPLES",0,E.e.c-E.s.c+1,""),m(C,"DATA",0,0,"");for(var I=E.s.r;I<=E.e.r;++I){_(C,-1,0,"BOT");for(var R=E.s.c;R<=E.e.c;++R){var y=Mt({r:I,c:R});if(D=A?(x[I]||[])[R]:x[y])switch(D.t){case"n":var N=D.w;!N&&null!=D.v&&(N=D.v),null==N?_(C,1,0,D.f&&!D.F?"="+D.f:""):_(C,0,N,"V");break;case"b":_(C,0,D.v?1:0,D.v?"TRUE":"FALSE");break;case"s":_(C,1,0,isNaN(D.v)?D.v:'="'+D.v+'"');break;case"d":D.w||(D.w=Sr(D.z||xt[14],bi(pn(D.v)))),_(C,0,D.w,"V");break;default:_(C,1,0,"")}else _(C,1,0,"")}}return _(C,-1,0,"EOD"),C.join("\r\n")}}()}}(),Yf=function(){function o(D){return D.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function c(D){return D.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function u(D,A){return _a(function l(D,A){for(var I=D.split("\n"),R=-1,y=-1,N=0,Z=[];N!==I.length;++N){var z=I[N].trim().split(":");if("cell"===z[0]){var B=ii(z[1]);if(Z.length<=B.r)for(R=Z.length;R<=B.r;++R)Z[R]||(Z[R]=[]);switch(R=B.r,y=B.c,z[2]){case"t":Z[R][y]=o(z[3]);break;case"v":Z[R][y]=+z[3];break;case"vtf":var le=z[z.length-1];case"vtc":Z[R][y]="nl"===z[3]?!!+z[4]:+z[4],"vtf"==z[2]&&(Z[R][y]=[Z[R][y],le])}}}return A&&A.sheetRows&&(Z=Z.slice(0,A.sheetRows)),Z}(D,A),A)}var m=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),_=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",v=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),x="--SocialCalcSpreadsheetControlSave--";function C(D){if(!D||!D["!ref"])return"";for(var R,A=[],I=[],y="",N=hr(D["!ref"]),Z=Array.isArray(D),z=N.s.r;z<=N.e.r;++z)for(var B=N.s.c;B<=N.e.c;++B)if(y=Mt({r:z,c:B}),(R=Z?(D[z]||[])[B]:D[y])&&null!=R.v&&"z"!==R.t){switch(I=["cell",y,"t"],R.t){case"s":case"str":I.push(c(R.v));break;case"n":R.f?(I[2]="vtf",I[3]="n",I[4]=R.v,I[5]=c(R.f)):(I[2]="v",I[3]=R.v);break;case"b":I[2]="vt"+(R.f?"f":"c"),I[3]="nl",I[4]=R.v?"1":"0",I[5]=c(R.f||(R.v?"TRUE":"FALSE"));break;case"d":var le=bi(pn(R.v));I[2]="vtc",I[3]="nd",I[4]=""+le,I[5]=R.w||Sr(R.z||xt[14],le);break;case"e":continue}A.push(I.join(":"))}return A.push("sheet:c:"+(N.e.c-N.s.c+1)+":r:"+(N.e.r-N.s.r+1)+":tvf:1"),A.push("valueformat:1:text-wiki"),A.join("\n")}return{to_workbook:function h(D,A){return Do(u(D,A),A)},to_sheet:u,from_sheet:function E(D){return[m,_,v,_,C(D),x].join("\n")}}}(),Me=function(){function o(E,D,A,I,R){R.raw?D[A][I]=E:""===E||(D[A][I]="TRUE"===E||"FALSE"!==E&&(isNaN(Rr(E))?isNaN(al(E).getDate())?E:pn(E):Rr(E)))}var l={44:",",9:"\t",59:";",124:"|"},u={44:3,9:2,59:1,124:0};function h(E){for(var D={},A=!1,I=0,R=0;I<E.length;++I)34==(R=E.charCodeAt(I))?A=!A:!A&&R in l&&(D[R]=(D[R]||0)+1);for(I in R=[],D)Object.prototype.hasOwnProperty.call(D,I)&&R.push([D[I],I]);if(!R.length)for(I in D=u)Object.prototype.hasOwnProperty.call(D,I)&&R.push([D[I],I]);return R.sort(function(y,N){return y[0]-N[0]||u[y[1]]-u[N[1]]}),l[R.pop()[1]]||44}function _(E,D){return!D||!D.PRN||D.FS||"sep="==E.slice(0,4)||E.indexOf("\t")>=0||E.indexOf(",")>=0||E.indexOf(";")>=0?function m(E,D){var A=D||{},I="",R=A.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};"sep="==E.slice(0,4)?13==E.charCodeAt(5)&&10==E.charCodeAt(6)?(I=E.charAt(4),E=E.slice(7)):13==E.charCodeAt(5)||10==E.charCodeAt(5)?(I=E.charAt(4),E=E.slice(6)):I=h(E.slice(0,1024)):I=A&&A.FS?A.FS:h(E.slice(0,1024));var N=0,Z=0,z=0,B=0,le=0,ge=I.charCodeAt(0),we=!1,j=0,pe=E.charCodeAt(0);E=E.replace(/\r\n/gm,"\n");var ce=null!=A.dateNF?function Gi(o){var c="number"==typeof o?xt[o]:o;return c=c.replace(fn,"(\\d+)"),new RegExp("^"+c+"$")}(A.dateNF):null;function Ce(){var ye=E.slice(B,le),he={};if('"'==ye.charAt(0)&&'"'==ye.charAt(ye.length-1)&&(ye=ye.slice(1,-1).replace(/""/g,'"')),0===ye.length)he.t="z";else if(A.raw)he.t="s",he.v=ye;else if(0===ye.trim().length)he.t="s",he.v=ye;else if(61==ye.charCodeAt(0))34==ye.charCodeAt(1)&&34==ye.charCodeAt(ye.length-1)?(he.t="s",he.v=ye.slice(2,-1).replace(/""/g,'"')):function mp(o){return 1!=o.length}(ye)?(he.t="n",he.f=ye.slice(1)):(he.t="s",he.v=ye);else if("TRUE"==ye)he.t="b",he.v=!0;else if("FALSE"==ye)he.t="b",he.v=!1;else if(isNaN(z=Rr(ye)))if(!isNaN(al(ye).getDate())||ce&&ye.match(ce)){he.z=A.dateNF||xt[14];var je=0;ce&&ye.match(ce)&&(ye=function zt(o,c,l){var u=-1,h=-1,m=-1,_=-1,v=-1,x=-1;(c.match(fn)||[]).forEach(function(D,A){var I=parseInt(l[A+1],10);switch(D.toLowerCase().charAt(0)){case"y":u=I;break;case"d":m=I;break;case"h":_=I;break;case"s":x=I;break;case"m":_>=0?v=I:h=I}}),x>=0&&-1==v&&h>=0&&(v=h,h=-1);var C=(""+(u>=0?u:(new Date).getFullYear())).slice(-4)+"-"+("00"+(h>=1?h:1)).slice(-2)+"-"+("00"+(m>=1?m:1)).slice(-2);7==C.length&&(C="0"+C),8==C.length&&(C="20"+C);var E=("00"+(_>=0?_:0)).slice(-2)+":"+("00"+(v>=0?v:0)).slice(-2)+":"+("00"+(x>=0?x:0)).slice(-2);return-1==_&&-1==v&&-1==x?C:-1==u&&-1==h&&-1==m?E:C+"T"+E}(0,A.dateNF,ye.match(ce)||[]),je=1),A.cellDates?(he.t="d",he.v=pn(ye,je)):(he.t="n",he.v=bi(pn(ye,je))),!1!==A.cellText&&(he.w=Sr(he.z,he.v instanceof Date?bi(he.v):he.v)),A.cellNF||delete he.z}else he.t="s",he.v=ye;else he.t="n",!1!==A.cellText&&(he.w=ye),he.v=z;if("z"==he.t||(A.dense?(R[N]||(R[N]=[]),R[N][Z]=he):R[Mt({c:Z,r:N})]=he),pe=E.charCodeAt(B=le+1),y.e.c<Z&&(y.e.c=Z),y.e.r<N&&(y.e.r=N),j==ge)++Z;else if(Z=0,++N,A.sheetRows&&A.sheetRows<=N)return!0}e:for(;le<E.length;++le)switch(j=E.charCodeAt(le)){case 34:34===pe&&(we=!we);break;case ge:case 10:case 13:if(!we&&Ce())break e}return le-B>0&&Ce(),R["!ref"]=Jt(y),R}(E,D):_a(function c(E,D){var A=D||{},I=[];if(!E||0===E.length)return I;for(var R=E.split(/[\r\n]/),y=R.length-1;y>=0&&0===R[y].length;)--y;for(var N=10,Z=0,z=0;z<=y;++z)-1==(Z=R[z].indexOf(" "))?Z=R[z].length:Z++,N=Math.max(N,Z);for(z=0;z<=y;++z){I[z]=[];var B=0;for(o(R[z].slice(0,N).trim(),I,z,B,A),B=1;B<=(R[z].length-N)/10+1;++B)o(R[z].slice(N+10*(B-1),N+10*B).trim(),I,z,B,A)}return A.sheetRows&&(I=I.slice(0,A.sheetRows)),I}(E,D),D)}function v(E,D){var A="",I="string"==D.type?[0,0,0,0]:function gh(o,c){var l="";switch((c||{}).type||"base64"){case"buffer":case"array":return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]];case"base64":l=M(o.slice(0,12));break;case"binary":l=o;break;default:throw new Error("Unrecognized type "+(c&&c.type||"undefined"))}return[l.charCodeAt(0),l.charCodeAt(1),l.charCodeAt(2),l.charCodeAt(3),l.charCodeAt(4),l.charCodeAt(5),l.charCodeAt(6),l.charCodeAt(7)]}(E,D);switch(D.type){case"base64":A=M(E);break;case"binary":case"string":A=E;break;case"buffer":A=65001==D.codepage?E.toString("utf8"):O&&Buffer.isBuffer(E)?E.toString("binary"):Ye(E);break;case"array":A=To(E);break;default:throw new Error("Unrecognized type "+D.type)}return 239==I[0]&&187==I[1]&&191==I[2]?A=Bn(A.slice(3)):"string"!=D.type&&"buffer"!=D.type&&65001==D.codepage&&(A=Bn(A)),"socialcalc:version:"==A.slice(0,19)?Yf.to_sheet("string"==D.type?A:Bn(A),D):_(A,D)}return{to_workbook:function x(E,D){return Do(v(E,D),D)},to_sheet:v,from_sheet:function C(E){for(var I,D=[],A=on(E["!ref"]),R=Array.isArray(E),y=A.s.r;y<=A.e.r;++y){for(var N=[],Z=A.s.c;Z<=A.e.c;++Z){var z=Mt({r:y,c:Z});if((I=R?(E[y]||[])[Z]:E[z])&&null!=I.v){for(var B=(I.w||(Ts(I),I.w)||"").slice(0,10);B.length<10;)B+=" ";N.push(B+(0===Z?" ":""))}else N.push("          ")}D.push(N.join(""))}return D.join("\n")}}}(),As=function(){function o(Q,xe,ie){if(Q){Qi(Q,Q.l||0);for(var ne=ie.Enum||It;Q.l<Q.length;){var Ee=Q.read_shift(2),ot=ne[Ee]||ne[65535],$e=Q.read_shift(2),We=Q.l+$e,Le=ot.f&&ot.f(Q,$e,ie);if(Q.l=We,xe(Le,ot,Ee))return}}}function l(Q,xe){if(!Q)return Q;var ie=xe||{},ne=ie.dense?[]:{},Ee="Sheet1",ot="",$e=0,We={},Le=[],jt=[],W={s:{r:0,c:0},e:{r:0,c:0}},At=ie.sheetRows||0;if(0==Q[2]&&(8==Q[3]||9==Q[3])&&Q.length>=16&&5==Q[14]&&108===Q[15])throw new Error("Unsupported Works 3 for Mac file");if(2==Q[2])ie.Enum=It,o(Q,function(Ke,wn,Qr){switch(Qr){case 0:ie.vers=Ke,Ke>=4096&&(ie.qpro=!0);break;case 6:W=Ke;break;case 204:Ke&&(ot=Ke);break;case 222:ot=Ke;break;case 15:case 51:ie.qpro||(Ke[1].v=Ke[1].v.slice(1));case 13:case 14:case 16:14==Qr&&112==(112&Ke[2])&&(15&Ke[2])>1&&(15&Ke[2])<15&&(Ke[1].z=ie.dateNF||xt[14],ie.cellDates&&(Ke[1].t="d",Ke[1].v=fg(Ke[1].v))),ie.qpro&&Ke[3]>$e&&(ne["!ref"]=Jt(W),We[Ee]=ne,Le.push(Ee),ne=ie.dense?[]:{},W={s:{r:0,c:0},e:{r:0,c:0}},$e=Ke[3],Ee=ot||"Sheet"+($e+1),ot="");var Br=ie.dense?(ne[Ke[0].r]||[])[Ke[0].c]:ne[Mt(Ke[0])];if(Br){Br.t=Ke[1].t,Br.v=Ke[1].v,null!=Ke[1].z&&(Br.z=Ke[1].z),null!=Ke[1].f&&(Br.f=Ke[1].f);break}ie.dense?(ne[Ke[0].r]||(ne[Ke[0].r]=[]),ne[Ke[0].r][Ke[0].c]=Ke[1]):ne[Mt(Ke[0])]=Ke[1]}},ie);else{if(26!=Q[2]&&14!=Q[2])throw new Error("Unrecognized LOTUS BOF "+Q[2]);ie.Enum=Pe,14==Q[2]&&(ie.qpro=!0,Q.l=0),o(Q,function(Ke,wn,Qr){switch(Qr){case 204:Ee=Ke;break;case 22:Ke[1].v=Ke[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ke[3]>$e&&(ne["!ref"]=Jt(W),We[Ee]=ne,Le.push(Ee),ne=ie.dense?[]:{},W={s:{r:0,c:0},e:{r:0,c:0}},Ee="Sheet"+(($e=Ke[3])+1)),At>0&&Ke[0].r>=At)break;ie.dense?(ne[Ke[0].r]||(ne[Ke[0].r]=[]),ne[Ke[0].r][Ke[0].c]=Ke[1]):ne[Mt(Ke[0])]=Ke[1],W.e.c<Ke[0].c&&(W.e.c=Ke[0].c),W.e.r<Ke[0].r&&(W.e.r=Ke[0].r);break;case 27:Ke[14e3]&&(jt[Ke[14e3][0]]=Ke[14e3][1]);break;case 1537:jt[Ke[0]]=Ke[1],Ke[0]==$e&&(Ee=Ke[1])}},ie)}if(ne["!ref"]=Jt(W),We[ot||Ee]=ne,Le.push(ot||Ee),!jt.length)return{SheetNames:Le,Sheets:We};for(var Kt={},tn=[],Nt=0;Nt<jt.length;++Nt)We[Le[Nt]]?(tn.push(jt[Nt]||Le[Nt]),Kt[jt[Nt]]=We[jt[Nt]]||We[Le[Nt]]):(tn.push(jt[Nt]),Kt[jt[Nt]]={"!ref":"A1"});return{SheetNames:tn,Sheets:Kt}}function C(Q,xe,ie){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return ie.qpro&&20768!=ie.vers?(ne[0].c=Q.read_shift(1),ne[3]=Q.read_shift(1),ne[0].r=Q.read_shift(2),Q.l+=2):(ne[2]=Q.read_shift(1),ne[0].c=Q.read_shift(2),ne[0].r=Q.read_shift(2)),ne}function E(Q,xe,ie){var ne=Q.l+xe,Ee=C(Q,0,ie);if(Ee[1].t="s",20768==ie.vers){Q.l++;var ot=Q.read_shift(1);return Ee[1].v=Q.read_shift(ot,"utf8"),Ee}return ie.qpro&&Q.l++,Ee[1].v=Q.read_shift(ne-Q.l,"cstr"),Ee}function D(Q,xe,ie){var ne=Te(7+ie.length);ne.write_shift(1,255),ne.write_shift(2,xe),ne.write_shift(2,Q),ne.write_shift(1,39);for(var Ee=0;Ee<ne.length;++Ee){var ot=ie.charCodeAt(Ee);ne.write_shift(1,ot>=128?95:ot)}return ne.write_shift(1,0),ne}function I(Q,xe,ie){var ne=Te(7);return ne.write_shift(1,255),ne.write_shift(2,xe),ne.write_shift(2,Q),ne.write_shift(2,ie,"i"),ne}function y(Q,xe,ie){var ne=Te(13);return ne.write_shift(1,255),ne.write_shift(2,xe),ne.write_shift(2,Q),ne.write_shift(8,ie,"f"),ne}function Z(Q,xe,ie){var ne=32768&xe;return xe=(ne?Q:0)+((xe&=-32769)>=8192?xe-16384:xe),(ne?"":"$")+(ie?Gn(xe):Qn(xe))}var z={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},B=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function ge(Q){var xe=[{c:0,r:0},{t:"n",v:0},0];return xe[0].r=Q.read_shift(2),xe[3]=Q[Q.l++],xe[0].c=Q[Q.l++],xe}function j(Q,xe,ie,ne){var Ee=Te(6+ne.length);Ee.write_shift(2,Q),Ee.write_shift(1,ie),Ee.write_shift(1,xe),Ee.write_shift(1,39);for(var ot=0;ot<ne.length;++ot){var $e=ne.charCodeAt(ot);Ee.write_shift(1,$e>=128?95:$e)}return Ee.write_shift(1,0),Ee}function ce(Q,xe){var ie=ge(Q),ne=Q.read_shift(4),Ee=Q.read_shift(4),ot=Q.read_shift(2);if(65535==ot)return 0===ne&&3221225472===Ee?(ie[1].t="e",ie[1].v=15):0===ne&&3489660928===Ee?(ie[1].t="e",ie[1].v=42):ie[1].v=0,ie;var $e=32768&ot;return ot=(32767&ot)-16446,ie[1].v=(1-2*$e)*(Ee*Math.pow(2,ot+32)+ne*Math.pow(2,ot)),ie}function Ce(Q,xe,ie,ne){var Ee=Te(14);if(Ee.write_shift(2,Q),Ee.write_shift(1,ie),Ee.write_shift(1,xe),0==ne)return Ee.write_shift(4,0),Ee.write_shift(4,0),Ee.write_shift(2,65535),Ee;var ot=0,$e=0,Le=0;return ne<0&&(ot=1,ne=-ne),$e=0|Math.log2(ne),0==(2147483648&(Le=(ne/=Math.pow(2,$e-31))>>>0))&&(++$e,Le=(ne/=2)>>>0),ne-=Le,Le|=2147483648,Le>>>=0,ne*=Math.pow(2,32),Ee.write_shift(4,ne>>>0),Ee.write_shift(4,Le),Ee.write_shift(2,$e+=16383+(ot?32768:0)),Ee}function je(Q,xe){var ie=ge(Q),ne=Q.read_shift(8,"f");return ie[1].v=ne,ie}function it(Q,xe){return 0==Q[Q.l+xe-1]?Q.read_shift(xe,"cstr"):""}function ct(Q,xe){var ie=Te(5+Q.length);ie.write_shift(2,14e3),ie.write_shift(2,xe);for(var ne=0;ne<Q.length;++ne){var Ee=Q.charCodeAt(ne);ie[ie.l++]=Ee>127?95:Ee}return ie[ie.l++]=0,ie}var It={0:{n:"BOF",f:Fn},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function v(Q,xe,ie){var ne={s:{c:0,r:0},e:{c:0,r:0}};return 8==xe&&ie.qpro?(ne.s.c=Q.read_shift(1),Q.l++,ne.s.r=Q.read_shift(2),ne.e.c=Q.read_shift(1),Q.l++,ne.e.r=Q.read_shift(2),ne):(ne.s.c=Q.read_shift(2),ne.s.r=Q.read_shift(2),12==xe&&ie.qpro&&(Q.l+=2),ne.e.c=Q.read_shift(2),ne.e.r=Q.read_shift(2),12==xe&&ie.qpro&&(Q.l+=2),65535==ne.s.c&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function A(Q,xe,ie){var ne=C(Q,0,ie);return ne[1].v=Q.read_shift(2,"i"),ne}},14:{n:"NUMBER",f:function R(Q,xe,ie){var ne=C(Q,0,ie);return ne[1].v=Q.read_shift(8,"f"),ne}},15:{n:"LABEL",f:E},16:{n:"FORMULA",f:function N(Q,xe,ie){var ne=Q.l+xe,Ee=C(Q,0,ie);if(Ee[1].v=Q.read_shift(8,"f"),ie.qpro)Q.l=ne;else{var ot=Q.read_shift(2);(function le(Q,xe){Qi(Q,0);for(var ie=[],ne=0,Ee="",ot="",$e="",We="";Q.l<Q.length;){var Le=Q[Q.l++];switch(Le){case 0:ie.push(Q.read_shift(8,"f"));break;case 1:ot=Z(xe[0].c,Q.read_shift(2),!0),Ee=Z(xe[0].r,Q.read_shift(2),!1),ie.push(ot+Ee);break;case 2:var jt=Z(xe[0].c,Q.read_shift(2),!0),W=Z(xe[0].r,Q.read_shift(2),!1);ot=Z(xe[0].c,Q.read_shift(2),!0),Ee=Z(xe[0].r,Q.read_shift(2),!1),ie.push(jt+W+":"+ot+Ee);break;case 3:if(Q.l<Q.length)return void console.error("WK1 premature formula end");break;case 4:ie.push("("+ie.pop()+")");break;case 5:ie.push(Q.read_shift(2));break;case 6:for(var At="";Le=Q[Q.l++];)At+=String.fromCharCode(Le);ie.push('"'+At.replace(/"/g,'""')+'"');break;case 8:ie.push("-"+ie.pop());break;case 23:ie.push("+"+ie.pop());break;case 22:ie.push("NOT("+ie.pop()+")");break;case 20:case 21:We=ie.pop(),$e=ie.pop(),ie.push(["AND","OR"][Le-20]+"("+$e+","+We+")");break;default:if(Le<32&&B[Le])We=ie.pop(),$e=ie.pop(),ie.push($e+B[Le]+We);else{if(!z[Le])return Le<=7?console.error("WK1 invalid opcode "+Le.toString(16)):Le<=24?console.error("WK1 unsupported op "+Le.toString(16)):Le<=30?console.error("WK1 invalid opcode "+Le.toString(16)):Le<=115?console.error("WK1 unsupported function opcode "+Le.toString(16)):console.error("WK1 unrecognized opcode "+Le.toString(16));if(69==(ne=z[Le][1])&&(ne=Q[Q.l++]),ne>ie.length)return void console.error("WK1 bad formula parse 0x"+Le.toString(16)+":|"+ie.join("|")+"|");var Kt=ie.slice(-ne);ie.length-=ne,ie.push(z[Le][0]+"("+Kt.join(",")+")")}}}1==ie.length?xe[1].f=""+ie[0]:console.error("WK1 bad formula parse |"+ie.join("|")+"|")})(Q.slice(Q.l,Q.l+ot),Ee),Q.l+=ot}return Ee}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:E},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:it},222:{n:"SHEETNAMELP",f:function Dt(Q,xe){var ie=Q[Q.l++];ie>xe-1&&(ie=xe-1);for(var ne="";ne.length<ie;)ne+=String.fromCharCode(Q[Q.l++]);return ne}},65535:{n:""}},Pe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function we(Q,xe){var ie=ge(Q);return ie[1].t="s",ie[1].v=Q.read_shift(xe-4,"cstr"),ie}},23:{n:"NUMBER17",f:ce},24:{n:"NUMBER18",f:function pe(Q,xe){var ie=ge(Q);ie[1].v=Q.read_shift(2);var ne=ie[1].v>>1;if(1&ie[1].v)switch(7&ne){case 0:ne=5e3*(ne>>3);break;case 1:ne=500*(ne>>3);break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64}return ie[1].v=ne,ie}},25:{n:"FORMULA19",f:function ye(Q,xe){var ie=ce(Q);return Q.l+=xe-14,ie}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function rn(Q,xe){for(var ie={},ne=Q.l+xe;Q.l<ne;){var Ee=Q.read_shift(2);if(14e3==Ee){for(ie[Ee]=[0,""],ie[Ee][0]=Q.read_shift(2);Q[Q.l];)ie[Ee][1]+=String.fromCharCode(Q[Q.l]),Q.l++;Q.l++}}return ie}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function he(Q,xe){var ie=ge(Q),ne=Q.read_shift(4);return ie[1].v=ne>>6,ie}},38:{n:"??"},39:{n:"NUMBER27",f:je},40:{n:"FORMULA28",f:function ut(Q,xe){var ie=je(Q);return Q.l+=xe-10,ie}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:it},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function _t(Q,xe,ie){if(ie.qpro&&!(xe<21)){var ne=Q.read_shift(1);return Q.l+=17,Q.l+=1,Q.l+=2,[ne,Q.read_shift(xe-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function u(Q,xe){var ie=xe||{};if(+ie.codepage>=0&&ue(+ie.codepage),"string"==ie.type)throw new Error("Cannot write WK1 to JS string");var ne=Er(),Ee=on(Q["!ref"]),ot=Array.isArray(Q),$e=[];Ve(ne,0,function m(Q){var xe=Te(2);return xe.write_shift(2,Q),xe}(1030)),Ve(ne,6,function x(Q){var xe=Te(8);return xe.write_shift(2,Q.s.c),xe.write_shift(2,Q.s.r),xe.write_shift(2,Q.e.c),xe.write_shift(2,Q.e.r),xe}(Ee));for(var We=Math.min(Ee.e.r,8191),Le=Ee.s.r;Le<=We;++Le)for(var jt=Qn(Le),W=Ee.s.c;W<=Ee.e.c;++W){Le===Ee.s.r&&($e[W]=Gn(W));var Kt=ot?(Q[Le]||[])[W]:Q[$e[W]+jt];Kt&&"z"!=Kt.t&&("n"==Kt.t?(0|Kt.v)==Kt.v&&Kt.v>=-32768&&Kt.v<=32767?Ve(ne,13,I(Le,W,Kt.v)):Ve(ne,14,y(Le,W,Kt.v)):Ve(ne,15,D(Le,W,Ts(Kt).slice(0,239))))}return Ve(ne,1),ne.end()},book_to_wk3:function h(Q,xe){var ie=xe||{};if(+ie.codepage>=0&&ue(+ie.codepage),"string"==ie.type)throw new Error("Cannot write WK3 to JS string");var ne=Er();Ve(ne,0,function _(Q){var xe=Te(26);xe.write_shift(2,4096),xe.write_shift(2,4),xe.write_shift(4,0);for(var ie=0,ne=0,Ee=0,ot=0;ot<Q.SheetNames.length;++ot){var We=Q.Sheets[Q.SheetNames[ot]];if(We&&We["!ref"]){++Ee;var Le=hr(We["!ref"]);ie<Le.e.r&&(ie=Le.e.r),ne<Le.e.c&&(ne=Le.e.c)}}return ie>8191&&(ie=8191),xe.write_shift(2,ie),xe.write_shift(1,Ee),xe.write_shift(1,ne),xe.write_shift(2,0),xe.write_shift(2,0),xe.write_shift(1,1),xe.write_shift(1,2),xe.write_shift(4,0),xe.write_shift(4,0),xe}(Q));for(var Ee=0,ot=0;Ee<Q.SheetNames.length;++Ee)(Q.Sheets[Q.SheetNames[Ee]]||{})["!ref"]&&Ve(ne,27,ct(Q.SheetNames[Ee],ot++));var $e=0;for(Ee=0;Ee<Q.SheetNames.length;++Ee){var We=Q.Sheets[Q.SheetNames[Ee]];if(We&&We["!ref"]){for(var Le=on(We["!ref"]),jt=Array.isArray(We),W=[],At=Math.min(Le.e.r,8191),Kt=Le.s.r;Kt<=At;++Kt)for(var tn=Qn(Kt),Nt=Le.s.c;Nt<=Le.e.c;++Nt){Kt===Le.s.r&&(W[Nt]=Gn(Nt));var wn=jt?(We[Kt]||[])[Nt]:We[W[Nt]+tn];wn&&"z"!=wn.t&&("n"==wn.t?Ve(ne,23,Ce(Kt,Nt,$e,wn.v)):Ve(ne,22,j(Kt,Nt,$e,Ts(wn).slice(0,239))))}++$e}}return Ve(ne,1),ne.end()},to_workbook:function c(Q,xe){switch(xe.type){case"base64":return l(ee(M(Q)),xe);case"binary":return l(ee(Q),xe);case"buffer":case"array":return l(Q,xe)}throw"Unsupported type "+xe.type}}}(),Bc=/^\s|\s$|[\t\n\r]/;function Lo(o,c){if(!c.bookSST)return"";var l=[Yt];l[l.length]=qe("sst",null,{xmlns:Ks[0],count:o.Count,uniqueCount:o.Unique});for(var u=0;u!=o.length;++u)if(null!=o[u]){var h=o[u],m="<si>";h.r?m+=h.r:(m+="<t",h.t||(h.t=""),h.t.match(Bc)&&(m+=' xml:space="preserve"'),m+=">"+Cn(h.t)+"</t>"),l[l.length]=m+="</si>"}return l.length>2&&(l[l.length]="</sst>",l[1]=l[1].replace("/>",">")),l.join("")}var Gc=function Sc(o,c){var l=!1;return null==c&&(l=!0,c=Te(15+4*o.t.length)),c.write_shift(1,0),Ei(o.t,c),l?c.slice(0,c.l):c};function jf(o){var c=Er();Fe(c,159,function BC(o,c){return c||(c=Te(8)),c.write_shift(4,o.Count),c.write_shift(4,o.Unique),c}(o));for(var l=0;l<o.length;++l)Fe(c,19,Gc(o[l]));return Fe(c,160),c.end()}function Xf(o){var l,m,c=0,u=function Fu(o){for(var c=[],l=o.split(""),u=0;u<l.length;++u)c[u]=l[u].charCodeAt(0);return c}(o),h=u.length+1;for((l=re(h))[0]=u.length,m=1;m!=h;++m)l[m]=u[m-1];for(m=h-1;m>=0;--m)c=((0==(16384&c)?0:1)|c<<1&32767)^l[m];return 52811^c}var tp=function(){function o(h,m){switch(m.type){case"base64":return c(M(h),m);case"binary":return c(h,m);case"buffer":return c(O&&Buffer.isBuffer(h)?h.toString("binary"):Ye(h),m);case"array":return c(To(h),m)}throw new Error("Unrecognized type "+m.type)}function c(h,m){var v=(m||{}).dense?[]:{},x=h.match(/\\trowd.*?\\row\b/g);if(!x.length)throw new Error("RTF missing table");var C={s:{c:0,r:0},e:{c:0,r:x.length-1}};return x.forEach(function(E,D){Array.isArray(v)&&(v[D]=[]);for(var R,A=/\\\w+\b/g,I=0,y=-1;R=A.exec(E);){if("\\cell"===R[0]){var N=E.slice(I,A.lastIndex-R[0].length);if(" "==N[0]&&(N=N.slice(1)),++y,N.length){var Z={v:N,t:"s"};Array.isArray(v)?v[D][y]=Z:v[Mt({r:D,c:y})]=Z}}I=A.lastIndex}y>C.e.c&&(C.e.c=y)}),v["!ref"]=Jt(C),v}return{to_workbook:function l(h,m){return Do(o(h,m),m)},to_sheet:o,from_sheet:function u(h){for(var v,m=["{\\rtf1\\ansi"],_=on(h["!ref"]),x=Array.isArray(h),C=_.s.r;C<=_.e.r;++C){m.push("\\trowd\\trautofit1");for(var E=_.s.c;E<=_.e.c;++E)m.push("\\cellx"+(E+1));for(m.push("\\pard\\intbl"),E=_.s.c;E<=_.e.c;++E){var D=Mt({r:C,c:E});(v=x?(h[C]||[])[E]:h[D])&&(null!=v.v||v.f&&!v.F)&&(m.push(" "+(v.w||(Ts(v),v.w))),m.push("\\cell"))}m.push("\\pard\\intbl\\row")}return m.join("")+"}"}}}();function Zc(o){for(var c=0,l=1;3!=c;++c)l=256*l+(o[c]>255?255:o[c]<0?0:o[c]);return l.toString(16).toUpperCase().slice(1)}var Hi=6;function Po(o){return Math.floor((o+Math.round(128/Hi)/256)*Hi)}function Uo(o){return Math.floor((o-5)/Hi*100+.5)/100}function Bo(o){return Math.round((o*Hi+5)/Hi*256)/256}function no(o){o.width?(o.wpx=Po(o.width),o.wch=Uo(o.wpx),o.MDW=Hi):o.wpx?(o.wch=Uo(o.wpx),o.width=Bo(o.wch),o.MDW=Hi):"number"==typeof o.wch&&(o.width=Bo(o.wch),o.wpx=Po(o.width),o.MDW=Hi),o.customWidth&&delete o.customWidth}function Jc(o){return 96*o/96}function qc(o){return 96*o/96}function ip(o,c){var u,l=[Yt,qe("styleSheet",null,{xmlns:Ks[0],"xmlns:vt":Wn_vt})];return o.SSF&&null!=(u=function K_(o){var c=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(l){for(var u=l[0];u<=l[1];++u)null!=o[u]&&(c[c.length]=qe("numFmt",null,{numFmtId:u,formatCode:Cn(o[u])}))}),1===c.length?"":(c[c.length]="</numFmts>",c[0]=qe("numFmts",null,{count:c.length-2}).replace("/>",">"),c.join(""))}(o.SSF))&&(l[l.length]=u),l[l.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',l[l.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',l[l.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',l[l.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(u=function XC(o){var c=[];return c[c.length]=qe("cellXfs",null),o.forEach(function(l){c[c.length]=qe("xf",null,l)}),c[c.length]="</cellXfs>",2===c.length?"":(c[0]=qe("cellXfs",null,{count:c.length-2}).replace("/>",">"),c.join(""))}(c.cellXfs))&&(l[l.length]=u),l[l.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',l[l.length]='<dxfs count="0"/>',l[l.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',l.length>2&&(l[l.length]="</styleSheet>",l[1]=l[1].replace("/>",">")),l.join("")}function W_(o,c,l){l||(l=Te(6+4*c.length)),l.write_shift(2,o),Ei(c,l);var u=l.length>l.l?l.slice(0,l.l):l;return null==l.l&&(l.l=l.length),u}var Kc,bl=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Tr=Xi;function ci(o,c){c||(c=Te(84)),Kc||(Kc=nu(bl));var l=Kc[o.patternType];null==l&&(l=40),c.write_shift(4,l);var u=0;if(40!=l)for(Ec({auto:1},c),Ec({auto:1},c);u<12;++u)c.write_shift(4,0);else{for(;u<4;++u)c.write_shift(4,0);for(;u<12;++u)c.write_shift(4,0)}return c.length>c.l?c.slice(0,c.l):c}function Os(o,c,l){return l||(l=Te(16)),l.write_shift(2,c||0),l.write_shift(2,o.numFmtId||0),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(1,0),l.write_shift(1,0),l.write_shift(1,0),l.write_shift(1,0),l.write_shift(1,0),l.write_shift(1,0),l}function sr(o,c){return c||(c=Te(10)),c.write_shift(1,0),c.write_shift(1,0),c.write_shift(4,0),c.write_shift(4,0),c}var Go=Xi;function oS(o,c){var l=Er();return Fe(l,278),function eS(o,c){if(c){var l=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(u){for(var h=u[0];h<=u[1];++h)null!=c[h]&&++l}),0!=l&&(Fe(o,615,er(l)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(u){for(var h=u[0];h<=u[1];++h)null!=c[h]&&Fe(o,44,W_(h,c[h]))}),Fe(o,616))}}(l,o.SSF),function tS(o){Fe(o,611,er(1)),Fe(o,43,function qr(o,c){c||(c=Te(153)),c.write_shift(2,20*o.sz),function mu(o,c){c||(c=Te(2)),c.write_shift(1,(o.italic?2:0)|(o.strike?8:0)|(o.outline?16:0)|(o.shadow?32:0)|(o.condense?64:0)|(o.extend?128:0)),c.write_shift(1,0)}(o,c),c.write_shift(2,o.bold?700:400);var l=0;"superscript"==o.vertAlign?l=1:"subscript"==o.vertAlign&&(l=2),c.write_shift(2,l),c.write_shift(1,o.underline||0),c.write_shift(1,o.family||0),c.write_shift(1,o.charset||0),c.write_shift(1,0),Ec(o.color,c);var u=0;return"major"==o.scheme&&(u=1),"minor"==o.scheme&&(u=2),c.write_shift(1,u),Ei(o.name,c),c.length>c.l?c.slice(0,c.l):c}({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Fe(o,612)}(l),function nS(o){Fe(o,603,er(2)),Fe(o,45,ci({patternType:"none"})),Fe(o,45,ci({patternType:"gray125"})),Fe(o,604)}(l),function iS(o){Fe(o,613,er(1)),Fe(o,46,function xl(o,c){return c||(c=Te(51)),c.write_shift(1,0),sr(0,c),sr(0,c),sr(0,c),sr(0,c),sr(0,c),c.length>c.l?c.slice(0,c.l):c}()),Fe(o,614)}(l),function Cl(o){Fe(o,626,er(1)),Fe(o,47,Os({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Fe(o,627)}(l),function rS(o,c){Fe(o,617,er(c.length)),c.forEach(function(l){Fe(o,47,Os(l,0))}),Fe(o,618)}(l,c.cellXfs),function j_(o){Fe(o,619,er(1)),Fe(o,48,function fr(o,c){return c||(c=Te(52)),c.write_shift(4,o.xfId),c.write_shift(2,1),c.write_shift(1,+o.builtinId),c.write_shift(1,0),fu(o.name||"",c),c.length>c.l?c.slice(0,c.l):c}({xfId:0,builtinId:0,name:"Normal"})),Fe(o,620)}(l),function Q_(o){Fe(o,505,er(0)),Fe(o,506)}(l),function sS(o){Fe(o,508,function wi(o,c,l){var u=Te(2052);return u.write_shift(4,o),fu(c,u),fu(l,u),u.length>u.l?u.slice(0,u.l):u}(0,"TableStyleMedium9","PivotStyleMedium4")),Fe(o,509)}(l),Fe(l,279),l.end()}function ap(o,c){if(c&&c.themeXLSX)return c.themeXLSX;if(o&&"string"==typeof o.raw)return o.raw;var l=[Yt];return l[l.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',l[l.length]="<a:themeElements>",l[l.length]='<a:clrScheme name="Office">',l[l.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',l[l.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',l[l.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',l[l.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',l[l.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',l[l.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',l[l.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',l[l.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',l[l.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',l[l.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',l[l.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',l[l.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',l[l.length]="</a:clrScheme>",l[l.length]='<a:fontScheme name="Office">',l[l.length]="<a:majorFont>",l[l.length]='<a:latin typeface="Cambria"/>',l[l.length]='<a:ea typeface=""/>',l[l.length]='<a:cs typeface=""/>',l[l.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',l[l.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',l[l.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',l[l.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',l[l.length]='<a:font script="Arab" typeface="Times New Roman"/>',l[l.length]='<a:font script="Hebr" typeface="Times New Roman"/>',l[l.length]='<a:font script="Thai" typeface="Tahoma"/>',l[l.length]='<a:font script="Ethi" typeface="Nyala"/>',l[l.length]='<a:font script="Beng" typeface="Vrinda"/>',l[l.length]='<a:font script="Gujr" typeface="Shruti"/>',l[l.length]='<a:font script="Khmr" typeface="MoolBoran"/>',l[l.length]='<a:font script="Knda" typeface="Tunga"/>',l[l.length]='<a:font script="Guru" typeface="Raavi"/>',l[l.length]='<a:font script="Cans" typeface="Euphemia"/>',l[l.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',l[l.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',l[l.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',l[l.length]='<a:font script="Thaa" typeface="MV Boli"/>',l[l.length]='<a:font script="Deva" typeface="Mangal"/>',l[l.length]='<a:font script="Telu" typeface="Gautami"/>',l[l.length]='<a:font script="Taml" typeface="Latha"/>',l[l.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',l[l.length]='<a:font script="Orya" typeface="Kalinga"/>',l[l.length]='<a:font script="Mlym" typeface="Kartika"/>',l[l.length]='<a:font script="Laoo" typeface="DokChampa"/>',l[l.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',l[l.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',l[l.length]='<a:font script="Viet" typeface="Times New Roman"/>',l[l.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',l[l.length]='<a:font script="Geor" typeface="Sylfaen"/>',l[l.length]="</a:majorFont>",l[l.length]="<a:minorFont>",l[l.length]='<a:latin typeface="Calibri"/>',l[l.length]='<a:ea typeface=""/>',l[l.length]='<a:cs typeface=""/>',l[l.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',l[l.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',l[l.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',l[l.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',l[l.length]='<a:font script="Arab" typeface="Arial"/>',l[l.length]='<a:font script="Hebr" typeface="Arial"/>',l[l.length]='<a:font script="Thai" typeface="Tahoma"/>',l[l.length]='<a:font script="Ethi" typeface="Nyala"/>',l[l.length]='<a:font script="Beng" typeface="Vrinda"/>',l[l.length]='<a:font script="Gujr" typeface="Shruti"/>',l[l.length]='<a:font script="Khmr" typeface="DaunPenh"/>',l[l.length]='<a:font script="Knda" typeface="Tunga"/>',l[l.length]='<a:font script="Guru" typeface="Raavi"/>',l[l.length]='<a:font script="Cans" typeface="Euphemia"/>',l[l.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',l[l.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',l[l.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',l[l.length]='<a:font script="Thaa" typeface="MV Boli"/>',l[l.length]='<a:font script="Deva" typeface="Mangal"/>',l[l.length]='<a:font script="Telu" typeface="Gautami"/>',l[l.length]='<a:font script="Taml" typeface="Latha"/>',l[l.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',l[l.length]='<a:font script="Orya" typeface="Kalinga"/>',l[l.length]='<a:font script="Mlym" typeface="Kartika"/>',l[l.length]='<a:font script="Laoo" typeface="DokChampa"/>',l[l.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',l[l.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',l[l.length]='<a:font script="Viet" typeface="Arial"/>',l[l.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',l[l.length]='<a:font script="Geor" typeface="Sylfaen"/>',l[l.length]="</a:minorFont>",l[l.length]="</a:fontScheme>",l[l.length]='<a:fmtScheme name="Office">',l[l.length]="<a:fillStyleLst>",l[l.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',l[l.length]='<a:gradFill rotWithShape="1">',l[l.length]="<a:gsLst>",l[l.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',l[l.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',l[l.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',l[l.length]="</a:gsLst>",l[l.length]='<a:lin ang="16200000" scaled="1"/>',l[l.length]="</a:gradFill>",l[l.length]='<a:gradFill rotWithShape="1">',l[l.length]="<a:gsLst>",l[l.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',l[l.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',l[l.length]="</a:gsLst>",l[l.length]='<a:lin ang="16200000" scaled="0"/>',l[l.length]="</a:gradFill>",l[l.length]="</a:fillStyleLst>",l[l.length]="<a:lnStyleLst>",l[l.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',l[l.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',l[l.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',l[l.length]="</a:lnStyleLst>",l[l.length]="<a:effectStyleLst>",l[l.length]="<a:effectStyle>",l[l.length]="<a:effectLst>",l[l.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',l[l.length]="</a:effectLst>",l[l.length]="</a:effectStyle>",l[l.length]="<a:effectStyle>",l[l.length]="<a:effectLst>",l[l.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',l[l.length]="</a:effectLst>",l[l.length]="</a:effectStyle>",l[l.length]="<a:effectStyle>",l[l.length]="<a:effectLst>",l[l.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',l[l.length]="</a:effectLst>",l[l.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',l[l.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',l[l.length]="</a:effectStyle>",l[l.length]="</a:effectStyleLst>",l[l.length]="<a:bgFillStyleLst>",l[l.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',l[l.length]='<a:gradFill rotWithShape="1">',l[l.length]="<a:gsLst>",l[l.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',l[l.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',l[l.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',l[l.length]="</a:gsLst>",l[l.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',l[l.length]="</a:gradFill>",l[l.length]='<a:gradFill rotWithShape="1">',l[l.length]="<a:gsLst>",l[l.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',l[l.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',l[l.length]="</a:gsLst>",l[l.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',l[l.length]="</a:gradFill>",l[l.length]="</a:bgFillStyleLst>",l[l.length]="</a:fmtScheme>",l[l.length]="</a:themeElements>",l[l.length]="<a:objectDefaults>",l[l.length]="<a:spDef>",l[l.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',l[l.length]="</a:spDef>",l[l.length]="<a:lnDef>",l[l.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',l[l.length]="</a:lnDef>",l[l.length]="</a:objectDefaults>",l[l.length]="<a:extraClrSchemeLst/>",l[l.length]="</a:theme>",l.join("")}function wl(){var o=Er();return Fe(o,332),Fe(o,334,er(1)),Fe(o,335,function pS(o){var c=Te(12+2*o.name.length);return c.write_shift(4,o.flags),c.write_shift(4,o.version),Ei(o.name,c),c.slice(0,c.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),Fe(o,336),Fe(o,339,function gS(o,c){var l=Te(8+2*c.length);return l.write_shift(4,o),Ei(c,l),l.slice(0,l.l)}(1,"XLDAPR")),Fe(o,52),Fe(o,35,er(514)),Fe(o,4096,er(0)),Fe(o,4097,ir(1)),Fe(o,36),Fe(o,53),Fe(o,340),Fe(o,337,function s0(o,c){var l=Te(8);return l.write_shift(4,o),l.write_shift(4,c?1:0),l}(1,!0)),Fe(o,51,function r0(o){var c=Te(4+8*o.length);c.write_shift(4,o.length);for(var l=0;l<o.length;++l)c.write_shift(4,o[l][0]),c.write_shift(4,o[l][1]);return c}([[1,0]])),Fe(o,338),Fe(o,333),o.end()}function Zu(){var o=[Yt];return o.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),o.join("")}var vt=1024;function Vu(o,c){for(var l=[21600,21600],u=["m0,0l0",l[1],l[0],l[1],l[0],"0xe"].join(","),h=[qe("xml",null,{"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":ji_o,"xmlns:x":ji_x,"xmlns:mv":"http://macVmlSchemaUri"}).replace(/\/>/,">"),qe("o:shapelayout",qe("o:idmap",null,{"v:ext":"edit",data:o}),{"v:ext":"edit"}),qe("v:shapetype",[qe("v:stroke",null,{joinstyle:"miter"}),qe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:l.join(","),path:u})];vt<1e3*o;)vt+=1e3;return c.forEach(function(m){var _=ii(m[0]),v={color2:"#BEFF82",type:"gradient"};"gradient"==v.type&&(v.angle="-180");var x="gradient"==v.type?qe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,C=qe("v:fill",x,v);++vt,h=h.concat(["<v:shape"+su({id:"_x0000_s"+vt,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(m[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",C,qe("v:shadow",null,{on:"t",obscured:"t"}),qe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",yi("x:Anchor",[_.c+1,0,_.r+1,0,_.c+3,20,_.r+5,20].join(",")),yi("x:AutoFill","False"),yi("x:Row",String(_.r)),yi("x:Column",String(_.c)),m[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),h.push("</xml>"),h.join("")}function Aa(o){var c=[Yt,qe("comments",null,{xmlns:Ks[0]})],l=[];return c.push("<authors>"),o.forEach(function(u){u[1].forEach(function(h){var m=Cn(h.a);-1==l.indexOf(m)&&(l.push(m),c.push("<author>"+m+"</author>")),h.T&&h.ID&&-1==l.indexOf("tc="+h.ID)&&(l.push("tc="+h.ID),c.push("<author>tc="+h.ID+"</author>"))})}),0==l.length&&(l.push("SheetJ5"),c.push("<author>SheetJ5</author>")),c.push("</authors>"),c.push("<commentList>"),o.forEach(function(u){var h=0,m=[];if(u[1][0]&&u[1][0].T&&u[1][0].ID?h=l.indexOf("tc="+u[1][0].ID):u[1].forEach(function(x){x.a&&(h=l.indexOf(Cn(x.a))),m.push(x.t||"")}),c.push('<comment ref="'+u[0]+'" authorId="'+h+'"><text>'),m.length<=1)c.push(yi("t",Cn(m[0]||"")));else{for(var _="Comment:\n    "+m[0]+"\n",v=1;v<m.length;++v)_+="Reply:\n    "+m[v]+"\n";c.push(yi("t",Cn(_)))}c.push("</text></comment>")}),c.push("</commentList>"),c.length>2&&(c[c.length]="</comments>",c[1]=c[1].replace("/>",">")),c.join("")}function d0(o,c,l){var u=[Yt,qe("ThreadedComments",null,{xmlns:Wn_TCMNT}).replace(/[\/]>/,">")];return o.forEach(function(h){var m="";(h[1]||[]).forEach(function(_,v){if(_.T){_.a&&-1==c.indexOf(_.a)&&c.push(_.a);var x={ref:h[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+l.tcid++).slice(-12)+"}"};0==v?m=x.id:x.parentId=m,_.ID=x.id,_.a&&(x.personId="{54EE7950-7262-4200-6969-"+("000000000000"+c.indexOf(_.a)).slice(-12)+"}"),u.push(qe("threadedComment",yi("text",_.t||""),x))}else delete _.ID})}),u.push("</ThreadedComments>"),u.join("")}var jc=Zi;function Oa(o){var c=Er(),l=[];return Fe(c,628),Fe(c,630),o.forEach(function(u){u[1].forEach(function(h){l.indexOf(h.a)>-1||(l.push(h.a.slice(0,54)),Fe(c,632,function CS(o){return Ei(o.slice(0,54))}(h.a)))})}),Fe(c,631),Fe(c,633),o.forEach(function(u){u[1].forEach(function(h){h.iauthor=l.indexOf(h.a);var m={s:ii(u[0]),e:ii(u[0])};Fe(c,635,function h0(o,c){return null==c&&(c=Te(36)),c.write_shift(4,o[1].iauthor),Oo(o[0],c),c.write_shift(4,0),c.write_shift(4,0),c.write_shift(4,0),c.write_shift(4,0),c}([m,h])),h.t&&h.t.length>0&&Fe(c,637,function fl(o,c){var l=!1;return null==c&&(l=!0,c=Te(23+4*o.t.length)),c.write_shift(1,1),Ei(o.t,c),c.write_shift(4,1),function du(o,c){c||(c=Te(4)),c.write_shift(2,o.ich||0),c.write_shift(2,o.ifnt||0)}({ich:0,ifnt:0},c),l?c.slice(0,c.l):c}(h)),Fe(c,636),delete h.iauthor})}),Fe(c,634),Fe(c,629),c.end()}var fp=["xlsb","xlsm","xlam","biff8","xla"],kl=function(){var o=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,c={r:0,c:0};function l(u,h,m,_){var v=!1,x=!1;0==m.length?x=!0:"["==m.charAt(0)&&(x=!0,m=m.slice(1,-1)),0==_.length?v=!0:"["==_.charAt(0)&&(v=!0,_=_.slice(1,-1));var C=m.length>0?0|parseInt(m,10):0,E=_.length>0?0|parseInt(_,10):0;return v?E+=c.c:--E,x?C+=c.r:--C,h+(v?"":"$")+Gn(E)+(x?"":"$")+Qn(C)}return function(h,m){return c=m,h.replace(o,l)}}(),Qc=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,qu=function(){return function(c,l){return c.replace(Qc,function(u,h,m,_,v,x){var C=vf(_)-(m?0:l.c),E=gf(x)-(v?0:l.r);return h+"R"+(0==E?"":v?E+1:"["+E+"]")+"C"+(0==C?"":m?C+1:"["+C+"]")})}}();function pp(o,c){return o.replace(Qc,function(l,u,h,m,_,v){return u+("$"==h?h+m:Gn(vf(m)+c.c))+("$"==_?_+v:Qn(gf(v)+c.r))})}function ei(o){o.l+=1}function zo(o,c){var l=o.read_shift(1==c?1:2);return[16383&l,l>>14&1,l>>15&1]}function SS(o,c,l){var u=2;if(l){if(l.biff>=2&&l.biff<=5)return gp(o);12==l.biff&&(u=4)}var h=o.read_shift(u),m=o.read_shift(u),_=zo(o,2),v=zo(o,2);return{s:{r:h,c:_[0],cRel:_[1],rRel:_[2]},e:{r:m,c:v[0],cRel:v[1],rRel:v[2]}}}function gp(o){var c=zo(o,2),l=zo(o,2),u=o.read_shift(1),h=o.read_shift(1);return{s:{r:c[0],c:u,cRel:c[1],rRel:c[2]},e:{r:l[0],c:h,cRel:l[1],rRel:l[2]}}}function _p(o,c,l){if(l&&l.biff>=2&&l.biff<=5)return function vp(o){var c=zo(o,2),l=o.read_shift(1);return{r:c[0],c:l,cRel:c[1],rRel:c[2]}}(o);var u=o.read_shift(l&&12==l.biff?4:2),h=zo(o,2);return{r:u,c:h[0],cRel:h[1],rRel:h[2]}}function bp(o){var c=o.read_shift(2),l=o.read_shift(2);return{r:c,c:255&l,fQuoted:!!(16384&l),cRel:l>>15,rRel:l>>15}}function yl(o){var c=1&o[o.l+1];return o.l+=4,[c,1]}function Yu(o){return[o.read_shift(1),o.read_shift(1)]}function my(o,c){var l=[o.read_shift(1)];if(12==c)switch(l[0]){case 2:l[0]=4;break;case 4:l[0]=16;break;case 0:l[0]=1;break;case 1:l[0]=2}switch(l[0]){case 4:l[1]=function Rt(o,c){return 1===o.read_shift(c)}(o,1)?"TRUE":"FALSE",12!=c&&(o.l+=7);break;case 37:case 16:l[1]=Xs[o[o.l]],o.l+=12==c?4:8;break;case 0:o.l+=8;break;case 1:l[1]=nr(o);break;case 2:l[1]=function ml(o,c,l){if(l.biff>5)return function Fc(o,c,l){var u=o.read_shift(l&&2==l.biff?1:2);return 0===u?(o.l++,""):function Fo(o,c,l){if(l){if(l.biff>=2&&l.biff<=5)return o.read_shift(c,"cpstr");if(l.biff>=12)return o.read_shift(c,"dbcs-cont")}var h=o.read_shift(1);return o.read_shift(c,0===h?"sbcs-cont":"dbcs-cont")}(o,u,l)}(o,0,l);var u=o.read_shift(1);return 0===u?(o.l++,""):o.read_shift(u,l.biff<=4||!o.lens?"cpstr":"sbcs-cont")}(o,0,{biff:c>0&&c<8?2:c});break;default:throw new Error("Bad SerAr: "+l[0])}return l}function E0(o,c,l){for(var u=o.read_shift(12==l.biff?4:2),h=[],m=0;m!=u;++m)h.push((12==l.biff?Ao:Lc)(o,8));return h}function hs(o,c,l){var u=0,h=0;12==l.biff?(u=o.read_shift(4),h=o.read_shift(4)):(h=1+o.read_shift(1),u=1+o.read_shift(2)),l.biff>=2&&l.biff<8&&(--u,0==--h&&(h=256));for(var m=0,_=[];m!=u&&(_[m]=[]);++m)for(var v=0;v!=h;++v)_[m][v]=my(o,l.biff);return _}function fs(o,c,l){return o.l+=2,[bp(o)]}function Sp(o){return o.l+=6,[]}function y0(o){return o.l+=2,[Fn(o),1&o.read_shift(2)]}var ZS=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"],A0={1:{n:"PtgExp",f:function C0(o,c,l){return o.l++,l&&12==l.biff?[o.read_shift(4,"i"),0]:[o.read_shift(2),o.read_shift(l&&2==l.biff?1:2)]}},2:{n:"PtgTbl",f:Xi},3:{n:"PtgAdd",f:ei},4:{n:"PtgSub",f:ei},5:{n:"PtgMul",f:ei},6:{n:"PtgDiv",f:ei},7:{n:"PtgPower",f:ei},8:{n:"PtgConcat",f:ei},9:{n:"PtgLt",f:ei},10:{n:"PtgLe",f:ei},11:{n:"PtgEq",f:ei},12:{n:"PtgGe",f:ei},13:{n:"PtgGt",f:ei},14:{n:"PtgNe",f:ei},15:{n:"PtgIsect",f:ei},16:{n:"PtgUnion",f:ei},17:{n:"PtgRange",f:ei},18:{n:"PtgUplus",f:ei},19:{n:"PtgUminus",f:ei},20:{n:"PtgPercent",f:ei},21:{n:"PtgParen",f:ei},22:{n:"PtgMissArg",f:ei},23:{n:"PtgStr",f:function MS(o,c,l){return o.l++,ku(o,0,l)}},26:{n:"PtgSheet",f:function JS(o,c,l){return o.l+=5,o.l+=2,o.l+=2==l.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function qS(o,c,l){return o.l+=2==l.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function Ku(o){return o.l++,Xs[o.read_shift(1)]}},29:{n:"PtgBool",f:function IS(o){return o.l++,0!==o.read_shift(1)}},30:{n:"PtgInt",f:function OS(o){return o.l++,o.read_shift(2)}},31:{n:"PtgNum",f:function S0(o){return o.l++,nr(o)}},32:{n:"PtgArray",f:function uy(o,c,l){var u=(96&o[o.l++])>>5;return o.l+=2==l.biff?6:12==l.biff?14:7,[u]}},33:{n:"PtgFunc",f:function AS(o,c,l){var u=(96&o[o.l])>>5;o.l+=1;var h=o.read_shift(l&&l.biff<=3?1:2);return[U0[h],Tp[h],u]}},34:{n:"PtgFuncVar",f:function py(o,c,l){var u=o[o.l++],h=o.read_shift(1),m=l&&l.biff<=3?[88==u?-1:0,o.read_shift(1)]:function x0(o){return[o[o.l+1]>>7,32767&o.read_shift(2)]}(o);return[h,(0===m[0]?Tp:P0)[m[1]]]}},35:{n:"PtgName",f:function $u(o,c,l){var u=o.read_shift(1)>>>5&3,m=o.read_shift(!l||l.biff>=8?4:2);switch(l.biff){case 2:o.l+=5;break;case 3:case 4:o.l+=8;break;case 5:o.l+=12}return[u,0,m]}},36:{n:"PtgRef",f:function v0(o,c,l){var u=(96&o[o.l])>>5;return o.l+=1,[u,_p(o,0,l)]}},37:{n:"PtgArea",f:function dy(o,c,l){return[(96&o[o.l++])>>5,SS(o,0,l)]}},38:{n:"PtgMemArea",f:function NS(o,c,l){var u=o.read_shift(1)>>>5&3;return o.l+=l&&2==l.biff?3:4,[u,o.read_shift(l&&2==l.biff?1:2)]}},39:{n:"PtgMemErr",f:Xi},40:{n:"PtgMemNoMem",f:Xi},41:{n:"PtgMemFunc",f:function k0(o,c,l){return[o.read_shift(1)>>>5&3,o.read_shift(l&&2==l.biff?1:2)]}},42:{n:"PtgRefErr",f:function FS(o,c,l){var u=o.read_shift(1)>>>5&3;return o.l+=4,l.biff<8&&o.l--,12==l.biff&&(o.l+=2),[u]}},43:{n:"PtgAreaErr",f:function wS(o,c,l){var u=(96&o[o.l++])>>5;return o.l+=l&&l.biff>8?12:l.biff<8?6:8,[u]}},44:{n:"PtgRefN",f:function b0(o,c,l){var u=(96&o[o.l])>>5;o.l+=1;var h=function ES(o,c,l){var u=l&&l.biff?l.biff:8;if(u>=2&&u<=5)return function Tl(o){var c=o.read_shift(2),l=o.read_shift(1),u=(32768&c)>>15,h=(16384&c)>>14;return c&=16383,1==u&&c>=8192&&(c-=16384),1==h&&l>=128&&(l-=256),{r:c,c:l,cRel:h,rRel:u}}(o);var h=o.read_shift(u>=12?4:2),m=o.read_shift(2),_=(16384&m)>>14,v=(32768&m)>>15;if(m&=16383,1==v)for(;h>524287;)h-=1048576;if(1==_)for(;m>8191;)m-=16384;return{r:h,c:m,cRel:_,rRel:v}}(o,0,l);return[u,h]}},45:{n:"PtgAreaN",f:function _0(o,c,l){var u=(96&o[o.l++])>>5,h=function p0(o,c,l){if(l.biff<8)return gp(o);var u=o.read_shift(12==l.biff?4:2),h=o.read_shift(12==l.biff?4:2),m=zo(o,2),_=zo(o,2);return{s:{r:u,c:m[0],cRel:m[1],rRel:m[2]},e:{r:h,c:_[0],cRel:_[1],rRel:_[2]}}}(o,0,l);return[u,h]}},46:{n:"PtgMemAreaN",f:function Ep(o){return[o.read_shift(1)>>>5&3,o.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function gy(o){return[o.read_shift(1)>>>5&3,o.read_shift(2)]}},57:{n:"PtgNameX",f:function RS(o,c,l){return 5==l.biff?function w0(o){var c=o.read_shift(1)>>>5&3,l=o.read_shift(2,"i");o.l+=8;var u=o.read_shift(2);return o.l+=12,[c,l,u]}(o):[o.read_shift(1)>>>5&3,o.read_shift(2),o.read_shift(4)]}},58:{n:"PtgRef3d",f:function DS(o,c,l){var u=(96&o[o.l])>>5;o.l+=1;var h=o.read_shift(2);return l&&5==l.biff&&(o.l+=12),[u,h,_p(o,0,l)]}},59:{n:"PtgArea3d",f:function m0(o,c,l){var u=(96&o[o.l++])>>5,h=o.read_shift(2,"i");if(l&&5===l.biff)o.l+=12;return[u,h,SS(o,0,l)]}},60:{n:"PtgRefErr3d",f:function LS(o,c,l){var u=(96&o[o.l++])>>5,h=o.read_shift(2),m=4;if(l)switch(l.biff){case 5:m=15;break;case 12:m=6}return o.l+=m,[u,h]}},61:{n:"PtgAreaErr3d",f:function g0(o,c,l){var u=(96&o[o.l++])>>5,h=o.read_shift(2),m=8;if(l)switch(l.biff){case 5:o.l+=12,m=6;break;case 12:m=12}return o.l+=m,[u,h]}},255:{}},KS={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},O0={1:{n:"PtgElfLel",f:y0},2:{n:"PtgElfRw",f:fs},3:{n:"PtgElfCol",f:fs},6:{n:"PtgElfRwV",f:fs},7:{n:"PtgElfColV",f:fs},10:{n:"PtgElfRadical",f:fs},11:{n:"PtgElfRadicalS",f:Sp},13:{n:"PtgElfColS",f:Sp},15:{n:"PtgElfColSV",f:Sp},16:{n:"PtgElfRadicalLel",f:y0},25:{n:"PtgList",f:function HS(o){o.l+=2;var c=o.read_shift(2),l=o.read_shift(2),u=o.read_shift(4),h=o.read_shift(2),m=o.read_shift(2);return{ixti:c,coltype:3&l,rt:ZS[l>>2&31],idx:u,c:h,C:m}}},29:{n:"PtgSxName",f:function VS(o){return o.l+=2,[o.read_shift(4)]}},255:{}},$S={0:{n:"PtgAttrNoop",f:function YS(o){return o.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function yS(o,c,l){var u=255&o[o.l+1]?1:0;return o.l+=l&&2==l.biff?3:4,[u]}},2:{n:"PtgAttrIf",f:function fy(o,c,l){var u=255&o[o.l+1]?1:0;return o.l+=2,[u,o.read_shift(l&&2==l.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function kS(o,c,l){o.l+=2;for(var u=o.read_shift(l&&2==l.biff?1:2),h=[],m=0;m<=u;++m)h.push(o.read_shift(l&&2==l.biff?1:2));return h}},8:{n:"PtgAttrGoto",f:function hy(o,c,l){var u=255&o[o.l+1]?1:0;return o.l+=2,[u,o.read_shift(l&&2==l.biff?1:2)]}},16:{n:"PtgAttrSum",f:function ro(o,c,l){o.l+=l&&2==l.biff?3:4}},32:{n:"PtgAttrBaxcel",f:yl},33:{n:"PtgAttrBaxcel",f:yl},64:{n:"PtgAttrSpace",f:function pr(o){return o.read_shift(2),Yu(o)}},65:{n:"PtgAttrSpaceSemi",f:function xp(o){return o.read_shift(2),Yu(o)}},128:{n:"PtgAttrIfError",f:function TS(o){var c=255&o[o.l+1]?1:0;return o.l+=2,[c,o.read_shift(2)]}},255:{}};function ed(o,c,l,u){if(u.biff<8)return Xi(o,c);for(var h=o.l+c,m=[],_=0;_!==l.length;++_)switch(l[_][0]){case"PtgArray":l[_][1]=hs(o,0,u),m.push(l[_][1]);break;case"PtgMemArea":l[_][2]=E0(o,0,u),m.push(l[_][2]);break;case"PtgExp":u&&12==u.biff&&(l[_][1][1]=o.read_shift(4),m.push(l[_][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+l[_][0]}return 0!=(c=h-o.l)&&m.push(Xi(o,c)),m}function Il(o){for(var c=[],l=0;l<o.length;++l){for(var u=o[l],h=[],m=0;m<u.length;++m){var _=u[m];h.push(_?2===_[0]?'"'+_[1].replace(/"/g,'""')+'"':_[1]:"")}c.push(h.join(","))}return c.join(";")}var I0={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Ia(o,c,l){if(!o)return"SH33TJSERR0";if(l.biff>8&&(!o.XTI||!o.XTI[c]))return o.SheetNames[c];if(!o.XTI)return"SH33TJSERR6";var u=o.XTI[c];if(l.biff<8)return c>1e4&&(c-=65536),c<0&&(c=-c),0==c?"":o.XTI[c-1];if(!u)return"SH33TJSERR1";var h="";if(l.biff>8)switch(o[u[0]][0]){case 357:return h=-1==u[1]?"#REF":o.SheetNames[u[1]],u[1]==u[2]?h:h+":"+o.SheetNames[u[2]];case 358:return null!=l.SID?o.SheetNames[l.SID]:"SH33TJSSAME"+o[u[0]][0];default:return"SH33TJSSRC"+o[u[0]][0]}switch(o[u[0]][0][0]){case 1025:return h=-1==u[1]?"#REF":o.SheetNames[u[1]]||"SH33TJSERR3",u[1]==u[2]?h:h+":"+o.SheetNames[u[2]];case 14849:return o[u[0]].slice(1).map(function(m){return m.Name}).join(";;");default:return o[u[0]][0][3]?(h=-1==u[1]?"#REF":o[u[0]][0][3][u[1]]||"SH33TJSERR4",u[1]==u[2]?h:h+":"+o[u[0]][0][3][u[2]]):"SH33TJSERR2"}}function Ma(o,c,l){var u=Ia(o,c,l);return"#REF"==u?u:function M0(o,c){if(!(o||c&&c.biff<=5&&c.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(o)?"'"+o+"'":o}(u,l)}function Ri(o,c,l,u,h){var x,C,E,I,m=h&&h.biff||8,_={s:{c:0,r:0},e:{c:0,r:0}},v=[],D=0,A=0,R="";if(!o[0]||!o[0][0])return"";for(var y=-1,N="",Z=0,z=o[0].length;Z<z;++Z){var B=o[0][Z];switch(B[0]){case"PtgUminus":v.push("-"+v.pop());break;case"PtgUplus":v.push("+"+v.pop());break;case"PtgPercent":v.push(v.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(x=v.pop(),C=v.pop(),y>=0){switch(o[0][y][1][0]){case 0:N=$n(" ",o[0][y][1][1]);break;case 1:N=$n("\r",o[0][y][1][1]);break;default:if(N="",h.WTF)throw new Error("Unexpected PtgAttrSpaceType "+o[0][y][1][0])}C+=N,y=-1}v.push(C+I0[B[0]]+x);break;case"PtgIsect":x=v.pop(),C=v.pop(),v.push(C+" "+x);break;case"PtgUnion":x=v.pop(),C=v.pop(),v.push(C+","+x);break;case"PtgRange":x=v.pop(),C=v.pop(),v.push(C+":"+x);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":E=lu(B[1][1],_,h),v.push(St(E,m));break;case"PtgRefN":E=l?lu(B[1][1],l,h):B[1][1],v.push(St(E,m));break;case"PtgRef3d":D=B[1][1],E=lu(B[1][2],_,h),R=Ma(u,D,h),v.push(R+"!"+St(E,m));break;case"PtgFunc":case"PtgFuncVar":var ge=B[1][0],we=B[1][1];ge||(ge=0);var j=0==(ge&=127)?[]:v.slice(-ge);v.length-=ge,"User"===we&&(we=j.shift()),v.push(we+"("+j.join(",")+")");break;case"PtgBool":v.push(B[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":v.push(B[1]);break;case"PtgNum":v.push(String(B[1]));break;case"PtgStr":v.push('"'+B[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":I=_x(B[1][1],l?{s:l}:_,h),v.push(mf(I,h));break;case"PtgArea":I=_x(B[1][1],_,h),v.push(mf(I,h));break;case"PtgArea3d":I=B[1][2],R=Ma(u,D=B[1][1],h),v.push(R+"!"+mf(I,h));break;case"PtgAttrSum":v.push("SUM("+v.pop()+")");break;case"PtgName":var pe=(u.names||[])[(A=B[1][2])-1]||(u[0]||[])[A],ce=pe?pe.Name:"SH33TJSNAME"+String(A);ce&&"_xlfn."==ce.slice(0,6)&&!h.xlfn&&(ce=ce.slice(6)),v.push(ce);break;case"PtgNameX":var ye,Ce=B[1][1];if(A=B[1][2],!(h.biff<=5)){var he="";if(14849==((u[Ce]||[])[0]||[])[0]||(1025==((u[Ce]||[])[0]||[])[0]?u[Ce][A]&&u[Ce][A].itab>0&&(he=u.SheetNames[u[Ce][A].itab-1]+"!"):he=u.SheetNames[A-1]+"!"),u[Ce]&&u[Ce][A])he+=u[Ce][A].Name;else if(u[0]&&u[0][A])he+=u[0][A].Name;else{var je=(Ia(u,Ce,h)||"").split(";;");je[A-1]?he=je[A-1]:he+="SH33TJSERRX"}v.push(he);break}Ce<0&&(Ce=-Ce),u[Ce]&&(ye=u[Ce][A]),ye||(ye={Name:"SH33TJSERRY"}),v.push(ye.Name);break;case"PtgParen":var ut="(",it=")";if(y>=0){switch(N="",o[0][y][1][0]){case 2:ut=$n(" ",o[0][y][1][1])+ut;break;case 3:ut=$n("\r",o[0][y][1][1])+ut;break;case 4:it=$n(" ",o[0][y][1][1])+it;break;case 5:it=$n("\r",o[0][y][1][1])+it;break;default:if(h.WTF)throw new Error("Unexpected PtgAttrSpaceType "+o[0][y][1][0])}y=-1}v.push(ut+v.pop()+it);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":v.push("#REF!");break;case"PtgExp":var Dt={c:l.c,r:l.r};if(u.sharedf[Mt(E={c:B[1][1],r:B[1][0]})]){var _t=u.sharedf[Mt(E)];v.push(Ri(_t,0,Dt,u,h))}else{var rn=!1;for(x=0;x!=u.arrayf.length;++x)if(!(E.c<(C=u.arrayf[x])[0].s.c||E.c>C[0].e.c||E.r<C[0].s.r||E.r>C[0].e.r)){v.push(Ri(C[1],0,Dt,u,h)),rn=!0;break}rn||v.push(B[1])}break;case"PtgArray":v.push("{"+Il(B[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=Z;break;case"PtgMissArg":v.push("");break;case"PtgList":v.push("Table"+B[1].idx+"[#"+B[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(B))}if(3!=h.biff&&y>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(o[0][Z][0])){var It=!0;switch((B=o[0][y])[1][0]){case 4:It=!1;case 0:N=$n(" ",B[1][1]);break;case 5:It=!1;case 1:N=$n("\r",B[1][1]);break;default:if(N="",h.WTF)throw new Error("Unexpected PtgAttrSpaceType "+B[1][0])}v.push((It?N:"")+v.pop()+(It?"":N)),y=-1}}if(v.length>1&&h.WTF)throw new Error("bad formula stack");return v[0]}function wp(o,c,l){var u=o.read_shift(4),h=function Ol(o,c,l){for(var h,m,u=o.l+c,_=[];u!=o.l;)c=u-o.l,h=A0[m=o[o.l]]||A0[KS[m]],(24===m||25===m)&&(h=(24===m?O0:$S)[o[o.l+1]]),h&&h.f?_.push([h.n,h.f(o,c,l)]):Xi(o,c);return _}(o,u,l),m=o.read_shift(4);return[h,m>0?ed(o,m,h,l):null]}var vy=wp,td=wp,kp=wp,L0=wp,P0={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Tp={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},U0={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function by(o){return("of:="+o.replace(Qc,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function QS(o){return o.replace(/\./,"!")}var id=typeof Map<"u";function yp(o,c,l){var u=0,h=o.length;if(l){if(id?l.has(c):Object.prototype.hasOwnProperty.call(l,c))for(var m=id?l.get(c):l[c];u<m.length;++u)if(o[m[u]].t===c)return o.Count++,m[u]}else for(;u<h;++u)if(o[u].t===c)return o.Count++,u;return o[h]={t:c},o.Count++,o.Unique++,l&&(id?(l.has(c)||l.set(c,[]),l.get(c).push(h)):(Object.prototype.hasOwnProperty.call(l,c)||(l[c]=[]),l[c].push(h))),h}function Qu(o,c){var l={min:o+1,max:o+1},u=-1;return c.MDW&&(Hi=c.MDW),null!=c.width?l.customWidth=1:null!=c.wpx?u=Uo(c.wpx):null!=c.wch&&(u=c.wch),u>-1?(l.width=Bo(u),l.customWidth=1):null!=c.width&&(l.width=c.width),c.hidden&&(l.hidden=!0),null!=c.level&&(l.outlineLevel=l.level=c.level),l}function Rl(o,c){if(o){var l=[.7,.7,.75,.75,.3,.3];"xlml"==c&&(l=[1,1,1,1,.5,.5]),null==o.left&&(o.left=l[0]),null==o.right&&(o.right=l[1]),null==o.top&&(o.top=l[2]),null==o.bottom&&(o.bottom=l[3]),null==o.header&&(o.header=l[4]),null==o.footer&&(o.footer=l[5])}}function Ho(o,c,l){var u=l.revssf[null!=c.z?c.z:"General"],h=60,m=o.length;if(null==u&&l.ssf)for(;h<392;++h)if(null==l.ssf[h]){Ys(c.z,h),l.ssf[h]=c.z,l.revssf[c.z]=u=h;break}for(h=0;h!=m;++h)if(o[h].numFmtId===u)return h;return o[m]={numFmtId:u,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},m}function XS(o,c,l){if(o&&o["!ref"]){var u=on(o["!ref"]);if(u.e.c<u.s.c||u.e.r<u.s.r)throw new Error("Bad range ("+l+"): "+o["!ref"])}}var rE=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sE=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function eh(o,c,l,u){if(o.c&&l["!comments"].push([c,o.c]),void 0===o.v&&"string"!=typeof o.f||"z"===o.t&&!o.f)return"";var h="",m=o.t,_=o.v;if("z"!==o.t)switch(o.t){case"b":h=o.v?"1":"0";break;case"n":h=""+o.v;break;case"e":h=Xs[o.v];break;case"d":u&&u.cellDates?h=pn(o.v,-1).toISOString():((o=xn(o)).t="n",h=""+(o.v=bi(pn(o.v)))),typeof o.z>"u"&&(o.z=xt[14]);break;default:h=o.v}var v=yi("v",Cn(h)),x={r:c},C=Ho(u.cellXfs,o,u);switch(0!==C&&(x.s=C),o.t){case"n":case"z":break;case"d":x.t="d";break;case"b":x.t="b";break;case"e":x.t="e";break;default:if(null==o.v){delete o.t;break}if(o.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(u&&u.bookSST){v=yi("v",""+yp(u.Strings,o.v,u.revStrings)),x.t="s";break}x.t="str"}if(o.t!=m&&(o.t=m,o.v=_),"string"==typeof o.f&&o.f){var E=o.F&&o.F.slice(0,c.length)==c?{t:"array",ref:o.F}:null;v=qe("f",Cn(o.f),E)+(null!=o.v?v:"")}return o.l&&l["!links"].push([c,o.l]),o.D&&(x.cm=1),qe("c",v,x)}function Y0(o,c,l,u){var _,h=[Yt,qe("worksheet",null,{xmlns:Ks[0],"xmlns:r":Wn_r})],v="",x=l.Sheets[l.SheetNames[o]];null==x&&(x={});var C=x["!ref"]||"A1",E=on(C);if(E.e.c>16383||E.e.r>1048575){if(c.WTF)throw new Error("Range "+C+" exceeds format limit A1:XFD1048576");E.e.c=Math.min(E.e.c,16383),E.e.r=Math.min(E.e.c,1048575),C=Jt(E)}u||(u={}),x["!comments"]=[];var D=[];(function iE(o,c,l,u,h){var m=!1,_={},v=null;if("xlsx"!==u.bookType&&c.vbaraw){var x=c.SheetNames[l];try{c.Workbook&&(x=c.Workbook.Sheets[l].CodeName||x)}catch{}m=!0,_.codeName=Lr(Cn(x))}if(o&&o["!outline"]){var C={summaryBelow:1,summaryRight:1};o["!outline"].above&&(C.summaryBelow=0),o["!outline"].left&&(C.summaryRight=0),v=(v||"")+qe("outlinePr",null,C)}!m&&!v||(h[h.length]=qe("sheetPr",v,_))})(x,l,o,c,h),h[h.length]=qe("dimension",null,{ref:C}),h[h.length]=function mE(o,c,l,u){var h={workbookViewId:"0"};return(((u||{}).Workbook||{}).Views||[])[0]&&(h.rightToLeft=u.Workbook.Views[0].RTL?"1":"0"),qe("sheetViews",qe("sheetView",null,h),{})}(0,0,0,l),c.sheetFormat&&(h[h.length]=qe("sheetFormatPr",null,{defaultRowHeight:c.sheetFormat.defaultRowHeight||"16",baseColWidth:c.sheetFormat.baseColWidth||"10",outlineLevelRow:c.sheetFormat.outlineLevelRow||"7"})),null!=x["!cols"]&&x["!cols"].length>0&&(h[h.length]=function uE(o,c){for(var u,l=["<cols>"],h=0;h!=c.length;++h)!(u=c[h])||(l[l.length]=qe("col",null,Qu(h,u)));return l[l.length]="</cols>",l.join("")}(0,x["!cols"])),h[_=h.length]="<sheetData/>",x["!links"]=[],null!=x["!ref"]&&(v=function gE(o,c,l,u){var x,N,h=[],m=[],_=on(o["!ref"]),v="",C="",E=[],D=0,A=0,I=o["!rows"],R=Array.isArray(o),y={r:C},Z=-1;for(A=_.s.c;A<=_.e.c;++A)E[A]=Gn(A);for(D=_.s.r;D<=_.e.r;++D){for(m=[],C=Qn(D),A=_.s.c;A<=_.e.c;++A){x=E[A]+C;var z=R?(o[D]||[])[A]:o[x];void 0!==z&&null!=(v=eh(z,x,o,c))&&m.push(v)}(m.length>0||I&&I[D])&&(y={r:C},I&&I[D]&&((N=I[D]).hidden&&(y.hidden=1),Z=-1,N.hpx?Z=Jc(N.hpx):N.hpt&&(Z=N.hpt),Z>-1&&(y.ht=Z,y.customHeight=1),N.level&&(y.outlineLevel=N.level)),h[h.length]=qe("row",m.join(""),y))}if(I)for(;D<I.length;++D)I&&I[D]&&(y={r:D+1},(N=I[D]).hidden&&(y.hidden=1),Z=-1,N.hpx?Z=Jc(N.hpx):N.hpt&&(Z=N.hpt),Z>-1&&(y.ht=Z,y.customHeight=1),N.level&&(y.outlineLevel=N.level),h[h.length]=qe("row","",y));return h.join("")}(x,c),v.length>0&&(h[h.length]=v)),h.length>_+1&&(h[h.length]="</sheetData>",h[_]=h[_].replace("/>",">")),x["!protect"]&&(h[h.length]=function oE(o){var c={sheet:1};return rE.forEach(function(l){null!=o[l]&&o[l]&&(c[l]="1")}),sE.forEach(function(l){null!=o[l]&&!o[l]&&(c[l]="0")}),o.password&&(c.password=Xf(o.password).toString(16).toUpperCase()),qe("sheetProtection",null,c)}(x["!protect"])),null!=x["!autofilter"]&&(h[h.length]=function fE(o,c,l,u){var h="string"==typeof o.ref?o.ref:Jt(o.ref);l.Workbook||(l.Workbook={Sheets:[]}),l.Workbook.Names||(l.Workbook.Names=[]);var m=l.Workbook.Names,_=hr(h);_.s.r==_.e.r&&(_.e.r=hr(c["!ref"]).e.r,h=Jt(_));for(var v=0;v<m.length;++v){var x=m[v];if("_xlnm._FilterDatabase"==x.Name&&x.Sheet==u){x.Ref="'"+l.SheetNames[u]+"'!"+h;break}}return v==m.length&&m.push({Name:"_xlnm._FilterDatabase",Sheet:u,Ref:"'"+l.SheetNames[u]+"'!"+h}),qe("autoFilter",null,{ref:h})}(x["!autofilter"],x,l,o)),null!=x["!merges"]&&x["!merges"].length>0&&(h[h.length]=function V0(o){if(0===o.length)return"";for(var c='<mergeCells count="'+o.length+'">',l=0;l!=o.length;++l)c+='<mergeCell ref="'+Jt(o[l])+'"/>';return c+"</mergeCells>"}(x["!merges"]));var I,A=-1,R=-1;return x["!links"].length>0&&(h[h.length]="<hyperlinks>",x["!links"].forEach(function(y){!y[1].Target||(I={ref:y[0]},"#"!=y[1].Target.charAt(0)&&(R=Sn(u,-1,Cn(y[1].Target).replace(/#.*$/,""),qt.HLINK),I["r:id"]="rId"+R),(A=y[1].Target.indexOf("#"))>-1&&(I.location=Cn(y[1].Target.slice(A+1))),y[1].Tooltip&&(I.tooltip=Cn(y[1].Tooltip)),h[h.length]=qe("hyperlink",null,I))}),h[h.length]="</hyperlinks>"),delete x["!links"],null!=x["!margins"]&&(h[h.length]=function cE(o){return Rl(o),qe("pageMargins",null,o)}(x["!margins"])),(!c||c.ignoreEC||null==c.ignoreEC)&&(h[h.length]=yi("ignoredErrors",qe("ignoredError",null,{numberStoredAsText:1,sqref:C}))),D.length>0&&(R=Sn(u,-1,"../drawings/drawing"+(o+1)+".xml",qt.DRAW),h[h.length]=qe("drawing",null,{"r:id":"rId"+R}),x["!drawing"]=D),x["!comments"].length>0&&(R=Sn(u,-1,"../drawings/vmlDrawing"+(o+1)+".vml",qt.VML),h[h.length]=qe("legacyDrawing",null,{"r:id":"rId"+R}),x["!legacy"]=R),h.length>1&&(h[h.length]="</worksheet>",h[1]=h[1].replace("/>",">")),h.join("")}function Ip(o,c,l,u){var h=function Rs(o,c,l){var u=Te(145),h=(l["!rows"]||[])[o]||{};u.write_shift(4,o),u.write_shift(4,0);var m=320;h.hpx?m=20*Jc(h.hpx):h.hpt&&(m=20*h.hpt),u.write_shift(2,m),u.write_shift(1,0);var _=0;h.level&&(_|=h.level),h.hidden&&(_|=16),(h.hpx||h.hpt)&&(_|=32),u.write_shift(1,_),u.write_shift(1,0);var v=0,x=u.l;u.l+=4;for(var C={r:o,c:0},E=0;E<16;++E)if(!(c.s.c>E+1<<10||c.e.c<E<<10)){for(var D=-1,A=-1,I=E<<10;I<E+1<<10;++I)C.c=I,(Array.isArray(l)?(l[C.r]||[])[C.c]:l[Mt(C)])&&(D<0&&(D=I),A=I);D<0||(++v,u.write_shift(4,D),u.write_shift(4,A))}var y=u.l;return u.l=x,u.write_shift(4,v),u.l=y,u.length>u.l?u.slice(0,u.l):u}(u,l,c);(h.length>17||(c["!rows"]||[])[u])&&Fe(o,0,h)}var Mp=Ao,Rp=Oo;var Pr=Ao,zp=Oo,X0=["left","right","top","bottom","header","footer"];function n1(o,c,l,u,h,m,_){if(void 0===c.v)return!1;var v="";switch(c.t){case"b":v=c.v?"1":"0";break;case"d":(c=xn(c)).z=c.z||xt[14],c.v=bi(pn(c.v)),c.t="n";break;case"n":case"e":v=""+c.v;break;default:v=c.v}var x={r:l,c:u};switch(x.s=Ho(h.cellXfs,c,h),c.l&&m["!links"].push([Mt(x),c.l]),c.c&&m["!comments"].push([Mt(x),c.c]),c.t){case"s":case"str":return h.bookSST?(v=yp(h.Strings,c.v,h.revStrings),x.t="s",x.v=v,_?Fe(o,18,function Jo(o,c,l){return null==l&&(l=Te(8)),ds(c,l),l.write_shift(4,c.v),l}(0,x)):Fe(o,7,function Pp(o,c,l){return null==l&&(l=Te(12)),va(c,l),l.write_shift(4,c.v),l}(0,x))):(x.t="str",_?Fe(o,17,function Fl(o,c,l){return null==l&&(l=Te(8+4*o.v.length)),ds(c,l),Ei(o.v,l),l.length>l.l?l.slice(0,l.l):l}(c,x)):Fe(o,6,function TE(o,c,l){return null==l&&(l=Te(12+4*o.v.length)),va(c,l),Ei(o.v,l),l.length>l.l?l.slice(0,l.l):l}(c,x))),!0;case"n":return c.v==(0|c.v)&&c.v>-1e3&&c.v<1e3?_?Fe(o,13,function ps(o,c,l){return null==l&&(l=Te(8)),ds(c,l),tr(o.v,l),l}(c,x)):Fe(o,2,function Dr(o,c,l){return null==l&&(l=Te(12)),va(c,l),tr(o.v,l),l}(c,x)):_?Fe(o,16,function W0(o,c,l){return null==l&&(l=Te(12)),ds(c,l),js(o.v,l),l}(c,x)):Fe(o,5,function qo(o,c,l){return null==l&&(l=Te(16)),va(c,l),js(o.v,l),l}(c,x)),!0;case"b":return x.t="b",_?Fe(o,15,function Fp(o,c,l){return null==l&&(l=Te(5)),ds(c,l),l.write_shift(1,o.v?1:0),l}(c,x)):Fe(o,4,function CE(o,c,l){return null==l&&(l=Te(9)),va(c,l),l.write_shift(1,o.v?1:0),l}(c,x)),!0;case"e":return x.t="e",_?Fe(o,14,function kE(o,c,l){return null==l&&(l=Te(8)),ds(c,l),l.write_shift(1,o.v),l.write_shift(2,0),l.write_shift(1,0),l}(c,x)):Fe(o,3,function EE(o,c,l){return null==l&&(l=Te(9)),va(c,l),l.write_shift(1,o.v),l}(c,x)),!0}return _?Fe(o,12,function bE(o,c,l){return null==l&&(l=Te(4)),ds(c,l)}(0,x)):Fe(o,1,function K0(o,c,l){return null==l&&(l=Te(8)),va(c,l)}(0,x)),!0}function $o(o,c,l,u){var h=Er(),m=l.SheetNames[o],_=l.Sheets[m]||{},v=m;try{l&&l.Workbook&&(v=l.Workbook.Sheets[o].CodeName||v)}catch{}var x=on(_["!ref"]||"A1");if(x.e.c>16383||x.e.r>1048575){if(c.WTF)throw new Error("Range "+(_["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");x.e.c=Math.min(x.e.c,16383),x.e.r=Math.min(x.e.c,1048575)}return _["!links"]=[],_["!comments"]=[],Fe(h,129),(l.vbaraw||_["!outline"])&&Fe(h,147,function Vo(o,c,l){null==l&&(l=Te(84+4*o.length));var u=192;c&&(c.above&&(u&=-65),c.left&&(u&=-129)),l.write_shift(1,u);for(var h=1;h<3;++h)l.write_shift(1,0);return Ec({auto:1},l),l.write_shift(-4,-1),l.write_shift(-4,-1),Ug(o,l),l.slice(0,l.l)}(v,_["!outline"])),Fe(h,148,Rp(x)),function UE(o,c,l){Fe(o,133),Fe(o,137,function Ko(o,c,l){null==l&&(l=Te(30));var u=924;return(((c||{}).Views||[])[0]||{}).RTL&&(u|=32),l.write_shift(2,u),l.write_shift(4,0),l.write_shift(4,0),l.write_shift(4,0),l.write_shift(1,0),l.write_shift(1,0),l.write_shift(2,0),l.write_shift(2,100),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(2,0),l.write_shift(4,0),l}(0,l)),Fe(o,138),Fe(o,134)}(h,0,l.Workbook),function r1(o,c){!c||!c["!cols"]||(Fe(o,390),c["!cols"].forEach(function(l,u){l&&Fe(o,60,function AE(o,c,l){null==l&&(l=Te(18));var u=Qu(o,c);l.write_shift(-4,o),l.write_shift(-4,o),l.write_shift(4,256*(u.width||10)),l.write_shift(4,0);var h=0;return c.hidden&&(h|=1),"number"==typeof u.width&&(h|=2),c.level&&(h|=c.level<<8),l.write_shift(2,h),l}(u,l))}),Fe(o,391))}(h,_),function Pl(o,c,l,u){var h=on(c["!ref"]||"A1"),_="",v=[];Fe(o,145);var x=Array.isArray(c),C=h.e.r;c["!rows"]&&(C=Math.max(h.e.r,c["!rows"].length-1));for(var E=h.s.r;E<=C;++E){_=Qn(E),Ip(o,c,h,E);var D=!1;if(E<=h.e.r)for(var A=h.s.c;A<=h.e.c;++A){E===h.s.r&&(v[A]=Gn(A));var I=x?(c[E]||[])[A]:c[v[A]+_];D=!!I&&n1(o,I,E,A,u,c,D)}}Fe(o,146)}(h,_,0,c),function GE(o,c){!c["!protect"]||Fe(o,535,function e1(o,c){return null==c&&(c=Te(66)),c.write_shift(2,o.password?Xf(o.password):0),c.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(l){c.write_shift(4,l[1]?null==o[l[0]]||o[l[0]]?0:1:null!=o[l[0]]&&o[l[0]]?0:1)}),c}(c["!protect"]))}(h,_),function PE(o,c,l,u){if(c["!autofilter"]){var h=c["!autofilter"],m="string"==typeof h.ref?h.ref:Jt(h.ref);l.Workbook||(l.Workbook={Sheets:[]}),l.Workbook.Names||(l.Workbook.Names=[]);var _=l.Workbook.Names,v=hr(m);v.s.r==v.e.r&&(v.e.r=hr(c["!ref"]).e.r,m=Jt(v));for(var x=0;x<_.length;++x){var C=_[x];if("_xlnm._FilterDatabase"==C.Name&&C.Sheet==u){C.Ref="'"+l.SheetNames[u]+"'!"+m;break}}x==_.length&&_.push({Name:"_xlnm._FilterDatabase",Sheet:u,Ref:"'"+l.SheetNames[u]+"'!"+m}),Fe(o,161,Oo(on(m))),Fe(o,162)}}(h,_,l,o),function NE(o,c){!c||!c["!merges"]||(Fe(o,177,function j0(o,c){return null==c&&(c=Te(4)),c.write_shift(4,o),c}(c["!merges"].length)),c["!merges"].forEach(function(l){Fe(o,176,zp(l))}),Fe(o,178))}(h,_),function Zp(o,c,l){c["!links"].forEach(function(u){if(u[1].Target){var h=Sn(l,-1,u[1].Target.replace(/#.*$/,""),qt.HLINK);Fe(o,494,function rd(o,c){var l=Te(50+4*(o[1].Target.length+(o[1].Tooltip||"").length));Oo({s:ii(o[0]),e:ii(o[0])},l),bf("rId"+c,l);var u=o[1].Target.indexOf("#");return Ei((-1==u?"":o[1].Target.slice(u+1))||"",l),Ei(o[1].Tooltip||"",l),Ei("",l),l.slice(0,l.l)}(u,h))}}),delete c["!links"]}(h,_,u),_["!margins"]&&Fe(h,476,function Ll(o,c){return null==c&&(c=Te(48)),Rl(o),X0.forEach(function(l){js(o[l],c)}),c}(_["!margins"])),(!c||c.ignoreEC||null==c.ignoreEC)&&function FE(o,c){!c||!c["!ref"]||(Fe(o,648),Fe(o,649,function IE(o){var c=Te(24);return c.write_shift(4,4),c.write_shift(4,1),Oo(o,c),c}(on(c["!ref"]))),Fe(o,650))}(h,_),function LE(o,c,l,u){if(c["!comments"].length>0){var h=Sn(u,-1,"../drawings/vmlDrawing"+(l+1)+".vml",qt.VML);Fe(o,551,bf("rId"+h)),c["!legacy"]=h}}(h,_,o,u),Fe(h,130),h.end()}var Vp=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Ls="][*?/\\".split("");function Bl(o,c){if(o.length>31){if(c)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var l=!0;return Ls.forEach(function(u){if(-1!=o.indexOf(u)){if(!c)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");l=!1}}),l}function qp(o){var c=[Yt];c[c.length]=qe("workbook",null,{xmlns:Ks[0],"xmlns:r":Wn_r});var l=o.Workbook&&(o.Workbook.Names||[]).length>0,u={codeName:"ThisWorkbook"};o.Workbook&&o.Workbook.WBProps&&(Vp.forEach(function(v){null!=o.Workbook.WBProps[v[0]]&&o.Workbook.WBProps[v[0]]!=v[1]&&(u[v[0]]=o.Workbook.WBProps[v[0]])}),o.Workbook.WBProps.CodeName&&(u.codeName=o.Workbook.WBProps.CodeName,delete u.CodeName)),c[c.length]=qe("workbookPr",null,u);var h=o.Workbook&&o.Workbook.Sheets||[],m=0;if(h&&h[0]&&h[0].Hidden){for(c[c.length]="<bookViews>",m=0;m!=o.SheetNames.length&&h[m]&&h[m].Hidden;++m);m==o.SheetNames.length&&(m=0),c[c.length]='<workbookView firstSheet="'+m+'" activeTab="'+m+'"/>',c[c.length]="</bookViews>"}for(c[c.length]="<sheets>",m=0;m!=o.SheetNames.length;++m){var _={name:Cn(o.SheetNames[m].slice(0,31))};if(_.sheetId=""+(m+1),_["r:id"]="rId"+(m+1),h[m])switch(h[m].Hidden){case 1:_.state="hidden";break;case 2:_.state="veryHidden"}c[c.length]=qe("sheet",null,_)}return c[c.length]="</sheets>",l&&(c[c.length]="<definedNames>",o.Workbook&&o.Workbook.Names&&o.Workbook.Names.forEach(function(v){var x={name:v.Name};v.Comment&&(x.comment=v.Comment),null!=v.Sheet&&(x.localSheetId=""+v.Sheet),v.Hidden&&(x.hidden="1"),v.Ref&&(c[c.length]=qe("definedName",Cn(v.Ref),x))}),c[c.length]="</definedNames>"),c.length>2&&(c[c.length]="</workbook>",c[1]=c[1].replace("/>",">")),c.join("")}function f1(o,c){return c||(c=Te(127)),c.write_shift(4,o.Hidden),c.write_shift(4,o.iTabID),bf(o.strRelID,c),Ei(o.name.slice(0,31),c),c.length>c.l?c.slice(0,c.l):c}function _1(o,c){var l=Er();return Fe(l,131),Fe(l,128,function JE(o,c){c||(c=Te(127));for(var l=0;4!=l;++l)c.write_shift(4,0);return Ei("SheetJS",c),Ei(oe_version,c),Ei(oe_version,c),Ei("7262",c),c.length>c.l?c.slice(0,c.l):c}()),Fe(l,153,function p1(o,c){c||(c=Te(72));var l=0;return o&&o.filterPrivacy&&(l|=8),c.write_shift(4,l),c.write_shift(4,0),Ug(o&&o.CodeName||"ThisWorkbook",c),c.slice(0,c.l)}(o.Workbook&&o.Workbook.WBProps||null)),function Kp(o,c){if(c.Workbook&&c.Workbook.Sheets){for(var l=c.Workbook.Sheets,u=0,h=-1,m=-1;u<l.length;++u)!l[u]||!l[u].Hidden&&-1==h?h=u:1==l[u].Hidden&&-1==m&&(m=u);m>h||(Fe(o,135),Fe(o,158,function g1(o,c){return c||(c=Te(29)),c.write_shift(-4,0),c.write_shift(-4,460),c.write_shift(4,28800),c.write_shift(4,17600),c.write_shift(4,500),c.write_shift(4,o),c.write_shift(4,o),c.write_shift(1,120),c.length>c.l?c.slice(0,c.l):c}(h)),Fe(o,136))}}(l,o),function m1(o,c){Fe(o,143);for(var l=0;l!=c.SheetNames.length;++l)Fe(o,156,f1({Hidden:c.Workbook&&c.Workbook.Sheets&&c.Workbook.Sheets[l]&&c.Workbook.Sheets[l].Hidden||0,iTabID:l+1,strRelID:"rId"+(l+1),name:c.SheetNames[l]}));Fe(o,144)}(l,o),Fe(l,132),l.end()}function jp(o,c,l,u,h){return(".bin"===c.slice(-4)?$o:Y0)(o,l,u,h)}function C1(o,c,l){return(".bin"===c.slice(-4)?Oa:Aa)(o,l)}function y1(o){return qe("NamedRange",null,{"ss:Name":o.Name,"ss:RefersTo":"="+qu(o.Ref,{r:0,c:0})})}function sw(o,c,l,u,h,m,_){if(!o||null==o.v&&null==o.f)return"";var v={};if(o.f&&(v["ss:Formula"]="="+Cn(qu(o.f,_))),o.F&&o.F.slice(0,c.length)==c){var x=ii(o.F.slice(c.length+1));v["ss:ArrayRange"]="RC:R"+(x.r==_.r?"":"["+(x.r-_.r)+"]")+"C"+(x.c==_.c?"":"["+(x.c-_.c)+"]")}if(o.l&&o.l.Target&&(v["ss:HRef"]=Cn(o.l.Target),o.l.Tooltip&&(v["x:HRefScreenTip"]=Cn(o.l.Tooltip))),l["!merges"])for(var C=l["!merges"],E=0;E!=C.length;++E)C[E].s.c!=_.c||C[E].s.r!=_.r||(C[E].e.c>C[E].s.c&&(v["ss:MergeAcross"]=C[E].e.c-C[E].s.c),C[E].e.r>C[E].s.r&&(v["ss:MergeDown"]=C[E].e.r-C[E].s.r));var D="",A="";switch(o.t){case"z":if(!u.sheetStubs)return"";break;case"n":D="Number",A=String(o.v);break;case"b":D="Boolean",A=o.v?"1":"0";break;case"e":D="Error",A=Xs[o.v];break;case"d":D="DateTime",A=new Date(o.v).toISOString(),null==o.z&&(o.z=o.z||xt[14]);break;case"s":D="String",A=function xg(o){return(o+"").replace(rf,function(l){return bg[l]}).replace(Si,function(l){return"&#x"+l.charCodeAt(0).toString(16).toUpperCase()+";"})}(o.v||"")}var I=Ho(u.cellXfs,o,u);v["ss:StyleID"]="s"+(21+I),v["ss:Index"]=_.c+1;var y="z"==o.t?"":'<Data ss:Type="'+D+'">'+(null!=o.v?A:"")+"</Data>";return(o.c||[]).length>0&&(y+=function A1(o){return o.map(function(c){var l=function Cg(o){return o.replace(/(\r\n|[\r\n])/g,"&#10;")}(c.t||""),u=qe("ss:Data",l,{xmlns:"http://www.w3.org/TR/REC-html40"});return qe("Comment",u,{"ss:Author":c.a})}).join("")}(o.c)),qe("Cell",y,v)}function ow(o,c){var l='<Row ss:Index="'+(o+1)+'"';return c&&(c.hpt&&!c.hpx&&(c.hpx=qc(c.hpt)),c.hpx&&(l+=' ss:AutoFitHeight="0" ss:Height="'+c.hpx+'"'),c.hidden&&(l+=' ss:Hidden="1"')),l+">"}function I1(o,c,l){var u=[],m=l.Sheets[l.SheetNames[o]],_=m?function rw(o,c,l,u){if(!o||!((u||{}).Workbook||{}).Names)return"";for(var h=u.Workbook.Names,m=[],_=0;_<h.length;++_){var v=h[_];v.Sheet==l&&(v.Name.match(/^_xlfn\./)||m.push(y1(v)))}return m.join("")}(m,0,o,l):"";return _.length>0&&u.push("<Names>"+_+"</Names>"),_=m?function O1(o,c,l,u){if(!o["!ref"])return"";var h=on(o["!ref"]),m=o["!merges"]||[],_=0,v=[];o["!cols"]&&o["!cols"].forEach(function(N,Z){no(N);var z=!!N.width,B=Qu(Z,N),le={"ss:Index":Z+1};z&&(le["ss:Width"]=Po(B.width)),N.hidden&&(le["ss:Hidden"]="1"),v.push(qe("Column",null,le))});for(var x=Array.isArray(o),C=h.s.r;C<=h.e.r;++C){for(var E=[ow(C,(o["!rows"]||[])[C])],D=h.s.c;D<=h.e.c;++D){var A=!1;for(_=0;_!=m.length;++_)if(!(m[_].s.c>D||m[_].s.r>C||m[_].e.c<D||m[_].e.r<C)){(m[_].s.c!=D||m[_].s.r!=C)&&(A=!0);break}if(!A){var I={r:C,c:D},R=Mt(I);E.push(sw(x?(o[C]||[])[D]:o[R],R,o,c,0,0,I))}}E.push("</Row>"),E.length>2&&v.push(E.join(""))}return v.join("")}(m,c):"",_.length>0&&u.push("<Table>"+_+"</Table>"),u.push(function D1(o,c,l,u){if(!o)return"";var h=[];if(o["!margins"]&&(h.push("<PageSetup>"),o["!margins"].header&&h.push(qe("Header",null,{"x:Margin":o["!margins"].header})),o["!margins"].footer&&h.push(qe("Footer",null,{"x:Margin":o["!margins"].footer})),h.push(qe("PageMargins",null,{"x:Bottom":o["!margins"].bottom||"0.75","x:Left":o["!margins"].left||"0.7","x:Right":o["!margins"].right||"0.7","x:Top":o["!margins"].top||"0.75"})),h.push("</PageSetup>")),u&&u.Workbook&&u.Workbook.Sheets&&u.Workbook.Sheets[l])if(u.Workbook.Sheets[l].Hidden)h.push(qe("Visible",1==u.Workbook.Sheets[l].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var m=0;m<l&&(!u.Workbook.Sheets[m]||u.Workbook.Sheets[m].Hidden);++m);m==l&&h.push("<Selected/>")}return((((u||{}).Workbook||{}).Views||[])[0]||{}).RTL&&h.push("<DisplayRightToLeft/>"),o["!protect"]&&(h.push(yi("ProtectContents","True")),o["!protect"].objects&&h.push(yi("ProtectObjects","True")),o["!protect"].scenarios&&h.push(yi("ProtectScenarios","True")),null==o["!protect"].selectLockedCells||o["!protect"].selectLockedCells?null!=o["!protect"].selectUnlockedCells&&!o["!protect"].selectUnlockedCells&&h.push(yi("EnableSelection","UnlockedCells")):h.push(yi("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(_){o["!protect"][_[0]]&&h.push("<"+_[1]+"/>")})),0==h.length?"":qe("WorksheetOptions",h.join(""),{xmlns:ji_x})}(m,0,o,l)),u.join("")}function M1(o,c){c||(c={}),o.SSF||(o.SSF=xn(xt)),o.SSF&&(En(),ko(o.SSF),c.revssf=iu(o.SSF),c.revssf[o.SSF[65535]]=0,c.ssf=o.SSF,c.cellXfs=[],Ho(c.cellXfs,{},{revssf:{General:0}}));var l=[];l.push(function w1(o,c){var l=[];return o.Props&&l.push(function Mo(o,c){var l=[];return ni(Xn).map(function(u){for(var h=0;h<eo.length;++h)if(eo[h][1]==u)return eo[h];for(h=0;h<Ca.length;++h)if(Ca[h][1]==u)return Ca[h];throw u}).forEach(function(u){if(null!=o[u[1]]){var h=c&&c.Props&&null!=c.Props[u[1]]?c.Props[u[1]]:o[u[1]];"date"===u[2]&&(h=new Date(h).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof h?h=String(h):!0===h||!1===h?h=h?"1":"0":h instanceof Date&&(h=new Date(h).toISOString().replace(/\.\d*Z/,"")),l.push(yi(Xn[u[1]]||u[1],h))}}),qe("DocumentProperties",l.join(""),{xmlns:ji_o})}(o.Props,c)),o.Custprops&&l.push(function Ux(o,c){var l=["Worksheets","SheetNames"],u="CustomDocumentProperties",h=[];return o&&ni(o).forEach(function(m){if(Object.prototype.hasOwnProperty.call(o,m)){for(var _=0;_<eo.length;++_)if(m==eo[_][1])return;for(_=0;_<Ca.length;++_)if(m==Ca[_][1])return;for(_=0;_<l.length;++_)if(m==l[_])return;var v=o[m],x="string";"number"==typeof v?(x="float",v=String(v)):!0===v||!1===v?(x="boolean",v=v?"1":"0"):v=String(v),h.push(qe(cn(m),v,{"dt:dt":x}))}}),c&&ni(c).forEach(function(m){if(Object.prototype.hasOwnProperty.call(c,m)&&(!o||!Object.prototype.hasOwnProperty.call(o,m))){var _=c[m],v="string";"number"==typeof _?(v="float",_=String(_)):!0===_||!1===_?(v="boolean",_=_?"1":"0"):_ instanceof Date?(v="dateTime.tz",_=_.toISOString()):_=String(_),h.push(qe(cn(m),_,{"dt:dt":v}))}}),"<"+u+' xmlns="'+ji_o+'">'+h.join("")+"</"+u+">"}(o.Props,o.Custprops)),l.join("")}(o,c)),l.push(""),l.push(""),l.push("");for(var u=0;u<o.SheetNames.length;++u)l.push(qe("Worksheet",I1(u,c,o),{"ss:Name":Cn(o.SheetNames[u])}));return l[2]=function T1(o,c){var l=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return c.cellXfs.forEach(function(u,h){var m=[];m.push(qe("NumberFormat",null,{"ss:Format":Cn(xt[u.numFmtId])}));var _={"ss:ID":"s"+(21+h)};l.push(qe("Style",m.join(""),_))}),qe("Styles",l.join(""))}(0,c),l[3]=function iw(o){if(!((o||{}).Workbook||{}).Names)return"";for(var c=o.Workbook.Names,l=[],u=0;u<c.length;++u){var h=c[u];null==h.Sheet&&(h.Name.match(/^_xlfn\./)||l.push(y1(h)))}return qe("Names",l.join(""))}(o),Yt+qe("Workbook",l.join(""),{xmlns:ji_ss,"xmlns:o":ji_o,"xmlns:x":ji_x,"xmlns:ss":ji_ss,"xmlns:dt":"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882","xmlns:html":"http://www.w3.org/TR/REC-html40"})}var ud={0:{f:function _E(o,c){var l={},u=o.l+c;l.r=o.read_shift(4),o.l+=4;var h=o.read_shift(2);o.l+=1;var m=o.read_shift(1);return o.l=u,7&m&&(l.level=7&m),16&m&&(l.hidden=!0),32&m&&(l.hpt=h/20),l}},1:{f:function th(o){return[wr(o)]}},2:{f:function Bp(o){return[wr(o),xf(o),"n"]}},3:{f:function SE(o){return[wr(o),o.read_shift(1),"e"]}},4:{f:function xE(o){return[wr(o),o.read_shift(1),"b"]}},5:{f:function $0(o){return[wr(o),nr(o),"n"]}},6:{f:function mr(o){return[wr(o),Zi(o),"str"]}},7:{f:function Lp(o){return[wr(o),o.read_shift(4),"s"]}},8:{f:function yE(o,c,l){var u=o.l+c,h=wr(o);h.r=l["!row"];var _=[h,Zi(o),"str"];if(l.cellFormula){o.l+=2;var v=td(o,u-o.l,l);_[3]=Ri(v,0,h,l.supbooks,l)}else o.l=u;return _}},9:{f:function ih(o,c,l){var u=o.l+c,h=wr(o);h.r=l["!row"];var _=[h,nr(o),"n"];if(l.cellFormula){o.l+=2;var v=td(o,u-o.l,l);_[3]=Ri(v,0,h,l.supbooks,l)}else o.l=u;return _}},10:{f:function Kr(o,c,l){var u=o.l+c,h=wr(o);h.r=l["!row"];var _=[h,o.read_shift(1),"b"];if(l.cellFormula){o.l+=2;var v=td(o,u-o.l,l);_[3]=Ri(v,0,h,l.supbooks,l)}else o.l=u;return _}},11:{f:function Ns(o,c,l){var u=o.l+c,h=wr(o);h.r=l["!row"];var _=[h,o.read_shift(1),"e"];if(l.cellFormula){o.l+=2;var v=td(o,u-o.l,l);_[3]=Ri(v,0,h,l.supbooks,l)}else o.l=u;return _}},12:{f:function Sy(o){return[ba(o)]}},13:{f:function Yo(o){return[ba(o),xf(o),"n"]}},14:{f:function wE(o){return[ba(o),o.read_shift(1),"e"]}},15:{f:function Ji(o){return[ba(o),o.read_shift(1),"b"]}},16:{f:function nh(o){return[ba(o),nr(o),"n"]}},17:{f:function Ar(o){return[ba(o),Zi(o),"str"]}},18:{f:function Up(o){return[ba(o),o.read_shift(4),"s"]}},19:{f:uu},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function La(o,c,l){var u=o.l+c;o.l+=4,o.l+=1;var h=o.read_shift(4),m=xx(o),_=kp(o,0,l),v=hu(o);o.l=u;var x={Name:m,Ptg:_};return h<268435455&&(x.Sheet=h),v&&(x.Comment=v),x}},40:{},42:{},43:{f:function rp(o,c,l){var u={};u.sz=o.read_shift(2)/20;var h=function wc(o){var c=o.read_shift(1);return o.l++,{fBold:1&c,fItalic:2&c,fUnderline:4&c,fStrikeout:8&c,fOutline:16&c,fShadow:32&c,fCondense:64&c,fExtend:128&c}}(o);switch(h.fItalic&&(u.italic=1),h.fCondense&&(u.condense=1),h.fExtend&&(u.extend=1),h.fShadow&&(u.shadow=1),h.fOutline&&(u.outline=1),h.fStrikeout&&(u.strike=1),700===o.read_shift(2)&&(u.bold=1),o.read_shift(2)){case 1:u.vertAlign="superscript";break;case 2:u.vertAlign="subscript"}var _=o.read_shift(1);0!=_&&(u.underline=_);var v=o.read_shift(1);v>0&&(u.family=v);var x=o.read_shift(1);switch(x>0&&(u.charset=x),o.l++,u.color=function Sx(o){var c={},u=o.read_shift(1)>>>1,h=o.read_shift(1),m=o.read_shift(2,"i"),_=o.read_shift(1),v=o.read_shift(1),x=o.read_shift(1);switch(o.l++,u){case 0:c.auto=1;break;case 1:c.index=h;var C=Qs[h];C&&(c.rgb=Zc(C));break;case 2:c.rgb=Zc([_,v,x]);break;case 3:c.theme=h}return 0!=m&&(c.tint=m>0?m/32767:m/32768),c}(o),o.read_shift(1)){case 1:u.scheme="major";break;case 2:u.scheme="minor"}return u.name=Zi(o),u}},44:{f:function Gu(o,c){return[o.read_shift(2),Zi(o)]}},45:{f:Tr},46:{f:Go},47:{f:function sp(o,c){var l=o.l+c,u=o.read_shift(2),h=o.read_shift(2);return o.l=l,{ixfe:u,numFmtId:h}}},48:{},49:{f:function bx(o){return o.read_shift(4,"i")}},50:{},51:{f:function mS(o){for(var c=[],l=o.read_shift(4);l-- >0;)c.push([o.read_shift(4),o.read_shift(4)]);return c}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:function Hf(o,c,l){if(!l.cellStyles)return Xi(o,c);var u=l&&l.biff>=12?4:2,h=o.read_shift(u),m=o.read_shift(u),_=o.read_shift(u),v=o.read_shift(u),x=o.read_shift(2);2==u&&(o.l+=2);var C={s:h,e:m,w:_,ixfe:v,flags:x};return(l.biff>=5||!l.biff)&&(C.level=x>>8&7),C}},62:{f:function Gp(o){return[wr(o),uu(o),"is"]}},63:{f:function a0(o){var c={};c.i=o.read_shift(4);var l={};l.r=o.read_shift(4),l.c=o.read_shift(4),c.r=Mt(l);var u=o.read_shift(1);return 2&u&&(c.l="1"),8&u&&(c.a="1"),c}},64:{f:function ME(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Xi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function OE(o){var c=o.read_shift(2);return o.l+=28,{RTL:32&c}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function vE(o,c){var l={},u=o[o.l];return++o.l,l.above=!(64&u),l.left=!(128&u),o.l+=18,l.name=Pg(o,c-19),l}},148:{f:Mp,p:16},151:{f:function DE(){}},152:{},153:{f:function VE(o,c){var l={},u=o.read_shift(4);l.defaultThemeVersion=o.read_shift(4);var h=c>8?Zi(o):"";return h.length>0&&(l.CodeName=h),l.autoCompressPictures=!!(65536&u),l.backupFile=!!(64&u),l.checkCompatibility=!!(4096&u),l.date1904=!!(1&u),l.filterPrivacy=!!(8&u),l.hidePivotFieldList=!!(1024&u),l.promptedSolutions=!!(16&u),l.publishItems=!!(2048&u),l.refreshAllConnections=!!(262144&u),l.saveExternalLinkValues=!!(128&u),l.showBorderUnselectedTables=!!(4&u),l.showInkAnnotation=!!(32&u),l.showObjects=["all","placeholders","none"][u>>13&3],l.showPivotChartFilter=!!(32768&u),l.updateLinks=["userSet","never","always"][u>>8&3],l}},154:{},155:{},156:{f:function sh(o,c){var l={};return l.Hidden=o.read_shift(4),l.iTabID=o.read_shift(4),l.strRelID=pu(o,c-8),l.name=Zi(o),l}},157:{},158:{},159:{T:1,f:function U_(o){return[o.read_shift(4),o.read_shift(4)]}},160:{T:-1},161:{T:1,f:Ao},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Pr},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function fS(o,c){return{flags:o.read_shift(4),version:o.read_shift(4),name:Zi(o)}}},336:{T:-1},337:{f:function _S(o){return o.l+=4,0!=o.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:pu},357:{},358:{},359:{},360:{T:1},361:{},362:{f:function k_(o,c,l){if(l.biff<8)return function TC(o,c,l){3==o[o.l+1]&&o[o.l]++;var u=ku(o,0,l);return 3==u.charCodeAt(0)?u.slice(1):u}(o,0,l);for(var u=[],h=o.l+c,m=o.read_shift(l.biff>8?4:2);0!=m--;)u.push(u_(o,0,l));if(o.l!=h)throw new Error("Bad ExternSheet: "+o.l+" != "+h);return u}},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function Q0(o,c,l){var u=o.l+c,h=Cx(o),m=o.read_shift(1),_=[h];if(_[2]=m,l.cellFormula){var v=vy(o,u-o.l,l);_[1]=v}else o.l=u;return _}},427:{f:function Fs(o,c,l){var u=o.l+c,m=[Ao(o,16)];if(l.cellFormula){var _=L0(o,u-o.l,l);m[1]=_,o.l=u}else o.l=u;return m}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function rh(o){var c={};return X0.forEach(function(l){c[l]=nr(o)}),c}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function Np(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function oo(o,c){var l=o.l+c,u=Ao(o,16),h=hu(o),m=Zi(o),_=Zi(o),v=Zi(o);o.l=l;var x={rfx:u,relId:h,loc:m,display:v};return _&&(x.Tooltip=_),x}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:pu},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:jc},633:{T:1},634:{T:-1},635:{T:1,f:function xS(o){var c={};c.iauthor=o.read_shift(4);var l=Ao(o,16);return c.rfx=l.s,c.ref=Mt(l.s),o.l+=16,c}},636:{T:-1},637:{f:hl},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function o1(o,c){return o.l+=10,{name:Zi(o)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function t1(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ve(o,c,l,u){var h=c;if(!isNaN(h)){var m=u||(l||[]).length||0,_=o.next(4);_.write_shift(2,h),_.write_shift(2,m),m>0&&pf(l)&&o.push(l)}}function Ba(o,c,l){return o||(o=Te(7)),o.write_shift(2,c),o.write_shift(2,l),o.write_shift(2,0),o.write_shift(1,0),o}function hw(o,c,l,u){if(null!=c.v)switch(c.t){case"d":case"n":var h="d"==c.t?bi(pn(c.v)):c.v;return void(h==(0|h)&&h>=0&&h<65536?Ve(o,2,function PC(o,c,l){var u=Te(9);return Ba(u,o,c),u.write_shift(2,l),u}(l,u,h)):Ve(o,3,function FC(o,c,l){var u=Te(15);return Ba(u,o,c),u.write_shift(8,l,"f"),u}(l,u,h)));case"b":case"e":return void Ve(o,5,function im(o,c,l,u){var h=Te(9);return Ba(h,o,c),o_(l,u||"b",h),h}(l,u,c.v,c.t));case"s":case"str":return void Ve(o,4,function uw(o,c,l){var u=Te(8+2*l.length);return Ba(u,o,c),u.write_shift(1,l.length),u.write_shift(l.length,l,"sbcs"),u.l<u.length?u.slice(0,u.l):u}(l,u,(c.v||"").slice(0,255)))}Ve(o,1,Ba(null,l,u))}function vw(o,c,l,u,h){var m=16+Ho(h.cellXfs,c,h);if(null!=c.v||c.bf)if(c.bf)Ve(o,6,function _y(o,c,l,u,h){var m=wa(c,l,h),_=function jS(o){if(null==o){var c=Te(8);return c.write_shift(1,3),c.write_shift(1,0),c.write_shift(2,0),c.write_shift(2,0),c.write_shift(2,65535),c}return js("number"==typeof o?o:0)}(o.v),v=Te(6);v.write_shift(2,33),v.write_shift(4,0);for(var C=Te(o.bf.length),E=0;E<o.bf.length;++E)C[E]=o.bf[E];return Ne([m,_,v,C])}(c,l,u,0,m));else switch(c.t){case"d":case"n":Ve(o,515,function EC(o,c,l,u){var h=Te(14);return wa(o,c,u,h),js(l,h),h}(l,u,"d"==c.t?bi(pn(c.v)):c.v,m));break;case"b":case"e":Ve(o,517,function CC(o,c,l,u,h,m){var _=Te(8);return wa(o,c,u,_),o_(l,m,_),_}(l,u,c.v,m,0,c.t));break;case"s":case"str":h.bookSST?Ve(o,253,function aC(o,c,l,u){var h=Te(10);return wa(o,c,u,h),h.write_shift(4,l),h}(l,u,yp(h.Strings,c.v,h.revStrings),m)):Ve(o,516,function cC(o,c,l,u,h){var m=!h||8==h.biff,_=Te(+m+8+(1+m)*l.length);return wa(o,c,u,_),_.write_shift(2,l.length),m&&_.write_shift(1,1),_.write_shift((1+m)*l.length,l,m?"utf16le":"sbcs"),_}(l,u,(c.v||"").slice(0,255),m,h));break;default:Ve(o,513,wa(l,u,m))}else Ve(o,513,wa(l,u,m))}function bw(o,c,l){var E,u=Er(),h=l.SheetNames[o],m=l.Sheets[h]||{},_=(l||{}).Workbook||{},v=(_.Sheets||[])[o]||{},x=Array.isArray(m),C=8==c.biff,D="",A=[],I=on(m["!ref"]||"A1"),R=C?65536:16384;if(I.e.c>255||I.e.r>=R){if(c.WTF)throw new Error("Range "+(m["!ref"]||"A1")+" exceeds format limit A1:IV16384");I.e.c=Math.min(I.e.c,255),I.e.r=Math.min(I.e.c,R-1)}Ve(u,2057,Du(0,16,c)),Ve(u,13,ir(1)),Ve(u,12,ir(100)),Ve(u,15,Oi(!0)),Ve(u,17,Oi(!1)),Ve(u,16,js(.001)),Ve(u,95,Oi(!0)),Ve(u,42,Oi(!1)),Ve(u,43,Oi(!1)),Ve(u,130,ir(1)),Ve(u,128,function xC(o){var c=Te(8);return c.write_shift(4,0),c.write_shift(2,o[0]?o[0]+1:0),c.write_shift(2,o[1]?o[1]+1:0),c}([0,0])),Ve(u,131,Oi(!1)),Ve(u,132,Oi(!1)),C&&function _w(o,c){if(c){var l=0;c.forEach(function(u,h){++l<=256&&u&&Ve(o,125,function RC(o,c){var l=Te(12);l.write_shift(2,c),l.write_shift(2,c),l.write_shift(2,256*o.width),l.write_shift(2,0);var u=0;return o.hidden&&(u|=1),l.write_shift(1,u),l.write_shift(1,u=o.level||0),l.write_shift(2,0),l}(Qu(h,u),h))})}}(u,m["!cols"]),Ve(u,512,function fC(o,c){var l=8!=c.biff&&c.biff?2:4,u=Te(2*l+6);return u.write_shift(l,o.s.r),u.write_shift(l,o.e.r+1),u.write_shift(2,o.s.c),u.write_shift(2,o.e.c+1),u.write_shift(2,0),u}(I,c)),C&&(m["!links"]=[]);for(var y=I.s.r;y<=I.e.r;++y){D=Qn(y);for(var N=I.s.c;N<=I.e.c;++N){y===I.s.r&&(A[N]=Gn(N)),E=A[N]+D;var Z=x?(m[y]||[])[N]:m[E];!Z||(vw(u,Z,y,N,c),C&&Z.l&&m["!links"].push([E,Z.l]))}}var z=v.CodeName||v.name||h;return C&&Ve(u,574,function iC(o){var c=Te(18),l=1718;return o&&o.RTL&&(l|=64),c.write_shift(2,l),c.write_shift(4,0),c.write_shift(4,64),c.write_shift(4,0),c.write_shift(4,0),c}((_.Views||[])[0])),C&&(m["!merges"]||[]).length&&Ve(u,229,function OC(o){var c=Te(2+8*o.length);c.write_shift(2,o.length);for(var l=0;l<o.length;++l)qx(o[l],c);return c}(m["!merges"])),C&&function gw(o,c){for(var l=0;l<c["!links"].length;++l){var u=c["!links"][l];Ve(o,440,Gf(u)),u[1].Tooltip&&Ve(o,2048,Zf(u))}delete c["!links"]}(u,m),Ve(u,442,l_(z)),C&&function pw(o,c){var l=Te(19);l.write_shift(4,2151),l.write_shift(4,0),l.write_shift(4,0),l.write_shift(2,3),l.write_shift(1,1),l.write_shift(4,0),Ve(o,2151,l),(l=Te(39)).write_shift(4,2152),l.write_shift(4,0),l.write_shift(4,0),l.write_shift(2,3),l.write_shift(1,0),l.write_shift(4,0),l.write_shift(2,1),l.write_shift(4,4),l.write_shift(2,0),qx(on(c["!ref"]||"A1"),l),l.write_shift(4,4),Ve(o,2152,l)}(u,m),Ve(u,10),u.end()}function sm(o,c,l){var u=Er(),h=(o||{}).Workbook||{},m=h.Sheets||[],_=h.WBProps||{},v=8==l.biff,x=5==l.biff;Ve(u,2057,Du(0,5,l)),"xla"==l.bookType&&Ve(u,135),Ve(u,225,v?ir(1200):null),Ve(u,193,function Rc(o,c){c||(c=Te(o));for(var l=0;l<o;++l)c.write_shift(1,0);return c}(2)),x&&Ve(u,191),x&&Ve(u,192),Ve(u,226),Ve(u,92,function ty(o,c){var l=!c||8==c.biff,u=Te(l?112:54);for(u.write_shift(8==c.biff?2:1,7),l&&u.write_shift(1,0),u.write_shift(4,859007059),u.write_shift(4,5458548|(l?0:536870912));u.l<u.length;)u.write_shift(1,l?0:32);return u}(0,l)),Ve(u,66,ir(v?1200:1252)),v&&Ve(u,353,ir(0)),v&&Ve(u,448),Ve(u,317,function O_(o){for(var c=Te(2*o),l=0;l<o;++l)c.write_shift(2,l+1);return c}(o.SheetNames.length)),v&&o.vbaraw&&Ve(u,211),v&&o.vbaraw&&Ve(u,442,l_(_.CodeName||"ThisWorkbook")),Ve(u,156,ir(17)),Ve(u,25,Oi(!1)),Ve(u,18,Oi(!1)),Ve(u,19,ir(0)),v&&Ve(u,431,Oi(!1)),v&&Ve(u,444,ir(0)),Ve(u,61,function tC(){var o=Te(18);return o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,29280),o.write_shift(2,17600),o.write_shift(2,56),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,1),o.write_shift(2,500),o}()),Ve(u,64,Oi(!1)),Ve(u,141,ir(0)),Ve(u,34,Oi("true"==function Ul(o){return o.Workbook&&o.Workbook.WBProps&&function Jn(o){switch(o){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}(o.Workbook.WBProps.date1904)?"true":"false"}(o))),Ve(u,14,Oi(!0)),v&&Ve(u,439,Oi(!1)),Ve(u,218,ir(0)),function rm(o,c,l){Ve(o,49,function oC(o,c){var l=o.name||"Arial",u=c&&5==c.biff,m=Te(u?15+l.length:16+2*l.length);return m.write_shift(2,20*(o.sz||12)),m.write_shift(4,0),m.write_shift(2,400),m.write_shift(4,0),m.write_shift(2,0),m.write_shift(1,l.length),u||m.write_shift(1,1),m.write_shift((u?1:2)*l.length,l,u?"sbcs":"utf16le"),m}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},l))}(u,0,l),function Gl(o,c,l){!c||[[5,8],[23,26],[41,44],[50,392]].forEach(function(u){for(var h=u[0];h<=u[1];++h)null!=c[h]&&Ve(o,1054,uC(h,c[h],l))})}(u,o.SSF,l),function mw(o,c){for(var l=0;l<16;++l)Ve(o,224,C_({numFmtId:0,style:!0},0,c));c.cellXfs.forEach(function(u){Ve(o,224,C_(u,0,c))})}(u,l),v&&Ve(u,352,Oi(!1));var E=u.end(),D=Er();v&&Ve(D,140,function D_(o){return o||(o=Te(4)),o.write_shift(2,1),o.write_shift(2,1),o}()),v&&l.Strings&&function dw(o,c,l,u){var h=u||(l||[]).length||0;if(h<=8224)return Ve(o,c,l,h);var m=c;if(!isNaN(m)){for(var _=l.parts||[],v=0,x=0,C=0;C+(_[v]||8224)<=8224;)C+=_[v]||8224,v++;var E=o.next(4);for(E.write_shift(2,m),E.write_shift(2,C),o.push(l.slice(x,x+C)),x+=C;x<h;){for((E=o.next(4)).write_shift(2,60),C=0;C+(_[v]||8224)<=8224;)C+=_[v]||8224,v++;E.write_shift(2,C),o.push(l.slice(x,x+C)),x+=C}}}(D,252,function jx(o,c){var l=Te(8);l.write_shift(4,o.Count),l.write_shift(4,o.Unique);for(var u=[],h=0;h<o.length;++h)u[h]=a_(o[h]);var m=Ne([l].concat(u));return m.parts=[l.length].concat(u.map(function(_){return _.length})),m}(l.Strings)),Ve(D,10);var A=D.end(),I=Er(),R=0,y=0;for(y=0;y<o.SheetNames.length;++y)R+=(v?12:11)+(v?2:1)*o.SheetNames[y].length;var N=E.length+R+A.length;for(y=0;y<o.SheetNames.length;++y)Ve(I,133,$x({pos:N,hs:(m[y]||{}).Hidden||0,dt:0,name:o.SheetNames[y]},l)),N+=c[y].length;var z=I.end();if(R!=z.length)throw new Error("BS8 "+R+" != "+z.length);var B=[];return E.length&&B.push(E),z.length&&B.push(z),A.length&&B.push(A),Ne(B)}function L1(o,c){for(var l=0;l<=o.SheetNames.length;++l){var u=o.Sheets[o.SheetNames[l]];u&&u["!ref"]&&hr(u["!ref"]).e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+o.SheetNames[l]+"' extends beyond column IV (255).  Data may be lost.")}var m=c||{};switch(m.biff||2){case 8:case 5:return function F1(o,c){var l=c||{},u=[];o&&!o.SSF&&(o.SSF=xn(xt)),o&&o.SSF&&(En(),ko(o.SSF),l.revssf=iu(o.SSF),l.revssf[o.SSF[65535]]=0,l.ssf=o.SSF),l.Strings=[],l.Strings.Count=0,l.Strings.Unique=0,mh(l),l.cellXfs=[],Ho(l.cellXfs,{},{revssf:{General:0}}),o.Props||(o.Props={});for(var h=0;h<o.SheetNames.length;++h)u[u.length]=bw(h,l,o);return u.unshift(sm(o,u,l)),Ne(u)}(o,c);case 4:case 3:case 2:return function fw(o,c){for(var l=c||{},u=Er(),h=0,m=0;m<o.SheetNames.length;++m)o.SheetNames[m]==l.sheet&&(h=m);if(0==h&&l.sheet&&o.SheetNames[0]!=l.sheet)throw new Error("Sheet not found: "+l.sheet);return Ve(u,4==l.biff?1033:3==l.biff?521:9,Du(0,16,l)),function ch(o,c,l,u){var _,h=Array.isArray(c),m=on(c["!ref"]||"A1"),v="",x=[];if(m.e.c>255||m.e.r>16383){if(u.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,16383),_=Jt(m)}for(var C=m.s.r;C<=m.e.r;++C){v=Qn(C);for(var E=m.s.c;E<=m.e.c;++E){C===m.s.r&&(x[E]=Gn(E)),_=x[E]+v;var D=h?(c[C]||[])[E]:c[_];!D||hw(o,D,C,E)}}}(u,o.Sheets[o.SheetNames[h]],0,l),Ve(u,10),u.end()}(o,c)}throw new Error("invalid type "+m.bookType+" for BIFF")}function P1(o,c,l,u){for(var h=o["!merges"]||[],m=[],_=c.s.c;_<=c.e.c;++_){for(var v=0,x=0,C=0;C<h.length;++C)if(!(h[C].s.r>l||h[C].s.c>_||h[C].e.r<l||h[C].e.c<_)){if(h[C].s.r<l||h[C].s.c<_){v=-1;break}v=h[C].e.r-h[C].s.r+1,x=h[C].e.c-h[C].s.c+1;break}if(!(v<0)){var E=Mt({r:l,c:_}),D=u.dense?(o[l]||[])[_]:o[E],A=D&&null!=D.v&&(D.h||ax(D.w||(Ts(D),D.w)||""))||"",I={};v>1&&(I.rowspan=v),x>1&&(I.colspan=x),u.editable?A='<span contenteditable="true">'+A+"</span>":D&&(I["data-t"]=D&&D.t||"z",null!=D.v&&(I["data-v"]=D.v),null!=D.z&&(I["data-z"]=D.z),D.l&&"#"!=(D.l.Target||"#").charAt(0)&&(A='<a href="'+D.l.Target+'">'+A+"</a>")),I.id=(u.id||"sjs")+"-"+E,m.push(qe("td",A,I))}}return"<tr>"+m.join("")+"</tr>"}function U1(o,c){var l=c||{},h=null!=l.footer?l.footer:"</body></html>",m=[null!=l.header?l.header:'<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>'],_=hr(o["!ref"]);l.dense=Array.isArray(o),m.push(function hd(o,c,l){return[].join("")+"<table"+(l&&l.id?' id="'+l.id+'"':"")+">"}(0,0,l));for(var v=_.s.r;v<=_.e.r;++v)m.push(P1(o,_,v,l));return m.push("</table>"+h),m.join("")}function Ga(o,c,l){var u=l||{},h=0,m=0;if(null!=u.origin)if("number"==typeof u.origin)h=u.origin;else{var _="string"==typeof u.origin?ii(u.origin):u.origin;h=_.r,m=_.c}var v=c.getElementsByTagName("tr"),x=Math.min(u.sheetRows||1e7,v.length),C={s:{r:0,c:0},e:{r:h,c:m}};if(o["!ref"]){var E=hr(o["!ref"]);C.s.r=Math.min(C.s.r,E.s.r),C.s.c=Math.min(C.s.c,E.s.c),C.e.r=Math.max(C.e.r,E.e.r),C.e.c=Math.max(C.e.c,E.e.c),-1==h&&(C.e.r=h=E.e.r+1)}var D=[],A=0,I=o["!rows"]||(o["!rows"]=[]),R=0,y=0,N=0,Z=0,z=0,B=0;for(o["!cols"]||(o["!cols"]=[]);R<v.length&&y<x;++R){var le=v[R];if(dh(le)){if(u.display)continue;I[y]={hidden:!0}}var ge=le.children;for(N=Z=0;N<ge.length;++N){var we=ge[N];if(!u.display||!dh(we)){var j=we.hasAttribute("data-v")?we.getAttribute("data-v"):we.hasAttribute("v")?we.getAttribute("v"):af(we.innerHTML),pe=we.getAttribute("data-z")||we.getAttribute("z");for(A=0;A<D.length;++A){var ce=D[A];ce.s.c==Z+m&&ce.s.r<y+h&&y+h<=ce.e.r&&(Z=ce.e.c+1-m,A=-1)}B=+we.getAttribute("colspan")||1,((z=+we.getAttribute("rowspan")||1)>1||B>1)&&D.push({s:{r:y+h,c:Z+m},e:{r:y+h+(z||1)-1,c:Z+m+(B||1)-1}});var Ce={t:"s",v:j},ye=we.getAttribute("data-t")||we.getAttribute("t")||"";null!=j&&(0==j.length?Ce.t=ye||"z":u.raw||0==j.trim().length||"s"==ye||("TRUE"===j?Ce={t:"b",v:!0}:"FALSE"===j?Ce={t:"b",v:!1}:isNaN(Rr(j))?isNaN(al(j).getDate())||(Ce={t:"d",v:pn(j)},u.cellDates||(Ce={t:"n",v:bi(Ce.v)}),Ce.z=u.dateNF||xt[14]):Ce={t:"n",v:Rr(j)})),void 0===Ce.z&&null!=pe&&(Ce.z=pe);var he="",je=we.getElementsByTagName("A");if(je&&je.length)for(var ut=0;ut<je.length&&(!je[ut].hasAttribute("href")||"#"==(he=je[ut].getAttribute("href")).charAt(0));++ut);he&&"#"!=he.charAt(0)&&(Ce.l={Target:he}),u.dense?(o[y+h]||(o[y+h]=[]),o[y+h][Z+m]=Ce):o[Mt({c:Z+m,r:y+h})]=Ce,C.e.c<Z+m&&(C.e.c=Z+m),Z+=B}}++y}return D.length&&(o["!merges"]=(o["!merges"]||[]).concat(D)),C.e.r=Math.max(C.e.r,y-1+h),o["!ref"]=Jt(C),y>=x&&(o["!fullref"]=Jt((C.e.r=v.length-R+y-1+h,C))),o}function B1(o,c){return Ga((c||{}).dense?[]:{},o,c)}function dh(o){var c="",l=function Sw(o){return o.ownerDocument.defaultView&&"function"==typeof o.ownerDocument.defaultView.getComputedStyle?o.ownerDocument.defaultView.getComputedStyle:"function"==typeof getComputedStyle?getComputedStyle:null}(o);return l&&(c=l(o).getPropertyValue("display")),c||(c=o.style&&o.style.display),"none"===c}var Ni=function(){var o=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),c="<office:document-styles "+su({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+o+"</office:document-styles>";return function(){return Yt+c}}(),za=function(){var o=function(m){return Cn(m).replace(/  +/g,function(_){return'<text:s text:c="'+_.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},c="          <table:table-cell />\n",u=function(m,_,v){var x=[];x.push('      <table:table table:name="'+Cn(_.SheetNames[v])+'" table:style-name="ta1">\n');var C=0,E=0,D=hr(m["!ref"]||"A1"),A=m["!merges"]||[],I=0,R=Array.isArray(m);if(m["!cols"])for(E=0;E<=D.e.c;++E)x.push("        <table:table-column"+(m["!cols"][E]?' table:style-name="co'+m["!cols"][E].ods+'"':"")+"></table:table-column>\n");var N=m["!rows"]||[];for(C=0;C<D.s.r;++C)x.push("        <table:table-row"+(N[C]?' table:style-name="ro'+N[C].ods+'"':"")+"></table:table-row>\n");for(;C<=D.e.r;++C){for(x.push("        <table:table-row"+(N[C]?' table:style-name="ro'+N[C].ods+'"':"")+">\n"),E=0;E<D.s.c;++E)x.push(c);for(;E<=D.e.c;++E){var Z=!1,z={},B="";for(I=0;I!=A.length;++I)if(!(A[I].s.c>E||A[I].s.r>C||A[I].e.c<E||A[I].e.r<C)){(A[I].s.c!=E||A[I].s.r!=C)&&(Z=!0),z["table:number-columns-spanned"]=A[I].e.c-A[I].s.c+1,z["table:number-rows-spanned"]=A[I].e.r-A[I].s.r+1;break}if(Z)x.push("          <table:covered-table-cell/>\n");else{var le=Mt({r:C,c:E}),ge=R?(m[C]||[])[E]:m[le];if(ge&&ge.f&&(z["table:formula"]=Cn(by(ge.f)),ge.F&&ge.F.slice(0,le.length)==le)){var we=hr(ge.F);z["table:number-matrix-columns-spanned"]=we.e.c-we.s.c+1,z["table:number-matrix-rows-spanned"]=we.e.r-we.s.r+1}if(ge){switch(ge.t){case"b":B=ge.v?"TRUE":"FALSE",z["office:value-type"]="boolean",z["office:boolean-value"]=ge.v?"true":"false";break;case"n":B=ge.w||String(ge.v||0),z["office:value-type"]="float",z["office:value"]=ge.v||0;break;case"s":case"str":B=ge.v??"",z["office:value-type"]="string";break;case"d":B=ge.w||pn(ge.v).toISOString(),z["office:value-type"]="date",z["office:date-value"]=pn(ge.v).toISOString(),z["table:style-name"]="ce1";break;default:x.push(c);continue}var j=o(B);if(ge.l&&ge.l.Target){var pe=ge.l.Target;"#"!=(pe="#"==pe.charAt(0)?"#"+QS(pe.slice(1)):pe).charAt(0)&&!pe.match(/^\w+:/)&&(pe="../"+pe),j=qe("text:a",j,{"xlink:href":pe.replace(/&/g,"&amp;")})}x.push("          "+qe("table:table-cell",qe("text:p",j,{}),z)+"\n")}else x.push(c)}}x.push("        </table:table-row>\n")}return x.push("      </table:table>\n"),x.join("")};return function(_,v){var x=[Yt],C=su({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),E=su({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==v.bookType?(x.push("<office:document"+C+E+">\n"),x.push(Vg().replace(/office:document-meta/g,"office:meta"))):x.push("<office:document-content"+C+">\n"),function(m,_){m.push(" <office:automatic-styles>\n"),m.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),m.push('   <number:month number:style="long"/>\n'),m.push("   <number:text>/</number:text>\n"),m.push('   <number:day number:style="long"/>\n'),m.push("   <number:text>/</number:text>\n"),m.push("   <number:year/>\n"),m.push("  </number:date-style>\n");var v=0;_.SheetNames.map(function(C){return _.Sheets[C]}).forEach(function(C){if(C&&C["!cols"])for(var E=0;E<C["!cols"].length;++E)if(C["!cols"][E]){var D=C["!cols"][E];if(null==D.width&&null==D.wpx&&null==D.wch)continue;no(D),D.ods=v;var A=C["!cols"][E].wpx+"px";m.push('  <style:style style:name="co'+v+'" style:family="table-column">\n'),m.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+'"/>\n'),m.push("  </style:style>\n"),++v}});var x=0;_.SheetNames.map(function(C){return _.Sheets[C]}).forEach(function(C){if(C&&C["!rows"])for(var E=0;E<C["!rows"].length;++E)if(C["!rows"][E]){C["!rows"][E].ods=x;var D=C["!rows"][E].hpx+"px";m.push('  <style:style style:name="ro'+x+'" style:family="table-row">\n'),m.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+D+'"/>\n'),m.push("  </style:style>\n"),++x}}),m.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),m.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),m.push("  </style:style>\n"),m.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),m.push(" </office:automatic-styles>\n")}(x,_),x.push("  <office:body>\n"),x.push("    <office:spreadsheet>\n");for(var D=0;D!=_.SheetNames.length;++D)x.push(u(_.Sheets[_.SheetNames[D]],_,D));return x.push("    </office:spreadsheet>\n"),x.push("  </office:body>\n"),x.push("fods"==v.bookType?"</office:document>":"</office:document-content>"),x.join("")}}();function Wo(o,c){if("fods"==c.bookType)return za(o,c);var l=_g(),u="",h=[],m=[];return Vt(l,u="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Vt(l,u="content.xml",za(o,c)),h.push([u,"text/xml"]),m.push([u,"ContentFile"]),Vt(l,u="styles.xml",Ni(o,c)),h.push([u,"text/xml"]),m.push([u,"StylesFile"]),Vt(l,u="meta.xml",Yt+Vg()),h.push([u,"text/xml"]),m.push([u,"MetadataFile"]),Vt(l,u="manifest.rdf",function Rx(o){var c=[Yt];c.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var l=0;l!=o.length;++l)c.push(Hg(o[l][0],o[l][1])),c.push(Mx("",o[l][0]));return c.push(Hg("","Document","pkg")),c.push("</rdf:RDF>"),c.join("")}(m)),h.push([u,"application/rdf+xml"]),Vt(l,u="META-INF/manifest.xml",function Ix(o){var c=[Yt];c.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),c.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var l=0;l<o.length;++l)c.push('  <manifest:file-entry manifest:full-path="'+o[l][0]+'" manifest:media-type="'+o[l][1]+'"/>\n');return c.push("</manifest:manifest>"),c.join("")}(h)),l}function an(o){return new DataView(o.buffer,o.byteOffset,o.byteLength)}function jo(o){return typeof TextEncoder<"u"?(new TextEncoder).encode(o):ee(Lr(o))}function co(o){var c=o.reduce(function(h,m){return h+m.length},0),l=new Uint8Array(c),u=0;return o.forEach(function(h){l.set(h,u),u+=h.length}),l}function Qo(o,c){var l=c?c[0]:0,u=127&o[l];e:if(o[l++]>=128&&(u|=(127&o[l])<<7,o[l++]<128||(u|=(127&o[l])<<14,o[l++]<128)||(u|=(127&o[l])<<21,o[l++]<128)||(u+=(127&o[l])*Math.pow(2,28),++l,o[l++]<128)||(u+=(127&o[l])*Math.pow(2,35),++l,o[l++]<128)||(u+=(127&o[l])*Math.pow(2,42),++l,o[l++]<128)))break e;return c&&(c[0]=l),u}function ln(o){var c=new Uint8Array(7);c[0]=127&o;var l=1;e:if(o>127){if(c[l-1]|=128,c[l]=o>>7&127,++l,o<=16383||(c[l-1]|=128,c[l]=o>>14&127,++l,o<=2097151)||(c[l-1]|=128,c[l]=o>>21&127,++l,o<=268435455)||(c[l-1]|=128,c[l]=o/256>>>21&127,++l,o<=34359738367)||(c[l-1]|=128,c[l]=o/65536>>>21&127,++l,o<=4398046511103))break e;c[l-1]|=128,c[l]=o/16777216>>>21&127,++l}return c.slice(0,l)}function Hn(o){var c=0,l=127&o[c];e:if(o[c++]>=128){if(l|=(127&o[c])<<7,o[c++]<128||(l|=(127&o[c])<<14,o[c++]<128)||(l|=(127&o[c])<<21,o[c++]<128))break e;l|=(127&o[c])<<28}return l}function mn(o){for(var c=[],l=[0];l[0]<o.length;){var v,u=l[0],h=Qo(o,l),m=7&h,_=0;if(0==(h=Math.floor(h/8)))break;switch(m){case 0:for(var x=l[0];o[l[0]++]>=128;);v=o.slice(x,l[0]);break;case 5:v=o.slice(l[0],l[0]+(_=4)),l[0]+=_;break;case 1:v=o.slice(l[0],l[0]+(_=8)),l[0]+=_;break;case 2:_=Qo(o,l),v=o.slice(l[0],l[0]+_),l[0]+=_;break;default:throw new Error("PB Type ".concat(m," for Field ").concat(h," at offset ").concat(u))}var C={data:v,type:m};null==c[h]?c[h]=[C]:c[h].push(C)}return c}function di(o){var c=[];return o.forEach(function(l,u){l.forEach(function(h){!h.data||(c.push(ln(8*u+h.type)),2==h.type&&c.push(ln(h.data.length)),c.push(h.data))})}),co(c)}function jr(o){for(var c,l=[],u=[0];u[0]<o.length;){var h=Qo(o,u),m=mn(o.slice(u[0],u[0]+h));u[0]+=h;var _={id:Hn(m[1][0].data),messages:[]};m[2].forEach(function(v){var x=mn(v.data),C=Hn(x[3][0].data);_.messages.push({meta:x,data:o.slice(u[0],u[0]+C)}),u[0]+=C}),null!=(c=m[3])&&c[0]&&(_.merge=Hn(m[3][0].data)>>>0>0),l.push(_)}return l}function Zl(o){var c=[];return o.forEach(function(l){var u=[];u[1]=[{data:ln(l.id),type:0}],u[2]=[],null!=l.merge&&(u[3]=[{data:ln(+!!l.merge),type:0}]);var h=[];l.messages.forEach(function(_){h.push(_.data),_.meta[3]=[{type:0,data:ln(_.data.length)}],u[2].push({data:di(_.meta),type:2})});var m=di(u);c.push(ln(m.length)),c.push(m),h.forEach(function(_){return c.push(_)})}),co(c)}function ww(o,c){if(0!=o)throw new Error("Unexpected Snappy chunk type ".concat(o));for(var l=[0],u=Qo(c,l),h=[];l[0]<c.length;){var m=3&c[l[0]];if(0!=m){var x=0,C=0;if(1==m?(C=4+(c[l[0]]>>2&7),x=(224&c[l[0]++])<<3,x|=c[l[0]++]):(C=1+(c[l[0]++]>>2),2==m?(x=c[l[0]]|c[l[0]+1]<<8,l[0]+=2):(x=(c[l[0]]|c[l[0]+1]<<8|c[l[0]+2]<<16|c[l[0]+3]<<24)>>>0,l[0]+=4)),h=[co(h)],0==x)throw new Error("Invalid offset 0");if(x>h[0].length)throw new Error("Invalid offset beyond length");if(C>=x)for(h.push(h[0].slice(-x)),C-=x;C>=h[h.length-1].length;)h.push(h[h.length-1]),C-=h[h.length-1].length;h.push(h[0].slice(-x,-x+C))}else{var _=c[l[0]++]>>2;if(_<60)++_;else{var v=_-59;_=c[l[0]],v>1&&(_|=c[l[0]+1]<<8),v>2&&(_|=c[l[0]+2]<<16),v>3&&(_|=c[l[0]+3]<<24),_>>>=0,_++,l[0]+=v}h.push(c.slice(l[0],l[0]+_)),l[0]+=_}}var E=co(h);if(E.length!=u)throw new Error("Unexpected length: ".concat(E.length," != ").concat(u));return E}function Ur(o){for(var c=[],l=0;l<o.length;){var u=o[l++],h=o[l]|o[l+1]<<8|o[l+2]<<16;c.push(ww(u,o.slice(l+=3,l+h))),l+=h}if(l!==o.length)throw new Error("data is not a valid framed stream!");return co(c)}function Za(o){for(var c=[],l=0;l<o.length;){var u=Math.min(o.length-l,268435455),h=new Uint8Array(4);c.push(h);var m=ln(u),_=m.length;c.push(m),u<=60?(_++,c.push(new Uint8Array([u-1<<2]))):u<=256?(_+=2,c.push(new Uint8Array([240,u-1&255]))):u<=65536?(_+=3,c.push(new Uint8Array([244,u-1&255,u-1>>8&255]))):u<=16777216?(_+=4,c.push(new Uint8Array([248,u-1&255,u-1>>8&255,u-1>>16&255]))):u<=4294967296&&(_+=5,c.push(new Uint8Array([252,u-1&255,u-1>>8&255,u-1>>16&255,u-1>>>24&255]))),c.push(o.slice(l,l+u)),_+=u,h[0]=0,h[1]=255&_,h[2]=_>>8&255,h[3]=_>>16&255,l+=u}return co(c)}function dm(o,c){var l=new Uint8Array(32),u=an(l),h=12,m=0;switch(l[0]=5,o.t){case"n":l[1]=2,function H1(o,c,l){var u=Math.floor(0==l?0:Math.LOG10E*Math.log(Math.abs(l)))+6176-20,h=l/Math.pow(10,u-6176);o[c+15]|=u>>7,o[c+14]|=(127&u)<<1;for(var m=0;h>=1;++m,h/=256)o[c+m]=255&h;o[c+15]|=l>=0?0:128}(l,h,o.v),m|=1,h+=16;break;case"b":l[1]=6,u.setFloat64(h,o.v?1:0,!0),m|=2,h+=8;break;case"s":if(-1==c.indexOf(o.v))throw new Error("Value ".concat(o.v," missing from SST!"));l[1]=3,u.setUint32(h,c.indexOf(o.v),!0),m|=8,h+=4;break;default:throw"unsupported cell type "+o.t}return u.setUint32(8,m,!0),l.slice(0,h)}function um(o,c){var l=new Uint8Array(32),u=an(l),h=12,m=0;switch(l[0]=3,o.t){case"n":l[2]=2,u.setFloat64(h,o.v,!0),m|=32,h+=8;break;case"b":l[2]=6,u.setFloat64(h,o.v?1:0,!0),m|=32,h+=8;break;case"s":if(-1==c.indexOf(o.v))throw new Error("Value ".concat(o.v," missing from SST!"));l[2]=3,u.setUint32(h,c.indexOf(o.v),!0),m|=16,h+=4;break;default:throw"unsupported cell type "+o.t}return u.setUint32(4,m,!0),l.slice(0,h)}function ar(o){return Qo(mn(o)[1][0].data)}function q1(o,c,l){var u,h,m,_;if(null==(u=o[6])||!u[0]||null==(h=o[7])||!h[0])throw"Mutation only works on post-BNC storages!";if((null==(_=null==(m=o[8])?void 0:m[0])?void 0:_.data)&&Hn(o[8][0].data)>0)throw"Math only works with normal offsets";for(var x=0,C=an(o[7][0].data),E=0,D=[],A=an(o[4][0].data),I=0,R=[],y=0;y<c.length;++y)if(null!=c[y]){var N,Z;switch(C.setUint16(2*y,E,!0),A.setUint16(2*y,I,!0),typeof c[y]){case"string":N=dm({t:"s",v:c[y]},l),Z=um({t:"s",v:c[y]},l);break;case"number":N=dm({t:"n",v:c[y]},l),Z=um({t:"n",v:c[y]},l);break;case"boolean":N=dm({t:"b",v:c[y]},l),Z=um({t:"b",v:c[y]},l);break;default:throw new Error("Unsupported value "+c[y])}D.push(N),E+=N.length,R.push(Z),I+=Z.length,++x}else C.setUint16(2*y,65535,!0),A.setUint16(2*y,65535);for(o[2][0].data=ln(x);y<o[7][0].data.length/2;++y)C.setUint16(2*y,65535,!0),A.setUint16(2*y,65535,!0);return o[6][0].data=co(D),o[3][0].data=co(R),x}function mh(o){!function hm(o){return function(l){for(var u=0;u!=o.length;++u){var h=o[u];void 0===l[h[0]]&&(l[h[0]]=h[1]),"n"===h[2]&&(l[h[0]]=Number(l[h[0]]))}}}([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(o)}function Mw(o,c){return"ods"==c.bookType?Wo(o,c):"numbers"==c.bookType?function Aw(o,c){if(!c||!c.numbers)throw new Error("Must pass a `numbers` option -- check the README");var l=o.Sheets[o.SheetNames[0]];o.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var u=hr(l["!ref"]);u.s.r=u.s.c=0;var h=!1;u.e.c>9&&(h=!0,u.e.c=9),u.e.r>49&&(h=!0,u.e.r=49),h&&console.error("The Numbers writer is currently limited to ".concat(Jt(u)));var m=_h(l,{range:u,header:1}),_=["~Sh33tJ5~"];m.forEach(function(ie){return ie.forEach(function(ne){"string"==typeof ne&&_.push(ne)})});var v={},x=[],C=Ct.read(c.numbers,{type:"base64"});C.FileIndex.map(function(ie,ne){return[ie,C.FullPaths[ne]]}).forEach(function(ie){var ne=ie[0],Ee=ie[1];2==ne.type&&ne.name.match(/\.iwa/)&&jr(Ur(ne.content)).forEach(function(Le){x.push(Le.id),v[Le.id]={deps:[],location:Ee,type:Hn(Le.messages[0].meta[1][0].data)}})}),x.sort(function(ie,ne){return ie-ne});var E=x.filter(function(ie){return ie>1}).map(function(ie){return[ie,ln(ie)]});C.FileIndex.map(function(ie,ne){return[ie,C.FullPaths[ne]]}).forEach(function(ie){var ne=ie[0];ne.name.match(/\.iwa/)&&jr(Ur(ne.content)).forEach(function($e){$e.messages.forEach(function(We){E.forEach(function(Le){$e.messages.some(function(jt){return 11006!=Hn(jt.meta[1][0].data)&&function Ew(o,c){e:for(var l=0;l<=o.length-c.length;++l){for(var u=0;u<c.length;++u)if(o[l+u]!=c[u])continue e;return!0}return!1}(jt.data,Le[1])})&&v[Le[0]].deps.push($e.id)})})})});for(var R,A=Ct.find(C,v[1].location),I=jr(Ur(A.content)),y=0;y<I.length;++y){var N=I[y];1==N.id&&(R=N)}var Z=ar(mn(R.messages[0].data)[1][0].data);for(I=jr(Ur((A=Ct.find(C,v[Z].location)).content)),y=0;y<I.length;++y)(N=I[y]).id==Z&&(R=N);for(Z=ar(mn(R.messages[0].data)[2][0].data),I=jr(Ur((A=Ct.find(C,v[Z].location)).content)),y=0;y<I.length;++y)(N=I[y]).id==Z&&(R=N);for(Z=ar(mn(R.messages[0].data)[2][0].data),I=jr(Ur((A=Ct.find(C,v[Z].location)).content)),y=0;y<I.length;++y)(N=I[y]).id==Z&&(R=N);var z=mn(R.messages[0].data);z[6][0].data=ln(u.e.r+1),z[7][0].data=ln(u.e.c+1);for(var B=ar(z[46][0].data),le=Ct.find(C,v[B].location),ge=jr(Ur(le.content)),we=0;we<ge.length&&ge[we].id!=B;++we);if(ge[we].id!=B)throw"Bad ColumnRowUIDMapArchive";var j=mn(ge[we].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var pe=0;pe<=u.e.c;++pe){var ce=[];ce[1]=ce[2]=[{type:0,data:ln(pe+420690)}],j[1].push({type:2,data:di(ce)}),j[2].push({type:0,data:ln(pe)}),j[3].push({type:0,data:ln(pe)})}j[4]=[],j[5]=[],j[6]=[];for(var Ce=0;Ce<=u.e.r;++Ce)(ce=[])[1]=ce[2]=[{type:0,data:ln(Ce+726270)}],j[4].push({type:2,data:di(ce)}),j[5].push({type:0,data:ln(Ce)}),j[6].push({type:0,data:ln(Ce)});ge[we].messages[0].data=di(j),le.content=Za(Zl(ge)),le.size=le.content.length,delete z[46];var ye=mn(z[4][0].data);ye[7][0].data=ln(u.e.r+1);var je=ar(mn(ye[1][0].data)[2][0].data);if((ge=jr(Ur((le=Ct.find(C,v[je].location)).content)))[0].id!=je)throw"Bad HeaderStorageBucket";var ut=mn(ge[0].messages[0].data);for(Ce=0;Ce<m.length;++Ce){var it=mn(ut[2][0].data);it[1][0].data=ln(Ce),it[4][0].data=ln(m[Ce].length),ut[2][Ce]={type:ut[2][0].type,data:di(it)}}ge[0].messages[0].data=di(ut),le.content=Za(Zl(ge)),le.size=le.content.length;var Dt=ar(ye[2][0].data);if((ge=jr(Ur((le=Ct.find(C,v[Dt].location)).content)))[0].id!=Dt)throw"Bad HeaderStorageBucket";for(ut=mn(ge[0].messages[0].data),pe=0;pe<=u.e.c;++pe)(it=mn(ut[2][0].data))[1][0].data=ln(pe),it[4][0].data=ln(u.e.r+1),ut[2][pe]={type:ut[2][0].type,data:di(it)};ge[0].messages[0].data=di(ut),le.content=Za(Zl(ge)),le.size=le.content.length;var _t=ar(ye[4][0].data);!function(){for(var Ee,ie=Ct.find(C,v[_t].location),ne=jr(Ur(ie.content)),ot=0;ot<ne.length;++ot){var $e=ne[ot];$e.id==_t&&(Ee=$e)}var We=mn(Ee.messages[0].data);We[3]=[];var Le=[];_.forEach(function(At,Kt){Le[1]=[{type:0,data:ln(Kt)}],Le[2]=[{type:0,data:ln(1)}],Le[3]=[{type:2,data:jo(At)}],We[3].push({type:2,data:di(Le)})}),Ee.messages[0].data=di(We);var W=Za(Zl(ne));ie.content=W,ie.size=ie.content.length}();var rn=mn(ye[3][0].data),ct=rn[1][0];delete rn[2];var It=mn(ct.data),Pe=ar(It[2][0].data);!function(){for(var Ee,ie=Ct.find(C,v[Pe].location),ne=jr(Ur(ie.content)),ot=0;ot<ne.length;++ot){var $e=ne[ot];$e.id==Pe&&(Ee=$e)}var We=mn(Ee.messages[0].data);delete We[6],delete rn[7];var Le=new Uint8Array(We[5][0].data);We[5]=[];for(var jt=0,W=0;W<=u.e.r;++W){var At=mn(Le);jt+=q1(At,m[W],_),At[1][0].data=ln(W),We[5].push({data:di(At),type:2})}We[1]=[{type:0,data:ln(u.e.c+1)}],We[2]=[{type:0,data:ln(u.e.r+1)}],We[3]=[{type:0,data:ln(jt)}],We[4]=[{type:0,data:ln(u.e.r+1)}],Ee.messages[0].data=di(We);var tn=Za(Zl(ne));ie.content=tn,ie.size=ie.content.length}(),ct.data=di(It),ye[3][0].data=di(rn),z[4][0].data=di(ye),R.messages[0].data=di(z);var xe=Za(Zl(I));return A.content=xe,A.size=A.content.length,C}(o,c):"xlsb"==c.bookType?function Rw(o,c){vt=1024,o&&!o.SSF&&(o.SSF=xn(xt)),o&&o.SSF&&(En(),ko(o.SSF),c.revssf=iu(o.SSF),c.revssf[o.SSF[65535]]=0,c.ssf=o.SSF),c.rels={},c.wbrels={},c.Strings=[],c.Strings.Count=0,c.Strings.Unique=0,id?c.revStrings=new Map:(c.revStrings={},c.revStrings.foo=[],delete c.revStrings.foo);var l="xlsb"==c.bookType?"bin":"xml",u=fp.indexOf(c.bookType)>-1,h={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};mh(c=c||{});var m=_g(),_="",v=0;if(c.cellXfs=[],Ho(c.cellXfs,{},{revssf:{General:0}}),o.Props||(o.Props={}),Vt(m,_="docProps/core.xml",qg(o.Props,c)),h.coreprops.push(_),Sn(c.rels,2,_,qt.CORE_PROPS),_="docProps/app.xml",!o.Props||!o.Props.SheetNames)if(o.Workbook&&o.Workbook.Sheets){for(var x=[],C=0;C<o.SheetNames.length;++C)2!=(o.Workbook.Sheets[C]||{}).Hidden&&x.push(o.SheetNames[C]);o.Props.SheetNames=x}else o.Props.SheetNames=o.SheetNames;for(o.Props.Worksheets=o.Props.SheetNames.length,Vt(m,_,$g(o.Props)),h.extprops.push(_),Sn(c.rels,3,_,qt.EXT_PROPS),o.Custprops!==o.Props&&ni(o.Custprops||{}).length>0&&(Vt(m,_="docProps/custom.xml",Wg(o.Custprops)),h.custprops.push(_),Sn(c.rels,4,_,qt.CUST_PROPS)),v=1;v<=o.SheetNames.length;++v){var E={"!id":{}},D=o.Sheets[o.SheetNames[v-1]];if(Vt(m,_="xl/worksheets/sheet"+v+"."+l,jp(v-1,_,c,o,E)),h.sheets.push(_),Sn(c.wbrels,-1,"worksheets/sheet"+v+"."+l,qt.WS[0]),D){var I=D["!comments"],R=!1,y="";I&&I.length>0&&(Vt(m,y="xl/comments"+v+"."+l,C1(I,y,c)),h.comments.push(y),Sn(E,-1,"../comments"+v+"."+l,qt.CMNT),R=!0),D["!legacy"]&&R&&Vt(m,"xl/drawings/vmlDrawing"+v+".vml",Vu(v,D["!comments"])),delete D["!comments"],delete D["!legacy"]}E["!id"].rId1&&Vt(m,Dc(_),pl(E))}return null!=c.Strings&&c.Strings.length>0&&(Vt(m,_="xl/sharedStrings."+l,function tw(o,c,l){return(".bin"===c.slice(-4)?jf:Lo)(o,l)}(c.Strings,_,c)),h.strs.push(_),Sn(c.wbrels,-1,"sharedStrings."+l,qt.SST)),Vt(m,_="xl/workbook."+l,function x1(o,c,l){return(".bin"===c.slice(-4)?_1:qp)(o,l)}(o,_,c)),h.workbooks.push(_),Sn(c.rels,1,_,qt.WB),Vt(m,_="xl/theme/theme1.xml",ap(o.Themes,c)),h.themes.push(_),Sn(c.wbrels,-1,"theme/theme1.xml",qt.THEME),Vt(m,_="xl/styles."+l,function ew(o,c,l){return(".bin"===c.slice(-4)?oS:ip)(o,l)}(o,_,c)),h.styles.push(_),Sn(c.wbrels,-1,"styles."+l,qt.STY),o.vbaraw&&u&&(Vt(m,_="xl/vbaProject.bin",o.vbaraw),h.vba.push(_),Sn(c.wbrels,-1,"vbaProject.bin",qt.VBA)),Vt(m,_="xl/metadata."+l,function S1(o){return(".bin"===o.slice(-4)?wl:Zu)()}(_)),h.metadata.push(_),Sn(c.wbrels,-1,"metadata."+l,qt.XLMETA),Vt(m,"[Content_Types].xml",Zg(h,c)),Vt(m,"_rels/.rels",pl(c.rels)),Vt(m,"xl/_rels/workbook."+l+".rels",pl(c.wbrels)),delete c.revssf,delete c.ssf,m}(o,c):function gm(o,c){vt=1024,o&&!o.SSF&&(o.SSF=xn(xt)),o&&o.SSF&&(En(),ko(o.SSF),c.revssf=iu(o.SSF),c.revssf[o.SSF[65535]]=0,c.ssf=o.SSF),c.rels={},c.wbrels={},c.Strings=[],c.Strings.Count=0,c.Strings.Unique=0,id?c.revStrings=new Map:(c.revStrings={},c.revStrings.foo=[],delete c.revStrings.foo);var l="xml",u=fp.indexOf(c.bookType)>-1,h={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};mh(c=c||{});var m=_g(),_="",v=0;if(c.cellXfs=[],Ho(c.cellXfs,{},{revssf:{General:0}}),o.Props||(o.Props={}),Vt(m,_="docProps/core.xml",qg(o.Props,c)),h.coreprops.push(_),Sn(c.rels,2,_,qt.CORE_PROPS),_="docProps/app.xml",!o.Props||!o.Props.SheetNames)if(o.Workbook&&o.Workbook.Sheets){for(var x=[],C=0;C<o.SheetNames.length;++C)2!=(o.Workbook.Sheets[C]||{}).Hidden&&x.push(o.SheetNames[C]);o.Props.SheetNames=x}else o.Props.SheetNames=o.SheetNames;o.Props.Worksheets=o.Props.SheetNames.length,Vt(m,_,$g(o.Props)),h.extprops.push(_),Sn(c.rels,3,_,qt.EXT_PROPS),o.Custprops!==o.Props&&ni(o.Custprops||{}).length>0&&(Vt(m,_="docProps/custom.xml",Wg(o.Custprops)),h.custprops.push(_),Sn(c.rels,4,_,qt.CUST_PROPS));var E=["SheetJ5"];for(c.tcid=0,v=1;v<=o.SheetNames.length;++v){var D={"!id":{}},A=o.Sheets[o.SheetNames[v-1]];if(Vt(m,_="xl/worksheets/sheet"+v+"."+l,Y0(v-1,c,o,D)),h.sheets.push(_),Sn(c.wbrels,-1,"worksheets/sheet"+v+"."+l,qt.WS[0]),A){var R=A["!comments"],y=!1,N="";if(R&&R.length>0){var Z=!1;R.forEach(function(z){z[1].forEach(function(B){1==B.T&&(Z=!0)})}),Z&&(Vt(m,N="xl/threadedComments/threadedComment"+v+"."+l,d0(R,E,c)),h.threadedcomments.push(N),Sn(D,-1,"../threadedComments/threadedComment"+v+"."+l,qt.TCMNT)),Vt(m,N="xl/comments"+v+"."+l,Aa(R)),h.comments.push(N),Sn(D,-1,"../comments"+v+"."+l,qt.CMNT),y=!0}A["!legacy"]&&y&&Vt(m,"xl/drawings/vmlDrawing"+v+".vml",Vu(v,A["!comments"])),delete A["!comments"],delete A["!legacy"]}D["!id"].rId1&&Vt(m,Dc(_),pl(D))}return null!=c.Strings&&c.Strings.length>0&&(Vt(m,_="xl/sharedStrings."+l,Lo(c.Strings,c)),h.strs.push(_),Sn(c.wbrels,-1,"sharedStrings."+l,qt.SST)),Vt(m,_="xl/workbook."+l,qp(o)),h.workbooks.push(_),Sn(c.rels,1,_,qt.WB),Vt(m,_="xl/theme/theme1.xml",ap(o.Themes,c)),h.themes.push(_),Sn(c.wbrels,-1,"theme/theme1.xml",qt.THEME),Vt(m,_="xl/styles."+l,ip(o,c)),h.styles.push(_),Sn(c.wbrels,-1,"styles."+l,qt.STY),o.vbaraw&&u&&(Vt(m,_="xl/vbaProject.bin",o.vbaraw),h.vba.push(_),Sn(c.wbrels,-1,"vbaProject.bin",qt.VBA)),Vt(m,_="xl/metadata."+l,Zu()),h.metadata.push(_),Sn(c.wbrels,-1,"metadata."+l,qt.XLMETA),E.length>1&&(Vt(m,_="xl/persons/person.xml",function u0(o){var c=[Yt,qe("personList",null,{xmlns:Wn_TCMNT,"xmlns:x":Ks[0]}).replace(/[\/]>/,">")];return o.forEach(function(l,u){c.push(qe("person",null,{displayName:l,id:"{54EE7950-7262-4200-6969-"+("000000000000"+u).slice(-12)+"}",userId:l,providerId:"None"}))}),c.push("</personList>"),c.join("")}(E)),h.people.push(_),Sn(c.wbrels,-1,"persons/person.xml",qt.PEOPLE)),Vt(m,"[Content_Types].xml",Zg(h,c)),Vt(m,"_rels/.rels",pl(c.rels)),Vt(m,"xl/_rels/workbook.xml.rels",pl(c.wbrels)),delete c.revssf,delete c.ssf,m}(o,c)}function K1(o,c){switch(c.type){case"base64":case"binary":break;case"buffer":case"array":c.type="";break;case"file":return eu(c.file,Ct.write(o,{type:O?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+c.bookType+"' files");default:throw new Error("Unrecognized type "+c.type)}return Ct.write(o,c)}function In(o,c,l){l||(l="");var u=l+o;switch(c.type){case"base64":return w(Lr(u));case"binary":return Lr(u);case"string":return o;case"file":return eu(c.file,u,"utf8");case"buffer":return O?q(u,"utf8"):typeof TextEncoder<"u"?(new TextEncoder).encode(u):In(u,{type:"binary"}).split("").map(function(h){return h.charCodeAt(0)})}throw new Error("Unrecognized type "+c.type)}function fd(o,c){switch(c.type){case"string":case"base64":case"binary":for(var l="",u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);return"base64"==c.type?w(l):"string"==c.type?Bn(l):l;case"file":return eu(c.file,o);case"buffer":return o;default:throw new Error("Unrecognized type "+c.type)}}function dn(o,c){(function ft(){ue(1200),function t(){Je(1252)}()})(),function h1(o){if(!o||!o.SheetNames||!o.Sheets)throw new Error("Invalid Workbook");if(!o.SheetNames.length)throw new Error("Workbook is empty");!function u1(o,c,l){o.forEach(function(u,h){Bl(u);for(var m=0;m<h;++m)if(u==o[m])throw new Error("Duplicate Sheet Name: "+u);if(l){var _=c&&c[h]&&c[h].CodeName||u;if(95==_.charCodeAt(0)&&_.length>22)throw new Error("Bad Code Name: Worksheet"+_)}})}(o.SheetNames,o.Workbook&&o.Workbook.Sheets||[],!!o.vbaraw);for(var l=0;l<o.SheetNames.length;++l)XS(o.Sheets[o.SheetNames[l]],0,l)}(o);var l=xn(c||{});if(l.cellStyles&&(l.cellNF=!0,l.sheetStubs=!0),"array"==l.type){l.type="binary";var u=dn(o,l);return l.type="array",me(u)}var h=0;if(l.sheet&&(h="number"==typeof l.sheet?l.sheet:o.SheetNames.indexOf(l.sheet),!o.SheetNames[h]))throw new Error("Sheet not found: "+l.sheet+" : "+typeof l.sheet);switch(l.bookType||"xlsb"){case"xml":case"xlml":return In(M1(o,l),l);case"slk":case"sylk":return In(Jf.from_sheet(o.Sheets[o.SheetNames[h]],l),l);case"htm":case"html":return In(U1(o.Sheets[o.SheetNames[h]],l),l);case"txt":return function Ha(o,c){switch(c.type){case"base64":return w(o);case"binary":case"string":return o;case"file":return eu(c.file,o,"binary");case"buffer":return O?q(o,"binary"):o.split("").map(function(l){return l.charCodeAt(0)})}throw new Error("Unrecognized type "+c.type)}(X1(o.Sheets[o.SheetNames[h]],l),l);case"csv":return In(bm(o.Sheets[o.SheetNames[h]],l),l,"\ufeff");case"dif":return In(qf.from_sheet(o.Sheets[o.SheetNames[h]],l),l);case"dbf":return fd(Mi.from_sheet(o.Sheets[o.SheetNames[h]],l),l);case"prn":return In(Me.from_sheet(o.Sheets[o.SheetNames[h]],l),l);case"rtf":return In(tp.from_sheet(o.Sheets[o.SheetNames[h]],l),l);case"eth":return In(Yf.from_sheet(o.Sheets[o.SheetNames[h]],l),l);case"fods":return In(Wo(o,l),l);case"wk1":return fd(As.sheet_to_wk1(o.Sheets[o.SheetNames[h]],l),l);case"wk3":return fd(As.book_to_wk3(o,l),l);case"biff2":l.biff||(l.biff=2);case"biff3":l.biff||(l.biff=3);case"biff4":return l.biff||(l.biff=4),fd(L1(o,l),l);case"biff5":l.biff||(l.biff=5);case"biff8":case"xla":case"xls":return l.biff||(l.biff=8),function $1(o,c){var l=c||{};return K1(function cw(o,c){var l=c||{},u=Ct.utils.cfb_new({root:"R"}),h="/Workbook";switch(l.bookType||"xls"){case"xls":l.bookType="biff8";case"xla":l.bookType||(l.bookType="xla");case"biff8":h="/Workbook",l.biff=8;break;case"biff5":h="/Book",l.biff=5;break;default:throw new Error("invalid type "+l.bookType+" for XLS CFB")}return Ct.utils.cfb_add(u,h,L1(o,l)),8==l.biff&&(o.Props||o.Custprops)&&function gr(o,c){var _,l=[],u=[],h=[],m=0,v=tu(wf,"n"),x=tu(kf,"n");if(o.Props)for(_=ni(o.Props),m=0;m<_.length;++m)(Object.prototype.hasOwnProperty.call(v,_[m])?l:Object.prototype.hasOwnProperty.call(x,_[m])?u:h).push([_[m],o.Props[_[m]]]);if(o.Custprops)for(_=ni(o.Custprops),m=0;m<_.length;++m)Object.prototype.hasOwnProperty.call(o.Props||{},_[m])||(Object.prototype.hasOwnProperty.call(v,_[m])?l:Object.prototype.hasOwnProperty.call(x,_[m])?u:h).push([_[m],o.Custprops[_[m]]]);var C=[];for(m=0;m<h.length;++m)ys.indexOf(h[m][0])>-1||Yg.indexOf(h[m][0])>-1||null!=h[m][1]&&C.push(h[m]);u.length&&Ct.utils.cfb_add(c,"/\x05SummaryInformation",wu(u,"e0859ff2f94f6810ab9108002b27b3d9",x,kf)),(l.length||C.length)&&Ct.utils.cfb_add(c,"/\x05DocumentSummaryInformation",wu(l,"02d5cdd59c2e1b10939708002b2cf9ae",v,wf,C.length?C:null,"05d5cdd59c2e1b10939708002b2cf9ae"))}(o,u),8==l.biff&&o.vbaraw&&function hp(o,c){c.FullPaths.forEach(function(l,u){if(0!=u){var h=l.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==h.slice(-1)&&Ct.utils.cfb_add(o,h,c.FileIndex[u].content)}})}(u,Ct.read(o.vbaraw,{type:"string"==typeof o.vbaraw?"binary":"buffer"})),u}(o,l),l)}(o,l);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function vm(o,c){var l=xn(c||{});return function Lw(o,c){var l={},u=O?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(c.compression&&(l.compression="DEFLATE"),c.password)l.type=u;else switch(c.type){case"base64":l.type="base64";break;case"binary":l.type="string";break;case"string":throw new Error("'string' output type invalid for '"+c.bookType+"' files");case"buffer":case"file":l.type=u;break;default:throw new Error("Unrecognized type "+c.type)}var h=o.FullPaths?Ct.write(o,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[l.type]||l.type,compression:!!c.compression}):o.generate(l);if(typeof Deno<"u"&&"string"==typeof h){if("binary"==c.type||"base64"==c.type)return h;h=new Uint8Array(me(h))}return c.password&&typeof encrypt_agile<"u"?K1(encrypt_agile(h,c.password),c):"file"===c.type?eu(c.file,h):"string"==c.type?Bn(h):h}(Mw(o,l),l)}(o,l);default:throw new Error("Unrecognized bookType |"+l.bookType+"|")}}function Pw(o,c,l){var u=l||{};return u.type="file",u.file=c,function pd(o){if(!o.bookType){var l=o.file.slice(o.file.lastIndexOf(".")).toLowerCase();l.match(/^\.[a-z]+$/)&&(o.bookType=l.slice(1)),o.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[o.bookType]||o.bookType}}(u),dn(o,u)}function j1(o,c,l,u,h,m,_,v){var x=Qn(l),C=v.defval,E=v.raw||!Object.prototype.hasOwnProperty.call(v,"raw"),D=!0,A=1===h?[]:{};if(1!==h)if(Object.defineProperty)try{Object.defineProperty(A,"__rowNum__",{value:l,enumerable:!1})}catch{A.__rowNum__=l}else A.__rowNum__=l;if(!_||o[l])for(var I=c.s.c;I<=c.e.c;++I){var R=_?o[l][I]:o[u[I]+x];if(void 0!==R&&void 0!==R.t){var y=R.v;switch(R.t){case"z":if(null==y)break;continue;case"e":y=0==y?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+R.t)}if(null!=m[I]){if(null==y)if("e"==R.t&&null===y)A[m[I]]=null;else if(void 0!==C)A[m[I]]=C;else{if(!E||null!==y)continue;A[m[I]]=null}else A[m[I]]=E&&("n"!==R.t||"n"===R.t&&!1!==v.rawNumbers)?y:Ts(R,y,v);null!=y&&(D=!1)}}else{if(void 0===C)continue;null!=m[I]&&(A[m[I]]=C)}}return{row:A,isempty:D}}function _h(o,c){if(null==o||null==o["!ref"])return[];var l={t:"n",v:0},u=0,h=1,m=[],_=0,v="",x={s:{r:0,c:0},e:{r:0,c:0}},C=c||{},E=null!=C.range?C.range:o["!ref"];switch(1===C.header?u=1:"A"===C.header?u=2:Array.isArray(C.header)?u=3:null==C.header&&(u=0),typeof E){case"string":x=on(E);break;case"number":(x=on(o["!ref"])).s.r=E;break;default:x=E}u>0&&(h=0);var D=Qn(x.s.r),A=[],I=[],R=0,y=0,N=Array.isArray(o),Z=x.s.r,z=0,B={};N&&!o[Z]&&(o[Z]=[]);var le=C.skipHidden&&o["!cols"]||[],ge=C.skipHidden&&o["!rows"]||[];for(z=x.s.c;z<=x.e.c;++z)if(!(le[z]||{}).hidden)switch(A[z]=Gn(z),l=N?o[Z][z]:o[A[z]+D],u){case 1:m[z]=z-x.s.c;break;case 2:m[z]=A[z];break;case 3:m[z]=C.header[z-x.s.c];break;default:if(null==l&&(l={w:"__EMPTY",t:"s"}),v=_=Ts(l,null,C),y=B[_]||0){do{v=_+"_"+y++}while(B[v]);B[_]=y,B[v]=1}else B[_]=1;m[z]=v}for(Z=x.s.r+h;Z<=x.e.r;++Z)if(!(ge[Z]||{}).hidden){var we=j1(o,x,Z,A,u,m,N,C);(!1===we.isempty||(1===u?!1!==C.blankrows:C.blankrows))&&(I[R++]=we.row)}return I.length=R,I}var Q1=/"/g;function vh(o,c,l,u,h,m,_,v){for(var x=!0,C=[],E="",D=Qn(l),A=c.s.c;A<=c.e.c;++A)if(u[A]){var I=v.dense?(o[l]||[])[A]:o[u[A]+D];if(null==I)E="";else if(null!=I.v){x=!1,E=""+(v.rawNumbers&&"n"==I.t?I.v:Ts(I,null,v));for(var R=0,y=0;R!==E.length;++R)if((y=E.charCodeAt(R))===h||y===m||34===y||v.forceQuotes){E='"'+E.replace(Q1,'""')+'"';break}"ID"==E&&(E='"ID"')}else null==I.f||I.F?E="":(x=!1,(E="="+I.f).indexOf(",")>=0&&(E='"'+E.replace(Q1,'""')+'"'));C.push(E)}return!1===v.blankrows&&x?null:C.join(_)}function bm(o,c){var l=[],u=c??{};if(null==o||null==o["!ref"])return"";var h=on(o["!ref"]),m=void 0!==u.FS?u.FS:",",_=m.charCodeAt(0),v=void 0!==u.RS?u.RS:"\n",x=v.charCodeAt(0),C=new RegExp(("|"==m?"\\|":m)+"+$"),E="",D=[];u.dense=Array.isArray(o);for(var A=u.skipHidden&&o["!cols"]||[],I=u.skipHidden&&o["!rows"]||[],R=h.s.c;R<=h.e.c;++R)(A[R]||{}).hidden||(D[R]=Gn(R));for(var y=0,N=h.s.r;N<=h.e.r;++N)(I[N]||{}).hidden||null!=(E=vh(o,h,N,D,_,x,m,u))&&(u.strip&&(E=E.replace(C,"")),(E||!1!==u.blankrows)&&l.push((y++?v:"")+E));return delete u.dense,l.join("")}function X1(o,c){c||(c={}),c.FS="\t",c.RS="\n";var l=bm(o,c);return l}function xm(o,c,l){var u=l||{},h=+!u.skipHeader,m=o||{},_=0,v=0;if(m&&null!=u.origin)if("number"==typeof u.origin)_=u.origin;else{var x="string"==typeof u.origin?ii(u.origin):u.origin;_=x.r,v=x.c}var C,E={s:{c:0,r:0},e:{c:v,r:_+c.length-1+h}};if(m["!ref"]){var D=on(m["!ref"]);E.e.c=Math.max(E.e.c,D.e.c),E.e.r=Math.max(E.e.r,D.e.r),-1==_&&(E.e.r=(_=D.e.r+1)+c.length-1+h)}else-1==_&&(_=0,E.e.r=c.length-1+h);var A=u.header||[],I=0;c.forEach(function(y,N){ni(y).forEach(function(Z){-1==(I=A.indexOf(Z))&&(A[I=A.length]=Z);var z=y[Z],B="z",le="",ge=Mt({c:v+I,r:_+N+h});C=md(m,ge),!z||"object"!=typeof z||z instanceof Date?("number"==typeof z?B="n":"boolean"==typeof z?B="b":"string"==typeof z?B="s":z instanceof Date?(B="d",u.cellDates||(B="n",z=bi(z)),le=u.dateNF||xt[14]):null===z&&u.nullError&&(B="e",z=0),C?(C.t=B,C.v=z,delete C.w,delete C.R,le&&(C.z=le)):m[ge]=C={t:B,v:z},le&&(C.z=le)):m[ge]=z})}),E.e.c=Math.max(E.e.c,v+A.length-1);var R=Qn(_);if(h)for(I=0;I<A.length;++I)m[Gn(I+v)+R]={t:"s",v:A[I]};return m["!ref"]=Jt(E),m}function md(o,c,l){if("string"==typeof c){if(Array.isArray(o)){var u=ii(c);return o[u.r]||(o[u.r]=[]),o[u.r][u.c]||(o[u.r][u.c]={t:"z"})}return o[c]||(o[c]={t:"z"})}return md(o,Mt("number"!=typeof c?c:{r:c,c:l||0}))}function nv(o,c,l){return c?(o.l={Target:c},l&&(o.l.Tooltip=l)):delete o.l,o}var Cm={encode_col:Gn,encode_row:Qn,encode_cell:Mt,encode_range:Jt,decode_col:vf,decode_row:gf,split_cell:function vx(o){return o.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:ii,decode_range:hr,format_cell:Ts,sheet_add_aoa:ul,sheet_add_json:xm,sheet_add_dom:Ga,aoa_to_sheet:_a,json_to_sheet:function tv(o,c){return xm(null,o,c)},table_to_sheet:B1,table_to_book:function Cw(o,c){return Do(B1(o,c),c)},sheet_to_csv:bm,sheet_to_txt:X1,sheet_to_json:_h,sheet_to_html:U1,sheet_to_formulae:function ev(o){var l,c="",u="";if(null==o||null==o["!ref"])return[];var v,h=on(o["!ref"]),m="",_=[],x=[],C=Array.isArray(o);for(v=h.s.c;v<=h.e.c;++v)_[v]=Gn(v);for(var E=h.s.r;E<=h.e.r;++E)for(m=Qn(E),v=h.s.c;v<=h.e.c;++v)if(c=_[v]+m,u="",void 0!==(l=C?(o[E]||[])[v]:o[c])){if(null!=l.F){if(c=l.F,!l.f)continue;u=l.f,-1==c.indexOf(":")&&(c=c+":"+c)}if(null!=l.f)u=l.f;else{if("z"==l.t)continue;if("n"==l.t&&null!=l.v)u=""+l.v;else if("b"==l.t)u=l.v?"TRUE":"FALSE";else if(void 0!==l.w)u="'"+l.w;else{if(void 0===l.v)continue;u="s"==l.t?"'"+l.v:""+l.v}}x[x.length]=c+"="+u}return x},sheet_to_row_object_array:_h,sheet_get_cell:md,book_new:function ql(){return{SheetNames:[],Sheets:{}}},book_append_sheet:function Yl(o,c,l,u){var h=1;if(!l)for(;h<=65535&&-1!=o.SheetNames.indexOf(l="Sheet"+h);++h,l=void 0);if(!l||o.SheetNames.length>=65535)throw new Error("Too many worksheets");if(u&&o.SheetNames.indexOf(l)>=0){var m=l.match(/(^.*?)(\d+)$/);h=m&&+m[2]||0;var _=m&&m[1]||l;for(++h;h<=65535&&-1!=o.SheetNames.indexOf(l=_+h);++h);}if(Bl(l),o.SheetNames.indexOf(l)>=0)throw new Error("Worksheet with name |"+l+"| already exists!");return o.SheetNames.push(l),o.Sheets[l]=c,l},book_set_sheet_visibility:function xh(o,c,l){o.Workbook||(o.Workbook={}),o.Workbook.Sheets||(o.Workbook.Sheets=[]);var u=function bh(o,c){if("number"==typeof c){if(c>=0&&o.SheetNames.length>c)return c;throw new Error("Cannot find sheet # "+c)}if("string"==typeof c){var l=o.SheetNames.indexOf(c);if(l>-1)return l;throw new Error("Cannot find sheet name |"+c+"|")}throw new Error("Cannot find sheet |"+c+"|")}(o,c);switch(o.Workbook.Sheets[u]||(o.Workbook.Sheets[u]={}),l){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+l)}o.Workbook.Sheets[u].Hidden=l},cell_set_number_format:function Uw(o,c){return o.z=c,o},cell_set_hyperlink:nv,cell_set_internal_link:function Bw(o,c,l){return nv(o,"#"+c,l)},cell_add_comment:function iv(o,c,l){o.c||(o.c=[]),o.c.push({t:c,a:l||"SheetJS"})},sheet_set_array_formula:function rv(o,c,l,u){for(var h="string"!=typeof c?c:on(c),m="string"==typeof c?c:Jt(c),_=h.s.r;_<=h.e.r;++_)for(var v=h.s.c;v<=h.e.c;++v){var x=md(o,_,v);x.t="n",x.F=m,delete x.v,_==h.s.r&&v==h.s.c&&(x.f=l,u&&(x.D=!0))}return o},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}}}}]);