"use strict";(self.webpackChunksellerCenter=self.webpackChunksellerCenter||[]).push([[625],{625:(il,ne,p)=>{p.r(ne),p.d(ne,{SalesModule:()=>tl});var Ze=p(2724),T=p(4669),d=p(4006),ke=p(2687),v=p(1281),e=p(4650),M=p(7579),Me=p(9646),Se=p(9751),Ie=p(4968),Ee=p(4408),P=p(727);const V={schedule(i){let n=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:a}=V;a&&(n=a.requestAnimationFrame,t=a.cancelAnimationFrame);const o=n(r=>{t=void 0,i(r)});return new P.w0(()=>t?.(o))},requestAnimationFrame(...i){const{delegate:n}=V;return(n?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:n}=V;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0};var qe=p(7565);new class Le extends qe.v{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:a}=this;let o;n=n||a.shift();do{if(o=n.execute(n.state,n.delay))break}while((n=a[0])&&n.id===t&&a.shift());if(this._active=!1,o){for(;(n=a[0])&&n.id===t&&a.shift();)n.unsubscribe();throw o}}}(class Fe extends Ee.o{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,a=0){return null!==a&&a>0?super.requestAsyncId(n,t,a):(n.actions.push(this),n._scheduled||(n._scheduled=V.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,t,a=0){if(null!=a&&a>0||null==a&&this.delay>0)return super.recycleAsyncId(n,t,a);n.actions.some(o=>o.id===t)||(V.cancelAnimationFrame(t),n._scheduled=void 0)}});p(3101);var oe=p(3601),Pe=p(9300),S=p(3353),_=p(6895),Y=p(445);let Ue=(()=>{class i{constructor(t,a,o){this._ngZone=t,this._platform=a,this._scrolled=new M.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const a=this.scrollContainers.get(t);a&&(a.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Se.y(a=>{this._globalSubscription||this._addGlobalListener();const o=t>0?this._scrolled.pipe((0,oe.e)(t)).subscribe(a):this._scrolled.subscribe(a);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Me.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,a)=>this.deregister(a)),this._scrolled.complete()}ancestorScrolled(t,a){const o=this.getAncestorScrollContainers(t);return this.scrolled(a).pipe((0,Pe.h)(r=>!r||o.indexOf(r)>-1))}getAncestorScrollContainers(t){const a=[];return this.scrollContainers.forEach((o,r)=>{this._scrollableContainsElement(r,t)&&a.push(r)}),a}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,a){let o=(0,v.fI)(a),r=t.getElementRef().nativeElement;do{if(o==r)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const t=this._getWindow();return(0,Ie.R)(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b),e.LFG(S.t4),e.LFG(_.K0,8))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),re=(()=>{class i{constructor(t,a,o){this._platform=t,this._change=new M.x,this._changeListener=r=>{this._change.next(r)},this._document=o,a.runOutsideAngular(()=>{if(t.isBrowser){const r=this._getWindow();r.addEventListener("resize",this._changeListener),r.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:a,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+a,height:o,width:a}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,a=this._getWindow(),o=t.documentElement,r=o.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||a.scrollY||o.scrollTop||0,left:-r.left||t.body.scrollLeft||a.scrollX||o.scrollLeft||0}}change(t=20){return t>0?this._change.pipe((0,oe.e)(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(S.t4),e.LFG(e.R0b),e.LFG(_.K0,8))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),se=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[Y.vT,$],Y.vT,$]}),i})();class K{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class Ye extends K{constructor(n,t,a,o){super(),this.component=n,this.viewContainerRef=t,this.injector=a,this.componentFactoryResolver=o}}class Qe extends K{constructor(n,t,a){super(),this.templateRef=n,this.viewContainerRef=t,this.context=a}get origin(){return this.templateRef.elementRef}attach(n,t=this.context){return this.context=t,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class Be extends K{constructor(n){super(),this.element=n instanceof e.SBq?n.nativeElement:n}}class He extends class Je{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof Ye?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof Qe?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof Be?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(n,t,a,o,r){super(),this.outletElement=n,this._componentFactoryResolver=t,this._appRef=a,this._defaultInjector=o,this.attachDomPortal=s=>{const l=s.element,c=this._document.createComment("dom-portal");l.parentNode.insertBefore(c,l),this.outletElement.appendChild(l),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(l,c)})},this._document=r}attachComponentPortal(n){const a=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let o;return n.viewContainerRef?(o=n.viewContainerRef.createComponent(a,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector),this.setDisposeFn(()=>o.destroy())):(o=a.create(n.injector||this._defaultInjector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(o)),this._attachedPortal=n,o}attachTemplatePortal(n){let t=n.viewContainerRef,a=t.createEmbeddedView(n.templateRef,n.context);return a.rootNodes.forEach(o=>this.outletElement.appendChild(o)),a.detectChanges(),this.setDisposeFn(()=>{let o=t.indexOf(a);-1!==o&&t.remove(o)}),this._attachedPortal=n,a}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let le=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})();var ze=p(6451),je=p(5698),Ge=p(2722);const de=(0,S.Mq)();class $e{constructor(n,t){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=(0,v.HM)(-this._previousScrollPosition.left),n.style.top=(0,v.HM)(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,a=n.style,o=this._document.body.style,r=a.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,a.left=this._previousHTMLStyles.left,a.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),de&&(a.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),de&&(a.scrollBehavior=r,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,a=this._viewportRuler.getViewportSize();return t.scrollHeight>a.height||t.scrollWidth>a.width}}class Ke{constructor(n,t,a,o){this._scrollDispatcher=n,this._ngZone=t,this._viewportRuler=a,this._config=o,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class ce{enable(){}disable(){}attach(){}}function W(i,n){return n.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function ue(i,n){return n.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class We{constructor(n,t,a,o){this._scrollDispatcher=n,this._viewportRuler=t,this._ngZone=a,this._config=o,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:a,height:o}=this._viewportRuler.getViewportSize();W(t,[{width:a,height:o,bottom:o,right:a,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Xe=(()=>{class i{constructor(t,a,o,r){this._scrollDispatcher=t,this._viewportRuler=a,this._ngZone=o,this.noop=()=>new ce,this.close=s=>new Ke(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new $e(this._viewportRuler,this._document),this.reposition=s=>new We(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=r}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Ue),e.LFG(re),e.LFG(e.R0b),e.LFG(_.K0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class et{constructor(n){if(this.scrollStrategy=new ce,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const t=Object.keys(n);for(const a of t)void 0!==n[a]&&(this[a]=n[a])}}}class tt{constructor(n,t){this.connectionPair=n,this.scrollableViewProperties=t}}let _e=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const a=this._attachedOverlays.indexOf(t);a>-1&&this._attachedOverlays.splice(a,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(_.K0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),it=(()=>{class i extends _e{constructor(t,a){super(t),this._ngZone=a,this._keydownListener=o=>{const r=this._attachedOverlays;for(let s=r.length-1;s>-1;s--)if(r[s]._keydownEvents.observers.length>0){const l=r[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(o)):l.next(o);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(_.K0),e.LFG(e.R0b,8))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),at=(()=>{class i extends _e{constructor(t,a,o){super(t),this._platform=a,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=r=>{this._pointerDownEventTarget=(0,S.sA)(r)},this._clickListener=r=>{const s=(0,S.sA)(r),l="click"===r.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let u=c.length-1;u>-1;u--){const m=c[u];if(m._outsidePointerEvents.observers.length<1||!m.hasAttached())continue;if(m.overlayElement.contains(s)||m.overlayElement.contains(l))break;const h=m._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(r)):h.next(r)}}}add(t){if(super.add(t),!this._isAttached){const a=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(a)):this._addEventListeners(a),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=a.style.cursor,a.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(_.K0),e.LFG(S.t4),e.LFG(e.R0b,8))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),pe=(()=>{class i{constructor(t,a){this._platform=a,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||(0,S.Oy)()){const o=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let r=0;r<o.length;r++)o[r].remove()}const a=this._document.createElement("div");a.classList.add(t),(0,S.Oy)()?a.setAttribute("platform","test"):this._platform.isBrowser||a.setAttribute("platform","server"),this._document.body.appendChild(a),this._containerElement=a}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(_.K0),e.LFG(S.t4))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class nt{constructor(n,t,a,o,r,s,l,c,u){this._portalOutlet=n,this._host=t,this._pane=a,this._config=o,this._ngZone=r,this._keyboardDispatcher=s,this._document=l,this._location=c,this._outsideClickDispatcher=u,this._backdropElement=null,this._backdropClick=new M.x,this._attachments=new M.x,this._detachments=new M.x,this._locationChanges=P.w0.EMPTY,this._backdropClickHandler=m=>this._backdropClick.next(m),this._keydownEvents=new M.x,this._outsidePointerEvents=new M.x,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){let t=this._portalOutlet.attach(n);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,je.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=(0,v.HM)(this._config.width),n.height=(0,v.HM)(this._config.height),n.minWidth=(0,v.HM)(this._config.minWidth),n.minHeight=(0,v.HM)(this._config.minHeight),n.maxWidth=(0,v.HM)(this._config.maxWidth),n.maxHeight=(0,v.HM)(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(!n)return;let t;const a=()=>{n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",a),this._disposeBackdrop(n)),this._config.backdropClass&&this._toggleClasses(n,this._config.backdropClass,!1),clearTimeout(t)};n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",a)}),n.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(a,500))}_toggleClasses(n,t,a){const o=(0,v.Eq)(t||[]).filter(r=>!!r);o.length&&(a?n.classList.add(...o):n.classList.remove(...o))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe((0,Ge.R)((0,ze.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.remove(),this._backdropElement===n&&(this._backdropElement=null))}}const me="cdk-overlay-connected-position-bounding-box",ot=/([A-Za-z%]+)$/;class rt{constructor(n,t,a,o,r){this._viewportRuler=t,this._document=a,this._platform=o,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new M.x,this._resizeSubscription=P.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}get positions(){return this._preferredPositions}attach(n){this._validatePositions(),n.hostElement.classList.add(me),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,t=this._overlayRect,a=this._viewportRect,o=this._containerRect,r=[];let s;for(let l of this._preferredPositions){let c=this._getOriginPoint(n,o,l),u=this._getOverlayPoint(c,t,l),m=this._getOverlayFit(u,t,a,l);if(m.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(l,c);this._canFitWithFlexibleDimensions(m,u,a)?r.push({position:l,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,l)}):(!s||s.overlayFit.visibleArea<m.visibleArea)&&(s={overlayFit:m,overlayPoint:u,originPoint:c,position:l,overlayRect:t})}if(r.length){let l=null,c=-1;for(const u of r){const m=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);m>c&&(c=m,l=u)}return this._isPushed=!1,void this._applyPosition(l.position,l.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&O(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(me),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,t)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,t,a){let o,r;if("center"==a.originX)o=n.left+n.width/2;else{const s=this._isRtl()?n.right:n.left,l=this._isRtl()?n.left:n.right;o="start"==a.originX?s:l}return t.left<0&&(o-=t.left),r="center"==a.originY?n.top+n.height/2:"top"==a.originY?n.top:n.bottom,t.top<0&&(r-=t.top),{x:o,y:r}}_getOverlayPoint(n,t,a){let o,r;return o="center"==a.overlayX?-t.width/2:"start"===a.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,r="center"==a.overlayY?-t.height/2:"top"==a.overlayY?0:-t.height,{x:n.x+o,y:n.y+r}}_getOverlayFit(n,t,a,o){const r=fe(t);let{x:s,y:l}=n,c=this._getOffset(o,"x"),u=this._getOffset(o,"y");c&&(s+=c),u&&(l+=u);let g=0-l,C=l+r.height-a.height,I=this._subtractOverflows(r.width,0-s,s+r.width-a.width),G=this._subtractOverflows(r.height,g,C),De=I*G;return{visibleArea:De,isCompletelyWithinViewport:r.width*r.height===De,fitsInViewportVertically:G===r.height,fitsInViewportHorizontally:I==r.width}}_canFitWithFlexibleDimensions(n,t,a){if(this._hasFlexibleDimensions){const o=a.bottom-t.y,r=a.right-t.x,s=he(this._overlayRef.getConfig().minHeight),l=he(this._overlayRef.getConfig().minWidth),u=n.fitsInViewportHorizontally||null!=l&&l<=r;return(n.fitsInViewportVertically||null!=s&&s<=o)&&u}return!1}_pushOverlayOnScreen(n,t,a){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const o=fe(t),r=this._viewportRect,s=Math.max(n.x+o.width-r.width,0),l=Math.max(n.y+o.height-r.height,0),c=Math.max(r.top-a.top-n.y,0),u=Math.max(r.left-a.left-n.x,0);let m=0,h=0;return m=o.width<=r.width?u||-s:n.x<this._viewportMargin?r.left-a.left-n.x:0,h=o.height<=r.height?c||-l:n.y<this._viewportMargin?r.top-a.top-n.y:0,this._previousPushAmount={x:m,y:h},{x:n.x+m,y:n.y+h}}_applyPosition(n,t){if(this._setTransformOrigin(n),this._setOverlayElementStyles(t,n),this._setBoundingBoxStyles(t,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const a=this._getScrollVisibility(),o=new tt(n,a);this._positionChanges.next(o)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let a,o=n.overlayY;a="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let r=0;r<t.length;r++)t[r].style.transformOrigin=`${a} ${o}`}_calculateBoundingBoxRect(n,t){const a=this._viewportRect,o=this._isRtl();let r,s,l,m,h,g;if("top"===t.overlayY)s=n.y,r=a.height-s+this._viewportMargin;else if("bottom"===t.overlayY)l=a.height-n.y+2*this._viewportMargin,r=a.height-l+this._viewportMargin;else{const C=Math.min(a.bottom-n.y+a.top,n.y),I=this._lastBoundingBoxSize.height;r=2*C,s=n.y-C,r>I&&!this._isInitialRender&&!this._growAfterOpen&&(s=n.y-I/2)}if("end"===t.overlayX&&!o||"start"===t.overlayX&&o)g=a.width-n.x+this._viewportMargin,m=n.x-this._viewportMargin;else if("start"===t.overlayX&&!o||"end"===t.overlayX&&o)h=n.x,m=a.right-n.x;else{const C=Math.min(a.right-n.x+a.left,n.x),I=this._lastBoundingBoxSize.width;m=2*C,h=n.x-C,m>I&&!this._isInitialRender&&!this._growAfterOpen&&(h=n.x-I/2)}return{top:s,left:h,bottom:l,right:g,width:m,height:r}}_setBoundingBoxStyles(n,t){const a=this._calculateBoundingBoxRect(n,t);!this._isInitialRender&&!this._growAfterOpen&&(a.height=Math.min(a.height,this._lastBoundingBoxSize.height),a.width=Math.min(a.width,this._lastBoundingBoxSize.width));const o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{const r=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=(0,v.HM)(a.height),o.top=(0,v.HM)(a.top),o.bottom=(0,v.HM)(a.bottom),o.width=(0,v.HM)(a.width),o.left=(0,v.HM)(a.left),o.right=(0,v.HM)(a.right),o.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",o.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",r&&(o.maxHeight=(0,v.HM)(r)),s&&(o.maxWidth=(0,v.HM)(s))}this._lastBoundingBoxSize=a,O(this._boundingBox.style,o)}_resetBoundingBoxStyles(){O(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){O(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,t){const a={},o=this._hasExactPosition(),r=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){const m=this._viewportRuler.getViewportScrollPosition();O(a,this._getExactOverlayY(t,n,m)),O(a,this._getExactOverlayX(t,n,m))}else a.position="static";let l="",c=this._getOffset(t,"x"),u=this._getOffset(t,"y");c&&(l+=`translateX(${c}px) `),u&&(l+=`translateY(${u}px)`),a.transform=l.trim(),s.maxHeight&&(o?a.maxHeight=(0,v.HM)(s.maxHeight):r&&(a.maxHeight="")),s.maxWidth&&(o?a.maxWidth=(0,v.HM)(s.maxWidth):r&&(a.maxWidth="")),O(this._pane.style,a)}_getExactOverlayY(n,t,a){let o={top:"",bottom:""},r=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,a)),"bottom"===n.overlayY?o.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":o.top=(0,v.HM)(r.y),o}_getExactOverlayX(n,t,a){let s,o={left:"",right:""},r=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,a)),s=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===s?o.right=this._document.documentElement.clientWidth-(r.x+this._overlayRect.width)+"px":o.left=(0,v.HM)(r.x),o}_getScrollVisibility(){const n=this._getOriginRect(),t=this._pane.getBoundingClientRect(),a=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ue(n,a),isOriginOutsideView:W(n,a),isOverlayClipped:ue(t,a),isOverlayOutsideView:W(t,a)}}_subtractOverflows(n,...t){return t.reduce((a,o)=>a-Math.max(o,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,a=this._viewportRuler.getViewportScrollPosition();return{top:a.top+this._viewportMargin,left:a.left+this._viewportMargin,right:a.left+n-this._viewportMargin,bottom:a.top+t-this._viewportMargin,width:n-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,t){return"x"===t?n.offsetX??this._offsetX:n.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&(0,v.Eq)(n).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof e.SBq)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const t=n.width||0,a=n.height||0;return{top:n.y,bottom:n.y+a,left:n.x,right:n.x+t,height:a,width:t}}}function O(i,n){for(let t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}function he(i){if("number"!=typeof i&&null!=i){const[n,t]=i.split(ot);return t&&"px"!==t?null:parseFloat(n)}return i||null}function fe(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const ge="cdk-global-overlay-wrapper";class st{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(n){const t=n.getConfig();this._overlayRef=n,this._width&&!t.width&&n.updateSize({width:this._width}),this._height&&!t.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(ge),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._rightOffset="",this._leftOffset=n,this._justifyContent="flex-start",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._leftOffset="",this._rightOffset=n,this._justifyContent="flex-end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._justifyContent="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,a=this._overlayRef.getConfig(),{width:o,height:r,maxWidth:s,maxHeight:l}=a,c=!("100%"!==o&&"100vw"!==o||s&&"100%"!==s&&"100vw"!==s),u=!("100%"!==r&&"100vh"!==r||l&&"100%"!==l&&"100vh"!==l);n.position=this._cssPosition,n.marginLeft=c?"0":this._leftOffset,n.marginTop=u?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=this._rightOffset,c?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,a=t.style;t.classList.remove(ge),a.justifyContent=a.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let lt=(()=>{class i{constructor(t,a,o,r){this._viewportRuler=t,this._document=a,this._platform=o,this._overlayContainer=r}global(){return new st}flexibleConnectedTo(t){return new rt(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(re),e.LFG(_.K0),e.LFG(S.t4),e.LFG(pe))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),dt=0,X=(()=>{class i{constructor(t,a,o,r,s,l,c,u,m,h,g){this.scrollStrategies=t,this._overlayContainer=a,this._componentFactoryResolver=o,this._positionBuilder=r,this._keyboardDispatcher=s,this._injector=l,this._ngZone=c,this._document=u,this._directionality=m,this._location=h,this._outsideClickDispatcher=g}create(t){const a=this._createHostElement(),o=this._createPaneElement(a),r=this._createPortalOutlet(o),s=new et(t);return s.direction=s.direction||this._directionality.value,new nt(r,a,o,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const a=this._document.createElement("div");return a.id="cdk-overlay-"+dt++,a.classList.add("cdk-overlay-pane"),t.appendChild(a),a}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(e.z2F)),new He(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Xe),e.LFG(pe),e.LFG(e._Vd),e.LFG(lt),e.LFG(it),e.LFG(e.zs3),e.LFG(e.R0b),e.LFG(_.K0),e.LFG(Y.Is),e.LFG(_.Ye),e.LFG(at))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const _t={provide:new e.OlP("cdk-connected-overlay-scroll-strategy"),deps:[X],useFactory:function ut(i){return()=>i.scrollStrategies.reposition()}};let pt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[X,_t],imports:[[Y.vT,le,se],se]}),i})();var y=p(3238);let mt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[y.si,y.BQ],y.BQ]}),i})();p(9521),p(7340);var ft=p(9643);let ee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[_.ez,y.BQ,ft.Q8],y.BQ]}),i})(),ve=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),At=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[y.rD],imports:[[ve,ee,y.BQ],ve,ee]}),i})(),Dt=(()=>{class i{constructor(){this.changes=new M.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(t,a){return`${t} \u2013 ${a}`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ot={provide:new e.OlP("mat-datepicker-scroll-strategy"),deps:[X],useFactory:function Lt(i){return()=>i.scrollStrategies.reposition()}};let Vt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Dt,Ot],imports:[[_.ez,mt,pt,ke.rt,le,y.BQ],$]}),i})();var x=p(9132);let Yt=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-campaign"]],decls:5,vars:0,consts:[["id","kt_app_main",1,"app-main","flex-column","flex-row-fluid"],[1,"d-flex","flex-column","flex-column-fluid"],["id","kt_app_content",1,"app-content","flex-column-fluid"],["src","./assets/campaign1.png","alt","","width","100%"],["src","./assets/campaign2.png","alt","","width","100%"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3)(4,"img",4),e.qZA()()())}}),i})();var A=p(5861),D=p(574),Ce=p(3970),b=p(3905),Z=p(9458),k=p(3165),te=p(4916),q=p(466),U=p(8361),ie=p(4383);const Qt=["dangerTpl"];function Bt(i,n){1&i&&(e.TgZ(0,"div",5),e._UZ(1,"img",6),e.qZA())}function Jt(i,n){if(1&i&&(e.TgZ(0,"h2"),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" Detalles del Pedido (#",t.id,") ")}}function Ht(i,n){1&i&&(e.TgZ(0,"p",70),e._uU(1," sin datos "),e.qZA())}function zt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td",64)(2,"div",65)(3,"span",66),e.O4$(),e.TgZ(4,"svg",67),e._UZ(5,"path",68)(6,"path",69),e.qZA()(),e._uU(7,"Fecha de Venta "),e.qZA()(),e.kcU(),e.TgZ(8,"td",70),e._uU(9),e.ALo(10,"date"),e.YNc(11,Ht,2,0,"p",71),e.qZA()()),2&i){const t=n.$implicit;e.xp6(9),e.hij(" ",e.xi3(10,2,t.dt_fecha,"dd/MM/yyyy")," "),e.xp6(2),e.Q6J("ngIf",!t.dt_fecha)}}function jt(i,n){1&i&&(e.TgZ(0,"p",70),e._uU(1," sin datos "),e.qZA())}function Gt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td",64)(2,"div",65)(3,"span",66),e.O4$(),e.TgZ(4,"svg",27),e._UZ(5,"path",72)(6,"path",73)(7,"path",74),e.qZA()(),e._uU(8,"M\xe9todo de Pago "),e.qZA()(),e.kcU(),e.TgZ(9,"td",70),e._uU(10),e.YNc(11,jt,2,0,"p",71),e.qZA()()),2&i){const t=n.$implicit;e.xp6(10),e.hij(" ",null==t.tbl_mediopago?null:t.tbl_mediopago.nombre," "),e.xp6(1),e.Q6J("ngIf",!(null!=t.tbl_mediopago&&t.tbl_mediopago.nombre))}}function $t(i,n){1&i&&(e.TgZ(0,"p",70),e._uU(1," sin datos "),e.qZA())}function Kt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td",64)(2,"div",65)(3,"span",66),e.O4$(),e.TgZ(4,"svg",27),e._UZ(5,"path",75)(6,"path",76),e.qZA()(),e._uU(7,"M\xe9todo de Env\xedo "),e.qZA()(),e.kcU(),e.TgZ(8,"td",70),e._uU(9),e.YNc(10,$t,2,0,"p",71),e.qZA()()),2&i){const t=n.$implicit;e.xp6(9),e.hij(" ",null==t.tbl_envio?null:t.tbl_envio.vch_nombre," "),e.xp6(1),e.Q6J("ngIf",!(null!=t.tbl_envio&&t.tbl_envio.vch_nombre))}}function Wt(i,n){if(1&i&&(e.TgZ(0,"tbody",38)(1,"tr")(2,"td",64)(3,"div",65)(4,"span",66),e.O4$(),e.TgZ(5,"svg",77),e._UZ(6,"path",78)(7,"path",79)(8,"rect",80),e.qZA()(),e._uU(9,"Cliente "),e.qZA()(),e.kcU(),e.TgZ(10,"td",70),e._uU(11),e.qZA()(),e.TgZ(12,"tr")(13,"td",64)(14,"div",65)(15,"span",66),e.O4$(),e.TgZ(16,"svg",27),e._UZ(17,"path",81)(18,"path",82),e.qZA()(),e._uU(19,"Rut "),e.qZA()(),e.kcU(),e.TgZ(20,"td",70),e._uU(21),e.qZA()(),e.TgZ(22,"tr")(23,"td",64)(24,"div",65)(25,"span",66),e.O4$(),e.TgZ(26,"svg",27),e._UZ(27,"path",83)(28,"path",84),e.qZA()(),e._uU(29,"Correo "),e.qZA()(),e.kcU(),e.TgZ(30,"td",70),e._uU(31),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(11),e.hij(" ",(null==t.tbl_cliente?null:t.tbl_cliente.vch_nombre)||"Sin datos"," "),e.xp6(10),e.hij(" ",(null==t.tbl_cliente?null:t.tbl_cliente.vch_rut)||"Sin datos"," "),e.xp6(10),e.hij(" ",(null==t.tbl_cliente?null:t.tbl_cliente.vch_correo)||"Sin datos"," ")}}function Xt(i,n){1&i&&(e.TgZ(0,"p",70),e._uU(1," sin datos "),e.qZA())}function ei(i,n){1&i&&(e.TgZ(0,"p",70),e._uU(1," sin datos "),e.qZA())}function ti(i,n){1&i&&(e.TgZ(0,"p",70),e._uU(1," sin datos "),e.qZA())}function ii(i,n){if(1&i&&(e.TgZ(0,"tbody",38)(1,"tr")(2,"td",64)(3,"div",65)(4,"span",66),e.O4$(),e.TgZ(5,"svg",27),e._UZ(6,"path",86)(7,"path",87)(8,"path",88),e.qZA()(),e._uU(9,"Raz\xf3n Social "),e.qZA()(),e.kcU(),e.TgZ(10,"td",70),e._uU(11),e.YNc(12,Xt,2,0,"p",71),e.qZA()(),e.TgZ(13,"tr")(14,"td",64)(15,"div",65)(16,"span",66),e.O4$(),e.TgZ(17,"svg",27),e._UZ(18,"path",81)(19,"path",82),e.qZA()(),e._uU(20,"Rut "),e.qZA()(),e.kcU(),e.TgZ(21,"td",70),e._uU(22),e.YNc(23,ei,2,0,"p",71),e.qZA()(),e.TgZ(24,"tr")(25,"td",64)(26,"div",65)(27,"span",66),e.O4$(),e.TgZ(28,"svg",27),e._UZ(29,"path",89)(30,"path",90),e.qZA()(),e._uU(31,"Giro "),e.qZA()(),e.kcU(),e.TgZ(32,"td",70),e._uU(33),e.YNc(34,ti,2,0,"p",71),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(11),e.hij(" ",null==t.tbl_empresa_comprador?null:t.tbl_empresa_comprador.vch_razon_social," "),e.xp6(1),e.Q6J("ngIf",!(null!=t.tbl_empresa_comprador&&t.tbl_empresa_comprador.vch_razon_social)),e.xp6(10),e.hij(" ",null==t.tbl_empresa_comprador?null:t.tbl_empresa_comprador.vch_rut," "),e.xp6(1),e.Q6J("ngIf",!(null!=t.tbl_empresa_comprador&&t.tbl_empresa_comprador.vch_rut)),e.xp6(10),e.hij(" ",null==t.tbl_empresa_comprador?null:t.tbl_empresa_comprador.vch_giro," "),e.xp6(1),e.Q6J("ngIf",!(null!=t.tbl_empresa_comprador&&t.tbl_empresa_comprador.vch_giro))}}function ai(i,n){if(1&i&&(e.TgZ(0,"div",31)(1,"div",32)(2,"div",33)(3,"h2"),e._uU(4,"Detalles de Empresa"),e.qZA()()(),e.TgZ(5,"div",35)(6,"div",36)(7,"table",37),e.YNc(8,ii,35,6,"tbody",39),e.qZA()()()()),2&i){const t=e.oxw(3);e.xp6(8),e.Q6J("ngForOf",t.ventas)}}function ni(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ai,9,1,"div",85),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",t.tbl_empresa_comprador)}}function oi(i,n){1&i&&(e.TgZ(0,"p"),e._uU(1,"sin datos"),e.qZA())}function ri(i,n){if(1&i&&(e.TgZ(0,"div",91),e._uU(1),e.YNc(2,oi,2,0,"p",92),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",null==t.tbl_direccion?null:t.tbl_direccion.vch_nombre," "),e.xp6(1),e.Q6J("ngIf",!(null!=t.tbl_direccion&&t.tbl_direccion.vch_nombre))}}function si(i,n){1&i&&(e.TgZ(0,"p"),e._uU(1,"sin datos"),e.qZA())}function li(i,n){if(1&i&&(e.TgZ(0,"div",91),e._uU(1),e.YNc(2,si,2,0,"p",92),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",t.vch_detalleenvio," "),e.xp6(1),e.Q6J("ngIf",!t.vch_detalleenvio)}}function di(i,n){if(1&i&&(e.TgZ(0,"div",93)(1,"div",94)(2,"h5")(3,"a",95),e._uU(4," Ver tracking "),e.qZA()()(),e.TgZ(5,"h5"),e._uU(6," Estado del envio: "),e.TgZ(7,"span",50),e._uU(8),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("href",t.detalles[0].vch_urlenviame,e.LSH),e.xp6(4),e.Q6J("ngClass",t.isPositive?"badge-light-success":"badge-light-danger"),e.xp6(1),e.hij(" ",t.detalleEnvioEnviame," ")}}function ci(i,n){1&i&&(e.TgZ(0,"h5"),e._uU(1,"No hay tracking disponible"),e.qZA())}function ui(i,n){if(1&i&&(e.TgZ(0,"option",102),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function _i(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",96),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"h5"),e._uU(2,"Cambiar estado de la venta"),e.qZA(),e.TgZ(3,"div",97)(4,"div",98)(5,"select",99),e.YNc(6,ui,2,2,"option",100),e.qZA()()(),e._UZ(7,"input",101),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.myGroup),e.xp6(6),e.Q6J("ngForOf",t.estadoVentasComplejo),e.xp6(1),e.Q6J("disabled",t.myGroup.invalid)}}function pi(i,n){if(1&i&&(e.TgZ(0,"option",102),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function mi(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",96),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSubmit())}),e.TgZ(1,"h5"),e._uU(2,"Cambiar estado de la venta"),e.qZA(),e.TgZ(3,"div",97)(4,"div",98)(5,"select",99),e.YNc(6,pi,2,2,"option",100),e.qZA()()(),e._UZ(7,"input",101),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.myGroup),e.xp6(6),e.Q6J("ngForOf",t.estadoVentasAprobadaFallida),e.xp6(1),e.Q6J("disabled",t.myGroup.invalid)}}function hi(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"option",102),e._uU(2),e.qZA(),e.BQk()),2&i){const t=n.$implicit;e.xp6(1),e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function fi(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"option",102),e._uU(2),e.qZA(),e.BQk()),2&i){const t=n.$implicit;e.xp6(1),e.s9C("value",t.id),e.xp6(1),e.hij(" ","free"==t.vch_type?t.vch_name+" free":t.vch_name," ")}}function gi(i,n){if(1&i&&(e.TgZ(0,"select",116)(1,"option",104),e._uU(2," Seleccionar courrier "),e.qZA(),e.YNc(3,fi,3,2,"ng-container",34),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.Q6J("ngForOf",t.courriers)}}function vi(i,n){1&i&&(e.TgZ(0,"div",97)(1,"div",117),e._UZ(2,"input",118),e.qZA()())}function bi(i,n){1&i&&(e.TgZ(0,"div",119)(1,"div"),e._uU(2,"No hay datos para mostrar"),e.qZA()())}function xi(i,n){1&i&&(e.TgZ(0,"th",126),e._uU(1,"Courrier"),e.qZA())}function yi(i,n){1&i&&(e.TgZ(0,"th",126),e._uU(1,"Orden de transporte"),e.qZA())}function Ci(i,n){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,a=e.oxw(5);e.xp6(1),e.hij(" ",a.detailsOrderStatus[t].tbl_courrier?a.detailsOrderStatus[t].tbl_courrier.vch_name:"Sin Courrier"," ")}}function Ai(i,n){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,a=e.oxw(5);e.xp6(1),e.hij(" ",a.detailsOrderStatus[t].vch_ot||"Ninguna"," ")}}function wi(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"div",123),e._UZ(3,"input",129),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"span",50),e._uU(10),e.qZA()(),e.YNc(11,Ci,2,1,"td",92),e.YNc(12,Ai,2,1,"td",92),e.TgZ(13,"td"),e._uU(14),e.qZA()()),2&i){const t=n.index,a=e.oxw(5);e.xp6(3),e.Q6J("formControlName",t),e.xp6(2),e.hij(" ",a.detailsOrderStatus[t].tbl_productos[0].vch_nombre," "),e.xp6(2),e.hij(" ",a.detailsOrderStatus[t].tbl_productos[0].vch_sku," "),e.xp6(2),e.Q6J("ngClass",a.detailsOrderStatus[t].tbl_estadopedido&&a.detailsOrderStatus[t].tbl_estadopedido.bit_colorpositivo?"badge-light-success":"badge-light-danger"),e.xp6(1),e.hij(" ",a.detailsOrderStatus[t].tbl_estadopedido?a.detailsOrderStatus[t].tbl_estadopedido.vch_nombre:"Sin estado"," "),e.xp6(1),e.Q6J("ngIf","Retiro en local"!=a.tipoEnvioName),e.xp6(1),e.Q6J("ngIf","Retiro en local"!=a.tipoEnvioName),e.xp6(2),e.hij(" ",a.detailsOrderStatus[t].vch_fechaestadoenv||"Ninguna"," ")}}function Ti(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"table",120)(1,"thead")(2,"tr",121)(3,"th",122)(4,"div",123)(5,"input",124),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.selectAllButton())}),e.qZA()()(),e.TgZ(6,"th",125),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"th",56),e._uU(9,"SKU"),e.qZA(),e.TgZ(10,"th",126),e._uU(11,"Estado actual"),e.qZA(),e.YNc(12,xi,2,0,"th",127),e.YNc(13,yi,2,0,"th",127),e.TgZ(14,"th",126),e._uU(15,"Ultima actualizaci\xf3n"),e.qZA()()(),e.TgZ(16,"tbody",128),e.YNc(17,wi,15,8,"tr",34),e.qZA()()}if(2&i){const t=e.oxw(4);e.Q6J("formGroup",t.productsFormGroup),e.xp6(12),e.Q6J("ngIf","Retiro en local"!=t.tipoEnvioName),e.xp6(1),e.Q6J("ngIf","Retiro en local"!=t.tipoEnvioName),e.xp6(4),e.Q6J("ngForOf",t.selectedArr.controls)}}const Di=function(i){return{"animate__fadeOutDown ocult_modal":i}};function Zi(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",96),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onSubmitEstadoPedido())}),e.TgZ(1,"div",97)(2,"div",98)(3,"select",103)(4,"option",104),e._uU(5," Seleccionar estado "),e.qZA(),e.YNc(6,hi,3,2,"ng-container",34),e.qZA()(),e.TgZ(7,"div",98),e.YNc(8,gi,4,1,"select",105),e.qZA()(),e.YNc(9,vi,3,0,"div",106),e.TgZ(10,"div",107),e.YNc(11,bi,3,0,"div",108),e.YNc(12,Ti,18,4,"table",109),e.qZA(),e.TgZ(13,"div",110)(14,"div")(15,"strong"),e._uU(16,"Notas: "),e.qZA(),e.TgZ(17,"ul")(18,"li")(19,"small"),e._uU(20,"Debe seleccionar al menos un producto y modificar alguno de los campos para poder realizar un cambio."),e.qZA()()()()(),e.TgZ(21,"div",111)(22,"button",112),e._UZ(23,"span",113),e.TgZ(24,"span",114),e._uU(25,"Guardando..."),e.qZA(),e.TgZ(26,"span",115),e._uU(27,"Guardar cambios"),e.qZA()()()()}if(2&i){const t=e.oxw(3);e.Q6J("formGroup",t.estadoPedidoGroup),e.xp6(6),e.Q6J("ngForOf",t.estadoPedidoAll),e.xp6(2),e.Q6J("ngIf","Retiro en local"!=t.tipoEnvioName),e.xp6(1),e.Q6J("ngIf","Retiro en local"!=t.tipoEnvioName),e.xp6(2),e.Q6J("ngIf",!t.detailsOrderStatus||0==t.detailsOrderStatus.length),e.xp6(1),e.Q6J("ngIf",t.detailsOrderStatus&&t.detailsOrderStatus.length>0),e.xp6(1),e.Q6J("ngClass",e.VKq(11,Di,!t.isButtonDisabled)),e.xp6(9),e.Q6J("disabled",t.isButtonDisabled),e.xp6(1),e.Q6J("hidden",!t.updateButtonLoader),e.xp6(1),e.Q6J("hidden",!t.updateButtonLoader),e.xp6(2),e.Q6J("hidden",t.updateButtonLoader)}}function ki(i,n){if(1&i&&(e.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"div",33)(4,"h2"),e._uU(5),e.qZA()()(),e.TgZ(6,"div",35)(7,"div",33),e.YNc(8,Zi,28,13,"form",51),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.detailsOrderStatus.length>1?"Actualizar estados de pedidos":"Actualizar estado del pedido"),e.xp6(3),e.Q6J("ngIf",t.estadoPedidoAll.length>0)}}function Mi(i,n){if(1&i&&(e.TgZ(0,"div",33)(1,"h2"),e._uU(2),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.hij("Pedido #",t.id,"")}}function Si(i,n){1&i&&(e.TgZ(0,"span",136),e._uU(1,"Preventa"),e.qZA())}function Ii(i,n){1&i&&(e.TgZ(0,"span",136),e._uU(1,"A Pedido"),e.qZA())}function Ei(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td",130)(2,"span"),e._uU(3),e.qZA(),e.YNc(4,Si,2,0,"span",131),e.YNc(5,Ii,2,0,"span",131),e.qZA(),e.TgZ(6,"td")(7,"div",132)(8,"div",133),e._uU(9),e.qZA()()(),e.TgZ(10,"td",134),e._uU(11),e.ALo(12,"numberFormat"),e.qZA(),e.TgZ(13,"td",134),e._uU(14),e.ALo(15,"numberFormat"),e.qZA(),e.TgZ(16,"td",134),e._uU(17),e.ALo(18,"numberFormat"),e.qZA(),e.TgZ(19,"td",134),e._uU(20),e.ALo(21,"numberFormat"),e.qZA(),e.TgZ(22,"td",135),e._uU(23),e.qZA(),e.TgZ(24,"td",134),e._uU(25),e.ALo(26,"numberFormat"),e.qZA(),e.TgZ(27,"td",134),e._uU(28),e.ALo(29,"numberFormat"),e.qZA(),e.TgZ(30,"td",134),e._uU(31),e.ALo(32,"numberFormat"),e.qZA()()),2&i){const t=n.$implicit;e.xp6(3),e.Oqu(t.vch_sku),e.xp6(1),e.Q6J("ngIf",t.bit_preventa),e.xp6(1),e.Q6J("ngIf",t.bit_apedido),e.xp6(4),e.hij(" ",t.vch_nombre," "),e.xp6(2),e.hij(" ",e.lcZ(12,12,t.db_monto)," "),e.xp6(3),e.hij(" ",e.lcZ(15,14,t.db_montoreserva)," "),e.xp6(3),e.hij(" ",e.lcZ(18,16,t.db_instalacion||0)," "),e.xp6(3),e.hij(" ",e.lcZ(21,18,t.db_envio||0)," "),e.xp6(3),e.Oqu(t.int_cantidad),e.xp6(2),e.hij(" ",e.lcZ(26,20,t.TotalPagado)," "),e.xp6(3),e.hij(" ",e.lcZ(29,22,t.porPagar)," "),e.xp6(3),e.hij(" ",e.lcZ(32,24,t.TotalPagado+t.porPagar)," ")}}function Fi(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td",137),e._uU(2," Total: "),e.qZA(),e.TgZ(3,"td",138),e._uU(4),e.ALo(5,"numberFormat"),e.qZA(),e.TgZ(6,"td",138),e._uU(7),e.ALo(8,"numberFormat"),e.qZA(),e.TgZ(9,"td",138),e._uU(10),e.ALo(11,"numberFormat"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,3,t.totalPagado)," "),e.xp6(3),e.hij(" ",e.lcZ(8,5,t.totalaPagar)," "),e.xp6(3),e.hij(" ",e.lcZ(11,7,t.subtotal)," ")}}function qi(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",139),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.toggleEditData())}),e._uU(1,"Editar"),e.qZA()}}function Li(i,n){1&i&&(e.TgZ(0,"small",158),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function Oi(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Li,2,0,"small",157),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.salesNote.errors?null:t.formSale.controls.salesNote.errors.maxlength)}}function Ri(i,n){1&i&&(e.TgZ(0,"small",158),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function Pi(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Ri,2,0,"small",157),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.purchaseOrder.errors?null:t.formSale.controls.purchaseOrder.errors.maxlength)}}function Ni(i,n){1&i&&(e.TgZ(0,"small",158),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function Ui(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Ni,2,0,"small",157),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.obsPaymentMethod.errors?null:t.formSale.controls.obsPaymentMethod.errors.maxlength)}}function Vi(i,n){1&i&&(e.TgZ(0,"small",158),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function Yi(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Vi,2,0,"small",157),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.billNumber.errors?null:t.formSale.controls.billNumber.errors.maxlength)}}function Qi(i,n){1&i&&(e.TgZ(0,"small",158),e._uU(1," M\xe1x 300 caracteres "),e.qZA())}function Bi(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Qi,2,0,"small",157),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.comment.errors?null:t.formSale.controls.comment.errors.maxlength)}}function Ji(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",140),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.submitUpdateSale())}),e.TgZ(1,"div",141)(2,"div",142)(3,"label",143),e._uU(4,"Nota de venta"),e.qZA(),e._UZ(5,"input",144),e.YNc(6,Oi,2,1,"ng-container",92),e.qZA(),e.TgZ(7,"div",142)(8,"label",143),e._uU(9,"Orden de compra"),e.qZA(),e._UZ(10,"input",145),e.YNc(11,Pi,2,1,"ng-container",92),e.qZA()(),e.TgZ(12,"div",141)(13,"div",142)(14,"label",143),e._uU(15,"Observaci\xf3n forma de pago"),e.qZA(),e._UZ(16,"input",146),e.YNc(17,Ui,2,1,"ng-container",92),e.qZA(),e.TgZ(18,"div",142)(19,"label",143),e._uU(20,"N\xfamero de factura"),e.qZA(),e._UZ(21,"input",147),e.YNc(22,Yi,2,1,"ng-container",92),e.qZA()(),e.TgZ(23,"div",97)(24,"div",148)(25,"div",149)(26,"label",150),e._uU(27,"Venta asistida"),e.qZA(),e._UZ(28,"input",151),e.qZA()()(),e.TgZ(29,"div",152)(30,"div",98)(31,"label",143),e._uU(32,"Comentarios"),e.qZA(),e._UZ(33,"textarea",153),e.YNc(34,Bi,2,1,"ng-container",92),e.qZA()(),e.TgZ(35,"div",97)(36,"button",154),e._UZ(37,"span",155),e.TgZ(38,"span",156),e._uU(39,"Guardando..."),e.qZA(),e.TgZ(40,"span",115),e._uU(41,"Guardar"),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.Q6J("formGroup",t.formSale),e.xp6(5),e.ekj("is-invalid",t.salesNoteInvalid),e.xp6(1),e.Q6J("ngIf",t.salesNoteInvalid),e.xp6(4),e.ekj("is-invalid",t.purchaseOrderInvalid),e.xp6(1),e.Q6J("ngIf",t.purchaseOrderInvalid),e.xp6(5),e.ekj("is-invalid",t.obsPaymentMethodInvalid),e.xp6(1),e.Q6J("ngIf",t.obsPaymentMethodInvalid),e.xp6(4),e.ekj("is-invalid",t.billNumberInvalid),e.xp6(1),e.Q6J("ngIf",t.billNumberInvalid),e.xp6(11),e.ekj("is-invalid",t.commentInvalid),e.xp6(1),e.Q6J("ngIf",t.commentInvalid),e.xp6(3),e.Q6J("hidden",!t.loadingEditButton),e.xp6(1),e.Q6J("hidden",!t.loadingEditButton),e.xp6(2),e.Q6J("hidden",t.loadingEditButton)}}function Hi(i,n){if(1&i&&(e.TgZ(0,"tbody",38)(1,"tr")(2,"td",65),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(3),e.hij(" ",t.vch_salesnote||"Ninguna"," "),e.xp6(2),e.hij(" ",t.vch_purchaseorder||"Ninguna"," "),e.xp6(2),e.hij(" ",t.vch_billnumber||"Ninguna"," "),e.xp6(2),e.hij(" ",t.bit_assistedsale?"Si":"No"," "),e.xp6(2),e.hij(" ",t.vch_obspaymentmethod||"Ninguna"," "),e.xp6(2),e.hij(" ",t.vch_comentarios||"Ninguno"," ")}}function zi(i,n){if(1&i&&(e.TgZ(0,"div",36)(1,"table",54)(2,"thead")(3,"tr",55)(4,"th",56),e._uU(5,"Nota de venta"),e.qZA(),e.TgZ(6,"th",57),e._uU(7,"Orden de compra"),e.qZA(),e.TgZ(8,"th",159),e._uU(9,"N\xfamero de factura"),e.qZA(),e.TgZ(10,"th",159),e._uU(11,"Venta asistida"),e.qZA(),e.TgZ(12,"th",56),e._uU(13,"Obs m\xe9todo de pago"),e.qZA(),e.TgZ(14,"th",56),e._uU(15,"Comentarios"),e.qZA()()(),e.YNc(16,Hi,14,6,"tbody",39),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(16),e.Q6J("ngForOf",t.ventas)}}const ji=function(){return["/sales/list"]};function Gi(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"h1",11),e._uU(5," Detalles del Pedido "),e.qZA(),e.TgZ(6,"ul",12)(7,"li",13),e._uU(8,"Home"),e.qZA(),e.TgZ(9,"li",14),e._UZ(10,"span",15),e.qZA(),e.TgZ(11,"li",13),e._uU(12,"eCommerce"),e.qZA(),e.TgZ(13,"li",14),e._UZ(14,"span",15),e.qZA(),e.TgZ(15,"li",13),e._uU(16,"Ventas"),e.qZA()()(),e.TgZ(17,"div",16)(18,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.exportToExcel())}),e._uU(19," Exportar a Excel "),e.qZA()()()(),e.TgZ(20,"div",18)(21,"div",19)(22,"div",20)(23,"div",21)(24,"ul",22)(25,"li",23)(26,"a",24),e._uU(27,"Resumen del Pedido"),e.qZA()()(),e.TgZ(28,"a",25)(29,"span",26),e.O4$(),e.TgZ(30,"svg",27),e._UZ(31,"rect",28)(32,"path",29),e.qZA()()()(),e.kcU(),e.TgZ(33,"div",30)(34,"div",31)(35,"div",32)(36,"div",33),e.YNc(37,Jt,2,1,"h2",34),e.qZA()(),e.TgZ(38,"div",35)(39,"div",36)(40,"table",37)(41,"tbody",38),e.YNc(42,zt,12,5,"tr",34),e.YNc(43,Gt,12,2,"tr",34),e.YNc(44,Kt,11,2,"tr",34),e.qZA()()()()(),e.TgZ(45,"div",31)(46,"div",32)(47,"div",33)(48,"h2"),e._uU(49,"Detalles del Cliente"),e.qZA()()(),e.TgZ(50,"div",35)(51,"div",36)(52,"table",37),e.YNc(53,Wt,32,3,"tbody",39),e.qZA()()()(),e.YNc(54,ni,2,1,"div",34),e.qZA(),e.TgZ(55,"div",40)(56,"div",41)(57,"div",20)(58,"div",30)(59,"div",42)(60,"div",43),e._UZ(61,"img",44),e.qZA(),e.TgZ(62,"div",32)(63,"div",33)(64,"h2"),e._uU(65,"Direcci\xf3n de Factura"),e.qZA()()(),e.YNc(66,ri,3,2,"div",45),e.qZA(),e.TgZ(67,"div",42)(68,"div",43),e._UZ(69,"img",46),e.qZA(),e.TgZ(70,"div",32)(71,"div",33)(72,"h2"),e._uU(73,"Direcci\xf3n de Env\xedo"),e.qZA()()(),e.YNc(74,li,3,2,"div",45),e.qZA()(),e.TgZ(75,"div",30)(76,"div",31)(77,"div",32)(78,"div",33)(79,"h2"),e._uU(80,"Tracking"),e.qZA()()(),e.TgZ(81,"div",35),e.YNc(82,di,9,3,"div",47),e.YNc(83,ci,2,0,"ng-template",null,48,e.W1O),e.qZA()(),e.TgZ(85,"div",31)(86,"div",32)(87,"div",33)(88,"h2"),e._uU(89,"Estados de venta"),e.qZA()()(),e.TgZ(90,"div",35)(91,"div",33)(92,"h4",49),e._uU(93," Estado actual de la venta: "),e.TgZ(94,"span",50),e._uU(95),e.qZA()(),e.YNc(96,_i,8,3,"form",51),e.YNc(97,mi,8,3,"form",51),e.qZA()()()(),e.YNc(98,ki,9,2,"div",52),e.TgZ(99,"div",42)(100,"div",32),e.YNc(101,Mi,3,1,"div",53),e.qZA(),e.TgZ(102,"div",35)(103,"div",36)(104,"table",54)(105,"thead")(106,"tr",55)(107,"th",56),e._uU(108,"SKU"),e.qZA(),e.TgZ(109,"th",57),e._uU(110,"Producto"),e.qZA(),e.TgZ(111,"th",58),e._uU(112,"Precio Unitario"),e.qZA(),e.TgZ(113,"th",59),e._uU(114,"Reserva"),e.qZA(),e.TgZ(115,"th",59),e._uU(116,"Instalaci\xf3n"),e.qZA(),e.TgZ(117,"th",59),e._uU(118,"Env\xedo"),e.qZA(),e.TgZ(119,"th",59),e._uU(120,"Cantidad"),e.qZA(),e.TgZ(121,"th",58),e._uU(122,"Pagado"),e.qZA(),e.TgZ(123,"th",58),e._uU(124,"Por Pagar"),e.qZA(),e.TgZ(125,"th",58),e._uU(126,"Total Venta"),e.qZA()()(),e.TgZ(127,"tbody",38),e.YNc(128,Ei,33,26,"tr",34),e._UZ(129,"br"),e.YNc(130,Fi,12,9,"tr",34),e.qZA()()()()(),e.TgZ(131,"div",42)(132,"div",32)(133,"div",60)(134,"h2"),e._uU(135,"Metainformation"),e.qZA(),e.YNc(136,qi,2,0,"button",61),e.qZA()(),e.TgZ(137,"div",35),e.YNc(138,Ji,42,19,"form",62),e.YNc(139,zi,17,1,"div",63),e.qZA()()()()()()()()()}if(2&i){const t=e.MAs(84),a=e.oxw();e.xp6(28),e.Q6J("routerLink",e.DdM(22,ji)),e.xp6(9),e.Q6J("ngForOf",a.ventas),e.xp6(5),e.Q6J("ngForOf",a.ventas),e.xp6(1),e.Q6J("ngForOf",a.ventas),e.xp6(1),e.Q6J("ngForOf",a.ventas),e.xp6(9),e.Q6J("ngForOf",a.ventas),e.xp6(1),e.Q6J("ngForOf",a.ventas),e.xp6(12),e.Q6J("ngForOf",a.ventas),e.xp6(8),e.Q6J("ngForOf",a.ventas),e.xp6(8),e.Q6J("ngIf",a.detalleEnvioEnviame.length>1)("ngIfElse",t),e.xp6(12),e.Q6J("ngClass",a.getCssStatus(a.colorEstadoVenta)),e.xp6(1),e.Oqu(a.nombreEstadoVenta),e.xp6(1),e.Q6J("ngIf",!a.isEnviame&&a.isProductComplex&&"Aprobada"!=a.nombreEstadoVenta&&"Fallida"!=a.nombreEstadoVenta&&"Pendiente de validaci\xf3n"!=a.nombreEstadoVenta),e.xp6(1),e.Q6J("ngIf","Pendiente de validaci\xf3n"==a.nombreEstadoVenta),e.xp6(1),e.Q6J("ngIf","Fallida"!=a.nombreEstadoVenta&&a.detailsOrderStatus&&a.detailsOrderStatus.length>0),e.xp6(3),e.Q6J("ngForOf",a.ventas),e.xp6(27),e.Q6J("ngForOf",a.resumen),e.xp6(2),e.Q6J("ngForOf",a.ventas),e.xp6(6),e.Q6J("ngIf",a.isAdmin),e.xp6(2),e.Q6J("ngIf",a.showEditData),e.xp6(1),e.Q6J("ngIf",a.ventas)}}function $i(i,n){1&i&&(e._UZ(0,"img",160),e._uU(1," Error del servidor, favor intente nuevamente "))}let Ki=(()=>{class i{constructor(t,a,o,r,s,l,c){this.ventaProvider=t,this.userProvider=a,this.formBuilder=o,this.productService=r,this.userService=s,this.toastService=c,this.venta={code:1,message:"",status:"",data:{id_envio:""}},this.totalPagado=0,this.totalaPagar=0,this.subtotal=0,this.estadoPedidoAll=[],this.tipoEnvioName="",this.detalleEnvioEnviame="",this.isEnviame=!1,this.productsFormGroup=this.formBuilder.group({selected:this.formBuilder.array([],d.kI.required)}),this.courriers=[],this.selectedAll=!1,this.isLoading=!0,this.updateButtonLoader=!1,this.editData=!1,this.loadingEditButton=!1,this.name="DetalleVenta.xlsx",this.loadVenta(l.snapshot.params.id),this.idVenta=l.snapshot.params.id,this.isAdmin=s.hasPermission(Ce.Q.TODOS),this.isAibo=this.userProvider.adminAibo}ngOnInit(){this.myGroup=this.formBuilder.group({id_estadoventa:["",[d.kI.required]]}),this.estadoPedidoGroup=this.formBuilder.group({id_estadopedido:[""],id_courrier:[""],vch_ot:[""]})}get selectedArr(){return this.productsFormGroup.get("selected")}get isButtonDisabled(){return!((this.estadoPedidoGroup.get("id_estadopedido")?.value||this.estadoPedidoGroup.get("id_courrier")?.value||this.estadoPedidoGroup.get("vch_ot")?.value)&&this.productsFormGroup.get("selected").value.find(t=>!0===t))}get formattedTime(){return(new Date).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/[/]/g,"-").replace(",","")}get showEditData(){return this.isAdmin&&this.editData}get commentInvalid(){return this.formSale.get("comment")?.invalid&&this.formSale.get("comment")?.touched}get salesNoteInvalid(){return this.formSale.get("addressSend")?.invalid&&this.formSale.get("addressSend")?.touched}get purchaseOrderInvalid(){return this.formSale.get("addressSend")?.invalid&&this.formSale.get("addressSend")?.touched}get obsPaymentMethodInvalid(){return this.formSale.get("addressSend")?.invalid&&this.formSale.get("addressSend")?.touched}get billNumberInvalid(){return this.formSale.get("addressSend")?.invalid&&this.formSale.get("addressSend")?.touched}toggleEditData(){this.editData=!this.editData}setForm(){this.formSale=this.formBuilder.group({comment:[this.ventas[0].vch_comentarios||"",[d.kI.maxLength(300)]],salesNote:[this.ventas[0].vch_salesnote||"",[d.kI.maxLength(100)]],purchaseOrder:[this.ventas[0].vch_purchaseorder||"",[d.kI.maxLength(100)]],obsPaymentMethod:[this.ventas[0].vch_obspaymentmethod||"",[d.kI.maxLength(100)]],billNumber:[this.ventas[0].vch_billnumber||"",[d.kI.maxLength(100)]],assistedSale:[this.ventas[0].bit_assistedsale||"",[d.kI.maxLength(100)]]})}submitUpdateSale(){var t=this;return(0,A.Z)(function*(){t.loadingEditButton=!0;const a={vch_comentarios:t.formSale.get("comment")?.value||null,vch_salesnote:t.formSale.get("salesNote")?.value||null,vch_purchaseorder:t.formSale.get("purchaseOrder")?.value||null,vch_obspaymentmethod:t.formSale.get("obsPaymentMethod")?.value||null,vch_billnumber:t.formSale.get("billNumber")?.value||null,bit_assistedsale:t.formSale.get("assistedSale")?.value||!1};try{if(1!=(yield(0,b.z)(t.ventaProvider.putEstadoVenta(a,t.idVenta))).code)return void t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:3e3});t.loadVenta(t.idVenta),t.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-light",delay:3e3}),t.loadingEditButton=!1}catch{t.loadingEditButton=!1,t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:3e3})}})()}loadVenta(t){this.ventaProvider.getVentaCliente(t).subscribe(a=>{a.data&&(this.ventas=[a.data],console.log("venta",this.ventas),this.nombreEstadoVenta=this.ventas[0].tbl_estadoventum?.vch_nombre,this.idEstadoVenta=this.ventas[0].tbl_estadoventum?.id,this.colorEstadoVenta=this.ventas[0].tbl_estadoventum?.vch_color,this.compradorCorreo=this.ventas[0].tbl_cliente?.vch_correo,this.compradorNombre=this.ventas[0].tbl_cliente?.vch_nombre,this.tipoEnvioName=this.ventas[0].tbl_envio?.vch_nombre,this.setForm())}),this.userProvider.getEmpresa().subscribe(a=>{this.idEmpresaUsuario=a.data.id,this.nameUserCompany=a.data.vch_nombre}),this.ventaProvider.getEstadoPedidos().subscribe(a=>{this.estadoPedidoAll=a.data.filter(r=>r.vch_tipo==this.tipoEnvioName)}),this.ventaProvider.getAllCourriers().subscribe(a=>{this.courriers=a.data,this.isAibo||(this.courriers=this.courriers.filter(o=>o.vch_name.toLocaleLowerCase()==this.nameUserCompany.toLocaleLowerCase()||"externo"==o.vch_type))}),this.ventaProvider.getDetalle(t).subscribe(a=>{this.detalles=a.data,this.isAibo||(this.detalles=this.detalles.filter(o=>o.tbl_productos[0].id_empresa==this.idEmpresaUsuario)),this.detailsOrderStatus=this.detalles.filter(o=>1==o.tbl_productos[0].tbl_tipo?.bit_fisico),this.detailsOrderStatus.forEach(o=>{o.tbl_productos[0].id_tipo&&this.selectedArr.push(new d.NI(!1,d.kI.required))}),this.isProductComplex=this.detalles.some(o=>1==o.tbl_productos[0].bit_complejo&&o.tbl_productos[0].id_empresa==this.idEmpresaUsuario),this.estadoPedidoName=this.detalles[0]?.tbl_estadopedido?.vch_nombre?this.detalles[0]?.tbl_estadopedido?.vch_nombre:"Ninguno",this.estadoPedidoBitColor=!!this.detalles[0]?.tbl_estadopedido?.bit_colorpositivo&&this.detalles[0].tbl_estadopedido.bit_colorpositivo,this.detalleEnvioEnviame=this.detalles[0].vch_estadoenviame||"",this.isPositive=this.detalles[0].bit_colorpositivoenv||!1,this.isEnviame="Proceso de envio"==this.nombreEstadoVenta,this.isLoading=!1}),this.ventaProvider.detalle(this.userProvider.usuario.id_empresa,t).subscribe(a=>{this.resumen=a.data,this.calcularTotales()}),this.ventaProvider.getEstadosVenta().subscribe(a=>{a.data&&(this.estadoVentas=a.data.filter(o=>1==o.estado),this.estadoVentasComplejo=a.data.filter(o=>1==o.bit_complejo),this.estadoVentasSimple=a.data.filter(o=>0==o.bit_complejo),this.estadoVentasAprobadaFallida=a.data.filter(o=>0==o.bit_complejo&&("Aprobada"==o.vch_nombre||"Fallida"==o.vch_nombre)))})}onSubmit(){if(this.myGroup.invalid)return void alert("Por favor, selecciona alguna opci\xf3n :)");const t=this.idVenta;this.formData=this.myGroup.value;const a={};a.id_estadoventa=this.formData.id_estadoventa,this.ventaProvider.putEstadoVenta(a,t).subscribe({next:o=>{console.log(o);let r=this.estadoVentas.find(s=>s.id==this.formData.id_estadoventa);this.nombreEstadoVenta=r?.vch_nombre,this.idEstadoVenta=r?.id,this.colorEstadoVenta=r?.vch_color},error:o=>console.error(o)}),this.compradorCorreo&&this.nombreEstadoVenta&&this.sendMail(this.nombreEstadoVenta)}onSubmitEstadoPedido(){this.updateButtonLoader=!0;const t=[];this.productsFormGroup.get("selected").value.forEach((c,u)=>{1==c&&t.push(this.detailsOrderStatus[u].id_producto)});const a={},o=this.estadoPedidoGroup.get("id_estadopedido")?.value,r=this.estadoPedidoGroup.get("id_courrier")?.value,s=this.estadoPedidoGroup.get("vch_ot")?.value;o?.length>0&&(a.id_estadopedido=o),r?.length>0&&(a.id_courrier=r),s?.length>0&&(a.vch_ot=s),a.vch_fechaestadoenv=this.formattedTime,this.ventaProvider.putMultipleSaleDetails({id_venta:this.idVenta,ids:t,data:a}).subscribe({next:c=>{for(const u of this.detailsOrderStatus){const m=c.data.find(h=>h.id_producto===u.id_producto);m&&Object.assign(u,m)}this.estadoPedidoGroup.reset({id_estadopedido:"",id_courrier:"",vch_ot:""}),this.toastService.show("Guardado con \xe9xito",{classname:"bg-success  bg-success text-light",delay:3e3}),this.updateButtonLoader=!1},error:c=>{this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:3e3}),this.updateButtonLoader=!1}})}sendMail(t){this.ventaProvider.sendMailToUser({mailTo:this.compradorCorreo,mailToName:this.compradorNombre??"",mailSubject:"Actualizaci\xf3n en el estado de tu pedido!",mailHtml:`\n    <div>\n    <h1>!Hola ${this.compradorNombre}!</h1>\n    <h3>El estado actual de tu pedido es: ${t}</h3>\n    <p>Este es un correo automatico, por favor no responda al mismo. Cualquier duda o consulta puede escribirnos a traves de hola@aibomarket.com</p>\n    </div>\n`,estadoVenta:t}).subscribe({next:r=>{console.log(r);let s=this.estadoVentas.find(l=>l.id==this.formData.id_estadoventa);this.nombreEstadoVenta=s?.vch_nombre,this.idEstadoVenta=s?.id,this.colorEstadoVenta=s?.vch_color},error:r=>console.error(r)})}getCssStatus(t){let a;return a="bg-success"===t?"badge-light-success":"badge-light-danger",a}calcularTotales(){if(this.resumen.length>0)for(let t of this.resumen)this.totalPagado+=t.db_montoreserva&&t.db_montoreserva>0?t.db_montoreserva+(t.db_envio||0):t.Total,this.totalaPagar+=t.porPagar;this.subtotal=this.totalPagado+this.totalaPagar}exportToExcel(){let t=document.getElementById("details-sale-table");const a=D.P6.table_to_sheet(t),o=D.P6.book_new();D.P6.book_append_sheet(o,a,"Sheet1"),D.NC(o,this.name)}selectAllButton(){this.selectedAll=!this.selectedAll;const t=this.selectedArr.value.length;for(let a=0;a<t;a++)this.selectedArr.at(a).patchValue(this.selectedAll)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.M),e.Y36(k.i),e.Y36(d.qu),e.Y36(te.M),e.Y36(k.i),e.Y36(x.gz),e.Y36(q.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-detalle"]],viewQuery:function(t,a){if(1&t&&e.Gf(Qt,5),2&t){let o;e.iGM(o=e.CRH())&&(a.errorToast=o.first)}},decls:6,vars:2,consts:[["id","kt_app_main",1,"app-main","flex-column","flex-row-fluid"],["class","text-center mb-10",4,"ngIf"],["class","d-flex flex-column flex-column-fluid",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],[1,"text-center","mb-10"],["src","/assets/loading.gif","alt","","height","100","width","100"],[1,"d-flex","flex-column","flex-column-fluid"],["id","kt_app_toolbar",1,"app-toolbar","py-3","py-lg-6"],["id","kt_app_toolbar_container",1,"app-container","container-xxl","d-flex","flex-stack"],[1,"page-title","d-flex","flex-column","justify-content-center","flex-wrap","me-3"],[1,"page-heading","d-flex","text-dark","fw-bold","fs-3","flex-column","justify-content-center","my-0"],[1,"breadcrumb","breadcrumb-separatorless","fw-semibold","fs-7","my-0","pt-1"],[1,"breadcrumb-item","text-muted"],[1,"breadcrumb-item"],[1,"bullet","bg-gray-400","w-5px","h-2px"],[1,"d-flex","align-items-center","gap-2","gap-lg-3"],[1,"btn","btn-sm","btn-primary",3,"click"],["id","kt_app_content","id","details-sale-table",1,"app-content","flex-column-fluid"],["id","kt_app_content_container",1,"app-container","container-xxl"],[1,"d-flex","flex-column","gap-7","gap-lg-10"],[1,"d-flex","flex-wrap","flex-stack","gap-5","gap-lg-10"],[1,"nav","nav-custom","nav-tabs","nav-line-tabs","nav-line-tabs-2x","border-0","fs-4","fw-semibold","mb-lg-n2","me-auto"],[1,"nav-item"],["data-bs-toggle","tab","href","#kt_ecommerce_sales_order_summary",1,"nav-link","text-active-primary","pb-4","active"],[1,"btn","btn-icon","btn-light","btn-sm",3,"routerLink"],[1,"svg-icon","svg-icon-2"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.5","x","6","y","11","width","13","height","2","rx","1","fill","black"],["d","M8.56569 11.4343L12.75 7.25C13.1642 6.83579 13.1642 6.16421 12.75 5.75C12.3358 5.33579 11.6642 5.33579 11.25 5.75L5.70711 11.2929C5.31658 11.6834 5.31658 12.3166 5.70711 12.7071L11.25 18.25C11.6642 18.6642 12.3358 18.6642 12.75 18.25C13.1642 17.8358 13.1642 17.1642 12.75 16.75L8.56569 12.5657C8.25327 12.2533 8.25327 11.7467 8.56569 11.4343Z","fill","black"],[1,"d-flex","flex-column","flex-xl-row","gap-7","gap-lg-10"],[1,"card","card-flush","py-4","flex-row-fluid"],[1,"card-header"],[1,"card-title"],[4,"ngFor","ngForOf"],[1,"card-body","pt-0"],[1,"table-responsive"],[1,"table","align-middle","table-row-bordered","mb-0","fs-6","gy-5","min-w-300px"],[1,"fw-semibold","text-gray-600"],["class","fw-semibold text-gray-600",4,"ngFor","ngForOf"],[1,"tab-content"],["id","kt_ecommerce_sales_order_summary","role","tab-panel",1,"tab-pane","fade","show","active"],[1,"card","card-flush","py-4","flex-row-fluid","overflow-hidden"],[1,"position-absolute","top-0","end-0","opacity-10","pe-none","text-end"],["src","assets/media/icons/duotune/ecommerce/ecm001.svg",1,"w-175px"],["class","card-body pt-0 col",4,"ngFor","ngForOf"],["src","assets/media/icons/duotune/ecommerce/ecm006.svg",1,"w-175px"],["class","d-flex flex-column justify-content-center",4,"ngIf","ngIfElse"],["noEnviame",""],[1,"mb-3"],[1,"rounded","p-1",3,"ngClass"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","d-flex flex-column flex-xl-row gap-7 gap-lg-10",4,"ngIf"],["class","card-title",4,"ngFor","ngForOf"],[1,"table","align-middle","table-row-dashed","fs-6","gy-5","mb-0"],[1,"text-start","text-gray-400","fw-bold","fs-7","text-uppercase","gs-0"],[1,"min-w-100px"],[1,"min-w-175px"],[1,"min-w-100px","text-end"],[1,"min-w-70px","text-end"],[1,"card-title","d-flex","justify-content-between","w-100"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],["class","mb-5",3,"formGroup","ngSubmit",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-muted"],[1,"d-flex","align-items-center"],[1,"svg-icon","svg-icon-2","me-2"],["width","20","height","21","viewBox","0 0 20 21","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.3","d","M19 3.40002C18.4 3.40002 18 3.80002 18 4.40002V8.40002H14V4.40002C14 3.80002 13.6 3.40002 13 3.40002C12.4 3.40002 12 3.80002 12 4.40002V8.40002H8V4.40002C8 3.80002 7.6 3.40002 7 3.40002C6.4 3.40002 6 3.80002 6 4.40002V8.40002H2V4.40002C2 3.80002 1.6 3.40002 1 3.40002C0.4 3.40002 0 3.80002 0 4.40002V19.4C0 20 0.4 20.4 1 20.4H19C19.6 20.4 20 20 20 19.4V4.40002C20 3.80002 19.6 3.40002 19 3.40002ZM18 10.4V13.4H14V10.4H18ZM12 10.4V13.4H8V10.4H12ZM12 15.4V18.4H8V15.4H12ZM6 10.4V13.4H2V10.4H6ZM2 15.4H6V18.4H2V15.4ZM14 18.4V15.4H18V18.4H14Z","fill","currentColor"],["d","M19 0.400024H1C0.4 0.400024 0 0.800024 0 1.40002V4.40002C0 5.00002 0.4 5.40002 1 5.40002H19C19.6 5.40002 20 5.00002 20 4.40002V1.40002C20 0.800024 19.6 0.400024 19 0.400024Z","fill","currentColor"],[1,"fw-bold","text-end"],["class","fw-bold text-end",4,"ngIf"],["opacity","0.3","d","M3.20001 5.91897L16.9 3.01895C17.4 2.91895 18 3.219 18.1 3.819L19.2 9.01895L3.20001 5.91897Z","fill","currentColor"],["opacity","0.3","d","M13 13.9189C13 12.2189 14.3 10.9189 16 10.9189H21C21.6 10.9189 22 11.3189 22 11.9189V15.9189C22 16.5189 21.6 16.9189 21 16.9189H16C14.3 16.9189 13 15.6189 13 13.9189ZM16 12.4189C15.2 12.4189 14.5 13.1189 14.5 13.9189C14.5 14.7189 15.2 15.4189 16 15.4189C16.8 15.4189 17.5 14.7189 17.5 13.9189C17.5 13.1189 16.8 12.4189 16 12.4189Z","fill","currentColor"],["d","M13 13.9189C13 12.2189 14.3 10.9189 16 10.9189H21V7.91895C21 6.81895 20.1 5.91895 19 5.91895H3C2.4 5.91895 2 6.31895 2 6.91895V20.9189C2 21.5189 2.4 21.9189 3 21.9189H19C20.1 21.9189 21 21.0189 21 19.9189V16.9189H16C14.3 16.9189 13 15.6189 13 13.9189Z","fill","currentColor"],["d","M20 8H16C15.4 8 15 8.4 15 9V16H10V17C10 17.6 10.4 18 11 18H16C16 16.9 16.9 16 18 16C19.1 16 20 16.9 20 18H21C21.6 18 22 17.6 22 17V13L20 8Z","fill","currentColor"],["opacity","0.3","d","M20 18C20 19.1 19.1 20 18 20C16.9 20 16 19.1 16 18C16 16.9 16.9 16 18 16C19.1 16 20 16.9 20 18ZM15 4C15 3.4 14.6 3 14 3H3C2.4 3 2 3.4 2 4V13C2 13.6 2.4 14 3 14H15V4ZM6 16C4.9 16 4 16.9 4 18C4 19.1 4.9 20 6 20C7.1 20 8 19.1 8 18C8 16.9 7.1 16 6 16Z","fill","currentColor"],["width","18","height","18","viewBox","0 0 18 18","fill","none","xmlns","http://www.w3.org/2000/svg"],["opacity","0.3","d","M16.5 9C16.5 13.125 13.125 16.5 9 16.5C4.875 16.5 1.5 13.125 1.5 9C1.5 4.875 4.875 1.5 9 1.5C13.125 1.5 16.5 4.875 16.5 9Z","fill","currentColor"],["d","M9 16.5C10.95 16.5 12.75 15.75 14.025 14.55C13.425 12.675 11.4 11.25 9 11.25C6.6 11.25 4.57499 12.675 3.97499 14.55C5.24999 15.75 7.05 16.5 9 16.5Z","fill","currentColor"],["x","7","y","6","width","4","height","4","rx","2","fill","currentColor"],["d","M5 20H19V21C19 21.6 18.6 22 18 22H6C5.4 22 5 21.6 5 21V20ZM19 3C19 2.4 18.6 2 18 2H6C5.4 2 5 2.4 5 3V4H19V3Z","fill","currentColor"],["opacity","0.3","d","M19 4H5V20H19V4Z","fill","currentColor"],["opacity","0.3","d","M21 19H3C2.4 19 2 18.6 2 18V6C2 5.4 2.4 5 3 5H21C21.6 5 22 5.4 22 6V18C22 18.6 21.6 19 21 19Z","fill","currentColor"],["d","M21 5H2.99999C2.69999 5 2.49999 5.10005 2.29999 5.30005L11.2 13.3C11.7 13.7 12.4 13.7 12.8 13.3L21.7 5.30005C21.5 5.10005 21.3 5 21 5Z","fill","currentColor"],["class","card card-flush py-4 flex-row-fluid",4,"ngIf"],["opacity","0.3","d","M18 21.6C16.3 21.6 15 20.3 15 18.6V2.50001C15 2.20001 14.6 1.99996 14.3 2.19996L13 3.59999L11.7 2.3C11.3 1.9 10.7 1.9 10.3 2.3L9 3.59999L7.70001 2.3C7.30001 1.9 6.69999 1.9 6.29999 2.3L5 3.59999L3.70001 2.3C3.50001 2.1 3 2.20001 3 3.50001V18.6C3 20.3 4.3 21.6 6 21.6H18Z","fill","currentColor"],["d","M12 12.6H11C10.4 12.6 10 12.2 10 11.6C10 11 10.4 10.6 11 10.6H12C12.6 10.6 13 11 13 11.6C13 12.2 12.6 12.6 12 12.6ZM9 11.6C9 11 8.6 10.6 8 10.6H6C5.4 10.6 5 11 5 11.6C5 12.2 5.4 12.6 6 12.6H8C8.6 12.6 9 12.2 9 11.6ZM9 7.59998C9 6.99998 8.6 6.59998 8 6.59998H6C5.4 6.59998 5 6.99998 5 7.59998C5 8.19998 5.4 8.59998 6 8.59998H8C8.6 8.59998 9 8.19998 9 7.59998ZM13 7.59998C13 6.99998 12.6 6.59998 12 6.59998H11C10.4 6.59998 10 6.99998 10 7.59998C10 8.19998 10.4 8.59998 11 8.59998H12C12.6 8.59998 13 8.19998 13 7.59998ZM13 15.6C13 15 12.6 14.6 12 14.6H10C9.4 14.6 9 15 9 15.6C9 16.2 9.4 16.6 10 16.6H12C12.6 16.6 13 16.2 13 15.6Z","fill","currentColor"],["d","M15 18.6C15 20.3 16.3 21.6 18 21.6C19.7 21.6 21 20.3 21 18.6V12.5C21 12.2 20.6 12 20.3 12.2L19 13.6L17.7 12.3C17.3 11.9 16.7 11.9 16.3 12.3L15 13.6V18.6Z","fill","currentColor"],["opacity","0.3","d","M20 15H4C2.9 15 2 14.1 2 13V7C2 6.4 2.4 6 3 6H21C21.6 6 22 6.4 22 7V13C22 14.1 21.1 15 20 15ZM13 12H11C10.5 12 10 12.4 10 13V16C10 16.5 10.4 17 11 17H13C13.6 17 14 16.6 14 16V13C14 12.4 13.6 12 13 12Z","fill","black"],["d","M14 6V5H10V6H8V5C8 3.9 8.9 3 10 3H14C15.1 3 16 3.9 16 5V6H14ZM20 15H14V16C14 16.6 13.5 17 13 17H11C10.5 17 10 16.6 10 16V15H4C3.6 15 3.3 14.9 3 14.7V18C3 19.1 3.9 20 5 20H19C20.1 20 21 19.1 21 18V14.7C20.7 14.9 20.4 15 20 15Z","fill","black"],[1,"card-body","pt-0","col"],[4,"ngIf"],[1,"d-flex","flex-column","justify-content-center"],[1,"my-2","mb-3"],["target","_blank",3,"href"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["formControlName","id_estadoventa","name","id_estadoventa","required","",1,"form-select","mb-2"],[3,"value",4,"ngFor","ngForOf"],["type","submit","value","Cambiar estado",1,"btn","btn-sm","btn-primary","mt-5",3,"disabled"],[3,"value"],["formControlName","id_estadopedido","name","id_estadopedido",1,"form-select","mb-2"],["value","","disabled","","default","","selected","","hidden",""],["class","form-select mb-2","formControlName","id_courrier","name","id_courrier",4,"ngIf"],["class","row",4,"ngIf"],[1,"table-responsive","my-5"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf"],["class","table table-row-bordered table-row-gray-100 align-middle gs-0 gy-4 my-5",3,"formGroup",4,"ngIf"],["role","alert",1,"animate__animated","alert","alert-dismissible","alert-info","mt-5",3,"ngClass"],[1,"d-flex","justify-content-center","mt-5"],["type","submit",1,"btn","btn-primary","mt-5",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-3",3,"hidden"],[3,"hidden"],[1,"indicator-label",3,"hidden"],["formControlName","id_courrier","name","id_courrier",1,"form-select","mb-2"],[1,"col","col-6","mt-4"],["type","text","placeholder","Orden de transporte","formControlName","vch_ot","name","vch_ot",1,"form-control"],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-4","my-5",3,"formGroup"],[1,"fw-bolder","text-muted"],[1,"w-25px"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox","value","selectedAll","data-kt-check","true","data-kt-check-target",".widget-13-check",1,"form-check-input",3,"click"],[1,"min-w-150px"],[1,"min-w-50px"],["class","min-w-50px",4,"ngIf"],["formArrayName","selected"],["type","checkbox",1,"form-check-input","widget-13-check",3,"formControlName"],[1,"d-flex","flex-column"],["class","badge badge-light-primary mt-1","style","width: fit-content;",4,"ngIf"],[1,"text-start"],[1,"fw-bold","text-gray-600"],[1,"text-end"],[1,"text-center"],[1,"badge","badge-light-primary","mt-1",2,"width","fit-content"],["colspan","7",1,"text-dark","fw-bolder"],[1,"text-end","fw-bolder","text-dark"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"mb-5",3,"formGroup","ngSubmit"],[1,"row","mb-5"],[1,"col-md-6","fv-row"],[1,"fs-5","fw-bold","mb-2"],["type","text","formControlName","salesNote",1,"form-control","form-control-solid"],["type","text","formControlName","purchaseOrder",1,"form-control","form-control-solid"],["type","text","formControlName","obsPaymentMethod",1,"form-control","form-control-solid"],["type","text","formControlName","billNumber",1,"form-control","form-control-solid"],[1,"col-md-6","ps-0","fv-row"],[1,"form-check","form-check-custom","form-check-solid","mb-2"],[1,"form-check-label","fs-5","fw-bold","m-3"],["type","checkbox","formControlName","assistedSale",1,"form-check-input"],[1,"row","mt-5"],["formControlName","comment","cols","100","rows","2",1,"form-control"],["type","submit","id","kt_careers_submit_button",1,"btn","mt-4","mb-5","ms-3","w-auto","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm",3,"hidden"],[1,"visually-hidden",3,"hidden"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"min-w-70px"],["src","/assets/dangerTpl.svg","alt","dangerTpl"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Bt,2,0,"div",1),e.YNc(2,Gi,140,23,"div",2),e.qZA(),e._UZ(3,"app-toast",3),e.YNc(4,$i,2,0,"ng-template",null,4,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",a.isLoading),e.xp6(1),e.Q6J("ngIf",!a.isLoading))},dependencies:[_.mk,_.sg,_.O5,x.yS,d._Y,d.YN,d.Kr,d.Fj,d.Wl,d.EJ,d.JJ,d.JL,d.Q7,d.sg,d.u,d.CE,U.q,_.uU,ie.p],styles:[".ocult_modal[_ngcontent-%COMP%]{margin-bottom:-100px;transition:all .5s ease-in-out}"]}),i})();var H=p(8619);function Wi(i,n){1&i&&(e.TgZ(0,"option",22),e._uU(1,"Grenke"),e.qZA())}function Xi(i,n){if(1&i&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.vch_nombre)}}function ea(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Xi,2,2,"option",45),e.BQk()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",1!=t.id)}}function ta(i,n){if(1&i&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function ia(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"select",47)(2,"option",17),e._uU(3,"Vendedor"),e.qZA(),e.YNc(4,ta,2,2,"option",48),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.empresas)}}function aa(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeFilters())}),e._uU(1," Quitar filtros "),e.qZA()}}function na(i,n){1&i&&(e.TgZ(0,"div",50),e._UZ(1,"img",51),e.qZA())}function oa(i,n){1&i&&(e.TgZ(0,"div",56)(1,"div"),e._uU(2,"No hay datos para mostrar"),e.qZA()())}function ra(i,n){1&i&&(e.TgZ(0,"th",59),e._uU(1,"Vendedor"),e.qZA())}function sa(i,n){1&i&&(e.TgZ(0,"th",59),e._uU(1," Disponibilidad "),e.qZA())}function la(i,n){1&i&&(e.TgZ(0,"th",59),e._uU(1,"Acciones"),e.qZA())}function da(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"td",62)(1,"a",68),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(4),s=e.MAs(72);return e.KtG(r.open(s,o.id))}),e._uU(2),e.qZA()()}if(2&i){const t=e.oxw().$implicit,a=e.oxw(4);e.xp6(2),e.Oqu(a.getCompanieByID(t.id_empresa))}}function ca(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"a",68),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(4),s=e.MAs(70);return e.KtG(r.open(s,o.id))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.vch_vendedorasignado||"Sin vendedor")}}const w=function(i){return[i]};function ua(i,n){if(1&i&&(e.TgZ(0,"a",69),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(2,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(t.vch_vendedorasignado||"Sin vendedor")}}function _a(i,n){1&i&&(e.TgZ(0,"button",77),e._UZ(1,"span",78),e._uU(2," Loading... "),e.qZA())}function pa(i,n){1&i&&(e.TgZ(0,"button",80),e._uU(1," Cerrado "),e.qZA())}function ma(i,n){if(1&i&&e.YNc(0,pa,2,0,"button",79),2&i){e.oxw();const t=e.MAs(5),a=e.oxw().$implicit;e.Q6J("ngIf",1==a.bit_closed)("ngIfElse",t)}}function ha(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3).$implicit,r=e.oxw(4);return e.KtG(r.dropLead(o.id))}),e._uU(1," Liberar "),e.qZA()}}function fa(i,n){if(1&i&&e.YNc(0,ha,2,0,"button",81),2&i){e.oxw();const t=e.MAs(7),a=e.oxw().$implicit,o=e.oxw(4);e.Q6J("ngIf",o.isAdmin&&a.bit_terminada)("ngIfElse",t)}}function ga(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3).$implicit,r=e.oxw(4);return e.KtG(r.takeLead(o.id))}),e._uU(1," Tomar "),e.qZA()}}function va(i,n){if(1&i&&e.YNc(0,ga,2,0,"button",83),2&i){e.oxw();const t=e.MAs(9),a=e.oxw(5);e.Q6J("ngIf",a.isAdmin)("ngIfElse",t)}}function ba(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3).$implicit,r=e.oxw(4);return e.KtG(r.dropLead(o.id))}),e._uU(1," Liberar "),e.qZA()}}function xa(i,n){if(1&i&&e.YNc(0,ba,2,0,"button",81),2&i){e.oxw();const t=e.MAs(11),a=e.oxw().$implicit,o=e.oxw(4);e.Q6J("ngIf",a.id_encargado==o.id_encargado)("ngIfElse",t)}}function ya(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3).$implicit,r=e.oxw(4);return e.KtG(r.takeLead(o.id))}),e._uU(1," Tomar "),e.qZA()}}function Ca(i,n){if(1&i&&e.YNc(0,ya,2,0,"button",83),2&i){e.oxw();const t=e.MAs(13),a=e.oxw().$implicit;e.Q6J("ngIf",!a.bit_terminada)("ngIfElse",t)}}function Aa(i,n){1&i&&(e.TgZ(0,"button",85),e._uU(1," Tomado "),e.qZA())}function wa(i,n){if(1&i&&(e.TgZ(0,"td"),e.YNc(1,_a,3,0,"button",70),e.YNc(2,ma,1,2,"ng-template",null,71,e.W1O),e.YNc(4,fa,1,2,"ng-template",null,72,e.W1O),e.YNc(6,va,1,2,"ng-template",null,73,e.W1O),e.YNc(8,xa,1,2,"ng-template",null,74,e.W1O),e.YNc(10,Ca,1,2,"ng-template",null,75,e.W1O),e.YNc(12,Aa,2,0,"ng-template",null,76,e.W1O),e.qZA()),2&i){const t=e.MAs(3),a=e.oxw(5);e.xp6(1),e.Q6J("ngIf",a.buttonLoader)("ngIfElse",t)}}function Ta(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"td")(1,"button",86),e._uU(2," Editar "),e.qZA(),e.TgZ(3,"button",82),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(4),s=e.MAs(68);return e.KtG(r.open(s,o.id))}),e._uU(4," Eliminar "),e.qZA()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(1,w,"../lead-gestion/"+t.id))}}function Da(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",62)(3,"a",63),e._uU(4),e.qZA()(),e.TgZ(5,"td",62)(6,"a",63),e._uU(7),e.qZA()(),e.YNc(8,da,3,1,"td",64),e.TgZ(9,"td")(10,"a",63),e._uU(11),e.ALo(12,"titlecase"),e.ALo(13,"titlecase"),e.qZA()(),e.TgZ(14,"td",62)(15,"a",63),e._uU(16),e.qZA()(),e.TgZ(17,"td",62)(18,"a",63),e._uU(19),e.ALo(20,"lowercase"),e.qZA()(),e.TgZ(21,"td",62),e.YNc(22,ca,2,1,"a",65),e.YNc(23,ua,2,4,"a",66),e.qZA(),e.TgZ(24,"td",62)(25,"a",63)(26,"span",67),e._uU(27,"|"),e.qZA(),e._uU(28),e.ALo(29,"date"),e.TgZ(30,"span",67),e._uU(31,"|"),e.qZA()()(),e.YNc(32,wa,14,2,"td",61),e.YNc(33,Ta,5,3,"td",61),e.qZA(),e.BQk()),2&i){const t=n.$implicit,a=n.index,o=e.oxw(4);e.xp6(3),e.Q6J("routerLink",e.VKq(26,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(o.allFilterLeads.length-a),e.xp6(2),e.Q6J("routerLink",e.VKq(28,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(o.nameOrigenLeads[t.id_origen-1].vch_nombre),e.xp6(1),e.Q6J("ngIf",o.isAdmin),e.xp6(2),e.Q6J("routerLink",e.VKq(30,w,"../lead/"+t.id)),e.xp6(1),e.hij(" ",t.vch_nombre?e.lcZ(12,17,t.vch_nombre):e.lcZ(13,19,t.vch_razonsocial)," "),e.xp6(4),e.Q6J("routerLink",e.VKq(32,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(t.vch_rut?t.vch_rut:t.vch_rutempresa),e.xp6(2),e.Q6J("routerLink",e.VKq(34,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(e.lcZ(20,21,t.vch_email)),e.xp6(3),e.Q6J("ngIf",o.isAdmin),e.xp6(1),e.Q6J("ngIf",!o.isAdmin),e.xp6(2),e.Q6J("routerLink",e.VKq(36,w,"../lead/"+t.id)),e.xp6(3),e.Oqu(e.xi3(29,23,t.createdAt,"dd/MM/yyyy")),e.xp6(4),e.Q6J("ngIf",!o.gestionLeadsTable),e.xp6(1),e.Q6J("ngIf",o.gestionLeadsTable)}}function Za(i,n){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,Da,34,38,"ng-container",19),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.allFilterLeads)}}function ka(i,n){if(1&i&&(e.TgZ(0,"table",57)(1,"thead")(2,"tr",58)(3,"th",59),e._uU(4,"#"),e.qZA(),e.TgZ(5,"th",59),e._uU(6,"Origen"),e.qZA(),e.YNc(7,ra,2,0,"th",60),e.TgZ(8,"th",59),e._uU(9,"Nombre"),e.qZA(),e.TgZ(10,"th",59),e._uU(11,"Rut"),e.qZA(),e.TgZ(12,"th",59),e._uU(13,"Email"),e.qZA(),e.TgZ(14,"th",59),e._uU(15,"Asignado"),e.qZA(),e.TgZ(16,"th",59),e._uU(17,"Fecha"),e.qZA(),e.YNc(18,sa,2,0,"th",60),e.YNc(19,la,2,0,"th",60),e.qZA()(),e.YNc(20,Za,2,1,"tbody",61),e.qZA()),2&i){const t=e.oxw(2);e.xp6(7),e.Q6J("ngIf",t.isAdmin),e.xp6(11),e.Q6J("ngIf",!t.gestionLeadsTable),e.xp6(1),e.Q6J("ngIf",t.gestionLeadsTable),e.xp6(1),e.Q6J("ngIf",t.allFilterLeads)}}function Ma(i,n){if(1&i&&(e.TgZ(0,"div",52),e.YNc(1,oa,3,0,"div",53),e.TgZ(2,"div",54),e.YNc(3,ka,21,4,"ng-template",null,55,e.W1O),e.qZA()()),2&i){const t=e.MAs(4),a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.allFilterLeads&&0==a.allFilterLeads.length)("ngIfElse",t)}}function Sa(i,n){1&i&&(e.TgZ(0,"div",56)(1,"div"),e._uU(2,"No hay datos para mostrar"),e.qZA()())}function Ia(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"a",68),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(5),s=e.MAs(72);return e.KtG(r.open(s,o.id))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit,a=e.oxw(5);e.xp6(1),e.Oqu(a.getCompanieByID(t.id_empresa))}}function Ea(i,n){if(1&i&&(e.TgZ(0,"a",69),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,a=e.oxw(5);e.Q6J("routerLink",e.VKq(2,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(a.getCompanieByID(t.id_empresa))}}function Fa(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"a",68),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(5),s=e.MAs(70);return e.KtG(r.open(s,o.id))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.vch_vendedorasignado||"Sin asignado")}}function qa(i,n){if(1&i&&(e.TgZ(0,"a",69),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(2,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(t.vch_vendedorasignado||"Sin asignado")}}function La(i,n){1&i&&(e.TgZ(0,"button",80),e._uU(1," Cerrado "),e.qZA())}function Oa(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(5);return e.KtG(r.dropLead(o.id))}),e._uU(1," Liberar "),e.qZA()}}function Ra(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",62)(3,"a",63),e._uU(4),e.qZA()(),e.TgZ(5,"td",62)(6,"a",63),e._uU(7),e.qZA()(),e.TgZ(8,"td",62),e.YNc(9,Ia,2,1,"a",65),e.YNc(10,Ea,2,4,"a",66),e.qZA(),e.TgZ(11,"td")(12,"a",63),e._uU(13),e.ALo(14,"titlecase"),e.ALo(15,"titlecase"),e.qZA()(),e.TgZ(16,"td",62)(17,"a",63),e._uU(18),e.qZA()(),e.TgZ(19,"td",62)(20,"a",63),e._uU(21),e.ALo(22,"lowercase"),e.qZA()(),e.TgZ(23,"td",62),e.YNc(24,Fa,2,1,"a",65),e.YNc(25,qa,2,4,"a",66),e.qZA(),e.TgZ(26,"td",62)(27,"a",63)(28,"span",67),e._uU(29,"|"),e.qZA(),e._uU(30),e.ALo(31,"date"),e.TgZ(32,"span",67),e._uU(33,"|"),e.qZA()()(),e.TgZ(34,"td"),e.YNc(35,La,2,0,"button",89),e.YNc(36,Oa,2,0,"button",90),e.qZA()(),e.BQk()),2&i){const t=n.$implicit,a=n.index,o=e.oxw(5);e.xp6(3),e.Q6J("routerLink",e.VKq(27,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(o.userFilterLeads.length-a),e.xp6(2),e.Q6J("routerLink",e.VKq(29,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(o.nameOrigenLeads[t.id_origen-1].vch_nombre),e.xp6(2),e.Q6J("ngIf",o.isAdmin),e.xp6(1),e.Q6J("ngIf",!o.isAdmin),e.xp6(2),e.Q6J("routerLink",e.VKq(31,w,"../lead/"+t.id)),e.xp6(1),e.hij(" ",t.vch_nombre?e.lcZ(14,18,t.vch_nombre):e.lcZ(15,20,t.vch_razonsocial)," "),e.xp6(4),e.Q6J("routerLink",e.VKq(33,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(t.vch_rut?t.vch_rut:t.vch_rutempresa),e.xp6(2),e.Q6J("routerLink",e.VKq(35,w,"../lead/"+t.id)),e.xp6(1),e.Oqu(e.lcZ(22,22,t.vch_email)),e.xp6(3),e.Q6J("ngIf",o.isAdmin),e.xp6(1),e.Q6J("ngIf",!o.isAdmin),e.xp6(2),e.Q6J("routerLink",e.VKq(37,w,"../lead/"+t.id)),e.xp6(3),e.Oqu(e.xi3(31,24,t.createdAt,"dd/MM/yyyy")),e.xp6(5),e.Q6J("ngIf",1==t.bit_closed),e.xp6(1),e.Q6J("ngIf",t.id_encargado==o.id_encargado&&1!=t.bit_closed)}}function Pa(i,n){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,Ra,37,39,"ng-container",19),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.userFilterLeads)}}function Na(i,n){if(1&i&&(e.TgZ(0,"table",57)(1,"thead")(2,"tr",58)(3,"th",59),e._uU(4,"#"),e.qZA(),e.TgZ(5,"th",59),e._uU(6,"Origen"),e.qZA(),e.TgZ(7,"th",59),e._uU(8,"Vendedor"),e.qZA(),e.TgZ(9,"th",59),e._uU(10,"nombre"),e.qZA(),e.TgZ(11,"th",59),e._uU(12,"Rut"),e.qZA(),e.TgZ(13,"th",59),e._uU(14,"Email"),e.qZA(),e.TgZ(15,"th",59),e._uU(16,"Asignado"),e.qZA(),e.TgZ(17,"th",59),e._uU(18,"Fecha"),e.qZA(),e.TgZ(19,"th",59),e._uU(20,"Disponibilidad"),e.qZA()()(),e.YNc(21,Pa,2,1,"tbody",61),e.qZA()),2&i){const t=e.oxw(3);e.xp6(21),e.Q6J("ngIf",t.userFilterLeads)}}function Ua(i,n){if(1&i&&(e.TgZ(0,"div",52),e.YNc(1,Sa,3,0,"div",53),e.YNc(2,Na,22,1,"ng-template",null,88,e.W1O),e.qZA()),2&i){const t=e.MAs(3),a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.userFilterLeads&&0==a.userFilterLeads.length)("ngIfElse",t)}}function Va(i,n){if(1&i&&e.YNc(0,Ua,4,2,"div",87),2&i){const t=e.oxw();e.Q6J("ngIf",!t.loading)}}function Ya(i,n){1&i&&(e.TgZ(0,"button",102),e._UZ(1,"span",103),e._uU(2," Eliminando... "),e.qZA())}function Qa(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.deleteSelectedLead())}),e._uU(1," Eliminar "),e.qZA()}}function Ba(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",105),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.dismiss())}),e._uU(1," Cancelar "),e.qZA()}}function Ja(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",91)(2,"div",92)(3,"div",93)(4,"div",94)(5,"div",95)(6,"div",96)(7,"h2"),e._uU(8,"\xbfEstas seguro?"),e.qZA()()(),e.TgZ(9,"div",97)(10,"div",98),e.YNc(11,Ya,3,0,"button",99),e.YNc(12,Qa,2,0,"button",100),e.YNc(13,Ba,2,0,"button",101),e.qZA()()()()()()()),2&i){const t=e.oxw();e.xp6(11),e.Q6J("ngIf",t.deleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.deleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.deleteButtonLoader)}}function Ha(i,n){1&i&&(e.TgZ(0,"small",112),e._uU(1,"El campo debe tener m\xednimo 3 caracteres"),e.qZA())}function za(i,n){1&i&&(e.TgZ(0,"button",113),e._UZ(1,"span",103),e._uU(2," Guardando... "),e.qZA())}function ja(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",114),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.putSingleLead(o.leadNewAssigned,"vch_vendedorasignado"))}),e._uU(1," Guardar "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.isLeadNewAssignedValid||!t.leadNewAssigned||t.leadNewAssigned&&0==t.leadNewAssigned.length)}}function Ga(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.dismiss())}),e._uU(1," Cancelar "),e.qZA()}}function $a(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",91)(2,"div",92)(3,"div",93)(4,"div",94)(5,"div",95)(6,"div",96)(7,"h2"),e._uU(8,"Actualizar Asignado"),e.qZA()()(),e.TgZ(9,"div",97)(10,"div",106)(11,"label",107),e._uU(12,"Vendedor"),e.qZA(),e.TgZ(13,"input",108),e.NdJ("input",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.setLeadNewAssigned(o))}),e.qZA(),e.YNc(14,Ha,2,0,"small",109),e.qZA(),e.TgZ(15,"div",98),e.YNc(16,za,3,0,"button",110),e.YNc(17,ja,2,1,"button",111),e.YNc(18,Ga,2,0,"button",100),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(13),e.ekj("is-invalid",t.isLeadNewAssignedValid),e.xp6(1),e.Q6J("ngIf",t.isLeadNewAssignedValid),e.xp6(2),e.Q6J("ngIf",t.deleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.deleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.deleteButtonLoader)}}function Ka(i,n){if(1&i&&(e.TgZ(0,"option",46),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function Wa(i,n){1&i&&(e.TgZ(0,"button",113),e._UZ(1,"span",103),e._uU(2," Guardando... "),e.qZA())}function Xa(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",114),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.putSingleLead(o.leadNewCompany,"id_empresa"))}),e._uU(1," Guardar "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.leadNewCompany||t.leadNewCompany&&"-1"==t.leadNewCompany)}}function en(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.dismiss())}),e._uU(1," Cancelar "),e.qZA()}}function tn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",91)(2,"div",92)(3,"div",93)(4,"div",94)(5,"div",95)(6,"div",96)(7,"h2"),e._uU(8,"Actualizar vendedor"),e.qZA()()(),e.TgZ(9,"div",97)(10,"select",115,116),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(11),r=e.oxw();return e.KtG(r.setLeadNewCompany(o.value))}),e.TgZ(12,"option",117),e._uU(13,"Empresa"),e.qZA(),e.YNc(14,Ka,2,2,"option",48),e.qZA(),e.TgZ(15,"div",98),e.YNc(16,Wa,3,0,"button",110),e.YNc(17,Xa,2,1,"button",111),e.YNc(18,en,2,0,"button",100),e.qZA()()()()()()()}if(2&i){const t=e.oxw();e.xp6(14),e.Q6J("ngForOf",t.empresas),e.xp6(2),e.Q6J("ngIf",t.deleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.deleteButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.deleteButtonLoader)}}const an=function(){return["../lead-gestion"]};let nn=(()=>{class i{constructor(t,a,o,r,s){this.salesProvider=t,this.userProvider=a,this.formBuilder=o,this.modalService=r,this.toastService=s,this.bit_terminada=!1,this.nameOrigenLeads=[],this.isLeadNewAssignedValid=!1,this.filterActive=!1,this.gestionLeadsTable=!1,this.myLeadsTable=!1,this.empresas=[],this.loading=!0,this.buttonLoader=!1,this.deleteButtonLoader=!1,this.IdLeadToTransform="",this.id_empresa=this.userProvider.usuario.id_empresa,this.id_encargado=this.userProvider.usuario.id,this.id_usuario=this.userProvider.usuario.id,this.isAdmin=this.userProvider.adminAibo,this.getAllLeads(),this.getAllCompanies(),this.getAllOrigen()}ngOnInit(){this.filterFormGroup=this.formBuilder.group({vch_nombre:"",vch_email:"",vch_rut:"",id_origen:"",id_empresa:"",bit_terminada:"",ocultClosedLeads:!1,initDate:"",endDate:""})}getAllLeads(){this.salesProvider.getAllLeads().subscribe({next:t=>{let a=t.data.sort((o,r)=>new Date(r.createdAt).getTime()-new Date(o.createdAt).getTime());this.allLeads=this.isAdmin?a:a.filter(o=>{if(null==o.bit_terminada&&(o.bit_terminada=!1),o.id_empresa==this.id_empresa&&o.id_origen>=2&&1==o.estado)return o}),this.allFilterLeads=[...this.allLeads],this.userLeads=this.allLeads.filter(o=>{if(o.id_encargado==this.id_encargado)return o}).sort((o,r)=>new Date(r.createdAt).getTime()-new Date(o.createdAt).getTime()),this.userFilterLeads=[...this.userLeads],this.loading=!1},error:t=>console.log(t)})}putSingleLead(t,a){this.deleteButtonLoader=!0;const o=this.IdLeadToTransform,r={};r[a]=t,this.salesProvider.putLead(o,r).subscribe({next:s=>{this.allLeads=this.allLeads.map(l=>l.id==o?s.data:l),this.allFilterLeads=[...this.allLeads],this.userFilterLeads=[...this.userLeads].sort((l,c)=>new Date(c.createdAt).getTime()-new Date(l.createdAt).getTime()),this.filterActive&&this.filterSubmit(),this.modalService.dismissAll(),this.deleteButtonLoader=!1,this.leadNewAssigned="",this.leadNewCompany="",this.toastService.show("Actualizado con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:s=>{this.toastService.show("Error al actualizar",{classname:"bg-danger text-center  text-light",delay:3e3}),this.deleteButtonLoader=!1,this.modalService.dismissAll()}})}takeLead(t){this.salesProvider.putLead(t,{bit_terminada:1,id_encargado:this.id_usuario}).subscribe({next:o=>{this.allLeads=this.allLeads.map(r=>r.id==t?o.data:r),this.userLeads.push(o.data),this.allFilterLeads=[...this.allLeads],this.userFilterLeads=[...this.userLeads].sort((r,s)=>new Date(s.createdAt).getTime()-new Date(r.createdAt).getTime()),this.filterActive&&this.filterSubmit()},error:o=>{console.log(o)}})}dropLead(t){this.salesProvider.putLead(t,{bit_terminada:0,id_encargado:null}).subscribe({next:o=>{this.allLeads=this.allLeads.map(r=>r.id==t?o.data:r),this.userLeads=this.userLeads.filter(r=>{if(r.id!=t)return r}),this.allFilterLeads=[...this.allLeads],this.userFilterLeads=[...this.userLeads],this.filterActive&&this.filterSubmit()},error:o=>{console.log(o)}})}deleteSelectedLead(){this.deleteButtonLoader=!0;const t=this.IdLeadToTransform;this.salesProvider.deleteLead(t).subscribe({next:a=>{this.deleteButtonLoader=!1,this.modalService.dismissAll(),this.allLeads=this.allLeads.filter(o=>o.id!=t),this.userLeads=this.userLeads.filter(o=>o.id!=t),this.allFilterLeads=[...this.allLeads],this.userFilterLeads=[...this.userLeads],this.toastService.show("Eliminado con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:a=>{this.deleteButtonLoader=!1,this.modalService.dismissAll(),this.toastService.show("Error al eliminar el lead",{classname:"bg-danger text-center  text-light",delay:3e3})}})}setLeadNewCompany(t){this.leadNewCompany=t}setLeadNewAssigned(t){const o=t.target.value;this.isLeadNewAssignedValid="null"==o||o.length<3,this.leadNewAssigned=o}changeTables(t){this.myLeadsTable=t,this.gestionLeadsTable=!1}activateGestion(){this.gestionLeadsTable=!0,this.myLeadsTable=!1}filterSubmit(){this.filterActive=!0,this.allFilterLeads=this.allLeads.filter(a=>{if(this.filterValidations(a))return a}),this.userFilterLeads=this.userLeads.filter(a=>{if(this.filterValidations(a))return a})}removeFilters(){this.allFilterLeads=[...this.allLeads],this.userFilterLeads=[...this.userLeads],this.filterActive=!1,this.filterFormGroup.reset({id_origen:"",id_empresa:"",bit_terminada:""})}filterValidations(t){const a=this.filterFormGroup.value;return!(a.vch_nombre&&!t.vch_nombre?.toLocaleLowerCase().includes(a.vch_nombre.toLocaleLowerCase())&&!t.vch_razonsocial?.toLocaleLowerCase().includes(a.vch_nombre.toLocaleLowerCase())||a.vch_rut&&!t.vch_rut?.toLocaleLowerCase().includes(a.vch_rut.toLocaleLowerCase())&&!t.vch_rutempresa?.toLocaleLowerCase().includes(a.vch_rut.toLocaleLowerCase())||a.vch_email&&!t.vch_email?.toLocaleLowerCase().includes(a.vch_email.toLocaleLowerCase())||a.id_origen&&t.id_origen!=a.id_origen||a.id_empresa&&t.id_empresa!=a.id_empresa||"0"===a.bit_terminada&&null!=t.bit_terminada&&0!=t.bit_terminada||1==a.bit_terminada&&t.bit_terminada!=a.bit_terminada||a.ocultClosedLeads&&1==t.bit_closed||(a.initDate||a.endDate)&&!this.filterValidateDate(t))}filterValidateDate(t){const a=this.filterFormGroup.value,o=new Date(t.createdAt).getTime(),r=a.initDate?new Date(a.initDate.year,a.initDate.month-1,a.initDate.day).getTime():0,s=a.endDate?new Date(a.endDate.year,a.endDate.month-1,a.endDate.day).getTime():Date.now();return o>=r&&o<=s}getAllCompanies(){this.salesProvider.getEmpresas().subscribe({next:t=>{this.empresas=t.data},error:t=>console.log(t)})}getCompanieByID(t){return t?this.empresas.find(a=>a.id==t)?.vch_nombre:"Ninguno"}open(t,a){this.IdLeadToTransform=a,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{},o=>{})}getAllOrigen(){this.salesProvider.getAllOrigen().subscribe({next:t=>{this.nameOrigenLeads=t.data}})}exportToExcel(t,a){let o=document.getElementById(t);const r=D.P6.table_to_sheet(o),s=D.P6.book_new();D.P6.book_append_sheet(s,r,"Sheet1"),D.NC(s,a)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.M),e.Y36(k.i),e.Y36(d.qu),e.Y36(T.FF),e.Y36(q.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lead"]],decls:74,vars:10,consts:[[1,"card","mb-5","mb-xl-10"],[1,"card-header","border-0","pt-5"],[1,"nav","nav-tabs"],[1,"nav-item"],[1,"nav-link","fw-bolder","fs-4",3,"click"],[1,"float-right"],["table","leads-table","name","ListadoLeads.xlsx"],[3,"routerLink"],[1,"btn","btn-primary","ms-5"],[1,"card-toolbar","my-4"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","placeholder","Nombre","name","vch_nombre","formControlName","vch_nombre",1,"form-control"],["type","text","placeholder","Rut","name","vch_rut","formControlName","vch_rut",1,"form-control"],["type","text","placeholder","Email","name","vch_email","formControlName","vch_email",1,"form-control"],["data-control","selectOrigen","data-hide-search","true","data-placeholder","Select an option","formControlName","id_origen","name","id_origen","title","id_origen",1,"form-select","mb-2"],["value","","disabled","","default","","selected","","hidden",""],["value","1",4,"ngIf"],[4,"ngFor","ngForOf"],["data-control","selectDisponibilidad","data-hide-search","true","data-placeholder","Select an option","formControlName","bit_terminada","name","bit_terminada","title","bit_terminada",1,"form-select","mb-2"],["value","0"],["value","1"],[1,"row","mt-5"],["class","col",4,"ngIf"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","initDate","formControlName","initDate","ngbDatepicker","",1,"form-control"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control"],["dFin","ngbDatepicker"],[1,"col","d-flex","align-items-center"],[1,"form-check","form-switch"],["type","checkbox","id","ocultClosedLeads","formControlName","ocultClosedLeads",1,"form-check-input"],["for","ocultClosedLeads",1,"form-check-label","text-start","fw-bolder"],[1,"row","d-flex","justify-content-between","mt-5"],["type","submit","value","Filtrar",1,"btn","btn-primary","mt-4","mb-3","me-4"],["title","borrar filtros","type","button","class","btn btn-danger mt-4 mb-3 me-4",3,"click",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body py-3",4,"ngIf","ngIfElse"],["userTable",""],["deleteLead",""],["updateAssignedLead",""],["updateCompanyLead",""],["aria-live","polite","aria-atomic","true"],[3,"value",4,"ngIf"],[3,"value"],["formControlName","id_empresa","name","id_empresa","title","id_empresa",1,"form-select","mb-2"],[3,"value",4,"ngFor","ngForOf"],["title","borrar filtros","type","button",1,"btn","btn-danger","mt-4","mb-3","me-4",3,"click"],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],[1,"card-body","py-3"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf","ngIfElse"],[1,"table-responsive"],["haveAllProducts",""],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],["id","leads-table",1,"table","table-row-dashed","align-middle","table-hover","table-responsive"],[1,"fw-bolder","text-muted"],[1,"text-start"],["class","text-start",4,"ngIf"],[4,"ngIf"],[1,"text-start","fw-bolder"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"],["class","text-start fw-bolder",4,"ngIf"],["class","text-gray-800 text-hover-primary fs-5 fw-bolder cursor-pointer",3,"click",4,"ngIf"],["class","text-gray-800 text-hover-primary fs-5 fw-bolder cursor-pointer",3,"routerLink",4,"ngIf"],[2,"visibility","hidden"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder","cursor-pointer",3,"click"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder","cursor-pointer",3,"routerLink"],["class","btn btn-primary","type","button","disabled","",4,"ngIf","ngIfElse"],["terminadoButton",""],["adminButtons",""],["disponibleAdmin",""],["notAdminButtons",""],["disponible",""],["tomada",""],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],["class","btn btn-success btn-sm disabled",4,"ngIf","ngIfElse"],[1,"btn","btn-success","btn-sm","disabled"],["class","btn btn-danger btn-sm",3,"click",4,"ngIf","ngIfElse"],[1,"btn","btn-danger","btn-sm",3,"click"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf","ngIfElse"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-primary","disabled","btn-sm"],[1,"btn","btn-primary","me-2","mb-2","btn-sm",3,"routerLink"],["class","card-body py-3",4,"ngIf"],["haveUserLeads",""],["class","btn btn-success btn-sm disabled",4,"ngIf"],["class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","justify-content-center","gap-2","gap-md-5"],[1,"card-title","col-12","mb-5","justify-content-center"],[1,"card-body","pt-8"],[1,"row","justify-content-between"],["class","btn btn-sm btn-danger col-12 disabled","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-danger col-5",3,"click",4,"ngIf"],["class","btn btn-sm btn-primary col-5",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-sm","btn-danger","col-12","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"btn","btn-sm","btn-danger","col-5",3,"click"],[1,"btn","btn-sm","btn-primary","col-5",3,"click"],[1,"mt-3","mb-5","fv-row","col-6"],[1,"required","form-label"],["type","text",1,"form-control","mb-2","col-6",3,"input"],["class","text-danger",4,"ngIf"],["class","btn btn-sm btn-primary col-12 disabled","type","button","disabled","",4,"ngIf"],["class","btn btn-sm btn-primary col-5",3,"disabled","click",4,"ngIf"],[1,"text-danger"],["type","button","disabled","",1,"btn","btn-sm","btn-primary","col-12","disabled"],[1,"btn","btn-sm","btn-primary","col-5",3,"disabled","click"],[1,"form-select","form-select-lg","m-5","ms-0",3,"change"],["setCompany",""],["value","-1","selected",""]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"button",4),e.NdJ("click",function(){return a.changeTables(!1)}),e._uU(5," Todos los leads "),e.qZA()(),e.TgZ(6,"li",3)(7,"button",4),e.NdJ("click",function(){return a.changeTables(!0)}),e._uU(8," Mis leads "),e.qZA()(),e.TgZ(9,"li",3)(10,"button",4),e.NdJ("click",function(){return a.activateGestion()}),e._uU(11," Gestion de Leads "),e.qZA()()(),e.TgZ(12,"div",5),e._UZ(13,"app-export-excel",6),e.TgZ(14,"a",7)(15,"button",8),e._uU(16,"Crear lead"),e.qZA()()(),e.TgZ(17,"div",9)(18,"form",10),e.NdJ("ngSubmit",function(){return a.filterSubmit()}),e.TgZ(19,"div",11)(20,"div",12),e._UZ(21,"input",13),e.qZA(),e.TgZ(22,"div",12),e._UZ(23,"input",14),e.qZA(),e.TgZ(24,"div",12),e._UZ(25,"input",15),e.qZA(),e.TgZ(26,"div",12)(27,"select",16)(28,"option",17),e._uU(29,"Origen"),e.qZA(),e.YNc(30,Wi,2,0,"option",18),e.YNc(31,ea,2,1,"ng-container",19),e.qZA()(),e.TgZ(32,"div",12)(33,"select",20)(34,"option",17),e._uU(35," Disponibilidad "),e.qZA(),e.TgZ(36,"option",21),e._uU(37,"Disponible"),e.qZA(),e.TgZ(38,"option",22),e._uU(39,"Tomado"),e.qZA()()()(),e.TgZ(40,"div",23),e.YNc(41,ia,5,1,"div",24),e.TgZ(42,"div",12)(43,"div",25),e._UZ(44,"input",26,27),e.TgZ(46,"button",28),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(45);return e.KtG(s.toggle())}),e._uU(47," . "),e.qZA()()(),e.TgZ(48,"div",12)(49,"div",25),e._UZ(50,"input",29,30),e.TgZ(52,"button",28),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(51);return e.KtG(s.toggle())}),e._uU(53," . "),e.qZA()()(),e.TgZ(54,"div",31)(55,"div",32),e._UZ(56,"input",33),e.TgZ(57,"label",34),e._uU(58,"Ocultar leads terminados"),e.qZA()()()(),e.TgZ(59,"div",35)(60,"div",12),e._UZ(61,"input",36),e.YNc(62,aa,2,0,"button",37),e.qZA()()()()(),e.YNc(63,na,2,0,"div",38),e.YNc(64,Ma,5,2,"div",39),e.YNc(65,Va,1,1,"ng-template",null,40,e.W1O),e.qZA(),e.YNc(67,Ja,14,3,"ng-template",null,41,e.W1O),e.YNc(69,$a,19,6,"ng-template",null,42,e.W1O),e.YNc(71,tn,19,4,"ng-template",null,43,e.W1O),e._UZ(73,"app-toast",44)}if(2&t){const o=e.MAs(66);e.xp6(14),e.Q6J("routerLink",e.DdM(9,an)),e.xp6(4),e.Q6J("formGroup",a.filterFormGroup),e.xp6(12),e.Q6J("ngIf",a.isAdmin),e.xp6(1),e.Q6J("ngForOf",a.nameOrigenLeads),e.xp6(10),e.Q6J("ngIf",a.isAdmin),e.xp6(21),e.Q6J("ngIf",a.filterActive),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.myLeadsTable&&!a.loading)("ngIfElse",o)}},dependencies:[_.sg,_.O5,x.rH,x.yS,d._Y,d.YN,d.Kr,d.Fj,d.Wl,d.EJ,d.JJ,d.JL,T.J4,d.sg,d.u,U.q,H.$,_.i8,_.rS,_.uU]}),i})();const on=["dangerTpl"];function rn(i,n){if(1&i&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function sn(i,n){if(1&i&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function ln(i,n){if(1&i&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function dn(i,n){if(1&i&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function cn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"input",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.reset())}),e.qZA()}}function un(i,n){1&i&&(e.TgZ(0,"div",42)(1,"strong"),e._uU(2,"Sin Ventas"),e.qZA()())}function _n(i,n){1&i&&(e.TgZ(0,"div",43),e._UZ(1,"img",44),e.qZA())}function pn(i,n){1&i&&(e.TgZ(0,"span",62),e._uU(1,"Preventa"),e.qZA())}function mn(i,n){1&i&&(e.TgZ(0,"span",62),e._uU(1,"A Pedido"),e.qZA())}const L=function(i){return[i]};function hn(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"a",51),e._uU(3),e.qZA()(),e.TgZ(4,"td",52)(5,"a",53),e._uU(6),e.qZA()(),e.TgZ(7,"td",52)(8,"a",53),e._uU(9),e.qZA()(),e.TgZ(10,"td",54)(11,"a",55),e._uU(12),e.qZA()(),e.TgZ(13,"td",52)(14,"a",55),e._uU(15),e.qZA()(),e.TgZ(16,"td",52)(17,"a",55),e._uU(18),e.qZA()(),e.TgZ(19,"td",56)(20,"a",55),e._uU(21),e.ALo(22,"currency"),e.qZA()(),e.TgZ(23,"td",57)(24,"a",55)(25,"span",58),e._uU(26,"|"),e.qZA(),e._uU(27),e.ALo(28,"date"),e.TgZ(29,"span",58),e._uU(30,"|"),e.qZA()()(),e.TgZ(31,"td",59)(32,"span",60),e._uU(33),e.qZA(),e.YNc(34,pn,2,0,"span",61),e.YNc(35,mn,2,0,"span",61),e.qZA()()),2&i){const t=n.$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("routerLink",e.VKq(28,L,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.id),e.xp6(2),e.Q6J("routerLink",e.VKq(30,L,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.rutCliente),e.xp6(2),e.Q6J("routerLink",e.VKq(32,L,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.bit_factura&&t.nombreEmpresaCliente?t.nombreEmpresaCliente:t.nombreCliente),e.xp6(2),e.Q6J("routerLink",e.VKq(34,L,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.categoria),e.xp6(2),e.Q6J("routerLink",e.VKq(36,L,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.medioPago),e.xp6(2),e.Q6J("routerLink",e.VKq(38,L,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.medioEnvio),e.xp6(2),e.Q6J("routerLink",e.VKq(40,L,"../detalle/"+t.id)),e.xp6(1),e.Oqu(e.gM2(22,20,t.TotalPagado+t.porPagar+t.envio,"$","code","1.0-0")),e.xp6(3),e.Q6J("routerLink",e.VKq(42,L,"../detalle/"+t.id)),e.xp6(3),e.Oqu(e.xi3(28,25,t.dt_fecha,"dd/MM/yyyy")),e.xp6(5),e.Q6J("ngClass",a.getCssStatus(t.color)),e.xp6(1),e.Oqu(t.estado),e.xp6(1),e.Q6J("ngIf",t.bit_preventa),e.xp6(1),e.Q6J("ngIf",t.bit_apedido)}}function fn(i,n){if(1&i&&(e.TgZ(0,"div",45)(1,"table",46)(2,"thead")(3,"tr",47)(4,"th",8),e._uU(5,"Orden ID"),e.qZA(),e.TgZ(6,"th",8),e._uU(7,"Rut Cliente"),e.qZA(),e.TgZ(8,"th",8),e._uU(9,"Nombre Cliente"),e.qZA(),e.TgZ(10,"th",48),e._uU(11,"Categor\xeda"),e.qZA(),e.TgZ(12,"th",8),e._uU(13,"Tipo Pago"),e.qZA(),e.TgZ(14,"th",8),e._uU(15,"Tipo Env\xedo"),e.qZA(),e.TgZ(16,"th",8),e._uU(17,"Total Venta"),e.qZA(),e.TgZ(18,"th",8),e._uU(19,"Fecha"),e.qZA(),e.TgZ(20,"th",8),e._uU(21,"Estado"),e.qZA()()(),e.TgZ(22,"tbody",49),e.YNc(23,hn,36,44,"tr",50),e.qZA()()()),2&i){const t=e.oxw();e.xp6(23),e.Q6J("ngForOf",t.ventas)}}let gn=(()=>{class i{constructor(t,a,o,r,s){this.ventaProvider=t,this.formBuilder=a,this.userService=o,this.userProvider=r,this.toastService=s,this.loading=!0,this.categoriasPadres=[],this.sinVentas=!1,this.totalPagado=0,this.totalaPagar=0,this.subtotal=0,this.filterActive=!1,this.name="ListadoVentas.xlsx",this.categoriasPadre(),this.myGroup=this.formBuilder.group({idVenta:"",idEstadoventa:"",nombreComprador:"",rutComprador:"",categoria:"",medioPago:"",medioEnvio:"",fechaInicio:"",fechaFin:"",presale:!1,onDemand:!1})}ngOnInit(){this.medioPago(),this.estadosVenta(),this.medioEnvio(),this.loadVentas(),this.myGroup=this.formBuilder.group({idVenta:"",idEstadoventa:"",nombreComprador:"",rutComprador:"",categoria:"",medioPago:"",medioEnvio:"",fechaInicio:"",fechaFin:"",presale:!1,onDemand:!1}),this.myGroup.get("presale")?.valueChanges.subscribe(t=>{t&&this.myGroup.get("onDemand")?.setValue(!1)}),this.myGroup.get("onDemand")?.valueChanges.subscribe(t=>{t&&this.myGroup.get("presale")?.setValue(!1)})}loadVentas(){this.ventaProvider.getVentas(this.userProvider.usuario.id_empresa).subscribe({next:t=>{t.data&&(this.ventas=[...t.data].sort((a,o)=>new Date(o.id).getTime()-new Date(a.id).getTime()),this.sinVentas=!1),console.log(this.ventas),console.log(t)},error:t=>{t?.error?.code&&3==t?.error?.code?this.sinVentas=!0:this.toastService.show(this.errorToast,{classname:"bg-danger text-light",delay:15e3}),this.loading=!1},complete:()=>this.loading=!1})}getCssStatus(t){let a;switch(t){case"bg-success":a="badge-light-success";break;case"bg-warning":a="badge-light-warning";break;default:a="badge-light-danger"}return a}onSubmit(t){const a=this.userService.usuario.id_empresa;this.formData=this.myGroup.value,console.log(this.myGroup.value);let o={};this.formData.idVenta&&(o.idVenta=this.formData.idVenta),this.formData.idEstadoventa&&(o.idEstadoventa=this.formData.idEstadoventa),this.formData.nombreComprador&&(o.nombreComprador=this.formData.nombreComprador),this.formData.rutComprador&&(o.rutComprador=this.formData.rutComprador),this.formData.categoria&&(o.categoria=this.formData.categoria),this.formData.medioPago&&(o.medioPago=this.formData.medioPago),this.formData.medioEnvio&&(o.medioEnvio=this.formData.medioEnvio),this.formData.fechaInicio&&(o.fechaInicio=`${this.formData.fechaInicio.year}-${this.formData.fechaInicio.month}-${this.formData.fechaInicio.day}`),this.formData.fechaFin&&(o.fechaFin=`${this.formData.fechaFin.year}-${this.formData.fechaFin.month}-${this.formData.fechaFin.day}`),o.presale=this.formData.presale,o.onDemand=this.formData.onDemand,this.filterActive=!0,this.ventaProvider.filtro(o,a).subscribe({next:r=>{r.data&&(this.ventas=[...r.data],console.log(this.ventas)),this.loading=!1},error:r=>console.error(r),complete:()=>this.loading=!1})}reset(){this.myGroup.reset({idVenta:"",idEstadoventa:"",nombreComprador:"",rutComprador:"",categoria:"",medioPago:"",medioEnvio:"",fechaInicio:"",fechaFin:""})}categoriasPadre(){this.ventaProvider.getCategoriaPadre(this.userService.usuario.id_empresa).subscribe(a=>{this.categoriasPadres=a.data})}estadosVenta(){this.ventaProvider.getEstadosVenta().subscribe(t=>{this.estadosVentas=t.data,console.log(this.estadosVentas)})}medioPago(){this.ventaProvider.getMediosPago().subscribe(t=>{this.mediosPagos=t.data,console.log(this.mediosPagos)})}medioEnvio(){this.ventaProvider.getMediosEnvio().subscribe(t=>{this.mediosEnvios=t.data,console.log(this.mediosEnvios)})}exportToExcel(){let t=document.getElementById("sales-table");const a=D.P6.table_to_sheet(t),o=D.P6.book_new();D.P6.book_append_sheet(o,a,"Sheet1"),D.NC(o,this.name)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.M),e.Y36(d.qu),e.Y36(k.i),e.Y36(k.i),e.Y36(q.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list"]],viewQuery:function(t,a){if(1&t&&e.Gf(on,5),2&t){let o;e.iGM(o=e.CRH())&&(a.errorToast=o.first)}},decls:64,vars:9,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","placeholder","ID Venta","name","idVenta","formControlName","idVenta",1,"form-control"],["type","text","placeholder","Rut Comprador","formControlName","rutComprador","name","rutComprador",1,"form-control"],["type","text","placeholder","Nombre Comprador","formControlName","nombreComprador","name","nombreComprador",1,"form-control"],["data-control","select2","data-hide-search","true","data-placeholder","Select an option","formControlName","categoria","name","categor\xeda",1,"form-select","mb-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],["data-control","select2","data-hide-search","true","data-placeholder","Select an option","formControlName","medioPago","name","medioPago",1,"form-select","mb-2"],["data-control","select2","data-hide-search","true","data-placeholder","Select an option","formControlName","medioEnvio","name","medioEnvio",1,"form-select","mb-2"],["data-control","select2","data-hide-search","true","data-placeholder","Select an option","formControlName","idEstadoventa","name","idEstadoventa",1,"form-select","mb-2"],[1,"row","mt-5"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","fechaInicio","formControlName","fechaInicio","ngbDatepicker","",1,"form-control"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["placeholder","yyyy-mm-dd","name","fechaFin","formControlName","fechaFin","ngbDatepicker","",1,"form-control"],["dFin","ngbDatepicker"],[1,"col","d-flex","align-items-center"],[1,"form-check","form-switch","mb-0","d-flex","flex-column","align-items-center","p-0","ms-3","me-5"],["for","presale",1,"form-check-label","text-start","fs-6"],["type","checkbox","id","presale","formControlName","presale",1,"form-check-input","m-0"],[1,"form-check","form-switch","mb-0","d-flex","flex-column","align-items-center","p-0","ms-5"],["for","onDemand",1,"form-check-label","text-start","fs-6"],["type","checkbox","id","onDemand","formControlName","onDemand",1,"form-check-input","m-0"],["type","submit","value","Buscar",1,"btn","btn-sm","btn-primary","mt-5"],["type","submit","value","Quitar Filtros","class","btn btn-sm btn-danger mt-5 mx-5",3,"click",4,"ngIf"],["routerLink","/sales/add-sale",1,"btn","btn-sm","btn-secondary","position-absolute","top-15","end-0",2,"margin-right","200px","margin-top","15px"],[1,"btn","btn-sm","btn-success","position-absolute","top-15","end-0",2,"margin-right","30px","margin-top","15px",3,"click"],[1,"card-toolbar","flex-row-fluid","justify-content-end","gap-5"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body pt-0","id","sales-table",4,"ngIf"],[3,"value"],["type","submit","value","Quitar Filtros",1,"btn","btn-sm","btn-danger","mt-5","mx-5",3,"click"],["role","alert",1,"alert","alert-danger","m-10"],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],["id","sales-table",1,"card-body","pt-0"],["id","kt_ecommerce_sales_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"col","text-center"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],[1,"text-gray-800","text-hover-primary","fw-bolder",3,"routerLink"],[1,"text-gray-800","fs-5","fw-bolder"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"],[1,"text-gray-800","fs-5","fw-bolder","text-center"],[1,"fw-bolder","text-gray-800","text-hover-primary",3,"routerLink"],[1,"pe-0"],["data-order","2022-03-23",1,"pe-0"],[2,"visibility","hidden"],["data-order","Completed",1,"pe-0","flex-column","align-items-end","justify-content-center",2,"max-width","120px"],[1,"badge","width-auto",3,"ngClass"],["class","badge badge-light-primary mt-2 width-auto",4,"ngIf"],[1,"badge","badge-light-primary","mt-2","width-auto"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.NdJ("ngSubmit",function(){return a.onSubmit(a.f)}),e.TgZ(7,"div",7)(8,"div",8),e._UZ(9,"input",9),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"input",10),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"input",11),e.qZA(),e.TgZ(14,"div",8)(15,"select",12)(16,"option",13),e._uU(17,"Categor\xeda"),e.qZA(),e.YNc(18,rn,2,2,"option",14),e.qZA()(),e.TgZ(19,"div",8)(20,"select",15)(21,"option",13),e._uU(22,"Pago"),e.qZA(),e.YNc(23,sn,2,2,"option",14),e.qZA()(),e.TgZ(24,"div",8)(25,"select",16)(26,"option",13),e._uU(27,"Env\xedo"),e.qZA(),e.YNc(28,ln,2,2,"option",14),e.qZA()(),e.TgZ(29,"div",8)(30,"select",17)(31,"option",13),e._uU(32,"Estado"),e.qZA(),e.YNc(33,dn,2,2,"option",14),e.qZA()()(),e.TgZ(34,"div",18)(35,"div",8)(36,"div",19),e._UZ(37,"input",20,21),e.TgZ(39,"button",22),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(38);return e.KtG(s.toggle())}),e.qZA()()(),e.TgZ(40,"div",8)(41,"div",19),e._UZ(42,"input",23,24),e.TgZ(44,"button",22),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(43);return e.KtG(s.toggle())}),e.qZA()()(),e.TgZ(45,"div",25)(46,"div",26)(47,"label",27),e._uU(48,"Preventa"),e.qZA(),e._UZ(49,"input",28),e.qZA(),e.TgZ(50,"div",29)(51,"label",30),e._uU(52,"A pedido"),e.qZA(),e._UZ(53,"input",31),e.qZA()()(),e._UZ(54,"input",32),e.YNc(55,cn,1,0,"input",33),e.TgZ(56,"button",34),e._uU(57,"Agregar Venta Manual"),e.qZA(),e.TgZ(58,"button",35),e.NdJ("click",function(){return a.exportToExcel()}),e._uU(59,"Exportar a Excel"),e.qZA()()(),e._UZ(60,"div",36),e.qZA(),e.YNc(61,un,3,0,"div",37),e.YNc(62,_n,2,0,"div",38),e.YNc(63,fn,24,1,"div",39),e.qZA()()()()}2&t&&(e.xp6(6),e.Q6J("formGroup",a.myGroup),e.xp6(12),e.Q6J("ngForOf",a.categoriasPadres),e.xp6(5),e.Q6J("ngForOf",a.mediosPagos),e.xp6(5),e.Q6J("ngForOf",a.mediosEnvios),e.xp6(5),e.Q6J("ngForOf",a.estadosVentas),e.xp6(22),e.Q6J("ngIf",a.filterActive),e.xp6(6),e.Q6J("ngIf",a.sinVentas),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading))},dependencies:[_.mk,_.sg,_.O5,x.rH,x.yS,d._Y,d.YN,d.Kr,d.Fj,d.Wl,d.EJ,d.JJ,d.JL,T.J4,d.sg,d.u,_.H9,_.uU]}),i})(),vn=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sales"]],decls:1,vars:0,template:function(t,a){1&t&&e._UZ(0,"router-outlet")},dependencies:[x.lC],encapsulation:2}),i})();function bn(i,n){1&i&&(e.TgZ(0,"div",4),e._UZ(1,"img",5),e.qZA())}function xn(i,n){1&i&&(e.TgZ(0,"button",23),e._UZ(1,"span",24),e._uU(2," Cargando... "),e.qZA())}function yn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.dropLead(o.lead.id))}),e._uU(1," Liberar "),e.qZA()}}function Cn(i,n){if(1&i&&e.YNc(0,yn,2,0,"button",25),2&i){e.oxw();const t=e.MAs(5),a=e.oxw(2);e.Q6J("ngIf",a.lead.bit_terminada&&(a.lead.id_encargado==a.id_usuario||a.isAdmin))("ngIfElse",t)}}function An(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.takeLead(o.lead.id))}),e._uU(1," Tomar "),e.qZA()}}function wn(i,n){if(1&i&&e.YNc(0,An,2,0,"button",27),2&i){const t=e.oxw(3);e.Q6J("ngIf",!t.lead.bit_terminada)}}function Tn(i,n){1&i&&(e.TgZ(0,"button",29),e._UZ(1,"span",30),e._uU(2," Cargando... "),e.qZA())}function Dn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.finishLead(o.lead.id))}),e._uU(1," Cerrar Lead "),e.qZA()}}function Zn(i,n){if(1&i&&e.YNc(0,Dn,2,0,"button",31),2&i){const t=e.oxw(3);e.Q6J("ngIf",t.lead.bit_terminada&&t.lead.estado&&(t.lead.id_encargado==t.id_usuario||t.isAdmin))}}function kn(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,xn,3,0,"button",18),e.YNc(2,Cn,1,2,"ng-template",null,19,e.W1O),e.YNc(4,wn,1,1,"ng-template",null,20,e.W1O),e.YNc(6,Tn,3,0,"button",21),e.YNc(7,Zn,1,1,"ng-template",null,22,e.W1O),e.qZA()),2&i){const t=e.MAs(3),a=e.MAs(8),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.buttonLoader)("ngIfElse",t),e.xp6(5),e.Q6J("ngIf",o.buttonLoaderFinishLead)("ngIfElse",a)}}function Mn(i,n){1&i&&(e.TgZ(0,"button",29),e._UZ(1,"span",30),e._uU(2," Cargando... "),e.qZA())}function Sn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.reactivateLead(o.lead.id))}),e._uU(1," Reactivar Lead "),e.qZA()}}function In(i,n){if(1&i&&e.YNc(0,Sn,2,0,"button",36),2&i){e.oxw();const t=e.MAs(5),a=e.oxw(2);e.Q6J("ngIf",a.lead.bit_closed&&(a.lead.id_encargado==a.userId||a.isAdmin))("ngIfElse",t)}}function En(i,n){1&i&&(e.TgZ(0,"button",39),e._uU(1," Lead cerrado "),e.qZA())}function Fn(i,n){if(1&i&&e.YNc(0,En,2,0,"button",38),2&i){const t=e.oxw(3);e.Q6J("ngIf",t.lead.bit_closed)}}function qn(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Mn,3,0,"button",33),e.YNc(2,In,1,2,"ng-template",null,34,e.W1O),e.YNc(4,Fn,1,1,"ng-template",null,35,e.W1O),e.qZA()),2&i){const t=e.MAs(3),a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.buttonLoaderFinishLead)("ngIfElse",t)}}function Ln(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Cluster"),e.qZA(),e.TgZ(3,"div",17)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(null==t.lead.tbl_tiponegocio?null:t.lead.tbl_tiponegocio.vch_nombre)}}function On(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Producto"),e.qZA(),e.TgZ(3,"div",17)(4,"span",40),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.AsE("(Sku ",t.lead.vch_sku,") - ",t.productName,"")}}function Rn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"div",14)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.vch_nombre)}}function Pn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Razon social"),e.qZA(),e.TgZ(3,"div",14)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.vch_razonsocial)}}function Nn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Rut"),e.qZA(),e.TgZ(3,"div",14)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.vch_rut)}}function Un(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Rut empresa"),e.qZA(),e.TgZ(3,"div",14)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.vch_rutempresa)}}function Vn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"div",14)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.vch_email)}}function Yn(i,n){1&i&&(e.TgZ(0,"span",44),e._uU(1,"Solicitando llamada!"),e.qZA())}function Qn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2," Telefono "),e.qZA(),e.TgZ(3,"div",41)(4,"span",42),e._uU(5),e.qZA(),e.YNc(6,Yn,2,0,"span",43),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.vch_telefono),e.xp6(1),e.Q6J("ngIf",t.lead.bit_llamame)}}function Bn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Monto"),e.qZA(),e.TgZ(3,"div",17)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.db_monto)}}function Jn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Regi\xf3n"),e.qZA(),e.TgZ(3,"div",17)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.leadRegionName)}}function Hn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Comuna"),e.qZA(),e.TgZ(3,"div",17)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.leadComunaName)}}function zn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Plazo"),e.qZA(),e.TgZ(3,"div",17)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.int_plazo)}}function jn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"\xbfOpera con mas de 24 meses?"),e.qZA(),e.TgZ(3,"div",17)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.bit_24meses)}}function Gn(i,n){if(1&i&&(e.TgZ(0,"div",12)(1,"label",13),e._uU(2,"Comentarios"),e.qZA(),e.TgZ(3,"div",17)(4,"span",15),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Oqu(t.lead.vch_comentario)}}function $n(i,n){if(1&i&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"h3",9),e._uU(4),e.qZA()(),e.YNc(5,kn,9,4,"div",10),e.YNc(6,qn,6,2,"div",10),e.qZA(),e.TgZ(7,"div",11)(8,"div",12)(9,"label",13),e._uU(10,"Fecha"),e.qZA(),e.TgZ(11,"div",14)(12,"span",15),e._uU(13),e.ALo(14,"date"),e.qZA()()(),e.TgZ(15,"div",12)(16,"label",13),e._uU(17,"Estado"),e.qZA(),e.TgZ(18,"div",14)(19,"span",15),e._uU(20),e.qZA()()(),e.YNc(21,Ln,6,1,"div",16),e.TgZ(22,"div",12)(23,"label",13),e._uU(24,"Encargado del lead"),e.qZA(),e.TgZ(25,"div",17)(26,"span",15),e._uU(27),e.qZA()()(),e.YNc(28,On,6,2,"div",16),e.YNc(29,Rn,6,1,"div",16),e.YNc(30,Pn,6,1,"div",16),e.YNc(31,Nn,6,1,"div",16),e.YNc(32,Un,6,1,"div",16),e.YNc(33,Vn,6,1,"div",16),e.YNc(34,Qn,7,2,"div",16),e.YNc(35,Bn,6,1,"div",16),e.YNc(36,Jn,6,1,"div",16),e.YNc(37,Hn,6,1,"div",16),e.YNc(38,zn,6,1,"div",16),e.YNc(39,jn,6,1,"div",16),e.YNc(40,Gn,6,1,"div",16),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.tipoLead),e.xp6(1),e.Q6J("ngIf",!t.ocultTomarLiberarButtons&&!t.lead.bit_closed),e.xp6(1),e.Q6J("ngIf",t.ocultTomarLiberarButtons),e.xp6(7),e.Oqu(e.xi3(14,20,t.lead.createdAt,"short")),e.xp6(7),e.Oqu(t.lead.bit_closed?"Cerrado":"Activo"),e.xp6(1),e.Q6J("ngIf",null==t.lead.tbl_tiponegocio?null:t.lead.tbl_tiponegocio.vch_nombre),e.xp6(6),e.Oqu(t.encargadoName?t.encargadoName:"Nadie"),e.xp6(1),e.Q6J("ngIf",t.lead.vch_sku),e.xp6(1),e.Q6J("ngIf",t.lead.vch_nombre),e.xp6(1),e.Q6J("ngIf",t.lead.vch_razonsocial),e.xp6(1),e.Q6J("ngIf",t.lead.vch_rut),e.xp6(1),e.Q6J("ngIf",t.lead.vch_rutempresa),e.xp6(1),e.Q6J("ngIf",t.lead.vch_email),e.xp6(1),e.Q6J("ngIf",t.lead.vch_telefono),e.xp6(1),e.Q6J("ngIf",t.lead.db_monto),e.xp6(1),e.Q6J("ngIf",t.leadRegionName),e.xp6(1),e.Q6J("ngIf",t.leadComunaName),e.xp6(1),e.Q6J("ngIf",t.lead.int_plazo),e.xp6(1),e.Q6J("ngIf",t.lead.bit_24meses),e.xp6(1),e.Q6J("ngIf",t.lead.vch_comentario)}}const Kn=function(){return["../"]};let Wn=(()=>{class i{constructor(t,a,o,r){this.salesProvider=t,this.userProvider=a,this.productProvider=o,this.loading=!0,this.leadComunaId="",this.leadComunaName="",this.leadRegionId="",this.leadRegionName="",this.ocultTomarLiberarButtons=!1,this.buttonLoaderFinishLead=!1,this.id_lead=r.snapshot.params.id,this.id_empresa=this.userProvider.usuario.id_empresa,this.id_usuario=this.userProvider.usuario.id,this.userName=this.userProvider.usuario.vch_nombre,this.userId=this.userProvider.usuario.id,this.isAdmin=this.userProvider.adminAibo;try{(0,b.z)(this.salesProvider.getOneLead(this.id_lead)).then(l=>{this.loading=!1,this.lead=l.data,this.id_producto=this.lead.id_producto,this.ocultTomarLiberarButtons=1==this.lead.bit_closed,this.id_encargado=this.lead.id_encargado?this.lead.id_encargado:"",this.leadRegionId=this.lead.id_region?this.lead.id_region:"",this.leadComunaId=this.lead.id_comuna?this.lead.id_comuna:"",this.productProvider.getProduct(this.id_producto).subscribe({next:c=>{console.log(c.data),this.productName=c.data?.vch_nombre},error:c=>{console.log(c)}}),this.salesProvider.getOneOrigen(this.lead.id_origen).subscribe({next:c=>{this.tipoLead=c.data?.vch_nombre}}),this.id_encargado.length>1&&this.salesProvider.getEncargadoLead(this.id_encargado).subscribe({next:c=>{this.encargadoName=c.data?.vch_nombre},error:c=>{console.log(c)}}),this.leadComunaId&&this.salesProvider.getOneComuna(this.leadComunaId).subscribe({next:c=>{console.log(c.data),this.leadComunaName=c.data?.vch_nombre},error:c=>{console.log(c)}}),this.leadRegionId&&this.salesProvider.getOneRegion(this.leadRegionId).subscribe({next:c=>{console.log(c.data),this.leadRegionName=c.data?.vch_nombre},error:c=>{console.log(c)}})}).catch(l=>{console.log(l)})}catch(s){console.log(s)}}ngOnInit(){}takeLead(t){this.buttonLoader=!0,this.salesProvider.putLead(t,{bit_terminada:1,id_encargado:this.id_usuario}).subscribe({next:o=>{console.log(o),this.buttonLoader=!1,this.lead=o.data,this.encargadoName=this.userName},error:o=>{console.log(o)}})}dropLead(t){this.buttonLoader=!0,this.salesProvider.putLead(t,{bit_terminada:0,id_encargado:null}).subscribe({next:o=>{console.log(o),this.buttonLoader=!1,this.lead=o.data,this.encargadoName=""},error:o=>{console.log(o)}})}finishLead(t){this.buttonLoaderFinishLead=!0,this.salesProvider.putLead(t,{bit_closed:!0}).subscribe({next:o=>{console.log(o),this.buttonLoaderFinishLead=!1,this.lead=o.data,this.ocultTomarLiberarButtons=!0},error:o=>{console.log(o)}})}reactivateLead(t){this.buttonLoaderFinishLead=!0,this.salesProvider.putLead(t,{bit_terminada:0,bit_closed:!1,id_encargado:null}).subscribe({next:o=>{console.log(o),this.buttonLoaderFinishLead=!1,this.lead=o.data,this.ocultTomarLiberarButtons=!1,this.encargadoName=""},error:o=>{console.log(o)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.M),e.Y36(k.i),e.Y36(te.M),e.Y36(x.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lead-detalle"]],decls:5,vars:4,consts:[[1,"mb-5"],[1,"text-gray-800","text-hover-primary","fs-2","fw-bolder",3,"routerLink"],["class","text-center mb-10",4,"ngIf"],["class","card mb-5 mb-xl-10","id","kt_profile_details_view",4,"ngIf"],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],["id","kt_profile_details_view",1,"card","mb-5","mb-xl-10"],[1,"card-header","py-1"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],[4,"ngIf"],[1,"card-body","p-9"],[1,"row","mb-7"],[1,"col-lg-4","fw-bold","text-muted"],[1,"col-lg-8","fv-row"],[1,"fw-bold","fs-6"],["class","row mb-7",4,"ngIf"],[1,"col-lg-8"],["class","btn my-3 btn-primary","type","button","disabled","",4,"ngIf","ngIfElse"],["userNotButtonLoader",""],["disponibleAdmin",""],["class","btn my-3 btn-primary  ms-2","type","button","disabled","",4,"ngIf","ngIfElse"],["buttonFinishLead",""],["type","button","disabled","",1,"btn","my-3","btn-primary"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm","ms-2"],["class","btn btn-danger my-3",3,"click",4,"ngIf","ngIfElse"],[1,"btn","btn-danger","my-3",3,"click"],["class","btn btn-primary my-3",3,"click",4,"ngIf"],[1,"btn","btn-primary","my-3",3,"click"],["type","button","disabled","",1,"btn","my-3","btn-primary","ms-2"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],["class","btn btn-primary my-3 ms-2",3,"click",4,"ngIf"],[1,"btn","btn-primary","my-3","ms-2",3,"click"],["class","btn my-3 btn-primary ms-2","type","button","disabled","",4,"ngIf","ngIfElse"],["reactivateLeadButton",""],["finishedLead",""],["class","btn btn-primary my-3 ms-1",3,"click",4,"ngIf","ngIfElse"],[1,"btn","btn-primary","my-3","ms-1",3,"click"],["class","btn btn-success my-3 ms-1 disabled",4,"ngIf"],[1,"btn","btn-success","my-3","ms-1","disabled"],[1,"fw-bolder","fs-6","text-dark"],[1,"col-lg-8","d-flex","align-items-center"],[1,"fw-bolder","fs-6","me-2"],["class","badge badge-success",4,"ngIf"],[1,"badge","badge-success"]],template:function(t,a){1&t&&(e.TgZ(0,"h3",0)(1,"a",1),e._uU(2," Volver "),e.qZA()(),e.YNc(3,bn,2,0,"div",2),e.YNc(4,$n,41,23,"div",3)),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(3,Kn)),e.xp6(2),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",a.lead))},dependencies:[_.O5,x.yS,_.uU],encapsulation:2}),i})();const Xn=function(){return["../lead"]};function eo(i,n){1&i&&(e.TgZ(0,"a",6),e._uU(1," Volver "),e.qZA()),2&i&&e.Q6J("routerLink",e.DdM(1,Xn))}const to=function(){return["../../lead"]};function io(i,n){1&i&&(e.TgZ(0,"a",6),e._uU(1," Volver "),e.qZA()),2&i&&e.Q6J("routerLink",e.DdM(1,to))}function ao(i,n){1&i&&(e.TgZ(0,"div",7),e._UZ(1,"img",8),e.qZA())}function no(i,n){1&i&&(e.TgZ(0,"option",50),e._uU(1,"Grenke"),e.qZA())}function oo(i,n){1&i&&(e.TgZ(0,"span",51),e._uU(1," El rut solo puede contener numeros y letra K "),e.qZA())}function ro(i,n){1&i&&(e.TgZ(0,"span",51),e._uU(1," El origen es obligatorio "),e.qZA())}function so(i,n){1&i&&(e.TgZ(0,"span",51),e._uU(1," La fecha es requerida "),e.qZA())}function lo(i,n){1&i&&(e.TgZ(0,"span",51),e._uU(1,"El nombre debe tener al menos 3 caracteres "),e.qZA())}function co(i,n){1&i&&(e.TgZ(0,"span",51),e._uU(1,"El email esta incompleto o no es correcto "),e.qZA())}function uo(i,n){1&i&&(e.TgZ(0,"button",52),e._UZ(1,"span",53),e._uU(2," Cargando... "),e.qZA())}function _o(i,n){if(1&i&&(e.TgZ(0,"button",54),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("disabled",!t.leadFormGroup.valid),e.xp6(1),e.hij(" ",t.id_lead?"Actualizar":"Crear"," Lead ")}}function po(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"h3",12),e._uU(4),e.qZA()()(),e.TgZ(5,"div",13)(6,"form",14),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submitLead())}),e.TgZ(7,"div",15)(8,"div",16)(9,"label",17),e._uU(10,"Nombre "),e.TgZ(11,"span",18),e._uU(12,"*"),e.qZA()(),e._UZ(13,"input",19),e.qZA()(),e.TgZ(14,"div",20)(15,"div",16)(16,"div",21),e._UZ(17,"input",22),e.TgZ(18,"p",23),e._uU(19,"Es razon social"),e.qZA()()()(),e.TgZ(20,"div",15)(21,"div",16)(22,"label",17),e._uU(23,"Rut sin puntos "),e.TgZ(24,"span",18),e._uU(25,"*"),e.qZA()(),e._UZ(26,"input",24),e.qZA()(),e.TgZ(27,"div",20)(28,"div",16)(29,"div",21),e._UZ(30,"input",25),e.TgZ(31,"p",23),e._uU(32,"Es rut de empresa"),e.qZA()()()(),e.TgZ(33,"div",26)(34,"div",16)(35,"label",17),e._uU(36,"Email "),e.TgZ(37,"span",18),e._uU(38,"*"),e.qZA()(),e._UZ(39,"input",27),e.qZA()(),e.TgZ(40,"div",15)(41,"div",28)(42,"label",17),e._uU(43,"Origen del lead "),e.TgZ(44,"span",18),e._uU(45,"*"),e.qZA()(),e.TgZ(46,"select",29)(47,"option",30),e._uU(48,"Origen"),e.qZA(),e.YNc(49,no,2,0,"option",31),e.TgZ(50,"option",32),e._uU(51,"Cotizacion"),e.qZA(),e.TgZ(52,"option",33),e._uU(53,"Lista de espera"),e.qZA(),e.TgZ(54,"option",34),e._uU(55,"Otro"),e.qZA(),e.TgZ(56,"option",35),e._uU(57,"Contactar vendedor"),e.qZA(),e.TgZ(58,"option",36),e._uU(59,"Cr\xe9dito directo"),e.qZA()()()(),e.TgZ(60,"div",26)(61,"div",16)(62,"label",17),e._uU(63,"Telefono"),e.qZA(),e._UZ(64,"input",37),e.qZA()(),e.TgZ(65,"div",15)(66,"div",38)(67,"label",39),e._uU(68,"Fecha del lead "),e.TgZ(69,"span",18),e._uU(70,"*"),e.qZA()(),e.TgZ(71,"div",40),e._UZ(72,"input",41,42),e.TgZ(74,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(73);return e.KtG(o.toggle())}),e._uU(75," . "),e.qZA()()()(),e.TgZ(76,"div",15)(77,"div",16)(78,"label",17),e._uU(79,"Comentario"),e.qZA(),e._UZ(80,"input",44),e.qZA()(),e.TgZ(81,"div",45),e.YNc(82,oo,2,0,"span",46),e.qZA(),e.TgZ(83,"div",45),e.YNc(84,ro,2,0,"span",46),e.qZA(),e.TgZ(85,"div",45),e.YNc(86,so,2,0,"span",46),e.qZA(),e.TgZ(87,"div",45),e.YNc(88,lo,2,0,"span",46),e.qZA(),e.TgZ(89,"div",45),e.YNc(90,co,2,0,"span",46),e.qZA(),e.TgZ(91,"div",47)(92,"div",28),e.YNc(93,uo,3,0,"button",48),e.YNc(94,_o,2,2,"button",49),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(" ",t.id_lead?"Editar Lead":"Crear Lead"," "),e.xp6(2),e.Q6J("formGroup",t.leadFormGroup),e.xp6(43),e.Q6J("ngIf",t.isAdmin),e.xp6(33),e.Q6J("ngIf",t.campoEsValido("rut")),e.xp6(2),e.Q6J("ngIf",t.campoEsValido("id_origen")),e.xp6(2),e.Q6J("ngIf",t.campoEsValido("createdAt")),e.xp6(2),e.Q6J("ngIf",t.campoEsValido("nombre")),e.xp6(2),e.Q6J("ngIf",t.campoEsValido("email")),e.xp6(3),e.Q6J("ngIf",t.leadButtonLoader),e.xp6(1),e.Q6J("ngIf",!t.leadButtonLoader)}}function mo(i,n){1&i&&(e.O4$(),e.TgZ(0,"svg",55),e._UZ(1,"path",56),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente\n"))}let Ae=(()=>{class i{constructor(t,a,o,r,s,l,c,u){if(this.salesProvider=t,this.userProvider=a,this.productProvider=o,this.fb=s,this.router=l,this.modalService=c,this.toastService=u,this.leadFormGroup=this.fb.group({nombre:["",[d.kI.required,d.kI.minLength(3)]],checkRazonSocial:[!1],rut:["",[d.kI.required]],checkRutEmpresa:[!1],id_origen:[0,[d.kI.required]],email:["",[d.kI.required,d.kI.email]],createdAt:["",[d.kI.required,this.initDateValidator()]],telefono:[""],comentario:[""]}),this.leadButtonLoader=!1,this.nombre="",this.rut="",this.id_origen="",this.email="",this.createdAt="",this.telefono="",this.checkRazonSocial=!1,this.checkRutEmpresa=!1,this.loading=!0,this.buttonLoaderFinishLead=!1,this.id_lead=r.snapshot.params.id,this.id_empresa=this.userProvider.usuario.id_empresa,this.id_usuario=this.userProvider.usuario.id,this.userName=this.userProvider.usuario.vch_nombre,this.isAdmin=this.userProvider.adminAibo,this.id_lead)try{(0,b.z)(this.salesProvider.getOneLead(this.id_lead)).then(h=>{this.lead=h.data,this.id_producto=this.lead.id_producto,this.tipoLead=1==this.lead.id_origen?"Grenke":2==this.lead.id_origen?"Cotizacion":"Lista de espera",this.id_encargado=this.lead.id_encargado?this.lead.id_encargado:"",console.log(this.lead),this.leadFormGroup.reset({nombre:this.lead.vch_nombre?this.lead.vch_nombre:this.lead.vch_razonsocial,checkRazonSocial:!!this.lead.vch_razonsocial,rut:this.lead.vch_rut?this.lead.vch_rut:this.lead.vch_rutempresa,checkRutEmpresa:!!this.lead.vch_rutempresa,id_origen:this.lead.id_origen,email:this.lead.vch_email,createdAt:[this.formatCorrectDate(this.lead.createdAt),[d.kI.required,this.initDateValidator()]],telefono:this.lead.vch_telefono,comentario:this.lead.vch_comentario}),this.loading=!1}).catch(h=>{console.log(h)})}catch(m){console.log(m)}else this.loading=!1}ngOnInit(){}submitLead(){console.log(this.leadFormGroup.value);const{nombre:t,checkRazonSocial:a,rut:o,checkRutEmpresa:r,id_origen:s,email:l,createdAt:c,telefono:u,comentario:m}=this.leadFormGroup.value,h=this.formatCorrectDate(c);this.leadButtonLoader=!0;let g={};g.id_origen=s,g.createdAt=h,g.vch_email=l,g.vch_telefono=u,g.vch_comentario=m,1==a?g.vch_razonsocial=t:g.vch_nombre=t,1==r?g.vch_rutempresa=o:g.vch_rut=o,g.id_empresa=this.id_empresa,console.log(g),this.id_lead?this.salesProvider.putLead(this.id_lead,g).subscribe({next:C=>{console.log(C),this.lead=C.data,this.leadButtonLoader=!1,this.toastService.show("Actualizado con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3})},error:C=>{this.toastService.show("Error al crear",{classname:"bg-danger text-center  text-light",delay:3e3}),console.log(C),this.leadButtonLoader=!1}}):(g.id_encargado=this.id_usuario,this.salesProvider.postLead(g).subscribe({next:C=>{this.toastService.show("Creado con \xe9xito",{classname:"bg-success text-center  text-light",delay:3e3}),console.log(C),this.lead=C.data,this.leadButtonLoader=!1},error:C=>{console.log(C),this.leadButtonLoader=!1,this.toastService.show("Error al editar",{classname:"bg-danger text-center  text-light",delay:3e3})}}))}initDateValidator(){return t=>{const a=t.value;return new Date(a.year,a.month-1,a.day),new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),null}}campoEsValido(t){return this.leadFormGroup.get(t)?.errors&&this.leadFormGroup.get(t)?.touched&&this.leadFormGroup}formatCorrectDate(t){return`${t.year}-${t.month}-${t.day}`}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.M),e.Y36(k.i),e.Y36(te.M),e.Y36(x.gz),e.Y36(d.qu),e.Y36(x.F0),e.Y36(T.FF),e.Y36(q.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lead-gestion"]],decls:8,vars:4,consts:[[1,"mb-5"],["class","text-gray-800 text-hover-primary fs-2 fw-bolder",3,"routerLink",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card mb-5 mb-xl-10","id","kt_profile_details_view",4,"ngIf"],["aria-live","polite","aria-atomic","true"],["danger",""],[1,"text-gray-800","text-hover-primary","fs-2","fw-bolder",3,"routerLink"],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],["id","kt_profile_details_view",1,"card","mb-5","mb-xl-10"],[1,"card-header","py-1"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],[1,"card-body","p-9"],[3,"formGroup","ngSubmit"],[1,"row","mt-5"],[1,"col-6"],[1,"form-label"],[1,"text-danger"],["type","text","placeholder","Nombre","formControlName","nombre",1,"form-control"],[1,"row","mt-2"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox","value","selectedAll","data-kt-check","true","data-kt-check-target",".widget-13-check","formControlName","checkRazonSocial",1,"form-check-input"],[1,"mb-0","ms-3"],["type","text","placeholder","rut","formControlName","rut",1,"form-control"],["type","checkbox","value","selectedAll","data-kt-check","true","data-kt-check-target",".widget-13-check","formControlName","checkRutEmpresa",1,"form-check-input"],[1,"mt-5","row"],["type","text","placeholder","Email","name","email","formControlName","email",1,"form-control"],[1,"col-4"],["data-control","selectOrigen","data-hide-search","true","data-placeholder","Select an option","formControlName","id_origen","name","id_origen","title","id_origen",1,"form-select","mb-2"],["value","","disabled","","default","","selected","","hidden",""],["value","1",4,"ngIf"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["type","text","placeholder","Telefono","name","telefono","formControlName","telefono",1,"form-control"],[1,"col-3"],["for","createdAt",1,"form-label"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","createdAt","formControlName","createdAt","ngbDatepicker","",1,"form-control"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["type","text","placeholder","Comentario","formControlName","comentario",1,"form-control"],[1,"row","mb-2","mt-0","col-5","text-center"],["class","form-text p-1 badge-light-danger",4,"ngIf"],[1,"row"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["value","1"],[1,"form-text","p-1","badge-light-danger"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","submit",1,"btn","btn-primary",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,a){1&t&&(e.TgZ(0,"h3",0),e.YNc(1,eo,2,2,"a",1),e.YNc(2,io,2,2,"a",1),e.qZA(),e.YNc(3,ao,2,0,"div",2),e.YNc(4,po,95,10,"div",3),e._UZ(5,"app-toast",4),e.YNc(6,mo,3,0,"ng-template",null,5,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",!a.id_lead),e.xp6(1),e.Q6J("ngIf",a.id_lead),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading))},dependencies:[_.O5,x.yS,d._Y,d.YN,d.Kr,d.Fj,d.Wl,d.EJ,d.JJ,d.JL,T.J4,d.sg,d.u,U.q]}),i})();var z=p(2400);var fo=p(6099),we=p(4619),go=p(7026);const vo=["cbEnvio"],bo=["cbMedioPago"],xo=["cbVendedor"],yo=["cbEstado"],Co=["cbRegion"],Ao=["cbComuna"],wo=["cbTn"],To=["dangerTpl"];function Do(i,n){1&i&&(e.TgZ(0,"div",5),e._UZ(1,"img",6),e.qZA())}function Zo(i,n){1&i&&(e.TgZ(0,"p")(1,"ngb-alert",75)(2,"strong"),e._uU(3,"Sin productos"),e.qZA(),e._uU(4,' Presiona "+". '),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("dismissible",!1))}const j=function(i,n){return{"text-dark":i,"text-danger":n}};function ko(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",86)(3,"div",87),e._UZ(4,"img",88),e.ALo(5,"noImagen"),e.qZA(),e.TgZ(6,"div",89)(7,"span",90),e._uU(8),e.qZA(),e.TgZ(9,"span",91),e._uU(10),e.qZA()()()(),e.TgZ(11,"td")(12,"span",92),e._uU(13),e.ALo(14,"numberFormat"),e.qZA()(),e.TgZ(15,"td")(16,"div",32)(17,"span",33),e.O4$(),e.TgZ(18,"svg",34),e._UZ(19,"path",35),e.qZA()(),e.kcU(),e.TgZ(20,"input",93),e.NdJ("keyup",function(o){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.keyupTotalProduct(s,o))}),e.qZA()()(),e.TgZ(21,"td")(22,"span",92),e._uU(23),e.qZA()(),e.TgZ(24,"td")(25,"input",94),e.NdJ("change",function(o){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.changeCountProd(s,o))}),e.qZA()(),e.TgZ(26,"td",95)(27,"button",96),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.deleteProd(r.id))}),e._UZ(28,"span",17),e.qZA()()()}if(2&i){const t=n.$implicit,a=n.index;e.xp6(4),e.Q6J("src",e.lcZ(5,13,t),e.LSH),e.xp6(3),e.Q6J("ngClass",e.WLB(17,j,t.int_stock>0,0==t.int_stock)),e.xp6(1),e.hij(" ",t.vch_nombre," "),e.xp6(2),e.hij(" ",t.vch_sku," "),e.xp6(2),e.Q6J("ngClass",e.WLB(20,j,t.int_stock>0,0==t.int_stock)),e.xp6(1),e.hij(" ",e.lcZ(14,15,t.db_precio)," "),e.xp6(7),e.Q6J("ngClass",e.WLB(23,j,t.int_stock>0,0==t.int_stock))("value",t.db_precio*t.count)("id","countTotal"+a),e.xp6(2),e.Q6J("ngClass",e.WLB(26,j,t.int_stock>0,0==t.int_stock)),e.xp6(1),e.hij(" ",t.int_stock," "),e.xp6(2),e.Q6J("id","count"+a),e.xp6(3),e.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}function Mo(i,n){if(1&i&&(e.TgZ(0,"div",76)(1,"table",77)(2,"thead")(3,"tr",78)(4,"th",79),e._uU(5,"Producto"),e.qZA(),e.TgZ(6,"th",80),e._uU(7,"Unidad"),e.qZA(),e.TgZ(8,"th",81),e._uU(9,"Precio"),e.qZA(),e.TgZ(10,"th",82),e._uU(11,"stock"),e.qZA(),e.TgZ(12,"th",83),e._uU(13,"Cantidad"),e.qZA(),e._UZ(14,"th",84),e.qZA()(),e.TgZ(15,"tbody"),e.YNc(16,ko,29,29,"tr",85),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(16),e.Q6J("ngForOf",t.products)}}function So(i,n){if(1&i&&(e.TgZ(0,"div",97)(1,"div",98)(2,"div",99)(3,"span",100),e._uU(4,"Total"),e.qZA(),e.TgZ(5,"span",101),e._uU(6),e.ALo(7,"numberFormat"),e.qZA()(),e.TgZ(8,"div",102)(9,"span",100),e._uU(10,"Total + IVA"),e.qZA(),e.TgZ(11,"span",103),e._uU(12),e.ALo(13,"numberFormat"),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(6),e.Oqu(e.lcZ(7,2,t.totalPrice)),e.xp6(6),e.Oqu(e.lcZ(13,4,t.totalPriceWithIVA))}}function Io(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," Es requerido "),e.qZA())}function Eo(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," no puede ser menor a 0 "),e.qZA())}function Fo(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Io,2,0,"small",104),e.YNc(2,Eo,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.sendCost.errors?null:t.formSale.controls.sendCost.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.sendCost.errors?null:t.formSale.controls.sendCost.errors.min)}}function qo(i,n){if(1&i&&(e.TgZ(0,"div",106)(1,"label",40),e._uU(2,"Env\xedo + IVA"),e.qZA(),e.TgZ(3,"h4",107),e._uU(4),e.ALo(5,"numberFormat"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,1,t.sendCostvalueWithIVA))}}function Lo(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," Es requerido "),e.qZA())}function Oo(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function Ro(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Lo,2,0,"small",104),e.YNc(2,Oo,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.naturalName.errors?null:t.formSale.controls.naturalName.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.naturalName.errors?null:t.formSale.controls.naturalName.errors.maxlength)}}function Po(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," Es requerido "),e.qZA())}function No(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function Uo(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Po,2,0,"small",104),e.YNc(2,No,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.naturalRut.errors?null:t.formSale.controls.naturalRut.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.naturalRut.errors?null:t.formSale.controls.naturalRut.errors.maxlength)}}function Vo(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," Es requerido "),e.qZA())}function Yo(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function Qo(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Vo,2,0,"small",104),e.YNc(2,Yo,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.companyName.errors?null:t.formSale.controls.companyName.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.companyName.errors?null:t.formSale.controls.companyName.errors.maxlength)}}function Bo(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," Es requerido "),e.qZA())}function Jo(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 50 caracteres "),e.qZA())}function Ho(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Bo,2,0,"small",104),e.YNc(2,Jo,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.giro.errors?null:t.formSale.controls.giro.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.giro.errors?null:t.formSale.controls.giro.errors.maxlength)}}function zo(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," Es requerido "),e.qZA())}function jo(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function Go(i,n){if(1&i&&(e.ynx(0),e.YNc(1,zo,2,0,"small",104),e.YNc(2,jo,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.addressSend.errors?null:t.formSale.controls.addressSend.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.addressSend.errors?null:t.formSale.controls.addressSend.errors.maxlength)}}function $o(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," Es requerido "),e.qZA())}function Ko(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function Wo(i,n){if(1&i&&(e.ynx(0),e.YNc(1,$o,2,0,"small",104),e.YNc(2,Ko,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.addressBill.errors?null:t.formSale.controls.addressBill.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.addressBill.errors?null:t.formSale.controls.addressBill.errors.maxlength)}}function Xo(i,n){if(1&i&&(e.TgZ(0,"option",108),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.vch_nombre)}}function er(i,n){1&i&&(e.TgZ(0,"div",109)(1,"span",110),e._uU(2,"Loading..."),e.qZA()())}function tr(i,n){if(1&i&&(e.TgZ(0,"option",108),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.vch_nombre)}}function ir(i,n){if(1&i&&(e.TgZ(0,"select",111,112)(2,"option",50),e._uU(3,"-- Seleccione --"),e.qZA(),e.YNc(4,tr,2,2,"option",51),e.qZA()),2&i){const t=e.oxw(2);e.ekj("is-invalid",t.comunaInvalid),e.xp6(4),e.Q6J("ngForOf",t.comunas)}}function ar(i,n){if(1&i&&(e.TgZ(0,"option",108),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.value)}}function nr(i,n){if(1&i&&(e.TgZ(0,"option",108),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.value)}}function or(i,n){if(1&i&&(e.TgZ(0,"option",108),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.value)}}function rr(i,n){if(1&i&&(e.TgZ(0,"option",108),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.value)}}function sr(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," Es requerido "),e.qZA())}function lr(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," El formato no es correcto "),e.qZA())}function dr(i,n){if(1&i&&(e.ynx(0),e.YNc(1,sr,2,0,"small",104),e.YNc(2,lr,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.emailClient.errors?null:t.formSale.controls.emailClient.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.emailClient.errors?null:t.formSale.controls.emailClient.errors.email)}}function cr(i,n){if(1&i&&(e.TgZ(0,"option",108),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.vch_nombre)}}function ur(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function _r(i,n){if(1&i&&(e.ynx(0),e.YNc(1,ur,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.salesNote.errors?null:t.formSale.controls.salesNote.errors.maxlength)}}function pr(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function mr(i,n){if(1&i&&(e.ynx(0),e.YNc(1,pr,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.purchaseOrder.errors?null:t.formSale.controls.purchaseOrder.errors.maxlength)}}function hr(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function fr(i,n){if(1&i&&(e.ynx(0),e.YNc(1,hr,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.obsPaymentMethod.errors?null:t.formSale.controls.obsPaymentMethod.errors.maxlength)}}function gr(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 100 caracteres "),e.qZA())}function vr(i,n){if(1&i&&(e.ynx(0),e.YNc(1,gr,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.billNumber.errors?null:t.formSale.controls.billNumber.errors.maxlength)}}function br(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",24)(2,"div",25)(3,"label",40),e._uU(4,"Nota de venta"),e.qZA(),e._UZ(5,"input",113),e.YNc(6,_r,2,1,"ng-container",19),e.qZA(),e.TgZ(7,"div",25)(8,"label",40),e._uU(9,"Orden de compra"),e.qZA(),e._UZ(10,"input",114),e.YNc(11,mr,2,1,"ng-container",19),e.qZA()(),e.TgZ(12,"div",24)(13,"div",25)(14,"label",40),e._uU(15,"Observaci\xf3n forma de pago"),e.qZA(),e._UZ(16,"input",115),e.YNc(17,fr,2,1,"ng-container",19),e.qZA(),e.TgZ(18,"div",25)(19,"label",40),e._uU(20,"N\xfamero de factura"),e.qZA(),e._UZ(21,"input",116),e.YNc(22,vr,2,1,"ng-container",19),e.qZA()(),e.TgZ(23,"div",24)(24,"div",25)(25,"div",26)(26,"label",27),e._uU(27,"Venta asistida"),e.qZA(),e._UZ(28,"input",117),e.qZA()()()()),2&i){const t=e.oxw(2);e.xp6(5),e.ekj("is-invalid",t.salesNoteInvalid),e.xp6(1),e.Q6J("ngIf",t.salesNoteInvalid),e.xp6(4),e.ekj("is-invalid",t.purchaseOrderInvalid),e.xp6(1),e.Q6J("ngIf",t.purchaseOrderInvalid),e.xp6(5),e.ekj("is-invalid",t.obsPaymentMethodInvalid),e.xp6(1),e.Q6J("ngIf",t.obsPaymentMethodInvalid),e.xp6(4),e.ekj("is-invalid",t.billNumberInvalid),e.xp6(1),e.Q6J("ngIf",t.billNumberInvalid)}}function xr(i,n){1&i&&(e.TgZ(0,"small",105),e._uU(1," M\xe1x 300 caracteres "),e.qZA())}function yr(i,n){if(1&i&&(e.ynx(0),e.YNc(1,xr,2,0,"small",104),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.formSale.controls.comment.errors?null:t.formSale.controls.comment.errors.maxlength)}}function Cr(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"h4",13)(7,"span",14),e._uU(8,"Agregar venta manualmente"),e.qZA()(),e.TgZ(9,"div",15)(10,"button",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),r=e.MAs(3);return e.KtG(o.open(r))}),e._UZ(11,"span",17),e.qZA()()(),e.TgZ(12,"div",18),e.YNc(13,Zo,5,1,"p",19),e.YNc(14,Mo,17,1,"div",20),e.YNc(15,So,14,6,"div",21),e.qZA()()(),e.TgZ(16,"div",22)(17,"div",11)(18,"form",23),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submit())}),e.TgZ(19,"div",24)(20,"div",25)(21,"div",26)(22,"label",27),e._uU(23,"Factura "),e.qZA(),e.TgZ(24,"input",28),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.changeFactura())}),e.qZA()()(),e.TgZ(25,"div",29)(26,"div",30)(27,"label",31),e._uU(28,"Env\xedo"),e.qZA(),e.TgZ(29,"div",32)(30,"span",33),e.O4$(),e.TgZ(31,"svg",34),e._UZ(32,"path",35),e.qZA()(),e.kcU(),e._UZ(33,"input",36),e.qZA(),e.YNc(34,Fo,3,2,"ng-container",19),e.qZA(),e.YNc(35,qo,6,3,"div",37),e.qZA()(),e.TgZ(36,"div",24)(37,"div",25)(38,"label",31),e._uU(39,"Nombre comprador"),e.qZA(),e._UZ(40,"input",38),e.YNc(41,Ro,3,2,"ng-container",19),e.qZA(),e.TgZ(42,"div",25)(43,"label",31),e._uU(44,"Rut comprador"),e.qZA(),e._UZ(45,"input",39),e.YNc(46,Uo,3,2,"ng-container",19),e.qZA()(),e.TgZ(47,"div",24)(48,"div",25)(49,"label",40),e._uU(50,"Compa\xf1\xeda"),e.qZA(),e._UZ(51,"input",41),e.YNc(52,Qo,3,2,"ng-container",19),e.qZA(),e.TgZ(53,"div",25)(54,"label",40),e._uU(55,"Giro"),e.qZA(),e._UZ(56,"input",42),e.YNc(57,Ho,3,2,"ng-container",19),e.qZA()(),e.TgZ(58,"div",43)(59,"div",25)(60,"label",31),e._uU(61,"Direcci\xf3n env\xedo"),e.qZA(),e._UZ(62,"input",44),e.YNc(63,Go,3,2,"ng-container",19),e.qZA(),e.TgZ(64,"div",25)(65,"label",31),e._uU(66,"Direcci\xf3n factura"),e.qZA(),e._UZ(67,"input",45),e.YNc(68,Wo,3,2,"ng-container",19),e.qZA()(),e.TgZ(69,"div",43)(70,"div",25)(71,"label",46)(72,"span",47),e._uU(73,"Regi\xf3n"),e.qZA()(),e.TgZ(74,"select",48,49),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(75),r=e.oxw();return e.KtG(r.changeRegion(o.value))}),e.TgZ(76,"option",50),e._uU(77,"-- Seleccione --"),e.qZA(),e.YNc(78,Xo,2,2,"option",51),e.qZA()(),e.TgZ(79,"div",25)(80,"label",46)(81,"span",47),e._uU(82,"Comuna"),e.qZA()(),e.YNc(83,er,3,0,"div",52),e.YNc(84,ir,5,3,"select",53),e.qZA()(),e.TgZ(85,"div",24)(86,"div",54)(87,"label",46)(88,"span",47),e._uU(89,"Medio pago"),e.qZA()(),e.TgZ(90,"select",55,56)(92,"option",50),e._uU(93,"-- Seleccione --"),e.qZA(),e.YNc(94,ar,2,2,"option",51),e.qZA()(),e.TgZ(95,"div",54)(96,"label",46)(97,"span",47),e._uU(98,"Env\xedo"),e.qZA()(),e.TgZ(99,"select",48,57),e.NdJ("change",function(){e.CHM(t);const o=e.MAs(100),r=e.oxw();return e.KtG(r.changeEnvio(o.value))}),e.TgZ(101,"option",50),e._uU(102,"-- Seleccione --"),e.qZA(),e.YNc(103,nr,2,2,"option",51),e.qZA()(),e.TgZ(104,"div",54)(105,"label",46)(106,"span",47),e._uU(107,"Vendedor"),e.qZA()(),e.TgZ(108,"select",55,58)(110,"option",50),e._uU(111,"-- Seleccione --"),e.qZA(),e.YNc(112,or,2,2,"option",51),e.qZA()(),e.TgZ(113,"div",54)(114,"label",46)(115,"span",47),e._uU(116,"Estado venta"),e.qZA()(),e.TgZ(117,"select",55,59)(119,"option",50),e._uU(120,"-- Seleccione --"),e.qZA(),e.YNc(121,rr,2,2,"option",51),e.qZA()()(),e.TgZ(122,"div",24)(123,"div",60)(124,"label",31),e._uU(125,"Email comprador"),e.qZA(),e._UZ(126,"input",61),e.YNc(127,dr,3,2,"ng-container",19),e.qZA(),e.TgZ(128,"div",25)(129,"label",46)(130,"span",47),e._uU(131,"Tipo Negocio"),e.qZA()(),e.TgZ(132,"select",62,63)(134,"option",50),e._uU(135,"-- Seleccione --"),e.qZA(),e.YNc(136,cr,2,2,"option",51),e.qZA()()(),e.YNc(137,br,29,12,"div",19),e.TgZ(138,"div",64)(139,"div",65)(140,"label",66),e._uU(141,"Comentarios"),e.qZA(),e._UZ(142,"textarea",67),e.YNc(143,yr,2,1,"ng-container",19),e.qZA()(),e._UZ(144,"div",24)(145,"div",68),e.TgZ(146,"div",69)(147,"a",70),e._uU(148,"Volver"),e.qZA(),e.TgZ(149,"button",71),e._UZ(150,"span",72),e.TgZ(151,"span",73),e._uU(152,"Cargando..."),e.qZA(),e.TgZ(153,"span",74),e._uU(154,"Guardar"),e.qZA()()()()()()()()()}if(2&i){const t=e.oxw();e.xp6(11),e.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr075.svg"),e.xp6(2),e.Q6J("ngIf",0==t.products.length),e.xp6(1),e.Q6J("ngIf",t.products.length>0),e.xp6(1),e.Q6J("ngIf",t.totalPrice),e.xp6(3),e.Q6J("formGroup",t.formSale),e.xp6(15),e.ekj("is-invalid",t.sendCostInvalid),e.xp6(1),e.Q6J("ngIf",t.sendCostInvalid),e.xp6(1),e.Q6J("ngIf",t.sendCostvalueWithIVA),e.xp6(5),e.ekj("is-invalid",t.naturalNameInvalid),e.xp6(1),e.Q6J("ngIf",t.naturalNameInvalid),e.xp6(4),e.ekj("is-invalid",t.naturalRutInvalid),e.xp6(1),e.Q6J("ngIf",t.naturalRutInvalid),e.xp6(5),e.ekj("is-invalid",t.companyNameInvalid),e.xp6(1),e.Q6J("ngIf",t.companyNameInvalid),e.xp6(4),e.ekj("is-invalid",t.giroInvalid),e.xp6(1),e.Q6J("ngIf",t.giroInvalid),e.xp6(1),e.Q6J("hidden",!t.viewDirecction),e.xp6(4),e.ekj("is-invalid",t.addressSendInvalid),e.xp6(1),e.Q6J("ngIf",t.addressSendInvalid),e.xp6(4),e.ekj("is-invalid",t.addressBillInvalid),e.xp6(1),e.Q6J("ngIf",t.addressBillInvalid),e.xp6(1),e.Q6J("hidden",!t.viewDirecction),e.xp6(5),e.ekj("is-invalid",t.regionInvalid),e.xp6(4),e.Q6J("ngForOf",t.regiones),e.xp6(5),e.Q6J("ngIf",t.loadingComuna),e.xp6(1),e.Q6J("ngIf",!t.loadingComuna),e.xp6(6),e.ekj("is-invalid",t.mediopagoInvalid),e.xp6(4),e.Q6J("ngForOf",t.mediospago),e.xp6(5),e.ekj("is-invalid",t.envioInvalid),e.xp6(4),e.Q6J("ngForOf",t.envios),e.xp6(5),e.ekj("is-invalid",t.vendedorInvalid),e.xp6(4),e.Q6J("ngForOf",t.vendedores),e.xp6(5),e.ekj("is-invalid",t.estadoInvalid),e.xp6(4),e.Q6J("ngForOf",t.estadosventa),e.xp6(6),e.Q6J("ngIf",t.emailClientInvalid),e.xp6(5),e.ekj("is-invalid",t.tiponegocioInvalid),e.xp6(4),e.Q6J("ngForOf",t.tiponegocio),e.xp6(1),e.Q6J("ngIf",t.isAdmin),e.xp6(5),e.ekj("is-invalid",t.commentInvalid),e.xp6(1),e.Q6J("ngIf",t.commentInvalid),e.xp6(7),e.Q6J("hidden",!t.loading),e.xp6(1),e.Q6J("hidden",!t.loading),e.xp6(2),e.Q6J("hidden",t.loading)}}function Ar(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-search-product-modal",118),e.NdJ("productSelect",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.addProd(o))}),e.qZA()}if(2&i){const t=n.$implicit,a=e.oxw();e.Q6J("modal3",t)("idEmpresa",a.idEmpresa)("allCompanies",a.isAdmin)}}function wr(i,n){1&i&&(e.O4$(),e.TgZ(0,"svg",119),e._UZ(1,"path",120),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente "))}let Te=(()=>{class i{constructor(t,a,o,r,s,l){this.modalService=t,this.userService=a,this.formBuilder=o,this.saleService=r,this.toastService=s,this.rutaActiva=l,this.products=[],this.loadingPage=!0,this.loading=!1,this.loadingComuna=!1,this.totalPrice=0,this.totalPriceWithIVA=0,this.vendedores=[],this.mediospago=[],this.envios=[],this.estadosventa=[],this.regiones=[],this.comunas=[],this.tiponegocio=[],this.totalPriceList=[],this.viewFactura=!1,this.viewDirecction=!0,this.envioInvalid=!1,this.mediopagoInvalid=!1,this.vendedorInvalid=!1,this.estadoInvalid=!1,this.regionInvalid=!1,this.comunaInvalid=!1,this.tiponegocioInvalid=!1,this.productsInQuote=[],this.idEmpresa=this.userService.usuario.id_empresa,this.retiroLocal="211cb25c-fb4e-4005-9802-6ec1b68b9d44",this.isAdmin=a.hasPermission(Ce.Q.TODOS),this.idQuote=l.snapshot.params.idQuote}ngOnInit(){this.idQuote?this.setFormWithQuote():this.setForm(),this.setComboboxes()}setFormWithQuote(){var t=this;return(0,A.Z)(function*(){yield t.getQuoteData(),t.productsInQuote.length&&t.productsInQuote.forEach(a=>{const o={...a.tbl_producto,db_precio:a.db_precio,int_cantidad:a.int_cantidad,int_porcdescuento:a.int_porcdescuento};t.addProd(o)}),t.setForm(t.quote)})()}getQuoteData(){var t=this;return(0,A.Z)(function*(){try{t.quote=(yield(0,b.z)(t.saleService.getSingleQuote(t.idQuote))).data||void 0,t.productsInQuote=(yield(0,b.z)(t.saleService.getProductsPerQuote(t.idQuote))).data||[]}catch{t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:4e3})}})()}setForm(t){this.formSale=this.formBuilder.group({bill:[!1],naturalName:[t?.vch_cliente||"",[d.kI.required,d.kI.maxLength(100)]],naturalRut:[t?.vch_rut||"",[d.kI.required,d.kI.maxLength(100)]],companyName:[t?.vch_razonsocial||""],giro:[""],addressSend:[t?.vch_direccion||"",[d.kI.required,d.kI.maxLength(100)]],addressBill:[t?.vch_direccion||"",[d.kI.required,d.kI.maxLength(100)]],sendCost:[0,[d.kI.required,d.kI.min(0)]],comment:["",[d.kI.maxLength(300)]],emailClient:[t?.vch_email||"",[d.kI.required,d.kI.email]],salesNote:["",[d.kI.maxLength(100)]],purchaseOrder:["",[d.kI.maxLength(100)]],obsPaymentMethod:["",[d.kI.maxLength(100)]],billNumber:["",[d.kI.maxLength(100)]],assistedSale:[!1]})}get sendCost(){return this.formSale.get("sendCost")?.value}setComboboxes(){var t=this;return(0,A.Z)(function*(){try{t.envios=(yield(0,b.z)(t.saleService.getComboboxes(z.cb.envio,null))).data||[],t.mediospago=(yield(0,b.z)(t.saleService.getComboboxes(z.cb.medioPago,null))).data||[],t.estadosventa=(yield(0,b.z)(t.saleService.getComboboxes(z.cb.estadoVenta,null))).data||[],t.vendedores=(yield(0,b.z)(t.saleService.getComboboxes(z.cb.vendedor,t.userService.usuario.id_empresa))).data||[],t.regiones=(yield(0,b.z)(t.saleService.getRegiones())).data||[],t.comunas=[],t.tiponegocio=(yield(0,b.z)(t.saleService.getTiposNegocios())).data||[]}catch(a){console.error("Error al tratar de cargar los combobox",a),t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:15e3})}t.loadingPage=!1})()}deleteProd(t){const a=this.totalPriceList.find(l=>l.id==t);if(null==a)return;const o=this.totalPriceList.indexOf(a);this.totalPriceList.splice(o,1);const r=this.products.find(l=>l.id==t);if(null==r)return;const s=this.products.indexOf(r);this.products.splice(s,1),this.calculateTotal()}addProd(t){t.count=1,this.products.push(t),this.totalPriceList.push({totalPrice:t.db_precio,count:1,id:t.id,sku:t.vch_sku,stock:t.int_stock,envio:0}),this.calculateTotal()}changeCountProd(t,a){const o=this.totalPriceList.find(c=>c.id==t.id);if(null==o)return;const r=this.totalPriceList.indexOf(o);this.totalPriceList[r].count=a.target.value;const s=this.products.find(c=>c.id==t.id);null!=s&&(this.products.indexOf(s),this.products[r].count=a.target.value,this.calculateTotal())}keyupTotalProduct(t,a){const o=this.totalPriceList.find(s=>s.id==t.id);if(null==o)return;const r=this.totalPriceList.indexOf(o);this.totalPriceList[r].totalPrice=a.target.value/this.totalPriceList[r].count,this.calculateTotal()}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(a=>{},a=>{})}calculateTotal(){let t=0;for(let a of this.totalPriceList)t+=a.totalPrice*a.count;this.totalPrice=t,this.totalPriceWithIVA=Math.round(1.19*t)}get sendCostInvalid(){return this.formSale.get("sendCost")?.invalid&&this.formSale.get("sendCost")?.touched}get naturalNameInvalid(){return this.formSale.get("naturalName")?.invalid&&this.formSale.get("naturalName")?.touched}get naturalRutInvalid(){return this.formSale.get("naturalRut")?.invalid&&this.formSale.get("naturalRut")?.touched}get companyNameInvalid(){return this.formSale.get("companyName")?.invalid&&this.formSale.get("companyName")?.touched}get giroInvalid(){return this.formSale.get("giro")?.invalid&&this.formSale.get("giro")?.touched}get addressBillInvalid(){return this.formSale.get("addressBill")?.invalid&&this.formSale.get("addressBill")?.touched}get addressSendInvalid(){return this.formSale.get("addressSend")?.invalid&&this.formSale.get("addressSend")?.touched}get commentInvalid(){return this.formSale.get("comment")?.invalid&&this.formSale.get("comment")?.touched}get chkFactura(){return Boolean(this.formSale.get("bill")?.value)}get salesNoteInvalid(){return this.formSale.get("addressSend")?.invalid&&this.formSale.get("addressSend")?.touched}get purchaseOrderInvalid(){return this.formSale.get("addressSend")?.invalid&&this.formSale.get("addressSend")?.touched}get obsPaymentMethodInvalid(){return this.formSale.get("addressSend")?.invalid&&this.formSale.get("addressSend")?.touched}get billNumberInvalid(){return this.formSale.get("addressSend")?.invalid&&this.formSale.get("addressSend")?.touched}get emailClientInvalid(){return this.formSale.get("emailClient")?.invalid&&this.formSale.get("emailClient")?.touched}get sendCostvalueWithIVA(){return Math.round(1.19*this.formSale.get("sendCost")?.value)}changeFactura(){this.viewFactura=this.chkFactura,this.chkFactura?(this.formSale.get("companyName")?.addValidators([d.kI.required,d.kI.maxLength(100)]),this.formSale.get("giro")?.addValidators([d.kI.required,d.kI.maxLength(100)])):(this.formSale.get("companyName")?.clearValidators(),this.formSale.get("giro")?.clearValidators()),this.formSale.get("companyName")?.updateValueAndValidity(),this.formSale.get("giro")?.updateValueAndValidity()}changeEnvio(t){this.viewDirecction=t!=this.retiroLocal,this.viewDirecction?(this.formSale.get("addressBill")?.addValidators([d.kI.required,d.kI.maxLength(100)]),this.formSale.get("addressSend")?.addValidators([d.kI.required,d.kI.maxLength(100)])):(this.formSale.get("addressBill")?.clearValidators(),this.formSale.get("addressSend")?.clearValidators()),this.formSale.get("addressBill")?.updateValueAndValidity(),this.formSale.get("addressSend")?.updateValueAndValidity()}changeRegion(t){var a=this;return(0,A.Z)(function*(){try{a.loadingComuna=!0,a.comunas=(yield(0,b.z)(a.saleService.getComunas(Number(t)))).data||[],a.loadingComuna=!1}catch{a.loadingComuna=!1,console.error("error en obtener las comunas")}})()}submit(){var t=this;return(0,A.Z)(function*(){if(t.touchControlsError(),t.formSale.valid){let a=!1;if("-1"==t.cbEnvio.nativeElement.value&&(t.envioInvalid=!0,a=!0),"-1"==t.cbEstado.nativeElement.value&&(t.estadoInvalid=!0,a=!0),"-1"==t.cbMedioPago.nativeElement.value&&(t.mediopagoInvalid=!0,a=!0),"-1"==t.cbVendedor.nativeElement.value&&(t.vendedorInvalid=!0,a=!0),"-1"==t.cbTn.nativeElement.value&&(t.tiponegocioInvalid=!0,a=!0),t.viewDirecction&&("-1"==t.cbRegion.nativeElement.value&&(t.regionInvalid=!0,a=!0),"-1"==t.cbComuna.nativeElement.value&&(t.comunaInvalid=!0,a=!0)),a)return!1;t.envioInvalid=!1,t.estadoInvalid=!1,t.mediopagoInvalid=!1,t.vendedorInvalid=!1,t.regionInvalid=!1,t.comunaInvalid=!1,t.tiponegocioInvalid=!1,t.loading=!0;const o={bit_factura:t.formSale.get("bill")?.value,id_envio:t.cbEnvio.nativeElement.value,id_mediopago:t.cbMedioPago.nativeElement.value,id_vendedor:t.cbVendedor.nativeElement.value,id_estadoventa:t.cbEstado.nativeElement.value,id_direccionenvio:t.formSale.get("addressSend")?.value,id_direccionfactura:t.formSale.get("addressBill")?.value,db_costoenvio:t.sendCostvalueWithIVA,db_submonto:t.totalPriceWithIVA,vch_comentarios:t.formSale.get("comment")?.value??null,db_montoreserva:0,vch_salesnote:t.formSale.get("salesNote")?.value??null,vch_purchaseorder:t.formSale.get("purchaseOrder")?.value??null,vch_obspaymentmethod:t.formSale.get("obsPaymentMethod")?.value??null,vch_billnumber:t.formSale.get("billNumber")?.value??null,bit_assistedsale:t.formSale.get("assistedSale")?.value??!1,id_comuna:t.cbComuna.nativeElement.value??null,cliente:t.getClient(),id_tiponegocio:t.cbTn.nativeElement.value};try{const r=yield(0,b.z)(t.saleService.setSaleManual(o));if(1!=r.code)return console.error("Error al tratar de crear la venta",r),void t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:15e3});t.saleId=r.data.id,t.emailClient=t.formSale.get("emailClient")?.value,console.log("id venta",r.data.id),yield t.setDetalleVenta(r.data.id,t.sendCostvalueWithIVA),t.toastService.show("Guardado con \xe9xito",{classname:"bg-success text-light",delay:1e4}),t.resetForm()}catch(r){console.error("Error al tratar de crear la venta",r),t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:15e3})}t.loading=!1}})()}getClient(){return{vch_rut:this.formSale.get("naturalRut")?.value,vch_nombre:this.formSale.get("naturalName")?.value,vch_giro:this.formSale.get("giro")?.value,vch_empresa:this.formSale.get("companyName")?.value,vch_correo:this.formSale.get("emailClient")?.value}}setDetalleVenta(t,a){var o=this;return(0,A.Z)(function*(){let r=!1;console.log(o.totalPriceList);const s=0!=o.totalPriceList.length?a/o.totalPriceList.length:0;for(let l of o.totalPriceList){const c={id_producto:l.sku,id_venta:t,db_monto:Math.round(1.19*l.totalPrice),int_cantidad:l.count,db_montoreserva:0,db_envio:s};console.log(c);try{const u=yield(0,b.z)(o.saleService.setSaleManualDetalle(c));console.log(u),1!=u.code&&(console.error(`Error al tratar de guardar el producto ${l.sku}`),r=!0)}catch{console.error(`Error al tratar de guardar el producto ${l.sku}`),r=!0}}if(0==r)try{const l={saleId:o.saleId,emailClient:o.emailClient||""},c=yield(0,b.z)(o.saleService.postMailToUser(l));if(console.log("mail ",c),1!=c.code)throw new Error(c.message)}catch(l){console.log(l),o.toastService.show(l.error.data,{classname:"bg-danger text-center  text-light",delay:1e4})}r&&o.toastService.show(o.errorToast,{classname:"bg-danger text-light",delay:15e3})})()}touchControlsError(){if(this.formSale.invalid)for(let t of Object.values(this.formSale.controls))t.markAsTouched()}resetForm(){this.formSale.reset({bill:!1,naturalName:"",naturalRut:"",companyName:"",giro:"",addressSend:"",addressBill:"",sendCost:0,comment:"",salesNote:"",purchaseOrder:"",obsPaymentMethod:"",billNumber:!1}),this.products=[],this.totalPriceList=[],this.totalPrice=0,this.totalPriceWithIVA=0,this.cbEnvio.nativeElement.value="-1",this.cbEstado.nativeElement.value="-1",this.cbMedioPago.nativeElement.value="-1",this.cbVendedor.nativeElement.value="-1",this.cbRegion.nativeElement.value="-1",this.cbComuna.nativeElement.value="-1"}setDraft(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.FF),e.Y36(k.i),e.Y36(d.qu),e.Y36(Z.M),e.Y36(q.k),e.Y36(x.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-manual-sale"]],viewQuery:function(t,a){if(1&t&&(e.Gf(vo,5),e.Gf(bo,5),e.Gf(xo,5),e.Gf(yo,5),e.Gf(Co,5),e.Gf(Ao,5),e.Gf(wo,5),e.Gf(To,5)),2&t){let o;e.iGM(o=e.CRH())&&(a.cbEnvio=o.first),e.iGM(o=e.CRH())&&(a.cbMedioPago=o.first),e.iGM(o=e.CRH())&&(a.cbVendedor=o.first),e.iGM(o=e.CRH())&&(a.cbEstado=o.first),e.iGM(o=e.CRH())&&(a.cbRegion=o.first),e.iGM(o=e.CRH())&&(a.cbComuna=o.first),e.iGM(o=e.CRH())&&(a.cbTn=o.first),e.iGM(o=e.CRH())&&(a.errorToast=o.first)}},decls:7,vars:2,consts:[["class","text-center mt-5","style","height: 500px;",4,"ngIf"],["id","kt_content_container","class","container-xxl",4,"ngIf"],["modalProd",""],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],[1,"text-center","mt-5",2,"height","500px"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],["id","kt_content_container",1,"container-xxl"],[1,"card"],[1,"card-body","p-lg-17"],[1,"d-flex","flex-column","flex-lg-row","mb-17"],[1,"flex-lg-row-fluid","me-0","me-lg-20"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"card-toolbar"],["type","button",1,"btn","btn-sm","btn-light-primary",3,"click"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"],[1,"card","bg-light"],[4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","d-flex flex-row-reverse m-5",4,"ngIf"],[1,"d-flex","flex-column","flex-lg-row"],["action","m-0",1,"form","mb-15",3,"formGroup","ngSubmit"],[1,"row","mb-5"],[1,"col-md-6","fv-row"],[1,"form-check","form-check-custom","form-check-solid","mb-2"],[1,"form-check-label","fs-5","fw-bold","m-3"],["type","checkbox","formControlName","bill",1,"form-check-input",3,"change"],[1,"col-md-6","fv-row","d-flex","justify-content-between"],[1,"w-50","pe-5"],[1,"required","fs-5","fw-bold","mb-2"],[1,"input-group"],["id","basic-addon1",1,"input-group-text"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-currency-dollar"],["d","M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"],["type","number","min","0","formControlName","sendCost",1,"form-control"],["class","w-50 ps-5",4,"ngIf"],["type","text","formControlName","naturalName",1,"form-control","form-control-solid"],["type","text","formControlName","naturalRut",1,"form-control","form-control-solid"],[1,"fs-5","fw-bold","mb-2"],["type","text","formControlName","companyName",1,"form-control","form-control-solid"],["type","text","formControlName","giro",1,"form-control","form-control-solid"],[1,"row","mb-5",3,"hidden"],["type","text","placeholder","","formControlName","addressSend",1,"form-control","form-control-solid"],["type","text","placeholder","","formControlName","addressBill",1,"form-control","form-control-solid"],[1,"d-flex","align-items-center","fs-5","fw-bold","mb-2"],[1,"required"],["data-control","select2",1,"form-select","form-select-solid",3,"change"],["cbRegion",""],["value","-1"],[3,"value",4,"ngFor","ngForOf"],["class","spinner-border text-success","role","status",4,"ngIf"],["data-control","select2","class","form-select form-select-solid",3,"is-invalid",4,"ngIf"],[1,"col-md-3","fv-row"],["name","position","data-control","select2",1,"form-select","form-select-solid"],["cbMedioPago",""],["cbEnvio",""],["cbVendedor",""],["cbEstado",""],[1,"col-6","fv-row"],["type","text","formControlName","emailClient",1,"form-control","form-control-solid"],["name","tiponegocioname","data-control","selecttn",1,"form-select","form-select-solid"],["cbTn",""],[1,"row","mt-10"],[1,"col"],[1,"fs-5","fw-bold","me-2"],["formControlName","comment","cols","100","rows","2",1,"form-control"],[1,"separator","mb-8"],[1,"float-end"],["routerLink","/sales",1,"btn","btn-danger","me-5"],["type","submit","id","kt_careers_submit_button",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm",3,"hidden"],[1,"visually-hidden",3,"hidden"],[1,"indicator-label",3,"hidden"],["type","info",1,"m-5",3,"dismissible"],[1,"table-responsive"],[1,"table","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"ps-4","min-w-325px","rounded-start"],[1,"min-w-125px"],[1,"min-w-175px"],[1,"min-w-100px"],[1,"min-w-50px"],[1,"min-w-50px","text-end","rounded-end"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"symbol","symbol-50px","me-5","ms-3"],["alt","",1,"",3,"src"],[1,"d-flex","justify-content-start","flex-column"],[1,"fw-bolder","text-hover-primary","mb-1","fs-6",3,"ngClass"],[1,"text-muted","fw-bold","text-muted","d-block","fs-7"],[1,"fw-bolder","text-hover-primary","d-block","mb-1","fs-6",3,"ngClass"],["type","number","name","totalPrice",1,"form-control","w-100px",3,"ngClass","value","id","keyup"],["type","number","value","1","min","1",1,"form-control","mb-2","w-65px",3,"id","change"],[1,"text-start","me-5"],["type","button",1,"btn","btn-icon","btn-bg-light","btn-active-color-danger","btn-sm",3,"click"],[1,"d-flex","flex-row-reverse","m-5"],[1,"d-flex","w-50","flex-column","justify-content-left"],[1,"d-flex","justify-content-between","w-100","border-bottom","border-3","pb-1"],[1,"fs-4","fw-bolder","text-gray-600","me-2","lh-1","ls-n2"],[1,"fs-3","fw-bolder","text-dark","me-2","lh-1","ls-n2"],[1,"d-flex","justify-content-between","mt-5","w-100"],[1,"fs-1","fw-bolder","text-dark","me-2","lh-1","ls-n2"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"w-50","ps-5"],[1,"pt-3"],[3,"value"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],["data-control","select2",1,"form-select","form-select-solid"],["cbComuna",""],["type","text","formControlName","salesNote",1,"form-control","form-control-solid"],["type","text","formControlName","purchaseOrder",1,"form-control","form-control-solid"],["type","text","formControlName","obsPaymentMethod",1,"form-control","form-control-solid"],["type","text","formControlName","billNumber",1,"form-control","form-control-solid"],["type","checkbox","formControlName","assistedSale",1,"form-check-input"],[3,"modal3","idEmpresa","allCompanies","productSelect"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,a){1&t&&(e.YNc(0,Do,2,0,"div",0),e.YNc(1,Cr,155,57,"div",1),e.YNc(2,Ar,1,3,"ng-template",null,2,e.W1O),e._UZ(4,"app-toast",3),e.YNc(5,wr,3,0,"ng-template",null,4,e.W1O)),2&t&&(e.Q6J("ngIf",a.loadingPage),e.xp6(1),e.Q6J("ngIf",!a.loadingPage))},dependencies:[_.mk,_.sg,_.O5,x.yS,d._Y,d.YN,d.Kr,d.Fj,d.wV,d.Wl,d.JJ,d.JL,d.qQ,T.xm,d.sg,d.u,fo.u,U.q,we.d$,go.h,ie.p],styles:["input[name=totalPrice][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[name=totalPrice][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}"]}),i})();const Tr=["dangerTpl"];function Dr(i,n){1&i&&(e.TgZ(0,"div",29)(1,"strong"),e._uU(2,"Sin Ventas"),e.qZA()())}function Zr(i,n){1&i&&(e.TgZ(0,"div",30)(1,"strong"),e._uU(2,"Hay ventas, las puede descargar apretando los botones de exportar"),e.qZA()())}function kr(i,n){1&i&&(e.TgZ(0,"div",31),e._UZ(1,"img",32),e.qZA())}function Mr(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.qZA(),e.TgZ(37,"td"),e._uU(38),e.qZA(),e.TgZ(39,"td"),e._uU(40),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.qZA(),e.TgZ(43,"td"),e._uU(44),e.qZA(),e.TgZ(45,"td"),e._uU(46),e.qZA(),e.TgZ(47,"td"),e._uU(48),e.qZA(),e.TgZ(49,"td"),e._uU(50),e.qZA(),e.TgZ(51,"td"),e._uU(52),e.qZA(),e.TgZ(53,"td"),e._uU(54),e.qZA(),e.TgZ(55,"td"),e._uU(56),e.qZA(),e.TgZ(57,"td"),e._uU(58),e.qZA(),e.TgZ(59,"td"),e._uU(60),e.qZA(),e.TgZ(61,"td"),e._uU(62),e.qZA(),e.TgZ(63,"td"),e._uU(64),e.qZA(),e.TgZ(65,"td"),e._uU(66),e.qZA(),e.TgZ(67,"td"),e._uU(68),e.qZA(),e.TgZ(69,"td"),e._uU(70),e.qZA(),e.TgZ(71,"td"),e._uU(72),e.qZA(),e.TgZ(73,"td"),e._uU(74),e.qZA(),e.TgZ(75,"td"),e._uU(76),e.qZA(),e.TgZ(77,"td"),e._uU(78),e.qZA(),e.TgZ(79,"td"),e._uU(80),e.qZA(),e.TgZ(81,"td"),e._uU(82),e.qZA(),e.TgZ(83,"td"),e._uU(84),e.qZA(),e.TgZ(85,"td"),e._uU(86),e.qZA(),e.TgZ(87,"td"),e._uU(88),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.hij("",t.Fecha," "),e.xp6(2),e.hij("",t.Hora," "),e.xp6(2),e.hij("",t.Mes," "),e.xp6(2),e.hij("",t.Semana," "),e.xp6(2),e.hij("",t.NumPedidoSC," "),e.xp6(2),e.hij("",t.OrderIdWoo," "),e.xp6(2),e.hij("",t.Seller," "),e.xp6(2),e.hij("",t.Cantidad," "),e.xp6(2),e.hij("",t.MontoNeto," "),e.xp6(2),e.hij("",t.Reserva," "),e.xp6(2),e.hij("",t.Envio," "),e.xp6(2),e.hij("",t.MontoCupon," "),e.xp6(2),e.hij("",t.InstalacionPagado," "),e.xp6(2),e.Oqu(t.TotalPagadoSinIVA),e.xp6(2),e.Oqu(t.TotalPagadoConIVA),e.xp6(2),e.Oqu(t.ReservaTotalSinIVA),e.xp6(2),e.Oqu(t.ReservaTotalConIVA),e.xp6(2),e.Oqu(t.TipoNegocio),e.xp6(2),e.Oqu(t.Factura),e.xp6(2),e.hij("",t.Vendedor," "),e.xp6(2),e.hij("",t.Comentario," "),e.xp6(2),e.hij("",t.nombreCliente," "),e.xp6(2),e.hij("",t.Rut," "),e.xp6(2),e.hij("",t.Empresa," "),e.xp6(2),e.hij("",t.Correo," "),e.xp6(2),e.hij("",t.Telefono," "),e.xp6(2),e.hij("",t.Giro," "),e.xp6(2),e.hij("",t.FormaPago," "),e.xp6(2),e.hij("",t.FormaPagoOBS," "),e.xp6(2),e.hij("",t.TipoPago," "),e.xp6(2),e.hij("",t.NumCuotas," "),e.xp6(2),e.hij("",t.NumTarjeta," "),e.xp6(2),e.hij("",t.codigoAutorizacion," "),e.xp6(2),e.hij("",t.EstadoVenta," "),e.xp6(2),e.hij("",t.Direccion," "),e.xp6(2),e.hij("",t.Comuna," "),e.xp6(2),e.hij("",t.Region," "),e.xp6(2),e.hij("",t.Cupon," "),e.xp6(2),e.hij("",t.InstalacionPagado," "),e.xp6(2),e.Oqu(t.NotaVenta),e.xp6(2),e.Oqu(t.OrdenCompra),e.xp6(2),e.Oqu(t.ObsMetodoPago),e.xp6(2),e.Oqu(t.NumeroFactura),e.xp6(2),e.Oqu(t.VentaAsistida)}}function Sr(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.qZA(),e.TgZ(37,"td"),e._uU(38),e.qZA(),e.TgZ(39,"td"),e._uU(40),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.qZA(),e.TgZ(43,"td"),e._uU(44),e.qZA(),e.TgZ(45,"td"),e._uU(46),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t.NumPedidoSC),e.xp6(2),e.Oqu(t.OrderIdWoo),e.xp6(2),e.Oqu(t.Sku),e.xp6(2),e.Oqu(t.Descripcion),e.xp6(2),e.Oqu(t.TipoProd),e.xp6(2),e.Oqu(t.Seller),e.xp6(2),e.Oqu(t.Marca),e.xp6(2),e.Oqu(t.Cantidad),e.xp6(2),e.Oqu(t.MontoNeto),e.xp6(2),e.Oqu(t.Reserva),e.xp6(2),e.Oqu(t.CostoEnvio),e.xp6(2),e.Oqu(t.Instalacion),e.xp6(2),e.Oqu(t.TotalPagadoSinIVA),e.xp6(2),e.Oqu(t.TotalPagadoConIVA),e.xp6(2),e.Oqu(t.ReservaTotalSinIVA),e.xp6(2),e.Oqu(t.ReservaTotalConIVA),e.xp6(2),e.Oqu(t.PorcInstalacion),e.xp6(2),e.Oqu(t.InstalacionTotalSinIva),e.xp6(2),e.Oqu(t.InstalacionTotalConIva),e.xp6(2),e.Oqu(t.Campana),e.xp6(2),e.Oqu(t.EstadoVenta),e.xp6(2),e.Oqu(t.preventa),e.xp6(2),e.Oqu(t.aPedido)}}function Ir(i,n){1&i&&(e.O4$(),e.TgZ(0,"svg",33),e._UZ(1,"path",34),e.qZA(),e._uU(2," Error del servidor, favor intente nuevamente "))}let Er=(()=>{class i{constructor(t,a,o){this.formBuilder=t,this.ventaProvider=a,this.toastService=o,this.noSales=!1,this.loading=!1,this.disabledExcel=!0,this.sales=[],this.salesDetails=[],this.initFormReact()}ngOnInit(){}get fechaIni(){const t="000"+String(this.myGroup.get("fechaInicio")?.value.month),a="000"+String(this.myGroup.get("fechaInicio")?.value.day);return`${this.myGroup.get("fechaInicio")?.value.year}-${t.substring(t.length-2)}-${a.substring(a.length-2)}`}get fechaFin(){const t="000"+String(this.myGroup.get("fechaFin")?.value.month),a="000"+String(this.myGroup.get("fechaFin")?.value.day);return`${this.myGroup.get("fechaFin")?.value.year}-${t.substring(t.length-2)}-${a.substring(a.length-2)}`}initFormReact(){this.myGroup=this.formBuilder.group({fechaInicio:"",fechaFin:""})}onSubmit(){console.log("haciendo submit")}loadData(){var t=this;return(0,A.Z)(function*(){t.loading=!0,t.noSales=!1;const a={fechaini:t.fechaIni,fechafin:t.fechaFin};try{t.sales=(yield(0,b.z)(t.ventaProvider.getReportAllSale(a))).data||[],t.salesDetails=(yield(0,b.z)(t.ventaProvider.getReportAllSaleDetails(a))).data||[],t.noSales=0==t.sales.length,t.disabledExcel=t.noSales}catch(o){console.log(o),o.error?.code?t.noSales=!0:t.toastService.show(t.errorToast,{classname:"bg-danger text-light",delay:15e3}),t.disabledExcel=!0,t.sales=[],t.salesDetails=[]}t.loading=!1})()}onChangedt(){if(""==this.myGroup.get("fechaInicio")?.value||""==this.myGroup.get("fechaFin")?.value)return void(this.disabledExcel=!0);const t=new Date(this.myGroup.get("fechaInicio")?.value.year,this.myGroup.get("fechaInicio")?.value.month-1,this.myGroup.get("fechaInicio")?.value.day),a=new Date(this.myGroup.get("fechaFin")?.value.year,this.myGroup.get("fechaFin")?.value.month-1,this.myGroup.get("fechaFin")?.value.day);if(console.log(t,a),t>a)return console.log("no puede ser la fecha fin menor que la de inicio"),this.disabledExcel=!0,void this.resetForm();this.loadData()}resetForm(){this.myGroup.reset({fechaini:"",fechafin:""})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.qu),e.Y36(Z.M),e.Y36(q.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-all-sales-date"]],viewQuery:function(t,a){if(1&t&&e.Gf(Tr,5),2&t){let o;e.iGM(o=e.CRH())&&(a.errorToast=o.first)}},decls:178,vars:8,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[3,"formGroup","ngSubmit"],[1,"row","mt-5"],[1,"col"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","fechaInicio","formControlName","fechaInicio","ngbDatepicker","",1,"form-control",3,"ngModelChange"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["placeholder","yyyy-mm-dd","name","fechaFin","formControlName","fechaFin","ngbDatepicker","",1,"form-control",3,"ngModelChange"],["dFin","ngbDatepicker"],["table","kt_ecommerce_sale_table","name","ListSales.xlsx","buttonName","Exportar ventas",3,"disabled"],["table","kt_ecommerce_saledetail_table","name","ListDetailsSales.xlsx","buttonName","Exportar detalle de ventas",3,"disabled"],["class","alert alert-danger m-10","role","alert",4,"ngIf"],["class","alert alert-primary m-10","role","alert",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["hidden","true",1,"card-body","pt-20","table-responsive"],["id","kt_ecommerce_sale_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"min-w-100px"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],["id","kt_ecommerce_saledetail_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],["aria-live","polite","aria-atomic","true"],["dangerTpl",""],["role","alert",1,"alert","alert-danger","m-10"],["role","alert",1,"alert","alert-primary","m-10"],[1,"text-center","mb-10"],["src","../../../../../assets/loading.gif","alt","","height","100","width","100"],["xmlns","http://www.w3.org/2000/svg","fill","#fff","width","24","height","24","viewBox","0 0 24 24"],["d","M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"input",10,11),e.NdJ("ngModelChange",function(){return a.onChangedt()}),e.qZA(),e.TgZ(12,"button",12),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(11);return e.KtG(s.toggle())}),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"input",13,14),e.NdJ("ngModelChange",function(){return a.onChangedt()}),e.qZA(),e.TgZ(17,"button",12),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(16);return e.KtG(s.toggle())}),e.qZA()()(),e.TgZ(18,"div",8),e._UZ(19,"app-export-excel",15),e.qZA(),e.TgZ(20,"div",8),e._UZ(21,"app-export-excel",16),e.qZA()()()()(),e.YNc(22,Dr,3,0,"div",17),e.YNc(23,Zr,3,0,"div",18),e.YNc(24,kr,2,0,"div",19),e.TgZ(25,"div",20)(26,"table",21)(27,"thead")(28,"tr",22)(29,"th",23),e._uU(30,"Fecha"),e.qZA(),e.TgZ(31,"th",23),e._uU(32,"Hora"),e.qZA(),e.TgZ(33,"th",23),e._uU(34,"Mes"),e.qZA(),e.TgZ(35,"th",23),e._uU(36,"Semana"),e.qZA(),e.TgZ(37,"th",23),e._uU(38,"NumPedidoSC"),e.qZA(),e.TgZ(39,"th",23),e._uU(40,"OrderIdWoo"),e.qZA(),e.TgZ(41,"th",23),e._uU(42,"Seller"),e.qZA(),e.TgZ(43,"th",23),e._uU(44,"Cantidad"),e.qZA(),e.TgZ(45,"th",23),e._uU(46,"Neto"),e.qZA(),e.TgZ(47,"th",23),e._uU(48,"Reserva"),e.qZA(),e.TgZ(49,"th",23),e._uU(50,"Envio"),e.qZA(),e.TgZ(51,"th",23),e._uU(52,"Cupon"),e.qZA(),e.TgZ(53,"th",23),e._uU(54,"Instalacion"),e.qZA(),e.TgZ(55,"th",23),e._uU(56,"TotalPagadoSinIVA"),e.qZA(),e.TgZ(57,"th",23),e._uU(58,"TotalPagadoConIVA"),e.qZA(),e.TgZ(59,"th",23),e._uU(60,"ReservaTotalSinIVA"),e.qZA(),e.TgZ(61,"th",23),e._uU(62,"ReservaTotalConIVA"),e.qZA(),e.TgZ(63,"th",23),e._uU(64,"TipoNegocio"),e.qZA(),e.TgZ(65,"th",23),e._uU(66,"Factura"),e.qZA(),e.TgZ(67,"th",23),e._uU(68,"Vendedor"),e.qZA(),e.TgZ(69,"th",23),e._uU(70,"Comentario"),e.qZA(),e.TgZ(71,"th",23),e._uU(72,"NombreCliente"),e.qZA(),e.TgZ(73,"th",23),e._uU(74,"Rut"),e.qZA(),e.TgZ(75,"th",23),e._uU(76,"Empresa"),e.qZA(),e.TgZ(77,"th",23),e._uU(78,"Correo"),e.qZA(),e.TgZ(79,"th",23),e._uU(80,"Telefono"),e.qZA(),e.TgZ(81,"th",23),e._uU(82,"Giro"),e.qZA(),e.TgZ(83,"th",23),e._uU(84,"FormaPago"),e.qZA(),e.TgZ(85,"th",23),e._uU(86,"FormaPagoOBS"),e.qZA(),e.TgZ(87,"th",23),e._uU(88,"TipoPago"),e.qZA(),e.TgZ(89,"th",23),e._uU(90,"NumCuotas"),e.qZA(),e.TgZ(91,"th",23),e._uU(92,"NumTarjeta"),e.qZA(),e.TgZ(93,"th",23),e._uU(94,"CodigoAutorizacion"),e.qZA(),e.TgZ(95,"th",23),e._uU(96,"EstadoVenta"),e.qZA(),e.TgZ(97,"th",23),e._uU(98,"Direccion"),e.qZA(),e.TgZ(99,"th",23),e._uU(100,"Comuna"),e.qZA(),e.TgZ(101,"th",23),e._uU(102,"Region"),e.qZA(),e.TgZ(103,"th",23),e._uU(104,"NombreCupon"),e.qZA(),e.TgZ(105,"th",23),e._uU(106,"InstalacionPagado"),e.qZA(),e.TgZ(107,"th",23),e._uU(108,"NotaVenta"),e.qZA(),e.TgZ(109,"th",23),e._uU(110,"OrdenCompra"),e.qZA(),e.TgZ(111,"th",23),e._uU(112,"ObsMetodoPago"),e.qZA(),e.TgZ(113,"th",23),e._uU(114,"NumeroFactura"),e.qZA(),e.TgZ(115,"th",23),e._uU(116,"VentaAsistida"),e.qZA(),e.TgZ(117,"th",23),e._uU(118,"Preventa"),e.qZA(),e.TgZ(119,"th",23),e._uU(120,"APedido"),e.qZA()()(),e.TgZ(121,"tbody",24),e.YNc(122,Mr,89,44,"tr",25),e.qZA()()(),e.TgZ(123,"div",20)(124,"table",26)(125,"thead")(126,"tr",22)(127,"th",23),e._uU(128,"NumPedido"),e.qZA(),e.TgZ(129,"th",23),e._uU(130,"OrderIdWoo"),e.qZA(),e.TgZ(131,"th",23),e._uU(132,"Sku"),e.qZA(),e.TgZ(133,"th",23),e._uU(134,"Descripcion"),e.qZA(),e.TgZ(135,"th",23),e._uU(136,"TipoProd"),e.qZA(),e.TgZ(137,"th",23),e._uU(138,"Seller"),e.qZA(),e.TgZ(139,"th",23),e._uU(140,"Marca"),e.qZA(),e.TgZ(141,"th",23),e._uU(142,"Cantidad"),e.qZA(),e.TgZ(143,"th",23),e._uU(144,"MontoNeto"),e.qZA(),e.TgZ(145,"th",23),e._uU(146,"Reserva"),e.qZA(),e.TgZ(147,"th",23),e._uU(148,"CostoEnvio"),e.qZA(),e.TgZ(149,"th",23),e._uU(150,"Instalacion"),e.qZA(),e.TgZ(151,"th",23),e._uU(152,"TotalPagadoSinIVA"),e.qZA(),e.TgZ(153,"th",23),e._uU(154,"TotalPagadoConIVA"),e.qZA(),e.TgZ(155,"th",23),e._uU(156,"ReservaTotalSinIVA"),e.qZA(),e.TgZ(157,"th",23),e._uU(158,"ReservaTotalConIVA"),e.qZA(),e.TgZ(159,"th",23),e._uU(160,"PorcentajeInstalacion"),e.qZA(),e.TgZ(161,"th",23),e._uU(162,"InstalacionTotalSinIva"),e.qZA(),e.TgZ(163,"th",23),e._uU(164,"InstalacionTotalConIva"),e.qZA(),e.TgZ(165,"th",23),e._uU(166,"Campa\xf1a"),e.qZA(),e.TgZ(167,"th",23),e._uU(168,"EstadoVenta"),e.qZA(),e.TgZ(169,"th",23),e._uU(170,"Preventa"),e.qZA(),e.TgZ(171,"th",23),e._uU(172,"APedido"),e.qZA()()(),e.TgZ(173,"tbody",24),e.YNc(174,Sr,47,23,"tr",25),e.qZA()()()()()()(),e._UZ(175,"app-toast",27),e.YNc(176,Ir,3,0,"ng-template",null,28,e.W1O)}2&t&&(e.xp6(6),e.Q6J("formGroup",a.myGroup),e.xp6(13),e.Q6J("disabled",a.disabledExcel),e.xp6(2),e.Q6J("disabled",a.disabledExcel),e.xp6(1),e.Q6J("ngIf",a.noSales),e.xp6(1),e.Q6J("ngIf",a.sales.length>0),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(98),e.Q6J("ngForOf",a.sales),e.xp6(52),e.Q6J("ngForOf",a.salesDetails))},dependencies:[_.sg,_.O5,d._Y,d.Fj,d.JJ,d.JL,T.J4,d.sg,d.u,U.q,H.$],styles:["tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-transform:lowercase}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}"]}),i})();var ae=p(2340);function Fr(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.assingUser(r))}),e.TgZ(2,"p",17),e._uU(3),e.qZA(),e.TgZ(4,"p",18),e._uU(5),e.qZA()()()}if(2&i){const t=n.$implicit;e.xp6(3),e.Oqu(t.title),e.xp6(2),e.Oqu(t.subTitle)}}let qr=(()=>{class i{constructor(){this.usuarios=[],this.loading=!0,this.userSelected=new e.vpe}ngOnInit(){this.usuariosFiltrados=this.listItems||[]}buscarUsuario(t=""){return""===t?this.usuariosFiltrados=this.listItems:(this.usuariosFiltrados=this.listItems.filter(a=>a.title.startsWith(t)),this.usuariosFiltrados.length>0?this.usuariosFiltrados:[])}assingUser(t){this.userSelected.emit(t),this.modal.dismiss()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-assign-seller-modal"]],inputs:{modal:"modal",idQuotation:"idQuotation",listItems:"listItems"},outputs:{userSelected:"userSelected"},decls:16,vars:1,consts:[[1,"modal-dialog","modal-dialog-centered","mw-650px","shadow-none"],[1,"modal-content"],[1,"modal-header","pb-0","border-0","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y","mx-5","pt-0"],[1,"text-center","mb-13"],[1,"mb-3"],["type","text","name","search","value","","placeholder","Busca por Usuario",1,"form-control","text-center","form-control-lg","form-control-solid","px-15",3,"keyup"],["buscaUsuario",""],[1,"mh-375px","scroll-y","my-4"],["class","d-flex p-3",4,"ngFor","ngForOf"],[1,"d-flex","p-3"],[1,"text-start","w-100","cursor-pointer","user-info",3,"click"],[1,"fs-5","fw-bolder","mb-2","user-name","transition"],[1,"fw-bold","text-muted"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.NdJ("click",function(){return a.modal.dismiss()}),e.TgZ(4,"span",4),e.O4$(),e.TgZ(5,"svg",5),e._UZ(6,"rect",6)(7,"rect",7),e.qZA()()()(),e.kcU(),e.TgZ(8,"div",8)(9,"div",9)(10,"h1",10),e._uU(11,"Asignar usuario"),e.qZA(),e.TgZ(12,"input",11,12),e.NdJ("keyup",function(){e.CHM(o);const s=e.MAs(13);return e.KtG(a.buscarUsuario(s.value))}),e.qZA(),e.TgZ(14,"div",13),e.YNc(15,Fr,6,2,"div",14),e.qZA()()()()()}2&t&&(e.xp6(15),e.Q6J("ngForOf",a.usuariosFiltrados))},dependencies:[_.sg],styles:[".user-info[_ngcontent-%COMP%]:hover   .user-name[_ngcontent-%COMP%]{color:#009ef7;transition:all .3s ease}"]}),i})();function Lr(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeFilters())}),e._uU(1," Quitar filtros "),e.qZA()}}function Or(i,n){1&i&&(e.TgZ(0,"div",29),e._UZ(1,"img",30),e.qZA())}function Rr(i,n){1&i&&(e.TgZ(0,"div",34)(1,"div"),e._uU(2,"No hay datos para mostrar"),e.qZA()())}function Pr(i,n){1&i&&(e.TgZ(0,"th",38),e._uU(1,"Disponibilidad"),e.qZA())}function Nr(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3),s=e.MAs(40);return e.KtG(r.open(s,o.id))}),e._uU(1," Asignar "),e.qZA()}}function Ur(i,n){1&i&&(e.ynx(0),e._uU(1,"Liberar"),e.BQk())}function Vr(i,n){1&i&&(e.ynx(0),e._UZ(1,"span",54),e.BQk())}function Yr(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.deleteUserFromQuote(r.usuario.id,o.id))}),e.YNc(1,Ur,2,0,"ng-container",53),e.YNc(2,Vr,2,0,"ng-container",53),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("disabled",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("ngIf",t.isLoading)}}function Qr(i,n){1&i&&(e.ynx(0),e._uU(1,"Tomar"),e.BQk())}function Br(i,n){1&i&&(e.ynx(0),e._UZ(1,"span",54),e.BQk())}function Jr(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.userSelected(r.usuario,o.id))}),e.YNc(1,Qr,2,0,"ng-container",53),e.YNc(2,Br,2,0,"ng-container",53),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("disabled",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(1),e.Q6J("ngIf",t.isLoading)}}const R=function(i){return[i]};function Hr(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",42)(3,"a",43),e._uU(4),e.qZA()(),e.TgZ(5,"td")(6,"a",43),e._uU(7),e.ALo(8,"titlecase"),e.qZA()(),e.TgZ(9,"td",44)(10,"a",43),e._uU(11),e.ALo(12,"titlecase"),e.qZA()(),e.TgZ(13,"td",42)(14,"a",43),e._uU(15),e.ALo(16,"lowercase"),e.qZA()(),e.TgZ(17,"td",45)(18,"a",43),e._uU(19),e.ALo(20,"lowercase"),e.qZA()(),e.TgZ(21,"td",42)(22,"a",43),e._uU(23),e.ALo(24,"currency"),e.qZA()(),e.TgZ(25,"td",42)(26,"a",43)(27,"span",46),e._uU(28,"|"),e.qZA(),e._uU(29),e.ALo(30,"date"),e.TgZ(31,"span",46),e._uU(32,"|"),e.qZA()()(),e.TgZ(33,"td",42)(34,"div",47),e.YNc(35,Nr,2,0,"button",48),e.YNc(36,Yr,3,3,"button",49),e.YNc(37,Jr,3,3,"button",50),e.qZA()()(),e.BQk()),2&i){const t=n.$implicit,a=e.oxw(3);e.xp6(3),e.Q6J("routerLink",e.VKq(33,R,"../cotizacion/"+t.id)),e.xp6(1),e.Oqu(t.vch_rut&&t.vch_rut),e.xp6(2),e.Q6J("routerLink",e.VKq(35,R,"../cotizacion/"+t.id)),e.xp6(1),e.hij(" ",t.vch_razonsocial&&e.lcZ(8,17,t.vch_razonsocial)," "),e.xp6(3),e.Q6J("routerLink",e.VKq(37,R,"../cotizacion/"+t.id)),e.xp6(1),e.hij(" ",t.vch_direccion&&e.lcZ(12,19,t.vch_direccion)," "),e.xp6(3),e.Q6J("routerLink",e.VKq(39,R,"../cotizacion/"+t.id)),e.xp6(1),e.Oqu(t.vch_email&&e.lcZ(16,21,t.vch_email)),e.xp6(3),e.Q6J("routerLink",e.VKq(41,R,"../cotizacion/"+t.id)),e.xp6(1),e.hij(" ",t.vch_vendedor&&e.lcZ(20,23,t.vch_vendedor)," "),e.xp6(3),e.Q6J("routerLink",e.VKq(43,R,"../cotizacion/"+t.id)),e.xp6(1),e.hij(" ",e.gM2(24,25,t.total,"$","code","1.0-0")," "),e.xp6(3),e.Q6J("routerLink",e.VKq(45,R,"../cotizacion/"+t.id)),e.xp6(3),e.Oqu(e.xi3(30,30,t.createdAt,"dd/MM/yyyy")),e.xp6(6),e.Q6J("ngIf",a.isAdmin),e.xp6(1),e.Q6J("ngIf",a.takenOrAvailable(t)),e.xp6(1),e.Q6J("ngIf",!a.takenOrAvailable(t))}}function zr(i,n){if(1&i&&(e.TgZ(0,"div",35)(1,"table",36)(2,"thead")(3,"tr",37)(4,"th",38),e._uU(5,"Rut"),e.qZA(),e.TgZ(6,"th",38),e._uU(7,"Raz\xf3n social"),e.qZA(),e.TgZ(8,"th",39),e._uU(9,"Direccion"),e.qZA(),e.TgZ(10,"th",38),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"th",39),e._uU(13,"Vendedor"),e.qZA(),e.TgZ(14,"th",38),e._uU(15,"Total"),e.qZA(),e.TgZ(16,"th",38),e._uU(17,"Fecha"),e.qZA(),e.YNc(18,Pr,2,0,"th",40),e.qZA()(),e.TgZ(19,"tbody"),e.YNc(20,Hr,38,47,"ng-container",41),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(18),e.Q6J("ngIf",t.isAdminSeller),e.xp6(2),e.Q6J("ngForOf",t.allFilterQuotes)}}function jr(i,n){if(1&i&&(e.TgZ(0,"div",31),e.YNc(1,Rr,3,0,"div",32),e.YNc(2,zr,21,2,"ng-template",null,33,e.W1O),e.qZA()),2&i){const t=e.MAs(3),a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.allFilterQuotes&&0==a.allFilterQuotes.length)("ngIfElse",t)}}function Gr(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-assign-seller-modal",56),e.NdJ("userSelected",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.userSelected(o))}),e.qZA()}if(2&i){const t=n.$implicit,a=e.oxw();e.Q6J("modal",t)("listItems",a.UserlistModal)("idQuotation",a.id_quotation)}}let $r=(()=>{class i{constructor(t,a,o,r){this.salesProvider=t,this.userProvider=a,this.formBuilder=o,this.modalService=r,this.allQuotes=[],this.allFilterQuotes=[],this.UserlistModal=[],this.filterActive=!1,this.isLoading=!1,this.idType=ae.N.BITACORA_COTIZACION,this.usuario=this.userProvider.usuario,this.rol=this.getRol(),this.loadData()}getRol(){return this.userProvider.adminAibo?E.adminAibo:this.userProvider.isAdminSeller()?E.adminSeller:E.normal}get isAdmin(){return this.rol==E.adminAibo||this.rol==E.adminSeller}takenOrAvailable(t){return t.usuarios1.length>0&&!!t.usuarios1.find(a=>a.tbl_cotizacionxusuario.id_usuario==this.usuario.id)}ngOnInit(){this.filterFormGroup=this.formBuilder.group({vch_razonsocial:"",vch_email:"",vch_rut:"",vch_direccion:"",vch_vendedor:"",initDate:"",endDate:""})}loadData(){this.isLoading=!0,this.getAllQuotes()}open(t,a){var o=this;return(0,A.Z)(function*(){o.id_quotation=a,o.UserlistModal=yield o.showUsers(a),o.modalService.open(t).result.then(r=>{},r=>{})})()}getAllQuotes(){this.salesProvider.getAllQuotes().subscribe({next:t=>{this.allQuotes=t.data,this.allQuotes.forEach(a=>a.isLoading=!1),this.allFilterQuotes=[...this.allQuotes].sort((a,o)=>new Date(o.createdAt).getTime()-new Date(a.createdAt).getTime()),this.isLoading=!1;for(let a of this.allFilterQuotes)a.total=a.tbl_productoxcotizacions.reduce((o,r)=>o+r.int_cantidad*(r.db_precio*(1-(r.int_porcdescuento||0)/100))+(r.db_instalacion||0)*r.int_cantidad,0)},error:t=>{this.isLoading=!1}})}filterSubmit(){this.filterActive=!0,this.allFilterQuotes=this.allQuotes.filter(a=>{if(this.filterValidations(a))return a})}removeFilters(){this.allFilterQuotes=[...this.allQuotes],this.filterActive=!1,this.filterFormGroup.reset()}filterValidations(t){const a=this.filterFormGroup.value;return!(a.vch_razonsocial&&!t.vch_razonsocial?.toLocaleLowerCase().includes(a.vch_razonsocial.toLocaleLowerCase())||a.vch_rut&&!t.vch_rut?.toLocaleLowerCase().includes(a.vch_rut.toLocaleLowerCase())||a.vch_email&&!t.vch_email?.toLocaleLowerCase().includes(a.vch_email.toLocaleLowerCase())||a.vch_vendedor&&!t.vch_vendedor?.toLocaleLowerCase().includes(a.vch_vendedor.toLocaleLowerCase())||a.vch_direccion&&!t.vch_direccion?.toLocaleLowerCase().includes(a.vch_direccion.toLocaleLowerCase())||(a.initDate||a.endDate)&&!this.filterValidateDate(t))}filterValidateDate(t){const a=this.filterFormGroup.value,o=new Date(t.createdAt).getTime(),r=a.initDate?new Date(a.initDate.year,a.initDate.month-1,a.initDate.day).getTime():0,s=a.endDate?new Date(a.endDate.year,a.endDate.month-1,a.endDate.day).getTime():Date.now();return o>=r&&o<=s}sendBitacora(t,a,o,r,s){(0,b.z)(this.salesProvider.postBitacora({id_user:t,logType:8,vch_cambio:"",action:o,id_tipo:this.idType,id_obj:a,setLog:!0,client:r,client2:s}))}userSelected(t,a){a&&(this.id_quotation=a);let o=this.findQuote(this.id_quotation);o.isLoading=!0;const r={id_cotizacion:this.id_quotation,id_usuario:t.id};this.sendBitacora(t.id,this.id_quotation,"user-assign",this.usuario.vch_nombre,t.title),this.salesProvider.postQuotationToUser(r).subscribe({next:s=>{this.allFilterQuotes.find(u=>u.id==this.id_quotation)?.usuarios1?.push({tbl_cotizacionxusuario:s.data})},error:s=>{},complete:()=>{o.isLoading=!1}})}deleteUserFromQuote(t,a){this.id_quotation=a;let o=this.findQuote(this.id_quotation);o.isLoading=!0;const r={id_cotizacion:this.id_quotation,id_usuario:t};this.sendBitacora(t,this.id_quotation,"user-unassign",this.usuario.vch_nombre),this.salesProvider.deleteUserFromQuotation(r).subscribe({next:s=>{},error:s=>{},complete:()=>{o.isLoading=!1;let s=o?.usuarios1?.findIndex(l=>l.tbl_cotizacionxusuario.id_usuario==this.userProvider.usuario.id);o?.usuarios1?.splice(s,1)}})}showUsers(t){var a=this;return(0,A.Z)(function*(){const o=yield a.getUserByRol(t);return o?o.map(r=>({id:r.id,title:r.vch_nombre,subTitle:r.tbl_empresa?.vch_nombre??""})):[]})()}getUserByRol(t){var a=this;return(0,A.Z)(function*(){try{if(a.rol==E.normal)return[];const o=yield(0,b.z)(a.userProvider.getAllUsers());if(a.rol==E.adminAibo)return o.data.filter(s=>!s.cotizaciones1?.some(c=>c.id==t));let r=o.data.filter(s=>s.id_empresa==a.userProvider.usuario.id_empresa);return r=r.filter(s=>!s.cotizaciones1?.some(c=>c.id==t)),r}catch(o){throw o}})()}findQuote(t){return this.allFilterQuotes.find(a=>a.id==t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.M),e.Y36(k.i),e.Y36(d.qu),e.Y36(T.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list"]],decls:42,vars:4,consts:[[1,"card","mb-5","mb-xl-10"],[1,"card-header","border-0","pt-5"],[1,"card-title","w-100","d-flex","justify-content-between"],[1,"float-right"],["table","quote-table","name","ListadoCotizaciones.xlsx"],[1,"row","card-toolbar","my-4"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","placeholder","Raz\xf3n social","name","vch_razonsocial","formControlName","vch_razonsocial",1,"form-control"],["type","text","placeholder","Rut","name","vch_rut","formControlName","vch_rut",1,"form-control"],["type","text","placeholder","Email","name","vch_email","formControlName","vch_email",1,"form-control"],["type","text","placeholder","Direcci\xf3n","name","vch_direccion","formControlName","vch_direccion",1,"form-control"],["type","text","placeholder","Vendedor","name","vch_vendedor","formControlName","vch_vendedor",1,"form-control"],[1,"row","mt-5"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","initDate","formControlName","initDate","ngbDatepicker","",1,"form-control"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control"],["dFin","ngbDatepicker"],[1,"row","d-flex","justify-content-between","mt-5"],["type","submit","value","Filtrar",1,"btn","btn-primary","mt-4","mb-3","me-4"],["title","borrar filtros","type","button","class","btn btn-danger mt-4 mb-3 me-4",3,"click",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body py-3",4,"ngIf"],["modal",""],["aria-live","polite","aria-atomic","true"],["title","borrar filtros","type","button",1,"btn","btn-danger","mt-4","mb-3","me-4",3,"click"],[1,"text-center","mb-10"],["src","/assets/loading.gif","alt","","height","100","width","100"],[1,"card-body","py-3"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf","ngIfElse"],["haveQuotes",""],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],[1,"table-responsive"],["id","quote-table",1,"table","table-row-dashed","align-middle","table-hover","table-responsive"],[1,"fw-bolder","text-muted"],[1,"text-start"],[1,"text-start","d-none"],["class","text-start",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-start","fw-bolder"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"],[1,"d-none"],[1,"text-start","fw-bolder","d-none"],[2,"visibility","hidden"],[1,"d-flex","flex-column","gap-3"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["class","btn btn-danger btn-sm w-80px",3,"disabled","click",4,"ngIf"],["class","btn btn-primary btn-sm w-80px ",3,"disabled","click",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm","w-80px",3,"disabled","click"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"btn","btn-primary","btn-sm","w-80px",3,"disabled","click"],[3,"modal","listItems","idQuotation","userSelected"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Cotizaciones"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"app-export-excel",4),e.qZA()(),e.TgZ(7,"div",5)(8,"form",6),e.NdJ("ngSubmit",function(){return a.filterSubmit()}),e.TgZ(9,"div",7)(10,"div",8),e._UZ(11,"input",9),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"input",10),e.qZA(),e.TgZ(14,"div",8),e._UZ(15,"input",11),e.qZA(),e.TgZ(16,"div",8),e._UZ(17,"input",12),e.qZA(),e.TgZ(18,"div",8),e._UZ(19,"input",13),e.qZA()(),e.TgZ(20,"div",14)(21,"div",8)(22,"div",15),e._UZ(23,"input",16,17),e.TgZ(25,"button",18),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(24);return e.KtG(s.toggle())}),e._uU(26," . "),e.qZA()()(),e.TgZ(27,"div",8)(28,"div",15),e._UZ(29,"input",19,20),e.TgZ(31,"button",18),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(30);return e.KtG(s.toggle())}),e._uU(32," . "),e.qZA()()()(),e.TgZ(33,"div",21)(34,"div",8),e._UZ(35,"input",22),e.YNc(36,Lr,2,0,"button",23),e.qZA()()()()(),e.YNc(37,Or,2,0,"div",24),e.YNc(38,jr,4,2,"div",25),e.qZA(),e.YNc(39,Gr,1,3,"ng-template",null,26,e.W1O),e._UZ(41,"app-toast",27)}2&t&&(e.xp6(8),e.Q6J("formGroup",a.filterFormGroup),e.xp6(28),e.Q6J("ngIf",a.filterActive),e.xp6(1),e.Q6J("ngIf",a.isLoading),e.xp6(1),e.Q6J("ngIf",!a.isLoading))},dependencies:[_.sg,_.O5,x.yS,d._Y,d.Fj,d.JJ,d.JL,T.J4,d.sg,d.u,U.q,H.$,qr,_.i8,_.rS,_.H9,_.uU]}),i})();var E=(()=>{return(i=E||(E={}))[i.adminAibo=0]="adminAibo",i[i.adminSeller=1]="adminSeller",i[i.normal=2]="normal",E;var i})(),Kr=p(3474);function Wr(i,n){1&i&&(e.TgZ(0,"p")(1,"ngb-alert",7)(2,"strong"),e._uU(3,"Sin logs"),e.qZA()()()),2&i&&(e.xp6(1),e.Q6J("dismissible",!1))}function Xr(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td",16)(2,"span",17),e._uU(3),e.qZA()(),e.TgZ(4,"td",16)(5,"span",18),e._uU(6),e.qZA()(),e.TgZ(7,"td",16)(8,"span",18),e._uU(9),e.ALo(10,"date"),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(3),e.hij(" ",t.vch_cambio," "),e.xp6(3),e.hij(" ",t.tbl_usuario.vch_nombre," "),e.xp6(3),e.hij(" ",e.Dn7(10,3,t.createdAt,"dd/MM/yyyy HH:mm:ss","+000")," ")}}function es(i,n){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"table",10)(3,"thead")(4,"tr",11)(5,"th",12),e._uU(6,"Acci\xf3n"),e.qZA(),e.TgZ(7,"th",13),e._uU(8,"Usuario"),e.qZA(),e.TgZ(9,"th",14),e._uU(10,"Fecha"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,Xr,11,7,"tr",15),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.logs)}}let ts=(()=>{class i{constructor(t){this.saleService=t,this.logs=[]}ngOnInit(){this.loadLogs()}loadLogs(){null!=this.cotizacion?.id&&this.saleService.getBitacora(this.cotizacion?.id).subscribe({next:t=>{this.logs=t.data.length>0?t.data:[]},error:t=>{console.error("error en la busqueda de logs",t)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-quote-log-view"]],inputs:{cotizacion:"cotizacion"},decls:9,vars:2,consts:[[1,"card","mb-5","mb-xl-8"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[4,"ngIf"],["class","card-body py-3",4,"ngIf"],["type","info",1,"m-5",3,"dismissible"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-striped","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"ps-4","min-w-325px","rounded-start"],[1,"ps-4","min-w-125px"],[1,"min-w-125px","rounded-end"],[4,"ngFor","ngForOf"],[1,"ps-4"],[1,"text-dark","text-hover-primary","mb-1","fs-6"],[1,"text-dark","text-hover-primary","d-block","mb-1","fs-6"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2)(3,"span",3),e._uU(4,"Bitacora de la cotizaci\xf3n"),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"\xfaltimos movimientos"),e.qZA()()(),e.YNc(7,Wr,4,1,"p",5),e.YNc(8,es,13,1,"div",6),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngIf",0==a.logs.length),e.xp6(1),e.Q6J("ngIf",a.logs.length>0))},dependencies:[_.sg,_.O5,T.xm,_.uU]}),i})();function is(i,n){1&i&&(e.TgZ(0,"div",18),e._UZ(1,"span",19),e.TgZ(2,"span"),e._uU(3,"Cargando..."),e.qZA()())}function as(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"li"),e._uU(1),e._UZ(2,"br"),e._uU(3),e.TgZ(4,"button",23),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.assignUser(r.id))}),e._uU(5,"Asignar"),e.qZA()()}if(2&i){const t=n.$implicit;e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.rut,"")}}function ns(i,n){if(1&i&&(e.TgZ(0,"ul"),e.YNc(1,as,6,2,"li",22),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.users)}}function os(i,n){1&i&&(e.TgZ(0,"div",24)(1,"div",25)(2,"div",26),e._uU(3,"Cliente no encontrado"),e.qZA()()())}function rs(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",20),e.YNc(2,ns,2,1,"ul",17),e.qZA(),e.YNc(3,os,4,0,"div",21),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.users.length>0),e.xp6(1),e.Q6J("ngIf",t.users.length<1)}}let ss=(()=>{class i{constructor(t,a){this.userProvider=t,this.salesProvider=a,this.assignExec=new e.vpe,this.loading=!0,this.admin=!1,this.users=[],this.usersInit=[]}ngOnInit(){this.userProvider.getEmpresa().subscribe(t=>{this.seller=t.data.id,this.admin=this.userProvider.adminAibo,this.getUsers()})}getUsers(){this.loading=!0,this.salesProvider.getClientes().subscribe({next:t=>{this.usersInit=t.data,this.users=t.data,this.loading=!1}})}assignUser(t){this.salesProvider.assignClientToQoute(t,this.qoute).subscribe({next:a=>{this.assignExec.emit(a.data),this.modal.dismiss()}})}filterClient(t){let a=t.target.value,o="";o=a.length>0?this.usersInit.filter(r=>String(r.name).toLowerCase().includes(a.toLowerCase())):this.usersInit,this.users=o}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.i),e.Y36(Z.M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-client-modal"]],inputs:{qoute:"qoute",modal:"modal"},outputs:{assignExec:"assignExec"},decls:20,vars:2,consts:[["id","kt_modal_users_search","tabindex","-1","aria-hidden","true"],[1,"modal-dialog","modal-dialog-centered","mw-650px"],[1,"modal-content"],[1,"modal-header","pb-0","border-0","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"svg-icon","svg-icon-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","6","y","17.3137","width","16","height","2","rx","1","transform","rotate(-45 6 17.3137)","fill","currentColor"],["x","7.41422","y","6","width","16","height","2","rx","1","transform","rotate(45 7.41422 6)","fill","currentColor"],[1,"modal-body","scroll-y"],[1,"text-center","mb-13"],[1,"mb-3"],[1,"text-muted","fw-bold","fs-5"],["id","kt_modal_users_search_handler","data-kt-search-keypress","true","data-kt-search-min-length","2","data-kt-search-enter","enter","data-kt-search-layout","inline"],[1,"py-5"],["type","text",1,"form-control",3,"keyup"],["class","loading_message",4,"ngIf"],[4,"ngIf"],[1,"loading_message"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"display_result"],["data-kt-search-element","empty","class","text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],["data-kt-search-element","empty",1,"text-center"],[1,"fw-bold","py-10"],[1,"text-gray-600","fs-3","mb-2"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.NdJ("click",function(){return a.modal.dismiss("remiau")}),e.TgZ(5,"span",5),e.O4$(),e.TgZ(6,"svg",6),e._UZ(7,"rect",7)(8,"rect",8),e.qZA()()()(),e.kcU(),e.TgZ(9,"div",9)(10,"div",10)(11,"h1",11),e._uU(12,"Buscar Clientes "),e.qZA(),e.TgZ(13,"div",12),e._uU(14,"Asigna un cliente a esta cotizaci\xf3n"),e.qZA()(),e.TgZ(15,"div",13)(16,"div",14)(17,"input",15),e.NdJ("keyup",function(r){return a.filterClient(r)}),e.qZA(),e.YNc(18,is,4,0,"div",16),e.YNc(19,rs,4,2,"div",17),e.qZA()()()()()()),2&t&&(e.xp6(18),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading))},dependencies:[_.sg,_.O5],styles:[".display_result[_ngcontent-%COMP%]{padding:10px;border:solid 1px #cfcfcf;border-radius:10px;margin-top:10px}.display_result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0}.display_result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:row;justify-content:space-between;font-size:12px;margin:5px 0;border-bottom:solid 1px #d2cece;padding:3px;text-transform:lowercase}.loading_message[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:10px;margin:5px;gap:10px}"]}),i})();function ls(i,n){1&i&&(e.TgZ(0,"div",4),e._UZ(1,"img",5),e.qZA())}function ds(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"li",18)(1,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.clickTab())}),e._uU(2," Bitacora "),e.qZA()()}}function cs(i,n){if(1&i&&e._UZ(0,"app-quote-log-view",20),2&i){const t=e.oxw(2);e.Q6J("cotizacion",t.quote)}}function us(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Cluster"),e.qZA(),e.TgZ(3,"div",38)(4,"span",39),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(null==t.quote.tbl_tiponegocio?null:t.quote.tbl_tiponegocio.vch_nombre)}}function _s(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Raz\xf3n social"),e.qZA(),e.TgZ(3,"div",26)(4,"span",27),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(t.quote.vch_razonsocial)}}function ps(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Nombre cliente"),e.qZA(),e.TgZ(3,"div",26)(4,"span",27),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(t.quote.vch_cliente)}}function ms(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Rut"),e.qZA(),e.TgZ(3,"div",26)(4,"span",27),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(t.quote.vch_rut)}}function hs(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"div",26)(4,"span",27),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(t.quote.vch_email)}}function fs(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Tel\xe9fono"),e.qZA(),e.TgZ(3,"div",38)(4,"span",39),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(t.quote.vch_telefono)}}function gs(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Regi\xf3n"),e.qZA(),e.TgZ(3,"div",38)(4,"span",40),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(null==t.quote.tbl_region?null:t.quote.tbl_region.vch_nombre)}}function vs(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Comuna"),e.qZA(),e.TgZ(3,"div",38)(4,"span",40),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(null==t.quote.tbl_comuna?null:t.quote.tbl_comuna.vch_nombre)}}function bs(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Direcci\xf3n"),e.qZA(),e.TgZ(3,"div",29)(4,"span",27),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(t.quote.vch_direccion)}}function xs(i,n){if(1&i&&(e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Email vendedor"),e.qZA(),e.TgZ(3,"div",29)(4,"span",27),e._uU(5),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Oqu(t.quote.vch_emailvendedor)}}function ys(i,n){1&i&&(e.TgZ(0,"div",41),e._uU(1,"No hay clientes asignados a esta cotizaci\xf3n "),e.qZA())}const Cs=function(i){return[i]};function As(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"li",44)(1,"a",45)(2,"div",46)(3,"ul",47)(4,"li"),e._uU(5),e.qZA(),e.TgZ(6,"li"),e._uU(7),e.qZA()()()(),e.TgZ(8,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit;e.oxw(2);const s=e.MAs(44),l=e.oxw(2);return e.KtG(l.open(s,r.vch_correo))}),e._uU(9,"Eliminar"),e.qZA()()}if(2&i){const t=n.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(3,Cs,"../../../mantenedores/client/"+t.vch_correo)),e.xp6(4),e.hij("Nombre: ",t.vch_nombre,""),e.xp6(2),e.hij("Rut: ",t.vch_rut,"")}}function ws(i,n){if(1&i&&(e.TgZ(0,"ul",42),e.YNc(1,As,10,5,"li",43),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.clients)}}function Ts(i,n){1&i&&(e.TgZ(0,"div",54)(1,"div"),e._uU(2,"No hay datos para mostrar"),e.qZA()())}function Ds(i,n){1&i&&(e.TgZ(0,"th",57),e._uU(1,"Instalaci\xf3n"),e.qZA())}function Zs(i,n){if(1&i&&(e.TgZ(0,"td",61)(1,"a",62),e._uU(2),e.ALo(3,"numberFormat"),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.db_instalacion)," ")}}function ks(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",61)(3,"a",62),e._uU(4),e.qZA()(),e.TgZ(5,"td",61)(6,"a",62),e._uU(7),e.qZA()(),e.TgZ(8,"td")(9,"a",62),e._uU(10),e.qZA()(),e.TgZ(11,"td")(12,"a",62),e._uU(13),e.qZA()(),e.TgZ(14,"td",61)(15,"a",62),e._uU(16),e.ALo(17,"numberFormat"),e.qZA()(),e.TgZ(18,"td",61)(19,"a",62),e._uU(20),e.qZA()(),e.YNc(21,Zs,4,3,"td",63),e.TgZ(22,"td",61)(23,"a",62),e._uU(24),e.ALo(25,"numberFormat"),e.qZA()()(),e.BQk()),2&i){const t=n.$implicit,a=e.oxw(5);e.xp6(4),e.hij(" ",t.tbl_producto.vch_sku,""),e.xp6(3),e.hij(" ",t.tbl_producto.vch_nombre,""),e.xp6(3),e.hij(" ",a.getCompanyName(t.tbl_producto.id_empresa)," "),e.xp6(3),e.hij(" ",t.int_cantidad," "),e.xp6(3),e.hij(" ",e.lcZ(17,8,t.db_precio)," "),e.xp6(4),e.hij(" ",t.int_porcdescuento,"% "),e.xp6(1),e.Q6J("ngIf",a.hasInstallation),e.xp6(3),e.hij(" ",e.lcZ(25,10,t.int_cantidad*t.db_precio*(1-(t.int_porcdescuento||0)/100)+(t.db_instalacion||0)*t.int_cantidad)," ")}}function Ms(i,n){if(1&i&&(e.TgZ(0,"table",55)(1,"thead")(2,"tr",56)(3,"th",57),e._uU(4,"SKU"),e.qZA(),e.TgZ(5,"th",57),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"th",57),e._uU(8,"Empresa"),e.qZA(),e.TgZ(9,"th",57),e._uU(10,"Cantidad"),e.qZA(),e.TgZ(11,"th",57),e._uU(12,"Precio"),e.qZA(),e.TgZ(13,"th",57),e._uU(14,"Descuento"),e.qZA(),e.YNc(15,Ds,2,0,"th",58),e.TgZ(16,"th",59),e._uU(17,"Total"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,ks,26,12,"ng-container",60),e.qZA()()),2&i){const t=e.oxw(4);e.xp6(15),e.Q6J("ngIf",t.hasInstallation),e.xp6(4),e.Q6J("ngForOf",t.productsInQuote)}}function Ss(i,n){if(1&i&&(e.TgZ(0,"div",49)(1,"div",50)(2,"h3",9),e._uU(3,"Productos"),e.qZA()(),e.YNc(4,Ts,3,0,"div",51),e.TgZ(5,"div",52),e.YNc(6,Ms,20,2,"ng-template",null,53,e.W1O),e.qZA()()),2&i){const t=e.MAs(7),a=e.oxw(3);e.xp6(4),e.Q6J("ngIf",a.productsInQuote&&0==a.productsInQuote.length)("ngIfElse",t)}}function Is(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-add-client-modal",65),e.NdJ("assignExec",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.getClientsByQuote())}),e.qZA()}if(2&i){const t=e.oxw().$implicit,a=e.oxw(3);e.Q6J("qoute",a.idQuote)("modal",t)}}function Es(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-add-client-modal",65),e.NdJ("assignExec",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.getClientsByQuote())}),e.qZA()}if(2&i){const t=e.oxw().$implicit,a=e.oxw(3);e.Q6J("qoute",a.idQuote)("modal",t)}}function Fs(i,n){if(1&i&&(e.YNc(0,Is,1,2,"app-add-client-modal",64),e.YNc(1,Es,1,2,"app-add-client-modal",64)),2&i){const t=e.oxw(3);e.Q6J("ngIf",!t.admin),e.xp6(1),e.Q6J("ngIf",t.admin)}}function qs(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-alert",66),e.NdJ("resp",function(o){e.CHM(t);const r=e.oxw(3);return e.KtG(r.respAlert(o))}),e.qZA()}2&i&&e.Q6J("modalAlert",n.$implicit)("messagge","Se desasignar\xe1 este cliente de la cotizaci\xf3n. \xbfEst\xe1 seguro?")("title","Desasignar Cliente")}function Ls(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23)(3,"div",24)(4,"label",25),e._uU(5,"N\xb0 Cotizaci\xf3n"),e.qZA(),e.TgZ(6,"div",26)(7,"span",27),e._uU(8),e.qZA()()(),e.TgZ(9,"div",24)(10,"label",25),e._uU(11,"Fecha"),e.qZA(),e.TgZ(12,"div",26)(13,"span",27),e._uU(14),e.ALo(15,"date"),e.qZA()()(),e.YNc(16,us,6,1,"div",28),e.YNc(17,_s,6,1,"div",28),e.YNc(18,ps,6,1,"div",28),e.YNc(19,ms,6,1,"div",28),e.YNc(20,hs,6,1,"div",28),e.YNc(21,fs,6,1,"div",28),e.YNc(22,gs,6,1,"div",28),e.YNc(23,vs,6,1,"div",28),e.YNc(24,bs,6,1,"div",28),e.TgZ(25,"div",24)(26,"label",25),e._uU(27,"Vendedor"),e.qZA(),e.TgZ(28,"div",29)(29,"span",27),e._uU(30),e.qZA()()(),e.YNc(31,xs,6,1,"div",28),e.qZA(),e.TgZ(32,"div",30)(33,"div",31)(34,"h3",9),e._uU(35,"Clientes asociados"),e.qZA()(),e.YNc(36,ys,2,0,"div",32),e.YNc(37,ws,2,1,"ul",33),e.TgZ(38,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(42),r=e.oxw(2);return e.KtG(r.open(o))}),e._uU(39,"Asignar Cliente"),e.qZA()()(),e.YNc(40,Ss,8,2,"div",35),e.YNc(41,Fs,2,2,"ng-template",null,36,e.W1O),e.YNc(43,qs,1,3,"ng-template",null,37,e.W1O),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(8),e.Oqu(t.quote.vch_friendlyid),e.xp6(6),e.Oqu(e.Dn7(15,16,t.quote.createdAt,"dd/MM/yyyy HH:mm:ss","GMT")),e.xp6(2),e.Q6J("ngIf",null==t.quote.tbl_tiponegocio?null:t.quote.tbl_tiponegocio.vch_nombre),e.xp6(1),e.Q6J("ngIf",t.quote.vch_razonsocial),e.xp6(1),e.Q6J("ngIf",t.quote.vch_cliente),e.xp6(1),e.Q6J("ngIf",t.quote.vch_rut),e.xp6(1),e.Q6J("ngIf",t.quote.vch_email),e.xp6(1),e.Q6J("ngIf",t.quote.vch_telefono),e.xp6(1),e.Q6J("ngIf",null==t.quote.tbl_region?null:t.quote.tbl_region.vch_nombre),e.xp6(1),e.Q6J("ngIf",null==t.quote.tbl_comuna?null:t.quote.tbl_comuna.vch_nombre),e.xp6(1),e.Q6J("ngIf",t.quote.vch_direccion),e.xp6(6),e.hij(" ",t.quote.vch_vendedor?t.quote.vch_vendedor:"Ninguno"," "),e.xp6(1),e.Q6J("ngIf",t.quote.vch_emailvendedor),e.xp6(5),e.Q6J("ngIf",t.clients.length<1),e.xp6(1),e.Q6J("ngIf",t.clients.length>0),e.xp6(3),e.Q6J("ngIf",!t.showLogs)}}const Os=function(i){return["/sales/add-sale",i]};function Rs(i,n){if(1&i&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"h3",9),e._uU(4,"Detalle de cotizaci\xf3n"),e.qZA(),e.TgZ(5,"ul",10),e.YNc(6,ds,3,0,"li",11),e.qZA()(),e.TgZ(7,"div",12),e._UZ(8,"app-export-excel",13),e.TgZ(9,"button",14)(10,"span",15),e._uU(11,"Crear venta"),e.qZA()()()(),e.YNc(12,cs,1,1,"app-quote-log-view",16),e.YNc(13,Ls,45,20,"div",17),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",!t.admin),e.xp6(2),e.MGl("name","Cotizaci\xf3n-N\xb0",t.friendlyId,".xlsx"),e.xp6(1),e.Q6J("routerLink",e.VKq(5,Os,t.idQuote)),e.xp6(3),e.Q6J("ngIf",!t.admin&&t.showLogs),e.xp6(1),e.Q6J("ngIf",!t.showLogs)}}const Ps=function(){return["../"]};let Ns=(()=>{class i{constructor(t,a,o,r,s){this.salesProvider=t,this.userProvider=a,this.toastService=o,this.modalService=s,this.productsInQuote=[],this.hasInstallation=!1,this.clients=[],this.admin=!1,this.clientSelectedDelete=null,this.companies=[],this.isLoading=!1,this.id_user="",this.showLogs=!1,this.idType=ae.N.BITACORA_COTIZACION,this.idExternalThatDoesntExistInSC=ae.N.ID_EXTERN_CLIENT,this.allUsers=[],this.idQuote=r.snapshot.params.id,this.loadData()}ngOnInit(){}loadData(){this.isLoading=!0,this.getQuote(),this.getCompanies(),this.getFriendlyId(),this.id_user=this.userProvider.usuario.id,this.loadAllUsers()}sendBitacora(t,a,o,r){(0,b.z)(this.salesProvider.postBitacora({id_user:t,logType:8,vch_cambio:"",action:o,id_tipo:this.idType,id_obj:a,setLog:!0,client:r}))}getQuote(){this.salesProvider.getSingleQuote(this.idQuote).subscribe({next:t=>{this.quote=t.data,this.getProductsInQuote(),this.getClientsByQuote(!1)},error:t=>{this.isLoading=!1}})}getProductsInQuote(){this.salesProvider.getProductsPerQuote(this.idQuote).subscribe({next:t=>{this.productsInQuote=t.data,this.isLoading=!1,this.hasInstallation=this.productsInQuote.some(a=>a.db_instalacion&&a.db_instalacion>0)},error:t=>{this.isLoading=!1}})}getClientsByQuote(t=!0){this.salesProvider.getClientByQuote(this.idQuote).subscribe({next:a=>{if(this.clients=a.data,t){let o="",r="";this.clients.map(s=>{this.allUsers.find(l=>o=l.vch_nombre==s.id_cliente?l.id:this.idExternalThatDoesntExistInSC,r=s.id_cliente)}),this.sendBitacora(o,this.idQuote,"assign",r)}},error:a=>{this.isLoading=!1}})}getCompanies(){this.salesProvider.getEmpresas().subscribe({next:t=>{this.companies=t.data}})}getCompanyName(t){return this.companies.find(a=>a.id==t).vch_nombre||""}getFriendlyId(){this.salesProvider.getSingleQuote(this.idQuote).subscribe({next:t=>{this.quote=t.data,this.friendlyId=this.quote.vch_friendlyid},error:t=>{this.isLoading=!1}})}open(t,a=null){this.clientSelectedDelete=a,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{},o=>{})}respAlert(t){t&&this.deleteAssign(this.clientSelectedDelete)}deleteAssign(t){this.clientSelectedDelete=null,this.salesProvider.deleteAssign(t,this.idQuote).subscribe({next:a=>{this.getClientsByQuote(!1);let o="";this.clients.map(r=>{this.allUsers.find(s=>o=s.vch_nombre==r.id_cliente?s.id:this.idExternalThatDoesntExistInSC)}),this.sendBitacora(o,this.idQuote,"unassign",t)},error:a=>{this.isLoading=!1}})}isAdminAibo(){this.userProvider.adminAibo&&(this.admin=!0)}clickTab(){this.showLogs=!this.showLogs}loadAllUsers(){var t=this;return(0,A.Z)(function*(){try{t.allUsers=(yield(0,b.z)(t.userProvider.getAllUsers())).data||[]}catch{t.toastService.show("Error al cargar los usuarios",{classname:"bg-danger text-light",delay:3e3})}})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.M),e.Y36(k.i),e.Y36(q.k),e.Y36(x.gz),e.Y36(T.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-detail"]],decls:5,vars:4,consts:[[1,"mb-5"],[1,"text-gray-800","text-hover-primary","fs-2","fw-bolder",3,"routerLink"],["class","text-center mb-10",4,"ngIf"],["class","card mb-5 mb-xl-10 mb-5","id","kt_profile_details_view",4,"ngIf"],[1,"text-center","mb-10"],["src","/assets/loading.gif","alt","","height","100","width","100"],["id","kt_profile_details_view",1,"card","mb-5","mb-xl-10","mb-5"],[1,"card-header","py-1"],[1,"card-title","m-0","gap-4"],[1,"fw-bolder","m-0"],[1,"nav","nav-custom","nav-tabs","nav-line-tabs","nav-line-tabs-2x","border-0","fs-4","fw-bold","mb-n2"],["class","nav-item",4,"ngIf"],[1,"d-flex","align-items-center","gap-3"],["table","quote-table",3,"name"],["type","button",1,"btn","btn-primary",3,"routerLink"],[1,"indicator-label"],[3,"cotizacion",4,"ngIf"],["class","card-body p-9",4,"ngIf"],[1,"nav-item"],["type","button","data-bs-toggle","tab",1,"nav-link","text-active-primary","pb-4",3,"click"],[3,"cotizacion"],[1,"card-body","p-9"],[1,"card-body","row"],[1,"col-lg-8","col-sm-12","col-md-8"],[1,"row","mb-7"],[1,"col-lg-4","fw-bold","text-muted"],[1,"col-lg-8","fv-row"],[1,"fw-bold","fs-6"],["class","row mb-7",4,"ngIf"],[1,"col-lg-8"],[1,"col-lg-4","col-sm-12","col-md-4"],[1,"card-title","m-0"],["class","no-client-list",4,"ngIf"],["class","client-list",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["class","card-body py-3 mb-5",4,"ngIf"],["modal",""],["modalAlert",""],[1,"col-lg-8","d-flex","align-items-center"],[1,"fw-bolder","fs-6","me-2"],[1,"fw-bold","fs-6","me-2"],[1,"no-client-list"],[1,"client-list"],["class","client-list-item",4,"ngFor","ngForOf"],[1,"client-list-item"],["target","_blank",3,"routerLink"],[1,"client-list-item-detail"],[1,"item-detail-info"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"card-body","py-3","mb-5"],[1,"card-title","m-0","mt-5","mb-4"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf","ngIfElse"],[1,"table-responsive"],["haveQuotes",""],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],["id","quote-table",1,"table","table-row-dashed","align-middle","table-hover","table-responsive"],[1,"fw-bolder","text-muted"],[1,"text-start"],["class","text-start",4,"ngIf"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-start","fw-bolder"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder"],["class","text-start fw-bolder",4,"ngIf"],[3,"qoute","modal","assignExec",4,"ngIf"],[3,"qoute","modal","assignExec"],[3,"modalAlert","messagge","title","resp"]],template:function(t,a){1&t&&(e.TgZ(0,"h3",0)(1,"a",1),e._uU(2," Volver "),e.qZA()(),e.YNc(3,ls,2,0,"div",2),e.YNc(4,Rs,14,7,"div",3)),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(3,Ps)),e.xp6(2),e.Q6J("ngIf",a.isLoading),e.xp6(1),e.Q6J("ngIf",!a.isLoading))},dependencies:[_.sg,_.O5,x.rH,x.yS,H.$,Kr.w,ts,ss,_.uU,ie.p],styles:["li.client-list-item[_ngcontent-%COMP%]{list-style:none;border:solid 1px #d0d0d0;margin:10px 0;padding:5px}ul.client-list[_ngcontent-%COMP%]{padding:0}ul.item-detail-info[_ngcontent-%COMP%]{list-style:none;padding:0}ul.item-detail-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#000}.no-client-list[_ngcontent-%COMP%]{margin:10px 0}.btn-sm[_ngcontent-%COMP%]{padding:3px 5px!important;font-size:10px!important}"]}),i})();var Us=p(4341);function Vs(i,n){if(1&i&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.vch_nombre," ")}}function Ys(i,n){if(1&i&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ","ac056434-6e08-4a6b-8d78-de9737be70d0"==t.id?"En preparacion (Despacho)":t.vch_nombre," ")}}function Qs(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.removeFilters())}),e._uU(1," Quitar filtros "),e.qZA()}}function Bs(i,n){1&i&&(e.TgZ(0,"div",30),e._UZ(1,"img",31),e.qZA())}function Js(i,n){1&i&&(e.TgZ(0,"div",35)(1,"div"),e._uU(2,"No hay datos para mostrar"),e.qZA()())}const F=function(i){return[i]};function Hs(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"th",7)(2,"a",40),e._uU(3),e.qZA()(),e.TgZ(4,"td",41)(5,"a",42),e._uU(6),e.ALo(7,"rutFormat"),e.qZA()(),e.TgZ(8,"td",41)(9,"a",42),e._uU(10),e.qZA()(),e.TgZ(11,"td",41)(12,"a",43),e._uU(13),e.qZA()(),e.TgZ(14,"td",41)(15,"a",43),e._uU(16),e.qZA()(),e.TgZ(17,"td",41)(18,"a",43),e._uU(19),e.qZA()(),e.TgZ(20,"td",41)(21,"a",43),e._uU(22),e.qZA()(),e.TgZ(23,"td",41)(24,"a",43),e._uU(25),e.qZA()(),e.TgZ(26,"td",41)(27,"a",43),e._uU(28),e.qZA()(),e.TgZ(29,"td",44)(30,"a",43),e._uU(31),e.ALo(32,"date"),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(25,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.int_orderid||t.id),e.xp6(2),e.Q6J("routerLink",e.VKq(27,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu(e.lcZ(7,20,null==t.tbl_cliente?null:t.tbl_cliente.vch_rut)),e.xp6(3),e.Q6J("routerLink",e.VKq(29,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu((null==t.tbl_cliente?null:t.tbl_cliente.vch_nombre)||(null==t.tbl_cliente?null:t.tbl_cliente.vch_empresa)),e.xp6(2),e.Q6J("routerLink",e.VKq(31,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu(null==t.tbl_envio?null:t.tbl_envio.vch_nombre),e.xp6(2),e.Q6J("routerLink",e.VKq(33,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.numOrders),e.xp6(2),e.Q6J("routerLink",e.VKq(35,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.numPreparing+"/"+t.numOrders),e.xp6(2),e.Q6J("routerLink",e.VKq(37,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.numDelivering+"/"+t.numOrders),e.xp6(2),e.Q6J("routerLink",e.VKq(39,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.numFinished+"/"+t.numOrders),e.xp6(2),e.Q6J("routerLink",e.VKq(41,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu(t.numError+"/"+t.numOrders),e.xp6(2),e.Q6J("routerLink",e.VKq(43,F,"../detalle/"+t.id)),e.xp6(1),e.Oqu(e.xi3(32,22,t.dt_fecha,"dd/MM/yyyy"))}}function zs(i,n){if(1&i&&(e.TgZ(0,"table",36)(1,"thead")(2,"tr",37)(3,"th",8),e._uU(4,"ID pedido"),e.qZA(),e.TgZ(5,"th",8),e._uU(6,"Rut Cliente"),e.qZA(),e.TgZ(7,"th",8),e._uU(8,"Nombre Cliente"),e.qZA(),e.TgZ(9,"th",8),e._uU(10,"Tipo de Env\xedo"),e.qZA(),e.TgZ(11,"th",8),e._uU(12,"Items"),e.qZA(),e.TgZ(13,"th",8),e._uU(14,"En Preparaci\xf3n"),e.qZA(),e.TgZ(15,"th",8),e._uU(16,"En transito / Listo para retiro"),e.qZA(),e.TgZ(17,"th",8),e._uU(18,"Entregado / Retirado"),e.qZA(),e.TgZ(19,"th",8),e._uU(20,"Error"),e.qZA(),e.TgZ(21,"th",8),e._uU(22,"Fecha"),e.qZA()()(),e.TgZ(23,"tbody",38),e.YNc(24,Hs,33,45,"tr",39),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(24),e.Q6J("ngForOf",t.filteredSales)}}function js(i,n){if(1&i&&(e.TgZ(0,"div",32),e.YNc(1,Js,3,0,"div",33),e.YNc(2,zs,25,1,"ng-template",null,34,e.W1O),e.qZA()),2&i){const t=e.MAs(3),a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.filteredSales&&0==a.filteredSales.length)("ngIfElse",t)}}const Gs=[{path:"",component:vn,children:[{path:"list",component:gn},{path:"detalle/:id",component:Ki},{path:"campaign",component:Yt},{path:"lead",component:nn},{path:"lead/:id",component:Wn},{path:"lead-gestion",component:Ae},{path:"lead-gestion/:id",component:Ae},{path:"add-sale",component:Te},{path:"add-sale/:idQuote",component:Te},{path:"report-excel",component:Er},{path:"cotizacion",component:$r},{path:"cotizacion/:id",component:Ns},{path:"pedidos",component:(()=>{class i{constructor(t,a,o,r){this.ventaProvider=t,this.formBuilder=a,this.userService=o,this.toastService=r,this.filterActive=!1,this.loading=!0,this.loadData()}ngOnInit(){this.filterFormGroup=this.formBuilder.group({vch_nombre:"",vch_rut:"",id_sale:"",id_status:"",id_shipping:"",initDate:"",endDate:""})}loadData(){var t=this;return(0,A.Z)(function*(){yield t.loadShippingMethods(),yield t.loadOrderStatus(),yield t.loadVentas(),t.loading=!1})()}loadVentas(){var t=this;return(0,A.Z)(function*(){try{t.sales=(yield(0,b.z)(t.ventaProvider.getPedidos(t.userService.usuario.id_empresa))).data.sort((a,o)=>o.id-a.id)||[],t.filteredSales=[...t.sales]}catch{}})()}loadShippingMethods(){var t=this;return(0,A.Z)(function*(){try{t.shippingMethods=(yield(0,b.z)(t.ventaProvider.getMediosEnvio())).data||[]}catch{}})()}loadOrderStatus(){var t=this;return(0,A.Z)(function*(){try{t.orderStatus=(yield(0,b.z)(t.ventaProvider.getEstadoPedidos())).data||[]}catch{}})()}filterSubmit(){this.filterActive=!0,this.filteredSales=this.sales.filter(t=>{if(this.filterValidations(t))return t})}getCssStatus(t){return t?"badge-light-success":"badge-light-danger"}removeFilters(){this.filterActive=!1,this.filteredSales=[...this.sales],this.filterFormGroup.reset({id_sale:"",id_status:"",id_shipping:"",vch_nombre:"",vch_rut:"",initDate:"",endDate:""})}filterValidations(t){const a=this.filterFormGroup.value;return!(a.id_sale&&t.id!=a.id_sale&&t.int_orderid!=a.id_sale||a.id_shipping&&t.id_envio!=a.id_shipping||a.id_status&&t.tbl_detalleventa&&!t.tbl_detalleventa.some(o=>o.id_estadopedido==a.id_status)||a.vch_nombre&&!t.tbl_cliente?.vch_nombre?.toLocaleLowerCase().includes(a.vch_nombre.toLocaleLowerCase())&&!t.tbl_cliente?.vch_empresa?.toLocaleLowerCase().includes(a.vch_nombre.toLocaleLowerCase())||a.vch_rut&&!t.tbl_cliente?.vch_rut?.toLocaleLowerCase().includes(a.vch_rut.toLocaleLowerCase())||(a.initDate||a.endDate)&&!this.filterValidateDate(t))}filterValidateDate(t){const a=this.filterFormGroup.value,o=new Date(t.dt_fecha).getTime(),r=a.initDate?new Date(a.initDate.year,a.initDate.month-1,a.initDate.day).getTime():0,s=a.endDate?new Date(a.endDate.year,a.endDate.month-1,a.endDate.day).getTime():Date.now();return o>=r&&o<=s}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.M),e.Y36(d.qu),e.Y36(k.i),e.Y36(q.k))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list"]],decls:43,vars:6,consts:[["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],["id","kt_post",1,"post","d-flex","flex-column-fluid"],["id","kt_content_container",1,"container-xxl"],[1,"card","card-flush"],[1,"card-header","align-items-center","py-5","gap-2","gap-md-5"],[1,"card-title"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["type","text","placeholder","ID pedido","name","id_sale","formControlName","id_sale",1,"form-control"],["type","text","placeholder","Nombre","name","vch_nombre","formControlName","vch_nombre",1,"form-control"],["type","text","placeholder","Rut","name","vch_rut","formControlName","vch_rut",1,"form-control"],["formControlName","id_shipping","name","id_shipping","title","id_shipping",1,"form-select","mb-2"],["value","","disabled","","default","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","mt-5"],["formControlName","id_status","name","id_status","title","id_status",1,"form-select","mb-2"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","initDate","formControlName","initDate","ngbDatepicker","",1,"form-control"],["dInicio","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["placeholder","yyyy-mm-dd","name","endDate","formControlName","endDate","ngbDatepicker","",1,"form-control"],["dFin","ngbDatepicker"],[1,"row","d-flex","justify-content-between","mt-5"],["type","submit","value","Filtrar",1,"btn","btn-primary","mt-4","mb-3","me-4"],["title","borrar filtros","type","button","class","btn btn-danger mt-4 mb-3 me-4",3,"click",4,"ngIf"],["class","text-center mb-10",4,"ngIf"],["class","card-body pt-0","id","sales-table",4,"ngIf"],[3,"value"],["title","borrar filtros","type","button",1,"btn","btn-danger","mt-4","mb-3","me-4",3,"click"],[1,"text-center","mb-10"],["src","/assets/loading.gif","alt","","height","100","width","100"],["id","sales-table",1,"card-body","pt-0"],["class","alert alert-primary d-flex align-items-center m-5","role","alert",4,"ngIf","ngIfElse"],["haveSales",""],["role","alert",1,"alert","alert-primary","d-flex","align-items-center","m-5"],["id","kt_ecommerce_sales_table",1,"table","align-middle","table-row-dashed","fs-6","gy-5"],[1,"text-start","text-gray-400","fw-bolder","fs-7","text-uppercase","gs-0"],[1,"fw-bold","text-gray-600"],[4,"ngFor","ngForOf"],[1,"text-gray-800","text-hover-primary","fw-bolder",3,"routerLink"],[1,"text-gray-800","fs-5","fw-bolder"],[1,"text-gray-800","text-hover-primary","fs-5","fw-bolder",3,"routerLink"],[1,"fw-bolder","text-gray-800","text-hover-primary",3,"routerLink"],["data-order","2022-03-23",1,"pe-0"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),e.NdJ("ngSubmit",function(){return a.filterSubmit()}),e.TgZ(7,"div",7)(8,"div",8),e._UZ(9,"input",9),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"input",10),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"input",11),e.qZA(),e.TgZ(14,"div",8)(15,"select",12)(16,"option",13),e._uU(17,"Tipo de env\xedo"),e.qZA(),e.YNc(18,Vs,2,2,"option",14),e.qZA()()(),e.TgZ(19,"div",15)(20,"div",8)(21,"select",16)(22,"option",13),e._uU(23,"Estado"),e.qZA(),e.YNc(24,Ys,2,2,"option",14),e.qZA()(),e.TgZ(25,"div",8)(26,"div",17),e._UZ(27,"input",18,19),e.TgZ(29,"button",20),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(28);return e.KtG(s.toggle())}),e._uU(30," . "),e.qZA()()(),e.TgZ(31,"div",8)(32,"div",17),e._UZ(33,"input",21,22),e.TgZ(35,"button",20),e.NdJ("click",function(){e.CHM(o);const s=e.MAs(34);return e.KtG(s.toggle())}),e._uU(36," . "),e.qZA()()()(),e.TgZ(37,"div",23)(38,"div",8),e._UZ(39,"input",24),e.YNc(40,Qs,2,0,"button",25),e.qZA()()()()(),e.YNc(41,Bs,2,0,"div",26),e.YNc(42,js,4,2,"div",27),e.qZA()()()()}2&t&&(e.xp6(6),e.Q6J("formGroup",a.filterFormGroup),e.xp6(12),e.Q6J("ngForOf",a.shippingMethods),e.xp6(6),e.Q6J("ngForOf",a.orderStatus),e.xp6(16),e.Q6J("ngIf",a.filterActive),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading))},dependencies:[_.sg,_.O5,x.yS,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,T.J4,d.sg,d.u,_.uU,Us.V]}),i})()},{path:"",redirectTo:"list",pathMatch:"full"},{path:"**",redirectTo:"list",pathMatch:"full"}]}];let $s=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[x.Bz.forChild(Gs),x.Bz]}),i})();var Ks=p(3189),Ws=p(1286),Xs=p(6406),el=p(3126);let tl=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.ez,$s,Ks.h,d.u5,Vt,y.XK,ee,At,Ws.H,T.IJ,d.UX,Ze.d,Xs.ProductModule,el.E,we.vi]}),i})()}}]);